function xS(i,n){for(var o=0;o<n.length;o++){const c=n[o];if(typeof c!="string"&&!Array.isArray(c)){for(const m in c)if(m!=="default"&&!(m in i)){const y=Object.getOwnPropertyDescriptor(c,m);y&&Object.defineProperty(i,m,y.get?y:{enumerable:!0,get:()=>c[m]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))c(m);new MutationObserver(m=>{for(const y of m)if(y.type==="childList")for(const v of y.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&c(v)}).observe(document,{childList:!0,subtree:!0});function o(m){const y={};return m.integrity&&(y.integrity=m.integrity),m.referrerPolicy&&(y.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?y.credentials="include":m.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function c(m){if(m.ep)return;m.ep=!0;const y=o(m);fetch(m.href,y)}})();var NR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function K2(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var y1={exports:{}},Bg={};var rb;function bS(){if(rb)return Bg;rb=1;var i=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function o(c,m,y){var v=null;if(y!==void 0&&(v=""+y),m.key!==void 0&&(v=""+m.key),"key"in m){y={};for(var A in m)A!=="key"&&(y[A]=m[A])}else y=m;return m=y.ref,{$$typeof:i,type:c,key:v,ref:m!==void 0?m:null,props:y}}return Bg.Fragment=n,Bg.jsx=o,Bg.jsxs=o,Bg}var nb;function wS(){return nb||(nb=1,y1.exports=bS()),y1.exports}var j=wS(),_1={exports:{}},On={};var ib;function BS(){if(ib)return On;ib=1;var i=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),y=Symbol.for("react.consumer"),v=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),I=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),Z=Symbol.iterator;function O(Fe){return Fe===null||typeof Fe!="object"?null:(Fe=Z&&Fe[Z]||Fe["@@iterator"],typeof Fe=="function"?Fe:null)}var ce={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ie=Object.assign,W={};function le(Fe,oe,xe){this.props=Fe,this.context=oe,this.refs=W,this.updater=xe||ce}le.prototype.isReactComponent={},le.prototype.setState=function(Fe,oe){if(typeof Fe!="object"&&typeof Fe!="function"&&Fe!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Fe,oe,"setState")},le.prototype.forceUpdate=function(Fe){this.updater.enqueueForceUpdate(this,Fe,"forceUpdate")};function ye(){}ye.prototype=le.prototype;function Be(Fe,oe,xe){this.props=Fe,this.context=oe,this.refs=W,this.updater=xe||ce}var Le=Be.prototype=new ye;Le.constructor=Be,ie(Le,le.prototype),Le.isPureReactComponent=!0;var lt=Array.isArray;function ft(){}var ut={H:null,A:null,T:null,S:null},Ne=Object.prototype.hasOwnProperty;function Ce(Fe,oe,xe){var Ue=xe.ref;return{$$typeof:i,type:Fe,key:oe,ref:Ue!==void 0?Ue:null,props:xe}}function _t(Fe,oe){return Ce(Fe.type,oe,Fe.props)}function _e(Fe){return typeof Fe=="object"&&Fe!==null&&Fe.$$typeof===i}function Te(Fe){var oe={"=":"=0",":":"=2"};return"$"+Fe.replace(/[=:]/g,function(xe){return oe[xe]})}var Ye=/\/+/g;function Ve(Fe,oe){return typeof Fe=="object"&&Fe!==null&&Fe.key!=null?Te(""+Fe.key):oe.toString(36)}function wt(Fe){switch(Fe.status){case"fulfilled":return Fe.value;case"rejected":throw Fe.reason;default:switch(typeof Fe.status=="string"?Fe.then(ft,ft):(Fe.status="pending",Fe.then(function(oe){Fe.status==="pending"&&(Fe.status="fulfilled",Fe.value=oe)},function(oe){Fe.status==="pending"&&(Fe.status="rejected",Fe.reason=oe)})),Fe.status){case"fulfilled":return Fe.value;case"rejected":throw Fe.reason}}throw Fe}function ke(Fe,oe,xe,Ue,Ge){var tt=typeof Fe;(tt==="undefined"||tt==="boolean")&&(Fe=null);var mt=!1;if(Fe===null)mt=!0;else switch(tt){case"bigint":case"string":case"number":mt=!0;break;case"object":switch(Fe.$$typeof){case i:case n:mt=!0;break;case D:return mt=Fe._init,ke(mt(Fe._payload),oe,xe,Ue,Ge)}}if(mt)return Ge=Ge(Fe),mt=Ue===""?"."+Ve(Fe,0):Ue,lt(Ge)?(xe="",mt!=null&&(xe=mt.replace(Ye,"$&/")+"/"),ke(Ge,oe,xe,"",function($t){return $t})):Ge!=null&&(_e(Ge)&&(Ge=_t(Ge,xe+(Ge.key==null||Fe&&Fe.key===Ge.key?"":(""+Ge.key).replace(Ye,"$&/")+"/")+mt)),oe.push(Ge)),1;mt=0;var Pt=Ue===""?".":Ue+":";if(lt(Fe))for(var Et=0;Et<Fe.length;Et++)Ue=Fe[Et],tt=Pt+Ve(Ue,Et),mt+=ke(Ue,oe,xe,tt,Ge);else if(Et=O(Fe),typeof Et=="function")for(Fe=Et.call(Fe),Et=0;!(Ue=Fe.next()).done;)Ue=Ue.value,tt=Pt+Ve(Ue,Et++),mt+=ke(Ue,oe,xe,tt,Ge);else if(tt==="object"){if(typeof Fe.then=="function")return ke(wt(Fe),oe,xe,Ue,Ge);throw oe=String(Fe),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(Fe).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return mt}function ot(Fe,oe,xe){if(Fe==null)return Fe;var Ue=[],Ge=0;return ke(Fe,Ue,"","",function(tt){return oe.call(xe,tt,Ge++)}),Ue}function st(Fe){if(Fe._status===-1){var oe=Fe._result;oe=oe(),oe.then(function(xe){(Fe._status===0||Fe._status===-1)&&(Fe._status=1,Fe._result=xe)},function(xe){(Fe._status===0||Fe._status===-1)&&(Fe._status=2,Fe._result=xe)}),Fe._status===-1&&(Fe._status=0,Fe._result=oe)}if(Fe._status===1)return Fe._result.default;throw Fe._result}var xt=typeof reportError=="function"?reportError:function(Fe){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Fe=="object"&&Fe!==null&&typeof Fe.message=="string"?String(Fe.message):String(Fe),error:Fe});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Fe);return}console.error(Fe)},Ct={map:ot,forEach:function(Fe,oe,xe){ot(Fe,function(){oe.apply(this,arguments)},xe)},count:function(Fe){var oe=0;return ot(Fe,function(){oe++}),oe},toArray:function(Fe){return ot(Fe,function(oe){return oe})||[]},only:function(Fe){if(!_e(Fe))throw Error("React.Children.only expected to receive a single React element child.");return Fe}};return On.Activity=z,On.Children=Ct,On.Component=le,On.Fragment=o,On.Profiler=m,On.PureComponent=Be,On.StrictMode=c,On.Suspense=S,On.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ut,On.__COMPILER_RUNTIME={__proto__:null,c:function(Fe){return ut.H.useMemoCache(Fe)}},On.cache=function(Fe){return function(){return Fe.apply(null,arguments)}},On.cacheSignal=function(){return null},On.cloneElement=function(Fe,oe,xe){if(Fe==null)throw Error("The argument must be a React element, but you passed "+Fe+".");var Ue=ie({},Fe.props),Ge=Fe.key;if(oe!=null)for(tt in oe.key!==void 0&&(Ge=""+oe.key),oe)!Ne.call(oe,tt)||tt==="key"||tt==="__self"||tt==="__source"||tt==="ref"&&oe.ref===void 0||(Ue[tt]=oe[tt]);var tt=arguments.length-2;if(tt===1)Ue.children=xe;else if(1<tt){for(var mt=Array(tt),Pt=0;Pt<tt;Pt++)mt[Pt]=arguments[Pt+2];Ue.children=mt}return Ce(Fe.type,Ge,Ue)},On.createContext=function(Fe){return Fe={$$typeof:v,_currentValue:Fe,_currentValue2:Fe,_threadCount:0,Provider:null,Consumer:null},Fe.Provider=Fe,Fe.Consumer={$$typeof:y,_context:Fe},Fe},On.createElement=function(Fe,oe,xe){var Ue,Ge={},tt=null;if(oe!=null)for(Ue in oe.key!==void 0&&(tt=""+oe.key),oe)Ne.call(oe,Ue)&&Ue!=="key"&&Ue!=="__self"&&Ue!=="__source"&&(Ge[Ue]=oe[Ue]);var mt=arguments.length-2;if(mt===1)Ge.children=xe;else if(1<mt){for(var Pt=Array(mt),Et=0;Et<mt;Et++)Pt[Et]=arguments[Et+2];Ge.children=Pt}if(Fe&&Fe.defaultProps)for(Ue in mt=Fe.defaultProps,mt)Ge[Ue]===void 0&&(Ge[Ue]=mt[Ue]);return Ce(Fe,tt,Ge)},On.createRef=function(){return{current:null}},On.forwardRef=function(Fe){return{$$typeof:A,render:Fe}},On.isValidElement=_e,On.lazy=function(Fe){return{$$typeof:D,_payload:{_status:-1,_result:Fe},_init:st}},On.memo=function(Fe,oe){return{$$typeof:I,type:Fe,compare:oe===void 0?null:oe}},On.startTransition=function(Fe){var oe=ut.T,xe={};ut.T=xe;try{var Ue=Fe(),Ge=ut.S;Ge!==null&&Ge(xe,Ue),typeof Ue=="object"&&Ue!==null&&typeof Ue.then=="function"&&Ue.then(ft,xt)}catch(tt){xt(tt)}finally{oe!==null&&xe.types!==null&&(oe.types=xe.types),ut.T=oe}},On.unstable_useCacheRefresh=function(){return ut.H.useCacheRefresh()},On.use=function(Fe){return ut.H.use(Fe)},On.useActionState=function(Fe,oe,xe){return ut.H.useActionState(Fe,oe,xe)},On.useCallback=function(Fe,oe){return ut.H.useCallback(Fe,oe)},On.useContext=function(Fe){return ut.H.useContext(Fe)},On.useDebugValue=function(){},On.useDeferredValue=function(Fe,oe){return ut.H.useDeferredValue(Fe,oe)},On.useEffect=function(Fe,oe){return ut.H.useEffect(Fe,oe)},On.useEffectEvent=function(Fe){return ut.H.useEffectEvent(Fe)},On.useId=function(){return ut.H.useId()},On.useImperativeHandle=function(Fe,oe,xe){return ut.H.useImperativeHandle(Fe,oe,xe)},On.useInsertionEffect=function(Fe,oe){return ut.H.useInsertionEffect(Fe,oe)},On.useLayoutEffect=function(Fe,oe){return ut.H.useLayoutEffect(Fe,oe)},On.useMemo=function(Fe,oe){return ut.H.useMemo(Fe,oe)},On.useOptimistic=function(Fe,oe){return ut.H.useOptimistic(Fe,oe)},On.useReducer=function(Fe,oe,xe){return ut.H.useReducer(Fe,oe,xe)},On.useRef=function(Fe){return ut.H.useRef(Fe)},On.useState=function(Fe){return ut.H.useState(Fe)},On.useSyncExternalStore=function(Fe,oe,xe){return ut.H.useSyncExternalStore(Fe,oe,xe)},On.useTransition=function(){return ut.H.useTransition()},On.version="19.2.4",On}var ab;function hx(){return ab||(ab=1,_1.exports=BS()),_1.exports}var We=hx();const Gf=K2(We),fx=xS({__proto__:null,default:Gf},[We]);var v1={exports:{}},Cg={},x1={exports:{}},b1={};var sb;function CS(){return sb||(sb=1,(function(i){function n(ke,ot){var st=ke.length;ke.push(ot);e:for(;0<st;){var xt=st-1>>>1,Ct=ke[xt];if(0<m(Ct,ot))ke[xt]=ot,ke[st]=Ct,st=xt;else break e}}function o(ke){return ke.length===0?null:ke[0]}function c(ke){if(ke.length===0)return null;var ot=ke[0],st=ke.pop();if(st!==ot){ke[0]=st;e:for(var xt=0,Ct=ke.length,Fe=Ct>>>1;xt<Fe;){var oe=2*(xt+1)-1,xe=ke[oe],Ue=oe+1,Ge=ke[Ue];if(0>m(xe,st))Ue<Ct&&0>m(Ge,xe)?(ke[xt]=Ge,ke[Ue]=st,xt=Ue):(ke[xt]=xe,ke[oe]=st,xt=oe);else if(Ue<Ct&&0>m(Ge,st))ke[xt]=Ge,ke[Ue]=st,xt=Ue;else break e}}return ot}function m(ke,ot){var st=ke.sortIndex-ot.sortIndex;return st!==0?st:ke.id-ot.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var y=performance;i.unstable_now=function(){return y.now()}}else{var v=Date,A=v.now();i.unstable_now=function(){return v.now()-A}}var S=[],I=[],D=1,z=null,Z=3,O=!1,ce=!1,ie=!1,W=!1,le=typeof setTimeout=="function"?setTimeout:null,ye=typeof clearTimeout=="function"?clearTimeout:null,Be=typeof setImmediate<"u"?setImmediate:null;function Le(ke){for(var ot=o(I);ot!==null;){if(ot.callback===null)c(I);else if(ot.startTime<=ke)c(I),ot.sortIndex=ot.expirationTime,n(S,ot);else break;ot=o(I)}}function lt(ke){if(ie=!1,Le(ke),!ce)if(o(S)!==null)ce=!0,ft||(ft=!0,Te());else{var ot=o(I);ot!==null&&wt(lt,ot.startTime-ke)}}var ft=!1,ut=-1,Ne=5,Ce=-1;function _t(){return W?!0:!(i.unstable_now()-Ce<Ne)}function _e(){if(W=!1,ft){var ke=i.unstable_now();Ce=ke;var ot=!0;try{e:{ce=!1,ie&&(ie=!1,ye(ut),ut=-1),O=!0;var st=Z;try{t:{for(Le(ke),z=o(S);z!==null&&!(z.expirationTime>ke&&_t());){var xt=z.callback;if(typeof xt=="function"){z.callback=null,Z=z.priorityLevel;var Ct=xt(z.expirationTime<=ke);if(ke=i.unstable_now(),typeof Ct=="function"){z.callback=Ct,Le(ke),ot=!0;break t}z===o(S)&&c(S),Le(ke)}else c(S);z=o(S)}if(z!==null)ot=!0;else{var Fe=o(I);Fe!==null&&wt(lt,Fe.startTime-ke),ot=!1}}break e}finally{z=null,Z=st,O=!1}ot=void 0}}finally{ot?Te():ft=!1}}}var Te;if(typeof Be=="function")Te=function(){Be(_e)};else if(typeof MessageChannel<"u"){var Ye=new MessageChannel,Ve=Ye.port2;Ye.port1.onmessage=_e,Te=function(){Ve.postMessage(null)}}else Te=function(){le(_e,0)};function wt(ke,ot){ut=le(function(){ke(i.unstable_now())},ot)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ke){ke.callback=null},i.unstable_forceFrameRate=function(ke){0>ke||125<ke?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ne=0<ke?Math.floor(1e3/ke):5},i.unstable_getCurrentPriorityLevel=function(){return Z},i.unstable_next=function(ke){switch(Z){case 1:case 2:case 3:var ot=3;break;default:ot=Z}var st=Z;Z=ot;try{return ke()}finally{Z=st}},i.unstable_requestPaint=function(){W=!0},i.unstable_runWithPriority=function(ke,ot){switch(ke){case 1:case 2:case 3:case 4:case 5:break;default:ke=3}var st=Z;Z=ke;try{return ot()}finally{Z=st}},i.unstable_scheduleCallback=function(ke,ot,st){var xt=i.unstable_now();switch(typeof st=="object"&&st!==null?(st=st.delay,st=typeof st=="number"&&0<st?xt+st:xt):st=xt,ke){case 1:var Ct=-1;break;case 2:Ct=250;break;case 5:Ct=1073741823;break;case 4:Ct=1e4;break;default:Ct=5e3}return Ct=st+Ct,ke={id:D++,callback:ot,priorityLevel:ke,startTime:st,expirationTime:Ct,sortIndex:-1},st>xt?(ke.sortIndex=st,n(I,ke),o(S)===null&&ke===o(I)&&(ie?(ye(ut),ut=-1):ie=!0,wt(lt,st-xt))):(ke.sortIndex=Ct,n(S,ke),ce||O||(ce=!0,ft||(ft=!0,Te()))),ke},i.unstable_shouldYield=_t,i.unstable_wrapCallback=function(ke){var ot=Z;return function(){var st=Z;Z=ot;try{return ke.apply(this,arguments)}finally{Z=st}}}})(b1)),b1}var ob;function SS(){return ob||(ob=1,x1.exports=CS()),x1.exports}var w1={exports:{}},dA={};var lb;function ES(){if(lb)return dA;lb=1;var i=hx();function n(S){var I="https://react.dev/errors/"+S;if(1<arguments.length){I+="?args[]="+encodeURIComponent(arguments[1]);for(var D=2;D<arguments.length;D++)I+="&args[]="+encodeURIComponent(arguments[D])}return"Minified React error #"+S+"; visit "+I+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var c={d:{f:o,r:function(){throw Error(n(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},m=Symbol.for("react.portal");function y(S,I,D){var z=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:m,key:z==null?null:""+z,children:S,containerInfo:I,implementation:D}}var v=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function A(S,I){if(S==="font")return"";if(typeof I=="string")return I==="use-credentials"?I:""}return dA.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=c,dA.createPortal=function(S,I){var D=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!I||I.nodeType!==1&&I.nodeType!==9&&I.nodeType!==11)throw Error(n(299));return y(S,I,null,D)},dA.flushSync=function(S){var I=v.T,D=c.p;try{if(v.T=null,c.p=2,S)return S()}finally{v.T=I,c.p=D,c.d.f()}},dA.preconnect=function(S,I){typeof S=="string"&&(I?(I=I.crossOrigin,I=typeof I=="string"?I==="use-credentials"?I:"":void 0):I=null,c.d.C(S,I))},dA.prefetchDNS=function(S){typeof S=="string"&&c.d.D(S)},dA.preinit=function(S,I){if(typeof S=="string"&&I&&typeof I.as=="string"){var D=I.as,z=A(D,I.crossOrigin),Z=typeof I.integrity=="string"?I.integrity:void 0,O=typeof I.fetchPriority=="string"?I.fetchPriority:void 0;D==="style"?c.d.S(S,typeof I.precedence=="string"?I.precedence:void 0,{crossOrigin:z,integrity:Z,fetchPriority:O}):D==="script"&&c.d.X(S,{crossOrigin:z,integrity:Z,fetchPriority:O,nonce:typeof I.nonce=="string"?I.nonce:void 0})}},dA.preinitModule=function(S,I){if(typeof S=="string")if(typeof I=="object"&&I!==null){if(I.as==null||I.as==="script"){var D=A(I.as,I.crossOrigin);c.d.M(S,{crossOrigin:D,integrity:typeof I.integrity=="string"?I.integrity:void 0,nonce:typeof I.nonce=="string"?I.nonce:void 0})}}else I==null&&c.d.M(S)},dA.preload=function(S,I){if(typeof S=="string"&&typeof I=="object"&&I!==null&&typeof I.as=="string"){var D=I.as,z=A(D,I.crossOrigin);c.d.L(S,D,{crossOrigin:z,integrity:typeof I.integrity=="string"?I.integrity:void 0,nonce:typeof I.nonce=="string"?I.nonce:void 0,type:typeof I.type=="string"?I.type:void 0,fetchPriority:typeof I.fetchPriority=="string"?I.fetchPriority:void 0,referrerPolicy:typeof I.referrerPolicy=="string"?I.referrerPolicy:void 0,imageSrcSet:typeof I.imageSrcSet=="string"?I.imageSrcSet:void 0,imageSizes:typeof I.imageSizes=="string"?I.imageSizes:void 0,media:typeof I.media=="string"?I.media:void 0})}},dA.preloadModule=function(S,I){if(typeof S=="string")if(I){var D=A(I.as,I.crossOrigin);c.d.m(S,{as:typeof I.as=="string"&&I.as!=="script"?I.as:void 0,crossOrigin:D,integrity:typeof I.integrity=="string"?I.integrity:void 0})}else c.d.m(S)},dA.requestFormReset=function(S){c.d.r(S)},dA.unstable_batchedUpdates=function(S,I){return S(I)},dA.useFormState=function(S,I,D){return v.H.useFormState(S,I,D)},dA.useFormStatus=function(){return v.H.useHostTransitionStatus()},dA.version="19.2.4",dA}var Ab;function Z2(){if(Ab)return w1.exports;Ab=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(n){console.error(n)}}return i(),w1.exports=ES(),w1.exports}var cb;function TS(){if(cb)return Cg;cb=1;var i=SS(),n=hx(),o=Z2();function c(s){var u="https://react.dev/errors/"+s;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)u+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+s+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function m(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function y(s){var u=s,p=s;if(s.alternate)for(;u.return;)u=u.return;else{s=u;do u=s,(u.flags&4098)!==0&&(p=u.return),s=u.return;while(s)}return u.tag===3?p:null}function v(s){if(s.tag===13){var u=s.memoizedState;if(u===null&&(s=s.alternate,s!==null&&(u=s.memoizedState)),u!==null)return u.dehydrated}return null}function A(s){if(s.tag===31){var u=s.memoizedState;if(u===null&&(s=s.alternate,s!==null&&(u=s.memoizedState)),u!==null)return u.dehydrated}return null}function S(s){if(y(s)!==s)throw Error(c(188))}function I(s){var u=s.alternate;if(!u){if(u=y(s),u===null)throw Error(c(188));return u!==s?null:s}for(var p=s,w=u;;){var M=p.return;if(M===null)break;var R=M.alternate;if(R===null){if(w=M.return,w!==null){p=w;continue}break}if(M.child===R.child){for(R=M.child;R;){if(R===p)return S(M),s;if(R===w)return S(M),u;R=R.sibling}throw Error(c(188))}if(p.return!==w.return)p=M,w=R;else{for(var te=!1,be=M.child;be;){if(be===p){te=!0,p=M,w=R;break}if(be===w){te=!0,w=M,p=R;break}be=be.sibling}if(!te){for(be=R.child;be;){if(be===p){te=!0,p=R,w=M;break}if(be===w){te=!0,w=R,p=M;break}be=be.sibling}if(!te)throw Error(c(189))}}if(p.alternate!==w)throw Error(c(190))}if(p.tag!==3)throw Error(c(188));return p.stateNode.current===p?s:u}function D(s){var u=s.tag;if(u===5||u===26||u===27||u===6)return s;for(s=s.child;s!==null;){if(u=D(s),u!==null)return u;s=s.sibling}return null}var z=Object.assign,Z=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),ce=Symbol.for("react.portal"),ie=Symbol.for("react.fragment"),W=Symbol.for("react.strict_mode"),le=Symbol.for("react.profiler"),ye=Symbol.for("react.consumer"),Be=Symbol.for("react.context"),Le=Symbol.for("react.forward_ref"),lt=Symbol.for("react.suspense"),ft=Symbol.for("react.suspense_list"),ut=Symbol.for("react.memo"),Ne=Symbol.for("react.lazy"),Ce=Symbol.for("react.activity"),_t=Symbol.for("react.memo_cache_sentinel"),_e=Symbol.iterator;function Te(s){return s===null||typeof s!="object"?null:(s=_e&&s[_e]||s["@@iterator"],typeof s=="function"?s:null)}var Ye=Symbol.for("react.client.reference");function Ve(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===Ye?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case ie:return"Fragment";case le:return"Profiler";case W:return"StrictMode";case lt:return"Suspense";case ft:return"SuspenseList";case Ce:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case ce:return"Portal";case Be:return s.displayName||"Context";case ye:return(s._context.displayName||"Context")+".Consumer";case Le:var u=s.render;return s=s.displayName,s||(s=u.displayName||u.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case ut:return u=s.displayName||null,u!==null?u:Ve(s.type)||"Memo";case Ne:u=s._payload,s=s._init;try{return Ve(s(u))}catch{}}return null}var wt=Array.isArray,ke=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ot=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,st={pending:!1,data:null,method:null,action:null},xt=[],Ct=-1;function Fe(s){return{current:s}}function oe(s){0>Ct||(s.current=xt[Ct],xt[Ct]=null,Ct--)}function xe(s,u){Ct++,xt[Ct]=s.current,s.current=u}var Ue=Fe(null),Ge=Fe(null),tt=Fe(null),mt=Fe(null);function Pt(s,u){switch(xe(tt,u),xe(Ge,s),xe(Ue,null),u.nodeType){case 9:case 11:s=(s=u.documentElement)&&(s=s.namespaceURI)?$0(s):0;break;default:if(s=u.tagName,u=u.namespaceURI)u=$0(u),s=ag(u,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}oe(Ue),xe(Ue,s)}function Et(){oe(Ue),oe(Ge),oe(tt)}function $t(s){s.memoizedState!==null&&xe(mt,s);var u=Ue.current,p=ag(u,s.type);u!==p&&(xe(Ge,s),xe(Ue,p))}function Ar(s){Ge.current===s&&(oe(Ue),oe(Ge)),mt.current===s&&(oe(mt),Mf._currentValue=st)}var pr,br;function xr(s){if(pr===void 0)try{throw Error()}catch(p){var u=p.stack.trim().match(/\n( *(at )?)/);pr=u&&u[1]||"",br=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+pr+s+br}var Re=!1;function _r(s,u){if(!s||Re)return"";Re=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var w={DetermineComponentFrameRoot:function(){try{if(u){var ir=function(){throw Error()};if(Object.defineProperty(ir.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ir,[])}catch(Gt){var Ot=Gt}Reflect.construct(s,[],ir)}else{try{ir.call()}catch(Gt){Ot=Gt}s.call(ir.prototype)}}else{try{throw Error()}catch(Gt){Ot=Gt}(ir=s())&&typeof ir.catch=="function"&&ir.catch(function(){})}}catch(Gt){if(Gt&&Ot&&typeof Gt.stack=="string")return[Gt.stack,Ot.stack]}return[null,null]}};w.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var M=Object.getOwnPropertyDescriptor(w.DetermineComponentFrameRoot,"name");M&&M.configurable&&Object.defineProperty(w.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var R=w.DetermineComponentFrameRoot(),te=R[0],be=R[1];if(te&&be){var ht=te.split(`
`),Rt=be.split(`
`);for(M=w=0;w<ht.length&&!ht[w].includes("DetermineComponentFrameRoot");)w++;for(;M<Rt.length&&!Rt[M].includes("DetermineComponentFrameRoot");)M++;if(w===ht.length||M===Rt.length)for(w=ht.length-1,M=Rt.length-1;1<=w&&0<=M&&ht[w]!==Rt[M];)M--;for(;1<=w&&0<=M;w--,M--)if(ht[w]!==Rt[M]){if(w!==1||M!==1)do if(w--,M--,0>M||ht[w]!==Rt[M]){var tr=`
`+ht[w].replace(" at new "," at ");return s.displayName&&tr.includes("<anonymous>")&&(tr=tr.replace("<anonymous>",s.displayName)),tr}while(1<=w&&0<=M);break}}}finally{Re=!1,Error.prepareStackTrace=p}return(p=s?s.displayName||s.name:"")?xr(p):""}function Qr(s,u){switch(s.tag){case 26:case 27:case 5:return xr(s.type);case 16:return xr("Lazy");case 13:return s.child!==u&&u!==null?xr("Suspense Fallback"):xr("Suspense");case 19:return xr("SuspenseList");case 0:case 15:return _r(s.type,!1);case 11:return _r(s.type.render,!1);case 1:return _r(s.type,!0);case 31:return xr("Activity");default:return""}}function Wr(s){try{var u="",p=null;do u+=Qr(s,p),p=s,s=s.return;while(s);return u}catch(w){return`
Error generating stack: `+w.message+`
`+w.stack}}var lr=Object.prototype.hasOwnProperty,Zr=i.unstable_scheduleCallback,Sr=i.unstable_cancelCallback,Vr=i.unstable_shouldYield,Gr=i.unstable_requestPaint,mn=i.unstable_now,Cn=i.unstable_getCurrentPriorityLevel,An=i.unstable_ImmediatePriority,Fn=i.unstable_UserBlockingPriority,Sn=i.unstable_NormalPriority,Or=i.unstable_LowPriority,gn=i.unstable_IdlePriority,Je=i.log,ee=i.unstable_setDisableYieldValue,ne=null,Ae=null;function De(s){if(typeof Je=="function"&&ee(s),Ae&&typeof Ae.setStrictMode=="function")try{Ae.setStrictMode(ne,s)}catch{}}var Xe=Math.clz32?Math.clz32:it,At=Math.log,bt=Math.LN2;function it(s){return s>>>=0,s===0?32:31-(At(s)/bt|0)|0}var dt=256,jt=262144,Bt=4194304;function Qe(s){var u=s&42;if(u!==0)return u;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function ur(s,u,p){var w=s.pendingLanes;if(w===0)return 0;var M=0,R=s.suspendedLanes,te=s.pingedLanes;s=s.warmLanes;var be=w&134217727;return be!==0?(w=be&~R,w!==0?M=Qe(w):(te&=be,te!==0?M=Qe(te):p||(p=be&~s,p!==0&&(M=Qe(p))))):(be=w&~R,be!==0?M=Qe(be):te!==0?M=Qe(te):p||(p=w&~s,p!==0&&(M=Qe(p)))),M===0?0:u!==0&&u!==M&&(u&R)===0&&(R=M&-M,p=u&-u,R>=p||R===32&&(p&4194048)!==0)?u:M}function Xr(s,u){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&u)===0}function Er(s,u){switch(s){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zr(){var s=Bt;return Bt<<=1,(Bt&62914560)===0&&(Bt=4194304),s}function Pr(s){for(var u=[],p=0;31>p;p++)u.push(s);return u}function dr(s,u){s.pendingLanes|=u,u!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function mi(s,u,p,w,M,R){var te=s.pendingLanes;s.pendingLanes=p,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=p,s.entangledLanes&=p,s.errorRecoveryDisabledLanes&=p,s.shellSuspendCounter=0;var be=s.entanglements,ht=s.expirationTimes,Rt=s.hiddenUpdates;for(p=te&~p;0<p;){var tr=31-Xe(p),ir=1<<tr;be[tr]=0,ht[tr]=-1;var Ot=Rt[tr];if(Ot!==null)for(Rt[tr]=null,tr=0;tr<Ot.length;tr++){var Gt=Ot[tr];Gt!==null&&(Gt.lane&=-536870913)}p&=~ir}w!==0&&Kn(s,w,0),R!==0&&M===0&&s.tag!==0&&(s.suspendedLanes|=R&~(te&~u))}function Kn(s,u,p){s.pendingLanes|=u,s.suspendedLanes&=~u;var w=31-Xe(u);s.entangledLanes|=u,s.entanglements[w]=s.entanglements[w]|1073741824|p&261930}function Jn(s,u){var p=s.entangledLanes|=u;for(s=s.entanglements;p;){var w=31-Xe(p),M=1<<w;M&u|s[w]&u&&(s[w]|=u),p&=~M}}function wi(s,u){var p=u&-u;return p=(p&42)!==0?1:xn(p),(p&(s.suspendedLanes|u))!==0?0:p}function xn(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Wt(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function fn(){var s=ot.p;return s!==0?s:(s=window.event,s===void 0?32:Kh(s.type))}function li(s,u){var p=ot.p;try{return ot.p=s,u()}finally{ot.p=p}}var xa=Math.random().toString(36).slice(2),Wn="__reactFiber$"+xa,Jt="__reactProps$"+xa,kr="__reactContainer$"+xa,qr="__reactEvents$"+xa,Ji="__reactListeners$"+xa,Ko="__reactHandles$"+xa,os="__reactResources$"+xa,an="__reactMarker$"+xa;function To(s){delete s[Wn],delete s[Jt],delete s[qr],delete s[Ji],delete s[Ko]}function ys(s){var u=s[Wn];if(u)return u;for(var p=s.parentNode;p;){if(u=p[kr]||p[Wn]){if(p=u.alternate,u.child!==null||p!==null&&p.child!==null)for(s=hA(s);s!==null;){if(p=s[Wn])return p;s=hA(s)}return u}s=p,p=s.parentNode}return null}function so(s){if(s=s[Wn]||s[kr]){var u=s.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return s}return null}function _l(s){var u=s.tag;if(u===5||u===26||u===27||u===6)return s.stateNode;throw Error(c(33))}function oo(s){var u=s[os];return u||(u=s[os]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Pi(s){s[an]=!0}var xA=new Set,Ni={};function Zn(s,u){ks(s,u),ks(s+"Capture",u)}function ks(s,u){for(Ni[s]=u,s=0;s<u.length;s++)xA.add(u[s])}var Zo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),XA={},Fo={};function vl(s){return lr.call(Fo,s)?!0:lr.call(XA,s)?!1:Zo.test(s)?Fo[s]=!0:(XA[s]=!0,!1)}function ls(s,u,p){if(vl(u))if(p===null)s.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":s.removeAttribute(u);return;case"boolean":var w=u.toLowerCase().slice(0,5);if(w!=="data-"&&w!=="aria-"){s.removeAttribute(u);return}}s.setAttribute(u,""+p)}}function Hl(s,u,p){if(p===null)s.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttribute(u,""+p)}}function As(s,u,p,w){if(w===null)s.removeAttribute(p);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(p);return}s.setAttributeNS(u,p,""+w)}}function Qn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ea(s){var u=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Vl(s,u,p){var w=Object.getOwnPropertyDescriptor(s.constructor.prototype,u);if(!s.hasOwnProperty(u)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var M=w.get,R=w.set;return Object.defineProperty(s,u,{configurable:!0,get:function(){return M.call(this)},set:function(te){p=""+te,R.call(this,te)}}),Object.defineProperty(s,u,{enumerable:w.enumerable}),{getValue:function(){return p},setValue:function(te){p=""+te},stopTracking:function(){s._valueTracker=null,delete s[u]}}}}function bA(s){if(!s._valueTracker){var u=ea(s)?"checked":"value";s._valueTracker=Vl(s,u,""+s[u])}}function wA(s){if(!s)return!1;var u=s._valueTracker;if(!u)return!0;var p=u.getValue(),w="";return s&&(w=ea(s)?s.checked?"true":"false":s.value),s=w,s!==p?(u.setValue(s),!0):!1}function cs(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Ia=/[\n"\\]/g;function la(s){return s.replace(Ia,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function BA(s,u,p,w,M,R,te,be){s.name="",te!=null&&typeof te!="function"&&typeof te!="symbol"&&typeof te!="boolean"?s.type=te:s.removeAttribute("type"),u!=null?te==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+Qn(u)):s.value!==""+Qn(u)&&(s.value=""+Qn(u)):te!=="submit"&&te!=="reset"||s.removeAttribute("value"),u!=null?WA(s,te,Qn(u)):p!=null?WA(s,te,Qn(p)):w!=null&&s.removeAttribute("value"),M==null&&R!=null&&(s.defaultChecked=!!R),M!=null&&(s.checked=M&&typeof M!="function"&&typeof M!="symbol"),be!=null&&typeof be!="function"&&typeof be!="symbol"&&typeof be!="boolean"?s.name=""+Qn(be):s.removeAttribute("name")}function gu(s,u,p,w,M,R,te,be){if(R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(s.type=R),u!=null||p!=null){if(!(R!=="submit"&&R!=="reset"||u!=null)){bA(s);return}p=p!=null?""+Qn(p):"",u=u!=null?""+Qn(u):p,be||u===s.value||(s.value=u),s.defaultValue=u}w=w??M,w=typeof w!="function"&&typeof w!="symbol"&&!!w,s.checked=be?s.checked:!!w,s.defaultChecked=!!w,te!=null&&typeof te!="function"&&typeof te!="symbol"&&typeof te!="boolean"&&(s.name=te),bA(s)}function WA(s,u,p){u==="number"&&cs(s.ownerDocument)===s||s.defaultValue===""+p||(s.defaultValue=""+p)}function us(s,u,p,w){if(s=s.options,u){u={};for(var M=0;M<p.length;M++)u["$"+p[M]]=!0;for(p=0;p<s.length;p++)M=u.hasOwnProperty("$"+s[p].value),s[p].selected!==M&&(s[p].selected=M),M&&w&&(s[p].defaultSelected=!0)}else{for(p=""+Qn(p),u=null,M=0;M<s.length;M++){if(s[M].value===p){s[M].selected=!0,w&&(s[M].defaultSelected=!0);return}u!==null||s[M].disabled||(u=s[M])}u!==null&&(u.selected=!0)}}function yu(s,u,p){if(u!=null&&(u=""+Qn(u),u!==s.value&&(s.value=u),p==null)){s.defaultValue!==u&&(s.defaultValue=u);return}s.defaultValue=p!=null?""+Qn(p):""}function CA(s,u,p,w){if(u==null){if(w!=null){if(p!=null)throw Error(c(92));if(wt(w)){if(1<w.length)throw Error(c(93));w=w[0]}p=w}p==null&&(p=""),u=p}p=Qn(u),s.defaultValue=p,w=s.textContent,w===p&&w!==""&&w!==null&&(s.value=w),bA(s)}function lo(s,u){if(u){var p=s.firstChild;if(p&&p===s.lastChild&&p.nodeType===3){p.nodeValue=u;return}}s.textContent=u}var YA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function SA(s,u,p){var w=u.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?w?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="":w?s.setProperty(u,p):typeof p!="number"||p===0||YA.has(u)?u==="float"?s.cssFloat=p:s[u]=(""+p).trim():s[u]=p+"px"}function _u(s,u,p){if(u!=null&&typeof u!="object")throw Error(c(62));if(s=s.style,p!=null){for(var w in p)!p.hasOwnProperty(w)||u!=null&&u.hasOwnProperty(w)||(w.indexOf("--")===0?s.setProperty(w,""):w==="float"?s.cssFloat="":s[w]="");for(var M in u)w=u[M],u.hasOwnProperty(M)&&p[M]!==w&&SA(s,M,w)}else for(var R in u)u.hasOwnProperty(R)&&SA(s,R,u[R])}function Rc(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _s=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),EA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function cn(s){return EA.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function hs(){}var TA=null;function FA(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var La=null,Rr=null;function ja(s){var u=so(s);if(u&&(s=u.stateNode)){var p=s[Jt]||null;e:switch(s=u.stateNode,u.type){case"input":if(BA(s,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),u=p.name,p.type==="radio"&&u!=null){for(p=s;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+la(""+u)+'"][type="radio"]'),u=0;u<p.length;u++){var w=p[u];if(w!==s&&w.form===s.form){var M=w[Jt]||null;if(!M)throw Error(c(90));BA(w,M.value,M.defaultValue,M.defaultValue,M.checked,M.defaultChecked,M.type,M.name)}}for(u=0;u<p.length;u++)w=p[u],w.form===s.form&&wA(w)}break e;case"textarea":yu(s,p.value,p.defaultValue);break e;case"select":u=p.value,u!=null&&us(s,!!p.multiple,u,!1)}}}var gi=!1;function Hr(s,u,p){if(gi)return s(u,p);gi=!0;try{var w=s(u);return w}finally{if(gi=!1,(La!==null||Rr!==null)&&(yp(),La&&(u=La,s=Rr,Rr=La=null,ja(u),s)))for(u=0;u<s.length;u++)ja(s[u])}}function Za(s,u){var p=s.stateNode;if(p===null)return null;var w=p[Jt]||null;if(w===null)return null;p=w[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(s=s.type,w=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!w;break e;default:s=!1}if(s)return null;if(p&&typeof p!="function")throw Error(c(231,u,typeof p));return p}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fs=!1;if(jn)try{var Ma={};Object.defineProperty(Ma,"passive",{get:function(){fs=!0}}),window.addEventListener("test",Ma,Ma),window.removeEventListener("test",Ma,Ma)}catch{fs=!1}var vs=null,Os=null,ri=null;function IA(){if(ri)return ri;var s,u=Os,p=u.length,w,M="value"in vs?vs.value:vs.textContent,R=M.length;for(s=0;s<p&&u[s]===M[s];s++);var te=p-s;for(w=1;w<=te&&u[p-w]===M[R-w];w++);return ri=M.slice(s,1<w?1-w:void 0)}function Ua(s){var u=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&u===13&&(s=13)):s=u,s===10&&(s=13),32<=s||s===13?s:0}function Xo(){return!0}function xs(){return!1}function Aa(s){function u(p,w,M,R,te){this._reactName=p,this._targetInst=M,this.type=w,this.nativeEvent=R,this.target=te,this.currentTarget=null;for(var be in s)s.hasOwnProperty(be)&&(p=s[be],this[be]=p?p(R):R[be]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?Xo:xs,this.isPropagationStopped=xs,this}return z(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Xo)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Xo)},persist:function(){},isPersistent:Xo}),u}var ca={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Io=Aa(ca),xl=z({},ca,{view:0,detail:0}),Gl=Aa(xl),Lo,Xn,Mo,In=z({},xl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:un,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Mo&&(Mo&&s.type==="mousemove"?(Lo=s.screenX-Mo.screenX,Xn=s.screenY-Mo.screenY):Xn=Lo=0,Mo=s),Lo)},movementY:function(s){return"movementY"in s?s.movementY:Xn}}),pn=Aa(In),Uo=z({},In,{dataTransfer:0}),En=Aa(Uo),LA=z({},xl,{relatedTarget:0}),Da=Aa(LA),ql=z({},ca,{animationName:0,elapsedTime:0,pseudoElement:0}),V=Aa(ql),he=z({},ca,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),qe=Aa(he),pt=z({},ca,{data:0}),St=Aa(pt),Kt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},or={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Br(s){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(s):(s=wr[s])?!!u[s]:!1}function un(){return Br}var Tn=z({},xl,{key:function(s){if(s.key){var u=Kt[s.key]||s.key;if(u!=="Unidentified")return u}return s.type==="keypress"?(s=Ua(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?or[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:un,charCode:function(s){return s.type==="keypress"?Ua(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ua(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Mn=Aa(Tn),Nn=z({},In,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ua=Aa(Nn),Ci=z({},xl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:un}),Pa=Aa(Ci),Na=z({},ca,{propertyName:0,elapsedTime:0,pseudoElement:0}),ha=Aa(Na),zs=z({},In,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),js=Aa(zs),Wo=z({},ca,{newState:0,oldState:0}),$A=Aa(Wo),bl=[9,13,27,32],fa=jn&&"CompositionEvent"in window,ba=null;jn&&"documentMode"in document&&(ba=document.documentMode);var Kl=jn&&"TextEvent"in window&&!ba,bs=jn&&(!fa||ba&&8<ba&&11>=ba),da=" ",Zl=!1;function wl(s,u){switch(s){case"keyup":return bl.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qc(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Hs=!1;function Vs(s,u){switch(s){case"compositionend":return Qc(u);case"keypress":return u.which!==32?null:(Zl=!0,da);case"textInput":return s=u.data,s===da&&Zl?null:s;default:return null}}function Do(s,u){if(Hs)return s==="compositionend"||!fa&&wl(s,u)?(s=IA(),ri=Os=vs=null,Hs=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return bs&&u.locale!=="ko"?null:u.data;default:return null}}var kc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _c(s){var u=s&&s.nodeName&&s.nodeName.toLowerCase();return u==="input"?!!kc[s.type]:u==="textarea"}function ws(s,u,p,w){La?Rr?Rr.push(w):Rr=[w]:La=w,u=Ic(u,"onChange"),0<u.length&&(p=new Io("onChange","change",null,p,w),s.push({event:p,listeners:u}))}var Yo=null,Bl=null;function Oc(s){pd(s,0)}function $o(s){var u=_l(s);if(wA(u))return s}function Ao(s,u){if(s==="change")return u}var Gs=!1;if(jn){var Bs;if(jn){var qs="oninput"in document;if(!qs){var Cl=document.createElement("div");Cl.setAttribute("oninput","return;"),qs=typeof Cl.oninput=="function"}Bs=qs}else Bs=!1;Gs=Bs&&(!document.documentMode||9<document.documentMode)}function Po(){Yo&&(Yo.detachEvent("onpropertychange",zc),Bl=Yo=null)}function zc(s){if(s.propertyName==="value"&&$o(Bl)){var u=[];ws(u,Bl,s,FA(s)),Hr(Oc,u)}}function jc(s,u,p){s==="focusin"?(Po(),Yo=u,Bl=p,Yo.attachEvent("onpropertychange",zc)):s==="focusout"&&Po()}function pa(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return $o(Bl)}function vu(s,u){if(s==="click")return $o(u)}function co(s,u){if(s==="input"||s==="change")return $o(u)}function Jo(s,u){return s===u&&(s!==0||1/s===1/u)||s!==s&&u!==u}var Xa=typeof Object.is=="function"?Object.is:Jo;function el(s,u){if(Xa(s,u))return!0;if(typeof s!="object"||s===null||typeof u!="object"||u===null)return!1;var p=Object.keys(s),w=Object.keys(u);if(p.length!==w.length)return!1;for(w=0;w<p.length;w++){var M=p[w];if(!lr.call(u,M)||!Xa(s[M],u[M]))return!1}return!0}function uo(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Xl(s,u){var p=uo(s);s=0;for(var w;p;){if(p.nodeType===3){if(w=s+p.textContent.length,s<=u&&w>=u)return{node:p,offset:u-s};s=w}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=uo(p)}}function tl(s,u){return s&&u?s===u?!0:s&&s.nodeType===3?!1:u&&u.nodeType===3?tl(s,u.parentNode):"contains"in s?s.contains(u):s.compareDocumentPosition?!!(s.compareDocumentPosition(u)&16):!1:!1}function Sl(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var u=cs(s.document);u instanceof s.HTMLIFrameElement;){try{var p=typeof u.contentWindow.location.href=="string"}catch{p=!1}if(p)s=u.contentWindow;else break;u=cs(s.document)}return u}function El(s){var u=s&&s.nodeName&&s.nodeName.toLowerCase();return u&&(u==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||u==="textarea"||s.contentEditable==="true")}var Wl=jn&&"documentMode"in document&&11>=document.documentMode,Ra=null,Tl=null,Cs=null,rl=!1;function Ai(s,u,p){var w=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;rl||Ra==null||Ra!==cs(w)||(w=Ra,"selectionStart"in w&&El(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),Cs&&el(Cs,w)||(Cs=w,w=Ic(Tl,"onSelect"),0<w.length&&(u=new Io("onSelect","select",null,u,p),s.push({event:u,listeners:w}),u.target=Ra)))}function ni(s,u){var p={};return p[s.toLowerCase()]=u.toLowerCase(),p["Webkit"+s]="webkit"+u,p["Moz"+s]="moz"+u,p}var Ii={animationend:ni("Animation","AnimationEnd"),animationiteration:ni("Animation","AnimationIteration"),animationstart:ni("Animation","AnimationStart"),transitionrun:ni("Transition","TransitionRun"),transitionstart:ni("Transition","TransitionStart"),transitioncancel:ni("Transition","TransitionCancel"),transitionend:ni("Transition","TransitionEnd")},wa={},Fl={};jn&&(Fl=document.createElement("div").style,"AnimationEvent"in window||(delete Ii.animationend.animation,delete Ii.animationiteration.animation,delete Ii.animationstart.animation),"TransitionEvent"in window||delete Ii.transitionend.transition);function wn(s){if(wa[s])return wa[s];if(!Ii[s])return s;var u=Ii[s],p;for(p in u)if(u.hasOwnProperty(p)&&p in Fl)return wa[s]=u[p];return s}var Yl=wn("animationend"),JA=wn("animationiteration"),xu=wn("animationstart"),ec=wn("transitionrun"),Hc=wn("transitionstart"),vc=wn("transitioncancel"),ho=wn("transitionend"),Wu=new Map,tc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");tc.push("scrollEnd");function fo(s,u){Wu.set(s,u),Zn(u,[s])}var Il=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Ss=[],$l=0,rc=0;function nc(){for(var s=$l,u=rc=$l=0;u<s;){var p=Ss[u];Ss[u++]=null;var w=Ss[u];Ss[u++]=null;var M=Ss[u];Ss[u++]=null;var R=Ss[u];if(Ss[u++]=null,w!==null&&M!==null){var te=w.pending;te===null?M.next=M:(M.next=te.next,te.next=M),w.pending=M}R!==0&&Gc(p,M,R)}}function Vc(s,u,p,w){Ss[$l++]=s,Ss[$l++]=u,Ss[$l++]=p,Ss[$l++]=w,rc|=w,s.lanes|=w,s=s.alternate,s!==null&&(s.lanes|=w)}function MA(s,u,p,w){return Vc(s,u,p,w),Wa(s)}function po(s,u){return Vc(s,null,null,u),Wa(s)}function Gc(s,u,p){s.lanes|=p;var w=s.alternate;w!==null&&(w.lanes|=p);for(var M=!1,R=s.return;R!==null;)R.childLanes|=p,w=R.alternate,w!==null&&(w.childLanes|=p),R.tag===22&&(s=R.stateNode,s===null||s._visibility&1||(M=!0)),s=R,R=R.return;return s.tag===3?(R=s.stateNode,M&&u!==null&&(M=31-Xe(p),s=R.hiddenUpdates,w=s[M],w===null?s[M]=[u]:w.push(u),u.lane=p|536870912),R):null}function Wa(s){if(50<Bf)throw Bf=0,Om=null,Error(c(185));for(var u=s.return;u!==null;)s=u,u=s.return;return s.tag===3?s.stateNode:null}var Yr={};function xc(s,u,p,w){this.tag=s,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Es(s,u,p,w){return new xc(s,u,p,w)}function bu(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Ts(s,u){var p=s.alternate;return p===null?(p=Es(s.tag,u,s.key,s.mode),p.elementType=s.elementType,p.type=s.type,p.stateNode=s.stateNode,p.alternate=s,s.alternate=p):(p.pendingProps=u,p.type=s.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=s.flags&65011712,p.childLanes=s.childLanes,p.lanes=s.lanes,p.child=s.child,p.memoizedProps=s.memoizedProps,p.memoizedState=s.memoizedState,p.updateQueue=s.updateQueue,u=s.dependencies,p.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},p.sibling=s.sibling,p.index=s.index,p.ref=s.ref,p.refCleanup=s.refCleanup,p}function wu(s,u){s.flags&=65011714;var p=s.alternate;return p===null?(s.childLanes=0,s.lanes=u,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=p.childLanes,s.lanes=p.lanes,s.child=p.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=p.memoizedProps,s.memoizedState=p.memoizedState,s.updateQueue=p.updateQueue,s.type=p.type,u=p.dependencies,s.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),s}function qc(s,u,p,w,M,R){var te=0;if(w=s,typeof s=="function")bu(s)&&(te=1);else if(typeof s=="string")te=Np(s,p,Ue.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case Ce:return s=Es(31,p,u,M),s.elementType=Ce,s.lanes=R,s;case ie:return UA(p.children,M,R,u);case W:te=8,M|=24;break;case le:return s=Es(12,p,u,M|2),s.elementType=le,s.lanes=R,s;case lt:return s=Es(13,p,u,M),s.elementType=lt,s.lanes=R,s;case ft:return s=Es(19,p,u,M),s.elementType=ft,s.lanes=R,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Be:te=10;break e;case ye:te=9;break e;case Le:te=11;break e;case ut:te=14;break e;case Ne:te=16,w=null;break e}te=29,p=Error(c(130,s===null?"null":typeof s,"")),w=null}return u=Es(te,p,u,M),u.elementType=s,u.type=w,u.lanes=R,u}function UA(s,u,p,w){return s=Es(7,s,w,u),s.lanes=p,s}function Bu(s,u,p){return s=Es(6,s,null,u),s.lanes=p,s}function Kc(s){var u=Es(18,null,null,0);return u.stateNode=s,u}function DA(s,u,p){return u=Es(4,s.children!==null?s.children:[],s.key,u),u.lanes=p,u.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},u}var Jl=new WeakMap;function Ks(s,u){if(typeof s=="object"&&s!==null){var p=Jl.get(s);return p!==void 0?p:(u={value:s,source:u,stack:Wr(u)},Jl.set(s,u),u)}return{value:s,source:u,stack:Wr(u)}}var ic=[],ac=0,sc=null,oc=0,Fs=[],Qa=0,Ll=null,nl=1,Is="";function No(s,u){ic[ac++]=oc,ic[ac++]=sc,sc=s,oc=u}function Fh(s,u,p){Fs[Qa++]=nl,Fs[Qa++]=Is,Fs[Qa++]=Ll,Ll=s;var w=nl;s=Is;var M=32-Xe(w)-1;w&=~(1<<M),p+=1;var R=32-Xe(u)+M;if(30<R){var te=M-M%5;R=(w&(1<<te)-1).toString(32),w>>=te,M-=te,nl=1<<32-Xe(u)+M|p<<M|w,Is=R+s}else nl=1<<R|p<<M|w,Is=s}function Zc(s){s.return!==null&&(No(s,1),Fh(s,1,0))}function bc(s){for(;s===sc;)sc=ic[--ac],ic[ac]=null,oc=ic[--ac],ic[ac]=null;for(;s===Ll;)Ll=Fs[--Qa],Fs[Qa]=null,Is=Fs[--Qa],Fs[Qa]=null,nl=Fs[--Qa],Fs[Qa]=null}function Yu(s,u){Fs[Qa++]=nl,Fs[Qa++]=Is,Fs[Qa++]=Ll,nl=u.id,Is=u.overflow,Ll=s}var Ya=null,Si=null,kn=!1,Ls=null,qi=!1,ci=Error(c(519));function mo(s){var u=Error(c(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw tA(Ks(u,s)),ci}function Zs(s){var u=s.stateNode,p=s.type,w=s.memoizedProps;switch(u[Wn]=s,u[Jt]=w,p){case"dialog":ti("cancel",u),ti("close",u);break;case"iframe":case"object":case"embed":ti("load",u);break;case"video":case"audio":for(p=0;p<zh.length;p++)ti(zh[p],u);break;case"source":ti("error",u);break;case"img":case"image":case"link":ti("error",u),ti("load",u);break;case"details":ti("toggle",u);break;case"input":ti("invalid",u),gu(u,w.value,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name,!0);break;case"select":ti("invalid",u);break;case"textarea":ti("invalid",u),CA(u,w.value,w.defaultValue,w.children)}p=w.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||u.textContent===""+p||w.suppressHydrationWarning===!0||ig(u.textContent,p)?(w.popover!=null&&(ti("beforetoggle",u),ti("toggle",u)),w.onScroll!=null&&ti("scroll",u),w.onScrollEnd!=null&&ti("scrollend",u),w.onClick!=null&&(u.onclick=hs),u=!0):u=!1,u||mo(s,!0)}function Ml(s){for(Ya=s.return;Ya;)switch(Ya.tag){case 5:case 31:case 13:qi=!1;return;case 27:case 3:qi=!0;return;default:Ya=Ya.return}}function Ba(s){if(s!==Ya)return!1;if(!kn)return Ml(s),kn=!0,!1;var u=s.tag,p;if((p=u!==3&&u!==27)&&((p=u===5)&&(p=s.type,p=!(p!=="form"&&p!=="button")||Qu(s.type,s.memoizedProps)),p=!p),p&&Si&&mo(s),Ml(s),u===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(c(317));Si=lg(s)}else if(u===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(c(317));Si=lg(s)}else u===27?(u=Si,lu(s.type)?(s=ts,ts=null,Si=s):Si=u):Si=Ya?di(s.stateNode.nextSibling):null;return!0}function PA(){Si=Ya=null,kn=!1}function eA(){var s=Ls;return s!==null&&(Pl===null?Pl=s:Pl.push.apply(Pl,s),Ls=null),s}function tA(s){Ls===null?Ls=[s]:Ls.push(s)}var rA=Fe(null),il=null,go=null;function NA(s,u,p){xe(rA,u._currentValue),u._currentValue=p}function Ro(s){s._currentValue=rA.current,oe(rA)}function wc(s,u,p){for(;s!==null;){var w=s.alternate;if((s.childLanes&u)!==u?(s.childLanes|=u,w!==null&&(w.childLanes|=u)):w!==null&&(w.childLanes&u)!==u&&(w.childLanes|=u),s===p)break;s=s.return}}function lc(s,u,p,w){var M=s.child;for(M!==null&&(M.return=s);M!==null;){var R=M.dependencies;if(R!==null){var te=M.child;R=R.firstContext;e:for(;R!==null;){var be=R;R=M;for(var ht=0;ht<u.length;ht++)if(be.context===u[ht]){R.lanes|=p,be=R.alternate,be!==null&&(be.lanes|=p),wc(R.return,p,s),w||(te=null);break e}R=be.next}}else if(M.tag===18){if(te=M.return,te===null)throw Error(c(341));te.lanes|=p,R=te.alternate,R!==null&&(R.lanes|=p),wc(te,p,s),te=null}else te=M.child;if(te!==null)te.return=M;else for(te=M;te!==null;){if(te===s){te=null;break}if(M=te.sibling,M!==null){M.return=te.return,te=M;break}te=te.return}M=te}}function Xs(s,u,p,w){s=null;for(var M=u,R=!1;M!==null;){if(!R){if((M.flags&524288)!==0)R=!0;else if((M.flags&262144)!==0)break}if(M.tag===10){var te=M.alternate;if(te===null)throw Error(c(387));if(te=te.memoizedProps,te!==null){var be=M.type;Xa(M.pendingProps.value,te.value)||(s!==null?s.push(be):s=[be])}}else if(M===mt.current){if(te=M.alternate,te===null)throw Error(c(387));te.memoizedState.memoizedState!==M.memoizedState.memoizedState&&(s!==null?s.push(Mf):s=[Mf])}M=M.return}s!==null&&lc(u,s,p,w),u.flags|=262144}function Cu(s){for(s=s.firstContext;s!==null;){if(!Xa(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function nA(s){il=s,go=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Ha(s){return Ih(il,s)}function Ac(s,u){return il===null&&nA(s),Ih(s,u)}function Ih(s,u){var p=u._currentValue;if(u={context:u,memoizedValue:p,next:null},go===null){if(s===null)throw Error(c(308));go=u,s.dependencies={lanes:0,firstContext:u},s.flags|=524288}else go=go.next=u;return p}var Lh=typeof AbortController<"u"?AbortController:function(){var s=[],u=this.signal={aborted:!1,addEventListener:function(p,w){s.push(w)}};this.abort=function(){u.aborted=!0,s.forEach(function(p){return p()})}},Mh=i.unstable_scheduleCallback,uf=i.unstable_NormalPriority,ta={$$typeof:Be,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function iA(){return{controller:new Lh,data:new Map,refCount:0}}function aA(s){s.refCount--,s.refCount===0&&Mh(uf,function(){s.controller.abort()})}var Ms=null,yo=0,F=0,U=null;function q(s,u){if(Ms===null){var p=Ms=[];yo=0,F=Ef(),U={status:"pending",value:void 0,then:function(w){p.push(w)}}}return yo++,u.then(J,J),u}function J(){if(--yo===0&&Ms!==null){U!==null&&(U.status="fulfilled");var s=Ms;Ms=null,F=0,U=null;for(var u=0;u<s.length;u++)(0,s[u])()}}function fe(s,u){var p=[],w={status:"pending",value:null,reason:null,then:function(M){p.push(M)}};return s.then(function(){w.status="fulfilled",w.value=u;for(var M=0;M<p.length;M++)(0,p[M])(u)},function(M){for(w.status="rejected",w.reason=M,M=0;M<p.length;M++)(0,p[M])(void 0)}),w}var pe=ke.S;ke.S=function(s,u){C0=mn(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&q(s,u),pe!==null&&pe(s,u)};var ge=Fe(null);function we(){var s=ge.current;return s!==null?s:Wi.pooledCache}function Pe(s,u){u===null?xe(ge,ge.current):xe(ge,u.pool)}function Ke(){var s=we();return s===null?null:{parent:ta._currentValue,pool:s}}var yt=Error(c(460)),Mt=Error(c(474)),Oe=Error(c(542)),Ze={then:function(){}};function Ft(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Zt(s,u,p){switch(p=s[p],p===void 0?s.push(u):p!==u&&(u.then(hs,hs),u=p),u.status){case"fulfilled":return u.value;case"rejected":throw s=u.reason,hr(s),s;default:if(typeof u.status=="string")u.then(hs,hs);else{if(s=Wi,s!==null&&100<s.shellSuspendCounter)throw Error(c(482));s=u,s.status="pending",s.then(function(w){if(u.status==="pending"){var M=u;M.status="fulfilled",M.value=w}},function(w){if(u.status==="pending"){var M=u;M.status="rejected",M.reason=w}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw s=u.reason,hr(s),s}throw Vt=u,yt}}function Ut(s){try{var u=s._init;return u(s._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(Vt=p,yt):p}}var Vt=null;function er(){if(Vt===null)throw Error(c(459));var s=Vt;return Vt=null,s}function hr(s){if(s===yt||s===Oe)throw Error(c(483))}var ar=null,Mr=0;function Lr(s){var u=Mr;return Mr+=1,ar===null&&(ar=[]),Zt(ar,s,u)}function yn(s,u){u=u.props.ref,s.ref=u!==void 0?u:null}function Dr(s,u){throw u.$$typeof===Z?Error(c(525)):(s=Object.prototype.toString.call(u),Error(c(31,s==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":s)))}function Hn(s){function u(Tt,vt){if(s){var kt=Tt.deletions;kt===null?(Tt.deletions=[vt],Tt.flags|=16):kt.push(vt)}}function p(Tt,vt){if(!s)return null;for(;vt!==null;)u(Tt,vt),vt=vt.sibling;return null}function w(Tt){for(var vt=new Map;Tt!==null;)Tt.key!==null?vt.set(Tt.key,Tt):vt.set(Tt.index,Tt),Tt=Tt.sibling;return vt}function M(Tt,vt){return Tt=Ts(Tt,vt),Tt.index=0,Tt.sibling=null,Tt}function R(Tt,vt,kt){return Tt.index=kt,s?(kt=Tt.alternate,kt!==null?(kt=kt.index,kt<vt?(Tt.flags|=67108866,vt):kt):(Tt.flags|=67108866,vt)):(Tt.flags|=1048576,vt)}function te(Tt){return s&&Tt.alternate===null&&(Tt.flags|=67108866),Tt}function be(Tt,vt,kt,rr){return vt===null||vt.tag!==6?(vt=Bu(kt,Tt.mode,rr),vt.return=Tt,vt):(vt=M(vt,kt),vt.return=Tt,vt)}function ht(Tt,vt,kt,rr){var ln=kt.type;return ln===ie?tr(Tt,vt,kt.props.children,rr,kt.key):vt!==null&&(vt.elementType===ln||typeof ln=="object"&&ln!==null&&ln.$$typeof===Ne&&Ut(ln)===vt.type)?(vt=M(vt,kt.props),yn(vt,kt),vt.return=Tt,vt):(vt=qc(kt.type,kt.key,kt.props,null,Tt.mode,rr),yn(vt,kt),vt.return=Tt,vt)}function Rt(Tt,vt,kt,rr){return vt===null||vt.tag!==4||vt.stateNode.containerInfo!==kt.containerInfo||vt.stateNode.implementation!==kt.implementation?(vt=DA(kt,Tt.mode,rr),vt.return=Tt,vt):(vt=M(vt,kt.children||[]),vt.return=Tt,vt)}function tr(Tt,vt,kt,rr,ln){return vt===null||vt.tag!==7?(vt=UA(kt,Tt.mode,rr,ln),vt.return=Tt,vt):(vt=M(vt,kt),vt.return=Tt,vt)}function ir(Tt,vt,kt){if(typeof vt=="string"&&vt!==""||typeof vt=="number"||typeof vt=="bigint")return vt=Bu(""+vt,Tt.mode,kt),vt.return=Tt,vt;if(typeof vt=="object"&&vt!==null){switch(vt.$$typeof){case O:return kt=qc(vt.type,vt.key,vt.props,null,Tt.mode,kt),yn(kt,vt),kt.return=Tt,kt;case ce:return vt=DA(vt,Tt.mode,kt),vt.return=Tt,vt;case Ne:return vt=Ut(vt),ir(Tt,vt,kt)}if(wt(vt)||Te(vt))return vt=UA(vt,Tt.mode,kt,null),vt.return=Tt,vt;if(typeof vt.then=="function")return ir(Tt,Lr(vt),kt);if(vt.$$typeof===Be)return ir(Tt,Ac(Tt,vt),kt);Dr(Tt,vt)}return null}function Ot(Tt,vt,kt,rr){var ln=vt!==null?vt.key:null;if(typeof kt=="string"&&kt!==""||typeof kt=="number"||typeof kt=="bigint")return ln!==null?null:be(Tt,vt,""+kt,rr);if(typeof kt=="object"&&kt!==null){switch(kt.$$typeof){case O:return kt.key===ln?ht(Tt,vt,kt,rr):null;case ce:return kt.key===ln?Rt(Tt,vt,kt,rr):null;case Ne:return kt=Ut(kt),Ot(Tt,vt,kt,rr)}if(wt(kt)||Te(kt))return ln!==null?null:tr(Tt,vt,kt,rr,null);if(typeof kt.then=="function")return Ot(Tt,vt,Lr(kt),rr);if(kt.$$typeof===Be)return Ot(Tt,vt,Ac(Tt,kt),rr);Dr(Tt,kt)}return null}function Gt(Tt,vt,kt,rr,ln){if(typeof rr=="string"&&rr!==""||typeof rr=="number"||typeof rr=="bigint")return Tt=Tt.get(kt)||null,be(vt,Tt,""+rr,ln);if(typeof rr=="object"&&rr!==null){switch(rr.$$typeof){case O:return Tt=Tt.get(rr.key===null?kt:rr.key)||null,ht(vt,Tt,rr,ln);case ce:return Tt=Tt.get(rr.key===null?kt:rr.key)||null,Rt(vt,Tt,rr,ln);case Ne:return rr=Ut(rr),Gt(Tt,vt,kt,rr,ln)}if(wt(rr)||Te(rr))return Tt=Tt.get(kt)||null,tr(vt,Tt,rr,ln,null);if(typeof rr.then=="function")return Gt(Tt,vt,kt,Lr(rr),ln);if(rr.$$typeof===Be)return Gt(Tt,vt,kt,Ac(vt,rr),ln);Dr(vt,rr)}return null}function Kr(Tt,vt,kt,rr){for(var ln=null,pi=null,rn=vt,qn=vt=0,hi=null;rn!==null&&qn<kt.length;qn++){rn.index>qn?(hi=rn,rn=null):hi=rn.sibling;var si=Ot(Tt,rn,kt[qn],rr);if(si===null){rn===null&&(rn=hi);break}s&&rn&&si.alternate===null&&u(Tt,rn),vt=R(si,vt,qn),pi===null?ln=si:pi.sibling=si,pi=si,rn=hi}if(qn===kt.length)return p(Tt,rn),kn&&No(Tt,qn),ln;if(rn===null){for(;qn<kt.length;qn++)rn=ir(Tt,kt[qn],rr),rn!==null&&(vt=R(rn,vt,qn),pi===null?ln=rn:pi.sibling=rn,pi=rn);return kn&&No(Tt,qn),ln}for(rn=w(rn);qn<kt.length;qn++)hi=Gt(rn,Tt,qn,kt[qn],rr),hi!==null&&(s&&hi.alternate!==null&&rn.delete(hi.key===null?qn:hi.key),vt=R(hi,vt,qn),pi===null?ln=hi:pi.sibling=hi,pi=hi);return s&&rn.forEach(function(Ea){return u(Tt,Ea)}),kn&&No(Tt,qn),ln}function vn(Tt,vt,kt,rr){if(kt==null)throw Error(c(151));for(var ln=null,pi=null,rn=vt,qn=vt=0,hi=null,si=kt.next();rn!==null&&!si.done;qn++,si=kt.next()){rn.index>qn?(hi=rn,rn=null):hi=rn.sibling;var Ea=Ot(Tt,rn,si.value,rr);if(Ea===null){rn===null&&(rn=hi);break}s&&rn&&Ea.alternate===null&&u(Tt,rn),vt=R(Ea,vt,qn),pi===null?ln=Ea:pi.sibling=Ea,pi=Ea,rn=hi}if(si.done)return p(Tt,rn),kn&&No(Tt,qn),ln;if(rn===null){for(;!si.done;qn++,si=kt.next())si=ir(Tt,si.value,rr),si!==null&&(vt=R(si,vt,qn),pi===null?ln=si:pi.sibling=si,pi=si);return kn&&No(Tt,qn),ln}for(rn=w(rn);!si.done;qn++,si=kt.next())si=Gt(rn,Tt,qn,si.value,rr),si!==null&&(s&&si.alternate!==null&&rn.delete(si.key===null?qn:si.key),vt=R(si,vt,qn),pi===null?ln=si:pi.sibling=si,pi=si);return s&&rn.forEach(function(vg){return u(Tt,vg)}),kn&&No(Tt,qn),ln}function Gi(Tt,vt,kt,rr){if(typeof kt=="object"&&kt!==null&&kt.type===ie&&kt.key===null&&(kt=kt.props.children),typeof kt=="object"&&kt!==null){switch(kt.$$typeof){case O:e:{for(var ln=kt.key;vt!==null;){if(vt.key===ln){if(ln=kt.type,ln===ie){if(vt.tag===7){p(Tt,vt.sibling),rr=M(vt,kt.props.children),rr.return=Tt,Tt=rr;break e}}else if(vt.elementType===ln||typeof ln=="object"&&ln!==null&&ln.$$typeof===Ne&&Ut(ln)===vt.type){p(Tt,vt.sibling),rr=M(vt,kt.props),yn(rr,kt),rr.return=Tt,Tt=rr;break e}p(Tt,vt);break}else u(Tt,vt);vt=vt.sibling}kt.type===ie?(rr=UA(kt.props.children,Tt.mode,rr,kt.key),rr.return=Tt,Tt=rr):(rr=qc(kt.type,kt.key,kt.props,null,Tt.mode,rr),yn(rr,kt),rr.return=Tt,Tt=rr)}return te(Tt);case ce:e:{for(ln=kt.key;vt!==null;){if(vt.key===ln)if(vt.tag===4&&vt.stateNode.containerInfo===kt.containerInfo&&vt.stateNode.implementation===kt.implementation){p(Tt,vt.sibling),rr=M(vt,kt.children||[]),rr.return=Tt,Tt=rr;break e}else{p(Tt,vt);break}else u(Tt,vt);vt=vt.sibling}rr=DA(kt,Tt.mode,rr),rr.return=Tt,Tt=rr}return te(Tt);case Ne:return kt=Ut(kt),Gi(Tt,vt,kt,rr)}if(wt(kt))return Kr(Tt,vt,kt,rr);if(Te(kt)){if(ln=Te(kt),typeof ln!="function")throw Error(c(150));return kt=ln.call(kt),vn(Tt,vt,kt,rr)}if(typeof kt.then=="function")return Gi(Tt,vt,Lr(kt),rr);if(kt.$$typeof===Be)return Gi(Tt,vt,Ac(Tt,kt),rr);Dr(Tt,kt)}return typeof kt=="string"&&kt!==""||typeof kt=="number"||typeof kt=="bigint"?(kt=""+kt,vt!==null&&vt.tag===6?(p(Tt,vt.sibling),rr=M(vt,kt),rr.return=Tt,Tt=rr):(p(Tt,vt),rr=Bu(kt,Tt.mode,rr),rr.return=Tt,Tt=rr),te(Tt)):p(Tt,vt)}return function(Tt,vt,kt,rr){try{Mr=0;var ln=Gi(Tt,vt,kt,rr);return ar=null,ln}catch(rn){if(rn===yt||rn===Oe)throw rn;var pi=Es(29,rn,null,Tt.mode);return pi.lanes=rr,pi.return=Tt,pi}}}var Li=Hn(!0),Bn=Hn(!1),Fr=!1;function vr(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qi(s,u){s=s.updateQueue,u.updateQueue===s&&(u.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function dn(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ln(s,u,p){var w=s.updateQueue;if(w===null)return null;if(w=w.shared,(Ui&2)!==0){var M=w.pending;return M===null?u.next=u:(u.next=M.next,M.next=u),w.pending=u,u=Wa(s),Gc(s,null,p),u}return Vc(s,w,u,p),Wa(s)}function Vn(s,u,p){if(u=u.updateQueue,u!==null&&(u=u.shared,(p&4194048)!==0)){var w=u.lanes;w&=s.pendingLanes,p|=w,u.lanes=p,Jn(s,p)}}function bn(s,u){var p=s.updateQueue,w=s.alternate;if(w!==null&&(w=w.updateQueue,p===w)){var M=null,R=null;if(p=p.firstBaseUpdate,p!==null){do{var te={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};R===null?M=R=te:R=R.next=te,p=p.next}while(p!==null);R===null?M=R=u:R=R.next=u}else M=R=u;p={baseState:w.baseState,firstBaseUpdate:M,lastBaseUpdate:R,shared:w.shared,callbacks:w.callbacks},s.updateQueue=p;return}s=p.lastBaseUpdate,s===null?p.firstBaseUpdate=u:s.next=u,p.lastBaseUpdate=u}var $a=!1;function Bi(){if($a){var s=U;if(s!==null)throw s}}function Ki(s,u,p,w){$a=!1;var M=s.updateQueue;Fr=!1;var R=M.firstBaseUpdate,te=M.lastBaseUpdate,be=M.shared.pending;if(be!==null){M.shared.pending=null;var ht=be,Rt=ht.next;ht.next=null,te===null?R=Rt:te.next=Rt,te=ht;var tr=s.alternate;tr!==null&&(tr=tr.updateQueue,be=tr.lastBaseUpdate,be!==te&&(be===null?tr.firstBaseUpdate=Rt:be.next=Rt,tr.lastBaseUpdate=ht))}if(R!==null){var ir=M.baseState;te=0,tr=Rt=ht=null,be=R;do{var Ot=be.lane&-536870913,Gt=Ot!==be.lane;if(Gt?(ui&Ot)===Ot:(w&Ot)===Ot){Ot!==0&&Ot===F&&($a=!0),tr!==null&&(tr=tr.next={lane:0,tag:be.tag,payload:be.payload,callback:null,next:null});e:{var Kr=s,vn=be;Ot=u;var Gi=p;switch(vn.tag){case 1:if(Kr=vn.payload,typeof Kr=="function"){ir=Kr.call(Gi,ir,Ot);break e}ir=Kr;break e;case 3:Kr.flags=Kr.flags&-65537|128;case 0:if(Kr=vn.payload,Ot=typeof Kr=="function"?Kr.call(Gi,ir,Ot):Kr,Ot==null)break e;ir=z({},ir,Ot);break e;case 2:Fr=!0}}Ot=be.callback,Ot!==null&&(s.flags|=64,Gt&&(s.flags|=8192),Gt=M.callbacks,Gt===null?M.callbacks=[Ot]:Gt.push(Ot))}else Gt={lane:Ot,tag:be.tag,payload:be.payload,callback:be.callback,next:null},tr===null?(Rt=tr=Gt,ht=ir):tr=tr.next=Gt,te|=Ot;if(be=be.next,be===null){if(be=M.shared.pending,be===null)break;Gt=be,be=Gt.next,Gt.next=null,M.lastBaseUpdate=Gt,M.shared.pending=null}}while(!0);tr===null&&(ht=ir),M.baseState=ht,M.firstBaseUpdate=Rt,M.lastBaseUpdate=tr,R===null&&(M.shared.lanes=0),oh|=te,s.lanes=te,s.memoizedState=ir}}function Ja(s,u){if(typeof s!="function")throw Error(c(191,s));s.call(u)}function ma(s,u){var p=s.callbacks;if(p!==null)for(s.callbacks=null,s=0;s<p.length;s++)Ja(p[s],u)}var Rn=Fe(null),ii=Fe(0);function ra(s,u){s=Fc,xe(ii,s),xe(Rn,u),Fc=s|u.baseLanes}function Un(){xe(ii,Fc),xe(Rn,Rn.current)}function na(){Fc=ii.current,oe(Rn),oe(ii)}var gr=Fe(null),yr=null;function Ei(s){var u=s.alternate;xe(Yn,Yn.current&1),xe(gr,s),yr===null&&(u===null||Rn.current!==null||u.memoizedState!==null)&&(yr=s)}function yi(s){xe(Yn,Yn.current),xe(gr,s),yr===null&&(yr=s)}function ki(s){s.tag===22?(xe(Yn,Yn.current),xe(gr,s),yr===null&&(yr=s)):ei()}function ei(){xe(Yn,Yn.current),xe(gr,gr.current)}function Gn(s){oe(gr),yr===s&&(yr=null),oe(Yn)}var Yn=Fe(0);function ds(s){for(var u=s;u!==null;){if(u.tag===13){var p=u.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||VA(p)||ku(p)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var ia=0,on=null,tn=null,sn=null,$n=!1,Qo=!1,Zi=!1,aa=0,sA=0,oA=null,Bc=0;function _i(){throw Error(c(321))}function Su(s,u){if(u===null)return!1;for(var p=0;p<u.length&&p<s.length;p++)if(!Xa(s[p],u[p]))return!1;return!0}function Ul(s,u,p,w,M,R){return ia=R,on=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,ke.H=s===null||s.memoizedState===null?Ti:ji,Zi=!1,R=p(w,M),Zi=!1,Qo&&(R=ko(u,p,w,M)),Cc(s),R}function Cc(s){ke.H=$s;var u=tn!==null&&tn.next!==null;if(ia=0,sn=tn=on=null,$n=!1,sA=0,oA=null,u)throw Error(c(300));s===null||Us||(s=s.dependencies,s!==null&&Cu(s)&&(Us=!0))}function ko(s,u,p,w){on=s;var M=0;do{if(Qo&&(oA=null),sA=0,Qo=!1,25<=M)throw Error(c(301));if(M+=1,sn=tn=null,s.updateQueue!=null){var R=s.updateQueue;R.lastEffect=null,R.events=null,R.stores=null,R.memoCache!=null&&(R.memoCache.index=0)}ke.H=sl,R=u(p,w)}while(Qo);return R}function $u(){var s=ke.H,u=s.useState()[0];return u=typeof u.then=="function"?_o(u):u,s=s.useState()[0],(tn!==null?tn.memoizedState:null)!==s&&(on.flags|=1024),u}function Sc(){var s=aa!==0;return aa=0,s}function Eu(s,u,p){u.updateQueue=s.updateQueue,u.flags&=-2053,s.lanes&=~p}function RA(s){if($n){for(s=s.memoizedState;s!==null;){var u=s.queue;u!==null&&(u.pending=null),s=s.next}$n=!1}ia=0,sn=tn=on=null,Qo=!1,sA=aa=0,oA=null}function Xi(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?on.memoizedState=sn=s:sn=sn.next=s,sn}function Oi(){if(tn===null){var s=on.alternate;s=s!==null?s.memoizedState:null}else s=tn.next;var u=sn===null?on.memoizedState:sn.next;if(u!==null)sn=u,tn=s;else{if(s===null)throw on.alternate===null?Error(c(467)):Error(c(310));tn=s,s={memoizedState:tn.memoizedState,baseState:tn.baseState,baseQueue:tn.baseQueue,queue:tn.queue,next:null},sn===null?on.memoizedState=sn=s:sn=sn.next=s}return sn}function cc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _o(s){var u=sA;return sA+=1,oA===null&&(oA=[]),s=Zt(oA,s,u),u=on,(sn===null?u.memoizedState:sn.next)===null&&(u=u.alternate,ke.H=u===null||u.memoizedState===null?Ti:ji),s}function QA(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return _o(s);if(s.$$typeof===Be)return Ha(s)}throw Error(c(438,String(s)))}function kA(s){var u=null,p=on.updateQueue;if(p!==null&&(u=p.memoCache),u==null){var w=on.alternate;w!==null&&(w=w.updateQueue,w!==null&&(w=w.memoCache,w!=null&&(u={data:w.data.map(function(M){return M.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),p===null&&(p=cc(),on.updateQueue=p),p.memoCache=u,p=u.data[u.index],p===void 0)for(p=u.data[u.index]=Array(s),w=0;w<s;w++)p[w]=_t;return u.index++,p}function Oo(s,u){return typeof u=="function"?u(s):u}function Xc(s){var u=Oi();return b(u,tn,s)}function b(s,u,p){var w=s.queue;if(w===null)throw Error(c(311));w.lastRenderedReducer=p;var M=s.baseQueue,R=w.pending;if(R!==null){if(M!==null){var te=M.next;M.next=R.next,R.next=te}u.baseQueue=M=R,w.pending=null}if(R=s.baseState,M===null)s.memoizedState=R;else{u=M.next;var be=te=null,ht=null,Rt=u,tr=!1;do{var ir=Rt.lane&-536870913;if(ir!==Rt.lane?(ui&ir)===ir:(ia&ir)===ir){var Ot=Rt.revertLane;if(Ot===0)ht!==null&&(ht=ht.next={lane:0,revertLane:0,gesture:null,action:Rt.action,hasEagerState:Rt.hasEagerState,eagerState:Rt.eagerState,next:null}),ir===F&&(tr=!0);else if((ia&Ot)===Ot){Rt=Rt.next,Ot===F&&(tr=!0);continue}else ir={lane:0,revertLane:Rt.revertLane,gesture:null,action:Rt.action,hasEagerState:Rt.hasEagerState,eagerState:Rt.eagerState,next:null},ht===null?(be=ht=ir,te=R):ht=ht.next=ir,on.lanes|=Ot,oh|=Ot;ir=Rt.action,Zi&&p(R,ir),R=Rt.hasEagerState?Rt.eagerState:p(R,ir)}else Ot={lane:ir,revertLane:Rt.revertLane,gesture:Rt.gesture,action:Rt.action,hasEagerState:Rt.hasEagerState,eagerState:Rt.eagerState,next:null},ht===null?(be=ht=Ot,te=R):ht=ht.next=Ot,on.lanes|=ir,oh|=ir;Rt=Rt.next}while(Rt!==null&&Rt!==u);if(ht===null?te=R:ht.next=be,!Xa(R,s.memoizedState)&&(Us=!0,tr&&(p=U,p!==null)))throw p;s.memoizedState=R,s.baseState=te,s.baseQueue=ht,w.lastRenderedState=R}return M===null&&(w.lanes=0),[s.memoizedState,w.dispatch]}function t(s){var u=Oi(),p=u.queue;if(p===null)throw Error(c(311));p.lastRenderedReducer=s;var w=p.dispatch,M=p.pending,R=u.memoizedState;if(M!==null){p.pending=null;var te=M=M.next;do R=s(R,te.action),te=te.next;while(te!==M);Xa(R,u.memoizedState)||(Us=!0),u.memoizedState=R,u.baseQueue===null&&(u.baseState=R),p.lastRenderedState=R}return[R,w]}function l(s,u,p){var w=on,M=Oi(),R=kn;if(R){if(p===void 0)throw Error(c(407));p=p()}else p=u();var te=!Xa((tn||M).memoizedState,p);if(te&&(M.memoizedState=p,Us=!0),M=M.queue,It(B.bind(null,w,M,s),[s]),M.getSnapshot!==u||te||sn!==null&&sn.memoizedState.tag&1){if(w.flags|=2048,at(9,{destroy:void 0},g.bind(null,w,M,p,u),null),Wi===null)throw Error(c(349));R||(ia&127)!==0||f(w,u,p)}return p}function f(s,u,p){s.flags|=16384,s={getSnapshot:u,value:p},u=on.updateQueue,u===null?(u=cc(),on.updateQueue=u,u.stores=[s]):(p=u.stores,p===null?u.stores=[s]:p.push(s))}function g(s,u,p,w){u.value=p,u.getSnapshot=w,E(u)&&L(s)}function B(s,u,p){return p(function(){E(u)&&L(s)})}function E(s){var u=s.getSnapshot;s=s.value;try{var p=u();return!Xa(s,p)}catch{return!0}}function L(s){var u=po(s,2);u!==null&&Nl(u,s,2)}function N(s){var u=Xi();if(typeof s=="function"){var p=s;if(s=p(),Zi){De(!0);try{p()}finally{De(!1)}}}return u.memoizedState=u.baseState=s,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oo,lastRenderedState:s},u}function H(s,u,p,w){return s.baseState=p,b(s,tn,typeof w=="function"?w:Oo)}function G(s,u,p,w,M){if(Ys(s))throw Error(c(485));if(s=u.action,s!==null){var R={payload:M,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(te){R.listeners.push(te)}};ke.T!==null?p(!0):R.isTransition=!1,w(R),p=u.pending,p===null?(R.next=u.pending=R,$(u,R)):(R.next=p.next,u.pending=p.next=R)}}function $(s,u){var p=u.action,w=u.payload,M=s.state;if(u.isTransition){var R=ke.T,te={};ke.T=te;try{var be=p(M,w),ht=ke.S;ht!==null&&ht(te,be),Y(s,u,be)}catch(Rt){de(s,u,Rt)}finally{R!==null&&te.types!==null&&(R.types=te.types),ke.T=R}}else try{R=p(M,w),Y(s,u,R)}catch(Rt){de(s,u,Rt)}}function Y(s,u,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(w){se(s,u,w)},function(w){return de(s,u,w)}):se(s,u,p)}function se(s,u,p){u.status="fulfilled",u.value=p,Se(u),s.state=p,u=s.pending,u!==null&&(p=u.next,p===u?s.pending=null:(p=p.next,u.next=p,$(s,p)))}function de(s,u,p){var w=s.pending;if(s.pending=null,w!==null){w=w.next;do u.status="rejected",u.reason=p,Se(u),u=u.next;while(u!==w)}s.action=null}function Se(s){s=s.listeners;for(var u=0;u<s.length;u++)(0,s[u])()}function Me(s,u){return u}function Ee(s,u){if(kn){var p=Wi.formState;if(p!==null){e:{var w=on;if(kn){if(Si){t:{for(var M=Si,R=qi;M.nodeType!==8;){if(!R){M=null;break t}if(M=di(M.nextSibling),M===null){M=null;break t}}R=M.data,M=R==="F!"||R==="F"?M:null}if(M){Si=di(M.nextSibling),w=M.data==="F!";break e}}mo(w)}w=!1}w&&(u=p[0])}}return p=Xi(),p.memoizedState=p.baseState=u,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Me,lastRenderedState:u},p.queue=w,p=Ju.bind(null,on,w),w.dispatch=p,w=N(!1),R=Wc.bind(null,on,!1,w.queue),w=Xi(),M={state:u,dispatch:null,action:s,pending:null},w.queue=M,p=G.bind(null,on,M,R,p),M.dispatch=p,w.memoizedState=s,[u,p,!1]}function je(s){var u=Oi();return et(u,tn,s)}function et(s,u,p){if(u=b(s,u,Me)[0],s=Xc(Oo)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var w=_o(u)}catch(te){throw te===yt?Oe:te}else w=u;u=Oi();var M=u.queue,R=M.dispatch;return p!==u.memoizedState&&(on.flags|=2048,at(9,{destroy:void 0},ze.bind(null,M,p),null)),[w,R,s]}function ze(s,u){s.action=u}function nt(s){var u=Oi(),p=tn;if(p!==null)return et(u,p,s);Oi(),u=u.memoizedState,p=Oi();var w=p.queue.dispatch;return p.memoizedState=s,[u,w,!1]}function at(s,u,p,w){return s={tag:s,create:p,deps:w,inst:u,next:null},u=on.updateQueue,u===null&&(u=cc(),on.updateQueue=u),p=u.lastEffect,p===null?u.lastEffect=s.next=s:(w=p.next,p.next=s,s.next=w,u.lastEffect=s),s}function $e(){return Oi().memoizedState}function gt(s,u,p,w){var M=Xi();on.flags|=s,M.memoizedState=at(1|u,{destroy:void 0},p,w===void 0?null:w)}function Nt(s,u,p,w){var M=Oi();w=w===void 0?null:w;var R=M.memoizedState.inst;tn!==null&&w!==null&&Su(w,tn.memoizedState.deps)?M.memoizedState=at(u,R,p,w):(on.flags|=s,M.memoizedState=at(1|u,R,p,w))}function Dt(s,u){gt(8390656,8,s,u)}function It(s,u){Nt(2048,8,s,u)}function Qt(s){on.flags|=4;var u=on.updateQueue;if(u===null)u=cc(),on.updateQueue=u,u.events=[s];else{var p=u.events;p===null?u.events=[s]:p.push(s)}}function cr(s){var u=Oi().memoizedState;return Qt({ref:u,nextImpl:s}),function(){if((Ui&2)!==0)throw Error(c(440));return u.impl.apply(void 0,arguments)}}function fr(s,u){return Nt(4,2,s,u)}function Ht(s,u){return Nt(4,4,s,u)}function Tr(s,u){if(typeof u=="function"){s=s();var p=u(s);return function(){typeof p=="function"?p():u(null)}}if(u!=null)return s=s(),u.current=s,function(){u.current=null}}function _n(s,u,p){p=p!=null?p.concat([s]):null,Nt(4,4,Tr.bind(null,u,s),p)}function fi(){}function Ri(s,u){var p=Oi();u=u===void 0?null:u;var w=p.memoizedState;return u!==null&&Su(u,w[1])?w[0]:(p.memoizedState=[s,u],s)}function Mi(s,u){var p=Oi();u=u===void 0?null:u;var w=p.memoizedState;if(u!==null&&Su(u,w[1]))return w[0];if(w=s(),Zi){De(!0);try{s()}finally{De(!1)}}return p.memoizedState=[w,u],w}function zi(s,u,p){return p===void 0||(ia&1073741824)!==0&&(ui&261930)===0?s.memoizedState=u:(s.memoizedState=p,s=E0(),on.lanes|=s,oh|=s,p)}function vi(s,u,p,w){return Xa(p,u)?p:Rn.current!==null?(s=zi(s,p,w),Xa(s,u)||(Us=!0),s):(ia&42)===0||(ia&1073741824)!==0&&(ui&261930)===0?(Us=!0,s.memoizedState=p):(s=E0(),on.lanes|=s,oh|=s,u)}function Va(s,u,p,w,M){var R=ot.p;ot.p=R!==0&&8>R?R:8;var te=ke.T,be={};ke.T=be,Wc(s,!1,u,p);try{var ht=M(),Rt=ke.S;if(Rt!==null&&Rt(be,ht),ht!==null&&typeof ht=="object"&&typeof ht.then=="function"){var tr=fe(ht,w);Tc(s,u,tr,HA(s))}else Tc(s,u,w,HA(s))}catch(ir){Tc(s,u,{then:function(){},status:"rejected",reason:ir},HA())}finally{ot.p=R,te!==null&&be.types!==null&&(te.types=be.types),ke.T=te}}function sa(){}function ps(s,u,p,w){if(s.tag!==5)throw Error(c(476));var M=ga(s).queue;Va(s,M,u,st,p===null?sa:function(){return ya(s),p(w)})}function ga(s){var u=s.memoizedState;if(u!==null)return u;u={memoizedState:st,baseState:st,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oo,lastRenderedState:st},next:null};var p={};return u.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oo,lastRenderedState:p},next:null},s.memoizedState=u,s=s.alternate,s!==null&&(s.memoizedState=u),u}function ya(s){var u=ga(s);u.next===null&&(u=s.alternate.memoizedState),Tc(s,u.next.queue,{},HA())}function Ws(){return Ha(Mf)}function uc(){return Oi().memoizedState}function OA(){return Oi().memoizedState}function zo(s){for(var u=s.return;u!==null;){switch(u.tag){case 24:case 3:var p=HA();s=dn(p);var w=Ln(u,s,p);w!==null&&(Nl(w,u,p),Vn(w,u,p)),u={cache:iA()},s.payload=u;return}u=u.return}}function Ec(s,u,p){var w=HA();p={lane:w,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Ys(s)?Dl(u,p):(p=MA(s,u,p,w),p!==null&&(Nl(p,s,w),al(p,u,w)))}function Ju(s,u,p){var w=HA();Tc(s,u,p,w)}function Tc(s,u,p,w){var M={lane:w,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(Ys(s))Dl(u,M);else{var R=s.alternate;if(s.lanes===0&&(R===null||R.lanes===0)&&(R=u.lastRenderedReducer,R!==null))try{var te=u.lastRenderedState,be=R(te,p);if(M.hasEagerState=!0,M.eagerState=be,Xa(be,te))return Vc(s,u,M,0),Wi===null&&nc(),!1}catch{}if(p=MA(s,u,M,w),p!==null)return Nl(p,s,w),al(p,u,w),!0}return!1}function Wc(s,u,p,w){if(w={lane:2,revertLane:Ef(),gesture:null,action:w,hasEagerState:!1,eagerState:null,next:null},Ys(s)){if(u)throw Error(c(479))}else u=MA(s,p,w,2),u!==null&&Nl(u,s,2)}function Ys(s){var u=s.alternate;return s===on||u!==null&&u===on}function Dl(s,u){Qo=$n=!0;var p=s.pending;p===null?u.next=u:(u.next=p.next,p.next=u),s.pending=u}function al(s,u,p){if((p&4194048)!==0){var w=u.lanes;w&=s.pendingLanes,p|=w,u.lanes=p,Jn(s,p)}}var $s={readContext:Ha,use:QA,useCallback:_i,useContext:_i,useEffect:_i,useImperativeHandle:_i,useLayoutEffect:_i,useInsertionEffect:_i,useMemo:_i,useReducer:_i,useRef:_i,useState:_i,useDebugValue:_i,useDeferredValue:_i,useTransition:_i,useSyncExternalStore:_i,useId:_i,useHostTransitionStatus:_i,useFormState:_i,useActionState:_i,useOptimistic:_i,useMemoCache:_i,useCacheRefresh:_i};$s.useEffectEvent=_i;var Ti={readContext:Ha,use:QA,useCallback:function(s,u){return Xi().memoizedState=[s,u===void 0?null:u],s},useContext:Ha,useEffect:Dt,useImperativeHandle:function(s,u,p){p=p!=null?p.concat([s]):null,gt(4194308,4,Tr.bind(null,u,s),p)},useLayoutEffect:function(s,u){return gt(4194308,4,s,u)},useInsertionEffect:function(s,u){gt(4,2,s,u)},useMemo:function(s,u){var p=Xi();u=u===void 0?null:u;var w=s();if(Zi){De(!0);try{s()}finally{De(!1)}}return p.memoizedState=[w,u],w},useReducer:function(s,u,p){var w=Xi();if(p!==void 0){var M=p(u);if(Zi){De(!0);try{p(u)}finally{De(!1)}}}else M=u;return w.memoizedState=w.baseState=M,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:M},w.queue=s,s=s.dispatch=Ec.bind(null,on,s),[w.memoizedState,s]},useRef:function(s){var u=Xi();return s={current:s},u.memoizedState=s},useState:function(s){s=N(s);var u=s.queue,p=Ju.bind(null,on,u);return u.dispatch=p,[s.memoizedState,p]},useDebugValue:fi,useDeferredValue:function(s,u){var p=Xi();return zi(p,s,u)},useTransition:function(){var s=N(!1);return s=Va.bind(null,on,s.queue,!0,!1),Xi().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,u,p){var w=on,M=Xi();if(kn){if(p===void 0)throw Error(c(407));p=p()}else{if(p=u(),Wi===null)throw Error(c(349));(ui&127)!==0||f(w,u,p)}M.memoizedState=p;var R={value:p,getSnapshot:u};return M.queue=R,Dt(B.bind(null,w,R,s),[s]),w.flags|=2048,at(9,{destroy:void 0},g.bind(null,w,R,p,u),null),p},useId:function(){var s=Xi(),u=Wi.identifierPrefix;if(kn){var p=Is,w=nl;p=(w&~(1<<32-Xe(w)-1)).toString(32)+p,u="_"+u+"R_"+p,p=aa++,0<p&&(u+="H"+p.toString(32)),u+="_"}else p=Bc++,u="_"+u+"r_"+p.toString(32)+"_";return s.memoizedState=u},useHostTransitionStatus:Ws,useFormState:Ee,useActionState:Ee,useOptimistic:function(s){var u=Xi();u.memoizedState=u.baseState=s;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=p,u=Wc.bind(null,on,!0,p),p.dispatch=u,[s,u]},useMemoCache:kA,useCacheRefresh:function(){return Xi().memoizedState=zo.bind(null,on)},useEffectEvent:function(s){var u=Xi(),p={impl:s};return u.memoizedState=p,function(){if((Ui&2)!==0)throw Error(c(440));return p.impl.apply(void 0,arguments)}}},ji={readContext:Ha,use:QA,useCallback:Ri,useContext:Ha,useEffect:It,useImperativeHandle:_n,useInsertionEffect:fr,useLayoutEffect:Ht,useMemo:Mi,useReducer:Xc,useRef:$e,useState:function(){return Xc(Oo)},useDebugValue:fi,useDeferredValue:function(s,u){var p=Oi();return vi(p,tn.memoizedState,s,u)},useTransition:function(){var s=Xc(Oo)[0],u=Oi().memoizedState;return[typeof s=="boolean"?s:_o(s),u]},useSyncExternalStore:l,useId:uc,useHostTransitionStatus:Ws,useFormState:je,useActionState:je,useOptimistic:function(s,u){var p=Oi();return H(p,tn,s,u)},useMemoCache:kA,useCacheRefresh:OA};ji.useEffectEvent=cr;var sl={readContext:Ha,use:QA,useCallback:Ri,useContext:Ha,useEffect:It,useImperativeHandle:_n,useInsertionEffect:fr,useLayoutEffect:Ht,useMemo:Mi,useReducer:t,useRef:$e,useState:function(){return t(Oo)},useDebugValue:fi,useDeferredValue:function(s,u){var p=Oi();return tn===null?zi(p,s,u):vi(p,tn.memoizedState,s,u)},useTransition:function(){var s=t(Oo)[0],u=Oi().memoizedState;return[typeof s=="boolean"?s:_o(s),u]},useSyncExternalStore:l,useId:uc,useHostTransitionStatus:Ws,useFormState:nt,useActionState:nt,useOptimistic:function(s,u){var p=Oi();return tn!==null?H(p,tn,s,u):(p.baseState=s,[s,p.queue.dispatch])},useMemoCache:kA,useCacheRefresh:OA};sl.useEffectEvent=cr;function Ga(s,u,p,w){u=s.memoizedState,p=p(w,u),p=p==null?u:z({},u,p),s.memoizedState=p,s.lanes===0&&(s.updateQueue.baseState=p)}var hf={enqueueSetState:function(s,u,p){s=s._reactInternals;var w=HA(),M=dn(w);M.payload=u,p!=null&&(M.callback=p),u=Ln(s,M,w),u!==null&&(Nl(u,s,w),Vn(u,s,w))},enqueueReplaceState:function(s,u,p){s=s._reactInternals;var w=HA(),M=dn(w);M.tag=1,M.payload=u,p!=null&&(M.callback=p),u=Ln(s,M,w),u!==null&&(Nl(u,s,w),Vn(u,s,w))},enqueueForceUpdate:function(s,u){s=s._reactInternals;var p=HA(),w=dn(p);w.tag=2,u!=null&&(w.callback=u),u=Ln(s,w,p),u!==null&&(Nl(u,s,p),Vn(u,s,p))}};function Yc(s,u,p,w,M,R,te){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(w,R,te):u.prototype&&u.prototype.isPureReactComponent?!el(p,w)||!el(M,R):!0}function Xd(s,u,p,w){s=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(p,w),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(p,w),u.state!==s&&hf.enqueueReplaceState(u,u.state,null)}function $c(s,u){var p=u;if("ref"in u){p={};for(var w in u)w!=="ref"&&(p[w]=u[w])}if(s=s.defaultProps){p===u&&(p=z({},p));for(var M in s)p[M]===void 0&&(p[M]=s[M])}return p}function ff(s){Il(s)}function ad(s){console.error(s)}function ol(s){Il(s)}function zA(s,u){try{var p=s.onUncaughtError;p(u.value,{componentStack:u.stack})}catch(w){setTimeout(function(){throw w})}}function df(s,u,p){try{var w=s.onCaughtError;w(p.value,{componentStack:p.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(M){setTimeout(function(){throw M})}}function pf(s,u,p){return p=dn(p),p.tag=3,p.payload={element:null},p.callback=function(){zA(s,u)},p}function eh(s){return s=dn(s),s.tag=3,s}function mf(s,u,p,w){var M=p.type.getDerivedStateFromError;if(typeof M=="function"){var R=w.value;s.payload=function(){return M(R)},s.callback=function(){df(u,p,w)}}var te=p.stateNode;te!==null&&typeof te.componentDidCatch=="function"&&(s.callback=function(){df(u,p,w),typeof M!="function"&&(Du===null?Du=new Set([this]):Du.add(this));var be=w.stack;this.componentDidCatch(w.value,{componentStack:be!==null?be:""})})}function th(s,u,p,w,M){if(p.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){if(u=p.alternate,u!==null&&Xs(u,p,M,!0),p=gr.current,p!==null){switch(p.tag){case 31:case 13:return yr===null?Nu():p.alternate===null&&es===0&&(es=3),p.flags&=-257,p.flags|=65536,p.lanes=M,w===Ze?p.flags|=16384:(u=p.updateQueue,u===null?p.updateQueue=new Set([w]):u.add(w),bp(s,w,M)),!1;case 22:return p.flags|=65536,w===Ze?p.flags|=16384:(u=p.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([w])},p.updateQueue=u):(p=u.retryQueue,p===null?u.retryQueue=new Set([w]):p.add(w)),bp(s,w,M)),!1}throw Error(c(435,p.tag))}return bp(s,w,M),Nu(),!1}if(kn)return u=gr.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=M,w!==ci&&(s=Error(c(422),{cause:w}),tA(Ks(s,p)))):(w!==ci&&(u=Error(c(423),{cause:w}),tA(Ks(u,p))),s=s.current.alternate,s.flags|=65536,M&=-M,s.lanes|=M,w=Ks(w,p),M=pf(s.stateNode,w,M),bn(s,M),es!==4&&(es=2)),!1;var R=Error(c(520),{cause:w});if(R=Ks(R,p),Uu===null?Uu=[R]:Uu.push(R),es!==4&&(es=2),u===null)return!0;w=Ks(w,p),p=u;do{switch(p.tag){case 3:return p.flags|=65536,s=M&-M,p.lanes|=s,s=pf(p.stateNode,w,s),bn(p,s),!1;case 1:if(u=p.type,R=p.stateNode,(p.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(Du===null||!Du.has(R))))return p.flags|=65536,M&=-M,p.lanes|=M,M=eh(M),mf(M,s,p,w),bn(p,M),!1}p=p.return}while(p!==null);return!1}var Wd=Error(c(461)),Us=!1;function Js(s,u,p,w){u.child=s===null?Bn(u,null,p,w):Li(u,s.child,p,w)}function h0(s,u,p,w,M){p=p.render;var R=u.ref;if("ref"in w){var te={};for(var be in w)be!=="ref"&&(te[be]=w[be])}else te=w;return nA(u),w=Ul(s,u,p,te,R,M),be=Sc(),s!==null&&!Us?(Eu(s,u,M),eu(s,u,M)):(kn&&be&&Zc(u),u.flags|=1,Js(s,u,w,M),u.child)}function Yd(s,u,p,w,M){if(s===null){var R=p.type;return typeof R=="function"&&!bu(R)&&R.defaultProps===void 0&&p.compare===null?(u.tag=15,u.type=R,wm(s,u,R,w,M)):(s=qc(p.type,null,w,u,u.mode,M),s.ref=u.ref,s.return=u,u.child=s)}if(R=s.child,!ld(s,M)){var te=R.memoizedProps;if(p=p.compare,p=p!==null?p:el,p(te,w)&&s.ref===u.ref)return eu(s,u,M)}return u.flags|=1,s=Ts(R,w),s.ref=u.ref,s.return=u,u.child=s}function wm(s,u,p,w,M){if(s!==null){var R=s.memoizedProps;if(el(R,w)&&s.ref===u.ref)if(Us=!1,u.pendingProps=w=R,ld(s,M))(s.flags&131072)!==0&&(Us=!0);else return u.lanes=s.lanes,eu(s,u,M)}return Cm(s,u,p,w,M)}function Bm(s,u,p,w){var M=w.children,R=s!==null?s.memoizedState:null;if(s===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),w.mode==="hidden"){if((u.flags&128)!==0){if(R=R!==null?R.baseLanes|p:p,s!==null){for(w=u.child=s.child,M=0;w!==null;)M=M|w.lanes|w.childLanes,w=w.sibling;w=M&~R}else w=0,u.child=null;return f0(s,u,R,p,w)}if((p&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},s!==null&&Pe(u,R!==null?R.cachePool:null),R!==null?ra(u,R):Un(),ki(u);else return w=u.lanes=536870912,f0(s,u,R!==null?R.baseLanes|p:p,p,w)}else R!==null?(Pe(u,R.cachePool),ra(u,R),ei(),u.memoizedState=null):(s!==null&&Pe(u,null),Un(),ei());return Js(s,u,M,p),u.child}function Jc(s,u){return s!==null&&s.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function f0(s,u,p,w,M){var R=we();return R=R===null?null:{parent:ta._currentValue,pool:R},u.memoizedState={baseLanes:p,cachePool:R},s!==null&&Pe(u,null),Un(),ki(u),s!==null&&Xs(s,u,w,!0),u.childLanes=M,null}function Tu(s,u){return u=rp({mode:u.mode,children:u.children},s.mode),u.ref=s.ref,s.child=u,u.return=s,u}function sd(s,u,p){return Li(u,s.child,null,p),s=Tu(u,u.pendingProps),s.flags|=2,Gn(u),u.memoizedState=null,s}function $d(s,u,p){var w=u.pendingProps,M=(u.flags&128)!==0;if(u.flags&=-129,s===null){if(kn){if(w.mode==="hidden")return s=Tu(u,w),u.lanes=536870912,Jc(null,s);if(yi(u),(s=Si)?(s=eo(s,qi),s=s!==null&&s.data==="&"?s:null,s!==null&&(u.memoizedState={dehydrated:s,treeContext:Ll!==null?{id:nl,overflow:Is}:null,retryLane:536870912,hydrationErrors:null},p=Kc(s),p.return=u,u.child=p,Ya=u,Si=null)):s=null,s===null)throw mo(u);return u.lanes=536870912,null}return Tu(u,w)}var R=s.memoizedState;if(R!==null){var te=R.dehydrated;if(yi(u),M)if(u.flags&256)u.flags&=-257,u=sd(s,u,p);else if(u.memoizedState!==null)u.child=s.child,u.flags|=128,u=null;else throw Error(c(558));else if(Us||Xs(s,u,p,!1),M=(p&s.childLanes)!==0,Us||M){if(w=Wi,w!==null&&(te=wi(w,p),te!==0&&te!==R.retryLane))throw R.retryLane=te,po(s,te),Nl(w,s,te),Wd;Nu(),u=sd(s,u,p)}else s=R.treeContext,Si=di(te.nextSibling),Ya=u,kn=!0,Ls=null,qi=!1,s!==null&&Yu(u,s),u=Tu(u,w),u.flags|=4096;return u}return s=Ts(s.child,{mode:w.mode,children:w.children}),s.ref=u.ref,u.child=s,s.return=u,s}function Jd(s,u){var p=u.ref;if(p===null)s!==null&&s.ref!==null&&(u.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(c(284));(s===null||s.ref!==p)&&(u.flags|=4194816)}}function Cm(s,u,p,w,M){return nA(u),p=Ul(s,u,p,w,void 0,M),w=Sc(),s!==null&&!Us?(Eu(s,u,M),eu(s,u,M)):(kn&&w&&Zc(u),u.flags|=1,Js(s,u,p,M),u.child)}function d0(s,u,p,w,M,R){return nA(u),u.updateQueue=null,p=ko(u,w,p,M),Cc(s),w=Sc(),s!==null&&!Us?(Eu(s,u,R),eu(s,u,R)):(kn&&w&&Zc(u),u.flags|=1,Js(s,u,p,R),u.child)}function p0(s,u,p,w,M){if(nA(u),u.stateNode===null){var R=Yr,te=p.contextType;typeof te=="object"&&te!==null&&(R=Ha(te)),R=new p(w,R),u.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,R.updater=hf,u.stateNode=R,R._reactInternals=u,R=u.stateNode,R.props=w,R.state=u.memoizedState,R.refs={},vr(u),te=p.contextType,R.context=typeof te=="object"&&te!==null?Ha(te):Yr,R.state=u.memoizedState,te=p.getDerivedStateFromProps,typeof te=="function"&&(Ga(u,p,te,w),R.state=u.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(te=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),te!==R.state&&hf.enqueueReplaceState(R,R.state,null),Ki(u,w,R,M),Bi(),R.state=u.memoizedState),typeof R.componentDidMount=="function"&&(u.flags|=4194308),w=!0}else if(s===null){R=u.stateNode;var be=u.memoizedProps,ht=$c(p,be);R.props=ht;var Rt=R.context,tr=p.contextType;te=Yr,typeof tr=="object"&&tr!==null&&(te=Ha(tr));var ir=p.getDerivedStateFromProps;tr=typeof ir=="function"||typeof R.getSnapshotBeforeUpdate=="function",be=u.pendingProps!==be,tr||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(be||Rt!==te)&&Xd(u,R,w,te),Fr=!1;var Ot=u.memoizedState;R.state=Ot,Ki(u,w,R,M),Bi(),Rt=u.memoizedState,be||Ot!==Rt||Fr?(typeof ir=="function"&&(Ga(u,p,ir,w),Rt=u.memoizedState),(ht=Fr||Yc(u,p,ht,w,Ot,Rt,te))?(tr||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(u.flags|=4194308)):(typeof R.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=w,u.memoizedState=Rt),R.props=w,R.state=Rt,R.context=te,w=ht):(typeof R.componentDidMount=="function"&&(u.flags|=4194308),w=!1)}else{R=u.stateNode,Qi(s,u),te=u.memoizedProps,tr=$c(p,te),R.props=tr,ir=u.pendingProps,Ot=R.context,Rt=p.contextType,ht=Yr,typeof Rt=="object"&&Rt!==null&&(ht=Ha(Rt)),be=p.getDerivedStateFromProps,(Rt=typeof be=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(te!==ir||Ot!==ht)&&Xd(u,R,w,ht),Fr=!1,Ot=u.memoizedState,R.state=Ot,Ki(u,w,R,M),Bi();var Gt=u.memoizedState;te!==ir||Ot!==Gt||Fr||s!==null&&s.dependencies!==null&&Cu(s.dependencies)?(typeof be=="function"&&(Ga(u,p,be,w),Gt=u.memoizedState),(tr=Fr||Yc(u,p,tr,w,Ot,Gt,ht)||s!==null&&s.dependencies!==null&&Cu(s.dependencies))?(Rt||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(w,Gt,ht),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(w,Gt,ht)),typeof R.componentDidUpdate=="function"&&(u.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof R.componentDidUpdate!="function"||te===s.memoizedProps&&Ot===s.memoizedState||(u.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||te===s.memoizedProps&&Ot===s.memoizedState||(u.flags|=1024),u.memoizedProps=w,u.memoizedState=Gt),R.props=w,R.state=Gt,R.context=ht,w=tr):(typeof R.componentDidUpdate!="function"||te===s.memoizedProps&&Ot===s.memoizedState||(u.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||te===s.memoizedProps&&Ot===s.memoizedState||(u.flags|=1024),w=!1)}return R=w,Jd(s,u),w=(u.flags&128)!==0,R||w?(R=u.stateNode,p=w&&typeof p.getDerivedStateFromError!="function"?null:R.render(),u.flags|=1,s!==null&&w?(u.child=Li(u,s.child,null,M),u.child=Li(u,null,p,M)):Js(s,u,p,M),u.memoizedState=R.state,s=u.child):s=eu(s,u,M),s}function m0(s,u,p,w){return PA(),u.flags|=256,Js(s,u,p,w),u.child}var ep={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function od(s){return{baseLanes:s,cachePool:Ke()}}function tp(s,u,p){return s=s!==null?s.childLanes&~p:0,u&&(s|=jA),s}function Sm(s,u,p){var w=u.pendingProps,M=!1,R=(u.flags&128)!==0,te;if((te=R)||(te=s!==null&&s.memoizedState===null?!1:(Yn.current&2)!==0),te&&(M=!0,u.flags&=-129),te=(u.flags&32)!==0,u.flags&=-33,s===null){if(kn){if(M?Ei(u):ei(),(s=Si)?(s=eo(s,qi),s=s!==null&&s.data!=="&"?s:null,s!==null&&(u.memoizedState={dehydrated:s,treeContext:Ll!==null?{id:nl,overflow:Is}:null,retryLane:536870912,hydrationErrors:null},p=Kc(s),p.return=u,u.child=p,Ya=u,Si=null)):s=null,s===null)throw mo(u);return ku(s)?u.lanes=32:u.lanes=536870912,null}var be=w.children;return w=w.fallback,M?(ei(),M=u.mode,be=rp({mode:"hidden",children:be},M),w=UA(w,M,p,null),be.return=u,w.return=u,be.sibling=w,u.child=be,w=u.child,w.memoizedState=od(p),w.childLanes=tp(s,te,p),u.memoizedState=ep,Jc(null,w)):(Ei(u),Em(u,be))}var ht=s.memoizedState;if(ht!==null&&(be=ht.dehydrated,be!==null)){if(R)u.flags&256?(Ei(u),u.flags&=-257,u=np(s,u,p)):u.memoizedState!==null?(ei(),u.child=s.child,u.flags|=128,u=null):(ei(),be=w.fallback,M=u.mode,w=rp({mode:"visible",children:w.children},M),be=UA(be,M,p,null),be.flags|=2,w.return=u,be.return=u,w.sibling=be,u.child=w,Li(u,s.child,null,p),w=u.child,w.memoizedState=od(p),w.childLanes=tp(s,te,p),u.memoizedState=ep,u=Jc(null,w));else if(Ei(u),ku(be)){if(te=be.nextSibling&&be.nextSibling.dataset,te)var Rt=te.dgst;te=Rt,w=Error(c(419)),w.stack="",w.digest=te,tA({value:w,source:null,stack:null}),u=np(s,u,p)}else if(Us||Xs(s,u,p,!1),te=(p&s.childLanes)!==0,Us||te){if(te=Wi,te!==null&&(w=wi(te,p),w!==0&&w!==ht.retryLane))throw ht.retryLane=w,po(s,w),Nl(te,s,w),Wd;VA(be)||Nu(),u=np(s,u,p)}else VA(be)?(u.flags|=192,u.child=s.child,u=null):(s=ht.treeContext,Si=di(be.nextSibling),Ya=u,kn=!0,Ls=null,qi=!1,s!==null&&Yu(u,s),u=Em(u,w.children),u.flags|=4096);return u}return M?(ei(),be=w.fallback,M=u.mode,ht=s.child,Rt=ht.sibling,w=Ts(ht,{mode:"hidden",children:w.children}),w.subtreeFlags=ht.subtreeFlags&65011712,Rt!==null?be=Ts(Rt,be):(be=UA(be,M,p,null),be.flags|=2),be.return=u,w.return=u,w.sibling=be,u.child=w,Jc(null,w),w=u.child,be=s.child.memoizedState,be===null?be=od(p):(M=be.cachePool,M!==null?(ht=ta._currentValue,M=M.parent!==ht?{parent:ht,pool:ht}:M):M=Ke(),be={baseLanes:be.baseLanes|p,cachePool:M}),w.memoizedState=be,w.childLanes=tp(s,te,p),u.memoizedState=ep,Jc(s.child,w)):(Ei(u),p=s.child,s=p.sibling,p=Ts(p,{mode:"visible",children:w.children}),p.return=u,p.sibling=null,s!==null&&(te=u.deletions,te===null?(u.deletions=[s],u.flags|=16):te.push(s)),u.child=p,u.memoizedState=null,p)}function Em(s,u){return u=rp({mode:"visible",children:u},s.mode),u.return=s,s.child=u}function rp(s,u){return s=Es(22,s,null,u),s.lanes=0,s}function np(s,u,p){return Li(u,s.child,null,p),s=Em(u,u.pendingProps.children),s.flags|=2,u.memoizedState=null,s}function Tm(s,u,p){s.lanes|=u;var w=s.alternate;w!==null&&(w.lanes|=u),wc(s.return,u,p)}function Fm(s,u,p,w,M,R){var te=s.memoizedState;te===null?s.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:w,tail:p,tailMode:M,treeForkCount:R}:(te.isBackwards=u,te.rendering=null,te.renderingStartTime=0,te.last=w,te.tail=p,te.tailMode=M,te.treeForkCount=R)}function ip(s,u,p){var w=u.pendingProps,M=w.revealOrder,R=w.tail;w=w.children;var te=Yn.current,be=(te&2)!==0;if(be?(te=te&1|2,u.flags|=128):te&=1,xe(Yn,te),Js(s,u,w,p),w=kn?oc:0,!be&&s!==null&&(s.flags&128)!==0)e:for(s=u.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Tm(s,p,u);else if(s.tag===19)Tm(s,p,u);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===u)break e;for(;s.sibling===null;){if(s.return===null||s.return===u)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(M){case"forwards":for(p=u.child,M=null;p!==null;)s=p.alternate,s!==null&&ds(s)===null&&(M=p),p=p.sibling;p=M,p===null?(M=u.child,u.child=null):(M=p.sibling,p.sibling=null),Fm(u,!1,M,p,R,w);break;case"backwards":case"unstable_legacy-backwards":for(p=null,M=u.child,u.child=null;M!==null;){if(s=M.alternate,s!==null&&ds(s)===null){u.child=M;break}s=M.sibling,M.sibling=p,p=M,M=s}Fm(u,!0,p,null,R,w);break;case"together":Fm(u,!1,null,null,void 0,w);break;default:u.memoizedState=null}return u.child}function eu(s,u,p){if(s!==null&&(u.dependencies=s.dependencies),oh|=u.lanes,(p&u.childLanes)===0)if(s!==null){if(Xs(s,u,p,!1),(p&u.childLanes)===0)return null}else return null;if(s!==null&&u.child!==s.child)throw Error(c(153));if(u.child!==null){for(s=u.child,p=Ts(s,s.pendingProps),u.child=p,p.return=u;s.sibling!==null;)s=s.sibling,p=p.sibling=Ts(s,s.pendingProps),p.return=u;p.sibling=null}return u.child}function ld(s,u){return(s.lanes&u)!==0?!0:(s=s.dependencies,!!(s!==null&&Cu(s)))}function Ad(s,u,p){switch(u.tag){case 3:Pt(u,u.stateNode.containerInfo),NA(u,ta,s.memoizedState.cache),PA();break;case 27:case 5:$t(u);break;case 4:Pt(u,u.stateNode.containerInfo);break;case 10:NA(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,yi(u),null;break;case 13:var w=u.memoizedState;if(w!==null)return w.dehydrated!==null?(Ei(u),u.flags|=128,null):(p&u.child.childLanes)!==0?Sm(s,u,p):(Ei(u),s=eu(s,u,p),s!==null?s.sibling:null);Ei(u);break;case 19:var M=(s.flags&128)!==0;if(w=(p&u.childLanes)!==0,w||(Xs(s,u,p,!1),w=(p&u.childLanes)!==0),M){if(w)return ip(s,u,p);u.flags|=128}if(M=u.memoizedState,M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),xe(Yn,Yn.current),w)break;return null;case 22:return u.lanes=0,Bm(s,u,p,u.pendingProps);case 24:NA(u,ta,s.memoizedState.cache)}return eu(s,u,p)}function ll(s,u,p){if(s!==null)if(s.memoizedProps!==u.pendingProps)Us=!0;else{if(!ld(s,p)&&(u.flags&128)===0)return Us=!1,Ad(s,u,p);Us=(s.flags&131072)!==0}else Us=!1,kn&&(u.flags&1048576)!==0&&Fh(u,oc,u.index);switch(u.lanes=0,u.tag){case 16:e:{var w=u.pendingProps;if(s=Ut(u.elementType),u.type=s,typeof s=="function")bu(s)?(w=$c(s,w),u.tag=1,u=p0(null,u,s,w,p)):(u.tag=0,u=Cm(null,u,s,w,p));else{if(s!=null){var M=s.$$typeof;if(M===Le){u.tag=11,u=h0(null,u,s,w,p);break e}else if(M===ut){u.tag=14,u=Yd(null,u,s,w,p);break e}}throw u=Ve(s)||s,Error(c(306,u,""))}}return u;case 0:return Cm(s,u,u.type,u.pendingProps,p);case 1:return w=u.type,M=$c(w,u.pendingProps),p0(s,u,w,M,p);case 3:e:{if(Pt(u,u.stateNode.containerInfo),s===null)throw Error(c(387));w=u.pendingProps;var R=u.memoizedState;M=R.element,Qi(s,u),Ki(u,w,null,p);var te=u.memoizedState;if(w=te.cache,NA(u,ta,w),w!==R.cache&&lc(u,[ta],p,!0),Bi(),w=te.element,R.isDehydrated)if(R={element:w,isDehydrated:!1,cache:te.cache},u.updateQueue.baseState=R,u.memoizedState=R,u.flags&256){u=m0(s,u,w,p);break e}else if(w!==M){M=Ks(Error(c(424)),u),tA(M),u=m0(s,u,w,p);break e}else for(s=u.stateNode.containerInfo,s.nodeType===9?s=s.body:s=s.nodeName==="HTML"?s.ownerDocument.body:s,Si=di(s.firstChild),Ya=u,kn=!0,Ls=null,qi=!0,p=Bn(u,null,w,p),u.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(PA(),w===M){u=eu(s,u,p);break e}Js(s,u,w,p)}u=u.child}return u;case 26:return Jd(s,u),s===null?(p=md(u.type,null,u.pendingProps,null))?u.memoizedState=p:kn||(p=u.type,s=u.pendingProps,w=Tf(tt.current).createElement(p),w[Wn]=u,w[Jt]=s,gs(w,p,s),Pi(w),u.stateNode=w):u.memoizedState=md(u.type,s.memoizedProps,u.pendingProps,s.memoizedState),null;case 27:return $t(u),s===null&&kn&&(w=u.stateNode=Bo(u.type,u.pendingProps,tt.current),Ya=u,qi=!0,M=Si,lu(u.type)?(ts=M,Si=di(w.firstChild)):Si=M),Js(s,u,u.pendingProps.children,p),Jd(s,u),s===null&&(u.flags|=4194304),u.child;case 5:return s===null&&kn&&((M=w=Si)&&(w=Fi(w,u.type,u.pendingProps,qi),w!==null?(u.stateNode=w,Ya=u,Si=di(w.firstChild),qi=!1,M=!0):M=!1),M||mo(u)),$t(u),M=u.type,R=u.pendingProps,te=s!==null?s.memoizedProps:null,w=R.children,Qu(M,R)?w=null:te!==null&&Qu(M,te)&&(u.flags|=32),u.memoizedState!==null&&(M=Ul(s,u,$u,null,null,p),Mf._currentValue=M),Jd(s,u),Js(s,u,w,p),u.child;case 6:return s===null&&kn&&((s=p=Si)&&(p=fh(p,u.pendingProps,qi),p!==null?(u.stateNode=p,Ya=u,Si=null,s=!0):s=!1),s||mo(u)),null;case 13:return Sm(s,u,p);case 4:return Pt(u,u.stateNode.containerInfo),w=u.pendingProps,s===null?u.child=Li(u,null,w,p):Js(s,u,w,p),u.child;case 11:return h0(s,u,u.type,u.pendingProps,p);case 7:return Js(s,u,u.pendingProps,p),u.child;case 8:return Js(s,u,u.pendingProps.children,p),u.child;case 12:return Js(s,u,u.pendingProps.children,p),u.child;case 10:return w=u.pendingProps,NA(u,u.type,w.value),Js(s,u,w.children,p),u.child;case 9:return M=u.type._context,w=u.pendingProps.children,nA(u),M=Ha(M),w=w(M),u.flags|=1,Js(s,u,w,p),u.child;case 14:return Yd(s,u,u.type,u.pendingProps,p);case 15:return wm(s,u,u.type,u.pendingProps,p);case 19:return ip(s,u,p);case 31:return $d(s,u,p);case 22:return Bm(s,u,p,u.pendingProps);case 24:return nA(u),w=Ha(ta),s===null?(M=we(),M===null&&(M=Wi,R=iA(),M.pooledCache=R,R.refCount++,R!==null&&(M.pooledCacheLanes|=p),M=R),u.memoizedState={parent:w,cache:M},vr(u),NA(u,ta,M)):((s.lanes&p)!==0&&(Qi(s,u),Ki(u,null,null,p),Bi()),M=s.memoizedState,R=u.memoizedState,M.parent!==w?(M={parent:w,cache:w},u.memoizedState=M,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=M),NA(u,ta,w)):(w=R.cache,NA(u,ta,w),w!==M.cache&&lc(u,[ta],p,!0))),Js(s,u,u.pendingProps.children,p),u.child;case 29:throw u.pendingProps}throw Error(c(156,u.tag))}function tu(s){s.flags|=4}function ap(s,u,p,w,M){if((u=(s.mode&32)!==0)&&(u=!1),u){if(s.flags|=16777216,(M&335544128)===M)if(s.stateNode.complete)s.flags|=8192;else if(I0())s.flags|=8192;else throw Vt=Ze,Mt}else s.flags&=-16777217}function sp(s,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!vd(u))if(I0())s.flags|=8192;else throw Vt=Ze,Mt}function op(s,u){u!==null&&(s.flags|=4),s.flags&16384&&(u=s.tag!==22?zr():536870912,s.lanes|=u,bf|=u)}function gf(s,u){if(!kn)switch(s.tailMode){case"hidden":u=s.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?s.tail=null:p.sibling=null;break;case"collapsed":p=s.tail;for(var w=null;p!==null;)p.alternate!==null&&(w=p),p=p.sibling;w===null?u||s.tail===null?s.tail=null:s.tail.sibling=null:w.sibling=null}}function Ca(s){var u=s.alternate!==null&&s.alternate.child===s.child,p=0,w=0;if(u)for(var M=s.child;M!==null;)p|=M.lanes|M.childLanes,w|=M.subtreeFlags&65011712,w|=M.flags&65011712,M.return=s,M=M.sibling;else for(M=s.child;M!==null;)p|=M.lanes|M.childLanes,w|=M.subtreeFlags,w|=M.flags,M.return=s,M=M.sibling;return s.subtreeFlags|=w,s.childLanes=p,u}function e1(s,u,p){var w=u.pendingProps;switch(bc(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ca(u),null;case 1:return Ca(u),null;case 3:return p=u.stateNode,w=null,s!==null&&(w=s.memoizedState.cache),u.memoizedState.cache!==w&&(u.flags|=2048),Ro(ta),Et(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(s===null||s.child===null)&&(Ba(u)?tu(u):s===null||s.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,eA())),Ca(u),null;case 26:var M=u.type,R=u.memoizedState;return s===null?(tu(u),R!==null?(Ca(u),sp(u,R)):(Ca(u),ap(u,M,null,w,p))):R?R!==s.memoizedState?(tu(u),Ca(u),sp(u,R)):(Ca(u),u.flags&=-16777217):(s=s.memoizedProps,s!==w&&tu(u),Ca(u),ap(u,M,s,w,p)),null;case 27:if(Ar(u),p=tt.current,M=u.type,s!==null&&u.stateNode!=null)s.memoizedProps!==w&&tu(u);else{if(!w){if(u.stateNode===null)throw Error(c(166));return Ca(u),null}s=Ue.current,Ba(u)?Zs(u):(s=Bo(M,w,p),u.stateNode=s,tu(u))}return Ca(u),null;case 5:if(Ar(u),M=u.type,s!==null&&u.stateNode!=null)s.memoizedProps!==w&&tu(u);else{if(!w){if(u.stateNode===null)throw Error(c(166));return Ca(u),null}if(R=Ue.current,Ba(u))Zs(u);else{var te=Tf(tt.current);switch(R){case 1:R=te.createElementNS("http://www.w3.org/2000/svg",M);break;case 2:R=te.createElementNS("http://www.w3.org/1998/Math/MathML",M);break;default:switch(M){case"svg":R=te.createElementNS("http://www.w3.org/2000/svg",M);break;case"math":R=te.createElementNS("http://www.w3.org/1998/Math/MathML",M);break;case"script":R=te.createElement("div"),R.innerHTML="<script><\/script>",R=R.removeChild(R.firstChild);break;case"select":R=typeof w.is=="string"?te.createElement("select",{is:w.is}):te.createElement("select"),w.multiple?R.multiple=!0:w.size&&(R.size=w.size);break;default:R=typeof w.is=="string"?te.createElement(M,{is:w.is}):te.createElement(M)}}R[Wn]=u,R[Jt]=w;e:for(te=u.child;te!==null;){if(te.tag===5||te.tag===6)R.appendChild(te.stateNode);else if(te.tag!==4&&te.tag!==27&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===u)break e;for(;te.sibling===null;){if(te.return===null||te.return===u)break e;te=te.return}te.sibling.return=te.return,te=te.sibling}u.stateNode=R;e:switch(gs(R,M,w),M){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}w&&tu(u)}}return Ca(u),ap(u,u.type,s===null?null:s.memoizedProps,u.pendingProps,p),null;case 6:if(s&&u.stateNode!=null)s.memoizedProps!==w&&tu(u);else{if(typeof w!="string"&&u.stateNode===null)throw Error(c(166));if(s=tt.current,Ba(u)){if(s=u.stateNode,p=u.memoizedProps,w=null,M=Ya,M!==null)switch(M.tag){case 27:case 5:w=M.memoizedProps}s[Wn]=u,s=!!(s.nodeValue===p||w!==null&&w.suppressHydrationWarning===!0||ig(s.nodeValue,p)),s||mo(u,!0)}else s=Tf(s).createTextNode(w),s[Wn]=u,u.stateNode=s}return Ca(u),null;case 31:if(p=u.memoizedState,s===null||s.memoizedState!==null){if(w=Ba(u),p!==null){if(s===null){if(!w)throw Error(c(318));if(s=u.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(c(557));s[Wn]=u}else PA(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Ca(u),s=!1}else p=eA(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=p),s=!0;if(!s)return u.flags&256?(Gn(u),u):(Gn(u),null);if((u.flags&128)!==0)throw Error(c(558))}return Ca(u),null;case 13:if(w=u.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(M=Ba(u),w!==null&&w.dehydrated!==null){if(s===null){if(!M)throw Error(c(318));if(M=u.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(c(317));M[Wn]=u}else PA(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Ca(u),M=!1}else M=eA(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=M),M=!0;if(!M)return u.flags&256?(Gn(u),u):(Gn(u),null)}return Gn(u),(u.flags&128)!==0?(u.lanes=p,u):(p=w!==null,s=s!==null&&s.memoizedState!==null,p&&(w=u.child,M=null,w.alternate!==null&&w.alternate.memoizedState!==null&&w.alternate.memoizedState.cachePool!==null&&(M=w.alternate.memoizedState.cachePool.pool),R=null,w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(R=w.memoizedState.cachePool.pool),R!==M&&(w.flags|=2048)),p!==s&&p&&(u.child.flags|=8192),op(u,u.updateQueue),Ca(u),null);case 4:return Et(),s===null&&eg(u.stateNode.containerInfo),Ca(u),null;case 10:return Ro(u.type),Ca(u),null;case 19:if(oe(Yn),w=u.memoizedState,w===null)return Ca(u),null;if(M=(u.flags&128)!==0,R=w.rendering,R===null)if(M)gf(w,!1);else{if(es!==0||s!==null&&(s.flags&128)!==0)for(s=u.child;s!==null;){if(R=ds(s),R!==null){for(u.flags|=128,gf(w,!1),s=R.updateQueue,u.updateQueue=s,op(u,s),u.subtreeFlags=0,s=p,p=u.child;p!==null;)wu(p,s),p=p.sibling;return xe(Yn,Yn.current&1|2),kn&&No(u,w.treeForkCount),u.child}s=s.sibling}w.tail!==null&&mn()>mp&&(u.flags|=128,M=!0,gf(w,!1),u.lanes=4194304)}else{if(!M)if(s=ds(R),s!==null){if(u.flags|=128,M=!0,s=s.updateQueue,u.updateQueue=s,op(u,s),gf(w,!0),w.tail===null&&w.tailMode==="hidden"&&!R.alternate&&!kn)return Ca(u),null}else 2*mn()-w.renderingStartTime>mp&&p!==536870912&&(u.flags|=128,M=!0,gf(w,!1),u.lanes=4194304);w.isBackwards?(R.sibling=u.child,u.child=R):(s=w.last,s!==null?s.sibling=R:u.child=R,w.last=R)}return w.tail!==null?(s=w.tail,w.rendering=s,w.tail=s.sibling,w.renderingStartTime=mn(),s.sibling=null,p=Yn.current,xe(Yn,M?p&1|2:p&1),kn&&No(u,w.treeForkCount),s):(Ca(u),null);case 22:case 23:return Gn(u),na(),w=u.memoizedState!==null,s!==null?s.memoizedState!==null!==w&&(u.flags|=8192):w&&(u.flags|=8192),w?(p&536870912)!==0&&(u.flags&128)===0&&(Ca(u),u.subtreeFlags&6&&(u.flags|=8192)):Ca(u),p=u.updateQueue,p!==null&&op(u,p.retryQueue),p=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(p=s.memoizedState.cachePool.pool),w=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(w=u.memoizedState.cachePool.pool),w!==p&&(u.flags|=2048),s!==null&&oe(ge),null;case 24:return p=null,s!==null&&(p=s.memoizedState.cache),u.memoizedState.cache!==p&&(u.flags|=2048),Ro(ta),Ca(u),null;case 25:return null;case 30:return null}throw Error(c(156,u.tag))}function g0(s,u){switch(bc(u),u.tag){case 1:return s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 3:return Ro(ta),Et(),s=u.flags,(s&65536)!==0&&(s&128)===0?(u.flags=s&-65537|128,u):null;case 26:case 27:case 5:return Ar(u),null;case 31:if(u.memoizedState!==null){if(Gn(u),u.alternate===null)throw Error(c(340));PA()}return s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 13:if(Gn(u),s=u.memoizedState,s!==null&&s.dehydrated!==null){if(u.alternate===null)throw Error(c(340));PA()}return s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 19:return oe(Yn),null;case 4:return Et(),null;case 10:return Ro(u.type),null;case 22:case 23:return Gn(u),na(),s!==null&&oe(ge),s=u.flags,s&65536?(u.flags=s&-65537|128,u):null;case 24:return Ro(ta),null;case 25:return null;default:return null}}function y0(s,u){switch(bc(u),u.tag){case 3:Ro(ta),Et();break;case 26:case 27:case 5:Ar(u);break;case 4:Et();break;case 31:u.memoizedState!==null&&Gn(u);break;case 13:Gn(u);break;case 19:oe(Yn);break;case 10:Ro(u.type);break;case 22:case 23:Gn(u),na(),s!==null&&oe(ge);break;case 24:Ro(ta)}}function yf(s,u){try{var p=u.updateQueue,w=p!==null?p.lastEffect:null;if(w!==null){var M=w.next;p=M;do{if((p.tag&s)===s){w=void 0;var R=p.create,te=p.inst;w=R(),te.destroy=w}p=p.next}while(p!==M)}}catch(be){Vi(u,u.return,be)}}function ru(s,u,p){try{var w=u.updateQueue,M=w!==null?w.lastEffect:null;if(M!==null){var R=M.next;w=R;do{if((w.tag&s)===s){var te=w.inst,be=te.destroy;if(be!==void 0){te.destroy=void 0,M=u;var ht=p,Rt=be;try{Rt()}catch(tr){Vi(M,ht,tr)}}}w=w.next}while(w!==R)}}catch(tr){Vi(u,u.return,tr)}}function Im(s){var u=s.updateQueue;if(u!==null){var p=s.stateNode;try{ma(u,p)}catch(w){Vi(s,s.return,w)}}}function Lm(s,u,p){p.props=$c(s.type,s.memoizedProps),p.state=s.memoizedState;try{p.componentWillUnmount()}catch(w){Vi(s,u,w)}}function cd(s,u){try{var p=s.ref;if(p!==null){switch(s.tag){case 26:case 27:case 5:var w=s.stateNode;break;case 30:w=s.stateNode;break;default:w=s.stateNode}typeof p=="function"?s.refCleanup=p(w):p.current=w}}catch(M){Vi(s,u,M)}}function nu(s,u){var p=s.ref,w=s.refCleanup;if(p!==null)if(typeof w=="function")try{w()}catch(M){Vi(s,u,M)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(M){Vi(s,u,M)}else p.current=null}function _0(s){var u=s.type,p=s.memoizedProps,w=s.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":p.autoFocus&&w.focus();break e;case"img":p.src?w.src=p.src:p.srcSet&&(w.srcset=p.srcSet)}}catch(M){Vi(s,s.return,M)}}function _f(s,u,p){try{var w=s.stateNode;W0(w,s.type,p,u),w[Jt]=u}catch(M){Vi(s,s.return,M)}}function lp(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&lu(s.type)||s.tag===4}function Ap(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||lp(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&lu(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Fu(s,u,p){var w=s.tag;if(w===5||w===6)s=s.stateNode,u?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(s,u):(u=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,u.appendChild(s),p=p._reactRootContainer,p!=null||u.onclick!==null||(u.onclick=hs));else if(w!==4&&(w===27&&lu(s.type)&&(p=s.stateNode,u=null),s=s.child,s!==null))for(Fu(s,u,p),s=s.sibling;s!==null;)Fu(s,u,p),s=s.sibling}function rh(s,u,p){var w=s.tag;if(w===5||w===6)s=s.stateNode,u?p.insertBefore(s,u):p.appendChild(s);else if(w!==4&&(w===27&&lu(s.type)&&(p=s.stateNode),s=s.child,s!==null))for(rh(s,u,p),s=s.sibling;s!==null;)rh(s,u,p),s=s.sibling}function v0(s){var u=s.stateNode,p=s.memoizedProps;try{for(var w=s.type,M=u.attributes;M.length;)u.removeAttributeNode(M[0]);gs(u,w,p),u[Wn]=s,u[Jt]=p}catch(R){Vi(s,s.return,R)}}var Iu=!1,Ds=!1,Mm=!1,x0=typeof WeakSet=="function"?WeakSet:Set,vo=null;function t1(s,u){if(s=s.containerInfo,Al=Qp,s=Sl(s),El(s)){if("selectionStart"in s)var p={start:s.selectionStart,end:s.selectionEnd};else e:{p=(p=s.ownerDocument)&&p.defaultView||window;var w=p.getSelection&&p.getSelection();if(w&&w.rangeCount!==0){p=w.anchorNode;var M=w.anchorOffset,R=w.focusNode;w=w.focusOffset;try{p.nodeType,R.nodeType}catch{p=null;break e}var te=0,be=-1,ht=-1,Rt=0,tr=0,ir=s,Ot=null;t:for(;;){for(var Gt;ir!==p||M!==0&&ir.nodeType!==3||(be=te+M),ir!==R||w!==0&&ir.nodeType!==3||(ht=te+w),ir.nodeType===3&&(te+=ir.nodeValue.length),(Gt=ir.firstChild)!==null;)Ot=ir,ir=Gt;for(;;){if(ir===s)break t;if(Ot===p&&++Rt===M&&(be=te),Ot===R&&++tr===w&&(ht=te),(Gt=ir.nextSibling)!==null)break;ir=Ot,Ot=ir.parentNode}ir=Gt}p=be===-1||ht===-1?null:{start:be,end:ht}}else p=null}p=p||{start:0,end:0}}else p=null;for(hh={focusedElem:s,selectionRange:p},Qp=!1,vo=u;vo!==null;)if(u=vo,s=u.child,(u.subtreeFlags&1028)!==0&&s!==null)s.return=u,vo=s;else for(;vo!==null;){switch(u=vo,R=u.alternate,s=u.flags,u.tag){case 0:if((s&4)!==0&&(s=u.updateQueue,s=s!==null?s.events:null,s!==null))for(p=0;p<s.length;p++)M=s[p],M.ref.impl=M.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&R!==null){s=void 0,p=u,M=R.memoizedProps,R=R.memoizedState,w=p.stateNode;try{var Kr=$c(p.type,M);s=w.getSnapshotBeforeUpdate(Kr,R),w.__reactInternalSnapshotBeforeUpdate=s}catch(vn){Vi(p,p.return,vn)}}break;case 3:if((s&1024)!==0){if(s=u.stateNode.containerInfo,p=s.nodeType,p===9)og(s);else if(p===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":og(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(c(163))}if(s=u.sibling,s!==null){s.return=u.return,vo=s;break}vo=u.return}}function cp(s,u,p){var w=p.flags;switch(p.tag){case 0:case 11:case 15:lA(s,p),w&4&&yf(5,p);break;case 1:if(lA(s,p),w&4)if(s=p.stateNode,u===null)try{s.componentDidMount()}catch(te){Vi(p,p.return,te)}else{var M=$c(p.type,u.memoizedProps);u=u.memoizedState;try{s.componentDidUpdate(M,u,s.__reactInternalSnapshotBeforeUpdate)}catch(te){Vi(p,p.return,te)}}w&64&&Im(p),w&512&&cd(p,p.return);break;case 3:if(lA(s,p),w&64&&(s=p.updateQueue,s!==null)){if(u=null,p.child!==null)switch(p.child.tag){case 27:case 5:u=p.child.stateNode;break;case 1:u=p.child.stateNode}try{ma(s,u)}catch(te){Vi(p,p.return,te)}}break;case 27:u===null&&w&4&&v0(p);case 26:case 5:lA(s,p),u===null&&w&4&&_0(p),w&512&&cd(p,p.return);break;case 12:lA(s,p);break;case 31:lA(s,p),w&4&&Uh(s,p);break;case 13:lA(s,p),w&4&&Um(s,p),w&64&&(s=p.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(p=Ah.bind(null,p),uA(s,p))));break;case 22:if(w=p.memoizedState!==null||Iu,!w){u=u!==null&&u.memoizedState!==null||Ds,M=Iu;var R=Ds;Iu=w,(Ds=u)&&!R?AA(s,p,(p.subtreeFlags&8772)!==0):lA(s,p),Iu=M,Ds=R}break;case 30:break;default:lA(s,p)}}function b0(s){var u=s.alternate;u!==null&&(s.alternate=null,b0(u)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(u=s.stateNode,u!==null&&To(u)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Sa=null,xo=!1;function Lu(s,u,p){for(p=p.child;p!==null;)ka(s,u,p),p=p.sibling}function ka(s,u,p){if(Ae&&typeof Ae.onCommitFiberUnmount=="function")try{Ae.onCommitFiberUnmount(ne,p)}catch{}switch(p.tag){case 26:Ds||nu(p,u),Lu(s,u,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:Ds||nu(p,u);var w=Sa,M=xo;lu(p.type)&&(Sa=p.stateNode,xo=!1),Lu(s,u,p),Vh(p.stateNode),Sa=w,xo=M;break;case 5:Ds||nu(p,u);case 6:if(w=Sa,M=xo,Sa=null,Lu(s,u,p),Sa=w,xo=M,Sa!==null)if(xo)try{(Sa.nodeType===9?Sa.body:Sa.nodeName==="HTML"?Sa.ownerDocument.body:Sa).removeChild(p.stateNode)}catch(R){Vi(p,u,R)}else try{Sa.removeChild(p.stateNode)}catch(R){Vi(p,u,R)}break;case 18:Sa!==null&&(xo?(s=Sa,Dp(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,p.stateNode),Qf(s)):Dp(Sa,p.stateNode));break;case 4:w=Sa,M=xo,Sa=p.stateNode.containerInfo,xo=!0,Lu(s,u,p),Sa=w,xo=M;break;case 0:case 11:case 14:case 15:ru(2,p,u),Ds||ru(4,p,u),Lu(s,u,p);break;case 1:Ds||(nu(p,u),w=p.stateNode,typeof w.componentWillUnmount=="function"&&Lm(p,u,w)),Lu(s,u,p);break;case 21:Lu(s,u,p);break;case 22:Ds=(w=Ds)||p.memoizedState!==null,Lu(s,u,p),Ds=w;break;default:Lu(s,u,p)}}function Uh(s,u){if(u.memoizedState===null&&(s=u.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Qf(s)}catch(p){Vi(u,u.return,p)}}}function Um(s,u){if(u.memoizedState===null&&(s=u.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Qf(s)}catch(p){Vi(u,u.return,p)}}function up(s){switch(s.tag){case 31:case 13:case 19:var u=s.stateNode;return u===null&&(u=s.stateNode=new x0),u;case 22:return s=s.stateNode,u=s._retryCache,u===null&&(u=s._retryCache=new x0),u;default:throw Error(c(435,s.tag))}}function Dh(s,u){var p=up(s);u.forEach(function(w){if(!p.has(w)){p.add(w);var M=wp.bind(null,s,w);w.then(M,M)}})}function bo(s,u){var p=u.deletions;if(p!==null)for(var w=0;w<p.length;w++){var M=p[w],R=s,te=u,be=te;e:for(;be!==null;){switch(be.tag){case 27:if(lu(be.type)){Sa=be.stateNode,xo=!1;break e}break;case 5:Sa=be.stateNode,xo=!1;break e;case 3:case 4:Sa=be.stateNode.containerInfo,xo=!0;break e}be=be.return}if(Sa===null)throw Error(c(160));ka(R,te,M),Sa=null,xo=!1,R=M.alternate,R!==null&&(R.return=null),M.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)Dm(u,s),u=u.sibling}var hc=null;function Dm(s,u){var p=s.alternate,w=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:bo(u,s),wo(s),w&4&&(ru(3,s,s.return),yf(3,s),ru(5,s,s.return));break;case 1:bo(u,s),wo(s),w&512&&(Ds||p===null||nu(p,p.return)),w&64&&Iu&&(s=s.updateQueue,s!==null&&(w=s.callbacks,w!==null&&(p=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=p===null?w:p.concat(w))));break;case 26:var M=hc;if(bo(u,s),wo(s),w&512&&(Ds||p===null||nu(p,p.return)),w&4){var R=p!==null?p.memoizedState:null;if(w=s.memoizedState,p===null)if(w===null)if(s.stateNode===null){e:{w=s.type,p=s.memoizedProps,M=M.ownerDocument||M;t:switch(w){case"title":R=M.getElementsByTagName("title")[0],(!R||R[an]||R[Wn]||R.namespaceURI==="http://www.w3.org/2000/svg"||R.hasAttribute("itemprop"))&&(R=M.createElement(w),M.head.insertBefore(R,M.querySelector("head > title"))),gs(R,w,p),R[Wn]=s,Pi(R),w=R;break e;case"link":var te=sy("link","href",M).get(w+(p.href||""));if(te){for(var be=0;be<te.length;be++)if(R=te[be],R.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&R.getAttribute("rel")===(p.rel==null?null:p.rel)&&R.getAttribute("title")===(p.title==null?null:p.title)&&R.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){te.splice(be,1);break t}}R=M.createElement(w),gs(R,w,p),M.head.appendChild(R);break;case"meta":if(te=sy("meta","content",M).get(w+(p.content||""))){for(be=0;be<te.length;be++)if(R=te[be],R.getAttribute("content")===(p.content==null?null:""+p.content)&&R.getAttribute("name")===(p.name==null?null:p.name)&&R.getAttribute("property")===(p.property==null?null:p.property)&&R.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&R.getAttribute("charset")===(p.charSet==null?null:p.charSet)){te.splice(be,1);break t}}R=M.createElement(w),gs(R,w,p),M.head.appendChild(R);break;default:throw Error(c(468,w))}R[Wn]=s,Pi(R),w=R}s.stateNode=w}else fg(M,s.type,s.stateNode);else s.stateNode=hg(M,w,s.memoizedProps);else R!==w?(R===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):R.count--,w===null?fg(M,s.type,s.stateNode):hg(M,w,s.memoizedProps)):w===null&&s.stateNode!==null&&_f(s,s.memoizedProps,p.memoizedProps)}break;case 27:bo(u,s),wo(s),w&512&&(Ds||p===null||nu(p,p.return)),p!==null&&w&4&&_f(s,s.memoizedProps,p.memoizedProps);break;case 5:if(bo(u,s),wo(s),w&512&&(Ds||p===null||nu(p,p.return)),s.flags&32){M=s.stateNode;try{lo(M,"")}catch(Kr){Vi(s,s.return,Kr)}}w&4&&s.stateNode!=null&&(M=s.memoizedProps,_f(s,M,p!==null?p.memoizedProps:M)),w&1024&&(Mm=!0);break;case 6:if(bo(u,s),wo(s),w&4){if(s.stateNode===null)throw Error(c(162));w=s.memoizedProps,p=s.stateNode;try{p.nodeValue=w}catch(Kr){Vi(s,s.return,Kr)}}break;case 3:if(_d=null,M=hc,hc=Yi(u.containerInfo),bo(u,s),hc=M,wo(s),w&4&&p!==null&&p.memoizedState.isDehydrated)try{Qf(u.containerInfo)}catch(Kr){Vi(s,s.return,Kr)}Mm&&(Mm=!1,hp(s));break;case 4:w=hc,hc=Yi(s.stateNode.containerInfo),bo(u,s),wo(s),hc=w;break;case 12:bo(u,s),wo(s);break;case 31:bo(u,s),wo(s),w&4&&(w=s.updateQueue,w!==null&&(s.updateQueue=null,Dh(s,w)));break;case 13:bo(u,s),wo(s),s.child.flags&8192&&s.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(pp=mn()),w&4&&(w=s.updateQueue,w!==null&&(s.updateQueue=null,Dh(s,w)));break;case 22:M=s.memoizedState!==null;var ht=p!==null&&p.memoizedState!==null,Rt=Iu,tr=Ds;if(Iu=Rt||M,Ds=tr||ht,bo(u,s),Ds=tr,Iu=Rt,wo(s),w&8192)e:for(u=s.stateNode,u._visibility=M?u._visibility&-2:u._visibility|1,M&&(p===null||ht||Iu||Ds||iu(s)),p=null,u=s;;){if(u.tag===5||u.tag===26){if(p===null){ht=p=u;try{if(R=ht.stateNode,M)te=R.style,typeof te.setProperty=="function"?te.setProperty("display","none","important"):te.display="none";else{be=ht.stateNode;var ir=ht.memoizedProps.style,Ot=ir!=null&&ir.hasOwnProperty("display")?ir.display:null;be.style.display=Ot==null||typeof Ot=="boolean"?"":(""+Ot).trim()}}catch(Kr){Vi(ht,ht.return,Kr)}}}else if(u.tag===6){if(p===null){ht=u;try{ht.stateNode.nodeValue=M?"":ht.memoizedProps}catch(Kr){Vi(ht,ht.return,Kr)}}}else if(u.tag===18){if(p===null){ht=u;try{var Gt=ht.stateNode;M?ty(Gt,!0):ty(ht.stateNode,!1)}catch(Kr){Vi(ht,ht.return,Kr)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===s)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===s)break e;for(;u.sibling===null;){if(u.return===null||u.return===s)break e;p===u&&(p=null),u=u.return}p===u&&(p=null),u.sibling.return=u.return,u=u.sibling}w&4&&(w=s.updateQueue,w!==null&&(p=w.retryQueue,p!==null&&(w.retryQueue=null,Dh(s,p))));break;case 19:bo(u,s),wo(s),w&4&&(w=s.updateQueue,w!==null&&(s.updateQueue=null,Dh(s,w)));break;case 30:break;case 21:break;default:bo(u,s),wo(s)}}function wo(s){var u=s.flags;if(u&2){try{for(var p,w=s.return;w!==null;){if(lp(w)){p=w;break}w=w.return}if(p==null)throw Error(c(160));switch(p.tag){case 27:var M=p.stateNode,R=Ap(s);rh(s,R,M);break;case 5:var te=p.stateNode;p.flags&32&&(lo(te,""),p.flags&=-33);var be=Ap(s);rh(s,be,te);break;case 3:case 4:var ht=p.stateNode.containerInfo,Rt=Ap(s);Fu(s,Rt,ht);break;default:throw Error(c(161))}}catch(tr){Vi(s,s.return,tr)}s.flags&=-3}u&4096&&(s.flags&=-4097)}function hp(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var u=s;hp(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),s=s.sibling}}function lA(s,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)cp(s,u.alternate,u),u=u.sibling}function iu(s){for(s=s.child;s!==null;){var u=s;switch(u.tag){case 0:case 11:case 14:case 15:ru(4,u,u.return),iu(u);break;case 1:nu(u,u.return);var p=u.stateNode;typeof p.componentWillUnmount=="function"&&Lm(u,u.return,p),iu(u);break;case 27:Vh(u.stateNode);case 26:case 5:nu(u,u.return),iu(u);break;case 22:u.memoizedState===null&&iu(u);break;case 30:iu(u);break;default:iu(u)}s=s.sibling}}function AA(s,u,p){for(p=p&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var w=u.alternate,M=s,R=u,te=R.flags;switch(R.tag){case 0:case 11:case 15:AA(M,R,p),yf(4,R);break;case 1:if(AA(M,R,p),w=R,M=w.stateNode,typeof M.componentDidMount=="function")try{M.componentDidMount()}catch(Rt){Vi(w,w.return,Rt)}if(w=R,M=w.updateQueue,M!==null){var be=w.stateNode;try{var ht=M.shared.hiddenCallbacks;if(ht!==null)for(M.shared.hiddenCallbacks=null,M=0;M<ht.length;M++)Ja(ht[M],be)}catch(Rt){Vi(w,w.return,Rt)}}p&&te&64&&Im(R),cd(R,R.return);break;case 27:v0(R);case 26:case 5:AA(M,R,p),p&&w===null&&te&4&&_0(R),cd(R,R.return);break;case 12:AA(M,R,p);break;case 31:AA(M,R,p),p&&te&4&&Uh(M,R);break;case 13:AA(M,R,p),p&&te&4&&Um(M,R);break;case 22:R.memoizedState===null&&AA(M,R,p),cd(R,R.return);break;case 30:break;default:AA(M,R,p)}u=u.sibling}}function Ph(s,u){var p=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(p=s.memoizedState.cachePool.pool),s=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(s=u.memoizedState.cachePool.pool),s!==p&&(s!=null&&s.refCount++,p!=null&&aA(p))}function Pm(s,u){s=null,u.alternate!==null&&(s=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==s&&(u.refCount++,s!=null&&aA(s))}function fc(s,u,p,w){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)nh(s,u,p,w),u=u.sibling}function nh(s,u,p,w){var M=u.flags;switch(u.tag){case 0:case 11:case 15:fc(s,u,p,w),M&2048&&yf(9,u);break;case 1:fc(s,u,p,w);break;case 3:fc(s,u,p,w),M&2048&&(s=null,u.alternate!==null&&(s=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==s&&(u.refCount++,s!=null&&aA(s)));break;case 12:if(M&2048){fc(s,u,p,w),s=u.stateNode;try{var R=u.memoizedProps,te=R.id,be=R.onPostCommit;typeof be=="function"&&be(te,u.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(ht){Vi(u,u.return,ht)}}else fc(s,u,p,w);break;case 31:fc(s,u,p,w);break;case 13:fc(s,u,p,w);break;case 23:break;case 22:R=u.stateNode,te=u.alternate,u.memoizedState!==null?R._visibility&2?fc(s,u,p,w):xf(s,u):R._visibility&2?fc(s,u,p,w):(R._visibility|=2,vf(s,u,p,w,(u.subtreeFlags&10256)!==0||!1)),M&2048&&Ph(te,u);break;case 24:fc(s,u,p,w),M&2048&&Pm(u.alternate,u);break;default:fc(s,u,p,w)}}function vf(s,u,p,w,M){for(M=M&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var R=s,te=u,be=p,ht=w,Rt=te.flags;switch(te.tag){case 0:case 11:case 15:vf(R,te,be,ht,M),yf(8,te);break;case 23:break;case 22:var tr=te.stateNode;te.memoizedState!==null?tr._visibility&2?vf(R,te,be,ht,M):xf(R,te):(tr._visibility|=2,vf(R,te,be,ht,M)),M&&Rt&2048&&Ph(te.alternate,te);break;case 24:vf(R,te,be,ht,M),M&&Rt&2048&&Pm(te.alternate,te);break;default:vf(R,te,be,ht,M)}u=u.sibling}}function xf(s,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var p=s,w=u,M=w.flags;switch(w.tag){case 22:xf(p,w),M&2048&&Ph(w.alternate,w);break;case 24:xf(p,w),M&2048&&Pm(w.alternate,w);break;default:xf(p,w)}u=u.sibling}}var Mu=8192;function ih(s,u,p){if(s.subtreeFlags&Mu)for(s=s.child;s!==null;)Nm(s,u,p),s=s.sibling}function Nm(s,u,p){switch(s.tag){case 26:ih(s,u,p),s.flags&Mu&&s.memoizedState!==null&&Rp(p,hc,s.memoizedState,s.memoizedProps);break;case 5:ih(s,u,p);break;case 3:case 4:var w=hc;hc=Yi(s.stateNode.containerInfo),ih(s,u,p),hc=w;break;case 22:s.memoizedState===null&&(w=s.alternate,w!==null&&w.memoizedState!==null?(w=Mu,Mu=16777216,ih(s,u,p),Mu=w):ih(s,u,p));break;default:ih(s,u,p)}}function Rm(s){var u=s.alternate;if(u!==null&&(s=u.child,s!==null)){u.child=null;do u=s.sibling,s.sibling=null,s=u;while(s!==null)}}function ud(s){var u=s.deletions;if((s.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var w=u[p];vo=w,B0(w,s)}Rm(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)w0(s),s=s.sibling}function w0(s){switch(s.tag){case 0:case 11:case 15:ud(s),s.flags&2048&&ru(9,s,s.return);break;case 3:ud(s);break;case 12:ud(s);break;case 22:var u=s.stateNode;s.memoizedState!==null&&u._visibility&2&&(s.return===null||s.return.tag!==13)?(u._visibility&=-3,fp(s)):ud(s);break;default:ud(s)}}function fp(s){var u=s.deletions;if((s.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var w=u[p];vo=w,B0(w,s)}Rm(s)}for(s=s.child;s!==null;){switch(u=s,u.tag){case 0:case 11:case 15:ru(8,u,u.return),fp(u);break;case 22:p=u.stateNode,p._visibility&2&&(p._visibility&=-3,fp(u));break;default:fp(u)}s=s.sibling}}function B0(s,u){for(;vo!==null;){var p=vo;switch(p.tag){case 0:case 11:case 15:ru(8,p,u);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var w=p.memoizedState.cachePool.pool;w!=null&&w.refCount++}break;case 24:aA(p.memoizedState.cache)}if(w=p.child,w!==null)w.return=p,vo=w;else e:for(p=s;vo!==null;){w=vo;var M=w.sibling,R=w.return;if(b0(w),w===p){vo=null;break e}if(M!==null){M.return=R,vo=M;break e}vo=R}}}var r1={getCacheForType:function(s){var u=Ha(ta),p=u.data.get(s);return p===void 0&&(p=s(),u.data.set(s,p)),p},cacheSignal:function(){return Ha(ta).controller.signal}},hd=typeof WeakMap=="function"?WeakMap:Map,Ui=0,Wi=null,ai=null,ui=0,Hi=0,cA=null,ah=!1,sh=!1,Nh=!1,Fc=0,es=0,oh=0,lh=0,dp=0,jA=0,bf=0,Uu=null,Pl=null,Qm=!1,pp=0,C0=0,mp=1/0,gp=null,Du=null,ms=0,Pu=null,Rh=null,au=0,km=0,wf=null,S0=null,Bf=0,Om=null;function HA(){return(Ui&2)!==0&&ui!==0?ui&-ui:ke.T!==null?Ef():fn()}function E0(){if(jA===0)if((ui&536870912)===0||kn){var s=jt;jt<<=1,(jt&3932160)===0&&(jt=262144),jA=s}else jA=536870912;return s=gr.current,s!==null&&(s.flags|=32),jA}function Nl(s,u,p){(s===Wi&&(Hi===2||Hi===9)||s.cancelPendingCommit!==null)&&(Qh(s,0),dc(s,ui,jA,!1)),dr(s,p),((Ui&2)===0||s!==Wi)&&(s===Wi&&((Ui&2)===0&&(lh|=p),es===4&&dc(s,ui,jA,!1)),su(s))}function T0(s,u,p){if((Ui&6)!==0)throw Error(c(327));var w=!p&&(u&127)===0&&(u&s.expiredLanes)===0||Xr(s,u),M=w?M0(s,u):fd(s,u,!0),R=w;do{if(M===0){sh&&!w&&dc(s,u,0,!1);break}else{if(p=s.current.alternate,R&&!Ps(p)){M=fd(s,u,!1),R=!1;continue}if(M===2){if(R=u,s.errorRecoveryDisabledLanes&R)var te=0;else te=s.pendingLanes&-536870913,te=te!==0?te:te&536870912?536870912:0;if(te!==0){u=te;e:{var be=s;M=Uu;var ht=be.current.memoizedState.isDehydrated;if(ht&&(Qh(be,te).flags|=256),te=fd(be,te,!1),te!==2){if(Nh&&!ht){be.errorRecoveryDisabledLanes|=R,lh|=R,M=4;break e}R=Pl,Pl=M,R!==null&&(Pl===null?Pl=R:Pl.push.apply(Pl,R))}M=te}if(R=!1,M!==2)continue}}if(M===1){Qh(s,0),dc(s,u,0,!0);break}e:{switch(w=s,R=M,R){case 0:case 1:throw Error(c(345));case 4:if((u&4194048)!==u)break;case 6:dc(w,u,jA,!ah);break e;case 2:Pl=null;break;case 3:case 5:break;default:throw Error(c(329))}if((u&62914560)===u&&(M=pp+300-mn(),10<M)){if(dc(w,u,jA,!ah),ur(w,0,!0)!==0)break e;au=u,w.timeoutHandle=Hh(F0.bind(null,w,p,Pl,gp,Qm,u,jA,lh,bf,ah,R,"Throttled",-0,0),M);break e}F0(w,p,Pl,gp,Qm,u,jA,lh,bf,ah,R,null,-0,0)}}break}while(!0);su(s)}function F0(s,u,p,w,M,R,te,be,ht,Rt,tr,ir,Ot,Gt){if(s.timeoutHandle=-1,ir=u.subtreeFlags,ir&8192||(ir&16785408)===16785408){ir={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:hs},Nm(u,R,ir);var Kr=(R&62914560)===R?pp-mn():(R&4194048)===R?C0-mn():0;if(Kr=dg(ir,Kr),Kr!==null){au=R,s.cancelPendingCommit=Kr(D0.bind(null,s,u,R,p,w,M,te,be,ht,tr,ir,null,Ot,Gt)),dc(s,R,te,!Rt);return}}D0(s,u,R,p,w,M,te,be,ht)}function Ps(s){for(var u=s;;){var p=u.tag;if((p===0||p===11||p===15)&&u.flags&16384&&(p=u.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var w=0;w<p.length;w++){var M=p[w],R=M.getSnapshot;M=M.value;try{if(!Xa(R(),M))return!1}catch{return!1}}if(p=u.child,u.subtreeFlags&16384&&p!==null)p.return=u,u=p;else{if(u===s)break;for(;u.sibling===null;){if(u.return===null||u.return===s)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function dc(s,u,p,w){u&=~dp,u&=~lh,s.suspendedLanes|=u,s.pingedLanes&=~u,w&&(s.warmLanes|=u),w=s.expirationTimes;for(var M=u;0<M;){var R=31-Xe(M),te=1<<R;w[R]=-1,M&=~te}p!==0&&Kn(s,p,u)}function yp(){return(Ui&6)===0?(Sf(0),!1):!0}function zm(){if(ai!==null){if(Hi===0)var s=ai.return;else s=ai,go=il=null,RA(s),ar=null,Mr=0,s=ai;for(;s!==null;)y0(s.alternate,s),s=s.return;ai=null}}function Qh(s,u){var p=s.timeoutHandle;p!==-1&&(s.timeoutHandle=-1,Mp(p)),p=s.cancelPendingCommit,p!==null&&(s.cancelPendingCommit=null,p()),au=0,zm(),Wi=s,ai=p=Ts(s.current,null),ui=u,Hi=0,cA=null,ah=!1,sh=Xr(s,u),Nh=!1,bf=jA=dp=lh=oh=es=0,Pl=Uu=null,Qm=!1,(u&8)!==0&&(u|=u&32);var w=s.entangledLanes;if(w!==0)for(s=s.entanglements,w&=u;0<w;){var M=31-Xe(w),R=1<<M;u|=s[M],w&=~R}return Fc=u,nc(),p}function jm(s,u){on=null,ke.H=$s,u===yt||u===Oe?(u=er(),Hi=3):u===Mt?(u=er(),Hi=4):Hi=u===Wd?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,cA=u,ai===null&&(es=1,zA(s,Ks(u,s.current)))}function I0(){var s=gr.current;return s===null?!0:(ui&4194048)===ui?yr===null:(ui&62914560)===ui||(ui&536870912)!==0?s===yr:!1}function Hm(){var s=ke.H;return ke.H=$s,s===null?$s:s}function Vm(){var s=ke.A;return ke.A=r1,s}function Nu(){es=4,ah||(ui&4194048)!==ui&&gr.current!==null||(sh=!0),(oh&134217727)===0&&(lh&134217727)===0||Wi===null||dc(Wi,ui,jA,!1)}function fd(s,u,p){var w=Ui;Ui|=2;var M=Hm(),R=Vm();(Wi!==s||ui!==u)&&(gp=null,Qh(s,u)),u=!1;var te=es;e:do try{if(Hi!==0&&ai!==null){var be=ai,ht=cA;switch(Hi){case 8:zm(),te=6;break e;case 3:case 2:case 9:case 6:gr.current===null&&(u=!0);var Rt=Hi;if(Hi=0,cA=null,Cf(s,be,ht,Rt),p&&sh){te=0;break e}break;default:Rt=Hi,Hi=0,cA=null,Cf(s,be,ht,Rt)}}L0(),te=es;break}catch(tr){jm(s,tr)}while(!0);return u&&s.shellSuspendCounter++,go=il=null,Ui=w,ke.H=M,ke.A=R,ai===null&&(Wi=null,ui=0,nc()),te}function L0(){for(;ai!==null;)kh(ai)}function M0(s,u){var p=Ui;Ui|=2;var w=Hm(),M=Vm();Wi!==s||ui!==u?(gp=null,mp=mn()+500,Qh(s,u)):sh=Xr(s,u);e:do try{if(Hi!==0&&ai!==null){u=ai;var R=cA;t:switch(Hi){case 1:Hi=0,cA=null,Cf(s,u,R,1);break;case 2:case 9:if(Ft(R)){Hi=0,cA=null,Gm(u);break}u=function(){Hi!==2&&Hi!==9||Wi!==s||(Hi=7),su(s)},R.then(u,u);break e;case 3:Hi=7;break e;case 4:Hi=5;break e;case 7:Ft(R)?(Hi=0,cA=null,Gm(u)):(Hi=0,cA=null,Cf(s,u,R,7));break;case 5:var te=null;switch(ai.tag){case 26:te=ai.memoizedState;case 5:case 27:var be=ai;if(te?vd(te):be.stateNode.complete){Hi=0,cA=null;var ht=be.sibling;if(ht!==null)ai=ht;else{var Rt=be.return;Rt!==null?(ai=Rt,vp(Rt)):ai=null}break t}}Hi=0,cA=null,Cf(s,u,R,5);break;case 6:Hi=0,cA=null,Cf(s,u,R,6);break;case 8:zm(),es=6;break e;default:throw Error(c(462))}}_p();break}catch(tr){jm(s,tr)}while(!0);return go=il=null,ke.H=w,ke.A=M,Ui=p,ai!==null?0:(Wi=null,ui=0,nc(),es)}function _p(){for(;ai!==null&&!Vr();)kh(ai)}function kh(s){var u=ll(s.alternate,s,Fc);s.memoizedProps=s.pendingProps,u===null?vp(s):ai=u}function Gm(s){var u=s,p=u.alternate;switch(u.tag){case 15:case 0:u=d0(p,u,u.pendingProps,u.type,void 0,ui);break;case 11:u=d0(p,u,u.pendingProps,u.type.render,u.ref,ui);break;case 5:RA(u);default:y0(p,u),u=ai=wu(u,Fc),u=ll(p,u,Fc)}s.memoizedProps=s.pendingProps,u===null?vp(s):ai=u}function Cf(s,u,p,w){go=il=null,RA(u),ar=null,Mr=0;var M=u.return;try{if(th(s,M,u,p,ui)){es=1,zA(s,Ks(p,s.current)),ai=null;return}}catch(R){if(M!==null)throw ai=M,R;es=1,zA(s,Ks(p,s.current)),ai=null;return}u.flags&32768?(kn||w===1?s=!0:sh||(ui&536870912)!==0?s=!1:(ah=s=!0,(w===2||w===9||w===3||w===6)&&(w=gr.current,w!==null&&w.tag===13&&(w.flags|=16384))),U0(u,s)):vp(u)}function vp(s){var u=s;do{if((u.flags&32768)!==0){U0(u,ah);return}s=u.return;var p=e1(u.alternate,u,Fc);if(p!==null){ai=p;return}if(u=u.sibling,u!==null){ai=u;return}ai=u=s}while(u!==null);es===0&&(es=5)}function U0(s,u){do{var p=g0(s.alternate,s);if(p!==null){p.flags&=32767,ai=p;return}if(p=s.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!u&&(s=s.sibling,s!==null)){ai=s;return}ai=s=p}while(s!==null);es=6,ai=null}function D0(s,u,p,w,M,R,te,be,ht){s.cancelPendingCommit=null;do xp();while(ms!==0);if((Ui&6)!==0)throw Error(c(327));if(u!==null){if(u===s.current)throw Error(c(177));if(R=u.lanes|u.childLanes,R|=rc,mi(s,p,R,te,be,ht),s===Wi&&(ai=Wi=null,ui=0),Rh=u,Pu=s,au=p,km=R,wf=M,S0=w,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Zm(Sn,function(){return k0(),null})):(s.callbackNode=null,s.callbackPriority=0),w=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||w){w=ke.T,ke.T=null,M=ot.p,ot.p=2,te=Ui,Ui|=4;try{t1(s,u,p)}finally{Ui=te,ot.p=M,ke.T=w}}ms=1,P0(),N0(),R0()}}function P0(){if(ms===1){ms=0;var s=Pu,u=Rh,p=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||p){p=ke.T,ke.T=null;var w=ot.p;ot.p=2;var M=Ui;Ui|=4;try{Dm(u,s);var R=hh,te=Sl(s.containerInfo),be=R.focusedElem,ht=R.selectionRange;if(te!==be&&be&&be.ownerDocument&&tl(be.ownerDocument.documentElement,be)){if(ht!==null&&El(be)){var Rt=ht.start,tr=ht.end;if(tr===void 0&&(tr=Rt),"selectionStart"in be)be.selectionStart=Rt,be.selectionEnd=Math.min(tr,be.value.length);else{var ir=be.ownerDocument||document,Ot=ir&&ir.defaultView||window;if(Ot.getSelection){var Gt=Ot.getSelection(),Kr=be.textContent.length,vn=Math.min(ht.start,Kr),Gi=ht.end===void 0?vn:Math.min(ht.end,Kr);!Gt.extend&&vn>Gi&&(te=Gi,Gi=vn,vn=te);var Tt=Xl(be,vn),vt=Xl(be,Gi);if(Tt&&vt&&(Gt.rangeCount!==1||Gt.anchorNode!==Tt.node||Gt.anchorOffset!==Tt.offset||Gt.focusNode!==vt.node||Gt.focusOffset!==vt.offset)){var kt=ir.createRange();kt.setStart(Tt.node,Tt.offset),Gt.removeAllRanges(),vn>Gi?(Gt.addRange(kt),Gt.extend(vt.node,vt.offset)):(kt.setEnd(vt.node,vt.offset),Gt.addRange(kt))}}}}for(ir=[],Gt=be;Gt=Gt.parentNode;)Gt.nodeType===1&&ir.push({element:Gt,left:Gt.scrollLeft,top:Gt.scrollTop});for(typeof be.focus=="function"&&be.focus(),be=0;be<ir.length;be++){var rr=ir[be];rr.element.scrollLeft=rr.left,rr.element.scrollTop=rr.top}}Qp=!!Al,hh=Al=null}finally{Ui=M,ot.p=w,ke.T=p}}s.current=u,ms=2}}function N0(){if(ms===2){ms=0;var s=Pu,u=Rh,p=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||p){p=ke.T,ke.T=null;var w=ot.p;ot.p=2;var M=Ui;Ui|=4;try{cp(s,u.alternate,u)}finally{Ui=M,ot.p=w,ke.T=p}}ms=3}}function R0(){if(ms===4||ms===3){ms=0,Gr();var s=Pu,u=Rh,p=au,w=S0;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?ms=5:(ms=0,Rh=Pu=null,Q0(s,s.pendingLanes));var M=s.pendingLanes;if(M===0&&(Du=null),Wt(p),u=u.stateNode,Ae&&typeof Ae.onCommitFiberRoot=="function")try{Ae.onCommitFiberRoot(ne,u,void 0,(u.current.flags&128)===128)}catch{}if(w!==null){u=ke.T,M=ot.p,ot.p=2,ke.T=null;try{for(var R=s.onRecoverableError,te=0;te<w.length;te++){var be=w[te];R(be.value,{componentStack:be.stack})}}finally{ke.T=u,ot.p=M}}(au&3)!==0&&xp(),su(s),M=s.pendingLanes,(p&261930)!==0&&(M&42)!==0?s===Om?Bf++:(Bf=0,Om=s):Bf=0,Sf(0)}}function Q0(s,u){(s.pooledCacheLanes&=u)===0&&(u=s.pooledCache,u!=null&&(s.pooledCache=null,aA(u)))}function xp(){return P0(),N0(),R0(),k0()}function k0(){if(ms!==5)return!1;var s=Pu,u=km;km=0;var p=Wt(au),w=ke.T,M=ot.p;try{ot.p=32>p?32:p,ke.T=null,p=wf,wf=null;var R=Pu,te=au;if(ms=0,Rh=Pu=null,au=0,(Ui&6)!==0)throw Error(c(331));var be=Ui;if(Ui|=4,w0(R.current),nh(R,R.current,te,p),Ui=be,Sf(0,!1),Ae&&typeof Ae.onPostCommitFiberRoot=="function")try{Ae.onPostCommitFiberRoot(ne,R)}catch{}return!0}finally{ot.p=M,ke.T=w,Q0(s,u)}}function O0(s,u,p){u=Ks(p,u),u=pf(s.stateNode,u,2),s=Ln(s,u,2),s!==null&&(dr(s,2),su(s))}function Vi(s,u,p){if(s.tag===3)O0(s,s,p);else for(;u!==null;){if(u.tag===3){O0(u,s,p);break}else if(u.tag===1){var w=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(Du===null||!Du.has(w))){s=Ks(p,s),p=eh(2),w=Ln(u,p,2),w!==null&&(mf(p,w,u,s),dr(w,2),su(w));break}}u=u.return}}function bp(s,u,p){var w=s.pingCache;if(w===null){w=s.pingCache=new hd;var M=new Set;w.set(u,M)}else M=w.get(u),M===void 0&&(M=new Set,w.set(u,M));M.has(p)||(Nh=!0,M.add(p),s=qm.bind(null,s,u,p),u.then(s,s))}function qm(s,u,p){var w=s.pingCache;w!==null&&w.delete(u),s.pingedLanes|=s.suspendedLanes&p,s.warmLanes&=~p,Wi===s&&(ui&p)===p&&(es===4||es===3&&(ui&62914560)===ui&&300>mn()-pp?(Ui&2)===0&&Qh(s,0):dp|=p,bf===ui&&(bf=0)),su(s)}function Km(s,u){u===0&&(u=zr()),s=po(s,u),s!==null&&(dr(s,u),su(s))}function Ah(s){var u=s.memoizedState,p=0;u!==null&&(p=u.retryLane),Km(s,p)}function wp(s,u){var p=0;switch(s.tag){case 31:case 13:var w=s.stateNode,M=s.memoizedState;M!==null&&(p=M.retryLane);break;case 19:w=s.stateNode;break;case 22:w=s.stateNode._retryCache;break;default:throw Error(c(314))}w!==null&&w.delete(u),Km(s,p)}function Zm(s,u){return Zr(s,u)}var Bp=null,Oh=null,Xm=!1,Cp=!1,Wm=!1,ch=0;function su(s){s!==Oh&&s.next===null&&(Oh===null?Bp=Oh=s:Oh=Oh.next=s),Cp=!0,Xm||(Xm=!0,n1())}function Sf(s,u){if(!Wm&&Cp){Wm=!0;do for(var p=!1,w=Bp;w!==null;){if(s!==0){var M=w.pendingLanes;if(M===0)var R=0;else{var te=w.suspendedLanes,be=w.pingedLanes;R=(1<<31-Xe(42|s)+1)-1,R&=M&~(te&~be),R=R&201326741?R&201326741|1:R?R|2:0}R!==0&&(p=!0,Sp(w,R))}else R=ui,R=ur(w,w===Wi?R:0,w.cancelPendingCommit!==null||w.timeoutHandle!==-1),(R&3)===0||Xr(w,R)||(p=!0,Sp(w,R));w=w.next}while(p);Wm=!1}}function z0(){ou()}function ou(){Cp=Xm=!1;var s=0;ch!==0&&J0()&&(s=ch);for(var u=mn(),p=null,w=Bp;w!==null;){var M=w.next,R=Ru(w,u);R===0?(w.next=null,p===null?Bp=M:p.next=M,M===null&&(Oh=p)):(p=w,(s!==0||(R&3)!==0)&&(Cp=!0)),w=M}ms!==0&&ms!==5||Sf(s),ch!==0&&(ch=0)}function Ru(s,u){for(var p=s.suspendedLanes,w=s.pingedLanes,M=s.expirationTimes,R=s.pendingLanes&-62914561;0<R;){var te=31-Xe(R),be=1<<te,ht=M[te];ht===-1?((be&p)===0||(be&w)!==0)&&(M[te]=Er(be,u)):ht<=u&&(s.expiredLanes|=be),R&=~be}if(u=Wi,p=ui,p=ur(s,s===u?p:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),w=s.callbackNode,p===0||s===u&&(Hi===2||Hi===9)||s.cancelPendingCommit!==null)return w!==null&&w!==null&&Sr(w),s.callbackNode=null,s.callbackPriority=0;if((p&3)===0||Xr(s,p)){if(u=p&-p,u===s.callbackPriority)return u;switch(w!==null&&Sr(w),Wt(p)){case 2:case 8:p=Fn;break;case 32:p=Sn;break;case 268435456:p=gn;break;default:p=Sn}return w=Ym.bind(null,s),p=Zr(p,w),s.callbackPriority=u,s.callbackNode=p,u}return w!==null&&w!==null&&Sr(w),s.callbackPriority=2,s.callbackNode=null,2}function Ym(s,u){if(ms!==0&&ms!==5)return s.callbackNode=null,s.callbackPriority=0,null;var p=s.callbackNode;if(xp()&&s.callbackNode!==p)return null;var w=ui;return w=ur(s,s===Wi?w:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),w===0?null:(T0(s,w,u),Ru(s,mn()),s.callbackNode!=null&&s.callbackNode===p?Ym.bind(null,s):null)}function Sp(s,u){if(xp())return null;T0(s,u,!0)}function n1(){sg(function(){(Ui&6)!==0?Zr(An,z0):ou()})}function Ef(){if(ch===0){var s=F;s===0&&(s=dt,dt<<=1,(dt&261888)===0&&(dt=256)),ch=s}return ch}function Ep(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:cn(""+s)}function j0(s,u){var p=u.ownerDocument.createElement("input");return p.name=u.name,p.value=u.value,s.id&&p.setAttribute("form",s.id),u.parentNode.insertBefore(p,u),s=new FormData(s),p.parentNode.removeChild(p),s}function $m(s,u,p,w,M){if(u==="submit"&&p&&p.stateNode===M){var R=Ep((M[Jt]||null).action),te=w.submitter;te&&(u=(u=te[Jt]||null)?Ep(u.formAction):te.getAttribute("formAction"),u!==null&&(R=u,te=null));var be=new Io("action","action",null,w,M);s.push({event:be,listeners:[{instance:null,listener:function(){if(w.defaultPrevented){if(ch!==0){var ht=te?j0(M,te):new FormData(M);ps(p,{pending:!0,data:ht,method:M.method,action:R},null,ht)}}else typeof R=="function"&&(be.preventDefault(),ht=te?j0(M,te):new FormData(M),ps(p,{pending:!0,data:ht,method:M.method,action:R},R,ht))},currentTarget:M}]})}}for(var dd=0;dd<tc.length;dd++){var uh=tc[dd],H0=uh.toLowerCase(),V0=uh[0].toUpperCase()+uh.slice(1);fo(H0,"on"+V0)}fo(Yl,"onAnimationEnd"),fo(JA,"onAnimationIteration"),fo(xu,"onAnimationStart"),fo("dblclick","onDoubleClick"),fo("focusin","onFocus"),fo("focusout","onBlur"),fo(ec,"onTransitionRun"),fo(Hc,"onTransitionStart"),fo(vc,"onTransitionCancel"),fo(ho,"onTransitionEnd"),ks("onMouseEnter",["mouseout","mouseover"]),ks("onMouseLeave",["mouseout","mouseover"]),ks("onPointerEnter",["pointerout","pointerover"]),ks("onPointerLeave",["pointerout","pointerover"]),Zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),G0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zh));function pd(s,u){u=(u&4)!==0;for(var p=0;p<s.length;p++){var w=s[p],M=w.event;w=w.listeners;e:{var R=void 0;if(u)for(var te=w.length-1;0<=te;te--){var be=w[te],ht=be.instance,Rt=be.currentTarget;if(be=be.listener,ht!==R&&M.isPropagationStopped())break e;R=be,M.currentTarget=Rt;try{R(M)}catch(tr){Il(tr)}M.currentTarget=null,R=ht}else for(te=0;te<w.length;te++){if(be=w[te],ht=be.instance,Rt=be.currentTarget,be=be.listener,ht!==R&&M.isPropagationStopped())break e;R=be,M.currentTarget=Rt;try{R(M)}catch(tr){Il(tr)}M.currentTarget=null,R=ht}}}}function ti(s,u){var p=u[qr];p===void 0&&(p=u[qr]=new Set);var w=s+"__bubble";p.has(w)||(q0(u,s,2,!1),p.add(w))}function Jm(s,u,p){var w=0;u&&(w|=4),q0(p,s,w,u)}var Tp="_reactListening"+Math.random().toString(36).slice(2);function eg(s){if(!s[Tp]){s[Tp]=!0,xA.forEach(function(p){p!=="selectionchange"&&(G0.has(p)||Jm(p,!1,s),Jm(p,!0,s))});var u=s.nodeType===9?s:s.ownerDocument;u===null||u[Tp]||(u[Tp]=!0,Jm("selectionchange",!1,u))}}function q0(s,u,p,w){switch(Kh(u)){case 2:var M=fy;break;case 8:M=Cd;break;default:M=gg}p=M.bind(null,u,p,s),M=void 0,!fs||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(M=!0),w?M!==void 0?s.addEventListener(u,p,{capture:!0,passive:M}):s.addEventListener(u,p,!0):M!==void 0?s.addEventListener(u,p,{passive:M}):s.addEventListener(u,p,!1)}function tg(s,u,p,w,M){var R=w;if((u&1)===0&&(u&2)===0&&w!==null)e:for(;;){if(w===null)return;var te=w.tag;if(te===3||te===4){var be=w.stateNode.containerInfo;if(be===M)break;if(te===4)for(te=w.return;te!==null;){var ht=te.tag;if((ht===3||ht===4)&&te.stateNode.containerInfo===M)return;te=te.return}for(;be!==null;){if(te=ys(be),te===null)return;if(ht=te.tag,ht===5||ht===6||ht===26||ht===27){w=R=te;continue e}be=be.parentNode}}w=w.return}Hr(function(){var Rt=R,tr=FA(p),ir=[];e:{var Ot=Wu.get(s);if(Ot!==void 0){var Gt=Io,Kr=s;switch(s){case"keypress":if(Ua(p)===0)break e;case"keydown":case"keyup":Gt=Mn;break;case"focusin":Kr="focus",Gt=Da;break;case"focusout":Kr="blur",Gt=Da;break;case"beforeblur":case"afterblur":Gt=Da;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Gt=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Gt=En;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Gt=Pa;break;case Yl:case JA:case xu:Gt=V;break;case ho:Gt=ha;break;case"scroll":case"scrollend":Gt=Gl;break;case"wheel":Gt=js;break;case"copy":case"cut":case"paste":Gt=qe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Gt=ua;break;case"toggle":case"beforetoggle":Gt=$A}var vn=(u&4)!==0,Gi=!vn&&(s==="scroll"||s==="scrollend"),Tt=vn?Ot!==null?Ot+"Capture":null:Ot;vn=[];for(var vt=Rt,kt;vt!==null;){var rr=vt;if(kt=rr.stateNode,rr=rr.tag,rr!==5&&rr!==26&&rr!==27||kt===null||Tt===null||(rr=Za(vt,Tt),rr!=null&&vn.push(jh(vt,rr,kt))),Gi)break;vt=vt.return}0<vn.length&&(Ot=new Gt(Ot,Kr,null,p,tr),ir.push({event:Ot,listeners:vn}))}}if((u&7)===0){e:{if(Ot=s==="mouseover"||s==="pointerover",Gt=s==="mouseout"||s==="pointerout",Ot&&p!==TA&&(Kr=p.relatedTarget||p.fromElement)&&(ys(Kr)||Kr[kr]))break e;if((Gt||Ot)&&(Ot=tr.window===tr?tr:(Ot=tr.ownerDocument)?Ot.defaultView||Ot.parentWindow:window,Gt?(Kr=p.relatedTarget||p.toElement,Gt=Rt,Kr=Kr?ys(Kr):null,Kr!==null&&(Gi=y(Kr),vn=Kr.tag,Kr!==Gi||vn!==5&&vn!==27&&vn!==6)&&(Kr=null)):(Gt=null,Kr=Rt),Gt!==Kr)){if(vn=pn,rr="onMouseLeave",Tt="onMouseEnter",vt="mouse",(s==="pointerout"||s==="pointerover")&&(vn=ua,rr="onPointerLeave",Tt="onPointerEnter",vt="pointer"),Gi=Gt==null?Ot:_l(Gt),kt=Kr==null?Ot:_l(Kr),Ot=new vn(rr,vt+"leave",Gt,p,tr),Ot.target=Gi,Ot.relatedTarget=kt,rr=null,ys(tr)===Rt&&(vn=new vn(Tt,vt+"enter",Kr,p,tr),vn.target=kt,vn.relatedTarget=Gi,rr=vn),Gi=rr,Gt&&Kr)t:{for(vn=K0,Tt=Gt,vt=Kr,kt=0,rr=Tt;rr;rr=vn(rr))kt++;rr=0;for(var ln=vt;ln;ln=vn(ln))rr++;for(;0<kt-rr;)Tt=vn(Tt),kt--;for(;0<rr-kt;)vt=vn(vt),rr--;for(;kt--;){if(Tt===vt||vt!==null&&Tt===vt.alternate){vn=Tt;break t}Tt=vn(Tt),vt=vn(vt)}vn=null}else vn=null;Gt!==null&&rg(ir,Ot,Gt,vn,!1),Kr!==null&&Gi!==null&&rg(ir,Gi,Kr,vn,!0)}}e:{if(Ot=Rt?_l(Rt):window,Gt=Ot.nodeName&&Ot.nodeName.toLowerCase(),Gt==="select"||Gt==="input"&&Ot.type==="file")var pi=Ao;else if(_c(Ot))if(Gs)pi=co;else{pi=pa;var rn=jc}else Gt=Ot.nodeName,!Gt||Gt.toLowerCase()!=="input"||Ot.type!=="checkbox"&&Ot.type!=="radio"?Rt&&Rc(Rt.elementType)&&(pi=Ao):pi=vu;if(pi&&(pi=pi(s,Rt))){ws(ir,pi,p,tr);break e}rn&&rn(s,Ot,Rt),s==="focusout"&&Rt&&Ot.type==="number"&&Rt.memoizedProps.value!=null&&WA(Ot,"number",Ot.value)}switch(rn=Rt?_l(Rt):window,s){case"focusin":(_c(rn)||rn.contentEditable==="true")&&(Ra=rn,Tl=Rt,Cs=null);break;case"focusout":Cs=Tl=Ra=null;break;case"mousedown":rl=!0;break;case"contextmenu":case"mouseup":case"dragend":rl=!1,Ai(ir,p,tr);break;case"selectionchange":if(Wl)break;case"keydown":case"keyup":Ai(ir,p,tr)}var qn;if(fa)e:{switch(s){case"compositionstart":var hi="onCompositionStart";break e;case"compositionend":hi="onCompositionEnd";break e;case"compositionupdate":hi="onCompositionUpdate";break e}hi=void 0}else Hs?wl(s,p)&&(hi="onCompositionEnd"):s==="keydown"&&p.keyCode===229&&(hi="onCompositionStart");hi&&(bs&&p.locale!=="ko"&&(Hs||hi!=="onCompositionStart"?hi==="onCompositionEnd"&&Hs&&(qn=IA()):(vs=tr,Os="value"in vs?vs.value:vs.textContent,Hs=!0)),rn=Ic(Rt,hi),0<rn.length&&(hi=new St(hi,s,null,p,tr),ir.push({event:hi,listeners:rn}),qn?hi.data=qn:(qn=Qc(p),qn!==null&&(hi.data=qn)))),(qn=Kl?Vs(s,p):Do(s,p))&&(hi=Ic(Rt,"onBeforeInput"),0<hi.length&&(rn=new St("onBeforeInput","beforeinput",null,p,tr),ir.push({event:rn,listeners:hi}),rn.data=qn)),$m(ir,s,Rt,p,tr)}pd(ir,u)})}function jh(s,u,p){return{instance:s,listener:u,currentTarget:p}}function Ic(s,u){for(var p=u+"Capture",w=[];s!==null;){var M=s,R=M.stateNode;if(M=M.tag,M!==5&&M!==26&&M!==27||R===null||(M=Za(s,p),M!=null&&w.unshift(jh(s,M,R)),M=Za(s,u),M!=null&&w.push(jh(s,M,R))),s.tag===3)return w;s=s.return}return[]}function K0(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function rg(s,u,p,w,M){for(var R=u._reactName,te=[];p!==null&&p!==w;){var be=p,ht=be.alternate,Rt=be.stateNode;if(be=be.tag,ht!==null&&ht===w)break;be!==5&&be!==26&&be!==27||Rt===null||(ht=Rt,M?(Rt=Za(p,R),Rt!=null&&te.unshift(jh(p,Rt,ht))):M||(Rt=Za(p,R),Rt!=null&&te.push(jh(p,Rt,ht)))),p=p.return}te.length!==0&&s.push({event:u,listeners:te})}var Z0=/\r\n?/g,X0=/\u0000|\uFFFD/g;function ng(s){return(typeof s=="string"?s:""+s).replace(Z0,`
`).replace(X0,"")}function ig(s,u){return u=ng(u),ng(s)===u}function Di(s,u,p,w,M,R){switch(p){case"children":typeof w=="string"?u==="body"||u==="textarea"&&w===""||lo(s,w):(typeof w=="number"||typeof w=="bigint")&&u!=="body"&&lo(s,""+w);break;case"className":Hl(s,"class",w);break;case"tabIndex":Hl(s,"tabindex",w);break;case"dir":case"role":case"viewBox":case"width":case"height":Hl(s,p,w);break;case"style":_u(s,w,R);break;case"data":if(u!=="object"){Hl(s,"data",w);break}case"src":case"href":if(w===""&&(u!=="a"||p!=="href")){s.removeAttribute(p);break}if(w==null||typeof w=="function"||typeof w=="symbol"||typeof w=="boolean"){s.removeAttribute(p);break}w=cn(""+w),s.setAttribute(p,w);break;case"action":case"formAction":if(typeof w=="function"){s.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof R=="function"&&(p==="formAction"?(u!=="input"&&Di(s,u,"name",M.name,M,null),Di(s,u,"formEncType",M.formEncType,M,null),Di(s,u,"formMethod",M.formMethod,M,null),Di(s,u,"formTarget",M.formTarget,M,null)):(Di(s,u,"encType",M.encType,M,null),Di(s,u,"method",M.method,M,null),Di(s,u,"target",M.target,M,null)));if(w==null||typeof w=="symbol"||typeof w=="boolean"){s.removeAttribute(p);break}w=cn(""+w),s.setAttribute(p,w);break;case"onClick":w!=null&&(s.onclick=hs);break;case"onScroll":w!=null&&ti("scroll",s);break;case"onScrollEnd":w!=null&&ti("scrollend",s);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(c(61));if(p=w.__html,p!=null){if(M.children!=null)throw Error(c(60));s.innerHTML=p}}break;case"multiple":s.multiple=w&&typeof w!="function"&&typeof w!="symbol";break;case"muted":s.muted=w&&typeof w!="function"&&typeof w!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(w==null||typeof w=="function"||typeof w=="boolean"||typeof w=="symbol"){s.removeAttribute("xlink:href");break}p=cn(""+w),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":w!=null&&typeof w!="function"&&typeof w!="symbol"?s.setAttribute(p,""+w):s.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":w&&typeof w!="function"&&typeof w!="symbol"?s.setAttribute(p,""):s.removeAttribute(p);break;case"capture":case"download":w===!0?s.setAttribute(p,""):w!==!1&&w!=null&&typeof w!="function"&&typeof w!="symbol"?s.setAttribute(p,w):s.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":w!=null&&typeof w!="function"&&typeof w!="symbol"&&!isNaN(w)&&1<=w?s.setAttribute(p,w):s.removeAttribute(p);break;case"rowSpan":case"start":w==null||typeof w=="function"||typeof w=="symbol"||isNaN(w)?s.removeAttribute(p):s.setAttribute(p,w);break;case"popover":ti("beforetoggle",s),ti("toggle",s),ls(s,"popover",w);break;case"xlinkActuate":As(s,"http://www.w3.org/1999/xlink","xlink:actuate",w);break;case"xlinkArcrole":As(s,"http://www.w3.org/1999/xlink","xlink:arcrole",w);break;case"xlinkRole":As(s,"http://www.w3.org/1999/xlink","xlink:role",w);break;case"xlinkShow":As(s,"http://www.w3.org/1999/xlink","xlink:show",w);break;case"xlinkTitle":As(s,"http://www.w3.org/1999/xlink","xlink:title",w);break;case"xlinkType":As(s,"http://www.w3.org/1999/xlink","xlink:type",w);break;case"xmlBase":As(s,"http://www.w3.org/XML/1998/namespace","xml:base",w);break;case"xmlLang":As(s,"http://www.w3.org/XML/1998/namespace","xml:lang",w);break;case"xmlSpace":As(s,"http://www.w3.org/XML/1998/namespace","xml:space",w);break;case"is":ls(s,"is",w);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=_s.get(p)||p,ls(s,p,w))}}function Fp(s,u,p,w,M,R){switch(p){case"style":_u(s,w,R);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(c(61));if(p=w.__html,p!=null){if(M.children!=null)throw Error(c(60));s.innerHTML=p}}break;case"children":typeof w=="string"?lo(s,w):(typeof w=="number"||typeof w=="bigint")&&lo(s,""+w);break;case"onScroll":w!=null&&ti("scroll",s);break;case"onScrollEnd":w!=null&&ti("scrollend",s);break;case"onClick":w!=null&&(s.onclick=hs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ni.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(M=p.endsWith("Capture"),u=p.slice(2,M?p.length-7:void 0),R=s[Jt]||null,R=R!=null?R[p]:null,typeof R=="function"&&s.removeEventListener(u,R,M),typeof w=="function")){typeof R!="function"&&R!==null&&(p in s?s[p]=null:s.hasAttribute(p)&&s.removeAttribute(p)),s.addEventListener(u,w,M);break e}p in s?s[p]=w:w===!0?s.setAttribute(p,""):ls(s,p,w)}}}function gs(s,u,p){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ti("error",s),ti("load",s);var w=!1,M=!1,R;for(R in p)if(p.hasOwnProperty(R)){var te=p[R];if(te!=null)switch(R){case"src":w=!0;break;case"srcSet":M=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(c(137,u));default:Di(s,u,R,te,p,null)}}M&&Di(s,u,"srcSet",p.srcSet,p,null),w&&Di(s,u,"src",p.src,p,null);return;case"input":ti("invalid",s);var be=R=te=M=null,ht=null,Rt=null;for(w in p)if(p.hasOwnProperty(w)){var tr=p[w];if(tr!=null)switch(w){case"name":M=tr;break;case"type":te=tr;break;case"checked":ht=tr;break;case"defaultChecked":Rt=tr;break;case"value":R=tr;break;case"defaultValue":be=tr;break;case"children":case"dangerouslySetInnerHTML":if(tr!=null)throw Error(c(137,u));break;default:Di(s,u,w,tr,p,null)}}gu(s,R,be,ht,Rt,te,M,!1);return;case"select":ti("invalid",s),w=te=R=null;for(M in p)if(p.hasOwnProperty(M)&&(be=p[M],be!=null))switch(M){case"value":R=be;break;case"defaultValue":te=be;break;case"multiple":w=be;default:Di(s,u,M,be,p,null)}u=R,p=te,s.multiple=!!w,u!=null?us(s,!!w,u,!1):p!=null&&us(s,!!w,p,!0);return;case"textarea":ti("invalid",s),R=M=w=null;for(te in p)if(p.hasOwnProperty(te)&&(be=p[te],be!=null))switch(te){case"value":w=be;break;case"defaultValue":M=be;break;case"children":R=be;break;case"dangerouslySetInnerHTML":if(be!=null)throw Error(c(91));break;default:Di(s,u,te,be,p,null)}CA(s,w,M,R);return;case"option":for(ht in p)p.hasOwnProperty(ht)&&(w=p[ht],w!=null)&&(ht==="selected"?s.selected=w&&typeof w!="function"&&typeof w!="symbol":Di(s,u,ht,w,p,null));return;case"dialog":ti("beforetoggle",s),ti("toggle",s),ti("cancel",s),ti("close",s);break;case"iframe":case"object":ti("load",s);break;case"video":case"audio":for(w=0;w<zh.length;w++)ti(zh[w],s);break;case"image":ti("error",s),ti("load",s);break;case"details":ti("toggle",s);break;case"embed":case"source":case"link":ti("error",s),ti("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Rt in p)if(p.hasOwnProperty(Rt)&&(w=p[Rt],w!=null))switch(Rt){case"children":case"dangerouslySetInnerHTML":throw Error(c(137,u));default:Di(s,u,Rt,w,p,null)}return;default:if(Rc(u)){for(tr in p)p.hasOwnProperty(tr)&&(w=p[tr],w!==void 0&&Fp(s,u,tr,w,p,void 0));return}}for(be in p)p.hasOwnProperty(be)&&(w=p[be],w!=null&&Di(s,u,be,w,p,null))}function W0(s,u,p,w){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var M=null,R=null,te=null,be=null,ht=null,Rt=null,tr=null;for(Gt in p){var ir=p[Gt];if(p.hasOwnProperty(Gt)&&ir!=null)switch(Gt){case"checked":break;case"value":break;case"defaultValue":ht=ir;default:w.hasOwnProperty(Gt)||Di(s,u,Gt,null,w,ir)}}for(var Ot in w){var Gt=w[Ot];if(ir=p[Ot],w.hasOwnProperty(Ot)&&(Gt!=null||ir!=null))switch(Ot){case"type":R=Gt;break;case"name":M=Gt;break;case"checked":Rt=Gt;break;case"defaultChecked":tr=Gt;break;case"value":te=Gt;break;case"defaultValue":be=Gt;break;case"children":case"dangerouslySetInnerHTML":if(Gt!=null)throw Error(c(137,u));break;default:Gt!==ir&&Di(s,u,Ot,Gt,w,ir)}}BA(s,te,be,ht,Rt,tr,R,M);return;case"select":Gt=te=be=Ot=null;for(R in p)if(ht=p[R],p.hasOwnProperty(R)&&ht!=null)switch(R){case"value":break;case"multiple":Gt=ht;default:w.hasOwnProperty(R)||Di(s,u,R,null,w,ht)}for(M in w)if(R=w[M],ht=p[M],w.hasOwnProperty(M)&&(R!=null||ht!=null))switch(M){case"value":Ot=R;break;case"defaultValue":be=R;break;case"multiple":te=R;default:R!==ht&&Di(s,u,M,R,w,ht)}u=be,p=te,w=Gt,Ot!=null?us(s,!!p,Ot,!1):!!w!=!!p&&(u!=null?us(s,!!p,u,!0):us(s,!!p,p?[]:"",!1));return;case"textarea":Gt=Ot=null;for(be in p)if(M=p[be],p.hasOwnProperty(be)&&M!=null&&!w.hasOwnProperty(be))switch(be){case"value":break;case"children":break;default:Di(s,u,be,null,w,M)}for(te in w)if(M=w[te],R=p[te],w.hasOwnProperty(te)&&(M!=null||R!=null))switch(te){case"value":Ot=M;break;case"defaultValue":Gt=M;break;case"children":break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(c(91));break;default:M!==R&&Di(s,u,te,M,w,R)}yu(s,Ot,Gt);return;case"option":for(var Kr in p)Ot=p[Kr],p.hasOwnProperty(Kr)&&Ot!=null&&!w.hasOwnProperty(Kr)&&(Kr==="selected"?s.selected=!1:Di(s,u,Kr,null,w,Ot));for(ht in w)Ot=w[ht],Gt=p[ht],w.hasOwnProperty(ht)&&Ot!==Gt&&(Ot!=null||Gt!=null)&&(ht==="selected"?s.selected=Ot&&typeof Ot!="function"&&typeof Ot!="symbol":Di(s,u,ht,Ot,w,Gt));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var vn in p)Ot=p[vn],p.hasOwnProperty(vn)&&Ot!=null&&!w.hasOwnProperty(vn)&&Di(s,u,vn,null,w,Ot);for(Rt in w)if(Ot=w[Rt],Gt=p[Rt],w.hasOwnProperty(Rt)&&Ot!==Gt&&(Ot!=null||Gt!=null))switch(Rt){case"children":case"dangerouslySetInnerHTML":if(Ot!=null)throw Error(c(137,u));break;default:Di(s,u,Rt,Ot,w,Gt)}return;default:if(Rc(u)){for(var Gi in p)Ot=p[Gi],p.hasOwnProperty(Gi)&&Ot!==void 0&&!w.hasOwnProperty(Gi)&&Fp(s,u,Gi,void 0,w,Ot);for(tr in w)Ot=w[tr],Gt=p[tr],!w.hasOwnProperty(tr)||Ot===Gt||Ot===void 0&&Gt===void 0||Fp(s,u,tr,Ot,w,Gt);return}}for(var Tt in p)Ot=p[Tt],p.hasOwnProperty(Tt)&&Ot!=null&&!w.hasOwnProperty(Tt)&&Di(s,u,Tt,null,w,Ot);for(ir in w)Ot=w[ir],Gt=p[ir],!w.hasOwnProperty(ir)||Ot===Gt||Ot==null&&Gt==null||Di(s,u,ir,Ot,w,Gt)}function Ip(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Y0(){if(typeof performance.getEntriesByType=="function"){for(var s=0,u=0,p=performance.getEntriesByType("resource"),w=0;w<p.length;w++){var M=p[w],R=M.transferSize,te=M.initiatorType,be=M.duration;if(R&&be&&Ip(te)){for(te=0,be=M.responseEnd,w+=1;w<p.length;w++){var ht=p[w],Rt=ht.startTime;if(Rt>be)break;var tr=ht.transferSize,ir=ht.initiatorType;tr&&Ip(ir)&&(ht=ht.responseEnd,te+=tr*(ht<be?1:(be-Rt)/(ht-Rt)))}if(--w,u+=8*(R+te)/(M.duration/1e3),s++,10<s)break}}if(0<s)return u/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Al=null,hh=null;function Tf(s){return s.nodeType===9?s:s.ownerDocument}function $0(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ag(s,u){if(s===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&u==="foreignObject"?0:s}function Qu(s,u){return s==="textarea"||s==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Lp=null;function J0(){var s=window.event;return s&&s.type==="popstate"?s===Lp?!1:(Lp=s,!0):(Lp=null,!1)}var Hh=typeof setTimeout=="function"?setTimeout:void 0,Mp=typeof clearTimeout=="function"?clearTimeout:void 0,Up=typeof Promise=="function"?Promise:void 0,sg=typeof queueMicrotask=="function"?queueMicrotask:typeof Up<"u"?function(s){return Up.resolve(null).then(s).catch(ey)}:Hh;function ey(s){setTimeout(function(){throw s})}function lu(s){return s==="head"}function Dp(s,u){var p=u,w=0;do{var M=p.nextSibling;if(s.removeChild(p),M&&M.nodeType===8)if(p=M.data,p==="/$"||p==="/&"){if(w===0){s.removeChild(M),Qf(u);return}w--}else if(p==="$"||p==="$?"||p==="$~"||p==="$!"||p==="&")w++;else if(p==="html")Vh(s.ownerDocument.documentElement);else if(p==="head"){p=s.ownerDocument.head,Vh(p);for(var R=p.firstChild;R;){var te=R.nextSibling,be=R.nodeName;R[an]||be==="SCRIPT"||be==="STYLE"||be==="LINK"&&R.rel.toLowerCase()==="stylesheet"||p.removeChild(R),R=te}}else p==="body"&&Vh(s.ownerDocument.body);p=M}while(p);Qf(u)}function ty(s,u){var p=s;s=0;do{var w=p.nextSibling;if(p.nodeType===1?u?(p._stashedDisplay=p.style.display,p.style.display="none"):(p.style.display=p._stashedDisplay||"",p.getAttribute("style")===""&&p.removeAttribute("style")):p.nodeType===3&&(u?(p._stashedText=p.nodeValue,p.nodeValue=""):p.nodeValue=p._stashedText||""),w&&w.nodeType===8)if(p=w.data,p==="/$"){if(s===0)break;s--}else p!=="$"&&p!=="$?"&&p!=="$~"&&p!=="$!"||s++;p=w}while(p)}function og(s){var u=s.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var p=u;switch(u=u.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":og(p),To(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}s.removeChild(p)}}function Fi(s,u,p,w){for(;s.nodeType===1;){var M=p;if(s.nodeName.toLowerCase()!==u.toLowerCase()){if(!w&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(w){if(!s[an])switch(u){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(R=s.getAttribute("rel"),R==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(R!==M.rel||s.getAttribute("href")!==(M.href==null||M.href===""?null:M.href)||s.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin)||s.getAttribute("title")!==(M.title==null?null:M.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(R=s.getAttribute("src"),(R!==(M.src==null?null:M.src)||s.getAttribute("type")!==(M.type==null?null:M.type)||s.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin))&&R&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(u==="input"&&s.type==="hidden"){var R=M.name==null?null:""+M.name;if(M.type==="hidden"&&s.getAttribute("name")===R)return s}else return s;if(s=di(s.nextSibling),s===null)break}return null}function fh(s,u,p){if(u==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!p||(s=di(s.nextSibling),s===null))return null;return s}function eo(s,u){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=di(s.nextSibling),s===null))return null;return s}function VA(s){return s.data==="$?"||s.data==="$~"}function ku(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function uA(s,u){var p=s.ownerDocument;if(s.data==="$~")s._reactRetry=u;else if(s.data!=="$?"||p.readyState!=="loading")u();else{var w=function(){u(),p.removeEventListener("DOMContentLoaded",w)};p.addEventListener("DOMContentLoaded",w),s._reactRetry=w}}function di(s){for(;s!=null;s=s.nextSibling){var u=s.nodeType;if(u===1||u===3)break;if(u===8){if(u=s.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return s}var ts=null;function lg(s){s=s.nextSibling;for(var u=0;s;){if(s.nodeType===8){var p=s.data;if(p==="/$"||p==="/&"){if(u===0)return di(s.nextSibling);u--}else p!=="$"&&p!=="$!"&&p!=="$?"&&p!=="$~"&&p!=="&"||u++}s=s.nextSibling}return null}function hA(s){s=s.previousSibling;for(var u=0;s;){if(s.nodeType===8){var p=s.data;if(p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"){if(u===0)return s;u--}else p!=="/$"&&p!=="/&"||u++}s=s.previousSibling}return null}function Bo(s,u,p){switch(u=Tf(p),s){case"html":if(s=u.documentElement,!s)throw Error(c(452));return s;case"head":if(s=u.head,!s)throw Error(c(453));return s;case"body":if(s=u.body,!s)throw Error(c(454));return s;default:throw Error(c(451))}}function Vh(s){for(var u=s.attributes;u.length;)s.removeAttributeNode(u[0]);To(s)}var pc=new Map,ry=new Set;function Yi(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var rs=ot.d;ot.d={f:Ff,r:ny,D:iy,C:cg,L:cl,m:Lc,X:ul,S:Pp,M:dh};function Ff(){var s=rs.f(),u=yp();return s||u}function ny(s){var u=so(s);u!==null&&u.tag===5&&u.type==="form"?ya(u):rs.r(s)}var Gh=typeof document>"u"?null:document;function Ag(s,u,p){var w=Gh;if(w&&typeof u=="string"&&u){var M=la(u);M='link[rel="'+s+'"][href="'+M+'"]',typeof p=="string"&&(M+='[crossorigin="'+p+'"]'),ry.has(M)||(ry.add(M),s={rel:s,crossOrigin:p,href:u},w.querySelector(M)===null&&(u=w.createElement("link"),gs(u,"link",s),Pi(u),w.head.appendChild(u)))}}function iy(s){rs.D(s),Ag("dns-prefetch",s,null)}function cg(s,u){rs.C(s,u),Ag("preconnect",s,u)}function cl(s,u,p){rs.L(s,u,p);var w=Gh;if(w&&s&&u){var M='link[rel="preload"][as="'+la(u)+'"]';u==="image"&&p&&p.imageSrcSet?(M+='[imagesrcset="'+la(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(M+='[imagesizes="'+la(p.imageSizes)+'"]')):M+='[href="'+la(s)+'"]';var R=M;switch(u){case"style":R=ph(s);break;case"script":R=qh(s)}pc.has(R)||(s=z({rel:"preload",href:u==="image"&&p&&p.imageSrcSet?void 0:s,as:u},p),pc.set(R,s),w.querySelector(M)!==null||u==="style"&&w.querySelector(If(R))||u==="script"&&w.querySelector(mh(R))||(u=w.createElement("link"),gs(u,"link",s),Pi(u),w.head.appendChild(u)))}}function Lc(s,u){rs.m(s,u);var p=Gh;if(p&&s){var w=u&&typeof u.as=="string"?u.as:"script",M='link[rel="modulepreload"][as="'+la(w)+'"][href="'+la(s)+'"]',R=M;switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":R=qh(s)}if(!pc.has(R)&&(s=z({rel:"modulepreload",href:s},u),pc.set(R,s),p.querySelector(M)===null)){switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(mh(R)))return}w=p.createElement("link"),gs(w,"link",s),Pi(w),p.head.appendChild(w)}}}function Pp(s,u,p){rs.S(s,u,p);var w=Gh;if(w&&s){var M=oo(w).hoistableStyles,R=ph(s);u=u||"default";var te=M.get(R);if(!te){var be={loading:0,preload:null};if(te=w.querySelector(If(R)))be.loading=5;else{s=z({rel:"stylesheet",href:s,"data-precedence":u},p),(p=pc.get(R))&&gh(s,p);var ht=te=w.createElement("link");Pi(ht),gs(ht,"link",s),ht._p=new Promise(function(Rt,tr){ht.onload=Rt,ht.onerror=tr}),ht.addEventListener("load",function(){be.loading|=1}),ht.addEventListener("error",function(){be.loading|=2}),be.loading|=4,gd(te,u,w)}te={type:"stylesheet",instance:te,count:1,state:be},M.set(R,te)}}}function ul(s,u){rs.X(s,u);var p=Gh;if(p&&s){var w=oo(p).hoistableScripts,M=qh(s),R=w.get(M);R||(R=p.querySelector(mh(M)),R||(s=z({src:s,async:!0},u),(u=pc.get(M))&&yd(s,u),R=p.createElement("script"),Pi(R),gs(R,"link",s),p.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},w.set(M,R))}}function dh(s,u){rs.M(s,u);var p=Gh;if(p&&s){var w=oo(p).hoistableScripts,M=qh(s),R=w.get(M);R||(R=p.querySelector(mh(M)),R||(s=z({src:s,async:!0,type:"module"},u),(u=pc.get(M))&&yd(s,u),R=p.createElement("script"),Pi(R),gs(R,"link",s),p.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},w.set(M,R))}}function md(s,u,p,w){var M=(M=tt.current)?Yi(M):null;if(!M)throw Error(c(446));switch(s){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(u=ph(p.href),p=oo(M).hoistableStyles,w=p.get(u),w||(w={type:"style",instance:null,count:0,state:null},p.set(u,w)),w):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){s=ph(p.href);var R=oo(M).hoistableStyles,te=R.get(s);if(te||(M=M.ownerDocument||M,te={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},R.set(s,te),(R=M.querySelector(If(s)))&&!R._p&&(te.instance=R,te.state.loading=5),pc.has(s)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},pc.set(s,p),R||ay(M,s,p,te.state))),u&&w===null)throw Error(c(528,""));return te}if(u&&w!==null)throw Error(c(529,""));return null;case"script":return u=p.async,p=p.src,typeof p=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=qh(p),p=oo(M).hoistableScripts,w=p.get(u),w||(w={type:"script",instance:null,count:0,state:null},p.set(u,w)),w):{type:"void",instance:null,count:0,state:null};default:throw Error(c(444,s))}}function ph(s){return'href="'+la(s)+'"'}function If(s){return'link[rel="stylesheet"]['+s+"]"}function ug(s){return z({},s,{"data-precedence":s.precedence,precedence:null})}function ay(s,u,p,w){s.querySelector('link[rel="preload"][as="style"]['+u+"]")?w.loading=1:(u=s.createElement("link"),w.preload=u,u.addEventListener("load",function(){return w.loading|=1}),u.addEventListener("error",function(){return w.loading|=2}),gs(u,"link",p),Pi(u),s.head.appendChild(u))}function qh(s){return'[src="'+la(s)+'"]'}function mh(s){return"script[async]"+s}function hg(s,u,p){if(u.count++,u.instance===null)switch(u.type){case"style":var w=s.querySelector('style[data-href~="'+la(p.href)+'"]');if(w)return u.instance=w,Pi(w),w;var M=z({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return w=(s.ownerDocument||s).createElement("style"),Pi(w),gs(w,"style",M),gd(w,p.precedence,s),u.instance=w;case"stylesheet":M=ph(p.href);var R=s.querySelector(If(M));if(R)return u.state.loading|=4,u.instance=R,Pi(R),R;w=ug(p),(M=pc.get(M))&&gh(w,M),R=(s.ownerDocument||s).createElement("link"),Pi(R);var te=R;return te._p=new Promise(function(be,ht){te.onload=be,te.onerror=ht}),gs(R,"link",w),u.state.loading|=4,gd(R,p.precedence,s),u.instance=R;case"script":return R=qh(p.src),(M=s.querySelector(mh(R)))?(u.instance=M,Pi(M),M):(w=p,(M=pc.get(R))&&(w=z({},p),yd(w,M)),s=s.ownerDocument||s,M=s.createElement("script"),Pi(M),gs(M,"link",w),s.head.appendChild(M),u.instance=M);case"void":return null;default:throw Error(c(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(w=u.instance,u.state.loading|=4,gd(w,p.precedence,s));return u.instance}function gd(s,u,p){for(var w=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),M=w.length?w[w.length-1]:null,R=M,te=0;te<w.length;te++){var be=w[te];if(be.dataset.precedence===u)R=be;else if(R!==M)break}R?R.parentNode.insertBefore(s,R.nextSibling):(u=p.nodeType===9?p.head:p,u.insertBefore(s,u.firstChild))}function gh(s,u){s.crossOrigin==null&&(s.crossOrigin=u.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=u.referrerPolicy),s.title==null&&(s.title=u.title)}function yd(s,u){s.crossOrigin==null&&(s.crossOrigin=u.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=u.referrerPolicy),s.integrity==null&&(s.integrity=u.integrity)}var _d=null;function sy(s,u,p){if(_d===null){var w=new Map,M=_d=new Map;M.set(p,w)}else M=_d,w=M.get(p),w||(w=new Map,M.set(p,w));if(w.has(s))return w;for(w.set(s,null),p=p.getElementsByTagName(s),M=0;M<p.length;M++){var R=p[M];if(!(R[an]||R[Wn]||s==="link"&&R.getAttribute("rel")==="stylesheet")&&R.namespaceURI!=="http://www.w3.org/2000/svg"){var te=R.getAttribute(u)||"";te=s+te;var be=w.get(te);be?be.push(R):w.set(te,[R])}}return w}function fg(s,u,p){s=s.ownerDocument||s,s.head.insertBefore(p,u==="title"?s.querySelector("head > title"):null)}function Np(s,u,p){if(p===1||u.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;return u.rel==="stylesheet"?(s=u.disabled,typeof u.precedence=="string"&&s==null):!0;case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function vd(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function Rp(s,u,p,w){if(p.type==="stylesheet"&&(typeof w.media!="string"||matchMedia(w.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var M=ph(w.href),R=u.querySelector(If(M));if(R){u=R._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(s.count++,s=Lf.bind(s),u.then(s,s)),p.state.loading|=4,p.instance=R,Pi(R);return}R=u.ownerDocument||u,w=ug(w),(M=pc.get(M))&&gh(w,M),R=R.createElement("link"),Pi(R);var te=R;te._p=new Promise(function(be,ht){te.onload=be,te.onerror=ht}),gs(R,"link",w),p.instance=R}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(p,u),(u=p.state.preload)&&(p.state.loading&3)===0&&(s.count++,p=Lf.bind(s),u.addEventListener("load",p),u.addEventListener("error",p))}}var xd=0;function dg(s,u){return s.stylesheets&&s.count===0&&wd(s,s.stylesheets),0<s.count||0<s.imgCount?function(p){var w=setTimeout(function(){if(s.stylesheets&&wd(s,s.stylesheets),s.unsuspend){var R=s.unsuspend;s.unsuspend=null,R()}},6e4+u);0<s.imgBytes&&xd===0&&(xd=62500*Y0());var M=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&wd(s,s.stylesheets),s.unsuspend)){var R=s.unsuspend;s.unsuspend=null,R()}},(s.imgBytes>xd?50:800)+u);return s.unsuspend=p,function(){s.unsuspend=null,clearTimeout(w),clearTimeout(M)}}:null}function Lf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)wd(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var bd=null;function wd(s,u){s.stylesheets=null,s.unsuspend!==null&&(s.count++,bd=new Map,u.forEach(oy,s),bd=null,Lf.call(s))}function oy(s,u){if(!(u.state.loading&4)){var p=bd.get(s);if(p)var w=p.get(null);else{p=new Map,bd.set(s,p);for(var M=s.querySelectorAll("link[data-precedence],style[data-precedence]"),R=0;R<M.length;R++){var te=M[R];(te.nodeName==="LINK"||te.getAttribute("media")!=="not all")&&(p.set(te.dataset.precedence,te),w=te)}w&&p.set(null,w)}M=u.instance,te=M.getAttribute("data-precedence"),R=p.get(te)||w,R===w&&p.set(null,M),p.set(te,M),this.count++,w=Lf.bind(this),M.addEventListener("load",w),M.addEventListener("error",w),R?R.parentNode.insertBefore(M,R.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(M,s.firstChild)),u.state.loading|=4}}var Mf={$$typeof:Be,Provider:null,Consumer:null,_currentValue:st,_currentValue2:st,_threadCount:0};function ly(s,u,p,w,M,R,te,be,ht){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pr(0),this.hiddenUpdates=Pr(null),this.identifierPrefix=w,this.onUncaughtError=M,this.onCaughtError=R,this.onRecoverableError=te,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ht,this.incompleteTransitions=new Map}function Ay(s,u,p,w,M,R,te,be,ht,Rt,tr,ir){return s=new ly(s,u,p,te,ht,Rt,tr,ir,be),u=1,R===!0&&(u|=24),R=Es(3,null,null,u),s.current=R,R.stateNode=s,u=iA(),u.refCount++,s.pooledCache=u,u.refCount++,R.memoizedState={element:w,isDehydrated:p,cache:u},vr(R),s}function pg(s){return s?(s=Yr,s):Yr}function cy(s,u,p,w,M,R){M=pg(M),w.context===null?w.context=M:w.pendingContext=M,w=dn(u),w.payload={element:p},R=R===void 0?null:R,R!==null&&(w.callback=R),p=Ln(s,w,u),p!==null&&(Nl(p,s,u),Vn(p,s,u))}function uy(s,u){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var p=s.retryLane;s.retryLane=p!==0&&p<u?p:u}}function Bd(s,u){uy(s,u),(s=s.alternate)&&uy(s,u)}function mg(s){if(s.tag===13||s.tag===31){var u=po(s,67108864);u!==null&&Nl(u,s,67108864),Bd(s,67108864)}}function hy(s){if(s.tag===13||s.tag===31){var u=HA();u=xn(u);var p=po(s,u);p!==null&&Nl(p,s,u),Bd(s,u)}}var Qp=!0;function fy(s,u,p,w){var M=ke.T;ke.T=null;var R=ot.p;try{ot.p=2,gg(s,u,p,w)}finally{ot.p=R,ke.T=M}}function Cd(s,u,p,w){var M=ke.T;ke.T=null;var R=ot.p;try{ot.p=8,gg(s,u,p,w)}finally{ot.p=R,ke.T=M}}function gg(s,u,p,w){if(Qp){var M=Sd(w);if(M===null)tg(s,u,w,Uf,p),zp(s,w);else if(a1(M,s,u,p,w))w.stopPropagation();else if(zp(s,w),u&4&&-1<i1.indexOf(s)){for(;M!==null;){var R=so(M);if(R!==null)switch(R.tag){case 3:if(R=R.stateNode,R.current.memoizedState.isDehydrated){var te=Qe(R.pendingLanes);if(te!==0){var be=R;for(be.pendingLanes|=2,be.entangledLanes|=2;te;){var ht=1<<31-Xe(te);be.entanglements[1]|=ht,te&=~ht}su(R),(Ui&6)===0&&(mp=mn()+500,Sf(0))}}break;case 31:case 13:be=po(R,2),be!==null&&Nl(be,R,2),yp(),Bd(R,2)}if(R=Sd(w),R===null&&tg(s,u,w,Uf,p),R===M)break;M=R}M!==null&&w.stopPropagation()}else tg(s,u,w,null,p)}}function Sd(s){return s=FA(s),kp(s)}var Uf=null;function kp(s){if(Uf=null,s=ys(s),s!==null){var u=y(s);if(u===null)s=null;else{var p=u.tag;if(p===13){if(s=v(u),s!==null)return s;s=null}else if(p===31){if(s=A(u),s!==null)return s;s=null}else if(p===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;s=null}else u!==s&&(s=null)}}return Uf=s,null}function Kh(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Cn()){case An:return 2;case Fn:return 8;case Sn:case Or:return 32;case gn:return 268435456;default:return 32}default:return 32}}var Op=!1,yh=null,mc=null,Ou=null,Df=new Map,Pf=new Map,_h=[],i1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zp(s,u){switch(s){case"focusin":case"focusout":yh=null;break;case"dragenter":case"dragleave":mc=null;break;case"mouseover":case"mouseout":Ou=null;break;case"pointerover":case"pointerout":Df.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pf.delete(u.pointerId)}}function Nf(s,u,p,w,M,R){return s===null||s.nativeEvent!==R?(s={blockedOn:u,domEventName:p,eventSystemFlags:w,nativeEvent:R,targetContainers:[M]},u!==null&&(u=so(u),u!==null&&mg(u)),s):(s.eventSystemFlags|=w,u=s.targetContainers,M!==null&&u.indexOf(M)===-1&&u.push(M),s)}function a1(s,u,p,w,M){switch(u){case"focusin":return yh=Nf(yh,s,u,p,w,M),!0;case"dragenter":return mc=Nf(mc,s,u,p,w,M),!0;case"mouseover":return Ou=Nf(Ou,s,u,p,w,M),!0;case"pointerover":var R=M.pointerId;return Df.set(R,Nf(Df.get(R)||null,s,u,p,w,M)),!0;case"gotpointercapture":return R=M.pointerId,Pf.set(R,Nf(Pf.get(R)||null,s,u,p,w,M)),!0}return!1}function dy(s){var u=ys(s.target);if(u!==null){var p=y(u);if(p!==null){if(u=p.tag,u===13){if(u=v(p),u!==null){s.blockedOn=u,li(s.priority,function(){hy(p)});return}}else if(u===31){if(u=A(p),u!==null){s.blockedOn=u,li(s.priority,function(){hy(p)});return}}else if(u===3&&p.stateNode.current.memoizedState.isDehydrated){s.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}s.blockedOn=null}function jp(s){if(s.blockedOn!==null)return!1;for(var u=s.targetContainers;0<u.length;){var p=Sd(s.nativeEvent);if(p===null){p=s.nativeEvent;var w=new p.constructor(p.type,p);TA=w,p.target.dispatchEvent(w),TA=null}else return u=so(p),u!==null&&mg(u),s.blockedOn=p,!1;u.shift()}return!0}function py(s,u,p){jp(s)&&p.delete(u)}function s1(){Op=!1,yh!==null&&jp(yh)&&(yh=null),mc!==null&&jp(mc)&&(mc=null),Ou!==null&&jp(Ou)&&(Ou=null),Df.forEach(py),Pf.forEach(py)}function Ed(s,u){s.blockedOn===u&&(s.blockedOn=null,Op||(Op=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,s1)))}var Hp=null;function Rf(s){Hp!==s&&(Hp=s,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Hp===s&&(Hp=null);for(var u=0;u<s.length;u+=3){var p=s[u],w=s[u+1],M=s[u+2];if(typeof w!="function"){if(kp(w||p)===null)continue;break}var R=so(p);R!==null&&(s.splice(u,3),u-=3,ps(R,{pending:!0,data:M,method:p.method,action:w},w,M))}}))}function Qf(s){function u(ht){return Ed(ht,s)}yh!==null&&Ed(yh,s),mc!==null&&Ed(mc,s),Ou!==null&&Ed(Ou,s),Df.forEach(u),Pf.forEach(u);for(var p=0;p<_h.length;p++){var w=_h[p];w.blockedOn===s&&(w.blockedOn=null)}for(;0<_h.length&&(p=_h[0],p.blockedOn===null);)dy(p),p.blockedOn===null&&_h.shift();if(p=(s.ownerDocument||s).$$reactFormReplay,p!=null)for(w=0;w<p.length;w+=3){var M=p[w],R=p[w+1],te=M[Jt]||null;if(typeof R=="function")te||Rf(p);else if(te){var be=null;if(R&&R.hasAttribute("formAction")){if(M=R,te=R[Jt]||null)be=te.formAction;else if(kp(M)!==null)continue}else be=te.action;typeof be=="function"?p[w+1]=be:(p.splice(w,3),w-=3),Rf(p)}}}function my(){function s(R){R.canIntercept&&R.info==="react-transition"&&R.intercept({handler:function(){return new Promise(function(te){return M=te})},focusReset:"manual",scroll:"manual"})}function u(){M!==null&&(M(),M=null),w||setTimeout(p,20)}function p(){if(!w&&!navigation.transition){var R=navigation.currentEntry;R&&R.url!=null&&navigation.navigate(R.url,{state:R.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var w=!1,M=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(p,100),function(){w=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),M!==null&&(M(),M=null)}}}function yg(s){this._internalRoot=s}kf.prototype.render=yg.prototype.render=function(s){var u=this._internalRoot;if(u===null)throw Error(c(409));var p=u.current,w=HA();cy(p,w,s,u,null,null)},kf.prototype.unmount=yg.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var u=s.containerInfo;cy(s.current,2,null,s,null,null),yp(),u[kr]=null}};function kf(s){this._internalRoot=s}kf.prototype.unstable_scheduleHydration=function(s){if(s){var u=fn();s={blockedOn:null,target:s,priority:u};for(var p=0;p<_h.length&&u!==0&&u<_h[p].priority;p++);_h.splice(p,0,s),p===0&&dy(s)}};var _g=n.version;if(_g!=="19.2.4")throw Error(c(527,_g,"19.2.4"));ot.findDOMNode=function(s){var u=s._reactInternals;if(u===void 0)throw typeof s.render=="function"?Error(c(188)):(s=Object.keys(s).join(","),Error(c(268,s)));return s=I(u),s=s!==null?D(s):null,s=s===null?null:s.stateNode,s};var o1={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:ke,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vp.isDisabled&&Vp.supportsFiber)try{ne=Vp.inject(o1),Ae=Vp}catch{}}return Cg.createRoot=function(s,u){if(!m(s))throw Error(c(299));var p=!1,w="",M=ff,R=ad,te=ol;return u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(w=u.identifierPrefix),u.onUncaughtError!==void 0&&(M=u.onUncaughtError),u.onCaughtError!==void 0&&(R=u.onCaughtError),u.onRecoverableError!==void 0&&(te=u.onRecoverableError)),u=Ay(s,1,!1,null,null,p,w,null,M,R,te,my),s[kr]=u.current,eg(s),new yg(u)},Cg.hydrateRoot=function(s,u,p){if(!m(s))throw Error(c(299));var w=!1,M="",R=ff,te=ad,be=ol,ht=null;return p!=null&&(p.unstable_strictMode===!0&&(w=!0),p.identifierPrefix!==void 0&&(M=p.identifierPrefix),p.onUncaughtError!==void 0&&(R=p.onUncaughtError),p.onCaughtError!==void 0&&(te=p.onCaughtError),p.onRecoverableError!==void 0&&(be=p.onRecoverableError),p.formState!==void 0&&(ht=p.formState)),u=Ay(s,1,!0,u,p??null,w,M,ht,R,te,be,my),u.context=pg(null),p=u.current,w=HA(),w=xn(w),M=dn(w),M.callback=null,Ln(p,M,w),p=w,u.current.lanes=p,dr(u,p),su(u),s[kr]=u.current,eg(s),new kf(u)},Cg.version="19.2.4",Cg}var ub;function FS(){if(ub)return v1.exports;ub=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(n){console.error(n)}}return i(),v1.exports=TS(),v1.exports}var IS=FS();var hb="popstate";function LS(i={}){function n(c,m){let{pathname:y,search:v,hash:A}=c.location;return Cv("",{pathname:y,search:v,hash:A},m.state&&m.state.usr||null,m.state&&m.state.key||"default")}function o(c,m){return typeof m=="string"?m:Wg(m)}return US(n,o,null,i)}function ss(i,n){if(i===!1||i===null||typeof i>"u")throw new Error(n)}function pu(i,n){if(!i){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function MS(){return Math.random().toString(36).substring(2,10)}function fb(i,n){return{usr:i.state,key:i.key,idx:n}}function Cv(i,n,o=null,c){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof n=="string"?gm(n):n,state:o,key:n&&n.key||c||MS()}}function Wg({pathname:i="/",search:n="",hash:o=""}){return n&&n!=="?"&&(i+=n.charAt(0)==="?"?n:"?"+n),o&&o!=="#"&&(i+=o.charAt(0)==="#"?o:"#"+o),i}function gm(i){let n={};if(i){let o=i.indexOf("#");o>=0&&(n.hash=i.substring(o),i=i.substring(0,o));let c=i.indexOf("?");c>=0&&(n.search=i.substring(c),i=i.substring(0,c)),i&&(n.pathname=i)}return n}function US(i,n,o,c={}){let{window:m=document.defaultView,v5Compat:y=!1}=c,v=m.history,A="POP",S=null,I=D();I==null&&(I=0,v.replaceState({...v.state,idx:I},""));function D(){return(v.state||{idx:null}).idx}function z(){A="POP";let W=D(),le=W==null?null:W-I;I=W,S&&S({action:A,location:ie.location,delta:le})}function Z(W,le){A="PUSH";let ye=Cv(ie.location,W,le);I=D()+1;let Be=fb(ye,I),Le=ie.createHref(ye);try{v.pushState(Be,"",Le)}catch(lt){if(lt instanceof DOMException&&lt.name==="DataCloneError")throw lt;m.location.assign(Le)}y&&S&&S({action:A,location:ie.location,delta:1})}function O(W,le){A="REPLACE";let ye=Cv(ie.location,W,le);I=D();let Be=fb(ye,I),Le=ie.createHref(ye);v.replaceState(Be,"",Le),y&&S&&S({action:A,location:ie.location,delta:0})}function ce(W){return DS(W)}let ie={get action(){return A},get location(){return i(m,v)},listen(W){if(S)throw new Error("A history only accepts one active listener");return m.addEventListener(hb,z),S=W,()=>{m.removeEventListener(hb,z),S=null}},createHref(W){return n(m,W)},createURL:ce,encodeLocation(W){let le=ce(W);return{pathname:le.pathname,search:le.search,hash:le.hash}},push:Z,replace:O,go(W){return v.go(W)}};return ie}function DS(i,n=!1){let o="http://localhost";typeof window<"u"&&(o=window.location.origin!=="null"?window.location.origin:window.location.href),ss(o,"No window.location.(origin|href) available to create URL");let c=typeof i=="string"?i:Wg(i);return c=c.replace(/ $/,"%20"),!n&&c.startsWith("//")&&(c=o+c),new URL(c,o)}function X2(i,n,o="/"){return PS(i,n,o,!1)}function PS(i,n,o,c){let m=typeof n=="string"?gm(n):n,y=of(m.pathname||"/",o);if(y==null)return null;let v=W2(i);NS(v);let A=null;for(let S=0;A==null&&S<v.length;++S){let I=KS(y);A=GS(v[S],I,c)}return A}function W2(i,n=[],o=[],c="",m=!1){let y=(v,A,S=m,I)=>{let D={relativePath:I===void 0?v.path||"":I,caseSensitive:v.caseSensitive===!0,childrenIndex:A,route:v};if(D.relativePath.startsWith("/")){if(!D.relativePath.startsWith(c)&&S)return;ss(D.relativePath.startsWith(c),`Absolute route path "${D.relativePath}" nested under path "${c}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),D.relativePath=D.relativePath.slice(c.length)}let z=nf([c,D.relativePath]),Z=o.concat(D);v.children&&v.children.length>0&&(ss(v.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${z}".`),W2(v.children,n,Z,z,S)),!(v.path==null&&!v.index)&&n.push({path:z,score:HS(z,v.index),routesMeta:Z})};return i.forEach((v,A)=>{if(v.path===""||!v.path?.includes("?"))y(v,A);else for(let S of Y2(v.path))y(v,A,!0,S)}),n}function Y2(i){let n=i.split("/");if(n.length===0)return[];let[o,...c]=n,m=o.endsWith("?"),y=o.replace(/\?$/,"");if(c.length===0)return m?[y,""]:[y];let v=Y2(c.join("/")),A=[];return A.push(...v.map(S=>S===""?y:[y,S].join("/"))),m&&A.push(...v),A.map(S=>i.startsWith("/")&&S===""?"/":S)}function NS(i){i.sort((n,o)=>n.score!==o.score?o.score-n.score:VS(n.routesMeta.map(c=>c.childrenIndex),o.routesMeta.map(c=>c.childrenIndex)))}var RS=/^:[\w-]+$/,QS=3,kS=2,OS=1,zS=10,jS=-2,db=i=>i==="*";function HS(i,n){let o=i.split("/"),c=o.length;return o.some(db)&&(c+=jS),n&&(c+=kS),o.filter(m=>!db(m)).reduce((m,y)=>m+(RS.test(y)?QS:y===""?OS:zS),c)}function VS(i,n){return i.length===n.length&&i.slice(0,-1).every((c,m)=>c===n[m])?i[i.length-1]-n[n.length-1]:0}function GS(i,n,o=!1){let{routesMeta:c}=i,m={},y="/",v=[];for(let A=0;A<c.length;++A){let S=c[A],I=A===c.length-1,D=y==="/"?n:n.slice(y.length)||"/",z=m_({path:S.relativePath,caseSensitive:S.caseSensitive,end:I},D),Z=S.route;if(!z&&I&&o&&!c[c.length-1].route.index&&(z=m_({path:S.relativePath,caseSensitive:S.caseSensitive,end:!1},D)),!z)return null;Object.assign(m,z.params),v.push({params:m,pathname:nf([y,z.pathname]),pathnameBase:YS(nf([y,z.pathnameBase])),route:Z}),z.pathnameBase!=="/"&&(y=nf([y,z.pathnameBase]))}return v}function m_(i,n){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[o,c]=qS(i.path,i.caseSensitive,i.end),m=n.match(o);if(!m)return null;let y=m[0],v=y.replace(/(.)\/+$/,"$1"),A=m.slice(1);return{params:c.reduce((I,{paramName:D,isOptional:z},Z)=>{if(D==="*"){let ce=A[Z]||"";v=y.slice(0,y.length-ce.length).replace(/(.)\/+$/,"$1")}const O=A[Z];return z&&!O?I[D]=void 0:I[D]=(O||"").replace(/%2F/g,"/"),I},{}),pathname:y,pathnameBase:v,pattern:i}}function qS(i,n=!1,o=!0){pu(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let c=[],m="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(v,A,S)=>(c.push({paramName:A,isOptional:S!=null}),S?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(c.push({paramName:"*"}),m+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?m+="\\/*$":i!==""&&i!=="/"&&(m+="(?:(?=\\/|$))"),[new RegExp(m,n?void 0:"i"),c]}function KS(i){try{return i.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return pu(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),i}}function of(i,n){if(n==="/")return i;if(!i.toLowerCase().startsWith(n.toLowerCase()))return null;let o=n.endsWith("/")?n.length-1:n.length,c=i.charAt(o);return c&&c!=="/"?null:i.slice(o)||"/"}var ZS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function XS(i,n="/"){let{pathname:o,search:c="",hash:m=""}=typeof i=="string"?gm(i):i,y;return o?(o=o.replace(/\/\/+/g,"/"),o.startsWith("/")?y=pb(o.substring(1),"/"):y=pb(o,n)):y=n,{pathname:y,search:$S(c),hash:JS(m)}}function pb(i,n){let o=n.replace(/\/+$/,"").split("/");return i.split("/").forEach(m=>{m===".."?o.length>1&&o.pop():m!=="."&&o.push(m)}),o.length>1?o.join("/"):"/"}function B1(i,n,o,c){return`Cannot include a '${i}' character in a manually specified \`to.${n}\` field [${JSON.stringify(c)}].  Please separate it out to the \`to.${o}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function WS(i){return i.filter((n,o)=>o===0||n.route.path&&n.route.path.length>0)}function dx(i){let n=WS(i);return n.map((o,c)=>c===n.length-1?o.pathname:o.pathnameBase)}function px(i,n,o,c=!1){let m;typeof i=="string"?m=gm(i):(m={...i},ss(!m.pathname||!m.pathname.includes("?"),B1("?","pathname","search",m)),ss(!m.pathname||!m.pathname.includes("#"),B1("#","pathname","hash",m)),ss(!m.search||!m.search.includes("#"),B1("#","search","hash",m)));let y=i===""||m.pathname==="",v=y?"/":m.pathname,A;if(v==null)A=o;else{let z=n.length-1;if(!c&&v.startsWith("..")){let Z=v.split("/");for(;Z[0]==="..";)Z.shift(),z-=1;m.pathname=Z.join("/")}A=z>=0?n[z]:"/"}let S=XS(m,A),I=v&&v!=="/"&&v.endsWith("/"),D=(y||v===".")&&o.endsWith("/");return!S.pathname.endsWith("/")&&(I||D)&&(S.pathname+="/"),S}var nf=i=>i.join("/").replace(/\/\/+/g,"/"),YS=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),$S=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,JS=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,eE=class{constructor(i,n,o,c=!1){this.status=i,this.statusText=n||"",this.internal=c,o instanceof Error?(this.data=o.toString(),this.error=o):this.data=o}};function tE(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}function rE(i){return i.map(n=>n.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var $2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function J2(i,n){let o=i;if(typeof o!="string"||!ZS.test(o))return{absoluteURL:void 0,isExternal:!1,to:o};let c=o,m=!1;if($2)try{let y=new URL(window.location.href),v=o.startsWith("//")?new URL(y.protocol+o):new URL(o),A=of(v.pathname,n);v.origin===y.origin&&A!=null?o=A+v.search+v.hash:m=!0}catch{pu(!1,`<Link to="${o}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:c,isExternal:m,to:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var eB=["POST","PUT","PATCH","DELETE"];new Set(eB);var nE=["GET",...eB];new Set(nE);var ym=We.createContext(null);ym.displayName="DataRouter";var Q_=We.createContext(null);Q_.displayName="DataRouterState";var iE=We.createContext(!1),tB=We.createContext({isTransitioning:!1});tB.displayName="ViewTransition";var aE=We.createContext(new Map);aE.displayName="Fetchers";var sE=We.createContext(null);sE.displayName="Await";var Nc=We.createContext(null);Nc.displayName="Navigation";var a0=We.createContext(null);a0.displayName="Location";var Ch=We.createContext({outlet:null,matches:[],isDataRoute:!1});Ch.displayName="Route";var mx=We.createContext(null);mx.displayName="RouteError";var rB="REACT_ROUTER_ERROR",oE="REDIRECT",lE="ROUTE_ERROR_RESPONSE";function AE(i){if(i.startsWith(`${rB}:${oE}:{`))try{let n=JSON.parse(i.slice(28));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.location=="string"&&typeof n.reloadDocument=="boolean"&&typeof n.replace=="boolean")return n}catch{}}function cE(i){if(i.startsWith(`${rB}:${lE}:{`))try{let n=JSON.parse(i.slice(40));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string")return new eE(n.status,n.statusText,n.data)}catch{}}function uE(i,{relative:n}={}){ss(_m(),"useHref() may be used only in the context of a <Router> component.");let{basename:o,navigator:c}=We.useContext(Nc),{hash:m,pathname:y,search:v}=s0(i,{relative:n}),A=y;return o!=="/"&&(A=y==="/"?o:nf([o,y])),c.createHref({pathname:A,search:v,hash:m})}function _m(){return We.useContext(a0)!=null}function Af(){return ss(_m(),"useLocation() may be used only in the context of a <Router> component."),We.useContext(a0).location}var nB="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function iB(i){We.useContext(Nc).static||We.useLayoutEffect(i)}function cf(){let{isDataRoute:i}=We.useContext(Ch);return i?BE():hE()}function hE(){ss(_m(),"useNavigate() may be used only in the context of a <Router> component.");let i=We.useContext(ym),{basename:n,navigator:o}=We.useContext(Nc),{matches:c}=We.useContext(Ch),{pathname:m}=Af(),y=JSON.stringify(dx(c)),v=We.useRef(!1);return iB(()=>{v.current=!0}),We.useCallback((S,I={})=>{if(pu(v.current,nB),!v.current)return;if(typeof S=="number"){o.go(S);return}let D=px(S,JSON.parse(y),m,I.relative==="path");i==null&&n!=="/"&&(D.pathname=D.pathname==="/"?n:nf([n,D.pathname])),(I.replace?o.replace:o.push)(D,I.state,I)},[n,o,y,m,i])}We.createContext(null);function s0(i,{relative:n}={}){let{matches:o}=We.useContext(Ch),{pathname:c}=Af(),m=JSON.stringify(dx(o));return We.useMemo(()=>px(i,JSON.parse(m),c,n==="path"),[i,m,c,n])}function fE(i,n){return aB(i,n)}function aB(i,n,o,c,m){ss(_m(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:y}=We.useContext(Nc),{matches:v}=We.useContext(Ch),A=v[v.length-1],S=A?A.params:{},I=A?A.pathname:"/",D=A?A.pathnameBase:"/",z=A&&A.route;{let ye=z&&z.path||"";oB(I,!z||ye.endsWith("*")||ye.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${I}" (under <Route path="${ye}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ye}"> to <Route path="${ye==="/"?"*":`${ye}/*`}">.`)}let Z=Af(),O;if(n){let ye=typeof n=="string"?gm(n):n;ss(D==="/"||ye.pathname?.startsWith(D),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${D}" but pathname "${ye.pathname}" was given in the \`location\` prop.`),O=ye}else O=Z;let ce=O.pathname||"/",ie=ce;if(D!=="/"){let ye=D.replace(/^\//,"").split("/");ie="/"+ce.replace(/^\//,"").split("/").slice(ye.length).join("/")}let W=X2(i,{pathname:ie});pu(z||W!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),pu(W==null||W[W.length-1].route.element!==void 0||W[W.length-1].route.Component!==void 0||W[W.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let le=yE(W&&W.map(ye=>Object.assign({},ye,{params:Object.assign({},S,ye.params),pathname:nf([D,y.encodeLocation?y.encodeLocation(ye.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ye.pathname]),pathnameBase:ye.pathnameBase==="/"?D:nf([D,y.encodeLocation?y.encodeLocation(ye.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ye.pathnameBase])})),v,o,c,m);return n&&le?We.createElement(a0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},le):le}function dE(){let i=wE(),n=tE(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),o=i instanceof Error?i.stack:null,c="rgba(200,200,200, 0.5)",m={padding:"0.5rem",backgroundColor:c},y={padding:"2px 4px",backgroundColor:c},v=null;return console.error("Error handled by React Router default ErrorBoundary:",i),v=We.createElement(We.Fragment,null,We.createElement("p",null," Hey developer "),We.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",We.createElement("code",{style:y},"ErrorBoundary")," or"," ",We.createElement("code",{style:y},"errorElement")," prop on your route.")),We.createElement(We.Fragment,null,We.createElement("h2",null,"Unexpected Application Error!"),We.createElement("h3",{style:{fontStyle:"italic"}},n),o?We.createElement("pre",{style:m},o):null,v)}var pE=We.createElement(dE,null),sB=class extends We.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,n){return n.location!==i.location||n.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:n.error,location:n.location,revalidation:i.revalidation||n.revalidation}}componentDidCatch(i,n){this.props.onError?this.props.onError(i,n):console.error("React Router caught the following error during render",i)}render(){let i=this.state.error;if(this.context&&typeof i=="object"&&i&&"digest"in i&&typeof i.digest=="string"){const o=cE(i.digest);o&&(i=o)}let n=i!==void 0?We.createElement(Ch.Provider,{value:this.props.routeContext},We.createElement(mx.Provider,{value:i,children:this.props.component})):this.props.children;return this.context?We.createElement(mE,{error:i},n):n}};sB.contextType=iE;var C1=new WeakMap;function mE({children:i,error:n}){let{basename:o}=We.useContext(Nc);if(typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){let c=AE(n.digest);if(c){let m=C1.get(n);if(m)throw m;let y=J2(c.location,o);if($2&&!C1.get(n))if(y.isExternal||c.reloadDocument)window.location.href=y.absoluteURL||y.to;else{const v=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(y.to,{replace:c.replace}));throw C1.set(n,v),v}return We.createElement("meta",{httpEquiv:"refresh",content:`0;url=${y.absoluteURL||y.to}`})}}return i}function gE({routeContext:i,match:n,children:o}){let c=We.useContext(ym);return c&&c.static&&c.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=n.route.id),We.createElement(Ch.Provider,{value:i},o)}function yE(i,n=[],o=null,c=null,m=null){if(i==null){if(!o)return null;if(o.errors)i=o.matches;else if(n.length===0&&!o.initialized&&o.matches.length>0)i=o.matches;else return null}let y=i,v=o?.errors;if(v!=null){let D=y.findIndex(z=>z.route.id&&v?.[z.route.id]!==void 0);ss(D>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(v).join(",")}`),y=y.slice(0,Math.min(y.length,D+1))}let A=!1,S=-1;if(o)for(let D=0;D<y.length;D++){let z=y[D];if((z.route.HydrateFallback||z.route.hydrateFallbackElement)&&(S=D),z.route.id){let{loaderData:Z,errors:O}=o,ce=z.route.loader&&!Z.hasOwnProperty(z.route.id)&&(!O||O[z.route.id]===void 0);if(z.route.lazy||ce){A=!0,S>=0?y=y.slice(0,S+1):y=[y[0]];break}}}let I=o&&c?(D,z)=>{c(D,{location:o.location,params:o.matches?.[0]?.params??{},unstable_pattern:rE(o.matches),errorInfo:z})}:void 0;return y.reduceRight((D,z,Z)=>{let O,ce=!1,ie=null,W=null;o&&(O=v&&z.route.id?v[z.route.id]:void 0,ie=z.route.errorElement||pE,A&&(S<0&&Z===0?(oB("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),ce=!0,W=null):S===Z&&(ce=!0,W=z.route.hydrateFallbackElement||null)));let le=n.concat(y.slice(0,Z+1)),ye=()=>{let Be;return O?Be=ie:ce?Be=W:z.route.Component?Be=We.createElement(z.route.Component,null):z.route.element?Be=z.route.element:Be=D,We.createElement(gE,{match:z,routeContext:{outlet:D,matches:le,isDataRoute:o!=null},children:Be})};return o&&(z.route.ErrorBoundary||z.route.errorElement||Z===0)?We.createElement(sB,{location:o.location,revalidation:o.revalidation,component:ie,error:O,children:ye(),routeContext:{outlet:null,matches:le,isDataRoute:!0},onError:I}):ye()},null)}function gx(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _E(i){let n=We.useContext(ym);return ss(n,gx(i)),n}function vE(i){let n=We.useContext(Q_);return ss(n,gx(i)),n}function xE(i){let n=We.useContext(Ch);return ss(n,gx(i)),n}function yx(i){let n=xE(i),o=n.matches[n.matches.length-1];return ss(o.route.id,`${i} can only be used on routes that contain a unique "id"`),o.route.id}function bE(){return yx("useRouteId")}function wE(){let i=We.useContext(mx),n=vE("useRouteError"),o=yx("useRouteError");return i!==void 0?i:n.errors?.[o]}function BE(){let{router:i}=_E("useNavigate"),n=yx("useNavigate"),o=We.useRef(!1);return iB(()=>{o.current=!0}),We.useCallback(async(m,y={})=>{pu(o.current,nB),o.current&&(typeof m=="number"?await i.navigate(m):await i.navigate(m,{fromRouteId:n,...y}))},[i,n])}var mb={};function oB(i,n,o){!n&&!mb[i]&&(mb[i]=!0,pu(!1,o))}We.memo(CE);function CE({routes:i,future:n,state:o,onError:c}){return aB(i,void 0,o,c,n)}function SE({to:i,replace:n,state:o,relative:c}){ss(_m(),"<Navigate> may be used only in the context of a <Router> component.");let{static:m}=We.useContext(Nc);pu(!m,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:y}=We.useContext(Ch),{pathname:v}=Af(),A=cf(),S=px(i,dx(y),v,c==="path"),I=JSON.stringify(S);return We.useEffect(()=>{A(JSON.parse(I),{replace:n,state:o,relative:c})},[A,I,c,n,o]),null}function Ud(i){ss(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function EE({basename:i="/",children:n=null,location:o,navigationType:c="POP",navigator:m,static:y=!1,unstable_useTransitions:v}){ss(!_m(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let A=i.replace(/^\/*/,"/"),S=We.useMemo(()=>({basename:A,navigator:m,static:y,unstable_useTransitions:v,future:{}}),[A,m,y,v]);typeof o=="string"&&(o=gm(o));let{pathname:I="/",search:D="",hash:z="",state:Z=null,key:O="default"}=o,ce=We.useMemo(()=>{let ie=of(I,A);return ie==null?null:{location:{pathname:ie,search:D,hash:z,state:Z,key:O},navigationType:c}},[A,I,D,z,Z,O,c]);return pu(ce!=null,`<Router basename="${A}"> is not able to match the URL "${I}${D}${z}" because it does not start with the basename, so the <Router> won't render anything.`),ce==null?null:We.createElement(Nc.Provider,{value:S},We.createElement(a0.Provider,{children:n,value:ce}))}function TE({children:i,location:n}){return fE(Sv(i),n)}function Sv(i,n=[]){let o=[];return We.Children.forEach(i,(c,m)=>{if(!We.isValidElement(c))return;let y=[...n,m];if(c.type===We.Fragment){o.push.apply(o,Sv(c.props.children,y));return}ss(c.type===Ud,`[${typeof c.type=="string"?c.type:c.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ss(!c.props.index||!c.props.children,"An index route cannot have child routes.");let v={id:c.props.id||y.join("-"),caseSensitive:c.props.caseSensitive,element:c.props.element,Component:c.props.Component,index:c.props.index,path:c.props.path,middleware:c.props.middleware,loader:c.props.loader,action:c.props.action,hydrateFallbackElement:c.props.hydrateFallbackElement,HydrateFallback:c.props.HydrateFallback,errorElement:c.props.errorElement,ErrorBoundary:c.props.ErrorBoundary,hasErrorBoundary:c.props.hasErrorBoundary===!0||c.props.ErrorBoundary!=null||c.props.errorElement!=null,shouldRevalidate:c.props.shouldRevalidate,handle:c.props.handle,lazy:c.props.lazy};c.props.children&&(v.children=Sv(c.props.children,y)),o.push(v)}),o}var e_="get",t_="application/x-www-form-urlencoded";function k_(i){return typeof HTMLElement<"u"&&i instanceof HTMLElement}function FE(i){return k_(i)&&i.tagName.toLowerCase()==="button"}function IE(i){return k_(i)&&i.tagName.toLowerCase()==="form"}function LE(i){return k_(i)&&i.tagName.toLowerCase()==="input"}function ME(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function UE(i,n){return i.button===0&&(!n||n==="_self")&&!ME(i)}function Ev(i=""){return new URLSearchParams(typeof i=="string"||Array.isArray(i)||i instanceof URLSearchParams?i:Object.keys(i).reduce((n,o)=>{let c=i[o];return n.concat(Array.isArray(c)?c.map(m=>[o,m]):[[o,c]])},[]))}function DE(i,n){let o=Ev(i);return n&&n.forEach((c,m)=>{o.has(m)||n.getAll(m).forEach(y=>{o.append(m,y)})}),o}var _y=null;function PE(){if(_y===null)try{new FormData(document.createElement("form"),0),_y=!1}catch{_y=!0}return _y}var NE=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function S1(i){return i!=null&&!NE.has(i)?(pu(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${t_}"`),null):i}function RE(i,n){let o,c,m,y,v;if(IE(i)){let A=i.getAttribute("action");c=A?of(A,n):null,o=i.getAttribute("method")||e_,m=S1(i.getAttribute("enctype"))||t_,y=new FormData(i)}else if(FE(i)||LE(i)&&(i.type==="submit"||i.type==="image")){let A=i.form;if(A==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let S=i.getAttribute("formaction")||A.getAttribute("action");if(c=S?of(S,n):null,o=i.getAttribute("formmethod")||A.getAttribute("method")||e_,m=S1(i.getAttribute("formenctype"))||S1(A.getAttribute("enctype"))||t_,y=new FormData(A,i),!PE()){let{name:I,type:D,value:z}=i;if(D==="image"){let Z=I?`${I}.`:"";y.append(`${Z}x`,"0"),y.append(`${Z}y`,"0")}else I&&y.append(I,z)}}else{if(k_(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');o=e_,c=null,m=t_,v=i}return y&&m==="text/plain"&&(v=y,y=void 0),{action:c,method:o.toLowerCase(),encType:m,formData:y,body:v}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function _x(i,n){if(i===!1||i===null||typeof i>"u")throw new Error(n)}function QE(i,n,o,c){let m=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return o?m.pathname.endsWith("/")?m.pathname=`${m.pathname}_.${c}`:m.pathname=`${m.pathname}.${c}`:m.pathname==="/"?m.pathname=`_root.${c}`:n&&of(m.pathname,n)==="/"?m.pathname=`${n.replace(/\/$/,"")}/_root.${c}`:m.pathname=`${m.pathname.replace(/\/$/,"")}.${c}`,m}async function kE(i,n){if(i.id in n)return n[i.id];try{let o=await import(i.module);return n[i.id]=o,o}catch(o){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(o),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function OE(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function zE(i,n,o){let c=await Promise.all(i.map(async m=>{let y=n.routes[m.route.id];if(y){let v=await kE(y,o);return v.links?v.links():[]}return[]}));return GE(c.flat(1).filter(OE).filter(m=>m.rel==="stylesheet"||m.rel==="preload").map(m=>m.rel==="stylesheet"?{...m,rel:"prefetch",as:"style"}:{...m,rel:"prefetch"}))}function gb(i,n,o,c,m,y){let v=(S,I)=>o[I]?S.route.id!==o[I].route.id:!0,A=(S,I)=>o[I].pathname!==S.pathname||o[I].route.path?.endsWith("*")&&o[I].params["*"]!==S.params["*"];return y==="assets"?n.filter((S,I)=>v(S,I)||A(S,I)):y==="data"?n.filter((S,I)=>{let D=c.routes[S.route.id];if(!D||!D.hasLoader)return!1;if(v(S,I)||A(S,I))return!0;if(S.route.shouldRevalidate){let z=S.route.shouldRevalidate({currentUrl:new URL(m.pathname+m.search+m.hash,window.origin),currentParams:o[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:S.params,defaultShouldRevalidate:!0});if(typeof z=="boolean")return z}return!0}):[]}function jE(i,n,{includeHydrateFallback:o}={}){return HE(i.map(c=>{let m=n.routes[c.route.id];if(!m)return[];let y=[m.module];return m.clientActionModule&&(y=y.concat(m.clientActionModule)),m.clientLoaderModule&&(y=y.concat(m.clientLoaderModule)),o&&m.hydrateFallbackModule&&(y=y.concat(m.hydrateFallbackModule)),m.imports&&(y=y.concat(m.imports)),y}).flat(1))}function HE(i){return[...new Set(i)]}function VE(i){let n={},o=Object.keys(i).sort();for(let c of o)n[c]=i[c];return n}function GE(i,n){let o=new Set;return new Set(n),i.reduce((c,m)=>{let y=JSON.stringify(VE(m));return o.has(y)||(o.add(y),c.push({key:y,link:m})),c},[])}function lB(){let i=We.useContext(ym);return _x(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function qE(){let i=We.useContext(Q_);return _x(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var vx=We.createContext(void 0);vx.displayName="FrameworkContext";function AB(){let i=We.useContext(vx);return _x(i,"You must render this element inside a <HydratedRouter> element"),i}function KE(i,n){let o=We.useContext(vx),[c,m]=We.useState(!1),[y,v]=We.useState(!1),{onFocus:A,onBlur:S,onMouseEnter:I,onMouseLeave:D,onTouchStart:z}=n,Z=We.useRef(null);We.useEffect(()=>{if(i==="render"&&v(!0),i==="viewport"){let ie=le=>{le.forEach(ye=>{v(ye.isIntersecting)})},W=new IntersectionObserver(ie,{threshold:.5});return Z.current&&W.observe(Z.current),()=>{W.disconnect()}}},[i]),We.useEffect(()=>{if(c){let ie=setTimeout(()=>{v(!0)},100);return()=>{clearTimeout(ie)}}},[c]);let O=()=>{m(!0)},ce=()=>{m(!1),v(!1)};return o?i!=="intent"?[y,Z,{}]:[y,Z,{onFocus:Sg(A,O),onBlur:Sg(S,ce),onMouseEnter:Sg(I,O),onMouseLeave:Sg(D,ce),onTouchStart:Sg(z,O)}]:[!1,Z,{}]}function Sg(i,n){return o=>{i&&i(o),o.defaultPrevented||n(o)}}function ZE({page:i,...n}){let{router:o}=lB(),c=We.useMemo(()=>X2(o.routes,i,o.basename),[o.routes,i,o.basename]);return c?We.createElement(WE,{page:i,matches:c,...n}):null}function XE(i){let{manifest:n,routeModules:o}=AB(),[c,m]=We.useState([]);return We.useEffect(()=>{let y=!1;return zE(i,n,o).then(v=>{y||m(v)}),()=>{y=!0}},[i,n,o]),c}function WE({page:i,matches:n,...o}){let c=Af(),{future:m,manifest:y,routeModules:v}=AB(),{basename:A}=lB(),{loaderData:S,matches:I}=qE(),D=We.useMemo(()=>gb(i,n,I,y,c,"data"),[i,n,I,y,c]),z=We.useMemo(()=>gb(i,n,I,y,c,"assets"),[i,n,I,y,c]),Z=We.useMemo(()=>{if(i===c.pathname+c.search+c.hash)return[];let ie=new Set,W=!1;if(n.forEach(ye=>{let Be=y.routes[ye.route.id];!Be||!Be.hasLoader||(!D.some(Le=>Le.route.id===ye.route.id)&&ye.route.id in S&&v[ye.route.id]?.shouldRevalidate||Be.hasClientLoader?W=!0:ie.add(ye.route.id))}),ie.size===0)return[];let le=QE(i,A,m.unstable_trailingSlashAwareDataRequests,"data");return W&&ie.size>0&&le.searchParams.set("_routes",n.filter(ye=>ie.has(ye.route.id)).map(ye=>ye.route.id).join(",")),[le.pathname+le.search]},[A,m.unstable_trailingSlashAwareDataRequests,S,c,y,D,n,i,v]),O=We.useMemo(()=>jE(z,y),[z,y]),ce=XE(z);return We.createElement(We.Fragment,null,Z.map(ie=>We.createElement("link",{key:ie,rel:"prefetch",as:"fetch",href:ie,...o})),O.map(ie=>We.createElement("link",{key:ie,rel:"modulepreload",href:ie,...o})),ce.map(({key:ie,link:W})=>We.createElement("link",{key:ie,nonce:o.nonce,...W,crossOrigin:W.crossOrigin??o.crossOrigin})))}function YE(...i){return n=>{i.forEach(o=>{typeof o=="function"?o(n):o!=null&&(o.current=n)})}}var $E=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{$E&&(window.__reactRouterVersion="7.13.0")}catch{}function JE({basename:i,children:n,unstable_useTransitions:o,window:c}){let m=We.useRef();m.current==null&&(m.current=LS({window:c,v5Compat:!0}));let y=m.current,[v,A]=We.useState({action:y.action,location:y.location}),S=We.useCallback(I=>{o===!1?A(I):We.startTransition(()=>A(I))},[o]);return We.useLayoutEffect(()=>y.listen(S),[y,S]),We.createElement(EE,{basename:i,children:n,location:v.location,navigationType:v.action,navigator:y,unstable_useTransitions:o})}var cB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,uB=We.forwardRef(function({onClick:n,discover:o="render",prefetch:c="none",relative:m,reloadDocument:y,replace:v,state:A,target:S,to:I,preventScrollReset:D,viewTransition:z,unstable_defaultShouldRevalidate:Z,...O},ce){let{basename:ie,unstable_useTransitions:W}=We.useContext(Nc),le=typeof I=="string"&&cB.test(I),ye=J2(I,ie);I=ye.to;let Be=uE(I,{relative:m}),[Le,lt,ft]=KE(c,O),ut=n4(I,{replace:v,state:A,target:S,preventScrollReset:D,relative:m,viewTransition:z,unstable_defaultShouldRevalidate:Z,unstable_useTransitions:W});function Ne(_t){n&&n(_t),_t.defaultPrevented||ut(_t)}let Ce=We.createElement("a",{...O,...ft,href:ye.absoluteURL||Be,onClick:ye.isExternal||y?n:Ne,ref:YE(ce,lt),target:S,"data-discover":!le&&o==="render"?"true":void 0});return Le&&!le?We.createElement(We.Fragment,null,Ce,We.createElement(ZE,{page:Be})):Ce});uB.displayName="Link";var e4=We.forwardRef(function({"aria-current":n="page",caseSensitive:o=!1,className:c="",end:m=!1,style:y,to:v,viewTransition:A,children:S,...I},D){let z=s0(v,{relative:I.relative}),Z=Af(),O=We.useContext(Q_),{navigator:ce,basename:ie}=We.useContext(Nc),W=O!=null&&A4(z)&&A===!0,le=ce.encodeLocation?ce.encodeLocation(z).pathname:z.pathname,ye=Z.pathname,Be=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;o||(ye=ye.toLowerCase(),Be=Be?Be.toLowerCase():null,le=le.toLowerCase()),Be&&ie&&(Be=of(Be,ie)||Be);const Le=le!=="/"&&le.endsWith("/")?le.length-1:le.length;let lt=ye===le||!m&&ye.startsWith(le)&&ye.charAt(Le)==="/",ft=Be!=null&&(Be===le||!m&&Be.startsWith(le)&&Be.charAt(le.length)==="/"),ut={isActive:lt,isPending:ft,isTransitioning:W},Ne=lt?n:void 0,Ce;typeof c=="function"?Ce=c(ut):Ce=[c,lt?"active":null,ft?"pending":null,W?"transitioning":null].filter(Boolean).join(" ");let _t=typeof y=="function"?y(ut):y;return We.createElement(uB,{...I,"aria-current":Ne,className:Ce,ref:D,style:_t,to:v,viewTransition:A},typeof S=="function"?S(ut):S)});e4.displayName="NavLink";var t4=We.forwardRef(({discover:i="render",fetcherKey:n,navigate:o,reloadDocument:c,replace:m,state:y,method:v=e_,action:A,onSubmit:S,relative:I,preventScrollReset:D,viewTransition:z,unstable_defaultShouldRevalidate:Z,...O},ce)=>{let{unstable_useTransitions:ie}=We.useContext(Nc),W=o4(),le=l4(A,{relative:I}),ye=v.toLowerCase()==="get"?"get":"post",Be=typeof A=="string"&&cB.test(A),Le=lt=>{if(S&&S(lt),lt.defaultPrevented)return;lt.preventDefault();let ft=lt.nativeEvent.submitter,ut=ft?.getAttribute("formmethod")||v,Ne=()=>W(ft||lt.currentTarget,{fetcherKey:n,method:ut,navigate:o,replace:m,state:y,relative:I,preventScrollReset:D,viewTransition:z,unstable_defaultShouldRevalidate:Z});ie&&o!==!1?We.startTransition(()=>Ne()):Ne()};return We.createElement("form",{ref:ce,method:ye,action:le,onSubmit:c?S:Le,...O,"data-discover":!Be&&i==="render"?"true":void 0})});t4.displayName="Form";function r4(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hB(i){let n=We.useContext(ym);return ss(n,r4(i)),n}function n4(i,{target:n,replace:o,state:c,preventScrollReset:m,relative:y,viewTransition:v,unstable_defaultShouldRevalidate:A,unstable_useTransitions:S}={}){let I=cf(),D=Af(),z=s0(i,{relative:y});return We.useCallback(Z=>{if(UE(Z,n)){Z.preventDefault();let O=o!==void 0?o:Wg(D)===Wg(z),ce=()=>I(i,{replace:O,state:c,preventScrollReset:m,relative:y,viewTransition:v,unstable_defaultShouldRevalidate:A});S?We.startTransition(()=>ce()):ce()}},[D,I,z,o,c,n,i,m,y,v,A,S])}function i4(i){pu(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let n=We.useRef(Ev(i)),o=We.useRef(!1),c=Af(),m=We.useMemo(()=>DE(c.search,o.current?null:n.current),[c.search]),y=cf(),v=We.useCallback((A,S)=>{const I=Ev(typeof A=="function"?A(new URLSearchParams(m)):A);o.current=!0,y("?"+I,S)},[y,m]);return[m,v]}var a4=0,s4=()=>`__${String(++a4)}__`;function o4(){let{router:i}=hB("useSubmit"),{basename:n}=We.useContext(Nc),o=bE(),c=i.fetch,m=i.navigate;return We.useCallback(async(y,v={})=>{let{action:A,method:S,encType:I,formData:D,body:z}=RE(y,n);if(v.navigate===!1){let Z=v.fetcherKey||s4();await c(Z,o,v.action||A,{unstable_defaultShouldRevalidate:v.unstable_defaultShouldRevalidate,preventScrollReset:v.preventScrollReset,formData:D,body:z,formMethod:v.method||S,formEncType:v.encType||I,flushSync:v.flushSync})}else await m(v.action||A,{unstable_defaultShouldRevalidate:v.unstable_defaultShouldRevalidate,preventScrollReset:v.preventScrollReset,formData:D,body:z,formMethod:v.method||S,formEncType:v.encType||I,replace:v.replace,state:v.state,fromRouteId:o,flushSync:v.flushSync,viewTransition:v.viewTransition})},[c,m,n,o])}function l4(i,{relative:n}={}){let{basename:o}=We.useContext(Nc),c=We.useContext(Ch);ss(c,"useFormAction must be used inside a RouteContext");let[m]=c.matches.slice(-1),y={...s0(i||".",{relative:n})},v=Af();if(i==null){y.search=v.search;let A=new URLSearchParams(y.search),S=A.getAll("index");if(S.some(D=>D==="")){A.delete("index"),S.filter(z=>z).forEach(z=>A.append("index",z));let D=A.toString();y.search=D?`?${D}`:""}}return(!i||i===".")&&m.route.index&&(y.search=y.search?y.search.replace(/^\?/,"?index&"):"?index"),o!=="/"&&(y.pathname=y.pathname==="/"?o:nf([o,y.pathname])),Wg(y)}function A4(i,{relative:n}={}){let o=We.useContext(tB);ss(o!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:c}=hB("useViewTransitionState"),m=s0(i,{relative:n});if(!o.isTransitioning)return!1;let y=of(o.currentLocation.pathname,c)||o.currentLocation.pathname,v=of(o.nextLocation.pathname,c)||o.nextLocation.pathname;return m_(m.pathname,v)!=null||m_(m.pathname,y)!=null}Z2();const fB=(...i)=>i.filter((n,o,c)=>!!n&&n.trim()!==""&&c.indexOf(n)===o).join(" ").trim();const c4=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const u4=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,o,c)=>c?c.toUpperCase():o.toLowerCase());const yb=i=>{const n=u4(i);return n.charAt(0).toUpperCase()+n.slice(1)};var h4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const f4=i=>{for(const n in i)if(n.startsWith("aria-")||n==="role"||n==="title")return!0;return!1};const d4=We.forwardRef(({color:i="currentColor",size:n=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:m="",children:y,iconNode:v,...A},S)=>We.createElement("svg",{ref:S,...h4,width:n,height:n,stroke:i,strokeWidth:c?Number(o)*24/Number(n):o,className:fB("lucide",m),...!y&&!f4(A)&&{"aria-hidden":"true"},...A},[...v.map(([I,D])=>We.createElement(I,D)),...Array.isArray(y)?y:[y]]));const bi=(i,n)=>{const o=We.forwardRef(({className:c,...m},y)=>We.createElement(d4,{ref:y,iconNode:n,className:fB(`lucide-${c4(yb(i))}`,`lucide-${i}`,c),...m}));return o.displayName=yb(i),o};const p4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],rf=bi("arrow-right",p4);const m4=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],dB=bi("badge-check",m4);const g4=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],y4=bi("bell",g4);const _4=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],pB=bi("building-2",_4);const v4=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],x4=bi("calendar",v4);const b4=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],jg=bi("check",b4);const w4=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Rd=bi("chevron-left",w4);const B4=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],E1=bi("chevron-right",B4);const C4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],g_=bi("circle-alert",C4);const S4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],kd=bi("circle-check",S4);const E4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],T4=bi("circle-plus",E4);const F4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],mB=bi("circle-x",F4);const I4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 6v6l4 2",key:"mmk7yg"}]],xx=bi("clock",I4);const L4=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],M4=bi("credit-card",L4);const U4=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],D4=bi("download",U4);const P4=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],N4=bi("external-link",P4);const R4=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Q4=bi("eye",R4);const k4=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],O4=bi("file-down",k4);const z4=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],y_=bi("file-text",z4);const j4=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],H4=bi("house",j4);const V4=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],G4=bi("key",V4);const q4=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],K4=bi("layout-dashboard",q4);const Z4=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Yg=bi("loader-circle",Z4);const X4=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],W4=bi("lock",X4);const Y4=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],_b=bi("mail",Y4);const $4=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],bx=bi("map-pin",$4);const J4=[["path",{d:"M5 12h14",key:"1ays0h"}]],e3=bi("minus",J4);const t3=[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]],r3=bi("party-popper",t3);const n3=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],i3=bi("phone",n3);const a3=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],s3=bi("printer",a3);const o3=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],l3=bi("refresh-cw",o3);const A3=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],c3=bi("search",A3);const u3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],r_=bi("shield",u3);const h3=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],f3=bi("star",h3);const d3=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],p3=bi("tag",d3);const m3=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],$g=bi("triangle-alert",m3);function vb(i,n){if(typeof i=="function")return i(n);i!=null&&(i.current=n)}function O_(...i){return n=>{let o=!1;const c=i.map(m=>{const y=vb(m,n);return!o&&typeof y=="function"&&(o=!0),y});if(o)return()=>{for(let m=0;m<c.length;m++){const y=c[m];typeof y=="function"?y():vb(i[m],null)}}}}function __(...i){return We.useCallback(O_(...i),i)}var g3=Symbol.for("react.lazy"),v_=fx[" use ".trim().toString()];function y3(i){return typeof i=="object"&&i!==null&&"then"in i}function gB(i){return i!=null&&typeof i=="object"&&"$$typeof"in i&&i.$$typeof===g3&&"_payload"in i&&y3(i._payload)}function yB(i){const n=v3(i),o=We.forwardRef((c,m)=>{let{children:y,...v}=c;gB(y)&&typeof v_=="function"&&(y=v_(y._payload));const A=We.Children.toArray(y),S=A.find(b3);if(S){const I=S.props.children,D=A.map(z=>z===S?We.Children.count(I)>1?We.Children.only(null):We.isValidElement(I)?I.props.children:null:z);return j.jsx(n,{...v,ref:m,children:We.isValidElement(I)?We.cloneElement(I,void 0,D):null})}return j.jsx(n,{...v,ref:m,children:y})});return o.displayName=`${i}.Slot`,o}var _3=yB("Slot");function v3(i){const n=We.forwardRef((o,c)=>{let{children:m,...y}=o;if(gB(m)&&typeof v_=="function"&&(m=v_(m._payload)),We.isValidElement(m)){const v=B3(m),A=w3(y,m.props);return m.type!==We.Fragment&&(A.ref=c?O_(c,v):v),We.cloneElement(m,A)}return We.Children.count(m)>1?We.Children.only(null):null});return n.displayName=`${i}.SlotClone`,n}var x3=Symbol("radix.slottable");function b3(i){return We.isValidElement(i)&&typeof i.type=="function"&&"__radixId"in i.type&&i.type.__radixId===x3}function w3(i,n){const o={...n};for(const c in n){const m=i[c],y=n[c];/^on[A-Z]/.test(c)?m&&y?o[c]=(...A)=>{const S=y(...A);return m(...A),S}:m&&(o[c]=m):c==="style"?o[c]={...m,...y}:c==="className"&&(o[c]=[m,y].filter(Boolean).join(" "))}return{...i,...o}}function B3(i){let n=Object.getOwnPropertyDescriptor(i.props,"ref")?.get,o=n&&"isReactWarning"in n&&n.isReactWarning;return o?i.ref:(n=Object.getOwnPropertyDescriptor(i,"ref")?.get,o=n&&"isReactWarning"in n&&n.isReactWarning,o?i.props.ref:i.props.ref||i.ref)}function _B(i){var n,o,c="";if(typeof i=="string"||typeof i=="number")c+=i;else if(typeof i=="object")if(Array.isArray(i)){var m=i.length;for(n=0;n<m;n++)i[n]&&(o=_B(i[n]))&&(c&&(c+=" "),c+=o)}else for(o in i)i[o]&&(c&&(c+=" "),c+=o);return c}function vB(){for(var i,n,o=0,c="",m=arguments.length;o<m;o++)(i=arguments[o])&&(n=_B(i))&&(c&&(c+=" "),c+=n);return c}const xb=i=>typeof i=="boolean"?`${i}`:i===0?"0":i,bb=vB,xB=(i,n)=>o=>{var c;if(n?.variants==null)return bb(i,o?.class,o?.className);const{variants:m,defaultVariants:y}=n,v=Object.keys(m).map(I=>{const D=o?.[I],z=y?.[I];if(D===null)return null;const Z=xb(D)||xb(z);return m[I][Z]}),A=o&&Object.entries(o).reduce((I,D)=>{let[z,Z]=D;return Z===void 0||(I[z]=Z),I},{}),S=n==null||(c=n.compoundVariants)===null||c===void 0?void 0:c.reduce((I,D)=>{let{class:z,className:Z,...O}=D;return Object.entries(O).every(ce=>{let[ie,W]=ce;return Array.isArray(W)?W.includes({...y,...A}[ie]):{...y,...A}[ie]===W})?[...I,z,Z]:I},[]);return bb(i,v,S,o?.class,o?.className)},C3=(i,n)=>{const o=new Array(i.length+n.length);for(let c=0;c<i.length;c++)o[c]=i[c];for(let c=0;c<n.length;c++)o[i.length+c]=n[c];return o},S3=(i,n)=>({classGroupId:i,validator:n}),bB=(i=new Map,n=null,o)=>({nextPart:i,validators:n,classGroupId:o}),x_="-",wb=[],E3="arbitrary..",T3=i=>{const n=I3(i),{conflictingClassGroups:o,conflictingClassGroupModifiers:c}=i;return{getClassGroupId:v=>{if(v.startsWith("[")&&v.endsWith("]"))return F3(v);const A=v.split(x_),S=A[0]===""&&A.length>1?1:0;return wB(A,S,n)},getConflictingClassGroupIds:(v,A)=>{if(A){const S=c[v],I=o[v];return S?I?C3(I,S):S:I||wb}return o[v]||wb}}},wB=(i,n,o)=>{if(i.length-n===0)return o.classGroupId;const m=i[n],y=o.nextPart.get(m);if(y){const I=wB(i,n+1,y);if(I)return I}const v=o.validators;if(v===null)return;const A=n===0?i.join(x_):i.slice(n).join(x_),S=v.length;for(let I=0;I<S;I++){const D=v[I];if(D.validator(A))return D.classGroupId}},F3=i=>i.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const n=i.slice(1,-1),o=n.indexOf(":"),c=n.slice(0,o);return c?E3+c:void 0})(),I3=i=>{const{theme:n,classGroups:o}=i;return L3(o,n)},L3=(i,n)=>{const o=bB();for(const c in i){const m=i[c];wx(m,o,c,n)}return o},wx=(i,n,o,c)=>{const m=i.length;for(let y=0;y<m;y++){const v=i[y];M3(v,n,o,c)}},M3=(i,n,o,c)=>{if(typeof i=="string"){U3(i,n,o);return}if(typeof i=="function"){D3(i,n,o,c);return}P3(i,n,o,c)},U3=(i,n,o)=>{const c=i===""?n:BB(n,i);c.classGroupId=o},D3=(i,n,o,c)=>{if(N3(i)){wx(i(c),n,o,c);return}n.validators===null&&(n.validators=[]),n.validators.push(S3(o,i))},P3=(i,n,o,c)=>{const m=Object.entries(i),y=m.length;for(let v=0;v<y;v++){const[A,S]=m[v];wx(S,BB(n,A),o,c)}},BB=(i,n)=>{let o=i;const c=n.split(x_),m=c.length;for(let y=0;y<m;y++){const v=c[y];let A=o.nextPart.get(v);A||(A=bB(),o.nextPart.set(v,A)),o=A}return o},N3=i=>"isThemeGetter"in i&&i.isThemeGetter===!0,R3=i=>{if(i<1)return{get:()=>{},set:()=>{}};let n=0,o=Object.create(null),c=Object.create(null);const m=(y,v)=>{o[y]=v,n++,n>i&&(n=0,c=o,o=Object.create(null))};return{get(y){let v=o[y];if(v!==void 0)return v;if((v=c[y])!==void 0)return m(y,v),v},set(y,v){y in o?o[y]=v:m(y,v)}}},Tv="!",Bb=":",Q3=[],Cb=(i,n,o,c,m)=>({modifiers:i,hasImportantModifier:n,baseClassName:o,maybePostfixModifierPosition:c,isExternal:m}),k3=i=>{const{prefix:n,experimentalParseClassName:o}=i;let c=m=>{const y=[];let v=0,A=0,S=0,I;const D=m.length;for(let ie=0;ie<D;ie++){const W=m[ie];if(v===0&&A===0){if(W===Bb){y.push(m.slice(S,ie)),S=ie+1;continue}if(W==="/"){I=ie;continue}}W==="["?v++:W==="]"?v--:W==="("?A++:W===")"&&A--}const z=y.length===0?m:m.slice(S);let Z=z,O=!1;z.endsWith(Tv)?(Z=z.slice(0,-1),O=!0):z.startsWith(Tv)&&(Z=z.slice(1),O=!0);const ce=I&&I>S?I-S:void 0;return Cb(y,O,Z,ce)};if(n){const m=n+Bb,y=c;c=v=>v.startsWith(m)?y(v.slice(m.length)):Cb(Q3,!1,v,void 0,!0)}if(o){const m=c;c=y=>o({className:y,parseClassName:m})}return c},O3=i=>{const n=new Map;return i.orderSensitiveModifiers.forEach((o,c)=>{n.set(o,1e6+c)}),o=>{const c=[];let m=[];for(let y=0;y<o.length;y++){const v=o[y],A=v[0]==="[",S=n.has(v);A||S?(m.length>0&&(m.sort(),c.push(...m),m=[]),c.push(v)):m.push(v)}return m.length>0&&(m.sort(),c.push(...m)),c}},z3=i=>({cache:R3(i.cacheSize),parseClassName:k3(i),sortModifiers:O3(i),...T3(i)}),j3=/\s+/,H3=(i,n)=>{const{parseClassName:o,getClassGroupId:c,getConflictingClassGroupIds:m,sortModifiers:y}=n,v=[],A=i.trim().split(j3);let S="";for(let I=A.length-1;I>=0;I-=1){const D=A[I],{isExternal:z,modifiers:Z,hasImportantModifier:O,baseClassName:ce,maybePostfixModifierPosition:ie}=o(D);if(z){S=D+(S.length>0?" "+S:S);continue}let W=!!ie,le=c(W?ce.substring(0,ie):ce);if(!le){if(!W){S=D+(S.length>0?" "+S:S);continue}if(le=c(ce),!le){S=D+(S.length>0?" "+S:S);continue}W=!1}const ye=Z.length===0?"":Z.length===1?Z[0]:y(Z).join(":"),Be=O?ye+Tv:ye,Le=Be+le;if(v.indexOf(Le)>-1)continue;v.push(Le);const lt=m(le,W);for(let ft=0;ft<lt.length;++ft){const ut=lt[ft];v.push(Be+ut)}S=D+(S.length>0?" "+S:S)}return S},V3=(...i)=>{let n=0,o,c,m="";for(;n<i.length;)(o=i[n++])&&(c=CB(o))&&(m&&(m+=" "),m+=c);return m},CB=i=>{if(typeof i=="string")return i;let n,o="";for(let c=0;c<i.length;c++)i[c]&&(n=CB(i[c]))&&(o&&(o+=" "),o+=n);return o},G3=(i,...n)=>{let o,c,m,y;const v=S=>{const I=n.reduce((D,z)=>z(D),i());return o=z3(I),c=o.cache.get,m=o.cache.set,y=A,A(S)},A=S=>{const I=c(S);if(I)return I;const D=H3(S,o);return m(S,D),D};return y=v,(...S)=>y(V3(...S))},q3=[],Vo=i=>{const n=o=>o[i]||q3;return n.isThemeGetter=!0,n},SB=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,EB=/^\((?:(\w[\w-]*):)?(.+)\)$/i,K3=/^\d+(?:\.\d+)?\/\d+(?:\.\d+)?$/,Z3=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,X3=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,W3=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Y3=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,$3=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,zf=i=>K3.test(i),oi=i=>!!i&&!Number.isNaN(Number(i)),jf=i=>!!i&&Number.isInteger(Number(i)),T1=i=>i.endsWith("%")&&oi(i.slice(0,-1)),Wh=i=>Z3.test(i),TB=()=>!0,J3=i=>X3.test(i)&&!W3.test(i),Bx=()=>!1,eT=i=>Y3.test(i),tT=i=>$3.test(i),rT=i=>!Jr(i)&&!nn(i),nT=i=>nd(i,LB,Bx),Jr=i=>SB.test(i),Ld=i=>nd(i,MB,J3),Sb=i=>nd(i,uT,oi),iT=i=>nd(i,DB,TB),aT=i=>nd(i,UB,Bx),Eb=i=>nd(i,FB,Bx),sT=i=>nd(i,IB,tT),vy=i=>nd(i,PB,eT),nn=i=>EB.test(i),Eg=i=>qd(i,MB),oT=i=>qd(i,UB),Tb=i=>qd(i,FB),lT=i=>qd(i,LB),AT=i=>qd(i,IB),xy=i=>qd(i,PB,!0),cT=i=>qd(i,DB,!0),nd=(i,n,o)=>{const c=SB.exec(i);return c?c[1]?n(c[1]):o(c[2]):!1},qd=(i,n,o=!1)=>{const c=EB.exec(i);return c?c[1]?n(c[1]):o:!1},FB=i=>i==="position"||i==="percentage",IB=i=>i==="image"||i==="url",LB=i=>i==="length"||i==="size"||i==="bg-size",MB=i=>i==="length",uT=i=>i==="number",UB=i=>i==="family-name",DB=i=>i==="number"||i==="weight",PB=i=>i==="shadow",hT=()=>{const i=Vo("color"),n=Vo("font"),o=Vo("text"),c=Vo("font-weight"),m=Vo("tracking"),y=Vo("leading"),v=Vo("breakpoint"),A=Vo("container"),S=Vo("spacing"),I=Vo("radius"),D=Vo("shadow"),z=Vo("inset-shadow"),Z=Vo("text-shadow"),O=Vo("drop-shadow"),ce=Vo("blur"),ie=Vo("perspective"),W=Vo("aspect"),le=Vo("ease"),ye=Vo("animate"),Be=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Le=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],lt=()=>[...Le(),nn,Jr],ft=()=>["auto","hidden","clip","visible","scroll"],ut=()=>["auto","contain","none"],Ne=()=>[nn,Jr,S],Ce=()=>[zf,"full","auto",...Ne()],_t=()=>[jf,"none","subgrid",nn,Jr],_e=()=>["auto",{span:["full",jf,nn,Jr]},jf,nn,Jr],Te=()=>[jf,"auto",nn,Jr],Ye=()=>["auto","min","max","fr",nn,Jr],Ve=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],wt=()=>["start","end","center","stretch","center-safe","end-safe"],ke=()=>["auto",...Ne()],ot=()=>[zf,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...Ne()],st=()=>[zf,"screen","full","dvw","lvw","svw","min","max","fit",...Ne()],xt=()=>[zf,"screen","full","lh","dvh","lvh","svh","min","max","fit",...Ne()],Ct=()=>[i,nn,Jr],Fe=()=>[...Le(),Tb,Eb,{position:[nn,Jr]}],oe=()=>["no-repeat",{repeat:["","x","y","space","round"]}],xe=()=>["auto","cover","contain",lT,nT,{size:[nn,Jr]}],Ue=()=>[T1,Eg,Ld],Ge=()=>["","none","full",I,nn,Jr],tt=()=>["",oi,Eg,Ld],mt=()=>["solid","dashed","dotted","double"],Pt=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Et=()=>[oi,T1,Tb,Eb],$t=()=>["","none",ce,nn,Jr],Ar=()=>["none",oi,nn,Jr],pr=()=>["none",oi,nn,Jr],br=()=>[oi,nn,Jr],xr=()=>[zf,"full",...Ne()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Wh],breakpoint:[Wh],color:[TB],container:[Wh],"drop-shadow":[Wh],ease:["in","out","in-out"],font:[rT],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Wh],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Wh],shadow:[Wh],spacing:["px",oi],text:[Wh],"text-shadow":[Wh],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",zf,Jr,nn,W]}],container:["container"],columns:[{columns:[oi,Jr,nn,A]}],"break-after":[{"break-after":Be()}],"break-before":[{"break-before":Be()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:lt()}],overflow:[{overflow:ft()}],"overflow-x":[{"overflow-x":ft()}],"overflow-y":[{"overflow-y":ft()}],overscroll:[{overscroll:ut()}],"overscroll-x":[{"overscroll-x":ut()}],"overscroll-y":[{"overscroll-y":ut()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:Ce()}],"inset-x":[{"inset-x":Ce()}],"inset-y":[{"inset-y":Ce()}],start:[{"inset-s":Ce(),start:Ce()}],end:[{"inset-e":Ce(),end:Ce()}],"inset-bs":[{"inset-bs":Ce()}],"inset-be":[{"inset-be":Ce()}],top:[{top:Ce()}],right:[{right:Ce()}],bottom:[{bottom:Ce()}],left:[{left:Ce()}],visibility:["visible","invisible","collapse"],z:[{z:[jf,"auto",nn,Jr]}],basis:[{basis:[zf,"full","auto",A,...Ne()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[oi,zf,"auto","initial","none",Jr]}],grow:[{grow:["",oi,nn,Jr]}],shrink:[{shrink:["",oi,nn,Jr]}],order:[{order:[jf,"first","last","none",nn,Jr]}],"grid-cols":[{"grid-cols":_t()}],"col-start-end":[{col:_e()}],"col-start":[{"col-start":Te()}],"col-end":[{"col-end":Te()}],"grid-rows":[{"grid-rows":_t()}],"row-start-end":[{row:_e()}],"row-start":[{"row-start":Te()}],"row-end":[{"row-end":Te()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Ye()}],"auto-rows":[{"auto-rows":Ye()}],gap:[{gap:Ne()}],"gap-x":[{"gap-x":Ne()}],"gap-y":[{"gap-y":Ne()}],"justify-content":[{justify:[...Ve(),"normal"]}],"justify-items":[{"justify-items":[...wt(),"normal"]}],"justify-self":[{"justify-self":["auto",...wt()]}],"align-content":[{content:["normal",...Ve()]}],"align-items":[{items:[...wt(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...wt(),{baseline:["","last"]}]}],"place-content":[{"place-content":Ve()}],"place-items":[{"place-items":[...wt(),"baseline"]}],"place-self":[{"place-self":["auto",...wt()]}],p:[{p:Ne()}],px:[{px:Ne()}],py:[{py:Ne()}],ps:[{ps:Ne()}],pe:[{pe:Ne()}],pbs:[{pbs:Ne()}],pbe:[{pbe:Ne()}],pt:[{pt:Ne()}],pr:[{pr:Ne()}],pb:[{pb:Ne()}],pl:[{pl:Ne()}],m:[{m:ke()}],mx:[{mx:ke()}],my:[{my:ke()}],ms:[{ms:ke()}],me:[{me:ke()}],mbs:[{mbs:ke()}],mbe:[{mbe:ke()}],mt:[{mt:ke()}],mr:[{mr:ke()}],mb:[{mb:ke()}],ml:[{ml:ke()}],"space-x":[{"space-x":Ne()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":Ne()}],"space-y-reverse":["space-y-reverse"],size:[{size:ot()}],"inline-size":[{inline:["auto",...st()]}],"min-inline-size":[{"min-inline":["auto",...st()]}],"max-inline-size":[{"max-inline":["none",...st()]}],"block-size":[{block:["auto",...xt()]}],"min-block-size":[{"min-block":["auto",...xt()]}],"max-block-size":[{"max-block":["none",...xt()]}],w:[{w:[A,"screen",...ot()]}],"min-w":[{"min-w":[A,"screen","none",...ot()]}],"max-w":[{"max-w":[A,"screen","none","prose",{screen:[v]},...ot()]}],h:[{h:["screen","lh",...ot()]}],"min-h":[{"min-h":["screen","lh","none",...ot()]}],"max-h":[{"max-h":["screen","lh",...ot()]}],"font-size":[{text:["base",o,Eg,Ld]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[c,cT,iT]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",T1,Jr]}],"font-family":[{font:[oT,aT,n]}],"font-features":[{"font-features":[Jr]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[m,nn,Jr]}],"line-clamp":[{"line-clamp":[oi,"none",nn,Sb]}],leading:[{leading:[y,...Ne()]}],"list-image":[{"list-image":["none",nn,Jr]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",nn,Jr]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Ct()}],"text-color":[{text:Ct()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...mt(),"wavy"]}],"text-decoration-thickness":[{decoration:[oi,"from-font","auto",nn,Ld]}],"text-decoration-color":[{decoration:Ct()}],"underline-offset":[{"underline-offset":[oi,"auto",nn,Jr]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Ne()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",nn,Jr]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",nn,Jr]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Fe()}],"bg-repeat":[{bg:oe()}],"bg-size":[{bg:xe()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},jf,nn,Jr],radial:["",nn,Jr],conic:[jf,nn,Jr]},AT,sT]}],"bg-color":[{bg:Ct()}],"gradient-from-pos":[{from:Ue()}],"gradient-via-pos":[{via:Ue()}],"gradient-to-pos":[{to:Ue()}],"gradient-from":[{from:Ct()}],"gradient-via":[{via:Ct()}],"gradient-to":[{to:Ct()}],rounded:[{rounded:Ge()}],"rounded-s":[{"rounded-s":Ge()}],"rounded-e":[{"rounded-e":Ge()}],"rounded-t":[{"rounded-t":Ge()}],"rounded-r":[{"rounded-r":Ge()}],"rounded-b":[{"rounded-b":Ge()}],"rounded-l":[{"rounded-l":Ge()}],"rounded-ss":[{"rounded-ss":Ge()}],"rounded-se":[{"rounded-se":Ge()}],"rounded-ee":[{"rounded-ee":Ge()}],"rounded-es":[{"rounded-es":Ge()}],"rounded-tl":[{"rounded-tl":Ge()}],"rounded-tr":[{"rounded-tr":Ge()}],"rounded-br":[{"rounded-br":Ge()}],"rounded-bl":[{"rounded-bl":Ge()}],"border-w":[{border:tt()}],"border-w-x":[{"border-x":tt()}],"border-w-y":[{"border-y":tt()}],"border-w-s":[{"border-s":tt()}],"border-w-e":[{"border-e":tt()}],"border-w-bs":[{"border-bs":tt()}],"border-w-be":[{"border-be":tt()}],"border-w-t":[{"border-t":tt()}],"border-w-r":[{"border-r":tt()}],"border-w-b":[{"border-b":tt()}],"border-w-l":[{"border-l":tt()}],"divide-x":[{"divide-x":tt()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":tt()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...mt(),"hidden","none"]}],"divide-style":[{divide:[...mt(),"hidden","none"]}],"border-color":[{border:Ct()}],"border-color-x":[{"border-x":Ct()}],"border-color-y":[{"border-y":Ct()}],"border-color-s":[{"border-s":Ct()}],"border-color-e":[{"border-e":Ct()}],"border-color-bs":[{"border-bs":Ct()}],"border-color-be":[{"border-be":Ct()}],"border-color-t":[{"border-t":Ct()}],"border-color-r":[{"border-r":Ct()}],"border-color-b":[{"border-b":Ct()}],"border-color-l":[{"border-l":Ct()}],"divide-color":[{divide:Ct()}],"outline-style":[{outline:[...mt(),"none","hidden"]}],"outline-offset":[{"outline-offset":[oi,nn,Jr]}],"outline-w":[{outline:["",oi,Eg,Ld]}],"outline-color":[{outline:Ct()}],shadow:[{shadow:["","none",D,xy,vy]}],"shadow-color":[{shadow:Ct()}],"inset-shadow":[{"inset-shadow":["none",z,xy,vy]}],"inset-shadow-color":[{"inset-shadow":Ct()}],"ring-w":[{ring:tt()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Ct()}],"ring-offset-w":[{"ring-offset":[oi,Ld]}],"ring-offset-color":[{"ring-offset":Ct()}],"inset-ring-w":[{"inset-ring":tt()}],"inset-ring-color":[{"inset-ring":Ct()}],"text-shadow":[{"text-shadow":["none",Z,xy,vy]}],"text-shadow-color":[{"text-shadow":Ct()}],opacity:[{opacity:[oi,nn,Jr]}],"mix-blend":[{"mix-blend":[...Pt(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Pt()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[oi]}],"mask-image-linear-from-pos":[{"mask-linear-from":Et()}],"mask-image-linear-to-pos":[{"mask-linear-to":Et()}],"mask-image-linear-from-color":[{"mask-linear-from":Ct()}],"mask-image-linear-to-color":[{"mask-linear-to":Ct()}],"mask-image-t-from-pos":[{"mask-t-from":Et()}],"mask-image-t-to-pos":[{"mask-t-to":Et()}],"mask-image-t-from-color":[{"mask-t-from":Ct()}],"mask-image-t-to-color":[{"mask-t-to":Ct()}],"mask-image-r-from-pos":[{"mask-r-from":Et()}],"mask-image-r-to-pos":[{"mask-r-to":Et()}],"mask-image-r-from-color":[{"mask-r-from":Ct()}],"mask-image-r-to-color":[{"mask-r-to":Ct()}],"mask-image-b-from-pos":[{"mask-b-from":Et()}],"mask-image-b-to-pos":[{"mask-b-to":Et()}],"mask-image-b-from-color":[{"mask-b-from":Ct()}],"mask-image-b-to-color":[{"mask-b-to":Ct()}],"mask-image-l-from-pos":[{"mask-l-from":Et()}],"mask-image-l-to-pos":[{"mask-l-to":Et()}],"mask-image-l-from-color":[{"mask-l-from":Ct()}],"mask-image-l-to-color":[{"mask-l-to":Ct()}],"mask-image-x-from-pos":[{"mask-x-from":Et()}],"mask-image-x-to-pos":[{"mask-x-to":Et()}],"mask-image-x-from-color":[{"mask-x-from":Ct()}],"mask-image-x-to-color":[{"mask-x-to":Ct()}],"mask-image-y-from-pos":[{"mask-y-from":Et()}],"mask-image-y-to-pos":[{"mask-y-to":Et()}],"mask-image-y-from-color":[{"mask-y-from":Ct()}],"mask-image-y-to-color":[{"mask-y-to":Ct()}],"mask-image-radial":[{"mask-radial":[nn,Jr]}],"mask-image-radial-from-pos":[{"mask-radial-from":Et()}],"mask-image-radial-to-pos":[{"mask-radial-to":Et()}],"mask-image-radial-from-color":[{"mask-radial-from":Ct()}],"mask-image-radial-to-color":[{"mask-radial-to":Ct()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":Le()}],"mask-image-conic-pos":[{"mask-conic":[oi]}],"mask-image-conic-from-pos":[{"mask-conic-from":Et()}],"mask-image-conic-to-pos":[{"mask-conic-to":Et()}],"mask-image-conic-from-color":[{"mask-conic-from":Ct()}],"mask-image-conic-to-color":[{"mask-conic-to":Ct()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Fe()}],"mask-repeat":[{mask:oe()}],"mask-size":[{mask:xe()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",nn,Jr]}],filter:[{filter:["","none",nn,Jr]}],blur:[{blur:$t()}],brightness:[{brightness:[oi,nn,Jr]}],contrast:[{contrast:[oi,nn,Jr]}],"drop-shadow":[{"drop-shadow":["","none",O,xy,vy]}],"drop-shadow-color":[{"drop-shadow":Ct()}],grayscale:[{grayscale:["",oi,nn,Jr]}],"hue-rotate":[{"hue-rotate":[oi,nn,Jr]}],invert:[{invert:["",oi,nn,Jr]}],saturate:[{saturate:[oi,nn,Jr]}],sepia:[{sepia:["",oi,nn,Jr]}],"backdrop-filter":[{"backdrop-filter":["","none",nn,Jr]}],"backdrop-blur":[{"backdrop-blur":$t()}],"backdrop-brightness":[{"backdrop-brightness":[oi,nn,Jr]}],"backdrop-contrast":[{"backdrop-contrast":[oi,nn,Jr]}],"backdrop-grayscale":[{"backdrop-grayscale":["",oi,nn,Jr]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[oi,nn,Jr]}],"backdrop-invert":[{"backdrop-invert":["",oi,nn,Jr]}],"backdrop-opacity":[{"backdrop-opacity":[oi,nn,Jr]}],"backdrop-saturate":[{"backdrop-saturate":[oi,nn,Jr]}],"backdrop-sepia":[{"backdrop-sepia":["",oi,nn,Jr]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":Ne()}],"border-spacing-x":[{"border-spacing-x":Ne()}],"border-spacing-y":[{"border-spacing-y":Ne()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",nn,Jr]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[oi,"initial",nn,Jr]}],ease:[{ease:["linear","initial",le,nn,Jr]}],delay:[{delay:[oi,nn,Jr]}],animate:[{animate:["none",ye,nn,Jr]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[ie,nn,Jr]}],"perspective-origin":[{"perspective-origin":lt()}],rotate:[{rotate:Ar()}],"rotate-x":[{"rotate-x":Ar()}],"rotate-y":[{"rotate-y":Ar()}],"rotate-z":[{"rotate-z":Ar()}],scale:[{scale:pr()}],"scale-x":[{"scale-x":pr()}],"scale-y":[{"scale-y":pr()}],"scale-z":[{"scale-z":pr()}],"scale-3d":["scale-3d"],skew:[{skew:br()}],"skew-x":[{"skew-x":br()}],"skew-y":[{"skew-y":br()}],transform:[{transform:[nn,Jr,"","none","gpu","cpu"]}],"transform-origin":[{origin:lt()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:xr()}],"translate-x":[{"translate-x":xr()}],"translate-y":[{"translate-y":xr()}],"translate-z":[{"translate-z":xr()}],"translate-none":["translate-none"],accent:[{accent:Ct()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Ct()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",nn,Jr]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Ne()}],"scroll-mx":[{"scroll-mx":Ne()}],"scroll-my":[{"scroll-my":Ne()}],"scroll-ms":[{"scroll-ms":Ne()}],"scroll-me":[{"scroll-me":Ne()}],"scroll-mbs":[{"scroll-mbs":Ne()}],"scroll-mbe":[{"scroll-mbe":Ne()}],"scroll-mt":[{"scroll-mt":Ne()}],"scroll-mr":[{"scroll-mr":Ne()}],"scroll-mb":[{"scroll-mb":Ne()}],"scroll-ml":[{"scroll-ml":Ne()}],"scroll-p":[{"scroll-p":Ne()}],"scroll-px":[{"scroll-px":Ne()}],"scroll-py":[{"scroll-py":Ne()}],"scroll-ps":[{"scroll-ps":Ne()}],"scroll-pe":[{"scroll-pe":Ne()}],"scroll-pbs":[{"scroll-pbs":Ne()}],"scroll-pbe":[{"scroll-pbe":Ne()}],"scroll-pt":[{"scroll-pt":Ne()}],"scroll-pr":[{"scroll-pr":Ne()}],"scroll-pb":[{"scroll-pb":Ne()}],"scroll-pl":[{"scroll-pl":Ne()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",nn,Jr]}],fill:[{fill:["none",...Ct()]}],"stroke-w":[{stroke:[oi,Eg,Ld,Sb]}],stroke:[{stroke:["none",...Ct()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","inset-bs","inset-be","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pbs","pbe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mbs","mbe","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-bs","border-w-be","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-bs","border-color-be","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mbs","scroll-mbe","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pbs","scroll-pbe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},fT=G3(hT);function ZA(...i){return fT(vB(i))}const dT=xB("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",navy:"bg-navy-900 text-white hover:bg-navy-800",edl:"bg-edl-700 text-white hover:bg-edl-800 font-semibold"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",xl:"h-12 rounded-md px-10 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),_a=We.forwardRef(({className:i,variant:n,size:o,asChild:c=!1,...m},y)=>{const v=c?_3:"button";return j.jsx(v,{className:ZA(dT({variant:n,size:o,className:i})),ref:y,...m})});_a.displayName="Button";const gl=We.forwardRef(({className:i,...n},o)=>j.jsx("div",{ref:o,className:ZA("rounded-lg border bg-card text-card-foreground shadow-sm",i),...n}));gl.displayName="Card";const om=We.forwardRef(({className:i,...n},o)=>j.jsx("div",{ref:o,className:ZA("flex flex-col space-y-1.5 p-6",i),...n}));om.displayName="CardHeader";const lm=We.forwardRef(({className:i,...n},o)=>j.jsx("h3",{ref:o,className:ZA("text-2xl font-semibold leading-none tracking-tight",i),...n}));lm.displayName="CardTitle";const Dg=We.forwardRef(({className:i,...n},o)=>j.jsx("p",{ref:o,className:ZA("text-sm text-muted-foreground",i),...n}));Dg.displayName="CardDescription";const yl=We.forwardRef(({className:i,...n},o)=>j.jsx("div",{ref:o,className:ZA("p-6 pt-0",i),...n}));yl.displayName="CardContent";const pT=We.forwardRef(({className:i,...n},o)=>j.jsx("div",{ref:o,className:ZA("flex items-center p-6 pt-0",i),...n}));pT.displayName="CardFooter";const mT=xB("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground",outline:"text-foreground",success:"border-transparent bg-green-100 text-green-800",warning:"border-transparent bg-orange-100 text-orange-800",danger:"border-transparent bg-red-100 text-red-800",info:"border-transparent bg-blue-100 text-blue-800"}},defaultVariants:{variant:"default"}});function qo({className:i,variant:n,...o}){return j.jsx("div",{className:ZA(mT({variant:n}),i),...o})}const gT=[{name:"Gorisques",domain:"georisques.gouv.fr",desc:"Risques naturels & technologiques"},{name:"BRGM",domain:"brgm.fr",desc:"Bureau de Recherches Gologiques"},{name:"Base Adresse Nationale",domain:"data.gouv.fr",desc:"Gocodage adresses officielles"},{name:"IGN  Goportail",domain:"apicarto.ign.fr",desc:"Donnes cadastrales"}],yT=[{icon:j.jsx(dB,{className:"h-5 w-5 text-edl-700"}),title:"Accept par votre notaire",description:"Conforme  l'arrt du 27/09/2022  valide pour tout compromis de vente ou contrat de bail."},{icon:j.jsx(r_,{className:"h-5 w-5 text-edl-700"}),title:"Tous les risques couverts",description:"PPR, sisme, radon, argiles, CatNat, SIS, BASIAS, BASOL  aucun oubli possible."},{icon:j.jsx(xx,{className:"h-5 w-5 text-edl-700"}),title:"Prt avant votre rendez-vous",description:"Gnr en moins de 2 minutes depuis chez vous, sur mobile ou ordinateur."},{icon:j.jsx(y_,{className:"h-5 w-5 text-edl-700"}),title:"25  conomiss",description:"9,99  au lieu de 35  chez un diagnostiqueur  mme valeur lgale, prix divis par 3."}],_T=[{num:1,title:"Saisissez l'adresse du bien",desc:"Trouve et valide en quelques secondes via la Base Adresse Nationale officielle."},{num:2,title:"Confirmez la position sur la carte",desc:"Un marqueur prcis pour des donnes golocalises exactes  la parcelle cadastrale."},{num:3,title:"Les bases officielles sont interroges",desc:"Gorisques, cadastre, CatNat  tout se fait automatiquement, sans action de votre part."},{num:4,title:"Tlchargez votre ERP",desc:"PDF prt, conforme,  transmettre  votre notaire, agence ou futur locataire."}],vT=[{q:"Est-ce lgalement valide ?",a:"Oui. Les donnes proviennent de Gorisques (BRGM), base officielle impose par la loi. Le document est conforme  l'arrt du 27 septembre 2022."},{q:"Mon notaire l'acceptera-t-il ?",a:"Oui. Il mentionne la source officielle, la date de ralisation et les rfrences cadastrales  tout ce que votre notaire ou agence exige."},{q:"Que risque-t-on sans ERP ?",a:"L'acheteur ou le locataire peut demander l'annulation du contrat ou une rduction du prix de vente (art. L125-5 Code de l'Environnement)."}],xT=[{text:"Mon agent rclamait l'ERP depuis une semaine. En 5 minutes c'tait rgl, le notaire a sign sans la moindre remarque.",author:"Marc D.",role:"Vendeur particulier, Nantes"},{text:"J'ai 3 appartements en location. Je renouvelle l'ERP  chaque locataire pour 9,99   c'est une conomie norme sur l'anne.",author:"Isabelle T.",role:"Propritaire bailleuse, Marseille"}];function bT(){const i=cf();return j.jsxs("div",{className:"min-h-screen bg-white font-sans",children:[j.jsx("div",{className:"bg-navy-900 text-white text-xs py-2 px-4 hidden sm:block",children:j.jsxs("div",{className:"max-w-6xl mx-auto flex items-center justify-between",children:[j.jsx("span",{children:"Service EDL&DIAGNOSTIC  Diagnostics immobiliers certifis"}),j.jsxs("a",{href:"tel:+33622775769",className:"flex items-center gap-1.5 hover:text-edl-300 transition-colors font-medium",children:[j.jsx(i3,{className:"h-3 w-3"}),"06 22 77 57 69"]})]})}),j.jsx("header",{className:"border-b border-gray-200 bg-white sticky top-0 z-40 shadow-sm",children:j.jsxs("div",{className:"max-w-6xl mx-auto px-4 h-16 flex items-center justify-between",children:[j.jsxs("div",{className:"flex items-center gap-3",children:[j.jsxs("div",{className:"flex items-center gap-1.5",children:[j.jsx("div",{className:"bg-edl-700 rounded p-1.5",children:j.jsx(r_,{className:"h-5 w-5 text-white"})}),j.jsxs("div",{className:"leading-tight",children:[j.jsx("span",{className:"font-black text-navy-900 text-lg tracking-tight",children:"EDL"}),j.jsx("span",{className:"font-bold text-edl-700 text-lg",children:"&"}),j.jsx("span",{className:"font-black text-navy-900 text-lg tracking-tight",children:"DIAGNOSTIC"})]})]}),j.jsx("div",{className:"hidden sm:block h-6 w-px bg-gray-300"}),j.jsx("span",{className:"hidden sm:block text-xs text-gray-500 font-medium",children:"ERP en ligne  Vente & Location"})]}),j.jsx("div",{className:"flex items-center gap-2",children:j.jsx(_a,{size:"sm",className:"bg-edl-700 hover:bg-edl-800 text-white font-semibold",onClick:()=>i("/generer"),children:"Gnrer mon ERP"})})]})}),j.jsxs("section",{className:"text-white py-12 sm:py-20 px-4 relative overflow-hidden bg-edl-700",children:[j.jsx("div",{className:"absolute inset-0 opacity-5",style:{backgroundImage:"radial-gradient(circle, white 1px, transparent 1px)",backgroundSize:"30px 30px"}}),j.jsxs("div",{className:"max-w-4xl mx-auto text-center relative",children:[j.jsx("div",{className:"flex justify-center mb-5",children:j.jsxs("div",{className:"inline-flex items-center gap-2.5 bg-white/15 border border-white/25 rounded-full px-4 py-2 backdrop-blur-sm",children:[j.jsx("div",{className:"bg-white rounded-full h-8 w-8 flex items-center justify-center shrink-0 overflow-hidden p-0.5",children:j.jsx("img",{src:"/marianne.png",alt:"Marianne RF",className:"h-full w-full object-contain"})}),j.jsxs("span",{className:"text-[11px] font-semibold text-white/95 uppercase tracking-widest",children:[j.jsx("span",{className:"sm:hidden",children:"Donnes officielles de l'tat"}),j.jsx("span",{className:"hidden sm:inline",children:"Rpublique Franaise  Donnes officielles"})]})]})}),j.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-black leading-tight mb-5 sm:mb-6 text-white uppercase tracking-tight",children:"tat des Risques et Pollutions en ligne"}),j.jsx("p",{className:"text-base sm:text-lg text-red-100 mb-6 sm:mb-8 max-w-2xl mx-auto font-medium",children:"ERP obligatoire pour votre vente ou location  document conforme, accept par les notaires et agences, disponible 7j/7 et 24h/24."}),j.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[j.jsxs(_a,{size:"xl",className:"bg-white text-edl-700 hover:bg-gray-100 font-bold shadow-lg",onClick:()=>i("/generer"),children:["tablir mon tat des risques",j.jsx(rf,{className:"h-5 w-5"})]}),j.jsx(_a,{size:"xl",className:"bg-navy-900 text-white hover:bg-navy-800 font-semibold shadow-lg",onClick:()=>i("/exemple"),children:"Voir un exemple"})]}),j.jsx("p",{className:"text-xs text-red-200 mt-5 font-medium",children:" 9,99    Donnes officielles Gorisques   PDF prt en 2 minutes"})]})]}),j.jsx("section",{className:"bg-white border-b border-gray-100 py-6 px-4",children:j.jsxs("div",{className:"max-w-5xl mx-auto",children:[j.jsx("p",{className:"text-center text-xs text-gray-400 uppercase tracking-widest font-semibold mb-5",children:"Donnes issues des sources officielles de l'tat franais"}),j.jsxs("div",{className:"flex flex-wrap justify-center gap-3",children:[j.jsxs("div",{className:"flex items-center gap-3 px-4 py-2.5 bg-white border border-[#c5d0e8] rounded-lg shadow-sm",children:[j.jsx("img",{src:"/marianne.png",alt:"Marianne  Rpublique Franaise",className:"h-12 w-auto object-contain shrink-0"}),j.jsxs("div",{children:[j.jsx("p",{className:"text-[9px] font-semibold text-[#002395] uppercase tracking-widest leading-none",children:"Rpublique Franaise"}),j.jsx("p",{className:"text-xs font-black text-gray-900 leading-tight mt-0.5",children:"Donnes publiques officielles"}),j.jsx("p",{className:"text-[10px] text-gray-500 leading-none mt-0.5",children:"data.gouv.fr"})]})]}),gT.map(n=>j.jsxs("div",{className:"relative flex items-center gap-2.5 pl-4 pr-3 py-2.5 bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden",children:[j.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-[3px] bg-[#002395]"}),j.jsxs("div",{children:[j.jsx("p",{className:"text-xs font-bold text-gray-900 leading-none",children:n.name}),j.jsx("p",{className:"text-[10px] text-gray-400 leading-none mt-0.5",children:n.domain})]})]},n.name)),j.jsxs("div",{className:"flex items-center gap-2.5 px-3 py-2 bg-green-50 border border-green-200 rounded-lg shadow-sm",children:[j.jsx(dB,{className:"h-5 w-5 text-green-600 shrink-0"}),j.jsxs("div",{children:[j.jsx("p",{className:"text-xs font-bold text-green-900 leading-none",children:"Conforme"}),j.jsx("p",{className:"text-[10px] text-green-700 leading-none mt-0.5",children:"Arrt 27/09/2022"})]})]}),j.jsxs("div",{className:"flex items-center gap-2.5 px-3 py-2 bg-blue-50 border border-blue-200 rounded-lg shadow-sm",children:[j.jsx(r_,{className:"h-4 w-4 text-blue-600 shrink-0"}),j.jsxs("div",{children:[j.jsx("p",{className:"text-xs font-bold text-blue-900 leading-none",children:"RGPD"}),j.jsx("p",{className:"text-[10px] text-blue-600 leading-none mt-0.5",children:"Donnes protges"})]})]}),j.jsxs("div",{className:"flex items-center gap-2.5 px-3 py-2 bg-gray-50 border border-gray-200 rounded-lg shadow-sm",children:[j.jsx(W4,{className:"h-4 w-4 text-[#635BFF] shrink-0"}),j.jsxs("div",{children:[j.jsx("p",{className:"text-xs font-bold text-gray-900 leading-none",children:"Paiement scuris"}),j.jsx("p",{className:"text-[10px] text-gray-400 leading-none mt-0.5",children:"Stripe  SSL / 3D Secure"})]})]})]})]})}),j.jsx("div",{className:"bg-amber-50 border-b border-amber-200 px-4 py-3",children:j.jsxs("div",{className:"max-w-6xl mx-auto flex items-start gap-3",children:[j.jsx($g,{className:"h-4 w-4 text-amber-600 shrink-0 mt-0.5"}),j.jsxs("p",{className:"text-sm text-amber-900",children:[j.jsx("strong",{children:"Risque lgal :"})," Sans ERP, l'acheteur peut exiger une rduction de prix ou l'annulation de la vente. Pour les bailleurs, le contrat de bail peut tre dclar nul (art. L125-5 Code de l'Environnement). Validit : 6 mois."]})]})}),j.jsx("section",{className:"py-14 px-4 bg-white",children:j.jsxs("div",{className:"max-w-4xl mx-auto",children:[j.jsx("h2",{className:"text-2xl font-black text-navy-900 text-center mb-2",children:"Vous vendez ou vous louez ?"}),j.jsx("p",{className:"text-center text-gray-500 text-sm mb-10",children:"L'ERP est obligatoire dans les deux cas"}),j.jsxs("div",{className:"grid sm:grid-cols-2 gap-6",children:[j.jsx(gl,{className:"border-2 border-navy-100 hover:border-edl-300 transition-all",children:j.jsxs(yl,{className:"pt-6 space-y-4",children:[j.jsxs("div",{className:"flex items-center gap-3",children:[j.jsx("div",{className:"bg-navy-50 rounded-lg p-2.5",children:j.jsx(H4,{className:"h-6 w-6 text-navy-900"})}),j.jsx("h3",{className:"font-black text-navy-900 text-lg",children:"Vous vendez"})]}),j.jsx("ul",{className:"space-y-2.5",children:["Obligatoire avant la signature du compromis","Le notaire ou l'agence le rclame systmatiquement","Sans ERP : annulation ou rduction de prix possible","Valable 6 mois  compter de sa date d'tablissement"].map(n=>j.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-700",children:[j.jsx(kd,{className:"h-4 w-4 text-green-600 mt-0.5 shrink-0"}),n]},n))}),j.jsxs(_a,{className:"w-full bg-edl-700 hover:bg-edl-800 font-semibold",onClick:()=>i("/generer"),children:["Gnrer l'ERP de ma vente",j.jsx(rf,{className:"h-4 w-4"})]})]})}),j.jsx(gl,{className:"border-2 border-navy-100 hover:border-edl-300 transition-all",children:j.jsxs(yl,{className:"pt-6 space-y-4",children:[j.jsxs("div",{className:"flex items-center gap-3",children:[j.jsx("div",{className:"bg-navy-50 rounded-lg p-2.5",children:j.jsx(G4,{className:"h-6 w-6 text-navy-900"})}),j.jsx("h3",{className:"font-black text-navy-900 text-lg",children:"Vous louez"})]}),j.jsx("ul",{className:"space-y-2.5",children:["Obligatoire  chaque nouveau contrat de bail"," joindre au contrat de location avant la signature","Sans ERP : le bail peut tre dclar nul"," renouveler  chaque nouveau locataire"].map(n=>j.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-700",children:[j.jsx(kd,{className:"h-4 w-4 text-green-600 mt-0.5 shrink-0"}),n]},n))}),j.jsxs(_a,{className:"w-full bg-edl-700 hover:bg-edl-800 font-semibold",onClick:()=>i("/generer"),children:["Gnrer l'ERP de ma location",j.jsx(rf,{className:"h-4 w-4"})]})]})})]})]})}),j.jsx("section",{className:"py-14 px-4 bg-slate-50",children:j.jsxs("div",{className:"max-w-6xl mx-auto",children:[j.jsx("h2",{className:"text-2xl font-black text-navy-900 text-center mb-2",children:"Pourquoi choisir EDL&DIAGNOSTIC ?"}),j.jsx("p",{className:"text-center text-gray-500 text-sm mb-10",children:"Rapide, lgal, conomique"}),j.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-4",children:yT.map(n=>j.jsx(gl,{className:"border-gray-200 hover:border-edl-300 hover:shadow-md transition-all group",children:j.jsxs(yl,{className:"pt-5",children:[j.jsx("div",{className:"bg-edl-50 group-hover:bg-edl-100 w-10 h-10 rounded-lg flex items-center justify-center mb-3 transition-colors",children:n.icon}),j.jsx("h3",{className:"font-bold text-navy-900 mb-1",children:n.title}),j.jsx("p",{className:"text-sm text-gray-600",children:n.description})]})},n.title))})]})}),j.jsx("section",{className:"py-14 px-4 bg-white",children:j.jsxs("div",{className:"max-w-4xl mx-auto",children:[j.jsx("h2",{className:"text-2xl font-black text-navy-900 text-center mb-2",children:"Simple comme bonjour"}),j.jsx("p",{className:"text-center text-gray-500 text-sm mb-10",children:"4 tapes, moins de 2 minutes, depuis votre canap"}),j.jsx("div",{className:"space-y-6",children:_T.map(n=>j.jsxs("div",{className:"flex items-start gap-4",children:[j.jsx("div",{className:"bg-edl-700 text-white rounded-full h-9 w-9 flex items-center justify-center text-sm font-black shrink-0 mt-0.5 shadow-md shadow-edl-900/20",children:n.num}),j.jsxs("div",{className:"pt-1",children:[j.jsx("h3",{className:"font-bold text-navy-900",children:n.title}),j.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:n.desc})]})]},n.num))})]})}),j.jsx("section",{className:"py-14 px-4 bg-slate-50",children:j.jsxs("div",{className:"max-w-3xl mx-auto",children:[j.jsx("h2",{className:"text-2xl font-black text-navy-900 text-center mb-10",children:"Vos questions, rponses claires"}),j.jsxs("div",{className:"space-y-4",children:[vT.map(({q:n,a:o})=>j.jsx(gl,{className:"border-gray-200",children:j.jsx(yl,{className:"pt-5 pb-5",children:j.jsxs("div",{className:"flex items-start gap-3",children:[j.jsx(kd,{className:"h-5 w-5 text-edl-700 shrink-0 mt-0.5"}),j.jsxs("div",{children:[j.jsx("p",{className:"font-bold text-navy-900 mb-1",children:n}),j.jsx("p",{className:"text-sm text-gray-600",children:o})]})]})})},n)),j.jsx(gl,{className:"border-red-200 bg-red-50",children:j.jsx(yl,{className:"pt-5 pb-5",children:j.jsxs("div",{className:"flex items-start gap-3",children:[j.jsx(mB,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),j.jsxs("div",{children:[j.jsx("p",{className:"font-bold text-red-900 mb-1",children:"Que se passe-t-il sans ERP ?"}),j.jsx("p",{className:"text-sm text-red-700",children:"L'acheteur ou le locataire peut demander l'annulation du contrat ou une rduction du prix de vente (art. L125-5 Code de l'Environnement). Un oubli qui peut coter bien plus que 9,99 ."})]})]})})})]})]})}),j.jsx("section",{className:"py-14 px-4 bg-white",children:j.jsxs("div",{className:"max-w-xl mx-auto text-center",children:[j.jsx("h2",{className:"text-2xl font-black text-navy-900 mb-2",children:"Votre ERP en 2 minutes, pour 9,99 "}),j.jsx("p",{className:"text-gray-500 text-sm mb-8",children:"Disponible 7j/7, 24h/24  Accept par les notaires et agences immobilires"}),j.jsx(gl,{className:"border-2 border-edl-700 shadow-xl",children:j.jsxs(yl,{className:"pt-8 pb-8 space-y-5",children:[j.jsx(qo,{className:"bg-green-100 text-green-800 border border-green-200 text-xs px-3 font-semibold",children:" Tlchargement immdiat aprs paiement"}),j.jsxs("div",{children:[j.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[j.jsx("span",{className:"text-gray-400 line-through text-lg font-medium",children:"35,00 "}),j.jsx("span",{className:"text-xs text-gray-400 italic",children:"(tarif diagnostiqueur)"})]}),j.jsxs("p",{className:"text-5xl font-black text-edl-700",children:["9,99 ",j.jsx("span",{className:"text-lg font-normal text-gray-500",children:" TTC"})]}),j.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"8,32  HT  Tlchargement immdiat aprs paiement"})]}),j.jsx("ul",{className:"text-sm text-left space-y-2",children:["ERP PDF conforme arrt 27/09/2022","10 risques analyss via Gorisques (BRGM)","Valide 6 mois  vente ET location","Rfrences cadastrales incluses","Historique CatNat depuis 1982","Accessible depuis votre espace client"].map(n=>j.jsxs("li",{className:"flex items-center gap-2 text-gray-700",children:[j.jsx("span",{className:"text-green-600 font-bold",children:""})," ",n]},n))}),j.jsxs(_a,{size:"xl",className:"w-full bg-edl-700 hover:bg-edl-800 text-white font-bold",onClick:()=>i("/generer"),children:["Obtenir mon ERP  9,99 ",j.jsx(rf,{className:"h-5 w-5"})]}),j.jsx("p",{className:"text-xs text-gray-400",children:"Paiement scuris par Stripe  Satisfait ou rembours 7 jours"})]})})]})}),j.jsx("section",{className:"py-14 px-4 bg-slate-50",children:j.jsxs("div",{className:"max-w-4xl mx-auto",children:[j.jsx("h2",{className:"text-2xl font-black text-navy-900 text-center mb-10",children:"Ils ont vit le blocage"}),j.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:xT.map((n,o)=>j.jsx(gl,{className:"border-gray-200 hover:border-edl-200 transition-colors",children:j.jsxs(yl,{className:"pt-5",children:[j.jsx("div",{className:"flex gap-0.5 mb-3",children:[...Array(5)].map((c,m)=>j.jsx(f3,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"},m))}),j.jsxs("p",{className:"text-sm text-gray-700 italic mb-4",children:['"',n.text,'"']}),j.jsxs("div",{children:[j.jsx("p",{className:"text-sm font-bold text-navy-900",children:n.author}),j.jsx("p",{className:"text-xs text-gray-500",children:n.role})]})]})},o))})]})}),j.jsxs("section",{className:"py-16 px-4 text-white text-center bg-edl-700",children:[j.jsx("h2",{className:"text-2xl sm:text-3xl font-black mb-3",children:"Votre transaction ne peut pas attendre."}),j.jsx("p",{className:"text-red-100 mb-6 text-sm sm:text-base font-medium max-w-xl mx-auto",children:"Gnrez votre ERP maintenant  2 minutes suffisent pour ne pas retarder votre vente ou votre mise en location."}),j.jsxs(_a,{size:"xl",className:"bg-white text-edl-700 hover:bg-gray-100 font-bold shadow-lg",onClick:()=>i("/generer"),children:["Obtenir mon ERP  9,99 ",j.jsx(rf,{className:"h-5 w-5"})]}),j.jsx("p",{className:"text-xs text-red-200 mt-4",children:"Donnes officielles  PDF conforme  Tlchargement immdiat"})]}),j.jsx("footer",{className:"bg-navy-900 text-white py-10 px-4",children:j.jsxs("div",{className:"max-w-6xl mx-auto",children:[j.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6 mb-6",children:[j.jsxs("div",{className:"flex items-center gap-2",children:[j.jsx("div",{className:"bg-edl-700 rounded p-1",children:j.jsx(r_,{className:"h-4 w-4 text-white"})}),j.jsxs("span",{className:"font-black text-white text-base tracking-tight",children:["EDL",j.jsx("span",{className:"text-edl-400",children:"&"}),"DIAGNOSTIC"]})]}),j.jsxs("div",{className:"flex items-center gap-2.5 border border-white/10 rounded-lg px-3 py-2",children:[j.jsx("div",{className:"bg-white rounded p-1 shrink-0",children:j.jsx("img",{src:"/marianne.png",alt:"Marianne RF",className:"h-7 w-auto object-contain"})}),j.jsxs("div",{children:[j.jsx("p",{className:"text-[9px] font-semibold text-gray-300 uppercase tracking-widest leading-none",children:"Rpublique Franaise"}),j.jsx("p",{className:"text-[10px] text-white font-bold leading-none mt-0.5",children:"Donnes publiques officielles"})]})]}),j.jsxs("div",{className:"flex flex-wrap justify-center gap-x-6 gap-y-1 text-xs text-gray-400",children:[j.jsx("span",{children:"georisques.gouv.fr (BRGM)"}),j.jsx("span",{children:"api-adresse.data.gouv.fr"}),j.jsx("span",{children:"apicarto.ign.fr"})]})]}),j.jsx("div",{className:"border-t border-white/10 pt-6 text-center",children:j.jsx("p",{className:"text-xs text-gray-500",children:" 2025 EDL&DIAGNOSTIC  Ce service ne constitue pas un avis juridique. Les donnes proviennent des APIs officielles publiques franaises. L'utilisateur est responsable de la vrification des informations avant usage."})})]})})]})}function b_({className:i,...n}){return j.jsx("div",{className:ZA("animate-pulse rounded-md bg-muted",i),...n})}const NB=We.forwardRef(({className:i,type:n,...o},c)=>j.jsx("input",{type:n,className:ZA("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",i),ref:c,...o}));NB.displayName="Input";const wT="https://api-adresse.data.gouv.fr";async function BT(i,n={}){if(!i||i.trim().length<3)return{type:"FeatureCollection",features:[],attribution:"",licence:"",query:i,limit:0};const o=new URLSearchParams({q:i.trim()});n.limit!==void 0&&o.set("limit",String(n.limit)),n.autocomplete!==void 0&&o.set("autocomplete",String(n.autocomplete)),n.lat!==void 0&&o.set("lat",String(n.lat)),n.lon!==void 0&&o.set("lon",String(n.lon)),n.type&&o.set("type",n.type),n.postcode&&o.set("postcode",n.postcode),n.citycode&&o.set("citycode",n.citycode);const c=await fetch(`${wT}/search/?${o.toString()}`);if(!c.ok)throw new Error(`BAN API error: ${c.status} ${c.statusText}`);return c.json()}function CT(i={}){const{debounceMs:n=300,minLength:o=3}=i,[c,m]=We.useState(""),[y,v]=We.useState([]),[A,S]=We.useState(!1),[I,D]=We.useState(null),z=We.useRef(null),Z=We.useRef(null),O=We.useCallback(()=>{v([])},[]);return We.useEffect(()=>{if(z.current&&clearTimeout(z.current),Z.current&&Z.current.abort(),!c||c.trim().length<o){v([]),S(!1);return}return S(!0),D(null),z.current=setTimeout(async()=>{Z.current=new AbortController;try{const ce=await BT(c,{limit:8,autocomplete:1});v(ce.features)}catch(ce){ce.name!=="AbortError"&&(D("Erreur lors de la recherche d'adresse"),v([]))}finally{S(!1)}},n),()=>{z.current&&clearTimeout(z.current)}},[c,n,o]),{query:c,setQuery:m,suggestions:y,loading:A,error:I,clearSuggestions:O}}function ST({onAddressSelected:i,placeholder:n="Saisissez l'adresse du bien (ex: 12 rue de la Paix, Paris)",className:o}){const{query:c,setQuery:m,suggestions:y,loading:v,clearSuggestions:A}=CT({debounceMs:300,minLength:3}),[S,I]=We.useState(!1),D=We.useRef(null);function z(Z){m(Z.properties.label),A(),I(!1),i(Z)}return j.jsxs("div",{className:ZA("relative",o),children:[j.jsxs("div",{className:"relative",children:[j.jsx(c3,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),j.jsx(NB,{ref:D,value:c,onChange:Z=>{m(Z.target.value),I(!0)},onFocus:()=>I(!0),onBlur:()=>setTimeout(()=>I(!1),150),placeholder:n,className:"pl-10 pr-10 h-12 text-base"}),v&&j.jsx(Yg,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 animate-spin text-muted-foreground"})]}),S&&y.length>0&&j.jsx("div",{className:"absolute z-50 mt-1 w-full rounded-md border bg-white shadow-lg",children:j.jsx("ul",{className:"py-1 max-h-72 overflow-auto",children:y.map((Z,O)=>j.jsx("li",{children:j.jsxs("button",{type:"button",onMouseDown:()=>z(Z),className:"flex items-start gap-3 w-full px-4 py-3 text-left hover:bg-slate-50 transition-colors",children:[j.jsx(bx,{className:"h-4 w-4 mt-0.5 shrink-0 text-navy-600"}),j.jsxs("span",{className:"flex flex-col",children:[j.jsx("span",{className:"text-sm font-medium text-gray-900",children:Z.properties.name}),j.jsxs("span",{className:"text-xs text-gray-500",children:[Z.properties.postcode," ",Z.properties.city,Z.properties.context?`  ${Z.properties.context}`:""]})]})]})},Z.properties.id??O))})})]})}var n_={exports:{}};var ET=n_.exports,Fb;function TT(){return Fb||(Fb=1,(function(i,n){(function(o,c){i.exports=c()})(ET,(function(){var o={},c={};function m(v,A,S){if(c[v]=S,v==="index"){var I="var sharedModule = {}; ("+c.shared+")(sharedModule); ("+c.worker+")(sharedModule);",D={};return c.shared(D),c.index(o,D),typeof window<"u"&&o.setWorkerUrl(window.URL.createObjectURL(new Blob([I],{type:"text/javascript"}))),o}}m("shared",["exports"],(function(v){function A(a,e,r,h){return new(r||(r=Promise))((function(d,_){function x(P){try{T(h.next(P))}catch(Q){_(Q)}}function C(P){try{T(h.throw(P))}catch(Q){_(Q)}}function T(P){var Q;P.done?d(P.value):(Q=P.value,Q instanceof r?Q:new r((function(k){k(Q)}))).then(x,C)}T((h=h.apply(a,e||[])).next())}))}function S(a,e){this.x=a,this.y=e}function I(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var D,z;typeof SuppressedError=="function"&&SuppressedError,S.prototype={clone(){return new S(this.x,this.y)},add(a){return this.clone()._add(a)},sub(a){return this.clone()._sub(a)},multByPoint(a){return this.clone()._multByPoint(a)},divByPoint(a){return this.clone()._divByPoint(a)},mult(a){return this.clone()._mult(a)},div(a){return this.clone()._div(a)},rotate(a){return this.clone()._rotate(a)},rotateAround(a,e){return this.clone()._rotateAround(a,e)},matMult(a){return this.clone()._matMult(a)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(a){return this.x===a.x&&this.y===a.y},dist(a){return Math.sqrt(this.distSqr(a))},distSqr(a){const e=a.x-this.x,r=a.y-this.y;return e*e+r*r},angle(){return Math.atan2(this.y,this.x)},angleTo(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith(a){return this.angleWithSep(a.x,a.y)},angleWithSep(a,e){return Math.atan2(this.x*e-this.y*a,this.x*a+this.y*e)},_matMult(a){const e=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=e,this},_add(a){return this.x+=a.x,this.y+=a.y,this},_sub(a){return this.x-=a.x,this.y-=a.y,this},_mult(a){return this.x*=a,this.y*=a,this},_div(a){return this.x/=a,this.y/=a,this},_multByPoint(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint(a){return this.x/=a.x,this.y/=a.y,this},_unit(){return this._div(this.mag()),this},_perp(){const a=this.y;return this.y=this.x,this.x=-a,this},_rotate(a){const e=Math.cos(a),r=Math.sin(a),h=r*this.x+e*this.y;return this.x=e*this.x-r*this.y,this.y=h,this},_rotateAround(a,e){const r=Math.cos(a),h=Math.sin(a),d=e.y+h*(this.x-e.x)+r*(this.y-e.y);return this.x=e.x+r*(this.x-e.x)-h*(this.y-e.y),this.y=d,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:S},S.convert=function(a){if(a instanceof S)return a;if(Array.isArray(a))return new S(+a[0],+a[1]);if(a.x!==void 0&&a.y!==void 0)return new S(+a.x,+a.y);throw new Error("Expected [x, y] or {x, y} point format")};var Z=(function(){if(z)return D;function a(e,r,h,d){this.cx=3*e,this.bx=3*(h-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(d-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=r,this.p2x=h,this.p2y=d}return z=1,D=a,a.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,r){if(r===void 0&&(r=1e-6),e<0)return 0;if(e>1)return 1;for(var h=e,d=0;d<8;d++){var _=this.sampleCurveX(h)-e;if(Math.abs(_)<r)return h;var x=this.sampleCurveDerivativeX(h);if(Math.abs(x)<1e-6)break;h-=_/x}var C=0,T=1;for(h=e,d=0;d<20&&(_=this.sampleCurveX(h),!(Math.abs(_-e)<r));d++)e>_?C=h:T=h,h=.5*(T-C)+C;return h},solve:function(e,r){return this.sampleCurveY(this.solveCurveX(e,r))}},D})(),O=I(Z);let ce,ie;function W(){return ce==null&&(ce=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),ce}function le(){if(ie==null&&(ie=!1,W())){const e=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(e){for(let h=0;h<25;h++){const d=4*h;e.fillStyle=`rgb(${d},${d+1},${d+2})`,e.fillRect(h%5,Math.floor(h/5),1,1)}const r=e.getImageData(0,0,5,5).data;for(let h=0;h<100;h++)if(h%4!=3&&r[h]!==h){ie=!0;break}}}return ie||!1}var ye=1e-6,Be=typeof Float32Array<"u"?Float32Array:Array;function Le(){var a=new Be(9);return Be!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0),a[0]=1,a[4]=1,a[8]=1,a}function lt(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function ft(){var a=new Be(3);return Be!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a}function ut(a){var e=a[0],r=a[1],h=a[2];return Math.sqrt(e*e+r*r+h*h)}function Ne(a,e,r){var h=new Be(3);return h[0]=a,h[1]=e,h[2]=r,h}function Ce(a,e,r){return a[0]=e[0]+r[0],a[1]=e[1]+r[1],a[2]=e[2]+r[2],a}function _t(a,e,r){return a[0]=e[0]*r,a[1]=e[1]*r,a[2]=e[2]*r,a}function _e(a,e,r){var h=e[0],d=e[1],_=e[2],x=r[0],C=r[1],T=r[2];return a[0]=d*T-_*C,a[1]=_*x-h*T,a[2]=h*C-d*x,a}var Te,Ye=ut;function Ve(a,e,r){var h=e[0],d=e[1],_=e[2],x=e[3];return a[0]=r[0]*h+r[4]*d+r[8]*_+r[12]*x,a[1]=r[1]*h+r[5]*d+r[9]*_+r[13]*x,a[2]=r[2]*h+r[6]*d+r[10]*_+r[14]*x,a[3]=r[3]*h+r[7]*d+r[11]*_+r[15]*x,a}function wt(){var a=new Be(4);return Be!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a[3]=1,a}function ke(a,e,r,h){var d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",_=Math.PI/360;e*=_,h*=_,r*=_;var x=Math.sin(e),C=Math.cos(e),T=Math.sin(r),P=Math.cos(r),Q=Math.sin(h),k=Math.cos(h);switch(d){case"xyz":a[0]=x*P*k+C*T*Q,a[1]=C*T*k-x*P*Q,a[2]=C*P*Q+x*T*k,a[3]=C*P*k-x*T*Q;break;case"xzy":a[0]=x*P*k-C*T*Q,a[1]=C*T*k-x*P*Q,a[2]=C*P*Q+x*T*k,a[3]=C*P*k+x*T*Q;break;case"yxz":a[0]=x*P*k+C*T*Q,a[1]=C*T*k-x*P*Q,a[2]=C*P*Q-x*T*k,a[3]=C*P*k+x*T*Q;break;case"yzx":a[0]=x*P*k+C*T*Q,a[1]=C*T*k+x*P*Q,a[2]=C*P*Q-x*T*k,a[3]=C*P*k-x*T*Q;break;case"zxy":a[0]=x*P*k-C*T*Q,a[1]=C*T*k+x*P*Q,a[2]=C*P*Q+x*T*k,a[3]=C*P*k-x*T*Q;break;case"zyx":a[0]=x*P*k-C*T*Q,a[1]=C*T*k+x*P*Q,a[2]=C*P*Q-x*T*k,a[3]=C*P*k+x*T*Q;break;default:throw new Error("Unknown angle order "+d)}return a}function ot(){var a=new Be(2);return Be!=Float32Array&&(a[0]=0,a[1]=0),a}function st(a,e){var r=new Be(2);return r[0]=a,r[1]=e,r}ft(),Te=new Be(4),Be!=Float32Array&&(Te[0]=0,Te[1]=0,Te[2]=0,Te[3]=0),ft(),Ne(1,0,0),Ne(0,1,0),wt(),wt(),Le(),ot();const xt=8192;function Ct(a,e,r){return e*(xt/(a.tileSize*Math.pow(2,r-a.tileID.overscaledZ)))}function Fe(a,e){return(a%e+e)%e}function oe(a,e,r){return a*(1-r)+e*r}function xe(a){if(a<=0)return 0;if(a>=1)return 1;const e=a*a,r=e*a;return 4*(a<.5?r:3*(a-e)+r-.75)}function Ue(a,e,r,h){const d=new O(a,e,r,h);return _=>d.solve(_)}const Ge=Ue(.25,.1,.25,1);function tt(a,e,r){return Math.min(r,Math.max(e,a))}function mt(a,e,r){const h=r-e,d=((a-e)%h+h)%h+e;return d===e?r:d}function Pt(a,...e){for(const r of e)for(const h in r)a[h]=r[h];return a}let Et=1;function $t(a,e,r){const h={};for(const d in a)h[d]=e.call(this,a[d],d,a);return h}function Ar(a,e,r){const h={};for(const d in a)e.call(this,a[d],d,a)&&(h[d]=a[d]);return h}function pr(a){return Array.isArray(a)?a.map(pr):typeof a=="object"&&a?$t(a,pr):a}const br={};function xr(a){br[a]||(typeof console<"u"&&console.warn(a),br[a]=!0)}function Re(a,e,r){return(r.y-a.y)*(e.x-a.x)>(e.y-a.y)*(r.x-a.x)}function _r(a){return typeof WorkerGlobalScope<"u"&&a!==void 0&&a instanceof WorkerGlobalScope}let Qr=null;function Wr(a){return typeof ImageBitmap<"u"&&a instanceof ImageBitmap}const lr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Zr(a,e,r,h,d){return A(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const _=new VideoFrame(a,{timestamp:0});try{const x=_?.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const C=x.startsWith("BGR"),T=new Uint8ClampedArray(h*d*4);if(yield _.copyTo(T,(function(P,Q,k,K,X){const re=4*Math.max(-Q,0),ae=(Math.max(0,k)-k)*K*4+re,ue=4*K,ve=Math.max(0,Q),He=Math.max(0,k);return{rect:{x:ve,y:He,width:Math.min(P.width,Q+K)-ve,height:Math.min(P.height,k+X)-He},layout:[{offset:ae,stride:ue}]}})(a,e,r,h,d)),C)for(let P=0;P<T.length;P+=4){const Q=T[P];T[P]=T[P+2],T[P+2]=Q}return T}finally{_.close()}}))}let Sr,Vr;function Gr(a,e,r,h){return a.addEventListener(e,r,h),{unsubscribe:()=>{a.removeEventListener(e,r,h)}}}function mn(a){return a*Math.PI/180}function Cn(a){return a/Math.PI*180}const An={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Fn={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},Sn="AbortError";class Or extends Error{constructor(e=Sn){super(e instanceof Error?e.message:e),this.name=Sn,e instanceof Error&&e.stack&&(this.stack=e.stack)}}function gn(a){return a.name===Sn}const Je={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function ee(a){return Je.REGISTERED_PROTOCOLS[a.substring(0,a.indexOf("://"))]}const ne="global-dispatcher";class Ae extends Error{constructor(e,r,h,d){super(`AJAXError: ${r} (${e}): ${h}`),this.status=e,this.statusText=r,this.url=h,this.body=d}}const De=()=>_r(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Xe=function(a,e){if(/:\/\//.test(a.url)&&!/^https?:|^file:/.test(a.url)){const h=ee(a.url);if(h)return h(a,e);if(_r(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:a,targetMapId:ne},e)}if(!(/^file:/.test(r=a.url)||/^file:/.test(De())&&!/^\w+:/.test(r))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(h,d){return A(this,void 0,void 0,(function*(){const _=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,cache:h.cache,referrer:De(),signal:d.signal});let x,C;h.type!=="json"||_.headers.has("Accept")||_.headers.set("Accept","application/json");try{x=yield fetch(_)}catch(P){throw gn(P)?P:new Ae(0,P.message,h.url,new Blob)}if(!x.ok){const P=yield x.blob();throw new Ae(x.status,x.statusText,h.url,P)}C=h.type==="arrayBuffer"||h.type==="image"?x.arrayBuffer():h.type==="json"?x.json():x.text();const T=yield C;return d.signal.throwIfAborted(),{data:T,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}}))})(a,e);if(_r(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:a,mustQueue:!0,targetMapId:ne},e)}var r;return(function(h,d){return new Promise(((_,x)=>{var C;const T=new XMLHttpRequest;T.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(T.responseType="arraybuffer");for(const P in h.headers)T.setRequestHeader(P,h.headers[P]);h.type==="json"&&(T.responseType="text",!((C=h.headers)===null||C===void 0)&&C.Accept||T.setRequestHeader("Accept","application/json")),T.withCredentials=h.credentials==="include",T.onerror=()=>{x(new Error(T.statusText))},T.onload=()=>{if(!d.signal.aborted)if((T.status>=200&&T.status<300||T.status===0)&&T.response!==null){let P=T.response;if(h.type==="json")try{P=JSON.parse(T.response)}catch(Q){return void x(Q)}_({data:P,cacheControl:T.getResponseHeader("Cache-Control"),expires:T.getResponseHeader("Expires")})}else{const P=new Blob([T.response],{type:T.getResponseHeader("Content-Type")});x(new Ae(T.status,T.statusText,h.url,P))}},d.signal.addEventListener("abort",(()=>{T.abort(),x(new Or(d.signal.reason))})),T.send(h.body)}))})(a,e)};function At(a){if(!a||a.indexOf("://")<=0||a.indexOf("data:image/")===0||a.indexOf("blob:")===0)return!0;const e=new URL(a),r=window.location;return e.protocol===r.protocol&&e.host===r.host}function bt(a,e,r){r[a]&&r[a].indexOf(e)!==-1||(r[a]=r[a]||[],r[a].push(e))}function it(a,e,r){if(r&&r[a]){const h=r[a].indexOf(e);h!==-1&&r[a].splice(h,1)}}class dt{constructor(e,r={}){Pt(this,r),this.type=e}}class jt extends dt{constructor(e,r={}){super("error",Pt({error:e},r))}}class Bt{on(e,r){return this._listeners=this._listeners||{},bt(e,r,this._listeners),{unsubscribe:()=>{this.off(e,r)}}}off(e,r){return it(e,r,this._listeners),it(e,r,this._oneTimeListeners),this}once(e,r){return r?(this._oneTimeListeners=this._oneTimeListeners||{},bt(e,r,this._oneTimeListeners),this):new Promise((h=>this.once(e,h)))}fire(e,r){typeof e=="string"&&(e=new dt(e,r||{}));const h=e.type;if(this.listens(h)){e.target=this;const d=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const C of d)C.call(this,e);const _=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const C of _)it(h,C,this._oneTimeListeners),C.call(this,e);const x=this._eventedParent;x&&(Pt(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(e))}else e instanceof jt&&console.error(e.error);return this}listens(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}setEventedParent(e,r){return this._eventedParent=e,this._eventedParentData=r,this}}var Qe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number",length:2},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"filter"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},filter:{type:"boolean",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"expression_name",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}},interpolation:{type:"array",value:"interpolation_name",minimum:1},interpolation_name:{type:"enum",values:{linear:{syntax:{overloads:[{parameters:[],"output-type":"interpolation"}],parameters:[]}},exponential:{syntax:{overloads:[{parameters:["base"],"output-type":"interpolation"}],parameters:[{name:"base",type:"number literal"}]}},"cubic-bezier":{syntax:{overloads:[{parameters:["x1","y1","x2","y2"],"output-type":"interpolation"}],parameters:[{name:"x1",type:"number literal"},{name:"y1",type:"number literal"},{name:"x2",type:"number literal"},{name:"y2",type:"number literal"}]}}}}};const ur=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Xr(a,e){const r={};for(const h in a)h!=="ref"&&(r[h]=a[h]);return ur.forEach((h=>{h in e&&(r[h]=e[h])})),r}function Er(a,e){if(Array.isArray(a)){if(!Array.isArray(e)||a.length!==e.length)return!1;for(let r=0;r<a.length;r++)if(!Er(a[r],e[r]))return!1;return!0}if(typeof a=="object"&&a!==null&&e!==null){if(typeof e!="object"||Object.keys(a).length!==Object.keys(e).length)return!1;for(const r in a)if(!Er(a[r],e[r]))return!1;return!0}return a===e}function zr(a,e){a.push(e)}function Pr(a,e,r){zr(r,{command:"addSource",args:[a,e[a]]})}function dr(a,e,r){zr(e,{command:"removeSource",args:[a]}),r[a]=!0}function mi(a,e,r,h){dr(a,r,h),Pr(a,e,r)}function Kn(a,e,r){let h;for(h in a[r])if(Object.prototype.hasOwnProperty.call(a[r],h)&&h!=="data"&&!Er(a[r][h],e[r][h]))return!1;for(h in e[r])if(Object.prototype.hasOwnProperty.call(e[r],h)&&h!=="data"&&!Er(a[r][h],e[r][h]))return!1;return!0}function Jn(a,e,r,h,d,_){a=a||{},e=e||{};for(const x in a)Object.prototype.hasOwnProperty.call(a,x)&&(Er(a[x],e[x])||r.push({command:_,args:[h,x,e[x],d]}));for(const x in e)Object.prototype.hasOwnProperty.call(e,x)&&!Object.prototype.hasOwnProperty.call(a,x)&&(Er(a[x],e[x])||r.push({command:_,args:[h,x,e[x],d]}))}function wi(a){return a.id}function xn(a,e){return a[e.id]=e,a}class Wt{constructor(e,r,h,d){this.message=(e?`${e}: `:"")+h,d&&(this.identifier=d),r!=null&&r.__line__&&(this.line=r.__line__)}}function fn(a,...e){for(const r of e)for(const h in r)a[h]=r[h];return a}class li extends Error{constructor(e,r){super(r),this.message=r,this.key=e}}class xa{constructor(e,r=[]){this.parent=e,this.bindings={};for(const[h,d]of r)this.bindings[h]=d}concat(e){return new xa(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const Wn={kind:"null"},Jt={kind:"number"},kr={kind:"string"},qr={kind:"boolean"},Ji={kind:"color"},Ko={kind:"projectionDefinition"},os={kind:"object"},an={kind:"value"},To={kind:"collator"},ys={kind:"formatted"},so={kind:"padding"},_l={kind:"colorArray"},oo={kind:"numberArray"},Pi={kind:"resolvedImage"},xA={kind:"variableAnchorOffsetCollection"};function Ni(a,e){return{kind:"array",itemType:a,N:e}}function Zn(a){if(a.kind==="array"){const e=Zn(a.itemType);return typeof a.N=="number"?`array<${e}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${e}>`}return a.kind}const ks=[Wn,Jt,kr,qr,Ji,Ko,ys,os,Ni(an),so,oo,_l,Pi,xA];function Zo(a,e){if(e.kind==="error")return null;if(a.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Zo(a.itemType,e.itemType))&&(typeof a.N!="number"||a.N===e.N))return null}else{if(a.kind===e.kind)return null;if(a.kind==="value"){for(const r of ks)if(!Zo(r,e))return null}}return`Expected ${Zn(a)} but found ${Zn(e)} instead.`}function XA(a,e){return e.some((r=>r.kind===a.kind))}function Fo(a,e){return e.some((r=>r==="null"?a===null:r==="array"?Array.isArray(a):r==="object"?a&&!Array.isArray(a)&&typeof a=="object":r===typeof a))}function vl(a,e){return a.kind==="array"&&e.kind==="array"?a.itemType.kind===e.itemType.kind&&typeof a.N=="number":a.kind===e.kind}const ls=.96422,Hl=.82521,As=4/29,Qn=6/29,ea=3*Qn*Qn,Vl=Qn*Qn*Qn,bA=Math.PI/180,wA=180/Math.PI;function cs(a){return(a%=360)<0&&(a+=360),a}function Ia([a,e,r,h]){let d,_;const x=BA((.2225045*(a=la(a))+.7168786*(e=la(e))+.0606169*(r=la(r)))/1);a===e&&e===r?d=_=x:(d=BA((.4360747*a+.3850649*e+.1430804*r)/ls),_=BA((.0139322*a+.0971045*e+.7141733*r)/Hl));const C=116*x-16;return[C<0?0:C,500*(d-x),200*(x-_),h]}function la(a){return a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function BA(a){return a>Vl?Math.pow(a,1/3):a/ea+As}function gu([a,e,r,h]){let d=(a+16)/116,_=isNaN(e)?d:d+e/500,x=isNaN(r)?d:d-r/200;return d=1*us(d),_=ls*us(_),x=Hl*us(x),[WA(3.1338561*_-1.6168667*d-.4906146*x),WA(-.9787684*_+1.9161415*d+.033454*x),WA(.0719453*_-.2289914*d+1.4052427*x),h]}function WA(a){return(a=a<=.00304?12.92*a:1.055*Math.pow(a,1/2.4)-.055)<0?0:a>1?1:a}function us(a){return a>Qn?a*a*a:ea*(a-As)}const yu=Object.hasOwn||function(a,e){return Object.prototype.hasOwnProperty.call(a,e)};function CA(a,e){return yu(a,e)?a[e]:void 0}function lo(a){return parseInt(a.padEnd(2,a),16)/255}function YA(a,e){return SA(e?a/100:a,0,1)}function SA(a,e,r){return Math.min(Math.max(e,a),r)}function _u(a){return!a.some(Number.isNaN)}const Rc={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function _s(a,e,r){return a+r*(e-a)}function EA(a,e,r){return a.map(((h,d)=>_s(h,e[d],r)))}class cn{constructor(e,r,h,d=1,_=!0){this.r=e,this.g=r,this.b=h,this.a=d,_||(this.r*=d,this.g*=d,this.b*=d,d||this.overwriteGetter("rgb",[e,r,h,d]))}static parse(e){if(e instanceof cn)return e;if(typeof e!="string")return;const r=(function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];const d=CA(Rc,h);if(d){const[x,C,T]=d;return[x/255,C/255,T/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const x=h.length<6?1:2;let C=1;return[lo(h.slice(C,C+=x)),lo(h.slice(C,C+=x)),lo(h.slice(C,C+=x)),lo(h.slice(C,C+x)||"ff")]}if(h.startsWith("rgb")){const x=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[C,T,P,Q,k,K,X,re,ae,ue,ve,He]=x,me=[Q||" ",X||" ",ue].join("");if(me==="  "||me==="  /"||me===",,"||me===",,,"){const Ie=[P,K,ae].join(""),rt=Ie==="%%%"?100:Ie===""?255:0;if(rt){const ct=[SA(+T/rt,0,1),SA(+k/rt,0,1),SA(+re/rt,0,1),ve?YA(+ve,He):1];if(_u(ct))return ct}}return}}const _=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[x,C,T,P,Q,k,K,X,re]=_,ae=[T||" ",Q||" ",K].join("");if(ae==="  "||ae==="  /"||ae===",,"||ae===",,,"){const ue=[+C,SA(+P,0,100),SA(+k,0,100),X?YA(+X,re):1];if(_u(ue))return(function([ve,He,me,Ie]){function rt(ct){const Lt=(ct+ve/30)%12,qt=He*Math.min(me,1-me);return me-qt*Math.max(-1,Math.min(Lt-3,9-Lt,1))}return ve=cs(ve),He/=100,me/=100,[rt(0),rt(8),rt(4),Ie]})(ue)}}})(e);return r?new cn(...r,!1):void 0}get rgb(){const{r:e,g:r,b:h,a:d}=this,_=d||1/0;return this.overwriteGetter("rgb",[e/_,r/_,h/_,d])}get hcl(){return this.overwriteGetter("hcl",(function(e){const[r,h,d,_]=Ia(e),x=Math.sqrt(h*h+d*d);return[Math.round(1e4*x)?cs(Math.atan2(d,h)*wA):NaN,x,r,_]})(this.rgb))}get lab(){return this.overwriteGetter("lab",Ia(this.rgb))}overwriteGetter(e,r){return Object.defineProperty(this,e,{value:r}),r}toString(){const[e,r,h,d]=this.rgb;return`rgba(${[e,r,h].map((_=>Math.round(255*_))).join(",")},${d})`}static interpolate(e,r,h,d="rgb"){switch(d){case"rgb":{const[_,x,C,T]=EA(e.rgb,r.rgb,h);return new cn(_,x,C,T,!1)}case"hcl":{const[_,x,C,T]=e.hcl,[P,Q,k,K]=r.hcl;let X,re;if(isNaN(_)||isNaN(P))isNaN(_)?isNaN(P)?X=NaN:(X=P,C!==1&&C!==0||(re=Q)):(X=_,k!==1&&k!==0||(re=x));else{let me=P-_;P>_&&me>180?me-=360:P<_&&_-P>180&&(me+=360),X=_+h*me}const[ae,ue,ve,He]=(function([me,Ie,rt,ct]){return me=isNaN(me)?0:me*bA,gu([rt,Math.cos(me)*Ie,Math.sin(me)*Ie,ct])})([X,re??_s(x,Q,h),_s(C,k,h),_s(T,K,h)]);return new cn(ae,ue,ve,He,!1)}case"lab":{const[_,x,C,T]=gu(EA(e.lab,r.lab,h));return new cn(_,x,C,T,!1)}}}}cn.black=new cn(0,0,0,1),cn.white=new cn(1,1,1,1),cn.transparent=new cn(0,0,0,0),cn.red=new cn(1,0,0,1);class hs{constructor(e,r,h){this.sensitivity=e?r?"variant":"case":r?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,r){return this.collator.compare(e,r)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const TA=["bottom","center","top"];class FA{constructor(e,r,h,d,_,x){this.text=e,this.image=r,this.scale=h,this.fontStack=d,this.textColor=_,this.verticalAlign=x}}class La{constructor(e){this.sections=e}static fromString(e){return new La([new FA(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((e=>e.text.length!==0||e.image&&e.image.name.length!==0))}static factory(e){return e instanceof La?e:La.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map((e=>e.text)).join("")}}class Rr{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Rr)return e;if(typeof e=="number")return new Rr([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const r of e)if(typeof r!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]]}return new Rr(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,r,h){return new Rr(EA(e.values,r.values,h))}}class ja{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof ja)return e;if(typeof e=="number")return new ja([e]);if(Array.isArray(e)){for(const r of e)if(typeof r!="number")return;return new ja(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,r,h){return new ja(EA(e.values,r.values,h))}}class gi{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof gi)return e;if(typeof e=="string"){const h=cn.parse(e);return h?new gi([h]):void 0}if(!Array.isArray(e))return;const r=[];for(const h of e){if(typeof h!="string")return;const d=cn.parse(h);if(!d)return;r.push(d)}return new gi(r)}toString(){return JSON.stringify(this.values)}static interpolate(e,r,h,d="rgb"){const _=[];if(e.values.length!=r.values.length)throw new Error(`colorArray: Arrays have mismatched length (${e.values.length} vs. ${r.values.length}), cannot interpolate.`);for(let x=0;x<e.values.length;x++)_.push(cn.interpolate(e.values[x],r.values[x],h,d));return new gi(_)}}class Hr extends Error{constructor(e){super(e),this.name="RuntimeError"}toJSON(){return this.message}}const Za=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class jn{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof jn)return e;if(Array.isArray(e)&&!(e.length<1)&&e.length%2==0){for(let r=0;r<e.length;r+=2){const h=e[r],d=e[r+1];if(typeof h!="string"||!Za.has(h)||!Array.isArray(d)||d.length!==2||typeof d[0]!="number"||typeof d[1]!="number")return}return new jn(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,r,h){const d=e.values,_=r.values;if(d.length!==_.length)throw new Hr(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${r.toString()}`);const x=[];for(let C=0;C<d.length;C+=2){if(d[C]!==_[C])throw new Hr(`Cannot interpolate values containing mismatched anchors. from[${C}]: ${d[C]}, to[${C}]: ${_[C]}`);x.push(d[C]);const[T,P]=d[C+1],[Q,k]=_[C+1];x.push([_s(T,Q,h),_s(P,k,h)])}return new jn(x)}}class fs{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new fs({name:e,available:!1}):null}}class Ma{constructor(e,r,h){this.from=e,this.to=r,this.transition=h}static interpolate(e,r,h){return new Ma(e,r,h)}static parse(e){return e instanceof Ma?e:Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number"?new Ma(e[0],e[1],e[2]):typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number"?new Ma(e.from,e.to,e.transition):typeof e=="string"?new Ma(e,e,1):void 0}}function vs(a,e,r,h){return typeof a=="number"&&a>=0&&a<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof r=="number"&&r>=0&&r<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[a,e,r,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[a,e,r,h]:[a,e,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Os(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof Ma||a instanceof cn||a instanceof hs||a instanceof La||a instanceof Rr||a instanceof ja||a instanceof gi||a instanceof jn||a instanceof fs)return!0;if(Array.isArray(a)){for(const e of a)if(!Os(e))return!1;return!0}if(typeof a=="object"){for(const e in a)if(!Os(a[e]))return!1;return!0}return!1}function ri(a){if(a===null)return Wn;if(typeof a=="string")return kr;if(typeof a=="boolean")return qr;if(typeof a=="number")return Jt;if(a instanceof cn)return Ji;if(a instanceof Ma)return Ko;if(a instanceof hs)return To;if(a instanceof La)return ys;if(a instanceof Rr)return so;if(a instanceof ja)return oo;if(a instanceof gi)return _l;if(a instanceof jn)return xA;if(a instanceof fs)return Pi;if(Array.isArray(a)){const e=a.length;let r;for(const h of a){const d=ri(h);if(r){if(r===d)continue;r=an;break}r=d}return Ni(r||an,e)}return os}function IA(a){const e=typeof a;return a===null?"":e==="string"||e==="number"||e==="boolean"?String(a):a instanceof cn||a instanceof Ma||a instanceof La||a instanceof Rr||a instanceof ja||a instanceof gi||a instanceof jn||a instanceof fs?a.toString():JSON.stringify(a)}class Ua{constructor(e,r){this.type=e,this.value=r}static parse(e,r){if(e.length!==2)return r.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Os(e[1]))return r.error("invalid value");const h=e[1];let d=ri(h);const _=r.expectedType;return d.kind!=="array"||d.N!==0||!_||_.kind!=="array"||typeof _.N=="number"&&_.N!==0||(d=_),new Ua(d,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Xo={string:kr,number:Jt,boolean:qr,object:os};class xs{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");let h,d=1;const _=e[0];if(_==="array"){let C,T;if(e.length>2){const P=e[1];if(typeof P!="string"||!(P in Xo)||P==="object")return r.error('The item type argument of "array" must be one of string, number, boolean',1);C=Xo[P],d++}else C=an;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return r.error('The length argument to "array" must be a positive integer literal',2);T=e[2],d++}h=Ni(C,T)}else{if(!Xo[_])throw new Error(`Types doesn't contain name = ${_}`);h=Xo[_]}const x=[];for(;d<e.length;d++){const C=r.parse(e[d],d,an);if(!C)return null;x.push(C)}return new xs(h,x)}evaluate(e){for(let r=0;r<this.args.length;r++){const h=this.args[r].evaluate(e);if(!Zo(this.type,ri(h)))return h;if(r===this.args.length-1)throw new Hr(`Expected value to be of type ${Zn(this.type)}, but found ${Zn(ri(h))} instead.`)}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}const Aa={"to-boolean":qr,"to-color":Ji,"to-number":Jt,"to-string":kr};class ca{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");const h=e[0];if(!Aa[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&e.length!==2)return r.error("Expected one argument.");const d=Aa[h],_=[];for(let x=1;x<e.length;x++){const C=r.parse(e[x],x,an);if(!C)return null;_.push(C)}return new ca(d,_)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let r,h;for(const d of this.args){if(r=d.evaluate(e),h=null,r instanceof cn)return r;if(typeof r=="string"){const _=e.parseColor(r);if(_)return _}else if(Array.isArray(r)&&(h=r.length<3||r.length>4?`Invalid rgba value ${JSON.stringify(r)}: expected an array containing either three or four numeric values.`:vs(r[0],r[1],r[2],r[3]),!h))return new cn(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new Hr(h||`Could not parse color from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"padding":{let r;for(const h of this.args){r=h.evaluate(e);const d=Rr.parse(r);if(d)return d}throw new Hr(`Could not parse padding from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"numberArray":{let r;for(const h of this.args){r=h.evaluate(e);const d=ja.parse(r);if(d)return d}throw new Hr(`Could not parse numberArray from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"colorArray":{let r;for(const h of this.args){r=h.evaluate(e);const d=gi.parse(r);if(d)return d}throw new Hr(`Could not parse colorArray from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"variableAnchorOffsetCollection":{let r;for(const h of this.args){r=h.evaluate(e);const d=jn.parse(r);if(d)return d}throw new Hr(`Could not parse variableAnchorOffsetCollection from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"number":{let r=null;for(const h of this.args){if(r=h.evaluate(e),r===null)return 0;const d=Number(r);if(!isNaN(d))return d}throw new Hr(`Could not convert ${JSON.stringify(r)} to number.`)}case"formatted":return La.fromString(IA(this.args[0].evaluate(e)));case"resolvedImage":return fs.fromString(IA(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return IA(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}const Io=["Unknown","Point","LineString","Polygon"];class xl{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Io[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let r=this._parseColorCache.get(e);return r||(r=cn.parse(e),this._parseColorCache.set(e,r)),r}}class Gl{constructor(e,r,h=[],d,_=new xa,x=[]){this.registry=e,this.path=h,this.key=h.map((C=>`[${C}]`)).join(""),this.scope=_,this.errors=x,this.expectedType=d,this._isConstant=r}parse(e,r,h,d,_={}){return r?this.concat(r,h,d)._parse(e,_):this._parse(e,_)}_parse(e,r){function h(d,_,x){return x==="assert"?new xs(_,[d]):x==="coerce"?new ca(_,[d]):d}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const d=e[0];if(typeof d!="string")return this.error(`Expression name must be a string, but found ${typeof d} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const _=this.registry[d];if(_){let x=_.parse(e,this);if(!x)return null;if(this.expectedType){const C=this.expectedType,T=x.type;if(C.kind!=="string"&&C.kind!=="number"&&C.kind!=="boolean"&&C.kind!=="object"&&C.kind!=="array"||T.kind!=="value"){if(C.kind==="projectionDefinition"&&["string","array"].includes(T.kind)||["color","formatted","resolvedImage"].includes(C.kind)&&["value","string"].includes(T.kind)||["padding","numberArray"].includes(C.kind)&&["value","number","array"].includes(T.kind)||C.kind==="colorArray"&&["value","string","array"].includes(T.kind)||C.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(T.kind))x=h(x,C,r.typeAnnotation||"coerce");else if(this.checkSubtype(C,T))return null}else x=h(x,C,r.typeAnnotation||"assert")}if(!(x instanceof Ua)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const C=new xl;try{x=new Ua(x.type,x.evaluate(C))}catch(T){return this.error(T.message),null}}return x}return this.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,r,h){const d=typeof e=="number"?this.path.concat(e):this.path,_=h?this.scope.concat(h):this.scope;return new Gl(this.registry,this._isConstant,d,r||null,_,this.errors)}error(e,...r){const h=`${this.key}${r.map((d=>`[${d}]`)).join("")}`;this.errors.push(new li(h,e))}checkSubtype(e,r){const h=Zo(e,r);return h&&this.error(h),h}}class Lo{constructor(e,r){this.type=r.type,this.bindings=[].concat(e),this.result=r}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const r of this.bindings)e(r[1]);e(this.result)}static parse(e,r){if(e.length<4)return r.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const h=[];for(let _=1;_<e.length-1;_+=2){const x=e[_];if(typeof x!="string")return r.error(`Expected string, but found ${typeof x} instead.`,_);if(/[^a-zA-Z0-9_]/.test(x))return r.error("Variable names must contain only alphanumeric characters or '_'.",_);const C=r.parse(e[_+1],_+1);if(!C)return null;h.push([x,C])}const d=r.parse(e[e.length-1],e.length-1,r.expectedType,h);return d?new Lo(h,d):null}outputDefined(){return this.result.outputDefined()}}class Xn{constructor(e,r){this.type=r.type,this.name=e,this.boundExpression=r}static parse(e,r){if(e.length!==2||typeof e[1]!="string")return r.error("'var' expression requires exactly one string literal argument.");const h=e[1];return r.scope.has(h)?new Xn(h,r.scope.get(h)):r.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class Mo{constructor(e,r,h){this.type=e,this.index=r,this.input=h}static parse(e,r){if(e.length!==3)return r.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const h=r.parse(e[1],1,Jt),d=r.parse(e[2],2,Ni(r.expectedType||an));return h&&d?new Mo(d.type.itemType,h,d):null}evaluate(e){const r=this.index.evaluate(e),h=this.input.evaluate(e);if(r<0)throw new Hr(`Array index out of bounds: ${r} < 0.`);if(r>=h.length)throw new Hr(`Array index out of bounds: ${r} > ${h.length-1}.`);if(r!==Math.floor(r))throw new Hr(`Array index must be an integer, but found ${r} instead.`);return h[r]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class In{constructor(e,r){this.type=qr,this.needle=e,this.haystack=r}static parse(e,r){if(e.length!==3)return r.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const h=r.parse(e[1],1,an),d=r.parse(e[2],2,an);return h&&d?XA(h.type,[qr,kr,Jt,Wn,an])?new In(h,d):r.error(`Expected first argument to be of type boolean, string, number or null, but found ${Zn(h.type)} instead`):null}evaluate(e){const r=this.needle.evaluate(e),h=this.haystack.evaluate(e);if(!h)return!1;if(!Fo(r,["boolean","string","number","null"]))throw new Hr(`Expected first argument to be of type boolean, string, number or null, but found ${Zn(ri(r))} instead.`);if(!Fo(h,["string","array"]))throw new Hr(`Expected second argument to be of type array or string, but found ${Zn(ri(h))} instead.`);return h.indexOf(r)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class pn{constructor(e,r,h){this.type=Jt,this.needle=e,this.haystack=r,this.fromIndex=h}static parse(e,r){if(e.length<=2||e.length>=5)return r.error(`Expected 2 or 3 arguments, but found ${e.length-1} instead.`);const h=r.parse(e[1],1,an),d=r.parse(e[2],2,an);if(!h||!d)return null;if(!XA(h.type,[qr,kr,Jt,Wn,an]))return r.error(`Expected first argument to be of type boolean, string, number or null, but found ${Zn(h.type)} instead`);if(e.length===4){const _=r.parse(e[3],3,Jt);return _?new pn(h,d,_):null}return new pn(h,d)}evaluate(e){const r=this.needle.evaluate(e),h=this.haystack.evaluate(e);if(!Fo(r,["boolean","string","number","null"]))throw new Hr(`Expected first argument to be of type boolean, string, number or null, but found ${Zn(ri(r))} instead.`);let d;if(this.fromIndex&&(d=this.fromIndex.evaluate(e)),Fo(h,["string"])){const _=h.indexOf(r,d);return _===-1?-1:[...h.slice(0,_)].length}if(Fo(h,["array"]))return h.indexOf(r,d);throw new Hr(`Expected second argument to be of type array or string, but found ${Zn(ri(h))} instead.`)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class Uo{constructor(e,r,h,d,_,x){this.inputType=e,this.type=r,this.input=h,this.cases=d,this.outputs=_,this.otherwise=x}static parse(e,r){if(e.length<5)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return r.error("Expected an even number of arguments.");let h,d;r.expectedType&&r.expectedType.kind!=="value"&&(d=r.expectedType);const _={},x=[];for(let P=2;P<e.length-1;P+=2){let Q=e[P];const k=e[P+1];Array.isArray(Q)||(Q=[Q]);const K=r.concat(P);if(Q.length===0)return K.error("Expected at least one branch label.");for(const re of Q){if(typeof re!="number"&&typeof re!="string")return K.error("Branch labels must be numbers or strings.");if(typeof re=="number"&&Math.abs(re)>Number.MAX_SAFE_INTEGER)return K.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof re=="number"&&Math.floor(re)!==re)return K.error("Numeric branch labels must be integer values.");if(h){if(K.checkSubtype(h,ri(re)))return null}else h=ri(re);if(_[String(re)]!==void 0)return K.error("Branch labels must be unique.");_[String(re)]=x.length}const X=r.parse(k,P,d);if(!X)return null;d=d||X.type,x.push(X)}const C=r.parse(e[1],1,an);if(!C)return null;const T=r.parse(e[e.length-1],e.length-1,d);return T?C.type.kind!=="value"&&r.concat(1).checkSubtype(h,C.type)?null:new Uo(h,d,C,_,x,T):null}evaluate(e){const r=this.input.evaluate(e);return(ri(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))&&this.otherwise.outputDefined()}}class En{constructor(e,r,h){this.type=e,this.branches=r,this.otherwise=h}static parse(e,r){if(e.length<4)return r.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return r.error("Expected an odd number of arguments.");let h;r.expectedType&&r.expectedType.kind!=="value"&&(h=r.expectedType);const d=[];for(let x=1;x<e.length-1;x+=2){const C=r.parse(e[x],x,qr);if(!C)return null;const T=r.parse(e[x+1],x+1,h);if(!T)return null;d.push([C,T]),h=h||T.type}const _=r.parse(e[e.length-1],e.length-1,h);if(!_)return null;if(!h)throw new Error("Can't infer output type");return new En(h,d,_)}evaluate(e){for(const[r,h]of this.branches)if(r.evaluate(e))return h.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[r,h]of this.branches)e(r),e(h);e(this.otherwise)}outputDefined(){return this.branches.every((([e,r])=>r.outputDefined()))&&this.otherwise.outputDefined()}}class LA{constructor(e,r,h,d){this.type=e,this.input=r,this.beginIndex=h,this.endIndex=d}static parse(e,r){if(e.length<=2||e.length>=5)return r.error(`Expected 2 or 3 arguments, but found ${e.length-1} instead.`);const h=r.parse(e[1],1,an),d=r.parse(e[2],2,Jt);if(!h||!d)return null;if(!XA(h.type,[Ni(an),kr,an]))return r.error(`Expected first argument to be of type array or string, but found ${Zn(h.type)} instead`);if(e.length===4){const _=r.parse(e[3],3,Jt);return _?new LA(h.type,h,d,_):null}return new LA(h.type,h,d)}evaluate(e){const r=this.input.evaluate(e),h=this.beginIndex.evaluate(e);let d;if(this.endIndex&&(d=this.endIndex.evaluate(e)),Fo(r,["string"]))return[...r].slice(h,d).join("");if(Fo(r,["array"]))return r.slice(h,d);throw new Hr(`Expected first argument to be of type array or string, but found ${Zn(ri(r))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function Da(a,e){const r=a.length-1;let h,d,_=0,x=r,C=0;for(;_<=x;)if(C=Math.floor((_+x)/2),h=a[C],d=a[C+1],h<=e){if(C===r||e<d)return C;_=C+1}else{if(!(h>e))throw new Hr("Input is not a number.");x=C-1}return 0}class ql{constructor(e,r,h){this.type=e,this.input=r,this.labels=[],this.outputs=[];for(const[d,_]of h)this.labels.push(d),this.outputs.push(_)}static parse(e,r){if(e.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");const h=r.parse(e[1],1,Jt);if(!h)return null;const d=[];let _=null;r.expectedType&&r.expectedType.kind!=="value"&&(_=r.expectedType);for(let x=1;x<e.length;x+=2){const C=x===1?-1/0:e[x],T=e[x+1],P=x,Q=x+1;if(typeof C!="number")return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',P);if(d.length&&d[d.length-1][0]>=C)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',P);const k=r.parse(T,Q,_);if(!k)return null;_=_||k.type,d.push([C,k])}return new ql(_,h,d)}evaluate(e){const r=this.labels,h=this.outputs;if(r.length===1)return h[0].evaluate(e);const d=this.input.evaluate(e);if(d<=r[0])return h[0].evaluate(e);const _=r.length;return d>=r[_-1]?h[_-1].evaluate(e):h[Da(r,d)].evaluate(e)}eachChild(e){e(this.input);for(const r of this.outputs)e(r)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}}function V(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var he,qe,pt=(function(){if(qe)return he;function a(e,r,h,d){this.cx=3*e,this.bx=3*(h-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(d-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=r,this.p2x=h,this.p2y=d}return qe=1,he=a,a.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,r){if(r===void 0&&(r=1e-6),e<0)return 0;if(e>1)return 1;for(var h=e,d=0;d<8;d++){var _=this.sampleCurveX(h)-e;if(Math.abs(_)<r)return h;var x=this.sampleCurveDerivativeX(h);if(Math.abs(x)<1e-6)break;h-=_/x}var C=0,T=1;for(h=e,d=0;d<20&&(_=this.sampleCurveX(h),!(Math.abs(_-e)<r));d++)e>_?C=h:T=h,h=.5*(T-C)+C;return h},solve:function(e,r){return this.sampleCurveY(this.solveCurveX(e,r))}},he})(),St=V(pt);class Kt{constructor(e,r,h,d,_){this.type=e,this.operator=r,this.interpolation=h,this.input=d,this.labels=[],this.outputs=[];for(const[x,C]of _)this.labels.push(x),this.outputs.push(C)}static interpolationFactor(e,r,h,d){let _=0;if(e.name==="exponential")_=or(r,e.base,h,d);else if(e.name==="linear")_=or(r,1,h,d);else if(e.name==="cubic-bezier"){const x=e.controlPoints;_=new St(x[0],x[1],x[2],x[3]).solve(or(r,1,h,d))}return _}static parse(e,r){let[h,d,_,...x]=e;if(!Array.isArray(d)||d.length===0)return r.error("Expected an interpolation type expression.",1);if(d[0]==="linear")d={name:"linear"};else if(d[0]==="exponential"){const P=d[1];if(typeof P!="number")return r.error("Exponential interpolation requires a numeric base.",1,1);d={name:"exponential",base:P}}else{if(d[0]!=="cubic-bezier")return r.error(`Unknown interpolation type ${String(d[0])}`,1,0);{const P=d.slice(1);if(P.length!==4||P.some((Q=>typeof Q!="number"||Q<0||Q>1)))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);d={name:"cubic-bezier",controlPoints:P}}}if(e.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return r.error("Expected an even number of arguments.");if(_=r.parse(_,2,Jt),!_)return null;const C=[];let T=null;h!=="interpolate-hcl"&&h!=="interpolate-lab"||r.expectedType==_l?r.expectedType&&r.expectedType.kind!=="value"&&(T=r.expectedType):T=Ji;for(let P=0;P<x.length;P+=2){const Q=x[P],k=x[P+1],K=P+3,X=P+4;if(typeof Q!="number")return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',K);if(C.length&&C[C.length-1][0]>=Q)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',K);const re=r.parse(k,X,T);if(!re)return null;T=T||re.type,C.push([Q,re])}return vl(T,Jt)||vl(T,Ko)||vl(T,Ji)||vl(T,so)||vl(T,oo)||vl(T,_l)||vl(T,xA)||vl(T,Ni(Jt))?new Kt(T,h,d,_,C):r.error(`Type ${Zn(T)} is not interpolatable.`)}evaluate(e){const r=this.labels,h=this.outputs;if(r.length===1)return h[0].evaluate(e);const d=this.input.evaluate(e);if(d<=r[0])return h[0].evaluate(e);const _=r.length;if(d>=r[_-1])return h[_-1].evaluate(e);const x=Da(r,d),C=Kt.interpolationFactor(this.interpolation,d,r[x],r[x+1]),T=h[x].evaluate(e),P=h[x+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return _s(T,P,C);case"color":return cn.interpolate(T,P,C);case"padding":return Rr.interpolate(T,P,C);case"colorArray":return gi.interpolate(T,P,C);case"numberArray":return ja.interpolate(T,P,C);case"variableAnchorOffsetCollection":return jn.interpolate(T,P,C);case"array":return EA(T,P,C);case"projectionDefinition":return Ma.interpolate(T,P,C)}case"interpolate-hcl":switch(this.type.kind){case"color":return cn.interpolate(T,P,C,"hcl");case"colorArray":return gi.interpolate(T,P,C,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return cn.interpolate(T,P,C,"lab");case"colorArray":return gi.interpolate(T,P,C,"lab")}}}eachChild(e){e(this.input);for(const r of this.outputs)e(r)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}}function or(a,e,r,h){const d=h-r,_=a-r;return d===0?0:e===1?_/d:(Math.pow(e,_)-1)/(Math.pow(e,d)-1)}const wr={color:cn.interpolate,number:_s,padding:Rr.interpolate,numberArray:ja.interpolate,colorArray:gi.interpolate,variableAnchorOffsetCollection:jn.interpolate,array:EA};class Br{constructor(e,r){this.type=e,this.args=r}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");let h=null;const d=r.expectedType;d&&d.kind!=="value"&&(h=d);const _=[];for(const C of e.slice(1)){const T=r.parse(C,1+_.length,h,void 0,{typeAnnotation:"omit"});if(!T)return null;h=h||T.type,_.push(T)}if(!h)throw new Error("No output type");const x=d&&_.some((C=>Zo(d,C.type)));return new Br(x?an:h,_)}evaluate(e){let r,h=null,d=0;for(const _ of this.args)if(d++,h=_.evaluate(e),h&&h instanceof fs&&!h.available&&(r||(r=h.name),h=null,d===this.args.length&&(h=r)),h!==null)break;return h}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}function un(a,e){return a==="=="||a==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function Tn(a,e,r,h){return h.compare(e,r)===0}function Mn(a,e,r){const h=a!=="=="&&a!=="!=";return class RB{constructor(_,x,C){this.type=qr,this.lhs=_,this.rhs=x,this.collator=C,this.hasUntypedArgument=_.type.kind==="value"||x.type.kind==="value"}static parse(_,x){if(_.length!==3&&_.length!==4)return x.error("Expected two or three arguments.");const C=_[0];let T=x.parse(_[1],1,an);if(!T)return null;if(!un(C,T.type))return x.concat(1).error(`"${C}" comparisons are not supported for type '${Zn(T.type)}'.`);let P=x.parse(_[2],2,an);if(!P)return null;if(!un(C,P.type))return x.concat(2).error(`"${C}" comparisons are not supported for type '${Zn(P.type)}'.`);if(T.type.kind!==P.type.kind&&T.type.kind!=="value"&&P.type.kind!=="value")return x.error(`Cannot compare types '${Zn(T.type)}' and '${Zn(P.type)}'.`);h&&(T.type.kind==="value"&&P.type.kind!=="value"?T=new xs(P.type,[T]):T.type.kind!=="value"&&P.type.kind==="value"&&(P=new xs(T.type,[P])));let Q=null;if(_.length===4){if(T.type.kind!=="string"&&P.type.kind!=="string"&&T.type.kind!=="value"&&P.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(Q=x.parse(_[3],3,To),!Q)return null}return new RB(T,P,Q)}evaluate(_){const x=this.lhs.evaluate(_),C=this.rhs.evaluate(_);if(h&&this.hasUntypedArgument){const T=ri(x),P=ri(C);if(T.kind!==P.kind||T.kind!=="string"&&T.kind!=="number")throw new Hr(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${T.kind}, ${P.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const T=ri(x),P=ri(C);if(T.kind!=="string"||P.kind!=="string")return e(_,x,C)}return this.collator?r(_,x,C,this.collator.evaluate(_)):e(_,x,C)}eachChild(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)}outputDefined(){return!0}}}const Nn=Mn("==",(function(a,e,r){return e===r}),Tn),ua=Mn("!=",(function(a,e,r){return e!==r}),(function(a,e,r,h){return!Tn(0,e,r,h)})),Ci=Mn("<",(function(a,e,r){return e<r}),(function(a,e,r,h){return h.compare(e,r)<0})),Pa=Mn(">",(function(a,e,r){return e>r}),(function(a,e,r,h){return h.compare(e,r)>0})),Na=Mn("<=",(function(a,e,r){return e<=r}),(function(a,e,r,h){return h.compare(e,r)<=0})),ha=Mn(">=",(function(a,e,r){return e>=r}),(function(a,e,r,h){return h.compare(e,r)>=0}));class zs{constructor(e,r,h){this.type=To,this.locale=h,this.caseSensitive=e,this.diacriticSensitive=r}static parse(e,r){if(e.length!==2)return r.error("Expected one argument.");const h=e[1];if(typeof h!="object"||Array.isArray(h))return r.error("Collator options argument must be an object.");const d=r.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,qr);if(!d)return null;const _=r.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,qr);if(!_)return null;let x=null;return h.locale&&(x=r.parse(h.locale,1,kr),!x)?null:new zs(d,_,x)}evaluate(e){return new hs(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class js{constructor(e,r,h,d,_){this.type=kr,this.number=e,this.locale=r,this.currency=h,this.minFractionDigits=d,this.maxFractionDigits=_}static parse(e,r){if(e.length!==3)return r.error("Expected two arguments.");const h=r.parse(e[1],1,Jt);if(!h)return null;const d=e[2];if(typeof d!="object"||Array.isArray(d))return r.error("NumberFormat options argument must be an object.");let _=null;if(d.locale&&(_=r.parse(d.locale,1,kr),!_))return null;let x=null;if(d.currency&&(x=r.parse(d.currency,1,kr),!x))return null;let C=null;if(d["min-fraction-digits"]&&(C=r.parse(d["min-fraction-digits"],1,Jt),!C))return null;let T=null;return d["max-fraction-digits"]&&(T=r.parse(d["max-fraction-digits"],1,Jt),!T)?null:new js(h,_,x,C,T)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class Wo{constructor(e){this.type=ys,this.sections=e}static parse(e,r){if(e.length<2)return r.error("Expected at least one argument.");const h=e[1];if(!Array.isArray(h)&&typeof h=="object")return r.error("First argument must be an image or text section.");const d=[];let _=!1;for(let x=1;x<=e.length-1;++x){const C=e[x];if(_&&typeof C=="object"&&!Array.isArray(C)){_=!1;let T=null;if(C["font-scale"]&&(T=r.parse(C["font-scale"],1,Jt),!T))return null;let P=null;if(C["text-font"]&&(P=r.parse(C["text-font"],1,Ni(kr)),!P))return null;let Q=null;if(C["text-color"]&&(Q=r.parse(C["text-color"],1,Ji),!Q))return null;let k=null;if(C["vertical-align"]){if(typeof C["vertical-align"]=="string"&&!TA.includes(C["vertical-align"]))return r.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${C["vertical-align"]}' instead.`);if(k=r.parse(C["vertical-align"],1,kr),!k)return null}const K=d[d.length-1];K.scale=T,K.font=P,K.textColor=Q,K.verticalAlign=k}else{const T=r.parse(e[x],1,an);if(!T)return null;const P=T.type.kind;if(P!=="string"&&P!=="value"&&P!=="null"&&P!=="resolvedImage")return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,d.push({content:T,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Wo(d)}evaluate(e){return new La(this.sections.map((r=>{const h=r.content.evaluate(e);return ri(h)===Pi?new FA("",h,null,null,null,r.verticalAlign?r.verticalAlign.evaluate(e):null):new FA(IA(h),null,r.scale?r.scale.evaluate(e):null,r.font?r.font.evaluate(e).join(","):null,r.textColor?r.textColor.evaluate(e):null,r.verticalAlign?r.verticalAlign.evaluate(e):null)})))}eachChild(e){for(const r of this.sections)e(r.content),r.scale&&e(r.scale),r.font&&e(r.font),r.textColor&&e(r.textColor),r.verticalAlign&&e(r.verticalAlign)}outputDefined(){return!1}}class $A{constructor(e){this.type=Pi,this.input=e}static parse(e,r){if(e.length!==2)return r.error("Expected two arguments.");const h=r.parse(e[1],1,kr);return h?new $A(h):r.error("No image name provided.")}evaluate(e){const r=this.input.evaluate(e),h=fs.fromString(r);return h&&e.availableImages&&(h.available=e.availableImages.indexOf(r)>-1),h}eachChild(e){e(this.input)}outputDefined(){return!1}}class bl{constructor(e){this.type=Jt,this.input=e}static parse(e,r){if(e.length!==2)return r.error(`Expected 1 argument, but found ${e.length-1} instead.`);const h=r.parse(e[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?r.error(`Expected argument of type string or array, but found ${Zn(h.type)} instead.`):new bl(h):null}evaluate(e){const r=this.input.evaluate(e);if(typeof r=="string")return[...r].length;if(Array.isArray(r))return r.length;throw new Hr(`Expected value to be of type string or array, but found ${Zn(ri(r))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const fa=8192;function ba(a,e){const r=(180+a[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,d=Math.pow(2,e.z);return[Math.round(r*d*fa),Math.round(h*d*fa)]}function Kl(a,e){const r=Math.pow(2,e.z);return[(d=(a[0]/fa+e.x)/r,360*d-180),(h=(a[1]/fa+e.y)/r,360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90)];var h,d}function bs(a,e){a[0]=Math.min(a[0],e[0]),a[1]=Math.min(a[1],e[1]),a[2]=Math.max(a[2],e[0]),a[3]=Math.max(a[3],e[1])}function da(a,e){return!(a[0]<=e[0]||a[2]>=e[2]||a[1]<=e[1]||a[3]>=e[3])}function Zl(a,e,r){const h=a[0]-e[0],d=a[1]-e[1],_=a[0]-r[0],x=a[1]-r[1];return h*x-_*d==0&&h*_<=0&&d*x<=0}function wl(a,e,r,h){return(d=[h[0]-r[0],h[1]-r[1]])[0]*(_=[e[0]-a[0],e[1]-a[1]])[1]-d[1]*_[0]!=0&&!(!_c(a,e,r,h)||!_c(r,h,a,e));var d,_}function Qc(a,e,r){for(const h of r)for(let d=0;d<h.length-1;++d)if(wl(a,e,h[d],h[d+1]))return!0;return!1}function Hs(a,e,r=!1){let h=!1;for(const C of e)for(let T=0;T<C.length-1;T++){if(Zl(a,C[T],C[T+1]))return r;(_=C[T])[1]>(d=a)[1]!=(x=C[T+1])[1]>d[1]&&d[0]<(x[0]-_[0])*(d[1]-_[1])/(x[1]-_[1])+_[0]&&(h=!h)}var d,_,x;return h}function Vs(a,e){for(const r of e)if(Hs(a,r))return!0;return!1}function Do(a,e){for(const r of a)if(!Hs(r,e))return!1;for(let r=0;r<a.length-1;++r)if(Qc(a[r],a[r+1],e))return!1;return!0}function kc(a,e){for(const r of e)if(Do(a,r))return!0;return!1}function _c(a,e,r,h){const d=h[0]-r[0],_=h[1]-r[1],x=(a[0]-r[0])*_-d*(a[1]-r[1]),C=(e[0]-r[0])*_-d*(e[1]-r[1]);return x>0&&C<0||x<0&&C>0}function ws(a,e,r){const h=[];for(let d=0;d<a.length;d++){const _=[];for(let x=0;x<a[d].length;x++){const C=ba(a[d][x],r);bs(e,C),_.push(C)}h.push(_)}return h}function Yo(a,e,r){const h=[];for(let d=0;d<a.length;d++){const _=ws(a[d],e,r);h.push(_)}return h}function Bl(a,e,r,h){if(a[0]<r[0]||a[0]>r[2]){const d=.5*h;let _=a[0]-r[0]>d?-h:r[0]-a[0]>d?h:0;_===0&&(_=a[0]-r[2]>d?-h:r[2]-a[0]>d?h:0),a[0]+=_}bs(e,a)}function Oc(a,e,r,h){const d=Math.pow(2,h.z)*fa,_=[h.x*fa,h.y*fa],x=[];for(const C of a)for(const T of C){const P=[T.x+_[0],T.y+_[1]];Bl(P,e,r,d),x.push(P)}return x}function $o(a,e,r,h){const d=Math.pow(2,h.z)*fa,_=[h.x*fa,h.y*fa],x=[];for(const T of a){const P=[];for(const Q of T){const k=[Q.x+_[0],Q.y+_[1]];bs(e,k),P.push(k)}x.push(P)}if(e[2]-e[0]<=d/2){(C=e)[0]=C[1]=1/0,C[2]=C[3]=-1/0;for(const T of x)for(const P of T)Bl(P,e,r,d)}var C;return x}class Ao{constructor(e,r){this.type=qr,this.geojson=e,this.geometries=r}static parse(e,r){if(e.length!==2)return r.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Os(e[1])){const h=e[1];if(h.type==="FeatureCollection"){const d=[];for(const _ of h.features){const{type:x,coordinates:C}=_.geometry;x==="Polygon"&&d.push(C),x==="MultiPolygon"&&d.push(...C)}if(d.length)return new Ao(h,{type:"MultiPolygon",coordinates:d})}else if(h.type==="Feature"){const d=h.geometry.type;if(d==="Polygon"||d==="MultiPolygon")return new Ao(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new Ao(h,h)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return(function(r,h){const d=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=r.canonicalID();if(h.type==="Polygon"){const C=ws(h.coordinates,_,x),T=Oc(r.geometry(),d,_,x);if(!da(d,_))return!1;for(const P of T)if(!Hs(P,C))return!1}if(h.type==="MultiPolygon"){const C=Yo(h.coordinates,_,x),T=Oc(r.geometry(),d,_,x);if(!da(d,_))return!1;for(const P of T)if(!Vs(P,C))return!1}return!0})(e,this.geometries);if(e.geometryType()==="LineString")return(function(r,h){const d=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=r.canonicalID();if(h.type==="Polygon"){const C=ws(h.coordinates,_,x),T=$o(r.geometry(),d,_,x);if(!da(d,_))return!1;for(const P of T)if(!Do(P,C))return!1}if(h.type==="MultiPolygon"){const C=Yo(h.coordinates,_,x),T=$o(r.geometry(),d,_,x);if(!da(d,_))return!1;for(const P of T)if(!kc(P,C))return!1}return!0})(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Gs=class{constructor(a=[],e=(r,h)=>r<h?-1:r>h?1:0){if(this.data=a,this.length=this.data.length,this.compare=e,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(a){this.data.push(a),this._up(this.length++)}pop(){if(this.length===0)return;const a=this.data[0],e=this.data.pop();return--this.length>0&&(this.data[0]=e,this._down(0)),a}peek(){return this.data[0]}_up(a){const{data:e,compare:r}=this,h=e[a];for(;a>0;){const d=a-1>>1,_=e[d];if(r(h,_)>=0)break;e[a]=_,a=d}e[a]=h}_down(a){const{data:e,compare:r}=this,h=this.length>>1,d=e[a];for(;a<h;){let _=1+(a<<1);const x=_+1;if(x<this.length&&r(e[x],e[_])<0&&(_=x),r(e[_],d)>=0)break;e[a]=e[_],a=_}e[a]=d}};function Bs(a,e,r=0,h=a.length-1,d=Cl){for(;h>r;){if(h-r>600){const T=h-r+1,P=e-r+1,Q=Math.log(T),k=.5*Math.exp(2*Q/3),K=.5*Math.sqrt(Q*k*(T-k)/T)*(P-T/2<0?-1:1);Bs(a,e,Math.max(r,Math.floor(e-P*k/T+K)),Math.min(h,Math.floor(e+(T-P)*k/T+K)),d)}const _=a[e];let x=r,C=h;for(qs(a,r,e),d(a[h],_)>0&&qs(a,r,h);x<C;){for(qs(a,x,C),x++,C--;d(a[x],_)<0;)x++;for(;d(a[C],_)>0;)C--}d(a[r],_)===0?qs(a,r,C):(C++,qs(a,C,h)),C<=e&&(r=C+1),e<=C&&(h=C-1)}}function qs(a,e,r){const h=a[e];a[e]=a[r],a[r]=h}function Cl(a,e){return a<e?-1:a>e?1:0}function Po(a,e){if(a.length<=1)return[a];const r=[];let h,d;for(const _ of a){const x=jc(_);x!==0&&(_.area=Math.abs(x),d===void 0&&(d=x<0),d===x<0?(h&&r.push(h),h=[_]):h.push(_))}if(h&&r.push(h),e>1)for(let _=0;_<r.length;_++)r[_].length<=e||(Bs(r[_],e,1,r[_].length-1,zc),r[_]=r[_].slice(0,e));return r}function zc(a,e){return e.area-a.area}function jc(a){let e=0;for(let r,h,d=0,_=a.length,x=_-1;d<_;x=d++)r=a[d],h=a[x],e+=(h.x-r.x)*(r.y+h.y);return e}const pa=1/298.257223563,vu=pa*(2-pa),co=Math.PI/180;class Jo{constructor(e){const r=6378.137*co*1e3,h=Math.cos(e*co),d=1/(1-vu*(1-h*h)),_=Math.sqrt(d);this.kx=r*_*h,this.ky=r*_*d*(1-vu)}distance(e,r){const h=this.wrap(e[0]-r[0])*this.kx,d=(e[1]-r[1])*this.ky;return Math.sqrt(h*h+d*d)}pointOnLine(e,r){let h,d,_,x,C=1/0;for(let T=0;T<e.length-1;T++){let P=e[T][0],Q=e[T][1],k=this.wrap(e[T+1][0]-P)*this.kx,K=(e[T+1][1]-Q)*this.ky,X=0;k===0&&K===0||(X=(this.wrap(r[0]-P)*this.kx*k+(r[1]-Q)*this.ky*K)/(k*k+K*K),X>1?(P=e[T+1][0],Q=e[T+1][1]):X>0&&(P+=k/this.kx*X,Q+=K/this.ky*X)),k=this.wrap(r[0]-P)*this.kx,K=(r[1]-Q)*this.ky;const re=k*k+K*K;re<C&&(C=re,h=P,d=Q,_=T,x=X)}return{point:[h,d],index:_,t:Math.max(0,Math.min(1,x))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}function Xa(a,e){return e[0]-a[0]}function el(a){return a[1]-a[0]+1}function uo(a,e){return a[1]>=a[0]&&a[1]<e}function Xl(a,e){if(a[0]>a[1])return[null,null];const r=el(a);if(e){if(r===2)return[a,null];const d=Math.floor(r/2);return[[a[0],a[0]+d],[a[0]+d,a[1]]]}if(r===1)return[a,null];const h=Math.floor(r/2)-1;return[[a[0],a[0]+h],[a[0]+h+1,a[1]]]}function tl(a,e){if(!uo(e,a.length))return[1/0,1/0,-1/0,-1/0];const r=[1/0,1/0,-1/0,-1/0];for(let h=e[0];h<=e[1];++h)bs(r,a[h]);return r}function Sl(a){const e=[1/0,1/0,-1/0,-1/0];for(const r of a)for(const h of r)bs(e,h);return e}function El(a){return a[0]!==-1/0&&a[1]!==-1/0&&a[2]!==1/0&&a[3]!==1/0}function Wl(a,e,r){if(!El(a)||!El(e))return NaN;let h=0,d=0;return a[2]<e[0]&&(h=e[0]-a[2]),a[0]>e[2]&&(h=a[0]-e[2]),a[1]>e[3]&&(d=a[1]-e[3]),a[3]<e[1]&&(d=e[1]-a[3]),r.distance([0,0],[h,d])}function Ra(a,e,r){const h=r.pointOnLine(e,a);return r.distance(a,h.point)}function Tl(a,e,r,h,d){const _=Math.min(Ra(a,[r,h],d),Ra(e,[r,h],d)),x=Math.min(Ra(r,[a,e],d),Ra(h,[a,e],d));return Math.min(_,x)}function Cs(a,e,r,h,d){if(!uo(e,a.length)||!uo(h,r.length))return 1/0;let _=1/0;for(let x=e[0];x<e[1];++x){const C=a[x],T=a[x+1];for(let P=h[0];P<h[1];++P){const Q=r[P],k=r[P+1];if(wl(C,T,Q,k))return 0;_=Math.min(_,Tl(C,T,Q,k,d))}}return _}function rl(a,e,r,h,d){if(!uo(e,a.length)||!uo(h,r.length))return NaN;let _=1/0;for(let x=e[0];x<=e[1];++x)for(let C=h[0];C<=h[1];++C)if(_=Math.min(_,d.distance(a[x],r[C])),_===0)return _;return _}function Ai(a,e,r){if(Hs(a,e,!0))return 0;let h=1/0;for(const d of e){const _=d[0],x=d[d.length-1];if(_!==x&&(h=Math.min(h,Ra(a,[x,_],r)),h===0))return h;const C=r.pointOnLine(d,a);if(h=Math.min(h,r.distance(a,C.point)),h===0)return h}return h}function ni(a,e,r,h){if(!uo(e,a.length))return NaN;for(let _=e[0];_<=e[1];++_)if(Hs(a[_],r,!0))return 0;let d=1/0;for(let _=e[0];_<e[1];++_){const x=a[_],C=a[_+1];for(const T of r)for(let P=0,Q=T.length,k=Q-1;P<Q;k=P++){const K=T[k],X=T[P];if(wl(x,C,K,X))return 0;d=Math.min(d,Tl(x,C,K,X,h))}}return d}function Ii(a,e){for(const r of a)for(const h of r)if(Hs(h,e,!0))return!0;return!1}function wa(a,e,r,h=1/0){const d=Sl(a),_=Sl(e);if(h!==1/0&&Wl(d,_,r)>=h)return h;if(da(d,_)){if(Ii(a,e))return 0}else if(Ii(e,a))return 0;let x=1/0;for(const C of a)for(let T=0,P=C.length,Q=P-1;T<P;Q=T++){const k=C[Q],K=C[T];for(const X of e)for(let re=0,ae=X.length,ue=ae-1;re<ae;ue=re++){const ve=X[ue],He=X[re];if(wl(k,K,ve,He))return 0;x=Math.min(x,Tl(k,K,ve,He,r))}}return x}function Fl(a,e,r,h,d,_){if(!_)return;const x=Wl(tl(h,_),d,r);x<e&&a.push([x,_,[0,0]])}function wn(a,e,r,h,d,_,x){if(!_||!x)return;const C=Wl(tl(h,_),tl(d,x),r);C<e&&a.push([C,_,x])}function Yl(a,e,r,h,d=1/0){let _=Math.min(h.distance(a[0],r[0][0]),d);if(_===0)return _;const x=new Gs([[0,[0,a.length-1],[0,0]]],Xa),C=Sl(r);for(;x.length>0;){const T=x.pop();if(T[0]>=_)continue;const P=T[1],Q=e?50:100;if(el(P)<=Q){if(!uo(P,a.length))return NaN;if(e){const k=ni(a,P,r,h);if(isNaN(k)||k===0)return k;_=Math.min(_,k)}else for(let k=P[0];k<=P[1];++k){const K=Ai(a[k],r,h);if(_=Math.min(_,K),_===0)return 0}}else{const k=Xl(P,e);Fl(x,_,h,a,C,k[0]),Fl(x,_,h,a,C,k[1])}}return _}function JA(a,e,r,h,d,_=1/0){let x=Math.min(_,d.distance(a[0],r[0]));if(x===0)return x;const C=new Gs([[0,[0,a.length-1],[0,r.length-1]]],Xa);for(;C.length>0;){const T=C.pop();if(T[0]>=x)continue;const P=T[1],Q=T[2],k=e?50:100,K=h?50:100;if(el(P)<=k&&el(Q)<=K){if(!uo(P,a.length)&&uo(Q,r.length))return NaN;let X;if(e&&h)X=Cs(a,P,r,Q,d),x=Math.min(x,X);else if(e&&!h){const re=a.slice(P[0],P[1]+1);for(let ae=Q[0];ae<=Q[1];++ae)if(X=Ra(r[ae],re,d),x=Math.min(x,X),x===0)return x}else if(!e&&h){const re=r.slice(Q[0],Q[1]+1);for(let ae=P[0];ae<=P[1];++ae)if(X=Ra(a[ae],re,d),x=Math.min(x,X),x===0)return x}else X=rl(a,P,r,Q,d),x=Math.min(x,X)}else{const X=Xl(P,e),re=Xl(Q,h);wn(C,x,d,a,r,X[0],re[0]),wn(C,x,d,a,r,X[0],re[1]),wn(C,x,d,a,r,X[1],re[0]),wn(C,x,d,a,r,X[1],re[1])}}return x}function xu(a){return a.type==="MultiPolygon"?a.coordinates.map((e=>({type:"Polygon",coordinates:e}))):a.type==="MultiLineString"?a.coordinates.map((e=>({type:"LineString",coordinates:e}))):a.type==="MultiPoint"?a.coordinates.map((e=>({type:"Point",coordinates:e}))):[a]}class ec{constructor(e,r){this.type=Jt,this.geojson=e,this.geometries=r}static parse(e,r){if(e.length!==2)return r.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Os(e[1])){const h=e[1];if(h.type==="FeatureCollection")return new ec(h,h.features.map((d=>xu(d.geometry))).flat());if(h.type==="Feature")return new ec(h,xu(h.geometry));if("type"in h&&"coordinates"in h)return new ec(h,xu(h))}return r.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return(function(r,h){const d=r.geometry(),_=d.flat().map((T=>Kl([T.x,T.y],r.canonical)));if(d.length===0)return NaN;const x=new Jo(_[0][1]);let C=1/0;for(const T of h){switch(T.type){case"Point":C=Math.min(C,JA(_,!1,[T.coordinates],!1,x,C));break;case"LineString":C=Math.min(C,JA(_,!1,T.coordinates,!0,x,C));break;case"Polygon":C=Math.min(C,Yl(_,!1,T.coordinates,x,C))}if(C===0)return C}return C})(e,this.geometries);if(e.geometryType()==="LineString")return(function(r,h){const d=r.geometry(),_=d.flat().map((T=>Kl([T.x,T.y],r.canonical)));if(d.length===0)return NaN;const x=new Jo(_[0][1]);let C=1/0;for(const T of h){switch(T.type){case"Point":C=Math.min(C,JA(_,!0,[T.coordinates],!1,x,C));break;case"LineString":C=Math.min(C,JA(_,!0,T.coordinates,!0,x,C));break;case"Polygon":C=Math.min(C,Yl(_,!0,T.coordinates,x,C))}if(C===0)return C}return C})(e,this.geometries);if(e.geometryType()==="Polygon")return(function(r,h){const d=r.geometry();if(d.length===0||d[0].length===0)return NaN;const _=Po(d,0).map((T=>T.map((P=>P.map((Q=>Kl([Q.x,Q.y],r.canonical))))))),x=new Jo(_[0][0][0][1]);let C=1/0;for(const T of h)for(const P of _){switch(T.type){case"Point":C=Math.min(C,Yl([T.coordinates],!1,P,x,C));break;case"LineString":C=Math.min(C,Yl(T.coordinates,!0,P,x,C));break;case"Polygon":C=Math.min(C,wa(P,T.coordinates,x,C))}if(C===0)return C}return C})(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Hc{constructor(e){this.type=an,this.key=e}static parse(e,r){if(e.length!==2)return r.error(`Expected 1 argument, but found ${e.length-1} instead.`);const h=e[1];return h==null?r.error("Global state property must be defined."):typeof h!="string"?r.error(`Global state property must be string, but found ${typeof e[1]} instead.`):new Hc(h)}evaluate(e){var r;const h=(r=e.globals)===null||r===void 0?void 0:r.globalState;return h&&Object.keys(h).length!==0?CA(h,this.key):null}eachChild(){}outputDefined(){return!1}}const vc={"==":Nn,"!=":ua,">":Pa,"<":Ci,">=":ha,"<=":Na,array:xs,at:Mo,boolean:xs,case:En,coalesce:Br,collator:zs,format:Wo,image:$A,in:In,"index-of":pn,interpolate:Kt,"interpolate-hcl":Kt,"interpolate-lab":Kt,length:bl,let:Lo,literal:Ua,match:Uo,number:xs,"number-format":js,object:xs,slice:LA,step:ql,string:xs,"to-boolean":ca,"to-color":ca,"to-number":ca,"to-string":ca,var:Xn,within:Ao,distance:ec,"global-state":Hc};class ho{constructor(e,r,h,d){this.name=e,this.type=r,this._evaluate=h,this.args=d}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,r){const h=e[0],d=ho.definitions[h];if(!d)return r.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const _=Array.isArray(d)?d[0]:d.type,x=Array.isArray(d)?[[d[1],d[2]]]:d.overloads,C=x.filter((([P])=>!Array.isArray(P)||P.length===e.length-1));let T=null;for(const[P,Q]of C){T=new Gl(r.registry,Ss,r.path,null,r.scope);const k=[];let K=!1;for(let X=1;X<e.length;X++){const re=e[X],ae=Array.isArray(P)?P[X-1]:P.type,ue=T.parse(re,1+k.length,ae);if(!ue){K=!0;break}k.push(ue)}if(!K)if(Array.isArray(P)&&P.length!==k.length)T.error(`Expected ${P.length} arguments, but found ${k.length} instead.`);else{for(let X=0;X<k.length;X++){const re=Array.isArray(P)?P[X]:P.type,ae=k[X];T.concat(X+1).checkSubtype(re,ae.type)}if(T.errors.length===0)return new ho(h,_,Q,k)}}if(C.length===1)r.errors.push(...T.errors);else{const P=(C.length?C:x).map((([k])=>{return K=k,Array.isArray(K)?`(${K.map(Zn).join(", ")})`:`(${Zn(K.type)}...)`;var K})).join(" | "),Q=[];for(let k=1;k<e.length;k++){const K=r.parse(e[k],1+Q.length);if(!K)return null;Q.push(Zn(K.type))}r.error(`Expected arguments of type ${P}, but found (${Q.join(", ")}) instead.`)}return null}static register(e,r){ho.definitions=r;for(const h in r)e[h]=ho}}function Wu(a,[e,r,h,d]){e=e.evaluate(a),r=r.evaluate(a),h=h.evaluate(a);const _=d?d.evaluate(a):1,x=vs(e,r,h,_);if(x)throw new Hr(x);return new cn(e/255,r/255,h/255,_,!1)}function tc(a,e){return a in e}function fo(a,e){const r=e[a];return r===void 0?null:r}function Il(a){return{type:a}}function Ss(a){if(a instanceof Xn)return Ss(a.boundExpression);if(a instanceof ho&&a.name==="error"||a instanceof zs||a instanceof Ao||a instanceof ec||a instanceof Hc)return!1;const e=a instanceof ca||a instanceof xs;let r=!0;return a.eachChild((h=>{r=e?r&&Ss(h):r&&h instanceof Ua})),!!r&&$l(a)&&nc(a,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function $l(a){if(a instanceof ho&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof Ao||a instanceof ec)return!1;let e=!0;return a.eachChild((r=>{e&&!$l(r)&&(e=!1)})),e}function rc(a){if(a instanceof ho&&a.name==="feature-state")return!1;let e=!0;return a.eachChild((r=>{e&&!rc(r)&&(e=!1)})),e}function nc(a,e){if(a instanceof ho&&e.indexOf(a.name)>=0)return!1;let r=!0;return a.eachChild((h=>{r&&!nc(h,e)&&(r=!1)})),r}function Vc(a){return{result:"success",value:a}}function MA(a){return{result:"error",value:a}}function po(a){return a["property-type"]==="data-driven"||a["property-type"]==="cross-faded-data-driven"}function Gc(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function Wa(a){return!!a.expression&&a.expression.interpolated}function Yr(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function xc(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)&&ri(a)===os}function Es(a){return a}function bu(a,e){const r=a.stops&&typeof a.stops[0][0]=="object",h=r||!(r||a.property!==void 0),d=a.type||(Wa(e)?"exponential":"interval"),_=(function(Q){switch(Q.type){case"color":return cn.parse;case"padding":return Rr.parse;case"numberArray":return ja.parse;case"colorArray":return gi.parse;default:return null}})(e);if(_&&((a=fn({},a)).stops&&(a.stops=a.stops.map((Q=>[Q[0],_(Q[1])]))),a.default=_(a.default?a.default:e.default)),a.colorSpace&&(x=a.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${a.colorSpace}"`);var x;const C=(function(Q){switch(Q){case"exponential":return UA;case"interval":return qc;case"categorical":return wu;case"identity":return Bu;default:throw new Error(`Unknown function type "${Q}"`)}})(d);let T,P;if(d==="categorical"){T=Object.create(null);for(const Q of a.stops)T[Q[0]]=Q[1];P=typeof a.stops[0][0]}if(r){const Q={},k=[];for(let re=0;re<a.stops.length;re++){const ae=a.stops[re],ue=ae[0].zoom;Q[ue]===void 0&&(Q[ue]={zoom:ue,type:a.type,property:a.property,default:a.default,stops:[]},k.push(ue)),Q[ue].stops.push([ae[0].value,ae[1]])}const K=[];for(const re of k)K.push([Q[re].zoom,bu(Q[re],e)]);const X={name:"linear"};return{kind:"composite",interpolationType:X,interpolationFactor:Kt.interpolationFactor.bind(void 0,X),zoomStops:K.map((re=>re[0])),evaluate:({zoom:re},ae)=>UA({stops:K,base:a.base},e,re).evaluate(re,ae)}}if(h){const Q=d==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:Q,interpolationFactor:Kt.interpolationFactor.bind(void 0,Q),zoomStops:a.stops.map((k=>k[0])),evaluate:({zoom:k})=>C(a,e,k,T,P)}}return{kind:"source",evaluate(Q,k){const K=k&&k.properties?k.properties[a.property]:void 0;return K===void 0?Ts(a.default,e.default):C(a,e,K,T,P)}}}function Ts(a,e,r){return a!==void 0?a:e!==void 0?e:r!==void 0?r:void 0}function wu(a,e,r,h,d){return Ts(typeof r===d?h[r]:void 0,a.default,e.default)}function qc(a,e,r){if(Yr(r)!=="number")return Ts(a.default,e.default);const h=a.stops.length;if(h===1||r<=a.stops[0][0])return a.stops[0][1];if(r>=a.stops[h-1][0])return a.stops[h-1][1];const d=Da(a.stops.map((_=>_[0])),r);return a.stops[d][1]}function UA(a,e,r){const h=a.base!==void 0?a.base:1;if(Yr(r)!=="number")return Ts(a.default,e.default);const d=a.stops.length;if(d===1||r<=a.stops[0][0])return a.stops[0][1];if(r>=a.stops[d-1][0])return a.stops[d-1][1];const _=Da(a.stops.map((Q=>Q[0])),r),x=(function(Q,k,K,X){const re=X-K,ae=Q-K;return re===0?0:k===1?ae/re:(Math.pow(k,ae)-1)/(Math.pow(k,re)-1)})(r,h,a.stops[_][0],a.stops[_+1][0]),C=a.stops[_][1],T=a.stops[_+1][1],P=wr[e.type]||Es;return typeof C.evaluate=="function"?{evaluate(...Q){const k=C.evaluate.apply(void 0,Q),K=T.evaluate.apply(void 0,Q);if(k!==void 0&&K!==void 0)return P(k,K,x,a.colorSpace)}}:P(C,T,x,a.colorSpace)}function Bu(a,e,r){switch(e.type){case"color":r=cn.parse(r);break;case"formatted":r=La.fromString(r.toString());break;case"resolvedImage":r=fs.fromString(r.toString());break;case"padding":r=Rr.parse(r);break;case"colorArray":r=gi.parse(r);break;case"numberArray":r=ja.parse(r);break;default:Yr(r)===e.type||e.type==="enum"&&e.values[r]||(r=void 0)}return Ts(r,a.default,e.default)}ho.register(vc,{error:[{kind:"error"},[kr],(a,[e])=>{throw new Hr(e.evaluate(a))}],typeof:[kr,[an],(a,[e])=>Zn(ri(e.evaluate(a)))],"to-rgba":[Ni(Jt,4),[Ji],(a,[e])=>{const[r,h,d,_]=e.evaluate(a).rgb;return[255*r,255*h,255*d,_]}],rgb:[Ji,[Jt,Jt,Jt],Wu],rgba:[Ji,[Jt,Jt,Jt,Jt],Wu],has:{type:qr,overloads:[[[kr],(a,[e])=>tc(e.evaluate(a),a.properties())],[[kr,os],(a,[e,r])=>tc(e.evaluate(a),r.evaluate(a))]]},get:{type:an,overloads:[[[kr],(a,[e])=>fo(e.evaluate(a),a.properties())],[[kr,os],(a,[e,r])=>fo(e.evaluate(a),r.evaluate(a))]]},"feature-state":[an,[kr],(a,[e])=>fo(e.evaluate(a),a.featureState||{})],properties:[os,[],a=>a.properties()],"geometry-type":[kr,[],a=>a.geometryType()],id:[an,[],a=>a.id()],zoom:[Jt,[],a=>a.globals.zoom],"heatmap-density":[Jt,[],a=>a.globals.heatmapDensity||0],elevation:[Jt,[],a=>a.globals.elevation||0],"line-progress":[Jt,[],a=>a.globals.lineProgress||0],accumulated:[an,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[Jt,Il(Jt),(a,e)=>{let r=0;for(const h of e)r+=h.evaluate(a);return r}],"*":[Jt,Il(Jt),(a,e)=>{let r=1;for(const h of e)r*=h.evaluate(a);return r}],"-":{type:Jt,overloads:[[[Jt,Jt],(a,[e,r])=>e.evaluate(a)-r.evaluate(a)],[[Jt],(a,[e])=>-e.evaluate(a)]]},"/":[Jt,[Jt,Jt],(a,[e,r])=>e.evaluate(a)/r.evaluate(a)],"%":[Jt,[Jt,Jt],(a,[e,r])=>e.evaluate(a)%r.evaluate(a)],ln2:[Jt,[],()=>Math.LN2],pi:[Jt,[],()=>Math.PI],e:[Jt,[],()=>Math.E],"^":[Jt,[Jt,Jt],(a,[e,r])=>Math.pow(e.evaluate(a),r.evaluate(a))],sqrt:[Jt,[Jt],(a,[e])=>Math.sqrt(e.evaluate(a))],log10:[Jt,[Jt],(a,[e])=>Math.log(e.evaluate(a))/Math.LN10],ln:[Jt,[Jt],(a,[e])=>Math.log(e.evaluate(a))],log2:[Jt,[Jt],(a,[e])=>Math.log(e.evaluate(a))/Math.LN2],sin:[Jt,[Jt],(a,[e])=>Math.sin(e.evaluate(a))],cos:[Jt,[Jt],(a,[e])=>Math.cos(e.evaluate(a))],tan:[Jt,[Jt],(a,[e])=>Math.tan(e.evaluate(a))],asin:[Jt,[Jt],(a,[e])=>Math.asin(e.evaluate(a))],acos:[Jt,[Jt],(a,[e])=>Math.acos(e.evaluate(a))],atan:[Jt,[Jt],(a,[e])=>Math.atan(e.evaluate(a))],min:[Jt,Il(Jt),(a,e)=>Math.min(...e.map((r=>r.evaluate(a))))],max:[Jt,Il(Jt),(a,e)=>Math.max(...e.map((r=>r.evaluate(a))))],abs:[Jt,[Jt],(a,[e])=>Math.abs(e.evaluate(a))],round:[Jt,[Jt],(a,[e])=>{const r=e.evaluate(a);return r<0?-Math.round(-r):Math.round(r)}],floor:[Jt,[Jt],(a,[e])=>Math.floor(e.evaluate(a))],ceil:[Jt,[Jt],(a,[e])=>Math.ceil(e.evaluate(a))],"filter-==":[qr,[kr,an],(a,[e,r])=>a.properties()[e.value]===r.value],"filter-id-==":[qr,[an],(a,[e])=>a.id()===e.value],"filter-type-==":[qr,[kr],(a,[e])=>a.geometryType()===e.value],"filter-<":[qr,[kr,an],(a,[e,r])=>{const h=a.properties()[e.value],d=r.value;return typeof h==typeof d&&h<d}],"filter-id-<":[qr,[an],(a,[e])=>{const r=a.id(),h=e.value;return typeof r==typeof h&&r<h}],"filter->":[qr,[kr,an],(a,[e,r])=>{const h=a.properties()[e.value],d=r.value;return typeof h==typeof d&&h>d}],"filter-id->":[qr,[an],(a,[e])=>{const r=a.id(),h=e.value;return typeof r==typeof h&&r>h}],"filter-<=":[qr,[kr,an],(a,[e,r])=>{const h=a.properties()[e.value],d=r.value;return typeof h==typeof d&&h<=d}],"filter-id-<=":[qr,[an],(a,[e])=>{const r=a.id(),h=e.value;return typeof r==typeof h&&r<=h}],"filter->=":[qr,[kr,an],(a,[e,r])=>{const h=a.properties()[e.value],d=r.value;return typeof h==typeof d&&h>=d}],"filter-id->=":[qr,[an],(a,[e])=>{const r=a.id(),h=e.value;return typeof r==typeof h&&r>=h}],"filter-has":[qr,[an],(a,[e])=>e.value in a.properties()],"filter-has-id":[qr,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[qr,[Ni(kr)],(a,[e])=>e.value.indexOf(a.geometryType())>=0],"filter-id-in":[qr,[Ni(an)],(a,[e])=>e.value.indexOf(a.id())>=0],"filter-in-small":[qr,[kr,Ni(an)],(a,[e,r])=>r.value.indexOf(a.properties()[e.value])>=0],"filter-in-large":[qr,[kr,Ni(an)],(a,[e,r])=>(function(h,d,_,x){for(;_<=x;){const C=_+x>>1;if(d[C]===h)return!0;d[C]>h?x=C-1:_=C+1}return!1})(a.properties()[e.value],r.value,0,r.value.length-1)],all:{type:qr,overloads:[[[qr,qr],(a,[e,r])=>e.evaluate(a)&&r.evaluate(a)],[Il(qr),(a,e)=>{for(const r of e)if(!r.evaluate(a))return!1;return!0}]]},any:{type:qr,overloads:[[[qr,qr],(a,[e,r])=>e.evaluate(a)||r.evaluate(a)],[Il(qr),(a,e)=>{for(const r of e)if(r.evaluate(a))return!0;return!1}]]},"!":[qr,[qr],(a,[e])=>!e.evaluate(a)],"is-supported-script":[qr,[kr],(a,[e])=>{const r=a.globals&&a.globals.isSupportedScript;return!r||r(e.evaluate(a))}],upcase:[kr,[kr],(a,[e])=>e.evaluate(a).toUpperCase()],downcase:[kr,[kr],(a,[e])=>e.evaluate(a).toLowerCase()],concat:[kr,Il(an),(a,e)=>e.map((r=>IA(r.evaluate(a)))).join("")],"resolved-locale":[kr,[To],(a,[e])=>e.evaluate(a).resolvedLocale()]});class Kc{constructor(e,r,h){this.expression=e,this._warningHistory={},this._evaluator=new xl,this._defaultValue=r?(function(d){if(d.type==="color"&&xc(d.default))return new cn(0,0,0,0);switch(d.type){case"color":return cn.parse(d.default)||null;case"padding":return Rr.parse(d.default)||null;case"numberArray":return ja.parse(d.default)||null;case"colorArray":return gi.parse(d.default)||null;case"variableAnchorOffsetCollection":return jn.parse(d.default)||null;case"projectionDefinition":return Ma.parse(d.default)||null;default:return d.default===void 0?null:d.default}})(r):null,this._enumValues=r&&r.type==="enum"?r.values:null,this._globalState=h}evaluateWithoutErrorHandling(e,r,h,d,_,x){return this._globalState&&(e=Qa(e,this._globalState)),this._evaluator.globals=e,this._evaluator.feature=r,this._evaluator.featureState=h,this._evaluator.canonical=d,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(e,r,h,d,_,x){this._globalState&&(e=Qa(e,this._globalState)),this._evaluator.globals=e,this._evaluator.feature=r||null,this._evaluator.featureState=h||null,this._evaluator.canonical=d,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x||null;try{const C=this.expression.evaluate(this._evaluator);if(C==null||typeof C=="number"&&C!=C)return this._defaultValue;if(this._enumValues&&!(C in this._enumValues))throw new Hr(`Expected value to be one of ${Object.keys(this._enumValues).map((T=>JSON.stringify(T))).join(", ")}, but found ${JSON.stringify(C)} instead.`);return C}catch(C){return this._warningHistory[C.message]||(this._warningHistory[C.message]=!0,typeof console<"u"&&console.warn(C.message)),this._defaultValue}}}function DA(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in vc}function Jl(a,e,r){const h=new Gl(vc,Ss,[],e?(function(_){const x={color:Ji,string:kr,number:Jt,enum:kr,boolean:qr,formatted:ys,padding:so,numberArray:oo,colorArray:_l,projectionDefinition:Ko,resolvedImage:Pi,variableAnchorOffsetCollection:xA};return _.type==="array"?Ni(x[_.value]||an,_.length):x[_.type]})(e):void 0),d=h.parse(a,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?Vc(new Kc(d,e,r)):MA(h.errors)}class Ks{constructor(e,r,h){this.kind=e,this._styleExpression=r,this.isStateDependent=e!=="constant"&&!rc(r.expression),this.globalStateRefs=Fs(r.expression),this._globalState=h}evaluateWithoutErrorHandling(e,r,h,d,_,x){return this._globalState&&(e=Qa(e,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(e,r,h,d,_,x)}evaluate(e,r,h,d,_,x){return this._globalState&&(e=Qa(e,this._globalState)),this._styleExpression.evaluate(e,r,h,d,_,x)}}class ic{constructor(e,r,h,d,_){this.kind=e,this.zoomStops=h,this._styleExpression=r,this.isStateDependent=e!=="camera"&&!rc(r.expression),this.globalStateRefs=Fs(r.expression),this.interpolationType=d,this._globalState=_}evaluateWithoutErrorHandling(e,r,h,d,_,x){return this._globalState&&(e=Qa(e,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(e,r,h,d,_,x)}evaluate(e,r,h,d,_,x){return this._globalState&&(e=Qa(e,this._globalState)),this._styleExpression.evaluate(e,r,h,d,_,x)}interpolationFactor(e,r,h){return this.interpolationType?Kt.interpolationFactor(this.interpolationType,e,r,h):0}}function ac(a,e,r){const h=Jl(a,e,r);if(h.result==="error")return h;const d=h.value.expression,_=$l(d);if(!_&&!po(e))return MA([new li("","data expressions not supported")]);const x=nc(d,["zoom"]);if(!x&&!Gc(e))return MA([new li("","zoom expressions not supported")]);const C=oc(d);return C||x?C instanceof li?MA([C]):C instanceof Kt&&!Wa(e)?MA([new li("",'"interpolate" expressions cannot be used with this property')]):Vc(C?new ic(_?"camera":"composite",h.value,C.labels,C instanceof Kt?C.interpolation:void 0,r):new Ks(_?"constant":"source",h.value,r)):MA([new li("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class sc{constructor(e,r){this._parameters=e,this._specification=r,fn(this,bu(this._parameters,this._specification))}static deserialize(e){return new sc(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function oc(a){let e=null;if(a instanceof Lo)e=oc(a.result);else if(a instanceof Br){for(const r of a.args)if(e=oc(r),e)break}else(a instanceof ql||a instanceof Kt)&&a.input instanceof ho&&a.input.name==="zoom"&&(e=a);return e instanceof li||a.eachChild((r=>{const h=oc(r);h instanceof li?e=h:!e&&h?e=new li("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&h&&e!==h&&(e=new li("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}function Fs(a,e=new Set){return a instanceof Hc&&e.add(a.key),a.eachChild((r=>{Fs(r,e)})),e}function Qa(a,e){const{zoom:r,heatmapDensity:h,elevation:d,lineProgress:_,isSupportedScript:x,accumulated:C}=a??{};return{zoom:r,heatmapDensity:h,elevation:d,lineProgress:_,isSupportedScript:x,accumulated:C,globalState:e}}function Ll(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const e of a.slice(1))if(!Ll(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}const nl={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Is(a,e){if(a==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Ll(a)||(a=Zc(a));const r=Jl(a,nl,e);if(r.result==="error")throw new Error(r.value.map((h=>`${h.key}: ${h.message}`)).join(", "));return{filter:(h,d,_)=>r.value.evaluate(h,d,{},_),needGeometry:Fh(a),getGlobalStateRefs:()=>Fs(r.value.expression)}}function No(a,e){return a<e?-1:a>e?1:0}function Fh(a){if(!Array.isArray(a))return!1;if(a[0]==="within"||a[0]==="distance")return!0;for(let e=1;e<a.length;e++)if(Fh(a[e]))return!0;return!1}function Zc(a){if(!a)return!0;const e=a[0];return a.length<=1?e!=="any":e==="=="?bc(a[1],a[2],"=="):e==="!="?Si(bc(a[1],a[2],"==")):e==="<"||e===">"||e==="<="||e===">="?bc(a[1],a[2],e):e==="any"?(r=a.slice(1),["any"].concat(r.map(Zc))):e==="all"?["all"].concat(a.slice(1).map(Zc)):e==="none"?["all"].concat(a.slice(1).map(Zc).map(Si)):e==="in"?Yu(a[1],a.slice(2)):e==="!in"?Si(Yu(a[1],a.slice(2))):e==="has"?Ya(a[1]):e!=="!has"||Si(Ya(a[1]));var r}function bc(a,e,r){switch(a){case"$type":return[`filter-type-${r}`,e];case"$id":return[`filter-id-${r}`,e];default:return[`filter-${r}`,a,e]}}function Yu(a,e){if(e.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((r=>typeof r!=typeof e[0]))?["filter-in-large",a,["literal",e.sort(No)]]:["filter-in-small",a,["literal",e]]}}function Ya(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function Si(a){return["!",a]}function kn(a){const e=typeof a;if(e==="number"||e==="boolean"||e==="string"||a==null)return JSON.stringify(a);if(Array.isArray(a)){let d="[";for(const _ of a)d+=`${kn(_)},`;return`${d}]`}const r=Object.keys(a).sort();let h="{";for(let d=0;d<r.length;d++)h+=`${JSON.stringify(r[d])}:${kn(a[r[d]])},`;return`${h}}`}function Ls(a){let e="";for(const r of ur)e+=`/${kn(a[r])}`;return e}function qi(a){const e=a.value;return e?[new Wt(a.key,e,"constants have been deprecated as of v8")]:[]}function ci(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function mo(a){if(Array.isArray(a))return a.map(mo);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const e={};for(const r in a)e[r]=mo(a[r]);return e}return ci(a)}function Zs(a){const e=a.key,r=a.value,h=a.valueSpec||{},d=a.objectElementValidators||{},_=a.style,x=a.styleSpec,C=a.validateSpec;let T=[];const P=Yr(r);if(P!=="object")return[new Wt(e,r,`object expected, ${P} found`)];for(const Q in r){const k=Q.split(".")[0],K=CA(h,k)||h["*"];let X;if(CA(d,k))X=d[k];else if(CA(h,k)){if(r[Q]===void 0)continue;X=C}else if(d["*"])X=d["*"];else{if(!h["*"]){T.push(new Wt(e,r[Q],`unknown property "${Q}"`));continue}X=C}T=T.concat(X({key:(e&&`${e}.`)+Q,value:r[Q],valueSpec:K,style:_,styleSpec:x,object:r,objectKey:Q,validateSpec:C},r))}for(const Q in h)d[Q]||h[Q].required&&h[Q].default===void 0&&r[Q]===void 0&&T.push(new Wt(e,r,`missing required property "${Q}"`));return T}function Ml(a){const e=a.value,r=a.valueSpec,h=a.style,d=a.styleSpec,_=a.key,x=a.arrayElementValidator||a.validateSpec;if(Yr(e)!=="array")return[new Wt(_,e,`array expected, ${Yr(e)} found`)];if(r.length&&e.length!==r.length)return[new Wt(_,e,`array length ${r.length} expected, length ${e.length} found`)];let C={type:r.value,values:r.values};d.$version<7&&(C.function=r.function),Yr(r.value)==="object"&&(C=r.value);let T=[];for(let P=0;P<e.length;P++)T=T.concat(x({array:e,arrayIndex:P,value:e[P],valueSpec:C,validateSpec:a.validateSpec,style:h,styleSpec:d,key:`${_}[${P}]`}));return T}function Ba(a){const e=a.key,r=a.value,h=a.valueSpec;let d=Yr(r);return d==="number"&&r!=r&&(d="NaN"),d!=="number"?[new Wt(e,r,`number expected, ${d} found`)]:"minimum"in h&&r<h.minimum?[new Wt(e,r,`${r} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&r>h.maximum?[new Wt(e,r,`${r} is greater than the maximum value ${h.maximum}`)]:[]}function PA(a){const e=a.valueSpec,r=ci(a.value.type);let h,d,_,x={};const C=r!=="categorical"&&a.value.property===void 0,T=!C,P=Yr(a.value.stops)==="array"&&Yr(a.value.stops[0])==="array"&&Yr(a.value.stops[0][0])==="object",Q=Zs({key:a.key,value:a.value,valueSpec:a.styleSpec.function,validateSpec:a.validateSpec,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(X){if(r==="identity")return[new Wt(X.key,X.value,'identity function may not have a "stops" property')];let re=[];const ae=X.value;return re=re.concat(Ml({key:X.key,value:ae,valueSpec:X.valueSpec,validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec,arrayElementValidator:k})),Yr(ae)==="array"&&ae.length===0&&re.push(new Wt(X.key,ae,"array must have at least one stop")),re},default:function(X){return X.validateSpec({key:X.key,value:X.value,valueSpec:e,validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec})}}});return r==="identity"&&C&&Q.push(new Wt(a.key,a.value,'missing required property "property"')),r==="identity"||a.value.stops||Q.push(new Wt(a.key,a.value,'missing required property "stops"')),r==="exponential"&&a.valueSpec.expression&&!Wa(a.valueSpec)&&Q.push(new Wt(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(T&&!po(a.valueSpec)?Q.push(new Wt(a.key,a.value,"property functions not supported")):C&&!Gc(a.valueSpec)&&Q.push(new Wt(a.key,a.value,"zoom functions not supported"))),r!=="categorical"&&!P||a.value.property!==void 0||Q.push(new Wt(a.key,a.value,'"property" property is required')),Q;function k(X){let re=[];const ae=X.value,ue=X.key;if(Yr(ae)!=="array")return[new Wt(ue,ae,`array expected, ${Yr(ae)} found`)];if(ae.length!==2)return[new Wt(ue,ae,`array length 2 expected, length ${ae.length} found`)];if(P){if(Yr(ae[0])!=="object")return[new Wt(ue,ae,`object expected, ${Yr(ae[0])} found`)];if(ae[0].zoom===void 0)return[new Wt(ue,ae,"object stop key must have zoom")];if(ae[0].value===void 0)return[new Wt(ue,ae,"object stop key must have value")];if(_&&_>ci(ae[0].zoom))return[new Wt(ue,ae[0].zoom,"stop zoom values must appear in ascending order")];ci(ae[0].zoom)!==_&&(_=ci(ae[0].zoom),d=void 0,x={}),re=re.concat(Zs({key:`${ue}[0]`,value:ae[0],valueSpec:{zoom:{}},validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec,objectElementValidators:{zoom:Ba,value:K}}))}else re=re.concat(K({key:`${ue}[0]`,value:ae[0],validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec},ae));return DA(mo(ae[1]))?re.concat([new Wt(`${ue}[1]`,ae[1],"expressions are not allowed in function stops.")]):re.concat(X.validateSpec({key:`${ue}[1]`,value:ae[1],valueSpec:e,validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec}))}function K(X,re){const ae=Yr(X.value),ue=ci(X.value),ve=X.value!==null?X.value:re;if(h){if(ae!==h)return[new Wt(X.key,ve,`${ae} stop domain type must match previous stop domain type ${h}`)]}else h=ae;if(ae!=="number"&&ae!=="string"&&ae!=="boolean")return[new Wt(X.key,ve,"stop domain value must be a number, string, or boolean")];if(ae!=="number"&&r!=="categorical"){let He=`number expected, ${ae} found`;return po(e)&&r===void 0&&(He+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Wt(X.key,ve,He)]}return r!=="categorical"||ae!=="number"||isFinite(ue)&&Math.floor(ue)===ue?r!=="categorical"&&ae==="number"&&d!==void 0&&ue<d?[new Wt(X.key,ve,"stop domain values must appear in ascending order")]:(d=ue,r==="categorical"&&ue in x?[new Wt(X.key,ve,"stop domain values must be unique")]:(x[ue]=!0,[])):[new Wt(X.key,ve,`integer expected, found ${ue}`)]}}function eA(a){const e=(a.expressionContext==="property"?ac:Jl)(mo(a.value),a.valueSpec);if(e.result==="error")return e.value.map((h=>new Wt(`${a.key}${h.key}`,a.value,h.message)));const r=e.value.expression||e.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!r.outputDefined())return[new Wt(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!rc(r))return[new Wt(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if(a.expressionContext==="filter"&&!rc(r))return[new Wt(a.key,a.value,'"feature-state" data expressions are not supported with filters.')];if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!nc(r,["zoom","feature-state"]))return[new Wt(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(a.expressionContext==="cluster-initial"&&!$l(r))return[new Wt(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function tA(a){const e=a.key,r=a.value,h=Yr(r);return h!=="string"?[new Wt(e,r,`color expected, ${h} found`)]:cn.parse(String(r))?[]:[new Wt(e,r,`color expected, "${r}" found`)]}function rA(a){const e=a.key,r=a.value,h=a.valueSpec,d=[];return Array.isArray(h.values)?h.values.indexOf(ci(r))===-1&&d.push(new Wt(e,r,`expected one of [${h.values.join(", ")}], ${JSON.stringify(r)} found`)):Object.keys(h.values).indexOf(ci(r))===-1&&d.push(new Wt(e,r,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(r)} found`)),d}function il(a){return Ll(mo(a.value))?eA(fn({},a,{expressionContext:"filter",valueSpec:{value:"boolean"}})):go(a)}function go(a){const e=a.value,r=a.key;if(Yr(e)!=="array")return[new Wt(r,e,`array expected, ${Yr(e)} found`)];const h=a.styleSpec;let d,_=[];if(e.length<1)return[new Wt(r,e,"filter array must have at least 1 element")];switch(_=_.concat(rA({key:`${r}[0]`,value:e[0],valueSpec:h.filter_operator,style:a.style,styleSpec:a.styleSpec})),ci(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&ci(e[1])==="$type"&&_.push(new Wt(r,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&_.push(new Wt(r,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(d=Yr(e[1]),d!=="string"&&_.push(new Wt(`${r}[1]`,e[1],`string expected, ${d} found`)));for(let x=2;x<e.length;x++)d=Yr(e[x]),ci(e[1])==="$type"?_=_.concat(rA({key:`${r}[${x}]`,value:e[x],valueSpec:h.geometry_type,style:a.style,styleSpec:a.styleSpec})):d!=="string"&&d!=="number"&&d!=="boolean"&&_.push(new Wt(`${r}[${x}]`,e[x],`string, number, or boolean expected, ${d} found`));break;case"any":case"all":case"none":for(let x=1;x<e.length;x++)_=_.concat(go({key:`${r}[${x}]`,value:e[x],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":d=Yr(e[1]),e.length!==2?_.push(new Wt(r,e,`filter array for "${e[0]}" operator must have 2 elements`)):d!=="string"&&_.push(new Wt(`${r}[1]`,e[1],`string expected, ${d} found`))}return _}function NA(a,e){const r=a.key,h=a.validateSpec,d=a.style,_=a.styleSpec,x=a.value,C=a.objectKey,T=_[`${e}_${a.layerType}`];if(!T)return[];const P=C.match(/^(.*)-transition$/);if(e==="paint"&&P&&T[P[1]]&&T[P[1]].transition)return h({key:r,value:x,valueSpec:_.transition,style:d,styleSpec:_});const Q=a.valueSpec||T[C];if(!Q)return[new Wt(r,x,`unknown property "${C}"`)];let k;if(Yr(x)==="string"&&po(Q)&&!Q.tokens&&(k=/^{([^}]+)}$/.exec(x)))return[new Wt(r,x,`"${C}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(k[1])} }\`.`)];const K=[];return a.layerType==="symbol"&&C==="text-font"&&xc(mo(x))&&ci(x.type)==="identity"&&K.push(new Wt(r,x,'"text-font" does not support identity functions')),K.concat(h({key:a.key,value:x,valueSpec:Q,style:d,styleSpec:_,expressionContext:"property",propertyType:e,propertyKey:C}))}function Ro(a){return NA(a,"paint")}function wc(a){return NA(a,"layout")}function lc(a){let e=[];const r=a.value,h=a.key,d=a.style,_=a.styleSpec;if(Yr(r)!=="object")return[new Wt(h,r,`object expected, ${Yr(r)} found`)];r.type||r.ref||e.push(new Wt(h,r,'either "type" or "ref" is required'));let x=ci(r.type);const C=ci(r.ref);if(r.id){const T=ci(r.id);for(let P=0;P<a.arrayIndex;P++){const Q=d.layers[P];ci(Q.id)===T&&e.push(new Wt(h,r.id,`duplicate layer id "${r.id}", previously used at line ${Q.id.__line__}`))}}if("ref"in r){let T;["type","source","source-layer","filter","layout"].forEach((P=>{P in r&&e.push(new Wt(h,r[P],`"${P}" is prohibited for ref layers`))})),d.layers.forEach((P=>{ci(P.id)===C&&(T=P)})),T?T.ref?e.push(new Wt(h,r.ref,"ref cannot reference another ref layer")):x=ci(T.type):e.push(new Wt(h,r.ref,`ref layer "${C}" not found`))}else if(x!=="background")if(r.source){const T=d.sources&&d.sources[r.source],P=T&&ci(T.type);T?P==="vector"&&x==="raster"?e.push(new Wt(h,r.source,`layer "${r.id}" requires a raster source`)):P!=="raster-dem"&&x==="hillshade"||P!=="raster-dem"&&x==="color-relief"?e.push(new Wt(h,r.source,`layer "${r.id}" requires a raster-dem source`)):P==="raster"&&x!=="raster"?e.push(new Wt(h,r.source,`layer "${r.id}" requires a vector source`)):P!=="vector"||r["source-layer"]?P==="raster-dem"&&x!=="hillshade"&&x!=="color-relief"?e.push(new Wt(h,r.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):x!=="line"||!r.paint||!r.paint["line-gradient"]||P==="geojson"&&T.lineMetrics||e.push(new Wt(h,r,`layer "${r.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new Wt(h,r,`layer "${r.id}" must specify a "source-layer"`)):e.push(new Wt(h,r.source,`source "${r.source}" not found`))}else e.push(new Wt(h,r,'missing required property "source"'));return e=e.concat(Zs({key:h,value:r,valueSpec:_.layer,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,objectElementValidators:{"*":()=>[],type:()=>a.validateSpec({key:`${h}.type`,value:r.type,valueSpec:_.layer.type,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,object:r,objectKey:"type"}),filter:il,layout:T=>Zs({layer:r,key:T.key,value:T.value,style:T.style,styleSpec:T.styleSpec,validateSpec:T.validateSpec,objectElementValidators:{"*":P=>wc(fn({layerType:x},P))}}),paint:T=>Zs({layer:r,key:T.key,value:T.value,style:T.style,styleSpec:T.styleSpec,validateSpec:T.validateSpec,objectElementValidators:{"*":P=>Ro(fn({layerType:x},P))}})}})),e}function Xs(a){const e=a.value,r=a.key,h=Yr(e);return h!=="string"?[new Wt(r,e,`string expected, ${h} found`)]:[]}const Cu={promoteId:function({key:a,value:e}){if(Yr(e)==="string")return Xs({key:a,value:e});{const r=[];for(const h in e)r.push(...Xs({key:`${a}.${h}`,value:e[h]}));return r}}};function nA(a){const e=a.value,r=a.key,h=a.styleSpec,d=a.style,_=a.validateSpec;if(!e.type)return[new Wt(r,e,'"type" is required')];const x=ci(e.type);let C;switch(x){case"vector":case"raster":return C=Zs({key:r,value:e,valueSpec:h[`source_${x.replace("-","_")}`],style:a.style,styleSpec:h,objectElementValidators:Cu,validateSpec:_}),C;case"raster-dem":return C=(function(T){var P;const Q=(P=T.sourceName)!==null&&P!==void 0?P:"",k=T.value,K=T.styleSpec,X=K.source_raster_dem,re=T.style;let ae=[];const ue=Yr(k);if(k===void 0)return ae;if(ue!=="object")return ae.push(new Wt("source_raster_dem",k,`object expected, ${ue} found`)),ae;const ve=ci(k.encoding)==="custom",He=["redFactor","greenFactor","blueFactor","baseShift"],me=T.value.encoding?`"${T.value.encoding}"`:"Default";for(const Ie in k)!ve&&He.includes(Ie)?ae.push(new Wt(Ie,k[Ie],`In "${Q}": "${Ie}" is only valid when "encoding" is set to "custom". ${me} encoding found`)):X[Ie]?ae=ae.concat(T.validateSpec({key:Ie,value:k[Ie],valueSpec:X[Ie],validateSpec:T.validateSpec,style:re,styleSpec:K})):ae.push(new Wt(Ie,k[Ie],`unknown property "${Ie}"`));return ae})({sourceName:r,value:e,style:a.style,styleSpec:h,validateSpec:_}),C;case"geojson":if(C=Zs({key:r,value:e,valueSpec:h.source_geojson,style:d,styleSpec:h,validateSpec:_,objectElementValidators:Cu}),e.cluster)for(const T in e.clusterProperties){const[P,Q]=e.clusterProperties[T],k=typeof P=="string"?[P,["accumulated"],["get",T]]:P;C.push(...eA({key:`${r}.${T}.map`,value:Q,expressionContext:"cluster-map"})),C.push(...eA({key:`${r}.${T}.reduce`,value:k,expressionContext:"cluster-reduce"}))}return C;case"video":return Zs({key:r,value:e,valueSpec:h.source_video,style:d,validateSpec:_,styleSpec:h});case"image":return Zs({key:r,value:e,valueSpec:h.source_image,style:d,validateSpec:_,styleSpec:h});case"canvas":return[new Wt(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return rA({key:`${r}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Ha(a){const e=a.value,r=a.styleSpec,h=r.light,d=a.style;let _=[];const x=Yr(e);if(e===void 0)return _;if(x!=="object")return _=_.concat([new Wt("light",e,`object expected, ${x} found`)]),_;for(const C in e){const T=C.match(/^(.*)-transition$/);_=_.concat(T&&h[T[1]]&&h[T[1]].transition?a.validateSpec({key:C,value:e[C],valueSpec:r.transition,validateSpec:a.validateSpec,style:d,styleSpec:r}):h[C]?a.validateSpec({key:C,value:e[C],valueSpec:h[C],validateSpec:a.validateSpec,style:d,styleSpec:r}):[new Wt(C,e[C],`unknown property "${C}"`)])}return _}function Ac(a){const e=a.value,r=a.styleSpec,h=r.sky,d=a.style,_=Yr(e);if(e===void 0)return[];if(_!=="object")return[new Wt("sky",e,`object expected, ${_} found`)];let x=[];for(const C in e)x=x.concat(h[C]?a.validateSpec({key:C,value:e[C],valueSpec:h[C],style:d,styleSpec:r}):[new Wt(C,e[C],`unknown property "${C}"`)]);return x}function Ih(a){const e=a.value,r=a.styleSpec,h=r.terrain,d=a.style;let _=[];const x=Yr(e);if(e===void 0)return _;if(x!=="object")return _=_.concat([new Wt("terrain",e,`object expected, ${x} found`)]),_;for(const C in e)_=_.concat(h[C]?a.validateSpec({key:C,value:e[C],valueSpec:h[C],validateSpec:a.validateSpec,style:d,styleSpec:r}):[new Wt(C,e[C],`unknown property "${C}"`)]);return _}function Lh(a){let e=[];const r=a.value,h=a.key;if(Array.isArray(r)){const d=[],_=[];for(const x in r)r[x].id&&d.includes(r[x].id)&&e.push(new Wt(h,r,`all the sprites' ids must be unique, but ${r[x].id} is duplicated`)),d.push(r[x].id),r[x].url&&_.includes(r[x].url)&&e.push(new Wt(h,r,`all the sprites' URLs must be unique, but ${r[x].url} is duplicated`)),_.push(r[x].url),e=e.concat(Zs({key:`${h}[${x}]`,value:r[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:a.validateSpec}));return e}return Xs({key:h,value:r})}function Mh(a){return!!a&&a.constructor===Object}function uf(a){return Mh(a.value)?[]:[new Wt(a.key,a.value,`object expected, ${Yr(a.value)} found`)]}const ta={"*":()=>[],array:Ml,boolean:function(a){const e=a.value,r=a.key,h=Yr(e);return h!=="boolean"?[new Wt(r,e,`boolean expected, ${h} found`)]:[]},number:Ba,color:tA,constants:qi,enum:rA,filter:il,function:PA,layer:lc,object:Zs,source:nA,light:Ha,sky:Ac,terrain:Ih,projection:function(a){const e=a.value,r=a.styleSpec,h=r.projection,d=a.style,_=Yr(e);if(e===void 0)return[];if(_!=="object")return[new Wt("projection",e,`object expected, ${_} found`)];let x=[];for(const C in e)x=x.concat(h[C]?a.validateSpec({key:C,value:e[C],valueSpec:h[C],style:d,styleSpec:r}):[new Wt(C,e[C],`unknown property "${C}"`)]);return x},projectionDefinition:function(a){const e=a.key;let r=a.value;r=r instanceof String?r.valueOf():r;const h=Yr(r);return h!=="array"||(function(d){return Array.isArray(d)&&d.length===3&&typeof d[0]=="string"&&typeof d[1]=="string"&&typeof d[2]=="number"})(r)||(function(d){return!!["interpolate","step","literal"].includes(d[0])})(r)?["array","string"].includes(h)?[]:[new Wt(e,r,`projection expected, invalid type "${h}" found`)]:[new Wt(e,r,`projection expected, invalid array ${JSON.stringify(r)} found`)]},string:Xs,formatted:function(a){return Xs(a).length===0?[]:eA(a)},resolvedImage:function(a){return Xs(a).length===0?[]:eA(a)},padding:function(a){const e=a.key,r=a.value;if(Yr(r)==="array"){if(r.length<1||r.length>4)return[new Wt(e,r,`padding requires 1 to 4 values; ${r.length} values found`)];const h={type:"number"};let d=[];for(let _=0;_<r.length;_++)d=d.concat(a.validateSpec({key:`${e}[${_}]`,value:r[_],validateSpec:a.validateSpec,valueSpec:h}));return d}return Ba({key:e,value:r,valueSpec:{}})},numberArray:function(a){const e=a.key,r=a.value;if(Yr(r)==="array"){const h={type:"number"};if(r.length<1)return[new Wt(e,r,"array length at least 1 expected, length 0 found")];let d=[];for(let _=0;_<r.length;_++)d=d.concat(a.validateSpec({key:`${e}[${_}]`,value:r[_],validateSpec:a.validateSpec,valueSpec:h}));return d}return Ba({key:e,value:r,valueSpec:{}})},colorArray:function(a){const e=a.key,r=a.value;if(Yr(r)==="array"){if(r.length<1)return[new Wt(e,r,"array length at least 1 expected, length 0 found")];let h=[];for(let d=0;d<r.length;d++)h=h.concat(tA({key:`${e}[${d}]`,value:r[d]}));return h}return tA({key:e,value:r})},variableAnchorOffsetCollection:function(a){const e=a.key,r=a.value,h=Yr(r),d=a.styleSpec;if(h!=="array"||r.length<1||r.length%2!=0)return[new Wt(e,r,"variableAnchorOffsetCollection requires a non-empty array of even length")];let _=[];for(let x=0;x<r.length;x+=2)_=_.concat(rA({key:`${e}[${x}]`,value:r[x],valueSpec:d.layout_symbol["text-anchor"]})),_=_.concat(Ml({key:`${e}[${x+1}]`,value:r[x+1],valueSpec:{length:2,value:"number"},validateSpec:a.validateSpec,style:a.style,styleSpec:d}));return _},sprite:Lh,state:uf,fontFaces:function(a){const e=a.key,r=a.value,h=a.validateSpec,d=a.styleSpec,_=a.style;if(!Mh(r))return[new Wt(e,r,`object expected, ${Yr(r)} found`)];const x=[];for(const C in r){const T=r[C],P=Yr(T);if(P==="string")x.push(...Xs({key:`${e}.${C}`,value:T}));else if(P==="array"){const Q={url:{type:"string",required:!0},"unicode-range":{type:"array",value:"string"}};for(const[k,K]of T.entries())x.push(...Zs({key:`${e}.${C}[${k}]`,value:K,valueSpec:Q,styleSpec:d,style:_,validateSpec:h}))}else x.push(new Wt(`${e}.${C}`,T,`string or array expected, ${P} found`))}return x}};function iA(a){const e=a.value,r=a.valueSpec,h=a.styleSpec;return a.validateSpec=iA,r.expression&&xc(ci(e))?PA(a):r.expression&&DA(mo(e))?eA(a):r.type&&ta[r.type]?ta[r.type](a):Zs(fn({},a,{valueSpec:r.type?h[r.type]:r}))}function aA(a){const e=a.value,r=a.key,h=Xs(a);return h.length||(e.indexOf("{fontstack}")===-1&&h.push(new Wt(r,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&h.push(new Wt(r,e,'"glyphs" url must include a "{range}" token'))),h}function Ms(a,e=Qe){let r=[];return r=r.concat(iA({key:"",value:a,valueSpec:e.$root,styleSpec:e,style:a,validateSpec:iA,objectElementValidators:{glyphs:aA,"*":()=>[]}})),a.constants&&(r=r.concat(qi({key:"constants",value:a.constants}))),F(r)}function yo(a){return function(e){return a(Object.assign({},e,{validateSpec:iA}))}}function F(a){return[].concat(a).sort(((e,r)=>e.line-r.line))}function U(a){return function(...e){return F(a.apply(this,e))}}Ms.source=U(yo(nA)),Ms.sprite=U(yo(Lh)),Ms.glyphs=U(yo(aA)),Ms.light=U(yo(Ha)),Ms.sky=U(yo(Ac)),Ms.terrain=U(yo(Ih)),Ms.state=U(yo(uf)),Ms.layer=U(yo(lc)),Ms.filter=U(yo(il)),Ms.paintProperty=U(yo(Ro)),Ms.layoutProperty=U(yo(wc));const q={type:"enum","property-type":"data-constant",expression:{interpolated:!1,parameters:["global-state"]},values:{visible:{},none:{}},transition:!1,default:"visible"};class J{constructor(e,r){this._globalState=r,this.setValue(e)}evaluate(){var e;return(e=this._literalValue)!==null&&e!==void 0?e:this._compiledValue.evaluate({})}setValue(e){if(e==null||e==="visible"||e==="none")return this._literalValue=e==="none"?"none":"visible",this._compiledValue=void 0,void(this._globalStateRefs=new Set);const r=Jl(e,q,this._globalState);if(r.result==="error")throw this._literalValue="visible",this._compiledValue=void 0,new Error(r.value.map((h=>`${h.key}: ${h.message}`)).join(", "));this._literalValue=void 0,this._compiledValue=r.value,this._globalStateRefs=Fs(r.value.expression)}getGlobalStateRefs(){return this._globalStateRefs}}const fe=Qe,pe=Ms,ge=pe.light,we=pe.sky,Pe=pe.paintProperty,Ke=pe.layoutProperty;function yt(a,e){let r=!1;if(e&&e.length)for(const h of e)a.fire(new jt(new Error(h.message))),r=!0;return r}class Mt{constructor(e,r,h){const d=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;const x=new Int32Array(this.arrayBuffer);e=x[0],this.d=(r=x[1])+2*(h=x[2]);for(let T=0;T<this.d*this.d;T++){const P=x[3+T],Q=x[3+T+1];d.push(P===Q?null:x.subarray(P,Q))}const C=x[3+d.length+1];this.keys=x.subarray(x[3+d.length],C),this.bboxes=x.subarray(C),this.insert=this._insertReadonly}else{this.d=r+2*h;for(let x=0;x<this.d*this.d;x++)d.push([]);this.keys=[],this.bboxes=[]}this.n=r,this.extent=e,this.padding=h,this.scale=r/e,this.uid=0;const _=h/r*e;this.min=-_,this.max=e+_}insert(e,r,h,d,_){this._forEachCell(r,h,d,_,this._insertCell,this.uid++,void 0,void 0),this.keys.push(e),this.bboxes.push(r),this.bboxes.push(h),this.bboxes.push(d),this.bboxes.push(_)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(e,r,h,d,_,x){this.cells[_].push(x)}query(e,r,h,d,_){const x=this.min,C=this.max;if(e<=x&&r<=x&&C<=h&&C<=d&&!_)return Array.prototype.slice.call(this.keys);{const T=[];return this._forEachCell(e,r,h,d,this._queryCell,T,{},_),T}}_queryCell(e,r,h,d,_,x,C,T){const P=this.cells[_];if(P!==null){const Q=this.keys,k=this.bboxes;for(let K=0;K<P.length;K++){const X=P[K];if(C[X]===void 0){const re=4*X;(T?T(k[re+0],k[re+1],k[re+2],k[re+3]):e<=k[re+2]&&r<=k[re+3]&&h>=k[re+0]&&d>=k[re+1])?(C[X]=!0,x.push(Q[X])):C[X]=!1}}}}_forEachCell(e,r,h,d,_,x,C,T){const P=this._convertToCellCoord(e),Q=this._convertToCellCoord(r),k=this._convertToCellCoord(h),K=this._convertToCellCoord(d);for(let X=P;X<=k;X++)for(let re=Q;re<=K;re++){const ae=this.d*re+X;if((!T||T(this._convertFromCellCoord(X),this._convertFromCellCoord(re),this._convertFromCellCoord(X+1),this._convertFromCellCoord(re+1)))&&_.call(this,e,r,h,d,ae,x,C,T))return}}_convertFromCellCoord(e){return(e-this.padding)/this.scale}_convertToCellCoord(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const e=this.cells,r=3+this.cells.length+1+1;let h=0;for(let x=0;x<this.cells.length;x++)h+=this.cells[x].length;const d=new Int32Array(r+h+this.keys.length+this.bboxes.length);d[0]=this.extent,d[1]=this.n,d[2]=this.padding;let _=r;for(let x=0;x<e.length;x++){const C=e[x];d[3+x]=_,d.set(C,_),_+=C.length}return d[3+e.length]=_,d.set(this.keys,_),_+=this.keys.length,d[3+e.length+1]=_,d.set(this.bboxes,_),_+=this.bboxes.length,d.buffer}static serialize(e,r){const h=e.toArrayBuffer();return r&&r.push(h),{buffer:h}}static deserialize(e){return new Mt(e.buffer)}}const Oe={};function Ze(a,e,r={}){if(Oe[a])throw new Error(`${a} is already registered.`);Object.defineProperty(e,"_classRegistryKey",{value:a,writeable:!1}),Oe[a]={klass:e,omit:r.omit||[],shallow:r.shallow||[]}}Ze("Object",Object),Ze("Set",Set),Ze("TransferableGridIndex",Mt),Ze("Color",cn),Ze("Error",Error),Ze("AJAXError",Ae),Ze("ResolvedImage",fs),Ze("StylePropertyFunction",sc),Ze("StyleExpression",Kc,{omit:["_evaluator"]}),Ze("ZoomDependentExpression",ic),Ze("ZoomConstantExpression",Ks),Ze("CompoundExpression",ho,{omit:["_evaluate"]});for(const a in vc)vc[a]._classRegistryKey||Ze(`Expression_${a}`,vc[a]);function Ft(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function Zt(a){return a.$name||a.constructor._classRegistryKey}function Ut(a){return!(function(e){if(e===null||typeof e!="object")return!1;const r=Zt(e);return!(!r||r==="Object")})(a)&&(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob||a instanceof Error||Ft(a)||Wr(a)||ArrayBuffer.isView(a)||a instanceof ImageData)}function Vt(a,e){if(Ut(a))return(Ft(a)||Wr(a))&&e&&e.push(a),ArrayBuffer.isView(a)&&e&&e.push(a.buffer),a instanceof ImageData&&e&&e.push(a.data.buffer),a;if(Array.isArray(a)){const _=[];for(const x of a)_.push(Vt(x,e));return _}if(typeof a!="object")throw new Error("can't serialize object of type "+typeof a);const r=Zt(a);if(!r)throw new Error(`can't serialize object of unregistered class ${a.constructor.name}`);if(!Oe[r])throw new Error(`${r} is not registered.`);const{klass:h}=Oe[r],d=h.serialize?h.serialize(a,e):{};if(h.serialize){if(e&&d===e[e.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const _ in a){if(!a.hasOwnProperty(_)||Oe[r].omit.indexOf(_)>=0)continue;const x=a[_];d[_]=Oe[r].shallow.indexOf(_)>=0?x:Vt(x,e)}a instanceof Error&&(d.message=a.message)}if(d.$name)throw new Error("$name property is reserved for worker serialization logic.");return r!=="Object"&&(d.$name=r),d}function er(a){if(Ut(a))return a;if(Array.isArray(a))return a.map(er);if(typeof a!="object")throw new Error("can't deserialize object of type "+typeof a);const e=Zt(a)||"Object";if(!Oe[e])throw new Error(`can't deserialize unregistered class ${e}`);const{klass:r}=Oe[e];if(!r)throw new Error(`can't deserialize unregistered class ${e}`);if(r.deserialize)return r.deserialize(a);const h=Object.create(r.prototype);for(const d of Object.keys(a)){if(d==="$name")continue;const _=a[d];h[d]=Oe[e].shallow.indexOf(d)>=0?_:er(_)}return h}class hr{constructor(){this.first=!0}update(e,r){const h=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=r):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=r),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=h,!0))}}function ar(a){return/[\u02EA\u02EB\u2E80-\u2FDF\u2FF0-\u303F\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u3105-\u312F\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(a))}function Mr(a){return/[\u02EA\u02EB\u1100-\u11FF\u1400-\u167F\u18B0-\u18F5\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303F\u3041-\u3096\u309D-\u30FB\u30FD-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF00-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFE4\uDFF0-\uDFF6]|[\uD81C-\uD822\uD83D\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD30-\uDEFB]|\uD833[\uDEC0-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83C[\uDC00-\uDE00\uDF00-\uDFFF]|\uD83E[\uDD00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(a))}function Lr(a){return/\s/u.test(String.fromCodePoint(a))}function yn(a){for(const e of a)if(Mr(e.codePointAt(0)))return!0;return!1}function Dr(a){for(const e of a)if(!Bn(e.codePointAt(0)))return!1;return!0}function Hn(a){const e=a.map((r=>{try{return new RegExp(`\\p{sc=${r}}`,"u").source}catch{return null}})).filter((r=>r));return new RegExp(e.join("|"),"u")}const Li=Hn(["Arab","Dupl","Mong","Ougr","Syrc"]);function Bn(a){return!Li.test(String.fromCodePoint(a))}function Fr(a){return!(Mr(a)||(e=a,/[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2100-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2BB8-\u2BEB\u3000-\u303F\u30A0-\u30FF\uE000-\uF8FF\uFE30-\uFE6F\uFF00-\uFFEF\uFFFC\uFFFD]|[\uDB80-\uDBFF][\uDC00-\uDFFF]/gim.test(String.fromCodePoint(e))));var e}const vr=Hn(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Qi(a){return vr.test(String.fromCodePoint(a))}function dn(a,e){return!(!e&&Qi(a)||/[\u0900-\u0DFF\u0F00-\u109F\u1780-\u17FF]/gim.test(String.fromCodePoint(a)))}function Ln(a){for(const e of a)if(Qi(e.codePointAt(0)))return!0;return!1}const Vn=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(a){this.pluginStatus=a.pluginStatus,this.pluginURL=a.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(a){if(Vn.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=a.applyArabicShaping,this.processBidirectionalText=a.processBidirectionalText,this.processStyledBidirectionalText=a.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(a,e){return A(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(a.pluginStatus!=="loading")return this.setState(a),a;const r=a.pluginURL,h=new Promise((_=>{this.loadScriptResolve=_}));e(r);const d=new Promise((_=>setTimeout((()=>_()),this.TIMEOUT)));if(yield Promise.race([h,d]),this.isParsed()){const _={pluginStatus:"loaded",pluginURL:r};return this.setState(_),_}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${r}`)}))}};class bn{constructor(e,r){this.isSupportedScript=$a,this.zoom=e,r?(this.now=r.now||0,this.fadeDuration=r.fadeDuration||0,this.zoomHistory=r.zoomHistory||new hr,this.transition=r.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new hr,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,r=e-Math.floor(e),h=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:r+(1-r)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*r}}}function $a(a){return(function(e,r){for(const h of e)if(!dn(h.codePointAt(0),r))return!1;return!0})(a,Vn.getRTLTextPluginStatus()==="loaded")}const Bi="-transition";class Ki{constructor(e,r,h){this.property=e,this.value=r,this.expression=(function(d,_,x){if(xc(d))return new sc(d,_);if(DA(d)){const C=ac(d,_,x);if(C.result==="error")throw new Error(C.value.map((T=>`${T.key}: ${T.message}`)).join(", "));return C.value}{let C=d;return _.type==="color"&&typeof d=="string"?C=cn.parse(d):_.type!=="padding"||typeof d!="number"&&!Array.isArray(d)?_.type!=="numberArray"||typeof d!="number"&&!Array.isArray(d)?_.type!=="colorArray"||typeof d!="string"&&!Array.isArray(d)?_.type==="variableAnchorOffsetCollection"&&Array.isArray(d)?C=jn.parse(d):_.type==="projectionDefinition"&&typeof d=="string"&&(C=Ma.parse(d)):C=gi.parse(d):C=ja.parse(d):C=Rr.parse(d),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>C}}})(r===void 0?e.specification.default:r,e.specification,h)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(e,r,h){return this.property.possiblyEvaluate(this,e,r,h)}}class Ja{constructor(e,r){this.property=e,this.value=new Ki(e,void 0,r)}transitioned(e,r){return new Rn(this.property,this.value,r,Pt({},e.transition,this.transition),e.now)}untransitioned(){return new Rn(this.property,this.value,null,{},0)}}class ma{constructor(e,r){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues),this._globalState=r}getValue(e){return pr(this._values[e].value.value)}setValue(e,r){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new Ja(this._values[e].property,this._globalState)),this._values[e].value=new Ki(this._values[e].property,r===null?void 0:pr(r),this._globalState)}getTransition(e){return pr(this._values[e].transition)}setTransition(e,r){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new Ja(this._values[e].property,this._globalState)),this._values[e].transition=pr(r)||void 0}serialize(){const e={};for(const r of Object.keys(this._values)){const h=this.getValue(r);h!==void 0&&(e[r]=h);const d=this.getTransition(r);d!==void 0&&(e[`${r}${Bi}`]=d)}return e}transitioned(e,r){const h=new ii(this._properties);for(const d of Object.keys(this._values))h._values[d]=this._values[d].transitioned(e,r._values[d]);return h}untransitioned(){const e=new ii(this._properties);for(const r of Object.keys(this._values))e._values[r]=this._values[r].untransitioned();return e}}class Rn{constructor(e,r,h,d,_){this.property=e,this.value=r,this.begin=_+d.delay||0,this.end=this.begin+d.duration||0,e.specification.transition&&(d.delay||d.duration)&&(this.prior=h)}possiblyEvaluate(e,r,h){const d=e.now||0,_=this.value.possiblyEvaluate(e,r,h),x=this.prior;if(x){if(d>this.end)return this.prior=null,_;if(this.value.isDataDriven())return this.prior=null,_;if(d<this.begin)return x.possiblyEvaluate(e,r,h);{const C=(d-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(e,r,h),_,xe(C))}}return _}}class ii{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,r,h){const d=new na(this._properties);for(const _ of Object.keys(this._values))d._values[_]=this._values[_].possiblyEvaluate(e,r,h);return d}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class ra{constructor(e,r){this._properties=e,this._values=Object.create(e.defaultPropertyValues),this._globalState=r}hasValue(e){return this._values[e].value!==void 0}getValue(e){return pr(this._values[e].value)}setValue(e,r){this._values[e]=new Ki(this._values[e].property,r===null?void 0:pr(r),this._globalState)}serialize(){const e={};for(const r of Object.keys(this._values)){const h=this.getValue(r);h!==void 0&&(e[r]=h)}return e}possiblyEvaluate(e,r,h){const d=new na(this._properties);for(const _ of Object.keys(this._values))d._values[_]=this._values[_].possiblyEvaluate(e,r,h);return d}}class Un{constructor(e,r,h){this.property=e,this.value=r,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(e){return this.value.kind==="constant"?this.value.value:e}evaluate(e,r,h,d){return this.property.evaluate(this.value,this.parameters,e,r,h,d)}}class na{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class gr{constructor(e){this.specification=e}possiblyEvaluate(e,r){if(e.isDataDriven())throw new Error("Value should not be data driven");return e.expression.evaluate(r)}interpolate(e,r,h){const d=wr[this.specification.type];return d?d(e,r,h):e}}class yr{constructor(e,r){this.specification=e,this.overrides=r}possiblyEvaluate(e,r,h,d){return new Un(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(r,null,{},h,d)}:e.expression,r)}interpolate(e,r,h){if(e.value.kind!=="constant"||r.value.kind!=="constant")return e;if(e.value.value===void 0||r.value.value===void 0)return new Un(this,{kind:"constant",value:void 0},e.parameters);const d=wr[this.specification.type];if(d){const _=d(e.value.value,r.value.value,h);return new Un(this,{kind:"constant",value:_},e.parameters)}return e}evaluate(e,r,h,d,_,x){return e.kind==="constant"?e.value:e.evaluate(r,h,d,_,x)}}class Ei extends yr{possiblyEvaluate(e,r,h,d){if(e.value===void 0)return new Un(this,{kind:"constant",value:void 0},r);if(e.expression.kind==="constant"){const _=e.expression.evaluate(r,null,{},h,d),x=e.property.specification.type==="resolvedImage"&&typeof _!="string"?_.name:_,C=this._calculate(x,x,x,r);return new Un(this,{kind:"constant",value:C},r)}if(e.expression.kind==="camera"){const _=this._calculate(e.expression.evaluate({zoom:r.zoom-1}),e.expression.evaluate({zoom:r.zoom}),e.expression.evaluate({zoom:r.zoom+1}),r);return new Un(this,{kind:"constant",value:_},r)}return new Un(this,e.expression,r)}evaluate(e,r,h,d,_,x){if(e.kind==="source"){const C=e.evaluate(r,h,d,_,x);return this._calculate(C,C,C,r)}return e.kind==="composite"?this._calculate(e.evaluate({zoom:Math.floor(r.zoom)-1},h,d),e.evaluate({zoom:Math.floor(r.zoom)},h,d),e.evaluate({zoom:Math.floor(r.zoom)+1},h,d),r):e.value}_calculate(e,r,h,d){return d.zoom>d.zoomHistory.lastIntegerZoom?{from:e,to:r}:{from:h,to:r}}interpolate(e){return e}}class yi{constructor(e){this.specification=e}possiblyEvaluate(e,r,h,d){if(e.value!==void 0){if(e.expression.kind==="constant"){const _=e.expression.evaluate(r,null,{},h,d);return this._calculate(_,_,_,r)}return this._calculate(e.expression.evaluate(new bn(Math.floor(r.zoom-1),r)),e.expression.evaluate(new bn(Math.floor(r.zoom),r)),e.expression.evaluate(new bn(Math.floor(r.zoom+1),r)),r)}}_calculate(e,r,h,d){return d.zoom>d.zoomHistory.lastIntegerZoom?{from:e,to:r}:{from:h,to:r}}interpolate(e){return e}}class ki{constructor(e){this.specification=e}possiblyEvaluate(e,r,h,d){return!!e.expression.evaluate(r,null,{},h,d)}interpolate(){return!1}}class ei{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const r in e){const h=e[r];h.specification.overridable&&this.overridableProperties.push(r);const d=this.defaultPropertyValues[r]=new Ki(h,void 0,void 0),_=this.defaultTransitionablePropertyValues[r]=new Ja(h,void 0);this.defaultTransitioningPropertyValues[r]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[r]=d.possiblyEvaluate({})}}}Ze("DataDrivenProperty",yr),Ze("DataConstantProperty",gr),Ze("CrossFadedDataDrivenProperty",Ei),Ze("CrossFadedProperty",yi),Ze("ColorRampProperty",ki);class Gn extends Bt{constructor(e,r,h){if(super(),this.id=e.id,this.type=e.type,this._globalState=h,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},this._visibilityExpression=(function(d,_){return new J(d,_)})(this.visibility,h),e.type!=="custom"&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,e.type!=="background"&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter,this._featureFilter=Is(e.filter,h)),r.layout&&(this._unevaluatedLayout=new ra(r.layout,h)),r.paint)){this._transitionablePaint=new ma(r.paint,h);for(const d in e.paint)this.setPaintProperty(d,e.paint[d],{validate:!1});for(const d in e.layout)this.setLayoutProperty(d,e.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new na(r.paint)}}setFilter(e){this.filter=e,this._featureFilter=Is(e,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return e==="visibility"?this.visibility:this._unevaluatedLayout.getValue(e)}getLayoutAffectingGlobalStateRefs(){const e=new Set;for(const r of this._visibilityExpression.getGlobalStateRefs())e.add(r);if(this._unevaluatedLayout)for(const r in this._unevaluatedLayout._values){const h=this._unevaluatedLayout._values[r];for(const d of h.getGlobalStateRefs())e.add(d)}for(const r of this._featureFilter.getGlobalStateRefs())e.add(r);return e}getPaintAffectingGlobalStateRefs(){var e;const r=new globalThis.Map;if(this._transitionablePaint)for(const h in this._transitionablePaint._values){const d=this._transitionablePaint._values[h].value;for(const _ of d.getGlobalStateRefs()){const x=(e=r.get(_))!==null&&e!==void 0?e:[];x.push({name:h,value:d.value}),r.set(_,x)}}return r}getVisibilityAffectingGlobalStateRefs(){return this._visibilityExpression.getGlobalStateRefs()}setLayoutProperty(e,r,h={}){if(r==null||!this._validate(Ke,`layers.${this.id}.layout.${e}`,e,r,h))return e==="visibility"?(this.visibility=r,this._visibilityExpression.setValue(r),void this.recalculateVisibility()):void this._unevaluatedLayout.setValue(e,r)}getPaintProperty(e){return e.endsWith(Bi)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,r,h={}){if(r!=null&&this._validate(Pe,`layers.${this.id}.paint.${e}`,e,r,h))return!1;if(e.endsWith(Bi))return this._transitionablePaint.setTransition(e.slice(0,-11),r||void 0),!1;{const d=this._transitionablePaint._values[e],_=d.property.specification["property-type"]==="cross-faded-data-driven",x=d.value.isDataDriven(),C=d.value;this._transitionablePaint.setValue(e,r),this._handleSpecialPaintPropertyUpdate(e);const T=this._transitionablePaint._values[e].value;return T.isDataDriven()||x||_||this._handleOverridablePaintPropertyUpdate(e,C,T)}}_handleSpecialPaintPropertyUpdate(e){}_handleOverridablePaintPropertyUpdate(e,r,h){return!1}isHidden(e=this.minzoom,r=!1){return!!(this.minzoom&&e<(r?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&e>=this.maxzoom)||this._evaluatedVisibility==="none"}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculateVisibility(){this._evaluatedVisibility=this._visibilityExpression.evaluate()}recalculate(e,r){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,r)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,r)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),Ar(e,((r,h)=>!(r===void 0||h==="layout"&&!Object.keys(r).length||h==="paint"&&!Object.keys(r).length)))}_validate(e,r,h,d,_={}){return(!_||_.validate!==!1)&&yt(this,e.call(pe,{key:r,layerType:this.type,objectKey:h,value:d,styleSpec:Qe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const r=this.paint.get(e);if(r instanceof Un&&po(r.property.specification)&&(r.value.kind==="source"||r.value.kind==="composite")&&r.value.isStateDependent)return!0}return!1}}let Yn;var ds={get paint(){return Yn=Yn||new ei({"raster-opacity":new gr(Qe.paint_raster["raster-opacity"]),"raster-hue-rotate":new gr(Qe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new gr(Qe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new gr(Qe.paint_raster["raster-brightness-max"]),"raster-saturation":new gr(Qe.paint_raster["raster-saturation"]),"raster-contrast":new gr(Qe.paint_raster["raster-contrast"]),"raster-resampling":new gr(Qe.paint_raster["raster-resampling"]),"raster-fade-duration":new gr(Qe.paint_raster["raster-fade-duration"])})}};class ia extends Gn{constructor(e,r){super(e,ds,r)}}const on={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class tn{constructor(e,r){this._structArray=e,this._pos1=r*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class sn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,r){return e._trim(),r&&(e.isTransferred=!0,r.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const r=Object.create(this.prototype);return r.arrayBuffer=e.arrayBuffer,r.length=e.length,r.capacity=e.arrayBuffer.byteLength/r.bytesPerElement,r._refreshViews(),r}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const r=this.uint8;this._refreshViews(),r&&this.uint8.set(r)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function $n(a,e=1){let r=0,h=0;return{members:a.map((d=>{const _=on[d.type].BYTES_PER_ELEMENT,x=r=Qo(r,Math.max(e,_)),C=d.components||1;return h=Math.max(h,_),r+=_*C,{name:d.name,type:d.type,components:C,offset:x}})),size:Qo(r,Math.max(h,e)),alignment:e}}function Qo(a,e){return Math.ceil(a/e)*e}class Zi extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r){const h=this.length;return this.resize(h+1),this.emplace(h,e,r)}emplace(e,r,h){const d=2*e;return this.int16[d+0]=r,this.int16[d+1]=h,e}}Zi.prototype.bytesPerElement=4,Ze("StructArrayLayout2i4",Zi);class aa extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,h){const d=this.length;return this.resize(d+1),this.emplace(d,e,r,h)}emplace(e,r,h,d){const _=3*e;return this.int16[_+0]=r,this.int16[_+1]=h,this.int16[_+2]=d,e}}aa.prototype.bytesPerElement=6,Ze("StructArrayLayout3i6",aa);class sA extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,h,d){const _=this.length;return this.resize(_+1),this.emplace(_,e,r,h,d)}emplace(e,r,h,d,_){const x=4*e;return this.int16[x+0]=r,this.int16[x+1]=h,this.int16[x+2]=d,this.int16[x+3]=_,e}}sA.prototype.bytesPerElement=8,Ze("StructArrayLayout4i8",sA);class oA extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,h,d,_,x){const C=this.length;return this.resize(C+1),this.emplace(C,e,r,h,d,_,x)}emplace(e,r,h,d,_,x,C){const T=6*e;return this.int16[T+0]=r,this.int16[T+1]=h,this.int16[T+2]=d,this.int16[T+3]=_,this.int16[T+4]=x,this.int16[T+5]=C,e}}oA.prototype.bytesPerElement=12,Ze("StructArrayLayout2i4i12",oA);class Bc extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,h,d,_,x){const C=this.length;return this.resize(C+1),this.emplace(C,e,r,h,d,_,x)}emplace(e,r,h,d,_,x,C){const T=4*e,P=8*e;return this.int16[T+0]=r,this.int16[T+1]=h,this.uint8[P+4]=d,this.uint8[P+5]=_,this.uint8[P+6]=x,this.uint8[P+7]=C,e}}Bc.prototype.bytesPerElement=8,Ze("StructArrayLayout2i4ub8",Bc);class _i extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r){const h=this.length;return this.resize(h+1),this.emplace(h,e,r)}emplace(e,r,h){const d=2*e;return this.float32[d+0]=r,this.float32[d+1]=h,e}}_i.prototype.bytesPerElement=8,Ze("StructArrayLayout2f8",_i);class Su extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,h,d,_,x,C,T,P,Q){const k=this.length;return this.resize(k+1),this.emplace(k,e,r,h,d,_,x,C,T,P,Q)}emplace(e,r,h,d,_,x,C,T,P,Q,k){const K=10*e;return this.uint16[K+0]=r,this.uint16[K+1]=h,this.uint16[K+2]=d,this.uint16[K+3]=_,this.uint16[K+4]=x,this.uint16[K+5]=C,this.uint16[K+6]=T,this.uint16[K+7]=P,this.uint16[K+8]=Q,this.uint16[K+9]=k,e}}Su.prototype.bytesPerElement=20,Ze("StructArrayLayout10ui20",Su);class Ul extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,h,d,_,x,C,T){const P=this.length;return this.resize(P+1),this.emplace(P,e,r,h,d,_,x,C,T)}emplace(e,r,h,d,_,x,C,T,P){const Q=8*e;return this.uint16[Q+0]=r,this.uint16[Q+1]=h,this.uint16[Q+2]=d,this.uint16[Q+3]=_,this.uint16[Q+4]=x,this.uint16[Q+5]=C,this.uint16[Q+6]=T,this.uint16[Q+7]=P,e}}Ul.prototype.bytesPerElement=16,Ze("StructArrayLayout8ui16",Ul);class Cc extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,h,d,_,x,C,T,P,Q,k,K){const X=this.length;return this.resize(X+1),this.emplace(X,e,r,h,d,_,x,C,T,P,Q,k,K)}emplace(e,r,h,d,_,x,C,T,P,Q,k,K,X){const re=12*e;return this.int16[re+0]=r,this.int16[re+1]=h,this.int16[re+2]=d,this.int16[re+3]=_,this.uint16[re+4]=x,this.uint16[re+5]=C,this.uint16[re+6]=T,this.uint16[re+7]=P,this.int16[re+8]=Q,this.int16[re+9]=k,this.int16[re+10]=K,this.int16[re+11]=X,e}}Cc.prototype.bytesPerElement=24,Ze("StructArrayLayout4i4ui4i24",Cc);class ko extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,h){const d=this.length;return this.resize(d+1),this.emplace(d,e,r,h)}emplace(e,r,h,d){const _=3*e;return this.float32[_+0]=r,this.float32[_+1]=h,this.float32[_+2]=d,e}}ko.prototype.bytesPerElement=12,Ze("StructArrayLayout3f12",ko);class $u extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.uint32[1*e+0]=r,e}}$u.prototype.bytesPerElement=4,Ze("StructArrayLayout1ul4",$u);class Sc extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,h,d,_,x,C,T,P){const Q=this.length;return this.resize(Q+1),this.emplace(Q,e,r,h,d,_,x,C,T,P)}emplace(e,r,h,d,_,x,C,T,P,Q){const k=10*e,K=5*e;return this.int16[k+0]=r,this.int16[k+1]=h,this.int16[k+2]=d,this.int16[k+3]=_,this.int16[k+4]=x,this.int16[k+5]=C,this.uint32[K+3]=T,this.uint16[k+8]=P,this.uint16[k+9]=Q,e}}Sc.prototype.bytesPerElement=20,Ze("StructArrayLayout6i1ul2ui20",Sc);class Eu extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,h,d,_,x){const C=this.length;return this.resize(C+1),this.emplace(C,e,r,h,d,_,x)}emplace(e,r,h,d,_,x,C){const T=6*e;return this.int16[T+0]=r,this.int16[T+1]=h,this.int16[T+2]=d,this.int16[T+3]=_,this.int16[T+4]=x,this.int16[T+5]=C,e}}Eu.prototype.bytesPerElement=12,Ze("StructArrayLayout2i2i2i12",Eu);class RA extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,h,d,_){const x=this.length;return this.resize(x+1),this.emplace(x,e,r,h,d,_)}emplace(e,r,h,d,_,x){const C=4*e,T=8*e;return this.float32[C+0]=r,this.float32[C+1]=h,this.float32[C+2]=d,this.int16[T+6]=_,this.int16[T+7]=x,e}}RA.prototype.bytesPerElement=16,Ze("StructArrayLayout2f1f2i16",RA);class Xi extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,r,h,d,_,x){const C=this.length;return this.resize(C+1),this.emplace(C,e,r,h,d,_,x)}emplace(e,r,h,d,_,x,C){const T=16*e,P=4*e,Q=8*e;return this.uint8[T+0]=r,this.uint8[T+1]=h,this.float32[P+1]=d,this.float32[P+2]=_,this.int16[Q+6]=x,this.int16[Q+7]=C,e}}Xi.prototype.bytesPerElement=16,Ze("StructArrayLayout2ub2f2i16",Xi);class Oi extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,h){const d=this.length;return this.resize(d+1),this.emplace(d,e,r,h)}emplace(e,r,h,d){const _=3*e;return this.uint16[_+0]=r,this.uint16[_+1]=h,this.uint16[_+2]=d,e}}Oi.prototype.bytesPerElement=6,Ze("StructArrayLayout3ui6",Oi);class cc extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,h,d,_,x,C,T,P,Q,k,K,X,re,ae,ue,ve){const He=this.length;return this.resize(He+1),this.emplace(He,e,r,h,d,_,x,C,T,P,Q,k,K,X,re,ae,ue,ve)}emplace(e,r,h,d,_,x,C,T,P,Q,k,K,X,re,ae,ue,ve,He){const me=24*e,Ie=12*e,rt=48*e;return this.int16[me+0]=r,this.int16[me+1]=h,this.uint16[me+2]=d,this.uint16[me+3]=_,this.uint32[Ie+2]=x,this.uint32[Ie+3]=C,this.uint32[Ie+4]=T,this.uint16[me+10]=P,this.uint16[me+11]=Q,this.uint16[me+12]=k,this.float32[Ie+7]=K,this.float32[Ie+8]=X,this.uint8[rt+36]=re,this.uint8[rt+37]=ae,this.uint8[rt+38]=ue,this.uint32[Ie+10]=ve,this.int16[me+22]=He,e}}cc.prototype.bytesPerElement=48,Ze("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",cc);class _o extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,h,d,_,x,C,T,P,Q,k,K,X,re,ae,ue,ve,He,me,Ie,rt,ct,Lt,qt,Xt,nr,mr,sr){const Yt=this.length;return this.resize(Yt+1),this.emplace(Yt,e,r,h,d,_,x,C,T,P,Q,k,K,X,re,ae,ue,ve,He,me,Ie,rt,ct,Lt,qt,Xt,nr,mr,sr)}emplace(e,r,h,d,_,x,C,T,P,Q,k,K,X,re,ae,ue,ve,He,me,Ie,rt,ct,Lt,qt,Xt,nr,mr,sr,Yt){const zt=32*e,Cr=16*e;return this.int16[zt+0]=r,this.int16[zt+1]=h,this.int16[zt+2]=d,this.int16[zt+3]=_,this.int16[zt+4]=x,this.int16[zt+5]=C,this.int16[zt+6]=T,this.int16[zt+7]=P,this.uint16[zt+8]=Q,this.uint16[zt+9]=k,this.uint16[zt+10]=K,this.uint16[zt+11]=X,this.uint16[zt+12]=re,this.uint16[zt+13]=ae,this.uint16[zt+14]=ue,this.uint16[zt+15]=ve,this.uint16[zt+16]=He,this.uint16[zt+17]=me,this.uint16[zt+18]=Ie,this.uint16[zt+19]=rt,this.uint16[zt+20]=ct,this.uint16[zt+21]=Lt,this.uint16[zt+22]=qt,this.uint32[Cr+12]=Xt,this.float32[Cr+13]=nr,this.float32[Cr+14]=mr,this.uint16[zt+30]=sr,this.uint16[zt+31]=Yt,e}}_o.prototype.bytesPerElement=64,Ze("StructArrayLayout8i15ui1ul2f2ui64",_o);class QA extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.float32[1*e+0]=r,e}}QA.prototype.bytesPerElement=4,Ze("StructArrayLayout1f4",QA);class kA extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,h){const d=this.length;return this.resize(d+1),this.emplace(d,e,r,h)}emplace(e,r,h,d){const _=3*e;return this.uint16[6*e+0]=r,this.float32[_+1]=h,this.float32[_+2]=d,e}}kA.prototype.bytesPerElement=12,Ze("StructArrayLayout1ui2f12",kA);class Oo extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r,h){const d=this.length;return this.resize(d+1),this.emplace(d,e,r,h)}emplace(e,r,h,d){const _=4*e;return this.uint32[2*e+0]=r,this.uint16[_+2]=h,this.uint16[_+3]=d,e}}Oo.prototype.bytesPerElement=8,Ze("StructArrayLayout1ul2ui8",Oo);class Xc extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,r){const h=this.length;return this.resize(h+1),this.emplace(h,e,r)}emplace(e,r,h){const d=2*e;return this.uint16[d+0]=r,this.uint16[d+1]=h,e}}Xc.prototype.bytesPerElement=4,Ze("StructArrayLayout2ui4",Xc);class b extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const r=this.length;return this.resize(r+1),this.emplace(r,e)}emplace(e,r){return this.uint16[1*e+0]=r,e}}b.prototype.bytesPerElement=2,Ze("StructArrayLayout1ui2",b);class t extends sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,r,h,d){const _=this.length;return this.resize(_+1),this.emplace(_,e,r,h,d)}emplace(e,r,h,d,_){const x=4*e;return this.float32[x+0]=r,this.float32[x+1]=h,this.float32[x+2]=d,this.float32[x+3]=_,e}}t.prototype.bytesPerElement=16,Ze("StructArrayLayout4f16",t);class l extends tn{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new S(this.anchorPointX,this.anchorPointY)}}l.prototype.size=20;class f extends Sc{get(e){return new l(this,e)}}Ze("CollisionBoxArray",f);class g extends tn{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}g.prototype.size=48;class B extends cc{get(e){return new g(this,e)}}Ze("PlacedSymbolArray",B);class E extends tn{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}E.prototype.size=64;class L extends _o{get(e){return new E(this,e)}}Ze("SymbolInstanceArray",L);class N extends QA{getoffsetX(e){return this.float32[1*e+0]}}Ze("GlyphOffsetArray",N);class H extends aa{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}Ze("SymbolLineVertexArray",H);class G extends tn{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}G.prototype.size=12;class $ extends kA{get(e){return new G(this,e)}}Ze("TextAnchorOffsetArray",$);class Y extends tn{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Y.prototype.size=8;class se extends Oo{get(e){return new Y(this,e)}}Ze("FeatureIndexArray",se);class de extends Zi{}class Se extends Zi{}class Me extends Zi{}class Ee extends oA{}class je extends Bc{}class et extends _i{}class ze extends Su{}class nt extends Ul{}class at extends Cc{}class $e extends ko{}class gt extends $u{}class Nt extends Eu{}class Dt extends Xi{}class It extends Oi{}class Qt extends Xc{}const cr=$n([{name:"a_pos",components:2,type:"Int16"}],4),{members:fr}=cr;class Ht{constructor(e=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=e}prepareSegment(e,r,h,d){const _=this.segments[this.segments.length-1];return e>Ht.MAX_VERTEX_ARRAY_LENGTH&&xr(`Max vertices per segment is ${Ht.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Ht.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!_||_.vertexLength+e>Ht.MAX_VERTEX_ARRAY_LENGTH||_.sortKey!==d?this.createNewSegment(r,h,d):_}createNewSegment(e,r,h){const d={vertexOffset:e.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0,vaos:{}};return h!==void 0&&(d.sortKey=h),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(d),d}getOrCreateLatestSegment(e,r,h){return this.prepareSegment(0,e,r,h)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const e of this.segments)for(const r in e.vaos)e.vaos[r].destroy()}static simpleSegment(e,r,h,d){return new Ht([{vertexOffset:e,primitiveOffset:r,vertexLength:h,primitiveLength:d,vaos:{},sortKey:0}])}}function Tr(a,e){return 256*(a=tt(Math.floor(a),0,255))+tt(Math.floor(e),0,255)}Ht.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ze("SegmentVector",Ht);const _n=$n([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),fi=$n([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var Ri,Mi,zi,vi={exports:{}},Va={exports:{}},sa={exports:{}},ps=(function(){if(zi)return vi.exports;zi=1;var a=(Ri||(Ri=1,Va.exports=function(r,h){var d,_,x,C,T,P,Q,k;for(_=r.length-(d=3&r.length),x=h,T=3432918353,P=461845907,k=0;k<_;)Q=255&r.charCodeAt(k)|(255&r.charCodeAt(++k))<<8|(255&r.charCodeAt(++k))<<16|(255&r.charCodeAt(++k))<<24,++k,x=27492+(65535&(C=5*(65535&(x=(x^=Q=(65535&(Q=(Q=(65535&Q)*T+(((Q>>>16)*T&65535)<<16)&4294967295)<<15|Q>>>17))*P+(((Q>>>16)*P&65535)<<16)&4294967295)<<13|x>>>19))+((5*(x>>>16)&65535)<<16)&4294967295))+((58964+(C>>>16)&65535)<<16);switch(Q=0,d){case 3:Q^=(255&r.charCodeAt(k+2))<<16;case 2:Q^=(255&r.charCodeAt(k+1))<<8;case 1:x^=Q=(65535&(Q=(Q=(65535&(Q^=255&r.charCodeAt(k)))*T+(((Q>>>16)*T&65535)<<16)&4294967295)<<15|Q>>>17))*P+(((Q>>>16)*P&65535)<<16)&4294967295}return x^=r.length,x=2246822507*(65535&(x^=x>>>16))+((2246822507*(x>>>16)&65535)<<16)&4294967295,x=3266489909*(65535&(x^=x>>>13))+((3266489909*(x>>>16)&65535)<<16)&4294967295,(x^=x>>>16)>>>0}),Va.exports),e=(Mi||(Mi=1,sa.exports=function(r,h){for(var d,_=r.length,x=h^_,C=0;_>=4;)d=1540483477*(65535&(d=255&r.charCodeAt(C)|(255&r.charCodeAt(++C))<<8|(255&r.charCodeAt(++C))<<16|(255&r.charCodeAt(++C))<<24))+((1540483477*(d>>>16)&65535)<<16),x=1540483477*(65535&x)+((1540483477*(x>>>16)&65535)<<16)^(d=1540483477*(65535&(d^=d>>>24))+((1540483477*(d>>>16)&65535)<<16)),_-=4,++C;switch(_){case 3:x^=(255&r.charCodeAt(C+2))<<16;case 2:x^=(255&r.charCodeAt(C+1))<<8;case 1:x=1540483477*(65535&(x^=255&r.charCodeAt(C)))+((1540483477*(x>>>16)&65535)<<16)}return x=1540483477*(65535&(x^=x>>>13))+((1540483477*(x>>>16)&65535)<<16),(x^=x>>>15)>>>0}),sa.exports);return vi.exports=a,vi.exports.murmur3=a,vi.exports.murmur2=e,vi.exports})(),ga=I(ps);class ya{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,r,h,d){this.ids.push(Ws(e)),this.positions.push(r,h,d)}getPositions(e){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const r=Ws(e);let h=0,d=this.ids.length-1;for(;h<d;){const x=h+d>>1;this.ids[x]>=r?d=x:h=x+1}const _=[];for(;this.ids[h]===r;)_.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return _}static serialize(e,r){const h=new Float64Array(e.ids),d=new Uint32Array(e.positions);return uc(h,d,0,h.length-1),r&&r.push(h.buffer,d.buffer),{ids:h,positions:d}}static deserialize(e){const r=new ya;return r.ids=e.ids,r.positions=e.positions,r.indexed=!0,r}}function Ws(a){const e=+a;return!isNaN(e)&&e<=Number.MAX_SAFE_INTEGER?e:ga(String(a))}function uc(a,e,r,h){for(;r<h;){const d=a[r+h>>1];let _=r-1,x=h+1;for(;;){do _++;while(a[_]<d);do x--;while(a[x]>d);if(_>=x)break;OA(a,_,x),OA(e,3*_,3*x),OA(e,3*_+1,3*x+1),OA(e,3*_+2,3*x+2)}x-r<h-x?(uc(a,e,r,x),r=x+1):(uc(a,e,x+1,h),h=x)}}function OA(a,e,r){const h=a[e];a[e]=a[r],a[r]=h}Ze("FeaturePositionMap",ya);class zo{constructor(e,r){this.gl=e.gl,this.location=r}}class Ec extends zo{constructor(e,r){super(e,r),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class Ju extends zo{constructor(e,r){super(e,r),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class Tc extends zo{constructor(e,r){super(e,r),this.current=cn.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const Wc=new Float32Array(16);function Ys(a){return[Tr(255*a.r,255*a.g),Tr(255*a.b,255*a.a)]}class Dl{constructor(e,r,h){this.value=e,this.uniformNames=r.map((d=>`u_${d}`)),this.type=h}setUniform(e,r,h){e.set(h.constantOr(this.value))}getBinding(e,r,h){return this.type==="color"?new Tc(e,r):new Ec(e,r)}}class al{constructor(e,r){this.uniformNames=r.map((h=>`u_${h}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,r){this.pixelRatioFrom=r.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=r.tlbr,this.patternTo=e.tlbr}setConstantDashPositions(e,r){this.dashTo=[0,e.y,e.height,e.width],this.dashFrom=[0,r.y,r.height,r.width]}setUniform(e,r,h,d){let _=null;d==="u_pattern_to"?_=this.patternTo:d==="u_pattern_from"?_=this.patternFrom:d==="u_dasharray_to"?_=this.dashTo:d==="u_dasharray_from"?_=this.dashFrom:d==="u_pixel_ratio_to"?_=this.pixelRatioTo:d==="u_pixel_ratio_from"&&(_=this.pixelRatioFrom),_!==null&&e.set(_)}getBinding(e,r,h){return h.startsWith("u_pattern")||h.startsWith("u_dasharray_")?new Ju(e,r):new Ec(e,r)}}class $s{constructor(e,r,h,d){this.expression=e,this.type=h,this.maxValue=0,this.paintVertexAttributes=r.map((_=>({name:`a_${_}`,type:"Float32",components:h==="color"?2:1,offset:0}))),this.paintVertexArray=new d}populatePaintArray(e,r,h){const d=this.paintVertexArray.length,_=this.expression.evaluate(new bn(0,h),r,{},h.canonical,[],h.formattedSection);this.paintVertexArray.resize(e),this._setPaintValue(d,e,_)}updatePaintArray(e,r,h,d,_){const x=this.expression.evaluate(new bn(0,_),h,d);this._setPaintValue(e,r,x)}_setPaintValue(e,r,h){if(this.type==="color"){const d=Ys(h);for(let _=e;_<r;_++)this.paintVertexArray.emplace(_,d[0],d[1])}else{for(let d=e;d<r;d++)this.paintVertexArray.emplace(d,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ti{constructor(e,r,h,d,_,x){this.expression=e,this.uniformNames=r.map((C=>`u_${C}_t`)),this.type=h,this.useIntegerZoom=d,this.zoom=_,this.maxValue=0,this.paintVertexAttributes=r.map((C=>({name:`a_${C}`,type:"Float32",components:h==="color"?4:2,offset:0}))),this.paintVertexArray=new x}populatePaintArray(e,r,h){const d=this.expression.evaluate(new bn(this.zoom,h),r,{},h.canonical,[],h.formattedSection),_=this.expression.evaluate(new bn(this.zoom+1,h),r,{},h.canonical,[],h.formattedSection),x=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(x,e,d,_)}updatePaintArray(e,r,h,d,_){const x=this.expression.evaluate(new bn(this.zoom,_),h,d),C=this.expression.evaluate(new bn(this.zoom+1,_),h,d);this._setPaintValue(e,r,x,C)}_setPaintValue(e,r,h,d){if(this.type==="color"){const _=Ys(h),x=Ys(d);for(let C=e;C<r;C++)this.paintVertexArray.emplace(C,_[0],_[1],x[0],x[1])}else{for(let _=e;_<r;_++)this.paintVertexArray.emplace(_,h,d);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(d))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,r){const h=this.useIntegerZoom?Math.floor(r.zoom):r.zoom,d=tt(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);e.set(d)}getBinding(e,r,h){return new Ec(e,r)}}class ji{constructor(e,r,h,d,_,x){this.expression=e,this.type=r,this.useIntegerZoom=h,this.zoom=d,this.layerId=x,this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _}populatePaintArray(e,r,h){const d=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(d,e,this.getPositionIds(r),h)}updatePaintArray(e,r,h,d,_){this._setPaintValues(e,r,this.getPositionIds(h),_)}_setPaintValues(e,r,h,d){const _=this.getPositions(d);if(!_||!h)return;const x=_[h.min],C=_[h.mid],T=_[h.max];if(x&&C&&T)for(let P=e;P<r;P++)this.emplace(this.zoomInPaintVertexArray,P,C,x),this.emplace(this.zoomOutPaintVertexArray,P,C,T)}upload(e){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const r=this.getVertexAttributes();this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,r,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,r,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class sl extends ji{getPositions(e){return e.imagePositions}getPositionIds(e){return e.patterns&&e.patterns[this.layerId]}getVertexAttributes(){return _n.members}emplace(e,r,h,d){e.emplace(r,h.tlbr[0],h.tlbr[1],h.tlbr[2],h.tlbr[3],d.tlbr[0],d.tlbr[1],d.tlbr[2],d.tlbr[3],h.pixelRatio,d.pixelRatio)}}class Ga extends ji{getPositions(e){return e.dashPositions}getPositionIds(e){return e.dashes&&e.dashes[this.layerId]}getVertexAttributes(){return fi.members}emplace(e,r,h,d){e.emplace(r,0,h.y,h.height,h.width,0,d.y,d.height,d.width)}}class hf{constructor(e,r,h){this.binders={},this._buffers=[];const d=[];for(const _ in e.paint._values){if(!h(_))continue;const x=e.paint.get(_);if(!(x instanceof Un&&po(x.property.specification)))continue;const C=Xd(_,e.type),T=x.value,P=x.property.specification.type,Q=x.property.useIntegerZoom,k=x.property.specification["property-type"],K=k==="cross-faded"||k==="cross-faded-data-driven";if(T.kind==="constant")this.binders[_]=K?new al(T.value,C):new Dl(T.value,C,P),d.push(`/u_${_}`);else if(T.kind==="source"||K){const X=$c(_,P,"source");this.binders[_]=K?_==="line-dasharray"?new Ga(T,P,Q,r,X,e.id):new sl(T,P,Q,r,X,e.id):new $s(T,C,P,X),d.push(`/a_${_}`)}else{const X=$c(_,P,"composite");this.binders[_]=new Ti(T,C,P,Q,r,X),d.push(`/z_${_}`)}}this.cacheKey=d.sort().join("")}getMaxValue(e){const r=this.binders[e];return r instanceof $s||r instanceof Ti?r.maxValue:0}populatePaintArrays(e,r,h){for(const d in this.binders){const _=this.binders[d];(_ instanceof $s||_ instanceof Ti||_ instanceof ji)&&_.populatePaintArray(e,r,h)}}setConstantPatternPositions(e,r){for(const h in this.binders){const d=this.binders[h];d instanceof al&&d.setConstantPatternPositions(e,r)}}setConstantDashPositions(e,r){for(const h in this.binders){const d=this.binders[h];d instanceof al&&d.setConstantDashPositions(e,r)}}updatePaintArrays(e,r,h,d,_){let x=!1;for(const C in e){const T=r.getPositions(C);for(const P of T){const Q=h.feature(P.index);for(const k in this.binders){const K=this.binders[k];if((K instanceof $s||K instanceof Ti||K instanceof ji)&&K.expression.isStateDependent===!0){const X=d.paint.get(k);K.expression=X.value,K.updatePaintArray(P.start,P.end,Q,e[C],_),x=!0}}}}return x}defines(){const e=[];for(const r in this.binders){const h=this.binders[r];(h instanceof Dl||h instanceof al)&&e.push(...h.uniformNames.map((d=>`#define HAS_UNIFORM_${d}`)))}return e}getBinderAttributes(){const e=[];for(const r in this.binders){const h=this.binders[r];if(h instanceof $s||h instanceof Ti)for(let d=0;d<h.paintVertexAttributes.length;d++)e.push(h.paintVertexAttributes[d].name);else if(h instanceof ji){const d=h.getVertexAttributes();for(const _ of d)e.push(_.name)}}return e}getBinderUniforms(){const e=[];for(const r in this.binders){const h=this.binders[r];if(h instanceof Dl||h instanceof al||h instanceof Ti)for(const d of h.uniformNames)e.push(d)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,r){const h=[];for(const d in this.binders){const _=this.binders[d];if(_ instanceof Dl||_ instanceof al||_ instanceof Ti){for(const x of _.uniformNames)if(r[x]){const C=_.getBinding(e,r[x],x);h.push({name:x,property:d,binding:C})}}}return h}setUniforms(e,r,h,d){for(const{name:_,property:x,binding:C}of r)this.binders[x].setUniform(C,d,h.get(x),_)}updatePaintBuffers(e){this._buffers=[];for(const r in this.binders){const h=this.binders[r];if(e&&h instanceof ji){const d=e.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;d&&this._buffers.push(d)}else(h instanceof $s||h instanceof Ti)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(e){for(const r in this.binders){const h=this.binders[r];(h instanceof $s||h instanceof Ti||h instanceof ji)&&h.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const r=this.binders[e];(r instanceof $s||r instanceof Ti||r instanceof ji)&&r.destroy()}}}class Yc{constructor(e,r,h=()=>!0){this.programConfigurations={};for(const d of e)this.programConfigurations[d.id]=new hf(d,r,h);this.needsUpload=!1,this._featureMap=new ya,this._bufferOffset=0}populatePaintArrays(e,r,h,d){for(const _ in this.programConfigurations)this.programConfigurations[_].populatePaintArrays(e,r,d);r.id!==void 0&&this._featureMap.add(r.id,h,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,r,h,d){for(const _ of h)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(e,this._featureMap,r,_,d)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const r in this.programConfigurations)this.programConfigurations[r].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}function Xd(a,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[a]||[a.replace(`${e}-`,"").replace(/-/g,"_")]}function $c(a,e,r){const h={color:{source:_i,composite:t},number:{source:QA,composite:_i}},d=(function(_){return{"line-pattern":{source:ze,composite:ze},"fill-pattern":{source:ze,composite:ze},"fill-extrusion-pattern":{source:ze,composite:ze},"line-dasharray":{source:nt,composite:nt}}[_]})(a);return d&&d[r]||h[e][r]}Ze("ConstantBinder",Dl),Ze("CrossFadedConstantBinder",al),Ze("SourceExpressionBinder",$s),Ze("CrossFadedPatternBinder",sl),Ze("CrossFadedDasharrayBinder",Ga),Ze("CompositeExpressionBinder",Ti),Ze("ProgramConfiguration",hf,{omit:["_buffers"]}),Ze("ProgramConfigurationSet",Yc);const ff=Math.pow(2,14)-1,ad=-ff-1;function ol(a){const e=xt/a.extent,r=a.loadGeometry();for(let h=0;h<r.length;h++){const d=r[h];for(let _=0;_<d.length;_++){const x=d[_],C=Math.round(x.x*e),T=Math.round(x.y*e);x.x=tt(C,ad,ff),x.y=tt(T,ad,ff),(C<x.x||C>x.x+1||T<x.y||T>x.y+1)&&xr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return r}function zA(a,e){return{type:a.type,id:a.id,properties:a.properties,geometry:e?ol(a):[]}}const df=-32768;function pf(a,e,r,h,d){a.emplaceBack(df+8*e+h,df+8*r+d)}class eh{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((r=>r.id)),this.index=e.index,this.hasDependencies=!1,this.layoutVertexArray=new Se,this.indexArray=new It,this.segments=new Ht,this.programConfigurations=new Yc(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter((r=>r.isStateDependent())).map((r=>r.id))}populate(e,r,h){const d=this.layers[0],_=[];let x=null,C=!1,T=d.type==="heatmap";if(d.type==="circle"){const Q=d;x=Q.layout.get("circle-sort-key"),C=!x.isConstant(),T=T||Q.paint.get("circle-pitch-alignment")==="map"}const P=T?r.subdivisionGranularity.circle:1;for(const{feature:Q,id:k,index:K,sourceLayerIndex:X}of e){const re=this.layers[0]._featureFilter.needGeometry,ae=zA(Q,re);if(!this.layers[0]._featureFilter.filter(new bn(this.zoom),ae,h))continue;const ue=C?x.evaluate(ae,{},h):void 0,ve={id:k,properties:Q.properties,type:Q.type,sourceLayerIndex:X,index:K,geometry:re?ae.geometry:ol(Q),patterns:{},sortKey:ue};_.push(ve)}C&&_.sort(((Q,k)=>Q.sortKey-k.sortKey));for(const Q of _){const{geometry:k,index:K,sourceLayerIndex:X}=Q,re=e[K].feature;this.addFeature(Q,k,K,h,P),r.featureIndex.insert(re,k,K,X,this.index)}}update(e,r,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,{imagePositions:h})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,fr),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,r,h,d,_=1){let x;switch(_){case 1:x=[0,7];break;case 3:x=[0,2,5,7];break;case 5:x=[0,1,3,4,6,7];break;case 7:x=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${_}; valid values are 1, 3, 5, 7.`)}const C=x.length;for(const T of r)for(const P of T){const Q=P.x,k=P.y;if(Q<0||Q>=xt||k<0||k>=xt)continue;const K=this.segments.prepareSegment(C*C,this.layoutVertexArray,this.indexArray,e.sortKey),X=K.vertexLength;for(let re=0;re<C;re++)for(let ae=0;ae<C;ae++)pf(this.layoutVertexArray,Q,k,x[ae],x[re]);for(let re=0;re<C-1;re++)for(let ae=0;ae<C-1;ae++){const ue=X+re*C+ae,ve=X+(re+1)*C+ae;this.indexArray.emplaceBack(ue,ve+1,ue+1),this.indexArray.emplaceBack(ue,ve,ve+1)}K.vertexLength+=C*C,K.primitiveLength+=(C-1)*(C-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,h,{imagePositions:{},canonical:d})}}function mf(a,e){for(let r=0;r<a.length;r++)if(Jc(e,a[r]))return!0;for(let r=0;r<e.length;r++)if(Jc(a,e[r]))return!0;return!!Js(a,e)}function th(a,e,r){return!!Jc(a,e)||!!Yd(e,a,r)}function Wd(a,e){if(a.length===1)return Bm(e,a[0]);for(let r=0;r<e.length;r++){const h=e[r];for(let d=0;d<h.length;d++)if(Jc(a,h[d]))return!0}for(let r=0;r<a.length;r++)if(Bm(e,a[r]))return!0;for(let r=0;r<e.length;r++)if(Js(a,e[r]))return!0;return!1}function Us(a,e,r){if(a.length>1){if(Js(a,e))return!0;for(let h=0;h<e.length;h++)if(Yd(e[h],a,r))return!0}for(let h=0;h<a.length;h++)if(Yd(a[h],e,r))return!0;return!1}function Js(a,e){if(a.length===0||e.length===0)return!1;for(let r=0;r<a.length-1;r++){const h=a[r],d=a[r+1];for(let _=0;_<e.length-1;_++)if(h0(h,d,e[_],e[_+1]))return!0}return!1}function h0(a,e,r,h){return Re(a,r,h)!==Re(e,r,h)&&Re(a,e,r)!==Re(a,e,h)}function Yd(a,e,r){const h=r*r;if(e.length===1)return a.distSqr(e[0])<h;for(let d=1;d<e.length;d++)if(wm(a,e[d-1],e[d])<h)return!0;return!1}function wm(a,e,r){const h=e.distSqr(r);if(h===0)return a.distSqr(e);const d=((a.x-e.x)*(r.x-e.x)+(a.y-e.y)*(r.y-e.y))/h;return a.distSqr(d<0?e:d>1?r:r.sub(e)._mult(d)._add(e))}function Bm(a,e){let r,h,d,_=!1;for(let x=0;x<a.length;x++){r=a[x];for(let C=0,T=r.length-1;C<r.length;T=C++)h=r[C],d=r[T],h.y>e.y!=d.y>e.y&&e.x<(d.x-h.x)*(e.y-h.y)/(d.y-h.y)+h.x&&(_=!_)}return _}function Jc(a,e){let r=!1;for(let h=0,d=a.length-1;h<a.length;d=h++){const _=a[h],x=a[d];_.y>e.y!=x.y>e.y&&e.x<(x.x-_.x)*(e.y-_.y)/(x.y-_.y)+_.x&&(r=!r)}return r}function f0(a,e,r){const h=r[0],d=r[2];if(a.x<h.x&&e.x<h.x||a.x>d.x&&e.x>d.x||a.y<h.y&&e.y<h.y||a.y>d.y&&e.y>d.y)return!1;const _=Re(a,e,r[0]);return _!==Re(a,e,r[1])||_!==Re(a,e,r[2])||_!==Re(a,e,r[3])}function Tu(a,e,r){const h=e.paint.get(a).value;return h.kind==="constant"?h.value:r.programConfigurations.get(e.id).getMaxValue(a)}function sd(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function $d(a,e,r,h,d){if(!e[0]&&!e[1])return a;const _=S.convert(e)._mult(d);r==="viewport"&&_._rotate(-h);const x=[];for(let C=0;C<a.length;C++)x.push(a[C].sub(_));return x}function Jd(a){const e=[];for(let r=0;r<a.length;r++){const h=a[r],d=e.at(-1);(r===0||d&&!h.equals(d))&&e.push(h)}return e}function Cm({queryGeometry:a,size:e},r){return th(a,r,e)}function d0({queryGeometry:a,size:e,transform:r,unwrappedTileID:h,getElevation:d},_){return th(a,_,e*(r.projectTileCoordinates(_.x,_.y,h,d).signedDistanceFromCamera/r.cameraToCenterDistance))}function p0({queryGeometry:a,size:e,transform:r,unwrappedTileID:h,getElevation:d},_){const x=r.projectTileCoordinates(_.x,_.y,h,d).signedDistanceFromCamera,C=e*(r.cameraToCenterDistance/x);return th(a,od(_,r,h,d),C)}function m0({queryGeometry:a,size:e,transform:r,unwrappedTileID:h,getElevation:d},_){return th(a,od(_,r,h,d),e)}function ep({queryGeometry:a,size:e,transform:r,unwrappedTileID:h,getElevation:d,pitchAlignment:_="map",pitchScale:x="map"},C){const T=_==="map"?x==="map"?Cm:d0:x==="map"?p0:m0,P={queryGeometry:a,size:e,transform:r,unwrappedTileID:h,getElevation:d};for(const Q of C)for(const k of Q)if(T(P,k))return!0;return!1}function od(a,e,r,h){const d=e.projectTileCoordinates(a.x,a.y,r,h).point;return new S((.5*d.x+.5)*e.width,(.5*-d.y+.5)*e.height)}let tp,Sm;Ze("CircleBucket",eh,{omit:["layers"]});var Em={get paint(){return Sm=Sm||new ei({"circle-radius":new yr(Qe.paint_circle["circle-radius"]),"circle-color":new yr(Qe.paint_circle["circle-color"]),"circle-blur":new yr(Qe.paint_circle["circle-blur"]),"circle-opacity":new yr(Qe.paint_circle["circle-opacity"]),"circle-translate":new gr(Qe.paint_circle["circle-translate"]),"circle-translate-anchor":new gr(Qe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new gr(Qe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new gr(Qe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new yr(Qe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new yr(Qe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new yr(Qe.paint_circle["circle-stroke-opacity"])})},get layout(){return tp=tp||new ei({"circle-sort-key":new yr(Qe.layout_circle["circle-sort-key"])})}};class rp extends Gn{constructor(e,r){super(e,Em,r)}createBucket(e){return new eh(e)}queryRadius(e){const r=e;return Tu("circle-radius",this,r)+Tu("circle-stroke-width",this,r)+sd(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:e,feature:r,featureState:h,geometry:d,transform:_,pixelsToTileUnits:x,unwrappedTileID:C,getElevation:T}){const P=$d(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-_.bearingInRadians,x),Q=this.paint.get("circle-radius").evaluate(r,h)+this.paint.get("circle-stroke-width").evaluate(r,h),k=this.paint.get("circle-pitch-scale"),K=this.paint.get("circle-pitch-alignment");let X,re;return K==="map"?(X=P,re=Q*x):(X=(function(ae,ue,ve,He){return ae.map((me=>od(me,ue,ve,He)))})(P,_,C,T),re=Q),ep({queryGeometry:X,size:re,transform:_,unwrappedTileID:C,getElevation:T,pitchAlignment:K,pitchScale:k},d)}}class np extends eh{}let Tm;Ze("HeatmapBucket",np,{omit:["layers"]});var Fm={get paint(){return Tm=Tm||new ei({"heatmap-radius":new yr(Qe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new yr(Qe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new gr(Qe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ki(Qe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new gr(Qe.paint_heatmap["heatmap-opacity"])})}};function ip(a,{width:e,height:r},h,d){if(d){if(d instanceof Uint8ClampedArray)d=new Uint8Array(d.buffer);else if(d.length!==e*r*h)throw new RangeError(`mismatched image size. expected: ${d.length} but got: ${e*r*h}`)}else d=new Uint8Array(e*r*h);return a.width=e,a.height=r,a.data=d,a}function eu(a,{width:e,height:r},h){if(e===a.width&&r===a.height)return;const d=ip({},{width:e,height:r},h);ld(a,d,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,e),height:Math.min(a.height,r)},h),a.width=e,a.height=r,a.data=d.data}function ld(a,e,r,h,d,_){if(d.width===0||d.height===0)return e;if(d.width>a.width||d.height>a.height||r.x>a.width-d.width||r.y>a.height-d.height)throw new RangeError("out of range source coordinates for image copy");if(d.width>e.width||d.height>e.height||h.x>e.width-d.width||h.y>e.height-d.height)throw new RangeError("out of range destination coordinates for image copy");const x=a.data,C=e.data;if(x===C)throw new Error("srcData equals dstData, so image is already copied");for(let T=0;T<d.height;T++){const P=((r.y+T)*a.width+r.x)*_,Q=((h.y+T)*e.width+h.x)*_;for(let k=0;k<d.width*_;k++)C[Q+k]=x[P+k]}return e}class Ad{constructor(e,r){ip(this,e,1,r)}resize(e){eu(this,e,1)}clone(){return new Ad({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,r,h,d,_){ld(e,r,h,d,_,1)}}class ll{constructor(e,r){ip(this,e,4,r)}resize(e){eu(this,e,4)}replace(e,r){r?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new ll({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,r,h,d,_){ld(e,r,h,d,_,4)}setPixel(e,r,h){const d=4*(e*this.width+r);this.data[d+0]=Math.round(255*h.r/h.a),this.data[d+1]=Math.round(255*h.g/h.a),this.data[d+2]=Math.round(255*h.b/h.a),this.data[d+3]=Math.round(255*h.a)}}function tu(a){const e=new Uint8Array(a.length);for(let r=0;r<a.length;r+=4){const h=a[r+3];e[r+0]=Math.round(a[r+0]*h/255),e[r+1]=Math.round(a[r+1]*h/255),e[r+2]=Math.round(a[r+2]*h/255),e[r+3]=h}return e}function ap(a){const e={},r=a.resolution||256,h=a.clips?a.clips.length:1,d=a.image||new ll({width:r,height:h});if(Math.log(r)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${r}`);const _=(x,C,T)=>{e[a.evaluationKey]=T;const P=a.expression.evaluate(e);d.setPixel(x/4/r,C/4,P)};if(a.clips)for(let x=0,C=0;x<h;++x,C+=4*r)for(let T=0,P=0;T<r;T++,P+=4){const Q=T/(r-1),{start:k,end:K}=a.clips[x];_(C,P,k*(1-Q)+K*Q)}else for(let x=0,C=0;x<r;x++,C+=4)_(0,C,x/(r-1));return d}Ze("AlphaImage",Ad),Ze("RGBAImage",ll);const sp="big-fb";class op extends Gn{createBucket(e){return new np(e)}constructor(e,r){super(e,Fm,r),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){e==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=ap({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(sp)&&this.heatmapFbos.delete(sp)}queryRadius(e){return Tu("heatmap-radius",this,e)}queryIntersectsFeature({queryGeometry:e,feature:r,featureState:h,geometry:d,transform:_,pixelsToTileUnits:x,unwrappedTileID:C,getElevation:T}){return ep({queryGeometry:e,size:this.paint.get("heatmap-radius").evaluate(r,h)*x,transform:_,unwrappedTileID:C,getElevation:T},d)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&!this.isHidden()}}let gf;var Ca={get paint(){return gf=gf||new ei({"hillshade-illumination-direction":new gr(Qe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new gr(Qe.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new gr(Qe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new gr(Qe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new gr(Qe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new gr(Qe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new gr(Qe.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new gr(Qe.paint_hillshade["hillshade-method"])})}};class e1 extends Gn{constructor(e,r){super(e,Ca,r),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let e=this.paint.get("hillshade-illumination-direction").values,r=this.paint.get("hillshade-illumination-altitude").values,h=this.paint.get("hillshade-highlight-color").values,d=this.paint.get("hillshade-shadow-color").values;const _=Math.max(e.length,r.length,h.length,d.length);e=e.concat(Array(_-e.length).fill(e.at(-1))),r=r.concat(Array(_-r.length).fill(r.at(-1))),h=h.concat(Array(_-h.length).fill(h.at(-1))),d=d.concat(Array(_-d.length).fill(d.at(-1)));const x=r.map(mn);return{directionRadians:e.map(mn),altitudeRadians:x,shadowColor:d,highlightColor:h}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&!this.isHidden()}}let g0;var y0={get paint(){return g0=g0||new ei({"color-relief-opacity":new gr(Qe["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new ki(Qe["paint_color-relief"]["color-relief-color"])})}};function yf(a){return"data"in a}class ru{constructor(e,r,h,d){this.context=e,this.format=h,this.texture=e.gl.createTexture(),this._ownedHandle=this.texture,this.update(r,d)}update(e,r,h){const{width:d,height:_}=e,x=!(this.size&&this.size[0]===d&&this.size[1]===_||h),{context:C}=this,{gl:T}=C;this.useMipmap=!!(r&&r.useMipmap),T.bindTexture(T.TEXTURE_2D,this.texture),C.pixelStoreUnpackFlipY.set(!1),C.pixelStoreUnpack.set(1);const P=this.format===T.RGBA&&(!r||r.premultiply!==!1);if(x)this.size=[d,_],yf(e)?(C.pixelStoreUnpackPremultiplyAlpha.set(!1),this._uploadRawData(e,P,d,_,T)):(C.pixelStoreUnpackPremultiplyAlpha.set(P),this._uploadDomImage(e,T));else{const{x:Q,y:k}=h||{x:0,y:0};yf(e)?(C.pixelStoreUnpackPremultiplyAlpha.set(!1),this._updateRawData(e,P,Q,k,d,_,T)):(C.pixelStoreUnpackPremultiplyAlpha.set(P),this._updateDomImage(e,Q,k,T))}this.useMipmap&&this.isSizePowerOfTwo()&&T.generateMipmap(T.TEXTURE_2D),C.pixelStoreUnpackFlipY.setDefault(),C.pixelStoreUnpack.setDefault(),C.pixelStoreUnpackPremultiplyAlpha.setDefault()}_uploadDomImage(e,r){r.texImage2D(r.TEXTURE_2D,0,this.format,this.format,r.UNSIGNED_BYTE,e)}_uploadRawData(e,r,h,d,_){let{data:x}=e;r&&x&&(x=tu(x)),_.texImage2D(_.TEXTURE_2D,0,this.format,h,d,0,this.format,_.UNSIGNED_BYTE,x)}_updateDomImage(e,r,h,d){d.texSubImage2D(d.TEXTURE_2D,0,r,h,d.RGBA,d.UNSIGNED_BYTE,e)}_updateRawData(e,r,h,d,_,x,C){let{data:T}=e;r&&T&&(T=tu(T)),C.texSubImage2D(C.TEXTURE_2D,0,h,d,_,x,C.RGBA,C.UNSIGNED_BYTE,T)}bind(e,r,h){const{context:d}=this,{gl:_}=d;this.texture!==this._ownedHandle&&(this.texture=this._ownedHandle),_.bindTexture(_.TEXTURE_2D,this.texture),h!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(h=_.LINEAR),e!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,e),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,h||e),this.filter=e),r!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,r),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,r),this.wrap=r)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null,this._ownedHandle=null}}class Im{constructor(e,r,h,d=1,_=1,x=1,C=0){if(this.uid=e,r.height!==r.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void xr(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=r.height;const T=this.dim=r.height-2;switch(this.data=new Uint32Array(r.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=d,this.greenFactor=_,this.blueFactor=x,this.baseShift=C;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let P=0;P<T;P++)this.data[this._idx(-1,P)]=this.data[this._idx(0,P)],this.data[this._idx(T,P)]=this.data[this._idx(T-1,P)],this.data[this._idx(P,-1)]=this.data[this._idx(P,0)],this.data[this._idx(P,T)]=this.data[this._idx(P,T-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(T,-1)]=this.data[this._idx(T-1,0)],this.data[this._idx(-1,T)]=this.data[this._idx(0,T-1)],this.data[this._idx(T,T)]=this.data[this._idx(T-1,T-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let P=0;P<T;P++)for(let Q=0;Q<T;Q++){const k=this.get(P,Q);k>this.max&&(this.max=k),k<this.min&&(this.min=k)}}get(e,r){const h=new Uint8Array(this.data.buffer),d=4*this._idx(e,r);return this.unpack(h[d],h[d+1],h[d+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(e,r){if(e<-1||e>=this.dim+1||r<-1||r>=this.dim+1)throw new RangeError(`Out of range source coordinates for DEM data. x: ${e}, y: ${r}, dim: ${this.dim}`);return(r+1)*this.stride+(e+1)}unpack(e,r,h){return e*this.redFactor+r*this.greenFactor+h*this.blueFactor-this.baseShift}pack(e){return Lm(e,this.getUnpackVector())}getPixels(){return new ll({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,r,h){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let d=r*this.dim,_=r*this.dim+this.dim,x=h*this.dim,C=h*this.dim+this.dim;switch(r){case-1:d=_-1;break;case 1:_=d+1}switch(h){case-1:x=C-1;break;case 1:C=x+1}const T=-r*this.dim,P=-h*this.dim;for(let Q=x;Q<C;Q++)for(let k=d;k<_;k++)this.data[this._idx(k,Q)]=e.data[this._idx(k+T,Q+P)]}}function Lm(a,e){const r=e[0],h=e[1],d=e[2],_=e[3],x=Math.min(r,h,d),C=Math.round((a+_)/x);return{r:Math.floor(C*x/r)%256,g:Math.floor(C*x/h)%256,b:Math.floor(C*x/d)%256}}Ze("DEMData",Im);class cd extends Gn{constructor(e,r){super(e,y0,r)}_createColorRamp(e){const r={elevationStops:[],colorStops:[]},h=this._transitionablePaint._values["color-relief-color"].value.expression;if(h instanceof Ks&&h._styleExpression.expression instanceof Kt){this.colorRampExpression=h;const x=h._styleExpression.expression;r.elevationStops=x.labels,r.colorStops=[];for(const C of r.elevationStops)r.colorStops.push(x.evaluate({globals:{elevation:C}}))}if(r.elevationStops.length<1&&(r.elevationStops=[0],r.colorStops=[cn.transparent]),r.elevationStops.length<2&&(r.elevationStops.push(r.elevationStops[0]+1),r.colorStops.push(r.colorStops[0])),r.elevationStops.length<=e)return r;const d={elevationStops:[],colorStops:[]},_=(r.elevationStops.length-1)/(e-1);for(let x=0;x<r.elevationStops.length-.5;x+=_)d.elevationStops.push(r.elevationStops[Math.round(x)]),d.colorStops.push(r.colorStops[Math.round(x)]);return xr(`Too many colors in specification of ${this.id} color-relief layer, may not render properly. Max possible colors: ${e}, provided: ${r.elevationStops.length}`),d}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(e,r,h){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const d=this._createColorRamp(r),_=new ll({width:d.colorStops.length,height:1}),x=new ll({width:d.colorStops.length,height:1});for(let C=0;C<d.elevationStops.length;C++){const T=Lm(d.elevationStops[C],h);x.setPixel(0,C,new cn(T.r/255,T.g/255,T.b/255,1)),_.setPixel(0,C,d.colorStops[C])}return this.colorRampTextures={elevationTexture:new ru(e,x,e.gl.RGBA),colorTexture:new ru(e,_,e.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return!this.isHidden()&&!!this.colorRampTextures}}const nu=$n([{name:"a_pos",components:2,type:"Int16"}],4),{members:_0}=nu;function _f(a,e,r){const h=r.patternDependencies;let d=!1;for(const _ of e){const x=_.paint.get(`${a}-pattern`);x.isConstant()||(d=!0);const C=x.constantOr(null);C&&(d=!0,h[C.to]=!0,h[C.from]=!0)}return d}function lp(a,e,r,h,d){const{zoom:_}=h,x=d.patternDependencies;for(const C of e){const T=C.paint.get(`${a}-pattern`).value;if(T.kind!=="constant"){let P=T.evaluate({zoom:_-1},r,{},d.availableImages),Q=T.evaluate({zoom:_},r,{},d.availableImages),k=T.evaluate({zoom:_+1},r,{},d.availableImages);P=P&&P.name?P.name:P,Q=Q&&Q.name?Q.name:Q,k=k&&k.name?k.name:k,x[P]=!0,x[Q]=!0,x[k]=!0,r.patterns[C.id]={min:P,mid:Q,max:k}}}return r}function Ap(a,e,r,h,d){let _;if(d===(function(x,C,T,P){let Q=0;for(let k=C,K=T-P;k<T;k+=P)Q+=(x[K]-x[k])*(x[k+1]+x[K+1]),K=k;return Q})(a,e,r,h)>0)for(let x=e;x<r;x+=h)_=Dm(x/h|0,a[x],a[x+1],_);else for(let x=r-h;x>=e;x-=h)_=Dm(x/h|0,a[x],a[x+1],_);return _&&Uh(_,_.next)&&(wo(_),_=_.next),_}function Fu(a,e){if(!a)return a;e||(e=a);let r,h=a;do if(r=!1,h.steiner||!Uh(h,h.next)&&ka(h.prev,h,h.next)!==0)h=h.next;else{if(wo(h),h=e=h.prev,h===h.next)break;r=!0}while(r||h!==e);return e}function rh(a,e,r,h,d,_,x){if(!a)return;!x&&_&&(function(T,P,Q,k){let K=T;do K.z===0&&(K.z=cp(K.x,K.y,P,Q,k)),K.prevZ=K.prev,K.nextZ=K.next,K=K.next;while(K!==T);K.prevZ.nextZ=null,K.prevZ=null,(function(X){let re,ae=1;do{let ue,ve=X;X=null;let He=null;for(re=0;ve;){re++;let me=ve,Ie=0;for(let ct=0;ct<ae&&(Ie++,me=me.nextZ,me);ct++);let rt=ae;for(;Ie>0||rt>0&&me;)Ie!==0&&(rt===0||!me||ve.z<=me.z)?(ue=ve,ve=ve.nextZ,Ie--):(ue=me,me=me.nextZ,rt--),He?He.nextZ=ue:X=ue,ue.prevZ=He,He=ue;ve=me}He.nextZ=null,ae*=2}while(re>1)})(K)})(a,h,d,_);let C=a;for(;a.prev!==a.next;){const T=a.prev,P=a.next;if(_?Iu(a,h,d,_):v0(a))e.push(T.i,a.i,P.i),wo(a),a=P.next,C=P.next;else if((a=P)===C){x?x===1?rh(a=Ds(Fu(a),e),e,r,h,d,_,2):x===2&&Mm(a,e,r,h,d,_):rh(Fu(a),e,r,h,d,_,1);break}}}function v0(a){const e=a.prev,r=a,h=a.next;if(ka(e,r,h)>=0)return!1;const d=e.x,_=r.x,x=h.x,C=e.y,T=r.y,P=h.y,Q=Math.min(d,_,x),k=Math.min(C,T,P),K=Math.max(d,_,x),X=Math.max(C,T,P);let re=h.next;for(;re!==e;){if(re.x>=Q&&re.x<=K&&re.y>=k&&re.y<=X&&xo(d,C,_,T,x,P,re.x,re.y)&&ka(re.prev,re,re.next)>=0)return!1;re=re.next}return!0}function Iu(a,e,r,h){const d=a.prev,_=a,x=a.next;if(ka(d,_,x)>=0)return!1;const C=d.x,T=_.x,P=x.x,Q=d.y,k=_.y,K=x.y,X=Math.min(C,T,P),re=Math.min(Q,k,K),ae=Math.max(C,T,P),ue=Math.max(Q,k,K),ve=cp(X,re,e,r,h),He=cp(ae,ue,e,r,h);let me=a.prevZ,Ie=a.nextZ;for(;me&&me.z>=ve&&Ie&&Ie.z<=He;){if(me.x>=X&&me.x<=ae&&me.y>=re&&me.y<=ue&&me!==d&&me!==x&&xo(C,Q,T,k,P,K,me.x,me.y)&&ka(me.prev,me,me.next)>=0||(me=me.prevZ,Ie.x>=X&&Ie.x<=ae&&Ie.y>=re&&Ie.y<=ue&&Ie!==d&&Ie!==x&&xo(C,Q,T,k,P,K,Ie.x,Ie.y)&&ka(Ie.prev,Ie,Ie.next)>=0))return!1;Ie=Ie.nextZ}for(;me&&me.z>=ve;){if(me.x>=X&&me.x<=ae&&me.y>=re&&me.y<=ue&&me!==d&&me!==x&&xo(C,Q,T,k,P,K,me.x,me.y)&&ka(me.prev,me,me.next)>=0)return!1;me=me.prevZ}for(;Ie&&Ie.z<=He;){if(Ie.x>=X&&Ie.x<=ae&&Ie.y>=re&&Ie.y<=ue&&Ie!==d&&Ie!==x&&xo(C,Q,T,k,P,K,Ie.x,Ie.y)&&ka(Ie.prev,Ie,Ie.next)>=0)return!1;Ie=Ie.nextZ}return!0}function Ds(a,e){let r=a;do{const h=r.prev,d=r.next.next;!Uh(h,d)&&Um(h,r,r.next,d)&&bo(h,d)&&bo(d,h)&&(e.push(h.i,r.i,d.i),wo(r),wo(r.next),r=a=d),r=r.next}while(r!==a);return Fu(r)}function Mm(a,e,r,h,d,_){let x=a;do{let C=x.next.next;for(;C!==x.prev;){if(x.i!==C.i&&Lu(x,C)){let T=hc(x,C);return x=Fu(x,x.next),T=Fu(T,T.next),rh(x,e,r,h,d,_,0),void rh(T,e,r,h,d,_,0)}C=C.next}x=x.next}while(x!==a)}function x0(a,e){let r=a.x-e.x;return r===0&&(r=a.y-e.y,r===0)&&(r=(a.next.y-a.y)/(a.next.x-a.x)-(e.next.y-e.y)/(e.next.x-e.x)),r}function vo(a,e){const r=(function(d,_){let x=_;const C=d.x,T=d.y;let P,Q=-1/0;if(Uh(d,x))return x;do{if(Uh(d,x.next))return x.next;if(T<=x.y&&T>=x.next.y&&x.next.y!==x.y){const ae=x.x+(T-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(ae<=C&&ae>Q&&(Q=ae,P=x.x<x.next.x?x:x.next,ae===C))return P}x=x.next}while(x!==_);if(!P)return null;const k=P,K=P.x,X=P.y;let re=1/0;x=P;do{if(C>=x.x&&x.x>=K&&C!==x.x&&Sa(T<X?C:Q,T,K,X,T<X?Q:C,T,x.x,x.y)){const ae=Math.abs(T-x.y)/(C-x.x);bo(x,d)&&(ae<re||ae===re&&(x.x>P.x||x.x===P.x&&t1(P,x)))&&(P=x,re=ae)}x=x.next}while(x!==k);return P})(a,e);if(!r)return e;const h=hc(r,a);return Fu(h,h.next),Fu(r,r.next)}function t1(a,e){return ka(a.prev,a,e.prev)<0&&ka(e.next,a,a.next)<0}function cp(a,e,r,h,d){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-r)*d|0)|a<<8))|a<<4))|a<<2))|a<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-h)*d|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function b0(a){let e=a,r=a;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==a);return r}function Sa(a,e,r,h,d,_,x,C){return(d-x)*(e-C)>=(a-x)*(_-C)&&(a-x)*(h-C)>=(r-x)*(e-C)&&(r-x)*(_-C)>=(d-x)*(h-C)}function xo(a,e,r,h,d,_,x,C){return!(a===x&&e===C)&&Sa(a,e,r,h,d,_,x,C)}function Lu(a,e){return a.next.i!==e.i&&a.prev.i!==e.i&&!(function(r,h){let d=r;do{if(d.i!==r.i&&d.next.i!==r.i&&d.i!==h.i&&d.next.i!==h.i&&Um(d,d.next,r,h))return!0;d=d.next}while(d!==r);return!1})(a,e)&&(bo(a,e)&&bo(e,a)&&(function(r,h){let d=r,_=!1;const x=(r.x+h.x)/2,C=(r.y+h.y)/2;do d.y>C!=d.next.y>C&&d.next.y!==d.y&&x<(d.next.x-d.x)*(C-d.y)/(d.next.y-d.y)+d.x&&(_=!_),d=d.next;while(d!==r);return _})(a,e)&&(ka(a.prev,a,e.prev)||ka(a,e.prev,e))||Uh(a,e)&&ka(a.prev,a,a.next)>0&&ka(e.prev,e,e.next)>0)}function ka(a,e,r){return(e.y-a.y)*(r.x-e.x)-(e.x-a.x)*(r.y-e.y)}function Uh(a,e){return a.x===e.x&&a.y===e.y}function Um(a,e,r,h){const d=Dh(ka(a,e,r)),_=Dh(ka(a,e,h)),x=Dh(ka(r,h,a)),C=Dh(ka(r,h,e));return d!==_&&x!==C||!(d!==0||!up(a,r,e))||!(_!==0||!up(a,h,e))||!(x!==0||!up(r,a,h))||!(C!==0||!up(r,e,h))}function up(a,e,r){return e.x<=Math.max(a.x,r.x)&&e.x>=Math.min(a.x,r.x)&&e.y<=Math.max(a.y,r.y)&&e.y>=Math.min(a.y,r.y)}function Dh(a){return a>0?1:a<0?-1:0}function bo(a,e){return ka(a.prev,a,a.next)<0?ka(a,e,a.next)>=0&&ka(a,a.prev,e)>=0:ka(a,e,a.prev)<0||ka(a,a.next,e)<0}function hc(a,e){const r=hp(a.i,a.x,a.y),h=hp(e.i,e.x,e.y),d=a.next,_=e.prev;return a.next=e,e.prev=a,r.next=d,d.prev=r,h.next=r,r.prev=h,_.next=h,h.prev=_,h}function Dm(a,e,r,h){const d=hp(a,e,r);return h?(d.next=h.next,d.prev=h,h.next.prev=d,h.next=d):(d.prev=d,d.next=d),d}function wo(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function hp(a,e,r){return{i:a,x:e,y:r,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class lA{constructor(e,r){if(r>e)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=e,this._minGranularity=r}getGranularityForZoomLevel(e){return Math.max(Math.floor(this._baseZoomGranularity/(1<<e)),this._minGranularity,1)}}class iu{constructor(e){this.fill=e.fill,this.line=e.line,this.tile=e.tile,this.stencil=e.stencil,this.circle=e.circle}}iu.noSubdivision=new iu({fill:new lA(0,0),line:new lA(0,0),tile:new lA(0,0),stencil:new lA(0,0),circle:1}),Ze("SubdivisionGranularityExpression",lA),Ze("SubdivisionGranularitySetting",iu);const AA=-32768,Ph=32767;class Pm{constructor(e,r){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=e,this._granularityCellSize=xt/e,this._canonical=r}_getKey(e,r){return(e+=32768)<<16|r+32768}_vertexToIndex(e,r){if(e<-32768||r<-32768||e>32767||r>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const h=0|Math.round(e),d=0|Math.round(r),_=this._getKey(h,d);if(this._vertexDictionary.has(_))return this._vertexDictionary.get(_);const x=this._vertexBuffer.length/2;return this._vertexDictionary.set(_,x),this._vertexBuffer.push(h,d),x}_subdivideTrianglesScanline(e){if(this._granularity<2)return(function(d,_){const x=[];for(let C=0;C<_.length;C+=3){const T=_[C],P=_[C+1],Q=_[C+2],k=d[2*T],K=d[2*T+1];(d[2*P]-k)*(d[2*Q+1]-K)-(d[2*P+1]-K)*(d[2*Q]-k)>0?(x.push(T),x.push(Q),x.push(P)):(x.push(T),x.push(P),x.push(Q))}return x})(this._vertexBuffer,e);const r=[],h=e.length;for(let d=0;d<h;d+=3){const _=[e[d+0],e[d+1],e[d+2]],x=[this._vertexBuffer[2*e[d+0]+0],this._vertexBuffer[2*e[d+0]+1],this._vertexBuffer[2*e[d+1]+0],this._vertexBuffer[2*e[d+1]+1],this._vertexBuffer[2*e[d+2]+0],this._vertexBuffer[2*e[d+2]+1]];let C=1/0,T=1/0,P=-1/0,Q=-1/0;for(let ae=0;ae<3;ae++){const ue=x[2*ae],ve=x[2*ae+1];C=Math.min(C,ue),P=Math.max(P,ue),T=Math.min(T,ve),Q=Math.max(Q,ve)}if(C===P||T===Q)continue;const k=Math.floor(C/this._granularityCellSize),K=Math.ceil(P/this._granularityCellSize),X=Math.floor(T/this._granularityCellSize),re=Math.ceil(Q/this._granularityCellSize);if(k!==K||X!==re)for(let ae=X;ae<re;ae++){const ue=this._scanlineGenerateVertexRingForCellRow(ae,x,_);vf(this._vertexBuffer,ue,r)}else r.push(..._)}return r}_scanlineGenerateVertexRingForCellRow(e,r,h){const d=e*this._granularityCellSize,_=d+this._granularityCellSize,x=[];for(let C=0;C<3;C++){const T=r[2*C],P=r[2*C+1],Q=r[2*(C+1)%6],k=r[(2*(C+1)+1)%6],K=r[2*(C+2)%6],X=r[(2*(C+2)+1)%6],re=Q-T,ae=k-P,ue=re===0,ve=ae===0,He=(d-P)/ae,me=(_-P)/ae,Ie=Math.min(He,me),rt=Math.max(He,me);if(!ve&&(Ie>=1||rt<=0)||ve&&(P<d||P>_)){k>=d&&k<=_&&x.push(h[(C+1)%3]);continue}!ve&&Ie>0&&x.push(this._vertexToIndex(T+re*Ie,P+ae*Ie));const ct=T+re*Math.max(Ie,0),Lt=T+re*Math.min(rt,1);ue||this._generateIntraEdgeVertices(x,T,P,Q,k,ct,Lt),!ve&&rt<1&&x.push(this._vertexToIndex(T+re*rt,P+ae*rt)),(ve||k>=d&&k<=_)&&x.push(h[(C+1)%3]),!ve&&(k<=d||k>=_)&&this._generateInterEdgeVertices(x,T,P,Q,k,K,X,Lt,d,_)}return x}_generateIntraEdgeVertices(e,r,h,d,_,x,C){const T=d-r,P=_-h,Q=P===0,k=Q?Math.min(r,d):Math.min(x,C),K=Q?Math.max(r,d):Math.max(x,C),X=Math.floor(k/this._granularityCellSize)+1,re=Math.ceil(K/this._granularityCellSize)-1;if(Q?r<d:x<C)for(let ae=X;ae<=re;ae++){const ue=ae*this._granularityCellSize;e.push(this._vertexToIndex(ue,h+P*(ue-r)/T))}else for(let ae=re;ae>=X;ae--){const ue=ae*this._granularityCellSize;e.push(this._vertexToIndex(ue,h+P*(ue-r)/T))}}_generateInterEdgeVertices(e,r,h,d,_,x,C,T,P,Q){const k=_-h,K=x-d,X=C-_,re=(P-_)/X,ae=(Q-_)/X,ue=Math.min(re,ae),ve=Math.max(re,ae),He=d+K*ue;let me=Math.floor(Math.min(He,T)/this._granularityCellSize)+1,Ie=Math.ceil(Math.max(He,T)/this._granularityCellSize)-1,rt=T<He;const ct=X===0;if(ct&&(C===P||C===Q))return;if(ct||ue>=1||ve<=0){const qt=h-C,Xt=x+(r-x)*Math.min((P-C)/qt,(Q-C)/qt);me=Math.floor(Math.min(Xt,T)/this._granularityCellSize)+1,Ie=Math.ceil(Math.max(Xt,T)/this._granularityCellSize)-1,rt=T<Xt}const Lt=k>0?Q:P;if(rt)for(let qt=me;qt<=Ie;qt++)e.push(this._vertexToIndex(qt*this._granularityCellSize,Lt));else for(let qt=Ie;qt>=me;qt--)e.push(this._vertexToIndex(qt*this._granularityCellSize,Lt))}_generateOutline(e){const r=[];for(const h of e){const d=nh(h,this._granularity,!0),_=this._pointArrayToIndices(d),x=[];for(let C=1;C<_.length;C++)x.push(_[C-1]),x.push(_[C]);r.push(x)}return r}_handlePoles(e){let r=!1,h=!1;this._canonical&&(this._canonical.y===0&&(r=!0),this._canonical.y===(1<<this._canonical.z)-1&&(h=!0)),(r||h)&&this._fillPoles(e,r,h)}_ensureNoPoleVertices(){const e=this._vertexBuffer;for(let r=0;r<e.length;r+=2){const h=e[r+1];h===AA&&(e[r+1]=-32767),h===Ph&&(e[r+1]=32766)}}_generatePoleQuad(e,r,h,d,_,x){d>_!=(x===AA)?(e.push(r),e.push(h),e.push(this._vertexToIndex(d,x)),e.push(h),e.push(this._vertexToIndex(_,x)),e.push(this._vertexToIndex(d,x))):(e.push(h),e.push(r),e.push(this._vertexToIndex(d,x)),e.push(this._vertexToIndex(_,x)),e.push(h),e.push(this._vertexToIndex(d,x)))}_fillPoles(e,r,h){const d=this._vertexBuffer,_=xt,x=e.length;for(let C=2;C<x;C+=3){const T=e[C-2],P=e[C-1],Q=e[C],k=d[2*T],K=d[2*T+1],X=d[2*P],re=d[2*P+1],ae=d[2*Q],ue=d[2*Q+1];r&&(K===0&&re===0&&this._generatePoleQuad(e,T,P,k,X,AA),re===0&&ue===0&&this._generatePoleQuad(e,P,Q,X,ae,AA),ue===0&&K===0&&this._generatePoleQuad(e,Q,T,ae,k,AA)),h&&(K===_&&re===_&&this._generatePoleQuad(e,T,P,k,X,Ph),re===_&&ue===_&&this._generatePoleQuad(e,P,Q,X,ae,Ph),ue===_&&K===_&&this._generatePoleQuad(e,Q,T,ae,k,Ph))}}_initializeVertices(e){for(let r=0;r<e.length;r+=2)this._vertexToIndex(e[r],e[r+1])}subdividePolygonInternal(e,r){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:h,holeIndices:d}=(function(C){const T=[],P=[];for(const Q of C)if(Q.length!==0){Q!==C[0]&&T.push(P.length/2);for(let k=0;k<Q.length;k++)P.push(Q[k].x),P.push(Q[k].y)}return{flattened:P,holeIndices:T}})(e);let _;this._initializeVertices(h);try{const C=(function(P,Q,k=2){const K=Q&&Q.length,X=K?Q[0]*k:P.length;let re=Ap(P,0,X,k,!0);const ae=[];if(!re||re.next===re.prev)return ae;let ue,ve,He;if(K&&(re=(function(me,Ie,rt,ct){const Lt=[];for(let qt=0,Xt=Ie.length;qt<Xt;qt++){const nr=Ap(me,Ie[qt]*ct,qt<Xt-1?Ie[qt+1]*ct:me.length,ct,!1);nr===nr.next&&(nr.steiner=!0),Lt.push(b0(nr))}Lt.sort(x0);for(let qt=0;qt<Lt.length;qt++)rt=vo(Lt[qt],rt);return rt})(P,Q,re,k)),P.length>80*k){ue=P[0],ve=P[1];let me=ue,Ie=ve;for(let rt=k;rt<X;rt+=k){const ct=P[rt],Lt=P[rt+1];ct<ue&&(ue=ct),Lt<ve&&(ve=Lt),ct>me&&(me=ct),Lt>Ie&&(Ie=Lt)}He=Math.max(me-ue,Ie-ve),He=He!==0?32767/He:0}return rh(re,ae,k,ue,ve,He,0),ae})(h,d),T=this._convertIndices(h,C);_=this._subdivideTrianglesScanline(T)}catch(C){console.error(C)}let x=[];return r&&(x=this._generateOutline(e)),this._ensureNoPoleVertices(),this._handlePoles(_),{verticesFlattened:this._vertexBuffer,indicesTriangles:_,indicesLineList:x}}_convertIndices(e,r){const h=[];for(let d=0;d<r.length;d++)h.push(this._vertexToIndex(e[2*r[d]],e[2*r[d]+1]));return h}_pointArrayToIndices(e){const r=[];for(let h=0;h<e.length;h++){const d=e[h];r.push(this._vertexToIndex(d.x,d.y))}return r}}function fc(a,e,r,h=!0){return new Pm(r,e).subdividePolygonInternal(a,h)}function nh(a,e,r=!1){if(!a||a.length<1)return[];if(a.length<2)return[];const h=a[0],d=a[a.length-1],_=r&&(h.x!==d.x||h.y!==d.y);if(e<2)return _?[...a,a[0]]:[...a];const x=Math.floor(xt/e),C=[];C.push(new S(a[0].x,a[0].y));const T=a.length,P=_?T:T-1;for(let Q=0;Q<P;Q++){const k=a[Q],K=Q<T-1?a[Q+1]:a[0],X=k.x,re=k.y,ae=K.x,ue=K.y,ve=X!==ae,He=re!==ue;if(!ve&&!He)continue;const me=ae-X,Ie=ue-re,rt=Math.abs(me),ct=Math.abs(Ie);let Lt=X,qt=re;for(;;){const nr=me>0?(Math.floor(Lt/x)+1)*x:(Math.ceil(Lt/x)-1)*x,mr=Ie>0?(Math.floor(qt/x)+1)*x:(Math.ceil(qt/x)-1)*x,sr=Math.abs(Lt-nr),Yt=Math.abs(qt-mr),zt=Math.abs(Lt-ae),Cr=Math.abs(qt-ue),Ir=ve?sr/rt:Number.POSITIVE_INFINITY,$r=He?Yt/ct:Number.POSITIVE_INFINITY;if((zt<=sr||!ve)&&(Cr<=Yt||!He))break;if(Ir<$r&&ve||!He){Lt=nr,qt+=Ie*Ir;const Ur=new S(Lt,Math.round(qt));C[C.length-1].x===Ur.x&&C[C.length-1].y===Ur.y||C.push(Ur)}else{Lt+=me*$r,qt=mr;const Ur=new S(Math.round(Lt),qt);C[C.length-1].x===Ur.x&&C[C.length-1].y===Ur.y||C.push(Ur)}}const Xt=new S(ae,ue);C[C.length-1].x===Xt.x&&C[C.length-1].y===Xt.y||C.push(Xt)}return C}function vf(a,e,r){if(e.length===0)throw new Error("Subdivision vertex ring is empty.");let h=0,d=a[2*e[0]];for(let T=1;T<e.length;T++){const P=a[2*e[T]];P<d&&(d=P,h=T)}const _=e.length;let x=h,C=(x+1)%_;for(;;){const T=x-1>=0?x-1:_-1,P=(C+1)%_,Q=a[2*e[T]],k=a[2*e[P]],K=a[2*e[x]],X=a[2*e[x]+1],re=a[2*e[C]+1];let ae=!1;if(Q<k)ae=!0;else if(Q>k)ae=!1;else{const ue=re-X,ve=-(a[2*e[C]]-K),He=X<re?1:-1;((Q-K)*ue+(a[2*e[T]+1]-X)*ve)*He>((k-K)*ue+(a[2*e[P]+1]-X)*ve)*He&&(ae=!0)}if(ae){const ue=e[T],ve=e[x],He=e[C];ue!==ve&&ue!==He&&ve!==He&&r.push(He,ve,ue),x--,x<0&&(x=_-1)}else{const ue=e[P],ve=e[x],He=e[C];ue!==ve&&ue!==He&&ve!==He&&r.push(He,ve,ue),C++,C>=_&&(C=0)}if(T===P)break}}function xf(a,e,r,h,d,_,x,C,T){const P=d.length/2,Q=x&&C&&T;if(P<Ht.MAX_VERTEX_ARRAY_LENGTH){const k=e.prepareSegment(P,r,h),K=k.vertexLength;for(let ae=0;ae<_.length;ae+=3)h.emplaceBack(K+_[ae],K+_[ae+1],K+_[ae+2]);let X,re;k.vertexLength+=P,k.primitiveLength+=_.length/3,Q&&(re=x.prepareSegment(P,r,C),X=re.vertexLength,re.vertexLength+=P);for(let ae=0;ae<d.length;ae+=2)a(d[ae],d[ae+1]);if(Q)for(let ae=0;ae<T.length;ae++){const ue=T[ae];for(let ve=1;ve<ue.length;ve+=2)C.emplaceBack(X+ue[ve-1],X+ue[ve]);re.primitiveLength+=ue.length/2}}else(function(k,K,X,re,ae,ue){const ve=[];for(let ct=0;ct<re.length/2;ct++)ve.push(-1);const He={count:0};let me=0,Ie=k.getOrCreateLatestSegment(K,X),rt=Ie.vertexLength;for(let ct=2;ct<ae.length;ct+=3){const Lt=ae[ct-2],qt=ae[ct-1],Xt=ae[ct];let nr=ve[Lt]<me,mr=ve[qt]<me,sr=ve[Xt]<me;Ie.vertexLength+((nr?1:0)+(mr?1:0)+(sr?1:0))>Ht.MAX_VERTEX_ARRAY_LENGTH&&(Ie=k.createNewSegment(K,X),me=He.count,nr=!0,mr=!0,sr=!0,rt=0);const Yt=Mu(ve,re,ue,He,Lt,nr,Ie),zt=Mu(ve,re,ue,He,qt,mr,Ie),Cr=Mu(ve,re,ue,He,Xt,sr,Ie);X.emplaceBack(rt+Yt-me,rt+zt-me,rt+Cr-me),Ie.primitiveLength++}})(e,r,h,d,_,a),Q&&(function(k,K,X,re,ae,ue){const ve=[];for(let ct=0;ct<re.length/2;ct++)ve.push(-1);const He={count:0};let me=0,Ie=k.getOrCreateLatestSegment(K,X),rt=Ie.vertexLength;for(let ct=0;ct<ae.length;ct++){const Lt=ae[ct];for(let qt=1;qt<ae[ct].length;qt+=2){const Xt=Lt[qt-1],nr=Lt[qt];let mr=ve[Xt]<me,sr=ve[nr]<me;Ie.vertexLength+((mr?1:0)+(sr?1:0))>Ht.MAX_VERTEX_ARRAY_LENGTH&&(Ie=k.createNewSegment(K,X),me=He.count,mr=!0,sr=!0,rt=0);const Yt=Mu(ve,re,ue,He,Xt,mr,Ie),zt=Mu(ve,re,ue,He,nr,sr,Ie);X.emplaceBack(rt+Yt-me,rt+zt-me),Ie.primitiveLength++}}})(x,r,C,d,T,a),e.forceNewSegmentOnNextPrepare(),x?.forceNewSegmentOnNextPrepare()}function Mu(a,e,r,h,d,_,x){if(_){const C=h.count;return r(e[2*d],e[2*d+1]),a[d]=h.count,h.count++,x.vertexLength++,C}return a[d]}class ih{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((r=>r.id)),this.index=e.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new Me,this.indexArray=new It,this.indexArray2=new Qt,this.programConfigurations=new Yc(e.layers,e.zoom),this.segments=new Ht,this.segments2=new Ht,this.stateDependentLayerIds=this.layers.filter((r=>r.isStateDependent())).map((r=>r.id))}populate(e,r,h){this.hasDependencies=_f("fill",this.layers,r);const d=this.layers[0].layout.get("fill-sort-key"),_=!d.isConstant(),x=[];for(const{feature:C,id:T,index:P,sourceLayerIndex:Q}of e){const k=this.layers[0]._featureFilter.needGeometry,K=zA(C,k);if(!this.layers[0]._featureFilter.filter(new bn(this.zoom),K,h))continue;const X=_?d.evaluate(K,{},h,r.availableImages):void 0,re={id:T,properties:C.properties,type:C.type,sourceLayerIndex:Q,index:P,geometry:k?K.geometry:ol(C),patterns:{},sortKey:X};x.push(re)}_&&x.sort(((C,T)=>C.sortKey-T.sortKey));for(const C of x){const{geometry:T,index:P,sourceLayerIndex:Q}=C;if(this.hasDependencies){const k=lp("fill",this.layers,C,{zoom:this.zoom},r);this.patternFeatures.push(k)}else this.addFeature(C,T,P,h,{},r.subdivisionGranularity);r.featureIndex.insert(e[P].feature,T,P,Q,this.index)}}update(e,r,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,{imagePositions:h})}addFeatures(e,r,h){for(const d of this.patternFeatures)this.addFeature(d,d.geometry,d.index,r,h,e.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,_0),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,r,h,d,_,x){for(const C of Po(r,500)){const T=fc(C,d,x.fill.getGranularityForZoomLevel(d.z)),P=this.layoutVertexArray;xf(((Q,k)=>{P.emplaceBack(Q,k)}),this.segments,this.layoutVertexArray,this.indexArray,T.verticesFlattened,T.indicesTriangles,this.segments2,this.indexArray2,T.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,h,{imagePositions:_,canonical:d})}}let Nm,Rm;Ze("FillBucket",ih,{omit:["layers","patternFeatures"]});var ud={get paint(){return Rm=Rm||new ei({"fill-antialias":new gr(Qe.paint_fill["fill-antialias"]),"fill-opacity":new yr(Qe.paint_fill["fill-opacity"]),"fill-color":new yr(Qe.paint_fill["fill-color"]),"fill-outline-color":new yr(Qe.paint_fill["fill-outline-color"]),"fill-translate":new gr(Qe.paint_fill["fill-translate"]),"fill-translate-anchor":new gr(Qe.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ei(Qe.paint_fill["fill-pattern"])})},get layout(){return Nm=Nm||new ei({"fill-sort-key":new yr(Qe.layout_fill["fill-sort-key"])})}};class w0 extends Gn{constructor(e,r){super(e,ud,r)}recalculate(e,r){super.recalculate(e,r);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new ih(e)}queryRadius(){return sd(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:e,geometry:r,transform:h,pixelsToTileUnits:d}){return Wd($d(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-h.bearingInRadians,d),r)}isTileClipped(){return!0}}const fp=$n([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),B0=$n([{name:"a_centroid",components:2,type:"Int16"}],4),{members:r1}=fp;class hd{constructor(e,r,h,d,_){this.properties={},this.extent=h,this.type=0,this.id=void 0,this._pbf=e,this._geometry=-1,this._keys=d,this._values=_,e.readFields(Ui,this,r)}loadGeometry(){const e=this._pbf;e.pos=this._geometry;const r=e.readVarint()+e.pos,h=[];let d,_=1,x=0,C=0,T=0;for(;e.pos<r;){if(x<=0){const P=e.readVarint();_=7&P,x=P>>3}if(x--,_===1||_===2)C+=e.readSVarint(),T+=e.readSVarint(),_===1&&(d&&h.push(d),d=[]),d&&d.push(new S(C,T));else{if(_!==7)throw new Error(`unknown command ${_}`);d&&d.push(d[0].clone())}}return d&&h.push(d),h}bbox(){const e=this._pbf;e.pos=this._geometry;const r=e.readVarint()+e.pos;let h=1,d=0,_=0,x=0,C=1/0,T=-1/0,P=1/0,Q=-1/0;for(;e.pos<r;){if(d<=0){const k=e.readVarint();h=7&k,d=k>>3}if(d--,h===1||h===2)_+=e.readSVarint(),x+=e.readSVarint(),_<C&&(C=_),_>T&&(T=_),x<P&&(P=x),x>Q&&(Q=x);else if(h!==7)throw new Error(`unknown command ${h}`)}return[C,P,T,Q]}toGeoJSON(e,r,h){const d=this.extent*Math.pow(2,h),_=this.extent*e,x=this.extent*r,C=this.loadGeometry();function T(K){return[360*(K.x+_)/d-180,360/Math.PI*Math.atan(Math.exp((1-2*(K.y+x)/d)*Math.PI))-90]}function P(K){return K.map(T)}let Q;if(this.type===1){const K=[];for(const re of C)K.push(re[0]);const X=P(K);Q=K.length===1?{type:"Point",coordinates:X[0]}:{type:"MultiPoint",coordinates:X}}else if(this.type===2){const K=C.map(P);Q=K.length===1?{type:"LineString",coordinates:K[0]}:{type:"MultiLineString",coordinates:K}}else{if(this.type!==3)throw new Error("unknown feature type");{const K=Wi(C),X=[];for(const re of K)X.push(re.map(P));Q=X.length===1?{type:"Polygon",coordinates:X[0]}:{type:"MultiPolygon",coordinates:X}}}const k={type:"Feature",geometry:Q,properties:this.properties};return this.id!=null&&(k.id=this.id),k}}function Ui(a,e,r){a===1?e.id=r.readVarint():a===2?(function(h,d){const _=h.readVarint()+h.pos;for(;h.pos<_;){const x=d._keys[h.readVarint()],C=d._values[h.readVarint()];d.properties[x]=C}})(r,e):a===3?e.type=r.readVarint():a===4&&(e._geometry=r.pos)}function Wi(a){const e=a.length;if(e<=1)return[a];const r=[];let h,d;for(let _=0;_<e;_++){const x=ai(a[_]);x!==0&&(d===void 0&&(d=x<0),d===x<0?(h&&r.push(h),h=[a[_]]):h&&h.push(a[_]))}return h&&r.push(h),r}function ai(a){let e=0;for(let r,h,d=0,_=a.length,x=_-1;d<_;x=d++)r=a[d],h=a[x],e+=(h.x-r.x)*(r.y+h.y);return e}hd.types=["Unknown","Point","LineString","Polygon"];class ui{constructor(e,r){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Hi,this,r),this.length=this._features.length}feature(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];const r=this._pbf.readVarint()+this._pbf.pos;return new hd(this._pbf,r,this.extent,this._keys,this._values)}}function Hi(a,e,r){a===15?e.version=r.readVarint():a===1?e.name=r.readString():a===5?e.extent=r.readVarint():a===2?e._features.push(r.pos):a===3?e._keys.push(r.readString()):a===4&&e._values.push((function(h){let d=null;const _=h.readVarint()+h.pos;for(;h.pos<_;){const x=h.readVarint()>>3;d=x===1?h.readString():x===2?h.readFloat():x===3?h.readDouble():x===4?h.readVarint64():x===5?h.readVarint():x===6?h.readSVarint():x===7?h.readBoolean():null}if(d==null)throw new Error("unknown feature value");return d})(r))}class cA{constructor(e,r){this.layers=e.readFields(ah,{},r)}}function ah(a,e,r){if(a===3){const h=new ui(r,r.readVarint()+r.pos);h.length&&(e[h.name]=h)}}const sh=Math.pow(2,13);function Nh(a,e,r,h,d,_,x,C){a.emplaceBack(e,r,2*Math.floor(h*sh)+x,d*sh*2,_*sh*2,Math.round(C))}class Fc{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((r=>r.id)),this.index=e.index,this.hasDependencies=!1,this.layoutVertexArray=new Ee,this.centroidVertexArray=new de,this.indexArray=new It,this.programConfigurations=new Yc(e.layers,e.zoom),this.segments=new Ht,this.stateDependentLayerIds=this.layers.filter((r=>r.isStateDependent())).map((r=>r.id))}populate(e,r,h){this.features=[],this.hasDependencies=_f("fill-extrusion",this.layers,r);for(const{feature:d,id:_,index:x,sourceLayerIndex:C}of e){const T=this.layers[0]._featureFilter.needGeometry,P=zA(d,T);if(!this.layers[0]._featureFilter.filter(new bn(this.zoom),P,h))continue;const Q={id:_,sourceLayerIndex:C,index:x,geometry:T?P.geometry:ol(d),properties:d.properties,type:d.type,patterns:{}};this.hasDependencies?this.features.push(lp("fill-extrusion",this.layers,Q,{zoom:this.zoom},r)):this.addFeature(Q,Q.geometry,x,h,{},r.subdivisionGranularity),r.featureIndex.insert(d,Q.geometry,x,C,this.index,!0)}}addFeatures(e,r,h){for(const d of this.features){const{geometry:_}=d;this.addFeature(d,_,d.index,r,h,e.subdivisionGranularity)}}update(e,r,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,{imagePositions:h})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,r1),this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,B0.members,!0),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(e,r,h,d,_,x){for(const C of Po(r,500)){const T={x:0,y:0,sampleCount:0},P=this.layoutVertexArray.length;this.processPolygon(T,d,e,C,x);const Q=this.layoutVertexArray.length-P,k=Math.floor(T.x/T.sampleCount),K=Math.floor(T.y/T.sampleCount);for(let X=0;X<Q;X++)this.centroidVertexArray.emplaceBack(k,K)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,h,{imagePositions:_,canonical:d})}processPolygon(e,r,h,d,_){if(d.length<1||lh(d[0]))return;for(const k of d)k.length!==0&&es(e,k);const x={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},C=_.fill.getGranularityForZoomLevel(r.z),T=hd.types[h.type]==="Polygon";for(const k of d){if(k.length===0||lh(k))continue;const K=nh(k,C,T);this._generateSideFaces(K,x)}if(!T)return;const P=fc(d,r,C,!1),Q=this.layoutVertexArray;xf(((k,K)=>{Nh(Q,k,K,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,P.verticesFlattened,P.indicesTriangles)}_generateSideFaces(e,r){let h=0;for(let d=1;d<e.length;d++){const _=e[d],x=e[d-1];if(oh(_,x))continue;r.segment.vertexLength+4>Ht.MAX_VERTEX_ARRAY_LENGTH&&(r.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const C=_.sub(x)._perp()._unit(),T=x.dist(_);h+T>32768&&(h=0),Nh(this.layoutVertexArray,_.x,_.y,C.x,C.y,0,0,h),Nh(this.layoutVertexArray,_.x,_.y,C.x,C.y,0,1,h),h+=T,Nh(this.layoutVertexArray,x.x,x.y,C.x,C.y,0,0,h),Nh(this.layoutVertexArray,x.x,x.y,C.x,C.y,0,1,h);const P=r.segment.vertexLength;this.indexArray.emplaceBack(P,P+2,P+1),this.indexArray.emplaceBack(P+1,P+2,P+3),r.segment.vertexLength+=4,r.segment.primitiveLength+=2}}}function es(a,e){for(let r=0;r<e.length;r++){const h=e[r];r===e.length-1&&e[0].x===h.x&&e[0].y===h.y||(a.x+=h.x,a.y+=h.y,a.sampleCount++)}}function oh(a,e){return a.x===e.x&&(a.x<0||a.x>xt)||a.y===e.y&&(a.y<0||a.y>xt)}function lh(a){return a.every((e=>e.x<0))||a.every((e=>e.x>xt))||a.every((e=>e.y<0))||a.every((e=>e.y>xt))}let dp;Ze("FillExtrusionBucket",Fc,{omit:["layers","features"]});var jA={get paint(){return dp=dp||new ei({"fill-extrusion-opacity":new gr(Qe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new yr(Qe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new gr(Qe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new gr(Qe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ei(Qe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new yr(Qe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new yr(Qe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new gr(Qe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class bf extends Gn{constructor(e,r){super(e,jA,r)}createBucket(e){return new Fc(e)}queryRadius(){return sd(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:e,feature:r,featureState:h,geometry:d,transform:_,pixelsToTileUnits:x,pixelPosMatrix:C}){const T=$d(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-_.bearingInRadians,x),P=this.paint.get("fill-extrusion-height").evaluate(r,h),Q=this.paint.get("fill-extrusion-base").evaluate(r,h),k=(function(X,re){const ae=[];for(const ue of X){const ve=[ue.x,ue.y,0,1];Ve(ve,ve,re),ae.push(new S(ve[0]/ve[3],ve[1]/ve[3]))}return ae})(T,C),K=(function(X,re,ae,ue){const ve=[],He=[],me=ue[8]*re,Ie=ue[9]*re,rt=ue[10]*re,ct=ue[11]*re,Lt=ue[8]*ae,qt=ue[9]*ae,Xt=ue[10]*ae,nr=ue[11]*ae;for(const mr of X){const sr=[],Yt=[];for(const zt of mr){const Cr=zt.x,Ir=zt.y,$r=ue[0]*Cr+ue[4]*Ir+ue[12],Ur=ue[1]*Cr+ue[5]*Ir+ue[13],Dn=ue[2]*Cr+ue[6]*Ir+ue[14],Ta=ue[3]*Cr+ue[7]*Ir+ue[15],Ns=Dn+rt,hl=Ta+ct,Au=$r+Lt,fA=Ur+qt,jo=Dn+Xt,fl=Ta+nr,ns=new S(($r+me)/hl,(Ur+Ie)/hl);ns.z=Ns/hl,sr.push(ns);const Ho=new S(Au/fl,fA/fl);Ho.z=jo/fl,Yt.push(Ho)}ve.push(sr),He.push(Yt)}return[ve,He]})(d,Q,P,C);return(function(X,re,ae){let ue=1/0;Wd(ae,re)&&(ue=Pl(ae,re[0]));for(let ve=0;ve<re.length;ve++){const He=re[ve],me=X[ve];for(let Ie=0;Ie<He.length-1;Ie++){const rt=He[Ie],ct=[rt,He[Ie+1],me[Ie+1],me[Ie],rt];mf(ae,ct)&&(ue=Math.min(ue,Pl(ae,ct)))}}return ue!==1/0&&ue})(K[0],K[1],k)}}function Uu(a,e){return a.x*e.x+a.y*e.y}function Pl(a,e){if(a.length===1){let r=0;const h=e[r++];let d;for(;!d||h.equals(d);)if(d=e[r++],!d)return 1/0;for(;r<e.length;r++){const _=e[r],x=a[0],C=d.sub(h),T=_.sub(h),P=x.sub(h),Q=Uu(C,C),k=Uu(C,T),K=Uu(T,T),X=Uu(P,C),re=Uu(P,T),ae=Q*K-k*k,ue=(K*X-k*re)/ae,ve=(Q*re-k*X)/ae,He=h.z*(1-ue-ve)+d.z*ue+_.z*ve;if(isFinite(He))return He}return 1/0}{let r=1/0;for(const h of e)r=Math.min(r,h.z);return r}}const Qm=$n([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:pp}=Qm,C0=$n([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:mp}=C0,gp=Math.cos(Math.PI/180*37.5),Du=Math.pow(2,14)/.5;class ms{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((r=>r.id)),this.index=e.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((r=>{this.gradients[r.id]={}})),this.layoutVertexArray=new je,this.layoutVertexArray2=new et,this.indexArray=new It,this.programConfigurations=new Yc(e.layers,e.zoom),this.segments=new Ht,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((r=>r.isStateDependent())).map((r=>r.id))}populate(e,r,h){this.hasDependencies=_f("line",this.layers,r)||this.hasLineDasharray(this.layers);const d=this.layers[0].layout.get("line-sort-key"),_=!d.isConstant(),x=[];for(const{feature:C,id:T,index:P,sourceLayerIndex:Q}of e){const k=this.layers[0]._featureFilter.needGeometry,K=zA(C,k);if(!this.layers[0]._featureFilter.filter(new bn(this.zoom),K,h))continue;const X=_?d.evaluate(K,{},h):void 0,re={id:T,properties:C.properties,type:C.type,sourceLayerIndex:Q,index:P,geometry:k?K.geometry:ol(C),patterns:{},dashes:{},sortKey:X};x.push(re)}_&&x.sort(((C,T)=>C.sortKey-T.sortKey));for(const C of x){const{geometry:T,index:P,sourceLayerIndex:Q}=C;this.hasDependencies?(_f("line",this.layers,r)?lp("line",this.layers,C,{zoom:this.zoom},r):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,C,this.zoom,r),this.patternFeatures.push(C)):this.addFeature(C,T,P,h,{},{},r.subdivisionGranularity),r.featureIndex.insert(e[P].feature,T,P,Q,this.index)}}update(e,r,h,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,r,this.stateDependentLayers,{imagePositions:h,dashPositions:d})}addFeatures(e,r,h,d){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,r,h,d,e.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,mp)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,pp),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,r,h,d,_,x,C){const T=this.layers[0].layout,P=T.get("line-join").evaluate(e,{}),Q=T.get("line-cap"),k=T.get("line-miter-limit"),K=T.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const X of r)this.addLine(X,e,P,Q,k,K,d,C);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,h,{imagePositions:_,dashPositions:x,canonical:d})}addLine(e,r,h,d,_,x,C,T){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,e=nh(e,C?T.line.getGranularityForZoomLevel(C.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let me=0;me<e.length-1;me++)this.totalDistance+=e[me].dist(e[me+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const P=hd.types[r.type]==="Polygon";let Q=e.length;for(;Q>=2&&e[Q-1].equals(e[Q-2]);)Q--;let k=0;for(;k<Q-1&&e[k].equals(e[k+1]);)k++;if(Q<(P?3:2))return;h==="bevel"&&(_=1.05);const K=this.overscaling<=16?122880/(512*this.overscaling):0,X=this.segments.prepareSegment(10*Q,this.layoutVertexArray,this.indexArray);let re,ae,ue,ve,He;this.e1=this.e2=-1,P&&(re=e[Q-2],He=e[k].sub(re)._unit()._perp());for(let me=k;me<Q;me++){if(ue=me===Q-1?P?e[k+1]:void 0:e[me+1],ue&&e[me].equals(ue))continue;He&&(ve=He),re&&(ae=re),re=e[me],He=ue?ue.sub(re)._unit()._perp():ve,ve=ve||He;let Ie=ve.add(He);Ie.x===0&&Ie.y===0||Ie._unit();const rt=ve.x*He.x+ve.y*He.y,ct=Ie.x*He.x+Ie.y*He.y,Lt=ct!==0?1/ct:1/0,qt=2*Math.sqrt(2-2*ct),Xt=ct<gp&&ae&&ue,nr=ve.x*He.y-ve.y*He.x>0;if(Xt&&me>k){const Yt=re.dist(ae);if(Yt>2*K){const zt=re.sub(re.sub(ae)._mult(K/Yt)._round());this.updateDistance(ae,zt),this.addCurrentVertex(zt,ve,0,0,X),ae=zt}}const mr=ae&&ue;let sr=mr?h:P?"butt":d;if(mr&&sr==="round"&&(Lt<x?sr="miter":Lt<=2&&(sr="fakeround")),sr==="miter"&&Lt>_&&(sr="bevel"),sr==="bevel"&&(Lt>2&&(sr="flipbevel"),Lt<_&&(sr="miter")),ae&&this.updateDistance(ae,re),sr==="miter")Ie._mult(Lt),this.addCurrentVertex(re,Ie,0,0,X);else if(sr==="flipbevel"){if(Lt>100)Ie=He.mult(-1);else{const Yt=Lt*ve.add(He).mag()/ve.sub(He).mag();Ie._perp()._mult(Yt*(nr?-1:1))}this.addCurrentVertex(re,Ie,0,0,X),this.addCurrentVertex(re,Ie.mult(-1),0,0,X)}else if(sr==="bevel"||sr==="fakeround"){const Yt=-Math.sqrt(Lt*Lt-1),zt=nr?Yt:0,Cr=nr?0:Yt;if(ae&&this.addCurrentVertex(re,ve,zt,Cr,X),sr==="fakeround"){const Ir=Math.round(180*qt/Math.PI/20);for(let $r=1;$r<Ir;$r++){let Ur=$r/Ir;if(Ur!==.5){const Ta=Ur-.5;Ur+=Ur*Ta*(Ur-1)*((1.0904+rt*(rt*(3.55645-1.43519*rt)-3.2452))*Ta*Ta+(.848013+rt*(.215638*rt-1.06021)))}const Dn=He.sub(ve)._mult(Ur)._add(ve)._unit()._mult(nr?-1:1);this.addHalfVertex(re,Dn.x,Dn.y,!1,nr,0,X)}}ue&&this.addCurrentVertex(re,He,-zt,-Cr,X)}else if(sr==="butt")this.addCurrentVertex(re,Ie,0,0,X);else if(sr==="square"){const Yt=ae?1:-1;this.addCurrentVertex(re,Ie,Yt,Yt,X)}else sr==="round"&&(ae&&(this.addCurrentVertex(re,ve,0,0,X),this.addCurrentVertex(re,ve,1,1,X,!0)),ue&&(this.addCurrentVertex(re,He,-1,-1,X,!0),this.addCurrentVertex(re,He,0,0,X)));if(Xt&&me<Q-1){const Yt=re.dist(ue);if(Yt>2*K){const zt=re.add(ue.sub(re)._mult(K/Yt)._round());this.updateDistance(re,zt),this.addCurrentVertex(zt,He,0,0,X),re=zt}}}}addCurrentVertex(e,r,h,d,_,x=!1){const C=r.y*d-r.x,T=-r.y-r.x*d;this.addHalfVertex(e,r.x+r.y*h,r.y-r.x*h,x,!1,h,_),this.addHalfVertex(e,C,T,x,!0,-d,_),this.distance>Du/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(e,r,h,d,_,x))}addHalfVertex({x:e,y:r},h,d,_,x,C,T){const P=.5*(this.lineClips?this.scaledDistance*(Du-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e<<1)+(_?1:0),(r<<1)+(x?1:0),Math.round(63*h)+128,Math.round(63*d)+128,1+(C===0?0:C<0?-1:1)|(63&P)<<2,P>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Q=T.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,Q,this.e2),T.primitiveLength++),x?this.e2=Q:this.e1=Q}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(e,r){this.distance+=e.dist(r),this.updateScaledDistance()}hasLineDasharray(e){for(const r of e){const h=r.paint.get("line-dasharray");if(h&&!h.isConstant())return!0}return!1}addLineDashDependencies(e,r,h,d){for(const _ of e){const x=_.paint.get("line-dasharray");if(!x||x.value.kind==="constant")continue;const C=_.layout.get("line-cap")==="round",T={dasharray:x.value.evaluate({zoom:h-1},r,{}),round:C},P={dasharray:x.value.evaluate({zoom:h},r,{}),round:C},Q={dasharray:x.value.evaluate({zoom:h+1},r,{}),round:C},k=`${T.dasharray.join(",")},${T.round}`,K=`${P.dasharray.join(",")},${P.round}`,X=`${Q.dasharray.join(",")},${Q.round}`;d.dashDependencies[k]=T,d.dashDependencies[K]=P,d.dashDependencies[X]=Q,r.dashes[_.id]={min:k,mid:K,max:X}}}}let Pu,Rh;Ze("LineBucket",ms,{omit:["layers","patternFeatures"]});var au={get paint(){return Rh=Rh||new ei({"line-opacity":new yr(Qe.paint_line["line-opacity"]),"line-color":new yr(Qe.paint_line["line-color"]),"line-translate":new gr(Qe.paint_line["line-translate"]),"line-translate-anchor":new gr(Qe.paint_line["line-translate-anchor"]),"line-width":new yr(Qe.paint_line["line-width"]),"line-gap-width":new yr(Qe.paint_line["line-gap-width"]),"line-offset":new yr(Qe.paint_line["line-offset"]),"line-blur":new yr(Qe.paint_line["line-blur"]),"line-dasharray":new Ei(Qe.paint_line["line-dasharray"]),"line-pattern":new Ei(Qe.paint_line["line-pattern"]),"line-gradient":new ki(Qe.paint_line["line-gradient"])})},get layout(){return Pu=Pu||new ei({"line-cap":new gr(Qe.layout_line["line-cap"]),"line-join":new yr(Qe.layout_line["line-join"]),"line-miter-limit":new gr(Qe.layout_line["line-miter-limit"]),"line-round-limit":new gr(Qe.layout_line["line-round-limit"]),"line-sort-key":new yr(Qe.layout_line["line-sort-key"])})}};class km extends yr{possiblyEvaluate(e,r){return r=new bn(Math.floor(r.zoom),{now:r.now,fadeDuration:r.fadeDuration,zoomHistory:r.zoomHistory,transition:r.transition}),super.possiblyEvaluate(e,r)}evaluate(e,r,h,d){return r=Pt({},r,{zoom:Math.floor(r.zoom)}),super.evaluate(e,r,h,d)}}let wf;class S0 extends Gn{constructor(e,r){super(e,au,r),this.gradientVersion=0,wf||(wf=new km(au.paint.properties["line-width"].specification),wf.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(e){if(e==="line-gradient"){const r=this.gradientExpression();this.stepInterpolant=!!(function(h){return h._styleExpression!==void 0})(r)&&r._styleExpression.expression instanceof ql,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(e,r){super.recalculate(e,r),this.paint._values["line-floorwidth"]=wf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new ms(e)}queryRadius(e){const r=e,h=Bf(Tu("line-width",this,r),Tu("line-gap-width",this,r)),d=Tu("line-offset",this,r);return h/2+Math.abs(d)+sd(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:e,feature:r,featureState:h,geometry:d,transform:_,pixelsToTileUnits:x}){const C=$d(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-_.bearingInRadians,x),T=x/2*Bf(this.paint.get("line-width").evaluate(r,h),this.paint.get("line-gap-width").evaluate(r,h)),P=this.paint.get("line-offset").evaluate(r,h);return P&&(d=(function(Q,k){const K=[];for(let X=0;X<Q.length;X++){const re=Jd(Q[X]),ae=[];for(let ue=0;ue<re.length;ue++){const ve=re[ue],He=re[ue-1],me=re[ue+1],Ie=ue===0?new S(0,0):ve.sub(He)._unit()._perp(),rt=ue===re.length-1?new S(0,0):me.sub(ve)._unit()._perp(),ct=Ie._add(rt)._unit(),Lt=ct.x*rt.x+ct.y*rt.y;Lt!==0&&ct._mult(1/Lt),ae.push(ct._mult(k)._add(ve))}K.push(ae)}return K})(d,P*x)),(function(Q,k,K){for(let X=0;X<k.length;X++){const re=k[X];if(Q.length>=3){for(let ae=0;ae<re.length;ae++)if(Jc(Q,re[ae]))return!0}if(Us(Q,re,K))return!0}return!1})(C,d,T)}isTileClipped(){return!0}}function Bf(a,e){return e>0?e+2*a:a}const Om=$n([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),HA=$n([{name:"a_projected_pos",components:3,type:"Float32"}],4);$n([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const E0=$n([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);$n([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Nl=$n([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),T0=$n([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function F0(a,e,r){return a.sections.forEach((h=>{h.text=(function(d,_,x){const C=_.layout.get("text-transform").evaluate(x,{});return C==="uppercase"?d=d.toLocaleUpperCase():C==="lowercase"&&(d=d.toLocaleLowerCase()),Vn.applyArabicShaping&&(d=Vn.applyArabicShaping(d)),d})(h.text,e,r)})),a}$n([{name:"triangle",components:3,type:"Uint16"}]),$n([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),$n([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),$n([{type:"Float32",name:"offsetX"}]),$n([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),$n([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);var Ps=24;const dc={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},yp={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},zm={40:!0};function Qh(a,e,r,h,d,_){if("fontStack"in e){const x=r[e.fontStack],C=x&&x[a];return C?C.metrics.advance*e.scale+d:0}{const x=h[e.imageName];return x?x.displaySize[0]*e.scale*Ps/_+d:0}}function jm(a,e,r,h){const d=Math.pow(a-e,2);return h?a<e?d/2:2*d:d+Math.abs(r)*r}function I0(a,e,r){let h=0;return a===10&&(h-=1e4),r&&(h+=150),a!==40&&a!==65288||(h+=50),e!==41&&e!==65289||(h+=50),h}function Hm(a,e,r,h,d,_){let x=null,C=jm(e,r,d,_);for(const T of h){const P=jm(e-T.x,r,d,_)+T.badness;P<=C&&(x=T,C=P)}return{index:a,x:e,priorBreak:x,badness:C}}function Vm(a){return a?Vm(a.priorBreak).concat(a.index):[]}class Nu{constructor(e="",r=[],h=[]){this.text=e,this.sections=r,this.sectionIndex=h,this.imageSectionID=null}static fromFeature(e,r){const h=new Nu;for(let d=0;d<e.sections.length;d++){const _=e.sections[d];_.image?h.addImageSection(_):h.addTextSection(_,r)}return h}length(){return[...this.text].length}getSection(e){return this.sections[this.sectionIndex[e]]}getSectionIndex(e){return this.sectionIndex[e]}verticalizePunctuation(){this.text=(function(e){let r="",h={premature:!0,value:void 0};const d=e[Symbol.iterator]();let _=d.next();const x=e[Symbol.iterator]();x.next();let C=x.next();for(;!_.done;)r+=!C.done&&Fr(C.value.codePointAt(0))&&!dc[C.value]||!h.premature&&Fr(h.value.codePointAt(0))&&!dc[h.value]||!dc[_.value]?_.value:dc[_.value],h={value:_.value,premature:!1},_=d.next(),C=x.next();return r})(this.text)}hasZeroWidthSpaces(){return this.text.includes("")}trim(){const e=this.text.match(/^\s*/),r=e?e[0].length:0,h=this.text.match(/\S\s*$/),d=h?h[0].length-1:0;this.text=this.text.substring(r,this.text.length-d),this.sectionIndex=this.sectionIndex.slice(r,this.sectionIndex.length-d)}substring(e,r){const h=[...this.text].slice(e,r).join(""),d=this.sectionIndex.slice(e,r);return new Nu(h,this.sections,d)}toCodeUnitIndex(e){return[...this.text].slice(0,e).join("").length}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((e,r)=>Math.max(e,this.sections[r].scale)),0)}getMaxImageSize(e){let r=0,h=0;for(let d=0;d<this.length();d++){const _=this.getSection(d);if("imageName"in _){const x=e[_.imageName];if(!x)continue;const C=x.displaySize;r=Math.max(r,C[0]),h=Math.max(h,C[1])}}return{maxImageWidth:r,maxImageHeight:h}}addTextSection(e,r){this.text+=e.text,this.sections.push({scale:e.scale||1,verticalAlign:e.verticalAlign||"bottom",fontStack:e.fontStack||r});const h=this.sections.length-1;this.sectionIndex.push(...[...e.text].map((()=>h)))}addImageSection(e){const r=e.image?e.image.name:"";if(r.length===0)return void xr("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push({scale:1,verticalAlign:e.verticalAlign||"bottom",imageName:r}),this.sectionIndex.push(this.sections.length-1)):xr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}determineLineBreaks(e,r,h,d,_){const x=[],C=this.determineAverageLineWidth(e,r,h,d,_),T=this.hasZeroWidthSpaces();let P=0,Q=0;const k=this.text[Symbol.iterator]();let K=k.next();const X=this.text[Symbol.iterator]();X.next();let re=X.next();const ae=this.text[Symbol.iterator]();ae.next(),ae.next();let ue=ae.next();for(;!K.done;){const ve=this.getSection(Q),He=K.value.codePointAt(0);if(Lr(He)||(P+=Qh(He,ve,h,d,e,_)),!re.done){const me=ar(He),Ie=re.value.codePointAt(0);(yp[He]||me||"imageName"in ve||!ue.done&&zm[Ie])&&x.push(Hm(Q+1,P,C,x,I0(He,Ie,me&&T),!1))}Q++,K=k.next(),re=X.next(),ue=ae.next()}return Vm(Hm(this.length(),P,C,x,0,!0))}determineAverageLineWidth(e,r,h,d,_){let x=0,C=0;for(const T of this.text){const P=this.getSection(C);x+=Qh(T.codePointAt(0),P,h,d,e,_),C++}return x/Math.max(1,Math.ceil(x/r))}}const fd=4294967296,L0=1/fd,M0=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class _p{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,r,h=this.length){for(;this.pos<h;){const d=this.readVarint(),_=d>>3,x=this.pos;this.type=7&d,e(_,r,this),this.pos===x&&this.skip(d)}return r}readMessage(e,r){return this.readFields(e,r,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*fd;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*fd;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const r=this.buf;let h,d;return d=r[this.pos++],h=127&d,d<128?h:(d=r[this.pos++],h|=(127&d)<<7,d<128?h:(d=r[this.pos++],h|=(127&d)<<14,d<128?h:(d=r[this.pos++],h|=(127&d)<<21,d<128?h:(d=r[this.pos],h|=(15&d)<<28,(function(_,x,C){const T=C.buf;let P,Q;if(Q=T[C.pos++],P=(112&Q)>>4,Q<128||(Q=T[C.pos++],P|=(127&Q)<<3,Q<128)||(Q=T[C.pos++],P|=(127&Q)<<10,Q<128)||(Q=T[C.pos++],P|=(127&Q)<<17,Q<128)||(Q=T[C.pos++],P|=(127&Q)<<24,Q<128)||(Q=T[C.pos++],P|=(1&Q)<<31,Q<128))return kh(_,P,x);throw new Error("Expected varint not more than 10 bytes")})(h,e,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2==1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,r=this.pos;return this.pos=e,e-r>=12&&M0?M0.decode(this.buf.subarray(r,e)):(function(h,d,_){let x="",C=d;for(;C<_;){const T=h[C];let P,Q,k,K=null,X=T>239?4:T>223?3:T>191?2:1;if(C+X>_)break;X===1?T<128&&(K=T):X===2?(P=h[C+1],(192&P)==128&&(K=(31&T)<<6|63&P,K<=127&&(K=null))):X===3?(P=h[C+1],Q=h[C+2],(192&P)==128&&(192&Q)==128&&(K=(15&T)<<12|(63&P)<<6|63&Q,(K<=2047||K>=55296&&K<=57343)&&(K=null))):X===4&&(P=h[C+1],Q=h[C+2],k=h[C+3],(192&P)==128&&(192&Q)==128&&(192&k)==128&&(K=(15&T)<<18|(63&P)<<12|(63&Q)<<6|63&k,(K<=65535||K>=1114112)&&(K=null))),K===null?(K=65533,X=1):K>65535&&(K-=65536,x+=String.fromCharCode(K>>>10&1023|55296),K=56320|1023&K),x+=String.fromCharCode(K),C+=X}return x})(this.buf,r,e)}readBytes(){const e=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,e);return this.pos=e,r}readPackedVarint(e=[],r){const h=this.readPackedEnd();for(;this.pos<h;)e.push(this.readVarint(r));return e}readPackedSVarint(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const r=this.readPackedEnd();for(;this.pos<r;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(e){const r=7&e;if(r===0)for(;this.buf[this.pos++]>127;);else if(r===2)this.pos=this.readVarint()+this.pos;else if(r===5)this.pos+=4;else{if(r!==1)throw new Error(`Unimplemented type: ${r}`);this.pos+=8}}writeTag(e,r){this.writeVarint(e<<3|r)}realloc(e){let r=this.length||16;for(;r<this.pos+e;)r*=2;if(r!==this.length){const h=new Uint8Array(r);h.set(this.buf),this.buf=h,this.dataView=new DataView(h.buffer),this.length=r}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,-1&e,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*L0),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,-1&e,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*L0),!0),this.pos+=8}writeVarint(e){(e=+e||0)>268435455||e<0?(function(r,h){let d,_;if(r>=0?(d=r%4294967296|0,_=r/4294967296|0):(d=~(-r%4294967296),_=~(-r/4294967296),4294967295^d?d=d+1|0:(d=0,_=_+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");h.realloc(10),(function(x,C,T){T.buf[T.pos++]=127&x|128,x>>>=7,T.buf[T.pos++]=127&x|128,x>>>=7,T.buf[T.pos++]=127&x|128,x>>>=7,T.buf[T.pos++]=127&x|128,T.buf[T.pos]=127&(x>>>=7)})(d,0,h),(function(x,C){const T=(7&x)<<4;C.buf[C.pos++]|=T|((x>>>=3)?128:0),x&&(C.buf[C.pos++]=127&x|((x>>>=7)?128:0),x&&(C.buf[C.pos++]=127&x|((x>>>=7)?128:0),x&&(C.buf[C.pos++]=127&x|((x>>>=7)?128:0),x&&(C.buf[C.pos++]=127&x|((x>>>=7)?128:0),x&&(C.buf[C.pos++]=127&x)))))})(_,h)})(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))}writeSVarint(e){this.writeVarint(e<0?2*-e-1:2*e)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(4*e.length),this.pos++;const r=this.pos;this.pos=(function(d,_,x){for(let C,T,P=0;P<_.length;P++){if(C=_.charCodeAt(P),C>55295&&C<57344){if(!T){C>56319||P+1===_.length?(d[x++]=239,d[x++]=191,d[x++]=189):T=C;continue}if(C<56320){d[x++]=239,d[x++]=191,d[x++]=189,T=C;continue}C=T-55296<<10|C-56320|65536,T=null}else T&&(d[x++]=239,d[x++]=191,d[x++]=189,T=null);C<128?d[x++]=C:(C<2048?d[x++]=C>>6|192:(C<65536?d[x++]=C>>12|224:(d[x++]=C>>18|240,d[x++]=C>>12&63|128),d[x++]=C>>6&63|128),d[x++]=63&C|128)}return x})(this.buf,e,this.pos);const h=this.pos-r;h>=128&&Gm(r,h,this),this.pos=r-1,this.writeVarint(h),this.pos+=h}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const r=e.length;this.writeVarint(r),this.realloc(r);for(let h=0;h<r;h++)this.buf[this.pos++]=e[h]}writeRawMessage(e,r){this.pos++;const h=this.pos;e(r,this);const d=this.pos-h;d>=128&&Gm(h,d,this),this.pos=h-1,this.writeVarint(d),this.pos+=d}writeMessage(e,r,h){this.writeTag(e,2),this.writeRawMessage(r,h)}writePackedVarint(e,r){r.length&&this.writeMessage(e,Cf,r)}writePackedSVarint(e,r){r.length&&this.writeMessage(e,vp,r)}writePackedBoolean(e,r){r.length&&this.writeMessage(e,P0,r)}writePackedFloat(e,r){r.length&&this.writeMessage(e,U0,r)}writePackedDouble(e,r){r.length&&this.writeMessage(e,D0,r)}writePackedFixed32(e,r){r.length&&this.writeMessage(e,N0,r)}writePackedSFixed32(e,r){r.length&&this.writeMessage(e,R0,r)}writePackedFixed64(e,r){r.length&&this.writeMessage(e,Q0,r)}writePackedSFixed64(e,r){r.length&&this.writeMessage(e,xp,r)}writeBytesField(e,r){this.writeTag(e,2),this.writeBytes(r)}writeFixed32Field(e,r){this.writeTag(e,5),this.writeFixed32(r)}writeSFixed32Field(e,r){this.writeTag(e,5),this.writeSFixed32(r)}writeFixed64Field(e,r){this.writeTag(e,1),this.writeFixed64(r)}writeSFixed64Field(e,r){this.writeTag(e,1),this.writeSFixed64(r)}writeVarintField(e,r){this.writeTag(e,0),this.writeVarint(r)}writeSVarintField(e,r){this.writeTag(e,0),this.writeSVarint(r)}writeStringField(e,r){this.writeTag(e,2),this.writeString(r)}writeFloatField(e,r){this.writeTag(e,5),this.writeFloat(r)}writeDoubleField(e,r){this.writeTag(e,1),this.writeDouble(r)}writeBooleanField(e,r){this.writeVarintField(e,+r)}}function kh(a,e,r){return r?4294967296*e+(a>>>0):4294967296*(e>>>0)+(a>>>0)}function Gm(a,e,r){const h=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(h);for(let d=r.pos-1;d>=a;d--)r.buf[d+h]=r.buf[d]}function Cf(a,e){for(let r=0;r<a.length;r++)e.writeVarint(a[r])}function vp(a,e){for(let r=0;r<a.length;r++)e.writeSVarint(a[r])}function U0(a,e){for(let r=0;r<a.length;r++)e.writeFloat(a[r])}function D0(a,e){for(let r=0;r<a.length;r++)e.writeDouble(a[r])}function P0(a,e){for(let r=0;r<a.length;r++)e.writeBoolean(a[r])}function N0(a,e){for(let r=0;r<a.length;r++)e.writeFixed32(a[r])}function R0(a,e){for(let r=0;r<a.length;r++)e.writeSFixed32(a[r])}function Q0(a,e){for(let r=0;r<a.length;r++)e.writeFixed64(a[r])}function xp(a,e){for(let r=0;r<a.length;r++)e.writeSFixed64(a[r])}function k0(a,e,r){a===1&&r.readMessage(O0,e)}function O0(a,e,r){if(a===3){const{id:h,bitmap:d,width:_,height:x,left:C,top:T,advance:P}=r.readMessage(Vi,{});e.push({id:h,bitmap:new Ad({width:_+6,height:x+6},d),metrics:{width:_,height:x,left:C,top:T,advance:P}})}}function Vi(a,e,r){a===1?e.id=r.readVarint():a===2?e.bitmap=r.readBytes():a===3?e.width=r.readVarint():a===4?e.height=r.readVarint():a===5?e.left=r.readSVarint():a===6?e.top=r.readSVarint():a===7&&(e.advance=r.readVarint())}function bp(a){let e=0,r=0;for(const x of a)e+=x.w*x.h,r=Math.max(r,x.w);a.sort(((x,C)=>C.h-x.h));const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),r),h:1/0}];let d=0,_=0;for(const x of a)for(let C=h.length-1;C>=0;C--){const T=h[C];if(!(x.w>T.w||x.h>T.h)){if(x.x=T.x,x.y=T.y,_=Math.max(_,x.y+x.h),d=Math.max(d,x.x+x.w),x.w===T.w&&x.h===T.h){const P=h.pop();P&&C<h.length&&(h[C]=P)}else x.h===T.h?(T.x+=x.w,T.w-=x.w):x.w===T.w?(T.y+=x.h,T.h-=x.h):(h.push({x:T.x+x.w,y:T.y,w:T.w-x.w,h:x.h}),T.y+=x.h,T.h-=x.h);break}}return{w:d,h:_,fill:e/(d*_)||0}}class qm{constructor(e,{pixelRatio:r,version:h,stretchX:d,stretchY:_,content:x,textFitWidth:C,textFitHeight:T}){this.paddedRect=e,this.pixelRatio=r,this.stretchX=d,this.stretchY=_,this.content=x,this.version=h,this.textFitWidth=C,this.textFitHeight=T}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Km{constructor(e,r){const h={},d={};this.haveRenderCallbacks=[];const _=[];this.addImages(e,h,_),this.addImages(r,d,_);const{w:x,h:C}=bp(_),T=new ll({width:x||1,height:C||1});for(const P in e){const Q=e[P],k=h[P].paddedRect;ll.copy(Q.data,T,{x:0,y:0},{x:k.x+1,y:k.y+1},Q.data)}for(const P in r){const Q=r[P],k=d[P].paddedRect,K=k.x+1,X=k.y+1,re=Q.data.width,ae=Q.data.height;ll.copy(Q.data,T,{x:0,y:0},{x:K,y:X},Q.data),ll.copy(Q.data,T,{x:0,y:ae-1},{x:K,y:X-1},{width:re,height:1}),ll.copy(Q.data,T,{x:0,y:0},{x:K,y:X+ae},{width:re,height:1}),ll.copy(Q.data,T,{x:re-1,y:0},{x:K-1,y:X},{width:1,height:ae}),ll.copy(Q.data,T,{x:0,y:0},{x:K+re,y:X},{width:1,height:ae})}this.image=T,this.iconPositions=h,this.patternPositions=d}addImages(e,r,h){for(const d in e){const _=e[d],x={x:0,y:0,w:_.data.width+2,h:_.data.height+2};h.push(x),r[d]=new qm(x,_),_.hasRenderCallback&&this.haveRenderCallbacks.push(d)}}patchUpdatedImages(e,r){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in e.updatedImages)this.patchUpdatedImage(this.iconPositions[h],e.getImage(h),r),this.patchUpdatedImage(this.patternPositions[h],e.getImage(h),r)}patchUpdatedImage(e,r,h){if(!e||!r||e.version===r.version)return;e.version=r.version;const[d,_]=e.tl;h.update(r.data,void 0,{x:d,y:_})}}var Ah;function wp(a,e,r,h,d,_,x,C,T,P,Q,k,K,X,re){const ae=Nu.fromFeature(a,d);let ue;k===v.az.vertical&&ae.verticalizePunctuation();let ve=ae.determineLineBreaks(P,_,e,h,X);const{processBidirectionalText:He,processStyledBidirectionalText:me}=Vn;if(He&&ae.sections.length===1){ue=[],ve=ve.map((Lt=>ae.toCodeUnitIndex(Lt)));const ct=He(ae.toString(),ve);for(const Lt of ct){const qt=[...Lt].map((()=>0));ue.push(new Nu(Lt,ae.sections,qt))}}else if(me){ue=[],ve=ve.map((Xt=>ae.toCodeUnitIndex(Xt)));let ct=0;const Lt=[];for(const Xt of ae.text)Lt.push(...Array(Xt.length).fill(ae.sectionIndex[ct])),ct++;const qt=me(ae.text,Lt,ve);for(const Xt of qt){const nr=[];let mr="";for(const sr of Xt[0])nr.push(Xt[1][mr.length]),mr+=sr;ue.push(new Nu(Xt[0],ae.sections,nr))}}else ue=(function(ct,Lt){const qt=[];let Xt=0;for(const nr of Lt)qt.push(ct.substring(Xt,nr)),Xt=nr;return Xt<ct.length()&&qt.push(ct.substring(Xt,ct.length())),qt})(ae,ve);const Ie=[],rt={positionedLines:Ie,text:ae.toString(),top:Q[1],bottom:Q[1],left:Q[0],right:Q[0],writingMode:k,iconsInText:!1,verticalizable:!1};return(function(ct,Lt,qt,Xt,nr,mr,sr,Yt,zt,Cr,Ir,$r){let Ur=0,Dn=0,Ta=0,Ns=0;const hl=Yt==="right"?1:Yt==="left"?0:.5,Au=Ps/$r;let fA=0;for(const ns of nr){ns.trim();const Ho=ns.getMaxScale(),Rl={positionedGlyphs:[],lineOffset:0};ct.positionedLines[fA]=Rl;const Ql=Rl.positionedGlyphs;let GA=0;if(!ns.length()){Dn+=mr,++fA;continue}const dl=Bp(Xt,ns,Au);let qA=0;for(const Co of ns.text){const Oa=ns.getSection(qA),Rs=Co.codePointAt(0),qa=Xm(zt,Ir,Rs),So={glyph:Rs,imageName:null,x:Ur,y:Dn+-17,vertical:qa,scale:1,fontStack:"",sectionIndex:ns.getSectionIndex(qA),metrics:null,rect:null};let Zh;if("fontStack"in Oa){if(Zh=Cp(Oa,Rs,qa,dl,Lt,qt),!Zh)continue;So.fontStack=Oa.fontStack}else{if(ct.iconsInText=!0,Oa.scale*=Au,Zh=Wm(Oa,qa,Ho,dl,Xt),!Zh)continue;GA=Math.max(GA,Zh.imageOffset),So.imageName=Oa.imageName}const{rect:zu,metrics:wg,baselineOffset:Of}=Zh;So.y+=Of,So.scale=Oa.scale,So.metrics=wg,So.rect=zu,Ql.push(So),qa?(ct.verticalizable=!0,Ur+=("imageName"in Oa?wg.advance:Ps)*Oa.scale+Cr):Ur+=wg.advance*Oa.scale+Cr,qA++}Ql.length!==0&&(Ta=Math.max(Ur-Cr,Ta),ch(Ql,0,Ql.length-1,hl)),Ur=0,Rl.lineOffset=Math.max(GA,(Ho-1)*Ps);const cu=mr*Ho+GA;Dn+=cu,Ns=Math.max(cu,Ns),++fA}const{horizontalAlign:jo,verticalAlign:fl}=Zm(sr);(function(ns,Ho,Rl,Ql,GA,dl,qA,cu,Co){const Oa=(Ho-Rl)*GA;let Rs=0;Rs=dl!==qA?-cu*Ql- -17:-Ql*Co*qA+.5*qA;for(const qa of ns)for(const So of qa.positionedGlyphs)So.x+=Oa,So.y+=Rs})(ct.positionedLines,hl,jo,fl,Ta,Ns,mr,Dn,nr.length),ct.top+=-fl*Dn,ct.bottom=ct.top+Dn,ct.left+=-jo*Ta,ct.right=ct.left+Ta})(rt,e,r,h,ue,x,C,T,k,P,K,re),!(function(ct){for(const Lt of ct)if(Lt.positionedGlyphs.length!==0)return!1;return!0})(Ie)&&rt}function Zm(a){let e=.5,r=.5;switch(a){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:e,verticalAlign:r}}function Bp(a,e,r){const h=e.getMaxScale()*Ps,{maxImageWidth:d,maxImageHeight:_}=e.getMaxImageSize(a),x=Math.max(h,_*r);return{verticalLineContentWidth:Math.max(h,d*r),horizontalLineContentHeight:x}}function Oh(a){switch(a){case"top":return 0;case"center":return .5;default:return 1}}function Xm(a,e,r){return!(a===v.az.horizontal||!e&&!Mr(r)||e&&(Lr(r)||(h=r,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(h)))));var h}function Cp(a,e,r,h,d,_){const x=_[a.fontStack],C=(function(P,Q,k,K){if(P&&P.rect)return P;const X=Q[k.fontStack],re=X&&X[K];return re?{rect:null,metrics:re.metrics}:null})(x&&x[e],d,a,e);if(C===null)return null;let T;if(r)T=h.verticalLineContentWidth-a.scale*Ps;else{const P=Oh(a.verticalAlign);T=(h.horizontalLineContentHeight-a.scale*Ps)*P}return{rect:C.rect,metrics:C.metrics,baselineOffset:T}}function Wm(a,e,r,h,d){const _=d[a.imageName];if(!_)return null;const x=_.paddedRect,C=_.displaySize,T={width:C[0],height:C[1],left:1,top:-3,advance:e?C[1]:C[0]};let P;if(e)P=h.verticalLineContentWidth-C[1]*a.scale;else{const Q=Oh(a.verticalAlign);P=(h.horizontalLineContentHeight-C[1]*a.scale)*Q}return{rect:x,metrics:T,baselineOffset:P,imageOffset:(e?C[0]:C[1])*a.scale-Ps*r}}function ch(a,e,r,h){if(h===0)return;const d=a[r],_=(a[r].x+d.metrics.advance*d.scale)*h;for(let x=e;x<=r;x++)a[x].x-=_}function su(a,e,r){const{horizontalAlign:h,verticalAlign:d}=Zm(r),_=e[0]-a.displaySize[0]*h,x=e[1]-a.displaySize[1]*d;return{image:a,top:x,bottom:x+a.displaySize[1],left:_,right:_+a.displaySize[0]}}function Sf(a){var e,r;let h=a.left,d=a.top,_=a.right-h,x=a.bottom-d;const C=(e=a.image.textFitWidth)!==null&&e!==void 0?e:"stretchOrShrink",T=(r=a.image.textFitHeight)!==null&&r!==void 0?r:"stretchOrShrink",P=(a.image.content[2]-a.image.content[0])/(a.image.content[3]-a.image.content[1]);if(T==="proportional"){if(C==="stretchOnly"&&_/x<P||C==="proportional"){const Q=Math.ceil(x*P);h*=Q/_,_=Q}}else if(C==="proportional"&&T==="stretchOnly"&&P!==0&&_/x>P){const Q=Math.ceil(_/P);d*=Q/x,x=Q}return{x1:h,y1:d,x2:h+_,y2:d+x}}function z0(a,e,r,h,d,_){const x=a.image;let C;if(x.content){const ue=x.content,ve=x.pixelRatio||1;C=[ue[0]/ve,ue[1]/ve,x.displaySize[0]-ue[2]/ve,x.displaySize[1]-ue[3]/ve]}const T=e.left*_,P=e.right*_;let Q,k,K,X;r==="width"||r==="both"?(X=d[0]+T-h[3],k=d[0]+P+h[1]):(X=d[0]+(T+P-x.displaySize[0])/2,k=X+x.displaySize[0]);const re=e.top*_,ae=e.bottom*_;return r==="height"||r==="both"?(Q=d[1]+re-h[0],K=d[1]+ae+h[2]):(Q=d[1]+(re+ae-x.displaySize[1])/2,K=Q+x.displaySize[1]),{image:x,top:Q,right:k,bottom:K,left:X,collisionPadding:C}}Ze("ImagePosition",qm),Ze("ImageAtlas",Km),v.az=void 0,(Ah=v.az||(v.az={}))[Ah.none=0]="none",Ah[Ah.horizontal=1]="horizontal",Ah[Ah.vertical=2]="vertical",Ah[Ah.horizontalOnly=3]="horizontalOnly";const ou=128,Ru=32640;function Ym(a,e){const{expression:r}=e;if(r.kind==="constant")return{kind:"constant",layoutSize:r.evaluate(new bn(a+1))};if(r.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:d}=r;let _=0;for(;_<h.length&&h[_]<=a;)_++;_=Math.max(0,_-1);let x=_;for(;x<h.length&&h[x]<a+1;)x++;x=Math.min(h.length-1,x);const C=h[_],T=h[x];return r.kind==="composite"?{kind:"composite",minZoom:C,maxZoom:T,interpolationType:d}:{kind:"camera",minZoom:C,maxZoom:T,minSize:r.evaluate(new bn(C)),maxSize:r.evaluate(new bn(T)),interpolationType:d}}}function Sp(a,e,r){let h="never";const d=a.get(e);return d?h=d:a.get(r)&&(h="always"),h}const n1=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ef(a,e,r,h,d,_,x,C,T,P,Q,k,K){const X=C?Math.min(Ru,Math.round(C[0])):0,re=C?Math.min(Ru,Math.round(C[1])):0;a.emplaceBack(e,r,Math.round(32*h),Math.round(32*d),_,x,(X<<1)+(T?1:0),re,16*P,16*Q,256*k,256*K)}function Ep(a,e,r){a.emplaceBack(e.x,e.y,r),a.emplaceBack(e.x,e.y,r),a.emplaceBack(e.x,e.y,r),a.emplaceBack(e.x,e.y,r)}function j0(a){for(const e of a.sections)if(Ln(e.text))return!0;return!1}class $m{constructor(e){this.layoutVertexArray=new at,this.indexArray=new It,this.programConfigurations=e,this.segments=new Ht,this.dynamicLayoutVertexArray=new $e,this.opacityVertexArray=new gt,this.hasVisibleVertices=!1,this.placedSymbolArray=new B}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(e,r,h,d){this.isEmpty()||(h&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Om.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,r),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,HA.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,n1,!0),this.opacityVertexBuffer.itemSize=1),(h||d)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ze("SymbolBuffers",$m);class dd{constructor(e,r,h){this.layoutVertexArray=new e,this.layoutAttributes=r,this.indexArray=new h,this.segments=new Ht,this.collisionVertexArray=new Dt}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,E0.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ze("CollisionBuffers",dd);class uh{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((x=>x.id)),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const r=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ym(this.zoom,r["text-size"]),this.iconSizeData=Ym(this.zoom,r["icon-size"]);const h=this.layers[0].layout,d=h.get("symbol-sort-key"),_=h.get("symbol-z-order");this.canOverlap=Sp(h,"text-overlap","text-allow-overlap")!=="never"||Sp(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=_!=="viewport-y"&&!d.isConstant(),this.sortFeaturesByY=(_==="viewport-y"||_==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map((x=>v.az[x]))),this.stateDependentLayerIds=this.layers.filter((x=>x.isStateDependent())).map((x=>x.id)),this.sourceID=e.sourceID}createArrays(){this.text=new $m(new Yc(this.layers,this.zoom,(e=>/^text/.test(e)))),this.icon=new $m(new Yc(this.layers,this.zoom,(e=>/^icon/.test(e)))),this.glyphOffsetArray=new N,this.lineVertexArray=new H,this.symbolInstances=new L,this.textAnchorOffsets=new $}calculateGlyphDependencies(e,r,h,d,_){for(const x of e)if(r[x.codePointAt(0)]=!0,(h||d)&&_){const C=dc[x];C&&(r[C.codePointAt(0)]=!0)}}populate(e,r,h){const d=this.layers[0],_=d.layout,x=_.get("text-font"),C=_.get("text-field"),T=_.get("icon-image"),P=(C.value.kind!=="constant"||C.value.value instanceof La&&!C.value.value.isEmpty()||C.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),Q=T.value.kind!=="constant"||!!T.value.value||Object.keys(T.parameters).length>0,k=_.get("symbol-sort-key");if(this.features=[],!P&&!Q)return;const K=r.iconDependencies,X=r.glyphDependencies,re=r.availableImages,ae=new bn(this.zoom);for(const{feature:ue,id:ve,index:He,sourceLayerIndex:me}of e){const Ie=d._featureFilter.needGeometry,rt=zA(ue,Ie);if(!d._featureFilter.filter(ae,rt,h))continue;let ct,Lt;if(Ie||(rt.geometry=ol(ue)),P){const Xt=d.getValueAndResolveTokens("text-field",rt,h,re),nr=La.factory(Xt),mr=this.hasRTLText=this.hasRTLText||j0(nr);(!mr||Vn.getRTLTextPluginStatus()==="unavailable"||mr&&Vn.isParsed())&&(ct=F0(nr,d,rt))}if(Q){const Xt=d.getValueAndResolveTokens("icon-image",rt,h,re);Lt=Xt instanceof fs?Xt:fs.fromString(Xt)}if(!ct&&!Lt)continue;const qt=this.sortFeaturesByKey?k.evaluate(rt,{},h):void 0;if(this.features.push({id:ve,text:ct,icon:Lt,index:He,sourceLayerIndex:me,geometry:rt.geometry,properties:ue.properties,type:hd.types[ue.type],sortKey:qt}),Lt&&(K[Lt.name]=!0),ct){const Xt=x.evaluate(rt,{},h).join(","),nr=_.get("text-rotation-alignment")!=="viewport"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(v.az.vertical)>=0;for(const mr of ct.sections)if(mr.image)K[mr.image.name]=!0;else{const sr=yn(ct.toString()),Yt=mr.fontStack||Xt,zt=X[Yt]=X[Yt]||{};this.calculateGlyphDependencies(mr.text,zt,nr,this.allowVerticalPlacement,sr)}}}_.get("symbol-placement")==="line"&&(this.features=(function(ue){const ve={},He={},me=[];let Ie=0;function rt(Xt){me.push(ue[Xt]),Ie++}function ct(Xt,nr,mr){const sr=He[Xt];return delete He[Xt],He[nr]=sr,me[sr].geometry[0].pop(),me[sr].geometry[0]=me[sr].geometry[0].concat(mr[0]),sr}function Lt(Xt,nr,mr){const sr=ve[nr];return delete ve[nr],ve[Xt]=sr,me[sr].geometry[0].shift(),me[sr].geometry[0]=mr[0].concat(me[sr].geometry[0]),sr}function qt(Xt,nr,mr){const sr=mr?nr[0][nr[0].length-1]:nr[0][0];return`${Xt}:${sr.x}:${sr.y}`}for(let Xt=0;Xt<ue.length;Xt++){const nr=ue[Xt],mr=nr.geometry,sr=nr.text?nr.text.toString():null;if(!sr){rt(Xt);continue}const Yt=qt(sr,mr),zt=qt(sr,mr,!0);if(Yt in He&&zt in ve&&He[Yt]!==ve[zt]){const Cr=Lt(Yt,zt,mr),Ir=ct(Yt,zt,me[Cr].geometry);delete ve[Yt],delete He[zt],He[qt(sr,me[Ir].geometry,!0)]=Ir,me[Cr].geometry=null}else Yt in He?ct(Yt,zt,mr):zt in ve?Lt(Yt,zt,mr):(rt(Xt),ve[Yt]=Ie-1,He[zt]=Ie-1)}return me.filter((Xt=>Xt.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((ue,ve)=>ue.sortKey-ve.sortKey))}update(e,r,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,r,this.layers,{imagePositions:h}),this.icon.programConfigurations.updatePaintArrays(e,r,this.layers,{imagePositions:h}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,r){const h=this.lineVertexArray.length;if(e.segment!==void 0){let d=e.dist(r[e.segment+1]),_=e.dist(r[e.segment]);const x={};for(let C=e.segment+1;C<r.length;C++)x[C]={x:r[C].x,y:r[C].y,tileUnitDistanceFromAnchor:d},C<r.length-1&&(d+=r[C+1].dist(r[C]));for(let C=e.segment||0;C>=0;C--)x[C]={x:r[C].x,y:r[C].y,tileUnitDistanceFromAnchor:_},C>0&&(_+=r[C-1].dist(r[C]));for(let C=0;C<r.length;C++){const T=x[C];this.lineVertexArray.emplaceBack(T.x,T.y,T.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(e,r,h,d,_,x,C,T,P,Q,k,K){const X=e.indexArray,re=e.layoutVertexArray,ae=e.segments.prepareSegment(4*r.length,re,X,this.canOverlap?x.sortKey:void 0),ue=this.glyphOffsetArray.length,ve=ae.vertexLength,He=this.allowVerticalPlacement&&C===v.az.vertical?Math.PI/2:0,me=x.text&&x.text.sections;for(let Ie=0;Ie<r.length;Ie++){const{tl:rt,tr:ct,bl:Lt,br:qt,tex:Xt,pixelOffsetTL:nr,pixelOffsetBR:mr,minFontScaleX:sr,minFontScaleY:Yt,glyphOffset:zt,isSDF:Cr,sectionIndex:Ir}=r[Ie],$r=ae.vertexLength,Ur=zt[1];Ef(re,T.x,T.y,rt.x,Ur+rt.y,Xt.x,Xt.y,h,Cr,nr.x,nr.y,sr,Yt),Ef(re,T.x,T.y,ct.x,Ur+ct.y,Xt.x+Xt.w,Xt.y,h,Cr,mr.x,nr.y,sr,Yt),Ef(re,T.x,T.y,Lt.x,Ur+Lt.y,Xt.x,Xt.y+Xt.h,h,Cr,nr.x,mr.y,sr,Yt),Ef(re,T.x,T.y,qt.x,Ur+qt.y,Xt.x+Xt.w,Xt.y+Xt.h,h,Cr,mr.x,mr.y,sr,Yt),Ep(e.dynamicLayoutVertexArray,T,He),X.emplaceBack($r,$r+2,$r+1),X.emplaceBack($r+1,$r+2,$r+3),ae.vertexLength+=4,ae.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(zt[0]),Ie!==r.length-1&&Ir===r[Ie+1].sectionIndex||e.programConfigurations.populatePaintArrays(re.length,x,x.index,{imagePositions:{},canonical:K,formattedSection:me&&me[Ir]})}e.placedSymbolArray.emplaceBack(T.x,T.y,ue,this.glyphOffsetArray.length-ue,ve,P,Q,T.segment,h?h[0]:0,h?h[1]:0,d[0],d[1],C,0,!1,0,k)}_addCollisionDebugVertex(e,r,h,d,_,x){return r.emplaceBack(0,0),e.emplaceBack(h.x,h.y,d,_,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(e,r,h,d,_,x,C){const T=_.segments.prepareSegment(4,_.layoutVertexArray,_.indexArray),P=T.vertexLength,Q=_.layoutVertexArray,k=_.collisionVertexArray,K=C.anchorX,X=C.anchorY;this._addCollisionDebugVertex(Q,k,x,K,X,new S(e,r)),this._addCollisionDebugVertex(Q,k,x,K,X,new S(h,r)),this._addCollisionDebugVertex(Q,k,x,K,X,new S(h,d)),this._addCollisionDebugVertex(Q,k,x,K,X,new S(e,d)),T.vertexLength+=4;const re=_.indexArray;re.emplaceBack(P,P+1),re.emplaceBack(P+1,P+2),re.emplaceBack(P+2,P+3),re.emplaceBack(P+3,P),T.primitiveLength+=4}addDebugCollisionBoxes(e,r,h,d){for(let _=e;_<r;_++){const x=this.collisionBoxArray.get(_);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,d?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new dd(Nt,Nl.members,Qt),this.iconCollisionBox=new dd(Nt,Nl.members,Qt);for(let e=0;e<this.symbolInstances.length;e++){const r=this.symbolInstances.get(e);this.addDebugCollisionBoxes(r.textBoxStartIndex,r.textBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.iconBoxStartIndex,r.iconBoxEndIndex,r,!1),this.addDebugCollisionBoxes(r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex,r,!1)}}_deserializeCollisionBoxesForSymbol(e,r,h,d,_,x,C,T,P){const Q={};for(let k=r;k<h;k++){const K=e.get(k);Q.textBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,anchorPointX:K.anchorPointX,anchorPointY:K.anchorPointY},Q.textFeatureIndex=K.featureIndex;break}for(let k=d;k<_;k++){const K=e.get(k);Q.verticalTextBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,anchorPointX:K.anchorPointX,anchorPointY:K.anchorPointY},Q.verticalTextFeatureIndex=K.featureIndex;break}for(let k=x;k<C;k++){const K=e.get(k);Q.iconBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,anchorPointX:K.anchorPointX,anchorPointY:K.anchorPointY},Q.iconFeatureIndex=K.featureIndex;break}for(let k=T;k<P;k++){const K=e.get(k);Q.verticalIconBox={x1:K.x1,y1:K.y1,x2:K.x2,y2:K.y2,anchorPointX:K.anchorPointX,anchorPointY:K.anchorPointY},Q.verticalIconFeatureIndex=K.featureIndex;break}return Q}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let r=0;r<this.symbolInstances.length;r++){const h=this.symbolInstances.get(r);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,r){const h=e.placedSymbolArray.get(r),d=h.vertexStartIndex+4*h.numGlyphs;for(let _=h.vertexStartIndex;_<d;_+=4)e.indexArray.emplaceBack(_,_+2,_+1),e.indexArray.emplaceBack(_+1,_+2,_+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const r=Math.sin(e),h=Math.cos(e),d=[],_=[],x=[];for(let C=0;C<this.symbolInstances.length;++C){x.push(C);const T=this.symbolInstances.get(C);d.push(0|Math.round(r*T.anchorX+h*T.anchorY)),_.push(T.featureIndex)}return x.sort(((C,T)=>d[C]-d[T]||_[T]-_[C])),x}addToSortKeyRanges(e,r){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===r?h.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:r,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const r of this.symbolInstanceIndexes){const h=this.symbolInstances.get(r);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach(((d,_,x)=>{d>=0&&x.indexOf(d)===_&&this.addIndicesForPlacedSymbol(this.text,d)})),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let H0,V0;Ze("SymbolBucket",uh,{omit:["layers","collisionBoxArray","features","compareText"]}),uh.MAX_GLYPHS=65535,uh.addDynamicAttributes=Ep;var zh={get paint(){return V0=V0||new ei({"icon-opacity":new yr(Qe.paint_symbol["icon-opacity"]),"icon-color":new yr(Qe.paint_symbol["icon-color"]),"icon-halo-color":new yr(Qe.paint_symbol["icon-halo-color"]),"icon-halo-width":new yr(Qe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new yr(Qe.paint_symbol["icon-halo-blur"]),"icon-translate":new gr(Qe.paint_symbol["icon-translate"]),"icon-translate-anchor":new gr(Qe.paint_symbol["icon-translate-anchor"]),"text-opacity":new yr(Qe.paint_symbol["text-opacity"]),"text-color":new yr(Qe.paint_symbol["text-color"],{runtimeType:Ji,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new yr(Qe.paint_symbol["text-halo-color"]),"text-halo-width":new yr(Qe.paint_symbol["text-halo-width"]),"text-halo-blur":new yr(Qe.paint_symbol["text-halo-blur"]),"text-translate":new gr(Qe.paint_symbol["text-translate"]),"text-translate-anchor":new gr(Qe.paint_symbol["text-translate-anchor"])})},get layout(){return H0=H0||new ei({"symbol-placement":new gr(Qe.layout_symbol["symbol-placement"]),"symbol-spacing":new gr(Qe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new gr(Qe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new yr(Qe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new gr(Qe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new gr(Qe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new gr(Qe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new gr(Qe.layout_symbol["icon-ignore-placement"]),"icon-optional":new gr(Qe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new gr(Qe.layout_symbol["icon-rotation-alignment"]),"icon-size":new yr(Qe.layout_symbol["icon-size"]),"icon-text-fit":new gr(Qe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new gr(Qe.layout_symbol["icon-text-fit-padding"]),"icon-image":new yr(Qe.layout_symbol["icon-image"]),"icon-rotate":new yr(Qe.layout_symbol["icon-rotate"]),"icon-padding":new yr(Qe.layout_symbol["icon-padding"]),"icon-keep-upright":new gr(Qe.layout_symbol["icon-keep-upright"]),"icon-offset":new yr(Qe.layout_symbol["icon-offset"]),"icon-anchor":new yr(Qe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new gr(Qe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new gr(Qe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new gr(Qe.layout_symbol["text-rotation-alignment"]),"text-field":new yr(Qe.layout_symbol["text-field"]),"text-font":new yr(Qe.layout_symbol["text-font"]),"text-size":new yr(Qe.layout_symbol["text-size"]),"text-max-width":new yr(Qe.layout_symbol["text-max-width"]),"text-line-height":new gr(Qe.layout_symbol["text-line-height"]),"text-letter-spacing":new yr(Qe.layout_symbol["text-letter-spacing"]),"text-justify":new yr(Qe.layout_symbol["text-justify"]),"text-radial-offset":new yr(Qe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new gr(Qe.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new yr(Qe.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new yr(Qe.layout_symbol["text-anchor"]),"text-max-angle":new gr(Qe.layout_symbol["text-max-angle"]),"text-writing-mode":new gr(Qe.layout_symbol["text-writing-mode"]),"text-rotate":new yr(Qe.layout_symbol["text-rotate"]),"text-padding":new gr(Qe.layout_symbol["text-padding"]),"text-keep-upright":new gr(Qe.layout_symbol["text-keep-upright"]),"text-transform":new yr(Qe.layout_symbol["text-transform"]),"text-offset":new yr(Qe.layout_symbol["text-offset"]),"text-allow-overlap":new gr(Qe.layout_symbol["text-allow-overlap"]),"text-overlap":new gr(Qe.layout_symbol["text-overlap"]),"text-ignore-placement":new gr(Qe.layout_symbol["text-ignore-placement"]),"text-optional":new gr(Qe.layout_symbol["text-optional"])})}};class G0{constructor(e){if(e.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=e.property.overrides?e.property.overrides.runtimeType:Wn,this.defaultValue=e}evaluate(e){if(e.formattedSection){const r=this.defaultValue.property.overrides;if(r&&r.hasOverride(e.formattedSection))return r.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ze("FormatSectionOverride",G0,{omit:["defaultValue"]});class pd extends Gn{constructor(e,r){super(e,zh,r)}recalculate(e,r){if(super.recalculate(e,r),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const h=this.layout.get("text-writing-mode");if(h){const d=[];for(const _ of h)d.indexOf(_)<0&&d.push(_);this.layout._values["text-writing-mode"]=d}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,r,h,d){const _=this.layout.get(e).evaluate(r,{},h,d),x=this._unevaluatedLayout._values[e];return x.isDataDriven()||DA(x.value)||!_?_:(function(C,T){return T.replace(/{([^{}]+)}/g,((P,Q)=>C&&Q in C?String(C[Q]):""))})(r.properties,_)}createBucket(e){return new uh(e)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const e of zh.paint.overridableProperties){if(!pd.hasPaintOverride(this.layout,e))continue;const r=this.paint.get(e),h=new G0(r),d=new Kc(h,r.property.specification);let _=null;_=r.value.kind==="constant"||r.value.kind==="source"?new Ks("source",d):new ic("composite",d,r.value.zoomStops),this.paint._values[e]=new Un(r.property,_,r.parameters)}}_handleOverridablePaintPropertyUpdate(e,r,h){return!(!this.layout||r.isDataDriven()||h.isDataDriven())&&pd.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,r){const h=e.get("text-field"),d=zh.paint.properties[r];let _=!1;const x=C=>{for(const T of C)if(d.overrides&&d.overrides.hasOverride(T))return void(_=!0)};if(h.value.kind==="constant"&&h.value.value instanceof La)x(h.value.value.sections);else if(h.value.kind==="source"||h.value.kind==="composite"){const C=P=>{_||(P instanceof Ua&&ri(P.value)===ys?x(P.value.sections):P instanceof Wo?x(P.sections):P.eachChild(C))},T=h.value;T._styleExpression&&C(T._styleExpression.expression)}return _}}let ti;var Jm={get paint(){return ti=ti||new ei({"background-color":new gr(Qe.paint_background["background-color"]),"background-pattern":new yi(Qe.paint_background["background-pattern"]),"background-opacity":new gr(Qe.paint_background["background-opacity"])})}};class Tp extends Gn{constructor(e,r){super(e,Jm,r)}}class eg extends Gn{constructor(e,r){super(e,{},r),this.onAdd=h=>{this.implementation.onAdd&&this.implementation.onAdd(h,h.painter.context.gl)},this.onRemove=h=>{this.implementation.onRemove&&this.implementation.onRemove(h,h.painter.context.gl)},this.implementation=e}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class q0{constructor(e){this._methodToThrottle=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const tg={once:!0},jh=63710088e-1;class Ic{constructor(e,r){if(isNaN(e)||isNaN(r))throw new Error(`Invalid LngLat object: (${e}, ${r})`);if(this.lng=+e,this.lat=+r,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ic(mt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const r=Math.PI/180,h=this.lat*r,d=e.lat*r,_=Math.sin(h)*Math.sin(d)+Math.cos(h)*Math.cos(d)*Math.cos((e.lng-this.lng)*r);return jh*Math.acos(Math.min(_,1))}static convert(e){if(e instanceof Ic)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new Ic(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new Ic(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const K0=2*Math.PI*jh;function rg(a){return K0*Math.cos(a*Math.PI/180)}function Z0(a){return(180+a)/360}function X0(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function ng(a,e){return a/rg(e)}function ig(a){return 360*a-180}function Di(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}function Fp(a,e){return a*rg(Di(e))}class gs{constructor(e,r,h=0){this.x=+e,this.y=+r,this.z=+h}static fromLngLat(e,r=0){const h=Ic.convert(e);return new gs(Z0(h.lng),X0(h.lat),ng(r,h.lat))}toLngLat(){return new Ic(ig(this.x),Di(this.y))}toAltitude(){return Fp(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/K0*(e=Di(this.y),1/Math.cos(e*Math.PI/180));var e}}function W0(a,e,r){var h=2*Math.PI*6378137/256/Math.pow(2,r);return[a*h-2*Math.PI*6378137/2,e*h-2*Math.PI*6378137/2]}class Ip{constructor(e,r,h){if(!(function(d,_,x){return!(d<0||d>25||x<0||x>=Math.pow(2,d)||_<0||_>=Math.pow(2,d))})(e,r,h))throw new Error(`x=${r}, y=${h}, z=${e} outside of bounds. 0<=x<${Math.pow(2,e)}, 0<=y<${Math.pow(2,e)} 0<=z<=25 `);this.z=e,this.x=r,this.y=h,this.key=hh(0,e,e,r,h)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,r,h){const d=(x=this.y,C=this.z,T=W0(256*(_=this.x),256*(x=Math.pow(2,C)-x-1),C),P=W0(256*(_+1),256*(x+1),C),T[0]+","+T[1]+","+P[0]+","+P[1]);var _,x,C,T,P;const Q=(function(k,K,X){let re,ae="";for(let ue=k;ue>0;ue--)re=1<<ue-1,ae+=(K&re?1:0)+(X&re?2:0);return ae})(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,r>1?"@2x":"").replace(/{quadkey}/g,Q).replace(/{bbox-epsg-3857}/g,d)}isChildOf(e){const r=this.z-e.z;return r>0&&e.x===this.x>>r&&e.y===this.y>>r}getTilePoint(e){const r=Math.pow(2,this.z);return new S((e.x*r-this.x)*xt,(e.y*r-this.y)*xt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Y0{constructor(e,r){this.wrap=e,this.canonical=r,this.key=hh(e,r.z,r.z,r.x,r.y)}}class Al{constructor(e,r,h,d,_){if(this.terrainRttPosMatrix32f=null,e<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${e}; z = ${h}`);this.overscaledZ=e,this.wrap=r,this.canonical=new Ip(h,+d,+_),this.key=hh(r,e,h,d,_)}clone(){return new Al(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const r=this.canonical.z-e;return e>this.canonical.z?new Al(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Al(e,this.wrap,e,this.canonical.x>>r,this.canonical.y>>r)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(e,r){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-e;return e>this.canonical.z?hh(this.wrap*+r,e,this.canonical.z,this.canonical.x,this.canonical.y):hh(this.wrap*+r,e,e,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(e){if(e.wrap!==this.wrap||this.overscaledZ-e.overscaledZ<=0)return!1;if(e.overscaledZ===0)return this.overscaledZ>0;const r=this.canonical.z-e.canonical.z;return!(r<0)&&e.canonical.x===this.canonical.x>>r&&e.canonical.y===this.canonical.y>>r}children(e){if(this.overscaledZ>=e)return[new Al(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const r=this.canonical.z+1,h=2*this.canonical.x,d=2*this.canonical.y;return[new Al(r,this.wrap,r,h,d),new Al(r,this.wrap,r,h+1,d),new Al(r,this.wrap,r,h,d+1),new Al(r,this.wrap,r,h+1,d+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new Al(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new Al(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Y0(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(e){return this.canonical.getTilePoint(new gs(e.x-this.wrap,e.y))}normalizeCoordinates(e,r,h=8192){if(e>=0&&e<h&&r>=0&&r<h)return{tileID:this,x:e,y:r};const d=Math.floor(e/h),_=Math.floor(r/h),x=e-d*h,C=r-_*h,T=this.canonical.z,P=1<<T,Q=this.canonical.y+_;if(Q<0||Q>=P)return null;let k=this.canonical.x+d,K=this.wrap;return k<0?(K-=Math.ceil(-k/P),k=(k%P+P)%P):k>=P&&(K+=Math.floor(k/P),k%=P),{tileID:new Al(this.overscaledZ,K,T,k,Q),x,y:C}}}function hh(a,e,r,h,d){(a*=2)<0&&(a=-1*a-1);const _=1<<r;return(_*_*a+_*d+h).toString(36)+r.toString(36)+e.toString(36)}function Tf(a,e){return e?a.properties[e]:a.id}function $0(a,e){const r={id:a.id};if(e.removeAllProperties&&(delete a.removeProperties,delete a.addOrUpdateProperties,delete e.removeProperties),e.removeProperties)for(const h of e.removeProperties){const d=a.addOrUpdateProperties.findIndex((_=>_.key===h));d>-1&&a.addOrUpdateProperties.splice(d,1)}return(a.removeAllProperties||e.removeAllProperties)&&(r.removeAllProperties=!0),(a.removeProperties||e.removeProperties)&&(r.removeProperties=[...a.removeProperties||[],...e.removeProperties||[]]),(a.addOrUpdateProperties||e.addOrUpdateProperties)&&(r.addOrUpdateProperties=[...a.addOrUpdateProperties||[],...e.addOrUpdateProperties||[]]),(a.newGeometry||e.newGeometry)&&(r.newGeometry=e.newGeometry||a.newGeometry),r}function ag(a){var e,r;if(!a)return{};const h={};return h.removeAll=a.removeAll,h.remove=new Set(a.remove||[]),h.add=new Map((e=a.add)===null||e===void 0?void 0:e.map((d=>[d.id,d]))),h.update=new Map((r=a.update)===null||r===void 0?void 0:r.map((d=>[d.id,d]))),h}Ze("CanonicalTileID",Ip),Ze("OverscaledTileID",Al,{omit:["terrainRttPosMatrix32f"]});class Qu{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(e){return this.minX=Math.min(this.minX,e.x),this.minY=Math.min(this.minY,e.y),this.maxX=Math.max(this.maxX,e.x),this.maxY=Math.max(this.maxY,e.y),this}expandBy(e){return this.minX-=e,this.minY-=e,this.maxX+=e,this.maxY+=e,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(e){return this.expandBy(-e)}map(e){const r=new Qu;return r.extend(e(new S(this.minX,this.minY))),r.extend(e(new S(this.maxX,this.minY))),r.extend(e(new S(this.minX,this.maxY))),r.extend(e(new S(this.maxX,this.maxY))),r}static fromPoints(e){const r=new Qu;for(const h of e)r.extend(h);return r}contains(e){return e.x>=this.minX&&e.x<=this.maxX&&e.y>=this.minY&&e.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(e){return!this.empty()&&!e.empty()&&e.minX>=this.minX&&e.maxX<=this.maxX&&e.minY>=this.minY&&e.maxY<=this.maxY}intersects(e){return!this.empty()&&!e.empty()&&e.minX<=this.maxX&&e.maxX>=this.minX&&e.minY<=this.maxY&&e.maxY>=this.minY}}class Lp{constructor(e){this._stringToNumber={},this._numberToString=[];for(let r=0;r<e.length;r++){const h=e[r];this._stringToNumber[h]=r,this._numberToString[r]=h}}encode(e){return this._stringToNumber[e]}decode(e){if(e>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${e} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[e]}}class J0{constructor(e,r,h,d,_){this.type="Feature",this._vectorTileFeature=e,this._x=h,this._y=d,this._z=r,this.properties=e.properties,this.id=_}projectPoint(e,r,h,d){return[360*(e.x+r)/d-180,360/Math.PI*Math.atan(Math.exp((1-2*(e.y+h)/d)*Math.PI))-90]}projectLine(e,r,h,d){return e.map((_=>this.projectPoint(_,r,h,d)))}get geometry(){if(this._geometry)return this._geometry;const e=this._vectorTileFeature,r=e.extent*Math.pow(2,this._z),h=e.extent*this._x,d=e.extent*this._y,_=e.loadGeometry();switch(e.type){case 1:{const x=[];for(const T of _)x.push(T[0]);const C=this.projectLine(x,h,d,r);this._geometry=x.length===1?{type:"Point",coordinates:C[0]}:{type:"MultiPoint",coordinates:C};break}case 2:{const x=_.map((C=>this.projectLine(C,h,d,r)));this._geometry=x.length===1?{type:"LineString",coordinates:x[0]}:{type:"MultiLineString",coordinates:x};break}case 3:{const x=Wi(_),C=[];for(const T of x)C.push(T.map((P=>this.projectLine(P,h,d,r))));this._geometry=C.length===1?{type:"Polygon",coordinates:C[0]}:{type:"MultiPolygon",coordinates:C};break}default:throw new Error(`unknown feature type: ${e.type}`)}return this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={geometry:this.geometry};for(const r in this)r!=="_geometry"&&r!=="_vectorTileFeature"&&r!=="_x"&&r!=="_y"&&r!=="_z"&&(e[r]=this[r]);return e}}class Hh{_name;dataBuffer;nullabilityBuffer;_size;constructor(e,r,h){this._name=e,this.dataBuffer=r,typeof h=="number"?this._size=h:(this.nullabilityBuffer=h,this._size=h.size())}getValue(e){return this.nullabilityBuffer&&!this.nullabilityBuffer.get(e)?null:this.getValueFromBuffer(e)}has(e){return this.nullabilityBuffer&&this.nullabilityBuffer.get(e)||!this.nullabilityBuffer}get name(){return this._name}get size(){return this._size}}class Mp extends Hh{}class Up extends Mp{getValueFromBuffer(e){return this.dataBuffer[e]}}class sg extends Mp{getValueFromBuffer(e){return this.dataBuffer[e]}}class ey extends Hh{delta;constructor(e,r,h,d){super(e,r,d),this.delta=h}}class lu extends ey{constructor(e,r,h,d){super(e,Int32Array.of(r),h,d)}getValueFromBuffer(e){return this.dataBuffer[0]+e*this.delta}}class Dp extends Hh{constructor(e,r,h){super(e,Int32Array.of(r),h)}getValueFromBuffer(e){return this.dataBuffer[0]}}class ty{_name;_geometryVector;_idVector;_propertyVectors;_extent;propertyVectorsMap;constructor(e,r,h,d,_=4096){this._name=e,this._geometryVector=r,this._idVector=h,this._propertyVectors=d,this._extent=_}get name(){return this._name}get idVector(){return this._idVector}get geometryVector(){return this._geometryVector}get propertyVectors(){return this._propertyVectors}getPropertyVector(e){return this.propertyVectorsMap||(this.propertyVectorsMap=new Map(this._propertyVectors.map((r=>[r.name,r])))),this.propertyVectorsMap.get(e)}*[Symbol.iterator](){const e=this.geometryVector[Symbol.iterator]();let r=0;for(;r<this.numFeatures;){let h;this.idVector&&(h=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(r)):this.idVector.getValue(r));const d=e?.next().value,_={};for(const x of this.propertyVectors){if(!x)continue;const C=x.name,T=x.getValue(r);T!==null&&(_[C]=T)}r++,yield{id:h,geometry:d,properties:_}}}get numFeatures(){return this.geometryVector.numGeometries}get extent(){return this._extent}getFeatures(){const e=[],r=this.geometryVector.getGeometries();for(let h=0;h<this.numFeatures;h++){let d;this.idVector&&(d=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(h)):this.idVector.getValue(h));const _={coordinates:r[h],type:this.geometryVector.geometryType(h)},x={};for(const C of this.propertyVectors){if(!C)continue;const T=C.name,P=C.getValue(h);P!==null&&(x[T]=P)}e.push({id:d,geometry:_,properties:x})}return e}containsMaxSaveIntegerValues(e){return e instanceof Up||e instanceof Dp&&e instanceof lu||e instanceof sg}}class og{value;constructor(e){this.value=e}get(){return this.value}set(e){this.value=e}increment(){return this.value++}add(e){this.value+=e}}var Fi,fh,eo,VA,ku,uA,di,ts,lg,hA;function Bo(a,e,r){const h=new Int32Array(r);let d=0,_=e.get();for(let x=0;x<h.length;x++){let C=a[_++],T=127&C;C<128||(C=a[_++],T|=(127&C)<<7,C<128||(C=a[_++],T|=(127&C)<<14,C<128||(C=a[_++],T|=(127&C)<<21,C<128||(C=a[_++],T|=(15&C)<<28)))),h[d++]=T}return e.set(_),h}function Vh(a,e,r){const h=new BigInt64Array(r);for(let d=0;d<h.length;d++)h[d]=pc(a,e);return h}function pc(a,e){let r=0n,h=0,d=e.get();for(;d<a.length;){const _=a[d++];if(r|=BigInt(127&_)<<BigInt(h),!(128&_))break;if(h+=7,h>=64)throw new Error("Varint too long")}return e.set(d),r}function ry(a,e){let r,h;return h=a[e.get()],e.increment(),r=127&h,h<128?r:(h=a[e.get()],e.increment(),r|=(127&h)<<7,h<128?r:(h=a[e.get()],e.increment(),r|=(127&h)<<14,h<128?r:(h=a[e.get()],e.increment(),r|=(127&h)<<21,h<128?r:(h=a[e.get()],r|=(15&h)<<28,(function(d,_,x){let C,T;if(T=_[x.get()],x.increment(),C=(112&T)>>4,T<128||(T=_[x.get()],x.increment(),C|=(127&T)<<3,T<128)||(T=_[x.get()],x.increment(),C|=(127&T)<<10,T<128)||(T=_[x.get()],x.increment(),C|=(127&T)<<17,T<128)||(T=_[x.get()],x.increment(),C|=(127&T)<<24,T<128)||(T=_[x.get()],x.increment(),C|=(1&T)<<31,T<128))return 4294967296*C+(d>>>0);throw new Error("Expected varint not more than 10 bytes")})(r,a,e)))))}function Yi(a){return a>>>1^-(1&a)}function rs(a){return a>>1n^-(1n&a)}function Ff(a){return a%2==1?(a+1)/-2:a/2}function ny(a,e,r){if(r===void 0){r=0;for(let _=0;_<e;_++)r+=a[_]}const h=new Int32Array(r);let d=0;for(let _=0;_<e;_++){const x=a[_];h.fill(a[_+e],d,d+x),d+=x}return h}function Gh(a,e,r){if(r===void 0){r=0;for(let _=0;_<e;_++)r+=Number(a[_])}const h=new BigInt64Array(r);let d=0;for(let _=0;_<e;_++){const x=Number(a[_]);h.fill(a[_+e],d,d+x),d+=x}return h}function Ag(a,e,r){const h=new Float64Array(r);let d=0;for(let _=0;_<e;_++){const x=a[_];h.fill(a[_+e],d,d+x),d+=x}return h}function iy(a){const e=a.length/4*4;let r=1;if(e>=4)for(let h=a[0];r<e-4;r+=4)h=a[r]+=h,h=a[r+1]+=h,h=a[r+2]+=h,h=a[r+3]+=h;for(;r!=a.length;)a[r]+=a[r-1],++r}(function(a){a.NONE="NONE",a.DELTA="DELTA",a.COMPONENTWISE_DELTA="COMPONENTWISE_DELTA",a.RLE="RLE",a.MORTON="MORTON",a.PDE="PDE"})(Fi||(Fi={})),(function(a){a.NONE="NONE",a.FAST_PFOR="FAST_PFOR",a.VARINT="VARINT",a.ALP="ALP"})(fh||(fh={})),(function(a){a.PRESENT="PRESENT",a.DATA="DATA",a.OFFSET="OFFSET",a.LENGTH="LENGTH"})(eo||(eo={}));class cg{_dictionaryType;_offsetType;_lengthType;constructor(e,r,h){this._dictionaryType=e,this._offsetType=r,this._lengthType=h}get dictionaryType(){return this._dictionaryType}get offsetType(){return this._offsetType}get lengthType(){return this._lengthType}}function cl(a,e){const r=(function(h,d){const _=h[d.get()],x=Object.values(eo)[_>>4];let C=null;switch(x){case eo.DATA:C=new cg(Object.values(VA)[15&_]);break;case eo.OFFSET:C=new cg(null,Object.values(ku)[15&_]);break;case eo.LENGTH:C=new cg(null,null,Object.values(uA)[15&_])}d.increment();const T=h[d.get()],P=Object.values(Fi)[T>>5],Q=Object.values(Fi)[T>>2&7],k=Object.values(fh)[3&T];d.increment();const K=Bo(h,d,2),X=K[0];return{physicalStreamType:x,logicalStreamType:C,logicalLevelTechnique1:P,logicalLevelTechnique2:Q,physicalLevelTechnique:k,numValues:X,byteLength:K[1],decompressedCount:X}})(a,e);return r.logicalLevelTechnique1===Fi.MORTON?(function(h,d,_){const x=Bo(d,_,2);return{physicalStreamType:h.physicalStreamType,logicalStreamType:h.logicalStreamType,logicalLevelTechnique1:h.logicalLevelTechnique1,logicalLevelTechnique2:h.logicalLevelTechnique2,physicalLevelTechnique:h.physicalLevelTechnique,numValues:h.numValues,byteLength:h.byteLength,decompressedCount:h.decompressedCount,numBits:x[0],coordinateShift:x[1]}})(r,a,e):Fi.RLE!==r.logicalLevelTechnique1&&Fi.RLE!==r.logicalLevelTechnique2||fh.NONE===r.physicalLevelTechnique?r:(function(h,d,_){const x=Bo(d,_,2);return{physicalStreamType:h.physicalStreamType,logicalStreamType:h.logicalStreamType,logicalLevelTechnique1:h.logicalLevelTechnique1,logicalLevelTechnique2:h.logicalLevelTechnique2,physicalLevelTechnique:h.physicalLevelTechnique,numValues:h.numValues,byteLength:h.byteLength,decompressedCount:x[1],runs:x[0],numRleValues:x[1]}})(r,a,e)}(function(a){a.NONE="NONE",a.SINGLE="SINGLE",a.SHARED="SHARED",a.VERTEX="VERTEX",a.MORTON="MORTON",a.FSST="FSST"})(VA||(VA={})),(function(a){a.VERTEX="VERTEX",a.INDEX="INDEX",a.STRING="STRING",a.KEY="KEY"})(ku||(ku={})),(function(a){a.VAR_BINARY="VAR_BINARY",a.GEOMETRIES="GEOMETRIES",a.PARTS="PARTS",a.RINGS="RINGS",a.TRIANGLES="TRIANGLES",a.SYMBOL="SYMBOL",a.DICTIONARY="DICTIONARY"})(uA||(uA={})),(function(a){a[a.FLAT=0]="FLAT",a[a.CONST=1]="CONST",a[a.SEQUENCE=2]="SEQUENCE",a[a.DICTIONARY=3]="DICTIONARY",a[a.FSST_DICTIONARY=4]="FSST_DICTIONARY"})(di||(di={}));class Lc{values;_size;constructor(e,r){this.values=e,this._size=r}get(e){const r=Math.floor(e/8);return(this.values[r]>>e%8&1)==1}set(e,r){const h=Math.floor(e/8);this.values[h]=this.values[h]|(r?1:0)<<e%8}getInt(e){const r=Math.floor(e/8);return this.values[r]>>e%8&1}size(){return this._size}getBuffer(){return this.values}}function Pp(a,e,r){if(!e)return a;const h=e.size(),d=new a.constructor(h);let _=0;for(let x=0;x<h;x++)d[x]=e.get(x)?a[_++]:r;return d}function ul(a,e,r,h,d,_){return(function(x,C,T,P,Q){switch(C.logicalLevelTechnique1){case Fi.DELTA:if(C.logicalLevelTechnique2===Fi.RLE){const k=C;if(!Q)return(function(K,X,re){const ae=new Int32Array(re);let ue=0,ve=0;for(let He=0;He<X;He++){const me=K[He],Ie=Yi(K[He+X]);for(let rt=0;rt<me;rt++)ve+=Ie,ae[ue++]=ve}return ae})(x,k.runs,k.numRleValues);x=ny(x,k.runs,k.numRleValues)}(function(k){k[0]=Yi(k[0]);const K=k.length/4*4;let X=1;if(K>=4)for(;X<K-4;X+=4){const re=k[X+1],ae=k[X+2],ue=k[X+3];k[X]=Yi(k[X])+k[X-1],k[X+1]=Yi(re)+k[X],k[X+2]=Yi(ae)+k[X+1],k[X+3]=Yi(ue)+k[X+2]}for(;X!=k.length;++X)k[X]=Yi(k[X])+k[X-1]})(x);break;case Fi.RLE:x=(function(k,K,X){return X?(function(re,ae,ue){if(ue===void 0){ue=0;for(let me=0;me<ae;me++)ue+=re[me]}const ve=new Int32Array(ue);let He=0;for(let me=0;me<ae;me++){const Ie=re[me];let rt=re[me+ae];rt=Yi(rt),ve.fill(rt,He,He+Ie),He+=Ie}return ve})(k,K.runs,K.numRleValues):ny(k,K.runs,K.numRleValues)})(x,C,T);break;case Fi.MORTON:iy(x);break;case Fi.COMPONENTWISE_DELTA:(function(k){if(k.length<2)return;k[0]=Yi(k[0]),k[1]=Yi(k[1]);const K=k.length/4*4;let X=2;if(K>=4)for(;X<K-4;X+=4){const re=k[X+1],ae=k[X+2],ue=k[X+3];k[X]=Yi(k[X])+k[X-2],k[X+1]=Yi(re)+k[X-1],k[X+2]=Yi(ae)+k[X],k[X+3]=Yi(ue)+k[X+1]}for(;X!=k.length;X+=2)k[X]=Yi(k[X])+k[X-2],k[X+1]=Yi(k[X+1])+k[X-1]})(x);break;case Fi.NONE:T&&(function(k){for(let K=0;K<k.length;K++)k[K]=Yi(k[K])})(x);break;default:throw new Error(`The specified Logical level technique is not supported: ${C.logicalLevelTechnique1}`)}return Q?Pp(x,Q,0):x})(md(a,e,r),r,h,0,_)}function dh(a,e,r){return(function(h,d){if(d.logicalLevelTechnique1===Fi.DELTA&&d.logicalLevelTechnique2===Fi.NONE)return(function(_){const x=new Int32Array(_.length+1);x[0]=0,x[1]=Yi(_[0]);let C=x[1];for(let T=2;T!=x.length;++T)C+=Yi(_[T-1]),x[T]=x[T-1]+C;return new Uint32Array(x)})(h);if(d.logicalLevelTechnique1===Fi.RLE&&d.logicalLevelTechnique2===Fi.NONE)return(function(_,x,C){const T=new Int32Array(C+1);T[0]=0;let P=1,Q=T[0];for(let k=0;k<x;k++){const K=_[k],X=_[k+x];for(let re=P;re<P+K;re++)T[re]=X+Q,Q=T[re];P+=K}return new Uint32Array(T)})(h,d.runs,d.numRleValues);if(d.logicalLevelTechnique1===Fi.NONE&&d.logicalLevelTechnique2===Fi.NONE){(function(x){let C=0;for(let T=0;T<x.length;T++)x[T]+=C,C=x[T]})(h);const _=new Uint32Array(d.numValues+1);return _[0]=0,_.set(h,1),_}if(d.logicalLevelTechnique1===Fi.DELTA&&d.logicalLevelTechnique2===Fi.RLE){const _=(function(x,C,T){const P=new Int32Array(T+1);P[0]=0;let Q=1,k=P[0];for(let K=0;K<C;K++){const X=x[K];let re=x[K+C];re=Yi(re);for(let ae=Q;ae<Q+X;ae++)P[ae]=re+k,k=P[ae];Q+=X}return new Uint32Array(P)})(h,d.runs,d.numRleValues);return iy(_),_}throw new Error("Only delta encoding is supported for transforming length to offset streams yet.")})(md(a,e,r),r)}function md(a,e,r){const h=r.physicalLevelTechnique;if(h===fh.FAST_PFOR)return(function(){throw new Error("FastPFor is not implemented yet.")})();if(h===fh.VARINT)return Bo(a,e,r.numValues);if(h===fh.NONE){const d=e.get();e.add(r.byteLength);const _=a.subarray(d,e.get());return new Int32Array(_)}throw new Error("Specified physicalLevelTechnique is not supported (yet).")}function ph(a,e,r,h){const d=md(a,e,r);if(d.length===1){const _=d[0];return h?Yi(_):_}return h?(function(_){return Yi(_[1])})(d):(function(_){return _[1]})(d)}function If(a,e,r){return(function(h){if(h.length==2){const d=Yi(h[1]);return[d,d]}return[Yi(h[2]),Yi(h[3])]})(md(a,e,r))}function ug(a,e,r){return(function(h){if(h.length==2){const d=rs(h[1]);return[d,d]}return[rs(h[2]),rs(h[3])]})(Vh(a,e,r.numValues))}function ay(a,e,r,h,d){return(function(_,x,C,T){switch(x.logicalLevelTechnique1){case Fi.DELTA:if(x.logicalLevelTechnique2===Fi.RLE){const P=x;if(!T)return(function(Q,k,K){const X=new BigInt64Array(K);let re=0,ae=0n;for(let ue=0;ue<k;ue++){const ve=Number(Q[ue]),He=rs(Q[ue+k]);for(let me=0;me<ve;me++)ae+=He,X[re++]=ae}return X})(_,P.runs,P.numRleValues);_=Gh(_,P.runs,P.numRleValues)}(function(P){P[0]=rs(P[0]);const Q=P.length/4*4;let k=1;if(Q>=4)for(;k<Q-4;k+=4){const K=P[k+1],X=P[k+2],re=P[k+3];P[k]=rs(P[k])+P[k-1],P[k+1]=rs(K)+P[k],P[k+2]=rs(X)+P[k+1],P[k+3]=rs(re)+P[k+2]}for(;k!=P.length;++k)P[k]=rs(P[k])+P[k-1]})(_);break;case Fi.RLE:_=(function(P,Q,k){return k?(function(K,X,re){if(re===void 0){re=0;for(let ve=0;ve<X;ve++)re+=Number(K[ve])}const ae=new BigInt64Array(re);let ue=0;for(let ve=0;ve<X;ve++){const He=Number(K[ve]);let me=K[ve+X];me=rs(me),ae.fill(me,ue,ue+He),ue+=He}return ae})(P,Q.runs,Q.numRleValues):Gh(P,Q.runs,Q.numRleValues)})(_,x,C);break;case Fi.NONE:C&&(function(P){for(let Q=0;Q<P.length;Q++)P[Q]=rs(P[Q])})(_);break;default:throw new Error(`The specified Logical level technique is not supported: ${x.logicalLevelTechnique1}`)}return T?Pp(_,T,0n):_})(Vh(a,e,r.numValues),r,h,d)}function qh(a,e,r,h){const d=Vh(a,e,r.numValues);if(d.length===1){const _=d[0];return h?rs(_):_}return h?(function(_){return rs(_[1])})(d):(function(_){return _[1]})(d)}function mh(a,e,r,h){const d=a.logicalLevelTechnique1;if(d===Fi.RLE)return a.runs===1?di.CONST:di.FLAT;if(d!==Fi.DELTA||a.logicalLevelTechnique2!==Fi.RLE)return a.numValues===1?di.CONST:di.FLAT;const _=e instanceof Lc?e.size():e;if(a.numRleValues!==_)return di.FLAT;if(a.runs===1)return di.SEQUENCE;if(a.runs!==2)return a.numValues===1?di.CONST:di.FLAT;const x=h.get();let C;if(a.physicalLevelTechnique===fh.VARINT)C=Bo(r,h,4);else{const T=h.get();C=new Int32Array(r.buffer,r.byteOffset+T,4)}return h.set(x),C[2]===2&&C[3]===2?di.SEQUENCE:a.numValues===1?di.CONST:di.FLAT}class hg extends Mp{getValueFromBuffer(e){return this.dataBuffer[e]}}class gd extends ey{constructor(e,r,h,d){super(e,BigInt64Array.of(r),h,d)}getValueFromBuffer(e){return this.dataBuffer[0]+BigInt(e)*this.delta}}class gh{_geometryOffsets;_partOffsets;_ringOffsets;constructor(e,r,h){this._geometryOffsets=e,this._partOffsets=r,this._ringOffsets=h}get geometryOffsets(){return this._geometryOffsets}get partOffsets(){return this._partOffsets}get ringOffsets(){return this._ringOffsets}}function yd(a,e,r){return{x:_d(a,e)-r,y:_d(a>>1,e)-r}}function _d(a,e){let r=0;for(let h=0;h<e;h++)r|=(a&1<<2*h)>>h;return r}(function(a){a[a.POINT=0]="POINT",a[a.LINESTRING=1]="LINESTRING",a[a.POLYGON=2]="POLYGON",a[a.MULTIPOINT=3]="MULTIPOINT",a[a.MULTILINESTRING=4]="MULTILINESTRING",a[a.MULTIPOLYGON=5]="MULTIPOLYGON"})(ts||(ts={})),(function(a){a[a.POINT=0]="POINT",a[a.LINESTRING=1]="LINESTRING",a[a.POLYGON=2]="POLYGON"})(lg||(lg={})),(function(a){a[a.MORTON=0]="MORTON",a[a.VEC_2=1]="VEC_2",a[a.VEC_3=2]="VEC_3"})(hA||(hA={}));class sy{createPoint(e){return[[e]]}createMultiPoint(e){return e.map((r=>[r]))}createLineString(e){return[e]}createMultiLineString(e){return e}createPolygon(e,r){return[e].concat(r)}createMultiPolygon(e){return e.flat()}}function fg(a){const e=new Array(a.numGeometries);let r=1,h=1,d=1,_=0;const x=new sy;let C=0,T=0;const P=a.mortonSettings,Q=a.topologyVector,k=Q.geometryOffsets,K=Q.partOffsets,X=Q.ringOffsets,re=a.vertexOffsets,ae=a.containsPolygonGeometry(),ue=a.vertexBuffer;for(let ve=0;ve<a.numGeometries;ve++){const He=a.geometryType(ve);if(He===ts.POINT){if(re&&re.length!==0)if(a.vertexBufferType===hA.VEC_2){const me=2*re[T++],Ie=new S(ue[me],ue[me+1]);e[_++]=x.createPoint(Ie)}else{const me=yd(ue[re[T++]],P.numBits,P.coordinateShift),Ie=new S(me.x,me.y);e[_++]=x.createPoint(Ie)}else{const me=new S(ue[C++],ue[C++]);e[_++]=x.createPoint(me)}k&&d++,K&&r++,X&&h++}else if(He===ts.MULTIPOINT){const me=k[d]-k[d-1];d++;const Ie=new Array(me);if(re&&re.length!==0){for(let rt=0;rt<me;rt++){const ct=2*re[T++];Ie[rt]=new S(ue[ct],ue[ct+1])}e[_++]=x.createMultiPoint(Ie)}else{for(let rt=0;rt<me;rt++){const ct=ue[C++],Lt=ue[C++];Ie[rt]=new S(ct,Lt)}e[_++]=x.createMultiPoint(Ie)}}else if(He===ts.LINESTRING){let me,Ie=0;ae?(Ie=X[h]-X[h-1],h++):Ie=K[r]-K[r-1],r++,re&&re.length!==0?(me=a.vertexBufferType===hA.VEC_2?dg(ue,re,T,Ie,!1):Lf(ue,re,T,Ie,!1,P),T+=Ie):(me=xd(ue,C,Ie,!1),C+=2*Ie),e[_++]=x.createLineString(me),k&&d++}else if(He===ts.POLYGON){const me=K[r]-K[r-1];r++;const Ie=new Array(me-1);let rt=X[h]-X[h-1];if(h++,re&&re.length!==0){const ct=a.vertexBufferType===hA.VEC_2?vd(ue,re,T,rt):Rp(ue,re,T,rt,0,P);T+=rt;for(let Lt=0;Lt<Ie.length;Lt++)rt=X[h]-X[h-1],h++,Ie[Lt]=a.vertexBufferType===hA.VEC_2?vd(ue,re,T,rt):Rp(ue,re,T,rt,0,P),T+=rt;e[_++]=x.createPolygon(ct,Ie)}else{const ct=Np(ue,C,rt);C+=2*rt;for(let Lt=0;Lt<Ie.length;Lt++)rt=X[h]-X[h-1],h++,Ie[Lt]=Np(ue,C,rt),C+=2*rt;e[_++]=x.createPolygon(ct,Ie)}k&&d++}else if(He===ts.MULTILINESTRING){const me=k[d]-k[d-1];d++;const Ie=new Array(me);if(re&&re.length!==0){for(let rt=0;rt<me;rt++){let ct=0;ae?(ct=X[h]-X[h-1],h++):ct=K[r]-K[r-1],r++;const Lt=a.vertexBufferType===hA.VEC_2?dg(ue,re,T,ct,!1):Lf(ue,re,T,ct,!1,P);Ie[rt]=Lt,T+=ct}e[_++]=x.createMultiLineString(Ie)}else{for(let rt=0;rt<me;rt++){let ct=0;ae?(ct=X[h]-X[h-1],h++):ct=K[r]-K[r-1],r++,Ie[rt]=xd(ue,C,ct,!1),C+=2*ct}e[_++]=x.createMultiLineString(Ie)}}else{if(He!==ts.MULTIPOLYGON)throw new Error("The specified geometry type is currently not supported.");{const me=k[d]-k[d-1];d++;const Ie=new Array(me);let rt=0;if(re&&re.length!==0){for(let ct=0;ct<me;ct++){const Lt=K[r]-K[r-1];r++;const qt=new Array(Lt-1);rt=X[h]-X[h-1],h++;const Xt=a.vertexBufferType===hA.VEC_2?vd(ue,re,T,rt):Rp(ue,re,T,rt,0,P);T+=rt;for(let nr=0;nr<qt.length;nr++)rt=X[h]-X[h-1],h++,qt[nr]=a.vertexBufferType===hA.VEC_2?vd(ue,re,T,rt):Rp(ue,re,T,rt,0,P),T+=rt;Ie[ct]=x.createPolygon(Xt,qt)}e[_++]=x.createMultiPolygon(Ie)}else{for(let ct=0;ct<me;ct++){const Lt=K[r]-K[r-1];r++;const qt=new Array(Lt-1);rt=X[h]-X[h-1],h++;const Xt=Np(ue,C,rt);C+=2*rt;for(let nr=0;nr<qt.length;nr++){const mr=X[h]-X[h-1];h++,qt[nr]=Np(ue,C,mr),C+=2*mr}Ie[ct]=x.createPolygon(Xt,qt)}e[_++]=x.createMultiPolygon(Ie)}}}}return e}function Np(a,e,r){return xd(a,e,r,!0)}function vd(a,e,r,h){return dg(a,e,r,h,!0)}function Rp(a,e,r,h,d,_){return Lf(a,e,r,h,!0,_)}function xd(a,e,r,h){const d=new Array(h?r+1:r);for(let _=0;_<2*r;_+=2)d[_/2]=new S(a[e+_],a[e+_+1]);return h&&(d[d.length-1]=d[0]),d}function dg(a,e,r,h,d){const _=new Array(d?h+1:h);for(let x=0;x<2*h;x+=2){const C=2*e[r+x/2];_[x/2]=new S(a[C],a[C+1])}return d&&(_[_.length-1]=_[0]),_}function Lf(a,e,r,h,d,_){const x=new Array(d?h+1:h);for(let C=0;C<h;C++){const T=yd(a[e[r+C]],_.numBits,_.coordinateShift);x[C]=new S(T.x,T.y)}return d&&(x[x.length-1]=x[0]),x}class bd{_vertexBufferType;_topologyVector;_vertexOffsets;_vertexBuffer;_mortonSettings;constructor(e,r,h,d,_){this._vertexBufferType=e,this._topologyVector=r,this._vertexOffsets=h,this._vertexBuffer=d,this._mortonSettings=_}get vertexBufferType(){return this._vertexBufferType}get topologyVector(){return this._topologyVector}get vertexOffsets(){return this._vertexOffsets}get vertexBuffer(){return this._vertexBuffer}*[Symbol.iterator](){const e=fg(this);let r=0;for(;r<this.numGeometries;)yield{coordinates:e[r],type:this.geometryType(r)},r++}getSimpleEncodedVertex(e){const r=this.vertexOffsets?2*this.vertexOffsets[e]:2*e;return[this.vertexBuffer[r],this.vertexBuffer[r+1]]}getVertex(e){if(this.vertexOffsets&&this.mortonSettings){const h=yd(this.vertexBuffer[this.vertexOffsets[e]],this.mortonSettings.numBits,this.mortonSettings.coordinateShift);return[h.x,h.y]}const r=this.vertexOffsets?2*this.vertexOffsets[e]:2*e;return[this.vertexBuffer[r],this.vertexBuffer[r+1]]}getGeometries(){return fg(this)}get mortonSettings(){return this._mortonSettings}}class wd extends bd{_numGeometries;_geometryType;constructor(e,r,h,d,_,x,C){super(h,d,_,x,C),this._numGeometries=e,this._geometryType=r}geometryType(e){return this._geometryType}get numGeometries(){return this._numGeometries}containsPolygonGeometry(){return this._geometryType===ts.POLYGON||this._geometryType===ts.MULTIPOLYGON}containsSingleGeometryType(){return!0}}class oy extends bd{_geometryTypes;constructor(e,r,h,d,_,x){super(e,h,d,_,x),this._geometryTypes=r}geometryType(e){return this._geometryTypes[e]}get numGeometries(){return this._geometryTypes.length}containsPolygonGeometry(){for(let e=0;e<this.numGeometries;e++)if(this.geometryType(e)===ts.POLYGON||this.geometryType(e)===ts.MULTIPOLYGON)return!0;return!1}containsSingleGeometryType(){return!1}}class Mf{_triangleOffsets;_indexBuffer;_vertexBuffer;_topologyVector;constructor(e,r,h,d){this._triangleOffsets=e,this._indexBuffer=r,this._vertexBuffer=h,this._topologyVector=d}get triangleOffsets(){return this._triangleOffsets}get indexBuffer(){return this._indexBuffer}get vertexBuffer(){return this._vertexBuffer}get topologyVector(){return this._topologyVector}getGeometries(){if(!this._topologyVector)throw new Error("Cannot convert GpuVector to coordinates without topology information");const e=new Array(this.numGeometries),r=this._topologyVector,h=r.partOffsets,d=r.ringOffsets,_=r.geometryOffsets;let x=0,C=1,T=1,P=1;for(let Q=0;Q<this.numGeometries;Q++)switch(this.geometryType(Q)){case ts.POLYGON:{const k=h[C]-h[C-1];C++;const K=[];for(let X=0;X<k;X++){const re=d[T]-d[T-1];T++;const ae=[];for(let ue=0;ue<re;ue++){const ve=this._vertexBuffer[x++],He=this._vertexBuffer[x++];ae.push(new S(ve,He))}ae.length>0&&ae.push(ae[0]),K.push(ae)}e[Q]=K,_&&P++}break;case ts.MULTIPOLYGON:{const k=_[P]-_[P-1];P++;const K=[];for(let X=0;X<k;X++){const re=h[C]-h[C-1];C++;for(let ae=0;ae<re;ae++){const ue=d[T]-d[T-1];T++;const ve=[];for(let He=0;He<ue;He++){const me=this._vertexBuffer[x++],Ie=this._vertexBuffer[x++];ve.push(new S(me,Ie))}ve.length>0&&ve.push(ve[0]),K.push(ve)}}e[Q]=K}}return e}[Symbol.iterator](){return null}}function ly(a,e,r,h,d,_){return new Ay(a,e,r,h,d,_)}class Ay extends Mf{_numGeometries;_geometryType;constructor(e,r,h,d,_,x){super(h,d,_,x),this._numGeometries=e,this._geometryType=r}geometryType(e){return this._geometryType}get numGeometries(){return this._numGeometries}containsSingleGeometryType(){return!0}}function pg(a,e,r,h,d){return new cy(a,e,r,h,d)}class cy extends Mf{_geometryTypes;constructor(e,r,h,d,_){super(r,h,d,_),this._geometryTypes=e}geometryType(e){return this._geometryTypes[e]}get numGeometries(){return this._geometryTypes.length}containsSingleGeometryType(){return!1}}function uy(a,e,r,h,d){const _=cl(a,r);let x=null,C=null,T=null,P=null;if(mh(_,h,a,r)===di.CONST){const He=ph(a,r,_,!1);let me=null,Ie=null,rt=null,ct=null;for(let Lt=0;Lt<e-1;Lt++){const qt=cl(a,r);switch(qt.physicalStreamType){case eo.LENGTH:switch(qt.logicalStreamType.lengthType){case uA.GEOMETRIES:me=dh(a,r,qt);break;case uA.PARTS:Ie=dh(a,r,qt);break;case uA.RINGS:rt=dh(a,r,qt);break;case uA.TRIANGLES:ct=dh(a,r,qt)}break;case eo.OFFSET:switch(qt.logicalStreamType.offsetType){case ku.VERTEX:x=ul(a,r,qt,!1);break;case ku.INDEX:P=ul(a,r,qt,!1)}break;case eo.DATA:VA.VERTEX===qt.logicalStreamType.dictionaryType?C=ul(a,r,qt,!0):(T={numBits:qt.numBits,coordinateShift:qt.coordinateShift},C=ul(a,r,qt,!1))}}return P!==null?me!=null||Ie!=null?ly(h,He,ct,P,C,new gh(me,Ie,rt)):ly(h,He,ct,P,C):T===null?(function(Lt,qt,Xt,nr,mr){return new wd(Lt,qt,hA.VEC_2,Xt,nr,mr)})(h,He,new gh(me,Ie,rt),x,C):(function(Lt,qt,Xt,nr,mr,sr){return new wd(Lt,qt,hA.MORTON,Xt,nr,mr,sr)})(h,He,new gh(me,Ie,rt),x,C,T)}const Q=ul(a,r,_,!1);let k=null,K=null,X=null,re=null;for(let He=0;He<e-1;He++){const me=cl(a,r);switch(me.physicalStreamType){case eo.LENGTH:switch(me.logicalStreamType.lengthType){case uA.GEOMETRIES:k=ul(a,r,me,!1);break;case uA.PARTS:K=ul(a,r,me,!1);break;case uA.RINGS:X=ul(a,r,me,!1);break;case uA.TRIANGLES:re=dh(a,r,me)}break;case eo.OFFSET:switch(me.logicalStreamType.offsetType){case ku.VERTEX:x=ul(a,r,me,!1);break;case ku.INDEX:P=ul(a,r,me,!1)}break;case eo.DATA:VA.VERTEX===me.logicalStreamType.dictionaryType?C=ul(a,r,me,!0):(T={numBits:me.numBits,coordinateShift:me.coordinateShift},C=ul(a,r,me,!1))}}let ae=null,ue=null,ve=null;return k!==null?(ae=Bd(Q,k,2),K!==null&&X!==null?(ue=mg(Q,ae,K,!1),ve=(function(He,me,Ie,rt){const ct=new Uint32Array(Ie[Ie.length-1]+1);let Lt=0;ct[0]=Lt;let qt=1,Xt=1,nr=0;for(let mr=0;mr<He.length;mr++){const sr=He[mr],Yt=me[mr+1]-me[mr];if(sr!==0&&sr!==3)for(let zt=0;zt<Yt;zt++){const Cr=Ie[qt]-Ie[qt-1];qt++;for(let Ir=0;Ir<Cr;Ir++)Lt=ct[Xt++]=Lt+rt[nr++]}else for(let zt=0;zt<Yt;zt++)ct[Xt++]=++Lt,qt++}return ct})(Q,ae,ue,X)):K!==null&&(ue=(function(He,me,Ie){const rt=new Uint32Array(me[me.length-1]+1);let ct=0;rt[0]=ct;let Lt=1,qt=0;for(let Xt=0;Xt<He.length;Xt++){const nr=He[Xt],mr=me[Xt+1]-me[Xt];if(nr===4||nr===1)for(let sr=0;sr<mr;sr++)ct=rt[Lt++]=ct+Ie[qt++];else for(let sr=0;sr<mr;sr++)rt[Lt++]=++ct}return rt})(Q,ae,K))):K!==null&&X!==null?(ue=Bd(Q,K,1),ve=mg(Q,ue,X,!0)):K!==null&&(ue=Bd(Q,K,0)),P!==null&&ue===null?pg(Q,re,P,C):P!==null?pg(Q,re,P,C,new gh(ae,ue,ve)):T===null?(function(He,me,Ie,rt){return new oy(hA.VEC_2,He,me,Ie,rt)})(Q,new gh(ae,ue,ve),x,C):(function(He,me,Ie,rt,ct){return new oy(hA.MORTON,He,me,Ie,rt,ct)})(Q,new gh(ae,ue,ve),x,C,T)}function Bd(a,e,r){const h=new Uint32Array(a.length+1);let d=0;h[0]=d;let _=0;for(let x=0;x<a.length;x++)d=h[x+1]=d+(a[x]>r?e[_++]:1);return h}function mg(a,e,r,h){const d=new Uint32Array(e[e.length-1]+1);let _=0;d[0]=_;let x=1,C=0;for(let T=0;T<a.length;T++){const P=a[T],Q=e[T+1]-e[T];if(P===5||P===2||h&&(P===4||P===1))for(let k=0;k<Q;k++)_=d[x++]=_+r[C++];else for(let k=0;k<Q;k++)d[x++]=++_}return d}class hy extends Hh{dataVector;constructor(e,r,h){super(e,r.getBuffer(),h),this.dataVector=r}getValueFromBuffer(e){return this.dataVector.get(e)}}class Qp extends Mp{getValueFromBuffer(e){return this.dataBuffer[e]}}class fy extends Hh{constructor(e,r,h){super(e,BigInt64Array.of(r),h)}getValueFromBuffer(e){return this.dataBuffer[0]}}function Cd(a,e,r,h,d){const _=(function(x,C,T,P){const Q=new Uint8Array(C);let k=0;const K=P.get()+T;for(;k<C&&!(P.get()>=K);){const X=x[P.increment()];if(X<=127){const re=X+3,ae=x[P.increment()],ue=Math.min(k+re,C);Q.fill(ae,k,ue),k=ue}else{const re=256-X;for(let ae=0;ae<re&&k<C;ae++)Q[k++]=x[P.increment()]}}return P.set(K),Q})(a,Math.ceil(e/8),r,h);return d?(function(x,C,T){if(!T)return x;const P=T.size(),Q=new Lc(x,C),k=new Lc(new Uint8Array(Math.ceil(P/8)),P);let K=0;for(let X=0;X<P;X++){const re=!!T.get(X)&&Q.get(K++);k.set(X,re)}return k.getBuffer()})(_,e,d):_}const gg=new TextDecoder;function Sd(a,e,r){return r-e>=12?gg.decode(a.subarray(e,r)):(function(h,d,_){let x="",C=d;for(;C<_;){const T=h[C];let P,Q,k,K=null,X=T>239?4:T>223?3:T>191?2:1;if(C+X>_)break;X===1?T<128&&(K=T):X===2?(P=h[C+1],(192&P)==128&&(K=(31&T)<<6|63&P,K<=127&&(K=null))):X===3?(P=h[C+1],Q=h[C+2],(192&P)==128&&(192&Q)==128&&(K=(15&T)<<12|(63&P)<<6|63&Q,(K<=2047||K>=55296&&K<=57343)&&(K=null))):X===4&&(P=h[C+1],Q=h[C+2],k=h[C+3],(192&P)==128&&(192&Q)==128&&(192&k)==128&&(K=(15&T)<<18|(63&P)<<12|(63&Q)<<6|63&k,(K<=65535||K>=1114112)&&(K=null))),K===null?(K=65533,X=1):K>65535&&(K-=65536,x+=String.fromCharCode(K>>>10&1023|55296),K=56320|1023&K),x+=String.fromCharCode(K),C+=X}return x})(a,e,r)}class Uf extends Hh{offsetBuffer;constructor(e,r,h,d){super(e,h,d),this.offsetBuffer=r}}class kp extends Uf{textEncoder;constructor(e,r,h,d){super(e,r,h,d??r.length-1),this.textEncoder=new TextEncoder}getValueFromBuffer(e){return Sd(this.dataBuffer,this.offsetBuffer[e],this.offsetBuffer[e+1])}}class Kh extends Uf{indexBuffer;textEncoder;constructor(e,r,h,d,_){super(e,h,d,_??r.length),this.indexBuffer=r,this.indexBuffer=r,this.textEncoder=new TextEncoder}getValueFromBuffer(e){const r=this.indexBuffer[e];return Sd(this.dataBuffer,this.offsetBuffer[r],this.offsetBuffer[r+1])}}class Op extends Uf{indexBuffer;symbolOffsetBuffer;symbolTableBuffer;textEncoder;symbolLengthBuffer;lengthBuffer;decodedDictionary;constructor(e,r,h,d,_,x,C){super(e,h,d,C),this.indexBuffer=r,this.symbolOffsetBuffer=_,this.symbolTableBuffer=x,this.textEncoder=new TextEncoder}getValueFromBuffer(e){this.decodedDictionary==null&&(this.symbolLengthBuffer==null&&(this.symbolLengthBuffer=this.offsetToLengthBuffer(this.symbolOffsetBuffer),this.lengthBuffer=this.offsetToLengthBuffer(this.offsetBuffer)),this.decodedDictionary=(function(h,d,_){const x=[],C=new Array(d.length).fill(0);for(let T=1;T<d.length;T++)C[T]=C[T-1]+d[T-1];for(let T=0;T<_.length;T++)if(_[T]===255)x.push(_[++T]);else{const P=d[_[T]],Q=C[_[T]];for(let k=0;k<P;k++)x.push(h[Q+k])}return new Uint8Array(x)})(this.symbolTableBuffer,this.symbolLengthBuffer,this.dataBuffer));const r=this.indexBuffer[e];return Sd(this.decodedDictionary,this.offsetBuffer[r],this.offsetBuffer[r+1])}offsetToLengthBuffer(e){const r=new Uint32Array(e.length-1);let h=e[0];for(let d=1;d<e.length;d++){const _=e[d];r[d-1]=_-h,h=_}return r}}function yh(a,e,r,h,d,_){return r.type==="scalarType"?(function(x,C,T,P,Q,k){let K=null,X=0;if(x===0)return null;if(k.nullable){const ae=cl(C,T);X=ae.numValues;const ue=T.get(),ve=Cd(C,X,ae.byteLength,T);T.set(ue+ae.byteLength),K=new Lc(ve,ae.numValues)}const re=K??P;switch(Q.physicalType){case 4:case 3:return(function(ae,ue,ve,He,me){const Ie=cl(ae,ue),rt=mh(Ie,me,ae,ue),ct=He.physicalType===3;if(rt===di.FLAT){const Lt=ul(ae,ue,Ie,ct,0,mc(me)?me:void 0);return new Up(ve.name,Lt,me)}if(rt===di.SEQUENCE){const Lt=If(ae,ue,Ie);return new lu(ve.name,Lt[0],Lt[1],Ie.numRleValues)}{const Lt=ph(ae,ue,Ie,ct);return new Dp(ve.name,Lt,me)}})(C,T,k,Q,re);case 9:return(function(ae,ue,ve,He,me){let Ie=null,rt=null,ct=null,Lt=null,qt=null,Xt=null,nr=null,mr=null;for(let sr=0;sr<He;sr++){const Yt=cl(ue,ve);if(Yt.byteLength!==0)switch(Yt.physicalStreamType){case eo.PRESENT:{const zt=Cd(ue,Yt.numValues,Yt.byteLength,ve);Xt=new Lc(zt,Yt.numValues);break}case eo.OFFSET:rt=ul(ue,ve,Yt,!1,0,me!=null||Xt!=null?me??Xt:void 0);break;case eo.LENGTH:{const zt=dh(ue,ve,Yt);uA.DICTIONARY===Yt.logicalStreamType.lengthType?Ie=zt:uA.SYMBOL===Yt.logicalStreamType.lengthType?Lt=zt:nr=zt;break}case eo.DATA:{const zt=ue.subarray(ve.get(),ve.get()+Yt.byteLength);ve.add(Yt.byteLength);const Cr=Yt.logicalStreamType.dictionaryType;VA.FSST===Cr?qt=zt:VA.SINGLE===Cr||VA.SHARED===Cr?ct=zt:VA.NONE===Cr&&(mr=zt);break}}}return(function(sr,Yt,zt,Cr,Ir,$r,Ur){return Yt?new Op(sr,zt,Cr,Ir,$r,Yt,Ur):null})(ae,qt,rt,Ie,ct,Lt,me??Xt)??(function(sr,Yt,zt,Cr,Ir){return Yt?Ir?new Kh(sr,zt,Cr,Yt,Ir):new Kh(sr,zt,Cr,Yt):null})(ae,ct,rt,Ie,me??Xt)??(function(sr,Yt,zt,Cr,Ir){if(!Yt||!zt)return null;if(Cr)return Ir?new Kh(sr,Cr,Yt,zt,Ir):new Kh(sr,Cr,Yt,zt);if(Ir&&Ir.size()!==Yt.length-1){const $r=new Int32Array(Ir.size());let Ur=0;for(let Dn=0;Dn<Ir.size();Dn++)$r[Dn]=Ir.get(Dn)?Ur++:0;return new Kh(sr,$r,Yt,zt,Ir)}return Ir?new kp(sr,Yt,zt,Ir):new kp(sr,Yt,zt)})(ae,nr,mr,rt,me??Xt)})(k.name,C,T,k.nullable?x-1:x,K);case 0:return(function(ae,ue,ve,He,me){const Ie=cl(ae,ue),rt=Ie.numValues,ct=ue.get(),Lt=mc(me)?me:void 0,qt=Cd(ae,rt,Ie.byteLength,ue,Lt);ue.set(ct+Ie.byteLength);const Xt=new Lc(qt,rt);return new hy(ve.name,Xt,me)})(C,T,k,0,re);case 6:case 5:return(function(ae,ue,ve,He,me){const Ie=cl(ae,ue),rt=mh(Ie,He,ae,ue),ct=me.physicalType===5;if(rt===di.FLAT){const Lt=ay(ae,ue,Ie,ct,mc(He)?He:void 0);return new hg(ve.name,Lt,He)}if(rt===di.SEQUENCE){const Lt=ug(ae,ue,Ie);return new gd(ve.name,Lt[0],Lt[1],Ie.numRleValues)}{const Lt=qh(ae,ue,Ie,ct);return new fy(ve.name,Lt,He)}})(C,T,k,re,Q);case 7:return(function(ae,ue,ve,He){const me=cl(ae,ue),Ie=mc(He)?He:void 0,rt=(function(ct,Lt,qt,Xt){const nr=Lt.get(),mr=nr+qt*Float32Array.BYTES_PER_ELEMENT,sr=new Uint8Array(ct.subarray(nr,mr)).buffer,Yt=new Float32Array(sr);return Lt.set(mr),Xt?Pp(Yt,Xt,0):Yt})(ae,ue,me.numValues,Ie);return new Qp(ve.name,rt,He)})(C,T,k,re);case 8:return(function(ae,ue,ve,He){const me=cl(ae,ue),Ie=mc(He)?He:void 0,rt=(function(ct,Lt,qt,Xt){const nr=Lt.get(),mr=nr+qt*Float64Array.BYTES_PER_ELEMENT,sr=new Uint8Array(ct.subarray(nr,mr)).buffer,Yt=new Float64Array(sr);return Lt.set(mr),Xt?Pp(Yt,Xt,0):Yt})(ae,ue,me.numValues,Ie);return new sg(ve.name,rt,He)})(C,T,k,re);default:throw new Error(`The specified data type for the field is currently not supported: ${Q}`)}})(h,a,e,d,r.scalarType,r):h===0?null:(function(x,C,T,P){let Q=null,k=null,K=null,X=null,re=!1;for(;!re;){const He=cl(x,C);switch(He.physicalStreamType){case eo.LENGTH:uA.DICTIONARY===He.logicalStreamType.lengthType?Q=dh(x,C,He):K=dh(x,C,He);break;case eo.DATA:VA.SINGLE===He.logicalStreamType.dictionaryType||VA.SHARED===He.logicalStreamType.dictionaryType?(k=x.subarray(C.get(),C.get()+He.byteLength),re=!0):X=x.subarray(C.get(),C.get()+He.byteLength),C.add(He.byteLength)}}const ae=T.complexType.children,ue=[];let ve=0;for(const He of ae){const me=Bo(x,C,1)[0];if(me==0)continue;const Ie=He.name?`${T.name}${He.name}`:T.name;if(me!==2||He.type!=="scalarField"||He.scalarField.physicalType!==9)throw new Error("Currently only optional string fields are implemented for a struct.");const rt=cl(x,C),ct=Cd(x,rt.numValues,rt.byteLength,C),Lt=cl(x,C),qt=ul(x,C,Lt,!1,0,Lt.decompressedCount!==P?new Lc(ct,rt.numValues):void 0);ue[ve++]=X?new Op(Ie,qt,Q,k,K,X,new Lc(ct,rt.numValues)):new Kh(Ie,qt,Q,k,new Lc(ct,rt.numValues))}return ue})(a,e,r,d)}function mc(a){return a instanceof Lc}function Ou(a){switch(a){case 0:case 1:case 2:case 3:{const e={};e.nullable=!!(1&a),e.columnScope=0;const r={};return r.physicalType=a>1?6:4,r.type="physicalType",e.scalarType=r,e.type="scalarType",e}case 4:{const e={nullable:!1,columnScope:0},r={type:"physicalType",physicalType:0};return e.type="complexType",e.complexType=r,e}case 30:{const e={nullable:!1,columnScope:0},r={type:"physicalType",physicalType:1};return e.type="complexType",e.complexType=r,e}default:return(function(e){let r=null;switch(e){case 10:case 11:r=0;break;case 12:case 13:r=1;break;case 14:case 15:r=2;break;case 16:case 17:r=3;break;case 18:case 19:r=4;break;case 20:case 21:r=5;break;case 22:case 23:r=6;break;case 24:case 25:r=7;break;case 26:case 27:r=8;break;case 28:case 29:r=9;break;default:return null}const h={};h.nullable=!!(1&e),h.columnScope=0;const d={type:"physicalType"};return d.physicalType=r,h.type="scalarType",h.scalarType=d,h})(a)}}function Df(a){return a>=10}function Pf(a){return a===30}function _h(a){if(a.name==="id")return!1;if(a.type==="scalarType"){const e=a.scalarType;if(e.type==="physicalType")switch(e.physicalType){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:default:return!1;case 9:return!0}else if(e.type==="logicalType")return!1}else if(a.type==="complexType"){const e=a.complexType;if(e.type==="physicalType")switch(e.physicalType){case 0:case 1:return!0;default:return!1}}return console.warn("Unexpected column type in hasStreamCount",a),!1}const i1=new TextDecoder;function zp(a,e){const r=Bo(a,e,1)[0];if(r===0)return"";const h=e.get(),d=a.subarray(h,h+r);return e.add(r),i1.decode(d)}function Nf(a,e){const r=Bo(a,e,1)[0]>>>0;if(r<10||r>30)throw new Error(`Unsupported field type code ${r}. Supported: 10-29(scalars), 30(STRUCT)`);const h=Ou(r);if(Df(r)&&(h.name=zp(a,e)),Pf(r)){const d=Bo(a,e,1)[0]>>>0;h.complexType.children=new Array(d);for(let _=0;_<d;_++)h.complexType.children[_]=Nf(a,e)}return(function(d){return{name:d.name,nullable:d.nullable,scalarField:d.scalarType,complexField:d.complexType,type:d.type==="scalarType"?"scalarField":"complexField"}})(h)}function a1(a,e){const r=Bo(a,e,1)[0]>>>0,h=Ou(r);if(!h)throw new Error(`Unsupported column type code ${r}. Supported: 0-3(ID), 4(GEOMETRY), 10-29(scalars), 30(STRUCT)`);if(Df(r)?h.name=zp(a,e):r>=0&&r<=3?h.name="id":r===4&&(h.name="geometry"),Pf(r)){const d=Bo(a,e,1)[0]>>>0,_=h.complexType;_.children=new Array(d);for(let x=0;x<d;x++)_.children[x]=Nf(a,e)}return h}function dy(a,e){const r={featureTables:[]},h={};h.name=zp(a,e);const d=Bo(a,e,1)[0]>>>0,_=Bo(a,e,1)[0]>>>0;h.columns=new Array(_);for(let x=0;x<_;x++)h.columns[x]=a1(a,e);return r.featureTables.push(h),[r,d]}function jp(a,e,r,h,d,_,x=!1){const C=e.scalarType.physicalType,T=mh(d,_,a,r);if(C===4)switch(T){case di.FLAT:{const P=ul(a,r,d,!1);return new Up(h,P,_)}case di.SEQUENCE:{const P=If(a,r,d);return new lu(h,P[0],P[1],d.numRleValues)}case di.CONST:{const P=ph(a,r,d,!1);return new Dp(h,P,_)}}else switch(T){case di.FLAT:{if(x){const Q=(function(k,K,X){const re=(function(ae,ue,ve){const He=new Float64Array(ve);for(let me=0;me<ve;me++)He[me]=ry(ae,ue);return He})(k,K,X.numValues);return(function(ae,ue){switch(ue.logicalLevelTechnique1){case Fi.DELTA:return ue.logicalLevelTechnique2===Fi.RLE&&(ae=Ag(ae,ue.runs,ue.numRleValues)),(function(ve){ve[0]=Ff(ve[0]);const He=ve.length/4*4;let me=1;if(He>=4)for(;me<He-4;me+=4){const Ie=ve[me+1],rt=ve[me+2],ct=ve[me+3];ve[me]=Ff(ve[me])+ve[me-1],ve[me+1]=Ff(Ie)+ve[me],ve[me+2]=Ff(rt)+ve[me+1],ve[me+3]=Ff(ct)+ve[me+2]}for(;me!=ve.length;++me)ve[me]=Ff(ve[me])+ve[me-1]})(ae),ae;case Fi.RLE:return(function(ve,He){return Ag(ve,He.runs,He.numRleValues)})(ae,ue);case Fi.NONE:return ae;default:throw new Error(`The specified Logical level technique is not supported: ${ue.logicalLevelTechnique1}`)}})(re,X)})(a,r,d);return new sg(h,Q,_)}const P=ay(a,r,d,!1);return new hg(h,P,_)}case di.SEQUENCE:{const P=ug(a,r,d);return new gd(h,P[0],P[1],d.numRleValues)}case di.CONST:{const P=qh(a,r,d,!1);return new fy(h,P,_)}}throw new Error("Vector type not supported for id column.")}class py{constructor(e,r){var h;switch(this._featureData=e,this.properties=this._featureData.properties||{},(h=this._featureData.geometry)===null||h===void 0?void 0:h.type){case ts.POINT:case ts.MULTIPOINT:this.type=1;break;case ts.LINESTRING:case ts.MULTILINESTRING:this.type=2;break;case ts.POLYGON:case ts.MULTIPOLYGON:this.type=3;break;default:this.type=0}this.extent=r,this.id=Number(this._featureData.id)}loadGeometry(){const e=[];for(const r of this._featureData.geometry.coordinates){const h=[];for(const d of r)h.push(new S(d.x,d.y));e.push(h)}return e}}class s1{constructor(e){this.features=[],this.featureTable=e,this.name=e.name,this.extent=e.extent,this.version=2,this.features=e.getFeatures(),this.length=this.features.length}feature(e){return new py(this.features[e],this.extent)}}class Ed{constructor(e){this.layers={};const r=(function(h,d,_=!0){const x=new og(0),C=[];for(;x.get()<h.length;){const T=Bo(h,x,1)[0]>>>0,P=x.get()+T;if(P>h.length)throw new Error(`Block overruns tile: ${P} > ${h.length}`);if(Bo(h,x,1)[0]>>>0!=1){x.set(P);continue}const Q=dy(h,x),k=Q[1],K=Q[0].featureTables[0];let X=null,re=null;const ae=[];let ue=0;for(const He of K.columns){const me=He.name;if(me==="id"){let Ie=null;if(He.nullable){const ct=cl(h,x),Lt=x.get(),qt=Cd(h,ct.numValues,ct.byteLength,x);x.set(Lt+ct.byteLength),Ie=new Lc(qt,ct.numValues)}const rt=cl(h,x);ue=rt.decompressedCount,X=jp(h,He,x,me,rt,Ie??ue,_)}else if(me==="geometry"){const Ie=Bo(h,x,1)[0];if(ue===0){const rt=x.get();ue=cl(h,x).decompressedCount,x.set(rt)}re=uy(h,Ie,x,ue)}else{const Ie=_h(He)?Bo(h,x,1)[0]:1;if(Ie===0)continue;const rt=yh(h,x,He,Ie,ue);if(rt)if(Array.isArray(rt))for(const ct of rt)ae.push(ct);else ae.push(rt)}}const ve=new ty(K.name,re,X,ae,k);C.push(ve),x.set(P)}return C})(new Uint8Array(e));this.layers=r.reduce(((h,d)=>Object.assign(Object.assign({},h),{[d.name]:new s1(d)})),{})}}class Hp{constructor(e,r){this.feature=e,this.type=e.type,this.properties=e.tags?e.tags:{},this.extent=r,"id"in e&&(typeof e.id=="string"?this.id=parseInt(e.id,10):typeof e.id!="number"||isNaN(e.id)||(this.id=e.id))}loadGeometry(){const e=[],r=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const h of r){const d=[];for(const _ of h)d.push(new S(_[0],_[1]));e.push(d)}return e}}const Rf="_geojsonTileLayer";function Qf(a,e){e.writeVarintField(15,a.version||1),e.writeStringField(1,a.name||""),e.writeVarintField(5,a.extent||4096);const r={keys:[],values:[],keycache:{},valuecache:{}};for(let _=0;_<a.length;_++)r.feature=a.feature(_),e.writeMessage(2,my,r);const h=r.keys;for(const _ of h)e.writeStringField(3,_);const d=r.values;for(const _ of d)e.writeMessage(4,Vp,_)}function my(a,e){if(!a.feature)return;const r=a.feature;r.id!==void 0&&e.writeVarintField(1,r.id),e.writeMessage(2,yg,a),e.writeVarintField(3,r.type),e.writeMessage(4,o1,r)}function yg(a,e){for(const r in a.feature?.properties){let h=a.feature.properties[r],d=a.keycache[r];if(h==null)continue;d===void 0&&(a.keys.push(r),d=a.keys.length-1,a.keycache[r]=d),e.writeVarint(d),typeof h!="string"&&typeof h!="boolean"&&typeof h!="number"&&(h=JSON.stringify(h));const _=typeof h+":"+h;let x=a.valuecache[_];x===void 0&&(a.values.push(h),x=a.values.length-1,a.valuecache[_]=x),e.writeVarint(x)}}function kf(a,e){return(e<<3)+(7&a)}function _g(a){return a<<1^a>>31}function o1(a,e){const r=a.loadGeometry(),h=a.type;let d=0,_=0;for(const x of r){let C=1;h===1&&(C=x.length),e.writeVarint(kf(1,C));const T=h===3?x.length-1:x.length;for(let P=0;P<T;P++){P===1&&h!==1&&e.writeVarint(kf(2,T-1));const Q=x[P].x-d,k=x[P].y-_;e.writeVarint(_g(Q)),e.writeVarint(_g(k)),d+=Q,_+=k}a.type===3&&e.writeVarint(kf(7,1))}}function Vp(a,e){const r=typeof a;r==="string"?e.writeStringField(1,a):r==="boolean"?e.writeBooleanField(7,a):r==="number"&&(a%1!=0?e.writeDoubleField(3,a):a<0?e.writeSVarintField(6,a):e.writeVarintField(5,a))}class s{constructor(e,r){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Mt(xt,16,0),this.grid3D=new Mt(xt,16,0),this.featureIndexArray=new se,this.promoteId=r}insert(e,r,h,d,_,x){const C=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,d,_);const T=x?this.grid3D:this.grid;for(let P=0;P<r.length;P++){const Q=r[P],k=[1/0,1/0,-1/0,-1/0];for(let K=0;K<Q.length;K++){const X=Q[K];k[0]=Math.min(k[0],X.x),k[1]=Math.min(k[1],X.y),k[2]=Math.max(k[2],X.x),k[3]=Math.max(k[3],X.y)}k[0]<xt&&k[1]<xt&&k[2]>=0&&k[3]>=0&&T.insert(C,k[0],k[1],k[2],k[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=this.encoding!=="mlt"?new cA(new _p(this.rawTileData)).layers:new Ed(this.rawTileData).layers,this.sourceLayerCoder=new Lp(this.vtLayers?Object.keys(this.vtLayers).sort():[Rf])),this.vtLayers}query(e,r,h,d){this.loadVTLayers();const _=e.params,x=xt/e.tileSize/e.scale,C=Is(_.filter,_.globalState),T=e.queryGeometry,P=e.queryPadding*x,Q=Qu.fromPoints(T),k=this.grid.query(Q.minX-P,Q.minY-P,Q.maxX+P,Q.maxY+P),K=Qu.fromPoints(e.cameraQueryGeometry).expandBy(P),X=this.grid3D.query(K.minX,K.minY,K.maxX,K.maxY,((ue,ve,He,me)=>(function(Ie,rt,ct,Lt,qt){for(const nr of Ie)if(rt<=nr.x&&ct<=nr.y&&Lt>=nr.x&&qt>=nr.y)return!0;const Xt=[new S(rt,ct),new S(rt,qt),new S(Lt,qt),new S(Lt,ct)];if(Ie.length>2){for(const nr of Xt)if(Jc(Ie,nr))return!0}for(let nr=0;nr<Ie.length-1;nr++)if(f0(Ie[nr],Ie[nr+1],Xt))return!0;return!1})(e.cameraQueryGeometry,ue-P,ve-P,He+P,me+P)));for(const ue of X)k.push(ue);k.sort(p);const re={};let ae;for(let ue=0;ue<k.length;ue++){const ve=k[ue];if(ve===ae)continue;ae=ve;const He=this.featureIndexArray.get(ve);let me=null;this.loadMatchingFeature(re,He.bucketIndex,He.sourceLayerIndex,He.featureIndex,C,_.layers,_.availableImages,r,h,d,((Ie,rt,ct)=>(me||(me=ol(Ie)),rt.queryIntersectsFeature({queryGeometry:T,feature:Ie,featureState:ct,geometry:me,zoom:this.z,transform:e.transform,pixelsToTileUnits:x,pixelPosMatrix:e.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:e.getElevation}))))}return re}loadMatchingFeature(e,r,h,d,_,x,C,T,P,Q,k){const K=this.bucketLayerIDs[r];if(x&&!K.some((ue=>x.has(ue))))return;const X=this.sourceLayerCoder.decode(h),re=this.vtLayers[X].feature(d);if(_.needGeometry){const ue=zA(re,!0);if(!_.filter(new bn(this.tileID.overscaledZ),ue,this.tileID.canonical))return}else if(!_.filter(new bn(this.tileID.overscaledZ),re))return;const ae=this.getId(re,X);for(let ue=0;ue<K.length;ue++){const ve=K[ue];if(x&&!x.has(ve))continue;const He=T[ve];if(!He)continue;let me={};ae&&Q&&(me=Q.getState(He.sourceLayer||Rf,ae));const Ie=Pt({},P[ve]);Ie.paint=u(Ie.paint,He.paint,re,me,C),Ie.layout=u(Ie.layout,He.layout,re,me,C);const rt=!k||k(re,He,me);if(!rt)continue;const ct=new J0(re,this.z,this.x,this.y,ae);ct.layer=Ie;let Lt=e[ve];Lt===void 0&&(Lt=e[ve]=[]),Lt.push({featureIndex:d,feature:ct,intersectionZ:rt})}}lookupSymbolFeatures(e,r,h,d,_,x,C,T){const P={};this.loadVTLayers();const Q=Is(_.filterSpec,_.globalState);for(const k of e)this.loadMatchingFeature(P,h,d,k,Q,x,C,T,r);return P}hasLayer(e){for(const r of this.bucketLayerIDs)for(const h of r)if(e===h)return!0;return!1}getId(e,r){var h;let d=e.id;return this.promoteId&&(d=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[r]],typeof d=="boolean"&&(d=Number(d)),d===void 0&&(!((h=e.properties)===null||h===void 0)&&h.cluster)&&this.promoteId&&(d=Number(e.properties.cluster_id))),d}}function u(a,e,r,h,d){return $t(a,((_,x)=>{const C=e instanceof na?e.get(x):null;return C&&C.evaluate?C.evaluate(r,h,d):C}))}function p(a,e){return e-a}function w(a,e,r,h,d){const _=[];for(let x=0;x<a.length;x++){const C=a[x];let T;for(let P=0;P<C.length-1;P++){let Q=C[P],k=C[P+1];Q.x<e&&k.x<e||(Q.x<e?Q=new S(e,Q.y+(e-Q.x)/(k.x-Q.x)*(k.y-Q.y))._round():k.x<e&&(k=new S(e,Q.y+(e-Q.x)/(k.x-Q.x)*(k.y-Q.y))._round()),Q.y<r&&k.y<r||(Q.y<r?Q=new S(Q.x+(r-Q.y)/(k.y-Q.y)*(k.x-Q.x),r)._round():k.y<r&&(k=new S(Q.x+(r-Q.y)/(k.y-Q.y)*(k.x-Q.x),r)._round()),Q.x>=h&&k.x>=h||(Q.x>=h?Q=new S(h,Q.y+(h-Q.x)/(k.x-Q.x)*(k.y-Q.y))._round():k.x>=h&&(k=new S(h,Q.y+(h-Q.x)/(k.x-Q.x)*(k.y-Q.y))._round()),Q.y>=d&&k.y>=d||(Q.y>=d?Q=new S(Q.x+(d-Q.y)/(k.y-Q.y)*(k.x-Q.x),d)._round():k.y>=d&&(k=new S(Q.x+(d-Q.y)/(k.y-Q.y)*(k.x-Q.x),d)._round()),T&&Q.equals(T[T.length-1])||(T=[Q],_.push(T)),T.push(k)))))}}return _}function M(a,e,r,h,d){switch(e){case 1:return(function(_,x,C,T){const P=[];for(const Q of _)for(const k of Q){const K=T===0?k.x:k.y;K>=x&&K<=C&&P.push([k])}return P})(a,r,h,d);case 2:return te(a,r,h,d,!1);case 3:return te(a,r,h,d,!0)}return[]}function R(a,e,r,h,d){const _=h===0?be:ht;let x=[];const C=[];for(let Q=0;Q<a.length-1;Q++){const k=a[Q],K=a[Q+1],X=h===0?k.x:k.y,re=h===0?K.x:K.y;let ae=!1;X<e?re>e&&x.push(_(k,K,e)):X>r?re<r&&x.push(_(k,K,r)):x.push(k),re<e&&X>=e&&(x.push(_(k,K,e)),ae=!0),re>r&&X<=r&&(x.push(_(k,K,r)),ae=!0),!d&&ae&&(C.push(x),x=[])}const T=a.length-1,P=h===0?a[T].x:a[T].y;return P>=e&&P<=r&&x.push(a[T]),d&&x.length>0&&!x[0].equals(x[x.length-1])&&x.push(new S(x[0].x,x[0].y)),x.length>0&&C.push(x),C}function te(a,e,r,h,d){const _=[];for(const x of a){const C=R(x,e,r,h,d);C.length>0&&_.push(...C)}return _}function be(a,e,r){return new S(r,a.y+(r-a.x)/(e.x-a.x)*(e.y-a.y))}function ht(a,e,r){return new S(a.x+(r-a.y)/(e.y-a.y)*(e.x-a.x),r)}Ze("FeatureIndex",s,{omit:["rawTileData","sourceLayerCoder"]});class Rt extends S{constructor(e,r,h,d){super(e,r),this.angle=h,d!==void 0&&(this.segment=d)}clone(){return new Rt(this.x,this.y,this.angle,this.segment)}}function tr(a,e,r,h,d){if(e.segment===void 0||r===0)return!0;let _=e,x=e.segment+1,C=0;for(;C>-r/2;){if(x--,x<0)return!1;C-=a[x].dist(_),_=a[x]}C+=a[x].dist(a[x+1]),x++;const T=[];let P=0;for(;C<r/2;){const Q=a[x],k=a[x+1];if(!k)return!1;let K=a[x-1].angleTo(Q)-Q.angleTo(k);for(K=Math.abs((K+3*Math.PI)%(2*Math.PI)-Math.PI),T.push({distance:C,angleDelta:K}),P+=K;C-T[0].distance>h;)P-=T.shift().angleDelta;if(P>d)return!1;x++,C+=Q.dist(k)}return!0}function ir(a){let e=0;for(let r=0;r<a.length-1;r++)e+=a[r].dist(a[r+1]);return e}function Ot(a,e,r){return a?.6*e*r:0}function Gt(a,e){return Math.max(a?a.right-a.left:0,e?e.right-e.left:0)}function Kr(a,e,r,h,d,_){const x=Ot(r,d,_),C=Gt(r,h)*_;let T=0;const P=ir(a)/2;for(let Q=0;Q<a.length-1;Q++){const k=a[Q],K=a[Q+1],X=k.dist(K);if(T+X>P){const re=(P-T)/X,ae=wr.number(k.x,K.x,re),ue=wr.number(k.y,K.y,re),ve=new Rt(ae,ue,K.angleTo(k),Q);return ve._round(),!x||tr(a,ve,C,x,e)?ve:void 0}T+=X}}function vn(a,e,r,h,d,_,x,C,T){const P=Ot(h,_,x),Q=Gt(h,d),k=Q*x,K=a[0].x===0||a[0].x===T||a[0].y===0||a[0].y===T;return e-k<e/4&&(e=k+e/4),Gi(a,K?e/2*C%e:(Q/2+2*_)*x*C%e,e,P,r,k,K,!1,T)}function Gi(a,e,r,h,d,_,x,C,T){const P=_/2,Q=ir(a);let k=0,K=e-r,X=[];for(let re=0;re<a.length-1;re++){const ae=a[re],ue=a[re+1],ve=ae.dist(ue),He=ue.angleTo(ae);for(;K+r<k+ve;){K+=r;const me=(K-k)/ve,Ie=wr.number(ae.x,ue.x,me),rt=wr.number(ae.y,ue.y,me);if(Ie>=0&&Ie<T&&rt>=0&&rt<T&&K-P>=0&&K+P<=Q){const ct=new Rt(Ie,rt,He,re);ct._round(),h&&!tr(a,ct,_,h,d)||X.push(ct)}}k+=ve}return C||X.length||x||(X=Gi(a,k/2,r,h,d,_,x,!0,T)),X}function Tt(a,e,r,h){const d=[],_=a.image,x=_.pixelRatio,C=_.paddedRect.w-2,T=_.paddedRect.h-2;let P={x1:a.left,y1:a.top,x2:a.right,y2:a.bottom};const Q=_.stretchX||[[0,C]],k=_.stretchY||[[0,T]],K=(zt,Cr)=>zt+Cr[1]-Cr[0],X=Q.reduce(K,0),re=k.reduce(K,0),ae=C-X,ue=T-re;let ve=0,He=X,me=0,Ie=re,rt=0,ct=ae,Lt=0,qt=ue;if(_.content&&h){const zt=_.content,Cr=zt[2]-zt[0],Ir=zt[3]-zt[1];(_.textFitWidth||_.textFitHeight)&&(P=Sf(a)),ve=vt(Q,0,zt[0]),me=vt(k,0,zt[1]),He=vt(Q,zt[0],zt[2]),Ie=vt(k,zt[1],zt[3]),rt=zt[0]-ve,Lt=zt[1]-me,ct=Cr-He,qt=Ir-Ie}const Xt=P.x1,nr=P.y1,mr=P.x2-Xt,sr=P.y2-nr,Yt=(zt,Cr,Ir,$r)=>{const Ur=rr(zt.stretch-ve,He,mr,Xt),Dn=ln(zt.fixed-rt,ct,zt.stretch,X),Ta=rr(Cr.stretch-me,Ie,sr,nr),Ns=ln(Cr.fixed-Lt,qt,Cr.stretch,re),hl=rr(Ir.stretch-ve,He,mr,Xt),Au=ln(Ir.fixed-rt,ct,Ir.stretch,X),fA=rr($r.stretch-me,Ie,sr,nr),jo=ln($r.fixed-Lt,qt,$r.stretch,re),fl=new S(Ur,Ta),ns=new S(hl,Ta),Ho=new S(hl,fA),Rl=new S(Ur,fA),Ql=new S(Dn/x,Ns/x),GA=new S(Au/x,jo/x),dl=e*Math.PI/180;if(dl){const Co=Math.sin(dl),Oa=Math.cos(dl),Rs=[Oa,-Co,Co,Oa];fl._matMult(Rs),ns._matMult(Rs),Rl._matMult(Rs),Ho._matMult(Rs)}const qA=zt.stretch+zt.fixed,cu=Cr.stretch+Cr.fixed;return{tl:fl,tr:ns,bl:Rl,br:Ho,tex:{x:_.paddedRect.x+1+qA,y:_.paddedRect.y+1+cu,w:Ir.stretch+Ir.fixed-qA,h:$r.stretch+$r.fixed-cu},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ql,pixelOffsetBR:GA,minFontScaleX:ct/x/mr,minFontScaleY:qt/x/sr,isSDF:r}};if(h&&(_.stretchX||_.stretchY)){const zt=kt(Q,ae,X),Cr=kt(k,ue,re);for(let Ir=0;Ir<zt.length-1;Ir++){const $r=zt[Ir],Ur=zt[Ir+1];for(let Dn=0;Dn<Cr.length-1;Dn++)d.push(Yt($r,Cr[Dn],Ur,Cr[Dn+1]))}}else d.push(Yt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:C+1},{fixed:0,stretch:T+1}));return d}function vt(a,e,r){let h=0;for(const d of a)h+=Math.max(e,Math.min(r,d[1]))-Math.max(e,Math.min(r,d[0]));return h}function kt(a,e,r){const h=[{fixed:-1,stretch:0}];for(const[d,_]of a){const x=h[h.length-1];h.push({fixed:d-x.stretch,stretch:x.stretch}),h.push({fixed:d-x.stretch,stretch:x.stretch+(_-d)})}return h.push({fixed:e+1,stretch:r}),h}function rr(a,e,r,h){return a/e*r+h}function ln(a,e,r,h){return a-e*r/h}Ze("Anchor",Rt);class pi{constructor(e,r,h,d,_,x,C,T,P,Q){var k;if(this.boxStartIndex=e.length,P){let K=x.top,X=x.bottom;const re=x.collisionPadding;re&&(K-=re[1],X+=re[3]);let ae=X-K;ae>0&&(ae=Math.max(10,ae),this.circleDiameter=ae)}else{const K=!((k=x.image)===null||k===void 0)&&k.content&&(x.image.textFitWidth||x.image.textFitHeight)?Sf(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};K.y1=K.y1*C-T[0],K.y2=K.y2*C+T[2],K.x1=K.x1*C-T[3],K.x2=K.x2*C+T[1];const X=x.collisionPadding;if(X&&(K.x1-=X[0]*C,K.y1-=X[1]*C,K.x2+=X[2]*C,K.y2+=X[3]*C),Q){const re=new S(K.x1,K.y1),ae=new S(K.x2,K.y1),ue=new S(K.x1,K.y2),ve=new S(K.x2,K.y2),He=Q*Math.PI/180;re._rotate(He),ae._rotate(He),ue._rotate(He),ve._rotate(He),K.x1=Math.min(re.x,ae.x,ue.x,ve.x),K.x2=Math.max(re.x,ae.x,ue.x,ve.x),K.y1=Math.min(re.y,ae.y,ue.y,ve.y),K.y2=Math.max(re.y,ae.y,ue.y,ve.y)}e.emplaceBack(r.x,r.y,K.x1,K.y1,K.x2,K.y2,h,d,_)}this.boxEndIndex=e.length}}class rn{constructor(e=[],r=(h,d)=>h<d?-1:h>d?1:0){if(this.data=e,this.length=this.data.length,this.compare=r,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],r=this.data.pop();return--this.length>0&&(this.data[0]=r,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:r,compare:h}=this,d=r[e];for(;e>0;){const _=e-1>>1,x=r[_];if(h(d,x)>=0)break;r[e]=x,e=_}r[e]=d}_down(e){const{data:r,compare:h}=this,d=this.length>>1,_=r[e];for(;e<d;){let x=1+(e<<1);const C=x+1;if(C<this.length&&h(r[C],r[x])<0&&(x=C),h(r[x],_)>=0)break;r[e]=r[x],e=x}r[e]=_}}function qn(a,e=1,r=!1){const h=Qu.fromPoints(a[0]),d=Math.min(h.width(),h.height());let _=d/2;const x=new rn([],hi),{minX:C,minY:T,maxX:P,maxY:Q}=h;if(d===0)return new S(C,T);for(let X=C;X<P;X+=d)for(let re=T;re<Q;re+=d)x.push(new si(X+_,re+_,_,a));let k=(function(X){let re=0,ae=0,ue=0;const ve=X[0];for(let He=0,me=ve.length,Ie=me-1;He<me;Ie=He++){const rt=ve[He],ct=ve[Ie],Lt=rt.x*ct.y-ct.x*rt.y;ae+=(rt.x+ct.x)*Lt,ue+=(rt.y+ct.y)*Lt,re+=3*Lt}return new si(ae/re,ue/re,0,X)})(a),K=x.length;for(;x.length;){const X=x.pop();(X.d>k.d||!k.d)&&(k=X,r&&console.log("found best %d after %d probes",Math.round(1e4*X.d)/1e4,K)),X.max-k.d<=e||(_=X.h/2,x.push(new si(X.p.x-_,X.p.y-_,_,a)),x.push(new si(X.p.x+_,X.p.y-_,_,a)),x.push(new si(X.p.x-_,X.p.y+_,_,a)),x.push(new si(X.p.x+_,X.p.y+_,_,a)),K+=4)}return r&&(console.log(`num probes: ${K}`),console.log(`best distance: ${k.d}`)),k.p}function hi(a,e){return e.max-a.max}function si(a,e,r,h){this.p=new S(a,e),this.h=r,this.d=(function(d,_){let x=!1,C=1/0;for(let T=0;T<_.length;T++){const P=_[T];for(let Q=0,k=P.length,K=k-1;Q<k;K=Q++){const X=P[Q],re=P[K];X.y>d.y!=re.y>d.y&&d.x<(re.x-X.x)*(d.y-X.y)/(re.y-X.y)+X.x&&(x=!x),C=Math.min(C,wm(d,X,re))}}return(x?1:-1)*Math.sqrt(C)})(this.p,h),this.max=this.d+this.h*Math.SQRT2}var Ea;v.aP=void 0,(Ea=v.aP||(v.aP={}))[Ea.center=1]="center",Ea[Ea.left=2]="left",Ea[Ea.right=3]="right",Ea[Ea.top=4]="top",Ea[Ea.bottom=5]="bottom",Ea[Ea["top-left"]=6]="top-left",Ea[Ea["top-right"]=7]="top-right",Ea[Ea["bottom-left"]=8]="bottom-left",Ea[Ea["bottom-right"]=9]="bottom-right";const vg=Number.POSITIVE_INFINITY;function jx(a,e){return e[1]!==vg?(function(r,h,d){let _=0,x=0;switch(h=Math.abs(h),d=Math.abs(d),r){case"top-right":case"top-left":case"top":x=d-7;break;case"bottom-right":case"bottom-left":case"bottom":x=7-d}switch(r){case"top-right":case"bottom-right":case"right":_=-h;break;case"top-left":case"bottom-left":case"left":_=h}return[_,x]})(a,e[0],e[1]):(function(r,h){let d=0,_=0;h<0&&(h=0);const x=h/Math.SQRT2;switch(r){case"top-right":case"top-left":_=x-7;break;case"bottom-right":case"bottom-left":_=7-x;break;case"bottom":_=7-h;break;case"top":_=h-7}switch(r){case"top-right":case"bottom-right":d=-x;break;case"top-left":case"bottom-left":d=x;break;case"left":d=h;break;case"right":d=-h}return[d,_]})(a,e[0])}function Hx(a,e,r){var h;const d=a.layout,_=(h=d.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(e,{},r);if(_){const C=_.values,T=[];for(let P=0;P<C.length;P+=2){const Q=T[P]=C[P],k=C[P+1].map((K=>K*Ps));Q.startsWith("top")?k[1]-=7:Q.startsWith("bottom")&&(k[1]+=7),T[P+1]=k}return new jn(T)}const x=d.get("text-variable-anchor");if(x){let C;C=a._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[d.get("text-radial-offset").evaluate(e,{},r)*Ps,vg]:d.get("text-offset").evaluate(e,{},r).map((P=>P*Ps));const T=[];for(const P of x)T.push(P,jx(P,C));return new jn(T)}return null}function l1(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function oS(a,e,r,h,d,_,x,C,T,P,Q,k){let K=_.textMaxSize.evaluate(e,{});K===void 0&&(K=x);const X=a.layers[0].layout,re=X.get("icon-offset").evaluate(e,{},Q),ae=Gx(r.horizontal),ue=x/24,ve=a.tilePixelRatio*ue,He=a.tilePixelRatio*K/24,me=a.tilePixelRatio*C,Ie=a.tilePixelRatio*X.get("symbol-spacing"),rt=X.get("text-padding")*a.tilePixelRatio,ct=(function(Ir,$r,Ur,Dn=1){const Ta=Ir.get("icon-padding").evaluate($r,{},Ur),Ns=Ta&&Ta.values;return[Ns[0]*Dn,Ns[1]*Dn,Ns[2]*Dn,Ns[3]*Dn]})(X,e,Q,a.tilePixelRatio),Lt=X.get("text-max-angle")/180*Math.PI,qt=X.get("text-rotation-alignment")!=="viewport"&&X.get("symbol-placement")!=="point",Xt=X.get("icon-rotation-alignment")==="map"&&X.get("symbol-placement")!=="point",nr=X.get("symbol-placement"),mr=Ie/2,sr=X.get("icon-text-fit");let Yt;h&&sr!=="none"&&(a.allowVerticalPlacement&&r.vertical&&(Yt=z0(h,r.vertical,sr,X.get("icon-text-fit-padding"),re,ue)),ae&&(h=z0(h,ae,sr,X.get("icon-text-fit-padding"),re,ue)));const zt=Q?k.line.getGranularityForZoomLevel(Q.z):1,Cr=(Ir,$r)=>{$r.x<0||$r.x>=xt||$r.y<0||$r.y>=xt||(function(Ur,Dn,Ta,Ns,hl,Au,fA,jo,fl,ns,Ho,Rl,Ql,GA,dl,qA,cu,Co,Oa,Rs,qa,So,Zh,zu,wg){const Of=Ur.addToLineVertexArray(Dn,Ta);let Td,Gp,qp,Kp,Xx=0,Wx=0,Yx=0,$x=0,m1=-1,g1=-1;const Xh={};let Jx=ga("");if(Ur.allowVerticalPlacement&&Ns.vertical){const kl=jo.layout.get("text-rotate").evaluate(qa,{},zu)+90;qp=new pi(fl,Dn,ns,Ho,Rl,Ns.vertical,Ql,GA,dl,kl),fA&&(Kp=new pi(fl,Dn,ns,Ho,Rl,fA,cu,Co,dl,kl))}if(hl){const kl=jo.layout.get("icon-rotate").evaluate(qa,{}),Mc=jo.layout.get("icon-text-fit")!=="none",Fd=Tt(hl,kl,Zh,Mc),Hu=fA?Tt(fA,kl,Zh,Mc):void 0;Gp=new pi(fl,Dn,ns,Ho,Rl,hl,cu,Co,!1,kl),Xx=4*Fd.length;const Id=Ur.iconSizeData;let vh=null;Id.kind==="source"?(vh=[ou*jo.layout.get("icon-size").evaluate(qa,{})],vh[0]>Ru&&xr(`${Ur.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Id.kind==="composite"&&(vh=[ou*So.compositeIconSizes[0].evaluate(qa,{},zu),ou*So.compositeIconSizes[1].evaluate(qa,{},zu)],(vh[0]>Ru||vh[1]>Ru)&&xr(`${Ur.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Ur.addSymbols(Ur.icon,Fd,vh,Rs,Oa,qa,v.az.none,Dn,Of.lineStartIndex,Of.lineLength,-1,zu),m1=Ur.icon.placedSymbolArray.length-1,Hu&&(Wx=4*Hu.length,Ur.addSymbols(Ur.icon,Hu,vh,Rs,Oa,qa,v.az.vertical,Dn,Of.lineStartIndex,Of.lineLength,-1,zu),g1=Ur.icon.placedSymbolArray.length-1)}const eb=Object.keys(Ns.horizontal);for(const kl of eb){const Mc=Ns.horizontal[kl];if(!Td){Jx=ga(Mc.text);const Hu=jo.layout.get("text-rotate").evaluate(qa,{},zu);Td=new pi(fl,Dn,ns,Ho,Rl,Mc,Ql,GA,dl,Hu)}const Fd=Mc.positionedLines.length===1;if(Yx+=Vx(Ur,Dn,Mc,Au,jo,dl,qa,qA,Of,Ns.vertical?v.az.horizontal:v.az.horizontalOnly,Fd?eb:[kl],Xh,m1,So,zu),Fd)break}Ns.vertical&&($x+=Vx(Ur,Dn,Ns.vertical,Au,jo,dl,qa,qA,Of,v.az.vertical,["vertical"],Xh,g1,So,zu));const cS=Td?Td.boxStartIndex:Ur.collisionBoxArray.length,uS=Td?Td.boxEndIndex:Ur.collisionBoxArray.length,hS=qp?qp.boxStartIndex:Ur.collisionBoxArray.length,fS=qp?qp.boxEndIndex:Ur.collisionBoxArray.length,dS=Gp?Gp.boxStartIndex:Ur.collisionBoxArray.length,pS=Gp?Gp.boxEndIndex:Ur.collisionBoxArray.length,mS=Kp?Kp.boxStartIndex:Ur.collisionBoxArray.length,gS=Kp?Kp.boxEndIndex:Ur.collisionBoxArray.length;let ju=-1;const yy=(kl,Mc)=>kl&&kl.circleDiameter?Math.max(kl.circleDiameter,Mc):Mc;ju=yy(Td,ju),ju=yy(qp,ju),ju=yy(Gp,ju),ju=yy(Kp,ju);const tb=ju>-1?1:0;tb&&(ju*=wg/Ps),Ur.glyphOffsetArray.length>=uh.MAX_GLYPHS&&xr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),qa.sortKey!==void 0&&Ur.addToSortKeyRanges(Ur.symbolInstances.length,qa.sortKey);const yS=Hx(jo,qa,zu),[_S,vS]=(function(kl,Mc){const Fd=kl.length,Hu=Mc?.values;if(Hu?.length>0)for(let Id=0;Id<Hu.length;Id+=2){const vh=Hu[Id+1];kl.emplaceBack(v.aP[Hu[Id]],vh[0],vh[1])}return[Fd,kl.length]})(Ur.textAnchorOffsets,yS);Ur.symbolInstances.emplaceBack(Dn.x,Dn.y,Xh.right>=0?Xh.right:-1,Xh.center>=0?Xh.center:-1,Xh.left>=0?Xh.left:-1,Xh.vertical||-1,m1,g1,Jx,cS,uS,hS,fS,dS,pS,mS,gS,ns,Yx,$x,Xx,Wx,tb,0,Ql,ju,_S,vS)})(a,$r,Ir,r,h,d,Yt,a.layers[0],a.collisionBoxArray,e.index,e.sourceLayerIndex,a.index,ve,[rt,rt,rt,rt],qt,T,me,ct,Xt,re,e,_,P,Q,x)};if(nr==="line")for(const Ir of w(e.geometry,0,0,xt,xt)){const $r=nh(Ir,zt),Ur=vn($r,Ie,Lt,r.vertical||ae,h,24,He,a.overscaling,xt);for(const Dn of Ur)ae&&lS(a,ae.text,mr,Dn)||Cr($r,Dn)}else if(nr==="line-center"){for(const Ir of e.geometry)if(Ir.length>1){const $r=nh(Ir,zt),Ur=Kr($r,Lt,r.vertical||ae,h,24,He);Ur&&Cr($r,Ur)}}else if(e.type==="Polygon")for(const Ir of Po(e.geometry,0)){const $r=qn(Ir,16);Cr(nh(Ir[0],zt,!0),new Rt($r.x,$r.y,0))}else if(e.type==="LineString")for(const Ir of e.geometry){const $r=nh(Ir,zt);Cr($r,new Rt($r[0].x,$r[0].y,0))}else if(e.type==="Point")for(const Ir of e.geometry)for(const $r of Ir)Cr([$r],new Rt($r.x,$r.y,0))}function Vx(a,e,r,h,d,_,x,C,T,P,Q,k,K,X,re){const ae=(function(He,me,Ie,rt,ct,Lt,qt,Xt){const nr=rt.layout.get("text-rotate").evaluate(Lt,{})*Math.PI/180,mr=[];for(const sr of me.positionedLines)for(const Yt of sr.positionedGlyphs){if(!Yt.rect)continue;const zt=Yt.rect||{};let Cr=4,Ir=!0,$r=1,Ur=0;const Dn=(ct||Xt)&&Yt.vertical,Ta=Yt.metrics.advance*Yt.scale/2;if(Xt&&me.verticalizable&&(Ur=sr.lineOffset/2-(Yt.imageName?-(Ps-Yt.metrics.width*Yt.scale)/2:(Yt.scale-1)*Ps)),Yt.imageName){const Co=qt[Yt.imageName];Ir=Co.sdf,$r=Co.pixelRatio,Cr=1/$r}const Ns=ct?[Yt.x+Ta,Yt.y]:[0,0];let hl=ct?[0,0]:[Yt.x+Ta+Ie[0],Yt.y+Ie[1]-Ur],Au=[0,0];Dn&&(Au=hl,hl=[0,0]);const fA=Yt.metrics.isDoubleResolution?2:1,jo=(Yt.metrics.left-Cr)*Yt.scale-Ta+hl[0],fl=(-Yt.metrics.top-Cr)*Yt.scale+hl[1],ns=jo+zt.w/fA*Yt.scale/$r,Ho=fl+zt.h/fA*Yt.scale/$r,Rl=new S(jo,fl),Ql=new S(ns,fl),GA=new S(jo,Ho),dl=new S(ns,Ho);if(Dn){const Co=new S(-Ta,Ta- -17),Oa=-Math.PI/2,Rs=12-Ta,qa=new S(22-Rs,-(Yt.imageName?Rs:0)),So=new S(...Au);Rl._rotateAround(Oa,Co)._add(qa)._add(So),Ql._rotateAround(Oa,Co)._add(qa)._add(So),GA._rotateAround(Oa,Co)._add(qa)._add(So),dl._rotateAround(Oa,Co)._add(qa)._add(So)}if(nr){const Co=Math.sin(nr),Oa=Math.cos(nr),Rs=[Oa,-Co,Co,Oa];Rl._matMult(Rs),Ql._matMult(Rs),GA._matMult(Rs),dl._matMult(Rs)}const qA=new S(0,0),cu=new S(0,0);mr.push({tl:Rl,tr:Ql,bl:GA,br:dl,tex:zt,writingMode:me.writingMode,glyphOffset:Ns,sectionIndex:Yt.sectionIndex,isSDF:Ir,pixelOffsetTL:qA,pixelOffsetBR:cu,minFontScaleX:0,minFontScaleY:0})}return mr})(0,r,C,d,_,x,h,a.allowVerticalPlacement),ue=a.textSizeData;let ve=null;ue.kind==="source"?(ve=[ou*d.layout.get("text-size").evaluate(x,{})],ve[0]>Ru&&xr(`${a.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):ue.kind==="composite"&&(ve=[ou*X.compositeTextSizes[0].evaluate(x,{},re),ou*X.compositeTextSizes[1].evaluate(x,{},re)],(ve[0]>Ru||ve[1]>Ru)&&xr(`${a.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),a.addSymbols(a.text,ae,ve,C,_,x,P,e,T.lineStartIndex,T.lineLength,K,re);for(const He of Q)k[He]=a.text.placedSymbolArray.length-1;return 4*ae.length}function Gx(a){for(const e in a)return a[e];return null}function lS(a,e,r,h){const d=a.compareText;if(e in d){const _=d[e];for(let x=_.length-1;x>=0;x--)if(h.dist(_[x])<r)return!0}else d[e]=[];return d[e].push(h),!1}const qx=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class A1{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[r,h]=new Uint8Array(e,0,2);if(r!==219)throw new Error("Data does not appear to be in a KDBush format.");const d=h>>4;if(d!==1)throw new Error(`Got v${d} data when expected v1.`);const _=qx[15&h];if(!_)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(e,2,1),[C]=new Uint32Array(e,4,1);return new A1(C,x,_,e)}constructor(e,r=64,h=Float64Array,d){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+r,2),65535),this.ArrayType=h,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const _=qx.indexOf(this.ArrayType),x=2*e*this.ArrayType.BYTES_PER_ELEMENT,C=e*this.IndexArrayType.BYTES_PER_ELEMENT,T=(8-C%8)%8;if(_<0)throw new Error(`Unexpected typed array class: ${h}.`);d&&d instanceof ArrayBuffer?(this.data=d,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+C+T,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+x+C+T),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+C+T,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+_]),new Uint16Array(this.data,2,1)[0]=r,new Uint32Array(this.data,4,1)[0]=e)}add(e,r){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=e,this.coords[this._pos++]=r,h}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return c1(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,r,h,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:x,nodeSize:C}=this,T=[0,_.length-1,0],P=[];for(;T.length;){const Q=T.pop()||0,k=T.pop()||0,K=T.pop()||0;if(k-K<=C){for(let ue=K;ue<=k;ue++){const ve=x[2*ue],He=x[2*ue+1];ve>=e&&ve<=h&&He>=r&&He<=d&&P.push(_[ue])}continue}const X=K+k>>1,re=x[2*X],ae=x[2*X+1];re>=e&&re<=h&&ae>=r&&ae<=d&&P.push(_[X]),(Q===0?e<=re:r<=ae)&&(T.push(K),T.push(X-1),T.push(1-Q)),(Q===0?h>=re:d>=ae)&&(T.push(X+1),T.push(k),T.push(1-Q))}return P}within(e,r,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:d,coords:_,nodeSize:x}=this,C=[0,d.length-1,0],T=[],P=h*h;for(;C.length;){const Q=C.pop()||0,k=C.pop()||0,K=C.pop()||0;if(k-K<=x){for(let ue=K;ue<=k;ue++)Zx(_[2*ue],_[2*ue+1],e,r)<=P&&T.push(d[ue]);continue}const X=K+k>>1,re=_[2*X],ae=_[2*X+1];Zx(re,ae,e,r)<=P&&T.push(d[X]),(Q===0?e-h<=re:r-h<=ae)&&(C.push(K),C.push(X-1),C.push(1-Q)),(Q===0?e+h>=re:r+h>=ae)&&(C.push(X+1),C.push(k),C.push(1-Q))}return T}}function c1(a,e,r,h,d,_){if(d-h<=r)return;const x=h+d>>1;Kx(a,e,x,h,d,_),c1(a,e,r,h,x-1,1-_),c1(a,e,r,x+1,d,1-_)}function Kx(a,e,r,h,d,_){for(;d>h;){if(d-h>600){const P=d-h+1,Q=r-h+1,k=Math.log(P),K=.5*Math.exp(2*k/3),X=.5*Math.sqrt(k*K*(P-K)/P)*(Q-P/2<0?-1:1);Kx(a,e,r,Math.max(h,Math.floor(r-Q*K/P+X)),Math.min(d,Math.floor(r+(P-Q)*K/P+X)),_)}const x=e[2*r+_];let C=h,T=d;for(xg(a,e,h,r),e[2*d+_]>x&&xg(a,e,h,d);C<T;){for(xg(a,e,C,T),C++,T--;e[2*C+_]<x;)C++;for(;e[2*T+_]>x;)T--}e[2*h+_]===x?xg(a,e,h,T):(T++,xg(a,e,T,d)),T<=r&&(h=T+1),r<=T&&(d=T-1)}}function xg(a,e,r,h){u1(a,r,h),u1(e,2*r,2*h),u1(e,2*r+1,2*h+1)}function u1(a,e,r){const h=a[e];a[e]=a[r],a[r]=h}function Zx(a,e,r,h){const d=a-r,_=e-h;return d*d+_*_}var h1;v.cI=void 0,(h1=v.cI||(v.cI={})).create="create",h1.load="load",h1.fullLoad="fullLoad";let gy=null,bg=[];const f1=1e3/60,d1="loadTime",p1="fullLoadTime",AS={mark(a){performance.mark(a)},recordStartOfFrameAt(a){gy!=null&&bg.push(a-gy),gy=a},resetRuntimeMetrics(){gy=null,bg=[]},clearInitializationMetrics(){performance.clearMeasures(d1),performance.clearMeasures(p1);for(const a in v.cI)performance.clearMarks(v.cI[a])},remove(){this.resetRuntimeMetrics(),this.clearInitializationMetrics()},getPerformanceMetrics(){performance.measure(d1,v.cI.create,v.cI.load),performance.measure(p1,v.cI.create,v.cI.fullLoad);const a=performance.getEntriesByName(d1)[0].duration,e=performance.getEntriesByName(p1)[0].duration,r=bg.length;return{loadTimeMs:a,fullLoadTimeMs:e,averageFramesPerSecond:1/(bg.reduce(((h,d)=>h+d),0)/r/1e3),virtualDroppedFramesCount:bg.filter((h=>h>f1)).reduce(((h,d)=>h+(d-f1)/f1),0),totalFramesCount:r}}};v.$=W,v.A=Be,v.B=yt,v.C=pe,v.D=gr,v.E=Bt,v.F=function([a,e,r]){return e+=90,e*=Math.PI/180,r*=Math.PI/180,{x:a*Math.cos(e)*Math.sin(r),y:a*Math.sin(e)*Math.sin(r),z:a*Math.cos(r)}},v.G=wr,v.H=bn,v.I=qm,v.J=we,v.K=function(a){if(Qr==null){const e=a.navigator?a.navigator.userAgent:null;Qr=!!a.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return Qr},v.L=class{constructor(a,e){this.target=a,this.mapId=e,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new q0((()=>this.process())),this.subscription=Gr(this.target,"message",(r=>this.receive(r)),!1),this.globalScope=_r(self)?a:window}registerMessageHandler(a,e){this.messageHandlers[a]=e}unregisterMessageHandler(a){delete this.messageHandlers[a]}sendAsync(a,e){return new Promise(((r,h)=>{const d=Math.round(1e18*Math.random()).toString(36).substring(0,10),_=e?Gr(e.signal,"abort",(()=>{_?.unsubscribe(),delete this.resolveRejects[d];const T={id:d,type:"<cancel>",origin:location.origin,targetMapId:a.targetMapId,sourceMapId:this.mapId};this.target.postMessage(T)}),tg):null;this.resolveRejects[d]={resolve:T=>{_?.unsubscribe(),r(T)},reject:T=>{_?.unsubscribe(),h(T)}};const x=[],C=Object.assign(Object.assign({},a),{id:d,sourceMapId:this.mapId,origin:location.origin,data:Vt(a.data,x)});this.target.postMessage(C,{transfer:x})}))}receive(a){const e=a.data,r=e.id;if(!(e.origin!=="file://"&&location.origin!=="file://"&&e.origin!=="resource://android"&&location.origin!=="resource://android"&&e.origin!==location.origin||e.targetMapId&&this.mapId!==e.targetMapId)){if(e.type==="<cancel>"){delete this.tasks[r];const h=this.abortControllers[r];return delete this.abortControllers[r],void(h&&h.abort())}if(_r(self)||e.mustQueue)return this.tasks[r]=e,this.taskQueue.push(r),void this.invoker.trigger();this.processTask(r,e)}}process(){if(this.taskQueue.length===0)return;const a=this.taskQueue.shift(),e=this.tasks[a];delete this.tasks[a],this.taskQueue.length>0&&this.invoker.trigger(),e&&this.processTask(a,e)}processTask(a,e){return A(this,void 0,void 0,(function*(){if(e.type==="<response>"){const d=this.resolveRejects[a];return delete this.resolveRejects[a],d?void(e.error?d.reject(er(e.error)):d.resolve(er(e.data))):void 0}if(!this.messageHandlers[e.type])return void this.completeTask(a,new Error(`Could not find a registered handler for ${e.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const r=er(e.data),h=new AbortController;this.abortControllers[a]=h;try{const d=yield this.messageHandlers[e.type](e.sourceMapId,r,h);this.completeTask(a,null,d)}catch(d){this.completeTask(a,d)}}))}completeTask(a,e,r){const h=[];delete this.abortControllers[a];const d={id:a,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:e?Vt(e):null,data:Vt(r,h)};this.target.postMessage(d,{transfer:h})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},v.M=ne,v.N=function(){var a=new Be(16);return Be!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},v.O=function(a,e,r){var h,d,_,x,C,T,P,Q,k,K,X,re,ae=r[0],ue=r[1],ve=r[2];return e===a?(a[12]=e[0]*ae+e[4]*ue+e[8]*ve+e[12],a[13]=e[1]*ae+e[5]*ue+e[9]*ve+e[13],a[14]=e[2]*ae+e[6]*ue+e[10]*ve+e[14],a[15]=e[3]*ae+e[7]*ue+e[11]*ve+e[15]):(d=e[1],_=e[2],x=e[3],C=e[4],T=e[5],P=e[6],Q=e[7],k=e[8],K=e[9],X=e[10],re=e[11],a[0]=h=e[0],a[1]=d,a[2]=_,a[3]=x,a[4]=C,a[5]=T,a[6]=P,a[7]=Q,a[8]=k,a[9]=K,a[10]=X,a[11]=re,a[12]=h*ae+C*ue+k*ve+e[12],a[13]=d*ae+T*ue+K*ve+e[13],a[14]=_*ae+P*ue+X*ve+e[14],a[15]=x*ae+Q*ue+re*ve+e[15]),a},v.P=S,v.Q=function(a,e,r){var h=r[0],d=r[1],_=r[2];return a[0]=e[0]*h,a[1]=e[1]*h,a[2]=e[2]*h,a[3]=e[3]*h,a[4]=e[4]*d,a[5]=e[5]*d,a[6]=e[6]*d,a[7]=e[7]*d,a[8]=e[8]*_,a[9]=e[9]*_,a[10]=e[10]*_,a[11]=e[11]*_,a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15],a},v.R=ll,v.S=function(a,e,r){var h=e[0],d=e[1],_=e[2],x=e[3],C=e[4],T=e[5],P=e[6],Q=e[7],k=e[8],K=e[9],X=e[10],re=e[11],ae=e[12],ue=e[13],ve=e[14],He=e[15],me=r[0],Ie=r[1],rt=r[2],ct=r[3];return a[0]=me*h+Ie*C+rt*k+ct*ae,a[1]=me*d+Ie*T+rt*K+ct*ue,a[2]=me*_+Ie*P+rt*X+ct*ve,a[3]=me*x+Ie*Q+rt*re+ct*He,a[4]=(me=r[4])*h+(Ie=r[5])*C+(rt=r[6])*k+(ct=r[7])*ae,a[5]=me*d+Ie*T+rt*K+ct*ue,a[6]=me*_+Ie*P+rt*X+ct*ve,a[7]=me*x+Ie*Q+rt*re+ct*He,a[8]=(me=r[8])*h+(Ie=r[9])*C+(rt=r[10])*k+(ct=r[11])*ae,a[9]=me*d+Ie*T+rt*K+ct*ue,a[10]=me*_+Ie*P+rt*X+ct*ve,a[11]=me*x+Ie*Q+rt*re+ct*He,a[12]=(me=r[12])*h+(Ie=r[13])*C+(rt=r[14])*k+(ct=r[15])*ae,a[13]=me*d+Ie*T+rt*K+ct*ue,a[14]=me*_+Ie*P+rt*X+ct*ve,a[15]=me*x+Ie*Q+rt*re+ct*He,a},v.T=ru,v.U=function(a,e){const r={};for(let h=0;h<e.length;h++){const d=e[h];d in a&&(r[d]=a[d])}return r},v.V=Ic,v.W=mt,v.X=X0,v.Y=Z0,v.Z=gn,v._=A,v.a=Or,v.a$=_t,v.a0=le,v.a1=Zr,v.a2=Al,v.a3=ig,v.a4=Di,v.a5=xt,v.a6=function(a,e,r){if(!a)return e||{};if(!e)return a||{};const h=ag(a),d=ag(e);(function(x,C){C.removeAll&&(x.add.clear(),x.update.clear(),x.remove.clear(),C.remove.clear());for(const T of C.remove)x.add.delete(T),x.update.delete(T);for(const[T,P]of C.update){const Q=x.update.get(T);Q&&(C.update.set(T,$0(Q,P)),x.update.delete(T))}})(h,d);const _={};if((h.removeAll||d.removeAll)&&(_.removeAll=!0),_.remove=new Set([...h.remove,...d.remove]),_.add=new Map([...h.add,...d.add]),_.update=new Map([...h.update,...d.update]),_.remove.size&&_.add.size)for(const x of _.add.keys())_.remove.delete(x);return(function(x){const C={};return x.removeAll&&(C.removeAll=x.removeAll),x.remove&&(C.remove=Array.from(x.remove)),x.add&&(C.add=Array.from(x.add.values())),x.update&&(C.update=Array.from(x.update.values())),C})(_)},v.a7=function(a,e){const r=new Map;if(a==null||a.type==null)return r;if(a.type==="Feature"){const h=Tf(a,e);return h==null?void 0:(r.set(h,a),r)}if(a.type==="FeatureCollection"){const h=new Set;for(const d of a.features){const _=Tf(d,e);if(_==null||h.has(_))return;h.add(_),r.set(_,d)}return r}},v.a8=function(a,e,r){var h,d;const _=[];if(e.removeAll)a.clear();else if(e.remove)for(const x of e.remove){const C=a.get(x);C&&(_.push(C.geometry),a.delete(x))}if(e.add)for(const x of e.add){const C=Tf(x,r);if(C==null)continue;const T=a.get(C);T&&_.push(T.geometry),_.push(x.geometry),a.set(C,x)}if(e.update)for(const x of e.update){const C=a.get(x.id);if(!C)continue;const T=!!x.newGeometry,P=x.removeAllProperties||((h=x.removeProperties)===null||h===void 0?void 0:h.length)>0||((d=x.addOrUpdateProperties)===null||d===void 0?void 0:d.length)>0;if(!T&&!P)continue;_.push(C.geometry);const Q=Object.assign({},C);if(a.set(x.id,Q),T&&(_.push(x.newGeometry),Q.geometry=x.newGeometry),P){if(Q.properties=x.removeAllProperties?{}:Object.assign({},Q.properties||{}),x.removeProperties)for(const k of x.removeProperties)delete Q.properties[k];if(x.addOrUpdateProperties)for(const{key:k,value:K}of x.addOrUpdateProperties)Q.properties[k]=K}}return _},v.a9=gs,v.aA=function(a,{uSize:e,uSizeT:r},{lowerSize:h,upperSize:d}){return a.kind==="source"?h/ou:a.kind==="composite"?wr.number(h/ou,d/ou,r):e},v.aB=function(a,e){var r=e[0],h=e[1],d=e[2],_=e[3],x=e[4],C=e[5],T=e[6],P=e[7],Q=e[8],k=e[9],K=e[10],X=e[11],re=e[12],ae=e[13],ue=e[14],ve=e[15],He=r*C-h*x,me=r*T-d*x,Ie=r*P-_*x,rt=h*T-d*C,ct=h*P-_*C,Lt=d*P-_*T,qt=Q*ae-k*re,Xt=Q*ue-K*re,nr=Q*ve-X*re,mr=k*ue-K*ae,sr=k*ve-X*ae,Yt=K*ve-X*ue,zt=He*Yt-me*sr+Ie*mr+rt*nr-ct*Xt+Lt*qt;return zt?(a[0]=(C*Yt-T*sr+P*mr)*(zt=1/zt),a[1]=(d*sr-h*Yt-_*mr)*zt,a[2]=(ae*Lt-ue*ct+ve*rt)*zt,a[3]=(K*ct-k*Lt-X*rt)*zt,a[4]=(T*nr-x*Yt-P*Xt)*zt,a[5]=(r*Yt-d*nr+_*Xt)*zt,a[6]=(ue*Ie-re*Lt-ve*me)*zt,a[7]=(Q*Lt-K*Ie+X*me)*zt,a[8]=(x*sr-C*nr+P*qt)*zt,a[9]=(h*nr-r*sr-_*qt)*zt,a[10]=(re*ct-ae*Ie+ve*He)*zt,a[11]=(k*Ie-Q*ct-X*He)*zt,a[12]=(C*Xt-x*mr-T*qt)*zt,a[13]=(r*mr-h*Xt+d*qt)*zt,a[14]=(ae*me-re*rt-ue*He)*zt,a[15]=(Q*rt-k*me+K*He)*zt,a):null},v.aC=ot,v.aD=function(a){var e=a[0],r=a[1];return Math.sqrt(e*e+r*r)},v.aE=function(a){return a[0]=0,a[1]=0,a},v.aF=function(a,e,r){return a[0]=e[0]*r,a[1]=e[1]*r,a},v.aG=Ep,v.aH=Ve,v.aI=function(a,e,r,h){const d=e.y-a.y,_=e.x-a.x,x=h.y-r.y,C=h.x-r.x,T=x*_-C*d;if(T===0)return null;const P=(C*(a.y-r.y)-x*(a.x-r.x))/T;return new S(a.x+P*_,a.y+P*d)},v.aJ=w,v.aK=mf,v.aL=function(a){let e=1/0,r=1/0,h=-1/0,d=-1/0;for(const _ of a)e=Math.min(e,_.x),r=Math.min(r,_.y),h=Math.max(h,_.x),d=Math.max(d,_.y);return[e,r,h,d]},v.aM=Ps,v.aN=Ct,v.aO=function(a,e,r,h,d=!1){if(!r[0]&&!r[1])return[0,0];const _=d?h==="map"?-a.bearingInRadians:0:h==="viewport"?a.bearingInRadians:0;if(_){const x=Math.sin(_),C=Math.cos(_);r=[r[0]*C-r[1]*x,r[0]*x+r[1]*C]}return[d?r[0]:Ct(e,r[0],a.zoom),d?r[1]:Ct(e,r[1],a.zoom)]},v.aQ=Sp,v.aR=l1,v.aS=Zm,v.aT=A1,v.aU=$n,v.aV=iu,v.aW=de,v.aX=Ht,v.aY=It,v.aZ=Cn,v.a_=Fp,v.aa=Qu,v.ab=25,v.ac=Ip,v.ad=a=>{const e=window.document.createElement("video");return e.muted=!0,new Promise((r=>{e.onloadstart=()=>{r(e)};for(const h of a){const d=window.document.createElement("source");At(h)||(e.crossOrigin="Anonymous"),d.src=h,e.appendChild(d)}}))},v.ae=Wt,v.af=function(){return Et++},v.ag=f,v.ah=uh,v.ai=Rf,v.aj=Is,v.ak=zA,v.al=J0,v.am=function(a){const e={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((r,h,d,_)=>{const x=d||_;return e[h]=!x||x.toLowerCase(),""})),e["max-age"]){const r=parseInt(e["max-age"],10);isNaN(r)?delete e["max-age"]:e["max-age"]=r}return e},v.an=tt,v.ao=85.051129,v.ap=mn,v.aq=function(a){return Math.pow(2,a)},v.ar=lt,v.as=ng,v.at=function(a){return Math.log(a)/Math.LN2},v.au=function(a){var e=a[0],r=a[1];return e*e+r*r},v.av=function(a){if(!a.length)return new Set;const e=Math.max(...a.map((T=>T.canonical.z)));let r=1/0,h=-1/0,d=1/0,_=-1/0;const x=[];for(const T of a){const{x:P,y:Q,z:k}=T.canonical,K=Math.pow(2,e-k),X=P*K,re=Q*K;x.push({id:T,x:X,y:re}),X<r&&(r=X),X>h&&(h=X),re<d&&(d=re),re>_&&(_=re)}const C=new Set;for(const T of x)T.x!==r&&T.x!==h&&T.y!==d&&T.y!==_||C.add(T.id);return C},v.aw=function(a,e){const r=Math.abs(2*a.wrap)-+(a.wrap<0),h=Math.abs(2*e.wrap)-+(e.wrap<0);return a.overscaledZ-e.overscaledZ||h-r||e.canonical.y-a.canonical.y||e.canonical.x-a.canonical.x},v.ax=class{constructor(a,e){this.max=a,this.onRemove=e,this.reset()}reset(){for(const a in this.data)for(const e of this.data[a])e.timeout&&clearTimeout(e.timeout),this.onRemove(e.value);return this.data={},this.order=[],this}add(a,e,r){const h=a.wrapped().key;this.data[h]===void 0&&(this.data[h]=[]);const d={value:e,timeout:void 0};if(r!==void 0&&(d.timeout=setTimeout((()=>{this.remove(a,d)}),r)),this.data[h].push(d),this.order.push(h),this.order.length>this.max){const _=this._getAndRemoveByKey(this.order[0]);_&&this.onRemove(_)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){const e=this.data[a].shift();return e.timeout&&clearTimeout(e.timeout),this.data[a].length===0&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),e.value}getByKey(a){const e=this.data[a];return e?e[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,e){if(!this.has(a))return this;const r=a.wrapped().key,h=e===void 0?0:this.data[r].indexOf(e),d=this.data[r][h];return this.data[r].splice(h,1),d.timeout&&clearTimeout(d.timeout),this.data[r].length===0&&delete this.data[r],this.onRemove(d.value),this.order.splice(this.order.indexOf(r),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(a){const e=[];for(const r in this.data)for(const h of this.data[r])a(h.value)||e.push(h);for(const r of e)this.remove(r.value.tileID,r)}},v.ay=function(a,e){let r=0,h=0;if(a.kind==="constant")h=a.layoutSize;else if(a.kind!=="source"){const{interpolationType:d,minZoom:_,maxZoom:x}=a,C=d?tt(Kt.interpolationFactor(d,e,_,x),0,1):0;a.kind==="camera"?h=wr.number(a.minSize,a.maxSize,C):r=C}return{uSizeT:r,uSize:h}},v.b=Wr,v.b$=Tc,v.b0=Ce,v.b1=function(a){var e=new Be(3);return e[0]=a[0],e[1]=a[1],e[2]=a[2],e},v.b2=function(a,e,r){return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],a},v.b3=function(a,e){var r=e[0],h=e[1],d=e[2],_=r*r+h*h+d*d;return _>0&&(_=1/Math.sqrt(_)),a[0]=e[0]*_,a[1]=e[1]*_,a[2]=e[2]*_,a},v.b4=_e,v.b5=function(a,e){return a[0]*e[0]+a[1]*e[1]+a[2]*e[2]},v.b6=function(a,e,r){return a[0]=e[0]*r[0],a[1]=e[1]*r[1],a[2]=e[2]*r[2],a[3]=e[3]*r[3],a},v.b7=ut,v.b8=function(a,e,r){const h=e[0]*r[0]+e[1]*r[1]+e[2]*r[2];return h===0?null:(-(a[0]*r[0]+a[1]*r[1]+a[2]*r[2])-r[3])/h},v.b9=Ye,v.bA=function(){return new Float64Array(3)},v.bB=ke,v.bC=function(a,e,r){var h=r[0],d=r[1],_=r[2],x=r[3],C=e[0],T=e[1],P=e[2],Q=d*P-_*T,k=_*C-h*P,K=h*T-d*C;return a[0]=C+x*(Q+=Q)+d*(K+=K)-_*(k+=k),a[1]=T+x*k+_*Q-h*K,a[2]=P+x*K+h*k-d*Q,a},v.bD=function(a,e,r){const h=(d=[a[0],a[1],a[2],e[0],e[1],e[2],r[0],r[1],r[2]])[0]*((Q=d[8])*(x=d[4])-(C=d[5])*(P=d[7]))+d[1]*(-Q*(_=d[3])+C*(T=d[6]))+d[2]*(P*_-x*T);var d,_,x,C,T,P,Q;if(h===0)return null;const k=_e([],[e[0],e[1],e[2]],[r[0],r[1],r[2]]),K=_e([],[r[0],r[1],r[2]],[a[0],a[1],a[2]]),X=_e([],[a[0],a[1],a[2]],[e[0],e[1],e[2]]),re=_t([],k,-a[3]);return Ce(re,re,_t([],K,-e[3])),Ce(re,re,_t([],X,-r[3])),_t(re,re,1/h),re},v.bE=jh,v.bF=function(){return new Float64Array(4)},v.bG=function(a,e,r,h){var d=[],_=[];return d[0]=e[0]-r[0],d[1]=e[1]-r[1],d[2]=e[2]-r[2],_[0]=d[0]*Math.cos(h)-d[1]*Math.sin(h),_[1]=d[0]*Math.sin(h)+d[1]*Math.cos(h),_[2]=d[2],a[0]=_[0]+r[0],a[1]=_[1]+r[1],a[2]=_[2]+r[2],a},v.bH=function(a,e,r,h){var d=[],_=[];return d[0]=e[0]-r[0],d[1]=e[1]-r[1],d[2]=e[2]-r[2],_[0]=d[0],_[1]=d[1]*Math.cos(h)-d[2]*Math.sin(h),_[2]=d[1]*Math.sin(h)+d[2]*Math.cos(h),a[0]=_[0]+r[0],a[1]=_[1]+r[1],a[2]=_[2]+r[2],a},v.bI=function(a,e,r,h){var d=[],_=[];return d[0]=e[0]-r[0],d[1]=e[1]-r[1],d[2]=e[2]-r[2],_[0]=d[2]*Math.sin(h)+d[0]*Math.cos(h),_[1]=d[1],_[2]=d[2]*Math.cos(h)-d[0]*Math.sin(h),a[0]=_[0]+r[0],a[1]=_[1]+r[1],a[2]=_[2]+r[2],a},v.bJ=function(a,e,r){var h=Math.sin(r),d=Math.cos(r),_=e[0],x=e[1],C=e[2],T=e[3],P=e[8],Q=e[9],k=e[10],K=e[11];return e!==a&&(a[4]=e[4],a[5]=e[5],a[6]=e[6],a[7]=e[7],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]),a[0]=_*d-P*h,a[1]=x*d-Q*h,a[2]=C*d-k*h,a[3]=T*d-K*h,a[8]=_*h+P*d,a[9]=x*h+Q*d,a[10]=C*h+k*d,a[11]=T*h+K*d,a},v.bK=function(a,e){const r=Fe(a,360),h=Fe(e,360),d=h-r,_=h>r?d-360:d+360;return Math.abs(d)<Math.abs(_)?d:_},v.bL=function(a){return a[0]=0,a[1]=0,a[2]=0,a},v.bM=function(a,e,r,h){const d=Math.sqrt(a*a+e*e),_=Math.sqrt(r*r+h*h);a/=d,e/=d,r/=_,h/=_;const x=Math.acos(a*r+e*h);return-e*r+a*h>0?x:-x},v.bN=function(a,e){const r=Fe(a,2*Math.PI),h=Fe(e,2*Math.PI);return Math.min(Math.abs(r-h),Math.abs(r-h+2*Math.PI),Math.abs(r-h-2*Math.PI))},v.bO=function(){const a={},e=Qe.$version;for(const r in Qe.$root){const h=Qe.$root[r];if(h.required){let d=null;d=r==="version"?e:h.type==="array"?[]:{},d!=null&&(a[r]=d)}}return a},v.bP=De,v.bQ=hr,v.bR=function a(e,r){if(Array.isArray(e)){if(!Array.isArray(r)||e.length!==r.length)return!1;for(let h=0;h<e.length;h++)if(!a(e[h],r[h]))return!1;return!0}if(typeof e=="object"&&e!==null&&r!==null){if(typeof r!="object"||Object.keys(e).length!==Object.keys(r).length)return!1;for(const h in e)if(!a(e[h],r[h]))return!1;return!0}return e===r},v.bS=function(a){a=a.slice();const e=Object.create(null);for(let r=0;r<a.length;r++)e[a[r].id]=a[r];for(let r=0;r<a.length;r++)"ref"in a[r]&&(a[r]=Xr(a[r],e[a[r].ref]));return a},v.bT=function(a,e){if(a.type==="custom")return new eg(a,e);switch(a.type){case"background":return new Tp(a,e);case"circle":return new rp(a,e);case"color-relief":return new cd(a,e);case"fill":return new w0(a,e);case"fill-extrusion":return new bf(a,e);case"heatmap":return new op(a,e);case"hillshade":return new e1(a,e);case"line":return new S0(a,e);case"raster":return new ia(a,e);case"symbol":return new pd(a,e)}},v.bU=a=>a.type==="raster",v.bV=pr,v.bW=function(a,e){if(!a)return[{command:"setStyle",args:[e]}];let r=[];try{if(!Er(a.version,e.version))return[{command:"setStyle",args:[e]}];Er(a.center,e.center)||r.push({command:"setCenter",args:[e.center]}),Er(a.state,e.state)||r.push({command:"setGlobalState",args:[e.state]}),Er(a.centerAltitude,e.centerAltitude)||r.push({command:"setCenterAltitude",args:[e.centerAltitude]}),Er(a.zoom,e.zoom)||r.push({command:"setZoom",args:[e.zoom]}),Er(a.bearing,e.bearing)||r.push({command:"setBearing",args:[e.bearing]}),Er(a.pitch,e.pitch)||r.push({command:"setPitch",args:[e.pitch]}),Er(a.roll,e.roll)||r.push({command:"setRoll",args:[e.roll]}),Er(a.sprite,e.sprite)||r.push({command:"setSprite",args:[e.sprite]}),Er(a.glyphs,e.glyphs)||r.push({command:"setGlyphs",args:[e.glyphs]}),Er(a.transition,e.transition)||r.push({command:"setTransition",args:[e.transition]}),Er(a.light,e.light)||r.push({command:"setLight",args:[e.light]}),Er(a.terrain,e.terrain)||r.push({command:"setTerrain",args:[e.terrain]}),Er(a.sky,e.sky)||r.push({command:"setSky",args:[e.sky]}),Er(a.projection,e.projection)||r.push({command:"setProjection",args:[e.projection]});const h={},d=[];(function(x,C,T,P){let Q;for(Q in C=C||{},x=x||{})Object.prototype.hasOwnProperty.call(x,Q)&&(Object.prototype.hasOwnProperty.call(C,Q)||dr(Q,T,P));for(Q in C)Object.prototype.hasOwnProperty.call(C,Q)&&(Object.prototype.hasOwnProperty.call(x,Q)?Er(x[Q],C[Q])||(x[Q].type==="geojson"&&C[Q].type==="geojson"&&Kn(x,C,Q)?zr(T,{command:"setGeoJSONSourceData",args:[Q,C[Q].data]}):mi(Q,C,T,P)):Pr(Q,C,T))})(a.sources,e.sources,d,h);const _=[];a.layers&&a.layers.forEach((x=>{"source"in x&&h[x.source]?r.push({command:"removeLayer",args:[x.id]}):_.push(x)})),r=r.concat(d),(function(x,C,T){C=C||[];const P=(x=x||[]).map(wi),Q=C.map(wi),k=x.reduce(xn,{}),K=C.reduce(xn,{}),X=P.slice(),re=Object.create(null);let ae,ue,ve,He,me;for(let Ie=0,rt=0;Ie<P.length;Ie++)ae=P[Ie],Object.prototype.hasOwnProperty.call(K,ae)?rt++:(zr(T,{command:"removeLayer",args:[ae]}),X.splice(X.indexOf(ae,rt),1));for(let Ie=0,rt=0;Ie<Q.length;Ie++)ae=Q[Q.length-1-Ie],X[X.length-1-Ie]!==ae&&(Object.prototype.hasOwnProperty.call(k,ae)?(zr(T,{command:"removeLayer",args:[ae]}),X.splice(X.lastIndexOf(ae,X.length-rt),1)):rt++,He=X[X.length-Ie],zr(T,{command:"addLayer",args:[K[ae],He]}),X.splice(X.length-Ie,0,ae),re[ae]=!0);for(let Ie=0;Ie<Q.length;Ie++)if(ae=Q[Ie],ue=k[ae],ve=K[ae],!re[ae]&&!Er(ue,ve))if(Er(ue.source,ve.source)&&Er(ue["source-layer"],ve["source-layer"])&&Er(ue.type,ve.type)){for(me in Jn(ue.layout,ve.layout,T,ae,null,"setLayoutProperty"),Jn(ue.paint,ve.paint,T,ae,null,"setPaintProperty"),Er(ue.filter,ve.filter)||zr(T,{command:"setFilter",args:[ae,ve.filter]}),Er(ue.minzoom,ve.minzoom)&&Er(ue.maxzoom,ve.maxzoom)||zr(T,{command:"setLayerZoomRange",args:[ae,ve.minzoom,ve.maxzoom]}),ue)Object.prototype.hasOwnProperty.call(ue,me)&&me!=="layout"&&me!=="paint"&&me!=="filter"&&me!=="metadata"&&me!=="minzoom"&&me!=="maxzoom"&&(me.indexOf("paint.")===0?Jn(ue[me],ve[me],T,ae,me.slice(6),"setPaintProperty"):Er(ue[me],ve[me])||zr(T,{command:"setLayerProperty",args:[ae,me,ve[me]]}));for(me in ve)Object.prototype.hasOwnProperty.call(ve,me)&&!Object.prototype.hasOwnProperty.call(ue,me)&&me!=="layout"&&me!=="paint"&&me!=="filter"&&me!=="metadata"&&me!=="minzoom"&&me!=="maxzoom"&&(me.indexOf("paint.")===0?Jn(ue[me],ve[me],T,ae,me.slice(6),"setPaintProperty"):Er(ue[me],ve[me])||zr(T,{command:"setLayerProperty",args:[ae,me,ve[me]]}))}else zr(T,{command:"removeLayer",args:[ae]}),He=X[X.lastIndexOf(ae)+1],zr(T,{command:"addLayer",args:[ve,He]})})(_,e.layers,r)}catch(h){console.warn("Unable to compute style diff:",h),r=[{command:"setStyle",args:[e]}]}return r},v.bX=function(a){const e=[],r=a.id;return r===void 0&&e.push({message:`layers.${r}: missing required property "id"`}),a.render===void 0&&e.push({message:`layers.${r}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&e.push({message:`layers.${r}: property "renderingMode" must be either "2d" or "3d"`}),e},v.bY=$t,v.bZ=Ar,v.b_=class extends zo{constructor(a,e){super(a,e),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))}},v.ba=function(a,e,r){return a[0]=e[0]*r,a[1]=e[1]*r,a[2]=e[2]*r,a[3]=e[3]*r,a},v.bb=function(a,e){return a[0]*e[0]+a[1]*e[1]+a[2]*e[2]+a[3]},v.bc=Y0,v.bd=hh,v.be=function(a,e,r,h,d){var _=1/Math.tan(e/2);if(a[0]=_/r,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=_,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,d!=null&&d!==1/0){var x=1/(h-d);a[10]=(d+h)*x,a[14]=2*d*h*x}else a[10]=-1,a[14]=-2*h;return a},v.bf=function(a){var e=new Be(16);return e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],e[4]=a[4],e[5]=a[5],e[6]=a[6],e[7]=a[7],e[8]=a[8],e[9]=a[9],e[10]=a[10],e[11]=a[11],e[12]=a[12],e[13]=a[13],e[14]=a[14],e[15]=a[15],e},v.bg=function(a,e,r){var h=Math.sin(r),d=Math.cos(r),_=e[0],x=e[1],C=e[2],T=e[3],P=e[4],Q=e[5],k=e[6],K=e[7];return e!==a&&(a[8]=e[8],a[9]=e[9],a[10]=e[10],a[11]=e[11],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]),a[0]=_*d+P*h,a[1]=x*d+Q*h,a[2]=C*d+k*h,a[3]=T*d+K*h,a[4]=P*d-_*h,a[5]=Q*d-x*h,a[6]=k*d-C*h,a[7]=K*d-T*h,a},v.bh=function(a,e,r){var h=Math.sin(r),d=Math.cos(r),_=e[4],x=e[5],C=e[6],T=e[7],P=e[8],Q=e[9],k=e[10],K=e[11];return e!==a&&(a[0]=e[0],a[1]=e[1],a[2]=e[2],a[3]=e[3],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15]),a[4]=_*d+P*h,a[5]=x*d+Q*h,a[6]=C*d+k*h,a[7]=T*d+K*h,a[8]=P*d-_*h,a[9]=Q*d-x*h,a[10]=k*d-C*h,a[11]=K*d-T*h,a},v.bi=function(){const a=new Float32Array(16);return lt(a),a},v.bj=function(){const a=new Float64Array(16);return lt(a),a},v.bk=function(){return new Float64Array(16)},v.bl=function(a,e,r){const h=new Float64Array(4);return ke(h,a,e-90,r),h},v.bm=function(a,e,r,h){var d,_,x,C,T,P=e[0],Q=e[1],k=e[2],K=e[3],X=r[0],re=r[1],ae=r[2],ue=r[3];return(_=P*X+Q*re+k*ae+K*ue)<0&&(_=-_,X=-X,re=-re,ae=-ae,ue=-ue),1-_>ye?(d=Math.acos(_),x=Math.sin(d),C=Math.sin((1-h)*d)/x,T=Math.sin(h*d)/x):(C=1-h,T=h),a[0]=C*P+T*X,a[1]=C*Q+T*re,a[2]=C*k+T*ae,a[3]=C*K+T*ue,a},v.bn=function(a){const e=new Float64Array(9);var r,h,d,_,x,C,T,P,Q,k,K,X,re,ae,ue,ve,He,me;k=(d=(h=a)[0])*(T=d+d),K=(_=h[1])*T,re=(x=h[2])*T,ae=x*(P=_+_),ve=(C=h[3])*T,He=C*P,me=C*(Q=x+x),(r=e)[0]=1-(X=_*P)-(ue=x*Q),r[3]=K-me,r[6]=re+He,r[1]=K+me,r[4]=1-k-ue,r[7]=ae-ve,r[2]=re-He,r[5]=ae+ve,r[8]=1-k-X;const Ie=Cn(-Math.asin(tt(e[2],-1,1)));let rt,ct;return Math.hypot(e[5],e[8])<.001?(rt=0,ct=-Cn(Math.atan2(e[3],e[4]))):(rt=Cn(e[5]===0&&e[8]===0?0:Math.atan2(e[5],e[8])),ct=Cn(e[1]===0&&e[0]===0?0:Math.atan2(e[1],e[0]))),{roll:rt,pitch:Ie+90,bearing:ct}},v.bo=function(a,e){return a.roll==e.roll&&a.pitch==e.pitch&&a.bearing==e.bearing},v.bp=cn,v.bq=Ec,v.br=AA,v.bs=Ph,v.bt=lA,v.bu=oe,v.bv=xe,v.bw=Ma,v.bx=function(a,e,r,h,d){return oe(h,d,tt((a-e)/(r-e),0,1))},v.by=function(a,e,r,h){return a[0]=e[0]+r[0]*h,a[1]=e[1]+r[1]*h,a[2]=e[2]+r[2]*h,a},v.bz=Fe,v.c=Je,v.c$=class{constructor(a){this.start=`${a}#start`,this.end=`${a}#end`,this.measure=a,performance.mark(this.start)}finish(){performance.mark(this.end);let a=performance.getEntriesByName(this.measure);return a.length===0&&(performance.measure(this.measure,this.start,this.end),a=performance.getEntriesByName(this.measure),performance.clearMarks(this.start),performance.clearMarks(this.end),performance.clearMeasures(this.measure)),a}},v.c0=class extends zo{constructor(a,e){super(a,e),this.current=Wc}set(a){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(let e=1;e<16;e++)if(a[e]!==this.current[e]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}}},v.c1=Ju,v.c2=class extends zo{constructor(a,e){super(a,e),this.current=[0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2]))}},v.c3=class extends zo{constructor(a,e){super(a,e),this.current=[0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1]))}},v.c4=Le,v.c5=function(a,e){var r=Math.sin(e),h=Math.cos(e);return a[0]=h,a[1]=r,a[2]=0,a[3]=-r,a[4]=h,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},v.c6=function(a,e,r){var h=e[0],d=e[1],_=e[2];return a[0]=h*r[0]+d*r[3]+_*r[6],a[1]=h*r[1]+d*r[4]+_*r[7],a[2]=h*r[2]+d*r[5]+_*r[8],a},v.c7=function(a,e,r,h,d,_,x){var C=1/(e-r),T=1/(h-d),P=1/(_-x);return a[0]=-2*C,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*T,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*P,a[11]=0,a[12]=(e+r)*C,a[13]=(d+h)*T,a[14]=(x+_)*P,a[15]=1,a},v.c8=class extends zo{constructor(a,e){super(a,e),this.current=new Array}set(a){if(a!=this.current){this.current=a;const e=new Float32Array(4*a.length);for(let r=0;r<a.length;r++)e[4*r]=a[r].r,e[4*r+1]=a[r].g,e[4*r+2]=a[r].b,e[4*r+3]=a[r].a;this.gl.uniform4fv(this.location,e)}}},v.c9=class extends zo{constructor(a,e){super(a,e),this.current=new Array}set(a){if(a!=this.current){this.current=a;const e=new Float32Array(a);this.gl.uniform1fv(this.location,e)}}},v.cA=function(a,e){var r;if(!Fn[e])return!1;const h=a?.target,d=((r=h?.ownerDocument)===null||r===void 0?void 0:r.defaultView)||window;return a instanceof d.MouseEvent||a instanceof d.WheelEvent},v.cB=function(a,e){return An[e]&&"touches"in a},v.cC=function(a){return An[a]||Fn[a]},v.cD=function(a,e,r){var h=e[0],d=e[1];return a[0]=r[0]*h+r[4]*d+r[12],a[1]=r[1]*h+r[5]*d+r[13],a},v.cE=function(a,e){const{x:r,y:h}=gs.fromLngLat(e);return!(a<0||a>25||h<0||h>=1||r<0||r>=1)},v.cF=function(a,e){return a[0]=e[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=e[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=e[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},v.cG=class extends aa{},v.cH=AS,v.cJ=Ae,v.cK=function(a,e){Je.REGISTERED_PROTOCOLS[a]=e},v.cL=function(a){delete Je.REGISTERED_PROTOCOLS[a]},v.cM=function(a,e){const r={};for(let d=0;d<a.length;d++){const _=e&&e[a[d].id]||Ls(a[d]);e&&(e[a[d].id]=_);let x=r[_];x||(x=r[_]=[]),x.push(a[d])}const h=[];for(const d in r)h.push(r[d]);return h},v.cN=Ze,v.cO=Lp,v.cP=s,v.cQ=Km,v.cR=function(a){var e;a.bucket.createArrays(),a.bucket.tilePixelRatio=xt/(512*a.bucket.overscaling),a.bucket.compareText={},a.bucket.iconsNeedLinear=!1;const r=a.bucket.layers[0],h=r.layout,d=r._unevaluatedLayout._values,_={layoutIconSize:d["icon-size"].possiblyEvaluate(new bn(a.bucket.zoom+1),a.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new bn(a.bucket.zoom+1),a.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new bn(18))};if(a.bucket.textSizeData.kind==="composite"){const{minZoom:Q,maxZoom:k}=a.bucket.textSizeData;_.compositeTextSizes=[d["text-size"].possiblyEvaluate(new bn(Q),a.canonical),d["text-size"].possiblyEvaluate(new bn(k),a.canonical)]}if(a.bucket.iconSizeData.kind==="composite"){const{minZoom:Q,maxZoom:k}=a.bucket.iconSizeData;_.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new bn(Q),a.canonical),d["icon-size"].possiblyEvaluate(new bn(k),a.canonical)]}const x=h.get("text-line-height")*Ps,C=h.get("text-rotation-alignment")!=="viewport"&&h.get("symbol-placement")!=="point",T=h.get("text-keep-upright"),P=h.get("text-size");for(const Q of a.bucket.features){const k=h.get("text-font").evaluate(Q,{},a.canonical).join(","),K=P.evaluate(Q,{},a.canonical),X=_.layoutTextSize.evaluate(Q,{},a.canonical),re=_.layoutIconSize.evaluate(Q,{},a.canonical),ae={horizontal:{},vertical:void 0},ue=Q.text;let ve,He=[0,0];if(ue){const rt=ue.toString(),ct=h.get("text-letter-spacing").evaluate(Q,{},a.canonical)*Ps,Lt=Dr(rt)?ct:0,qt=h.get("text-anchor").evaluate(Q,{},a.canonical),Xt=Hx(r,Q,a.canonical);if(!Xt){const Yt=h.get("text-radial-offset").evaluate(Q,{},a.canonical);He=Yt?jx(qt,[Yt*Ps,vg]):h.get("text-offset").evaluate(Q,{},a.canonical).map((zt=>zt*Ps))}let nr=C?"center":h.get("text-justify").evaluate(Q,{},a.canonical);const mr=h.get("symbol-placement")==="point"?h.get("text-max-width").evaluate(Q,{},a.canonical)*Ps:1/0,sr=()=>{a.bucket.allowVerticalPlacement&&yn(rt)&&(ae.vertical=wp(ue,a.glyphMap,a.glyphPositions,a.imagePositions,k,mr,x,qt,"left",Lt,He,v.az.vertical,!0,X,K))};if(!C&&Xt){const Yt=new Set;if(nr==="auto")for(let Cr=0;Cr<Xt.values.length;Cr+=2)Yt.add(l1(Xt.values[Cr]));else Yt.add(nr);let zt=!1;for(const Cr of Yt)if(!ae.horizontal[Cr])if(zt)ae.horizontal[Cr]=ae.horizontal[0];else{const Ir=wp(ue,a.glyphMap,a.glyphPositions,a.imagePositions,k,mr,x,"center",Cr,Lt,He,v.az.horizontal,!1,X,K);Ir&&(ae.horizontal[Cr]=Ir,zt=Ir.positionedLines.length===1)}sr()}else{nr==="auto"&&(nr=l1(qt));const Yt=wp(ue,a.glyphMap,a.glyphPositions,a.imagePositions,k,mr,x,qt,nr,Lt,He,v.az.horizontal,!1,X,K);Yt&&(ae.horizontal[nr]=Yt),sr(),yn(rt)&&C&&T&&(ae.vertical=wp(ue,a.glyphMap,a.glyphPositions,a.imagePositions,k,mr,x,qt,nr,Lt,He,v.az.vertical,!1,X,K))}}let me=!1;if(Q.icon&&Q.icon.name){const rt=a.imageMap[Q.icon.name];rt&&(ve=su(a.imagePositions[Q.icon.name],h.get("icon-offset").evaluate(Q,{},a.canonical),h.get("icon-anchor").evaluate(Q,{},a.canonical)),me=!!rt.sdf,a.bucket.sdfIcons===void 0?a.bucket.sdfIcons=me:a.bucket.sdfIcons!==me&&xr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(rt.pixelRatio!==a.bucket.pixelRatio||h.get("icon-rotate").constantOr(1)!==0)&&(a.bucket.iconsNeedLinear=!0))}const Ie=Gx(ae.horizontal)||ae.vertical;(e=a.bucket).iconsInText||(e.iconsInText=!!Ie&&Ie.iconsInText),(Ie||ve)&&oS(a.bucket,Q,ae,ve,a.imageMap,_,X,re,He,me,a.canonical,a.subdivisionGranularity)}a.showCollisionBoxes&&a.bucket.generateCollisionDebugBuffers()},v.cS=ih,v.cT=Fc,v.cU=ms,v.cV=function(a){const e=new _p;return(function(r,h){for(const d in r.layers)h.writeMessage(3,Qf,r.layers[d])})(a,e),e.finish()},v.cW=function(a,e,r,h,d,_){let x=M(a,e,r,d,0);return x=M(x,e,h,_,1),x},v.cX=class{constructor(a){this.maxEntries=a,this.map=new Map}get(a){const e=this.map.get(a);return e!==void 0&&(this.map.delete(a),this.map.set(a,e)),e}set(a,e){if(this.map.has(a))this.map.delete(a);else if(this.map.size>=this.maxEntries){const r=this.map.keys().next().value;this.map.delete(r)}this.map.set(a,e)}clear(){this.map.clear()}},v.cY=cA,v.cZ=_p,v.c_=Ed,v.ca=class extends RA{},v.cb=T0,v.cc=class extends Oi{},v.cd=sp,v.ce=function(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},v.cf=ap,v.cg=function(a,e,r){var h=e[0],d=e[1],_=e[2],x=r[3]*h+r[7]*d+r[11]*_+r[15];return a[0]=(r[0]*h+r[4]*d+r[8]*_+r[12])/(x=x||1),a[1]=(r[1]*h+r[5]*d+r[9]*_+r[13])/x,a[2]=(r[2]*h+r[6]*d+r[10]*_+r[14])/x,a},v.ch=class extends sA{},v.ci=class extends b{},v.cj=function(a,e){return a[0]===e[0]&&a[1]===e[1]&&a[2]===e[2]&&a[3]===e[3]&&a[4]===e[4]&&a[5]===e[5]&&a[6]===e[6]&&a[7]===e[7]&&a[8]===e[8]&&a[9]===e[9]&&a[10]===e[10]&&a[11]===e[11]&&a[12]===e[12]&&a[13]===e[13]&&a[14]===e[14]&&a[15]===e[15]},v.ck=function(a,e){var r=a[0],h=a[1],d=a[2],_=a[3],x=a[4],C=a[5],T=a[6],P=a[7],Q=a[8],k=a[9],K=a[10],X=a[11],re=a[12],ae=a[13],ue=a[14],ve=a[15],He=e[0],me=e[1],Ie=e[2],rt=e[3],ct=e[4],Lt=e[5],qt=e[6],Xt=e[7],nr=e[8],mr=e[9],sr=e[10],Yt=e[11],zt=e[12],Cr=e[13],Ir=e[14],$r=e[15];return Math.abs(r-He)<=ye*Math.max(1,Math.abs(r),Math.abs(He))&&Math.abs(h-me)<=ye*Math.max(1,Math.abs(h),Math.abs(me))&&Math.abs(d-Ie)<=ye*Math.max(1,Math.abs(d),Math.abs(Ie))&&Math.abs(_-rt)<=ye*Math.max(1,Math.abs(_),Math.abs(rt))&&Math.abs(x-ct)<=ye*Math.max(1,Math.abs(x),Math.abs(ct))&&Math.abs(C-Lt)<=ye*Math.max(1,Math.abs(C),Math.abs(Lt))&&Math.abs(T-qt)<=ye*Math.max(1,Math.abs(T),Math.abs(qt))&&Math.abs(P-Xt)<=ye*Math.max(1,Math.abs(P),Math.abs(Xt))&&Math.abs(Q-nr)<=ye*Math.max(1,Math.abs(Q),Math.abs(nr))&&Math.abs(k-mr)<=ye*Math.max(1,Math.abs(k),Math.abs(mr))&&Math.abs(K-sr)<=ye*Math.max(1,Math.abs(K),Math.abs(sr))&&Math.abs(X-Yt)<=ye*Math.max(1,Math.abs(X),Math.abs(Yt))&&Math.abs(re-zt)<=ye*Math.max(1,Math.abs(re),Math.abs(zt))&&Math.abs(ae-Cr)<=ye*Math.max(1,Math.abs(ae),Math.abs(Cr))&&Math.abs(ue-Ir)<=ye*Math.max(1,Math.abs(ue),Math.abs(Ir))&&Math.abs(ve-$r)<=ye*Math.max(1,Math.abs(ve),Math.abs($r))},v.cl=function(a,e){return a[0]=e[0],a[1]=e[1],a[2]=e[2],a[3]=e[3],a[4]=e[4],a[5]=e[5],a[6]=e[6],a[7]=e[7],a[8]=e[8],a[9]=e[9],a[10]=e[10],a[11]=e[11],a[12]=e[12],a[13]=e[13],a[14]=e[14],a[15]=e[15],a},v.cm=a=>a.type==="symbol",v.cn=a=>a.type==="circle",v.co=a=>a.type==="heatmap",v.cp=a=>a.type==="line",v.cq=a=>a.type==="fill",v.cr=a=>a.type==="fill-extrusion",v.cs=a=>a.type==="hillshade",v.ct=a=>a.type==="color-relief",v.cu=a=>a.type==="background",v.cv=a=>a.type==="custom",v.cw=Ue,v.cx=function(a,e,r){if(e<=0)return a;const h=1/e;return r===void 0||Math.abs(r)<1e-10?Math.round(a*h)/h:(r>0?Math.ceil(a*h-1e-9):Math.floor(a*h+1e-10))/h},v.cy=function(a,e,r){const h=st(e.x-r.x,e.y-r.y),d=st(a.x-r.x,a.y-r.y);var _,x;return Cn(Math.atan2(h[0]*d[1]-h[1]*d[0],(_=h)[0]*(x=d)[0]+_[1]*x[1]))},v.cz=Ge,v.d=At,v.d0=function(a,e,r,h,d){return A(this,void 0,void 0,(function*(){if(le())try{return yield Zr(a,e,r,h,d)}catch{}return(function(_,x,C,T,P){const Q=_.width,k=_.height;Sr&&Vr||(Sr=new OffscreenCanvas(Q,k),Vr=Sr.getContext("2d",{willReadFrequently:!0})),Sr.width=Q,Sr.height=k,Vr.drawImage(_,0,0,Q,k);const K=Vr.getImageData(x,C,T,P);return Vr.clearRect(0,0,Q,k),K.data})(a,e,r,h,d)}))},v.d1=Im,v.d2=I,v.d3=class{constructor(a,e){this.layers={[Rf]:this},this.name=Rf,this.version=e?e.version:1,this.extent=e?e.extent:4096,this.length=a.length,this.features=a}feature(a){return new Hp(this.features[a],this.extent)}},v.d4=Jl,v.d5=Vn,v.e=Pt,v.f=a=>A(void 0,void 0,void 0,(function*(){if(a.byteLength===0)return createImageBitmap(new ImageData(1,1));const e=new Blob([new Uint8Array(a)],{type:"image/png"});try{return createImageBitmap(e)}catch(r){throw new Error(`Could not load image because of ${r.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),v.g=ee,v.h=a=>new Promise(((e,r)=>{const h=new Image;h.onload=()=>{e(h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame((()=>{h.src=lr}))},h.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const d=new Blob([new Uint8Array(a)],{type:"image/png"});h.src=a.byteLength?URL.createObjectURL(d):lr})),v.i=_r,v.j=(a,e)=>Xe(Pt(a,{type:"json"}),e),v.k=jt,v.l=dt,v.m=Xe,v.n=(a,e)=>Xe(Pt(a,{type:"arrayBuffer"}),e),v.o=function(a){return new _p(a).readFields(k0,[])},v.p=bp,v.q=function(a){return/[\u02EA\u02EB\u1100-\u11FF\u2E80-\u2FDF\u3000-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(a))},v.r=Ad,v.s=Gr,v.t=ei,v.u=Qe,v.v=fe,v.w=xr,v.x=ma,v.y=ge,v.z=Bi})),m("worker",["./shared"],(function(v){class A{constructor(ee,ne){this.keyCache={},ee&&this.replace(ee,ne)}replace(ee,ne){this._layerConfigs={},this._layers={},this.update(ee,[],ne)}update(ee,ne,Ae){for(const Xe of ee){this._layerConfigs[Xe.id]=Xe;const At=this._layers[Xe.id]=v.bT(Xe,Ae);At._featureFilter=v.aj(At.filter,Ae),this.keyCache[Xe.id]&&delete this.keyCache[Xe.id]}for(const Xe of ne)delete this.keyCache[Xe],delete this._layerConfigs[Xe],delete this._layers[Xe];this.familiesBySource={};const De=v.cM(Object.values(this._layerConfigs),this.keyCache);for(const Xe of De){const At=Xe.map((Qe=>this._layers[Qe.id])),bt=At[0];if(bt.isHidden())continue;const it=bt.source||"";let dt=this.familiesBySource[it];dt||(dt=this.familiesBySource[it]={});const jt=bt.sourceLayer||v.ai;let Bt=dt[jt];Bt||(Bt=dt[jt]=[]),Bt.push(At)}}}class S{constructor(ee){const ne={},Ae=[];for(const bt in ee){const it=ee[bt],dt=ne[bt]={};for(const jt in it){const Bt=it[+jt];if(!Bt||Bt.bitmap.width===0||Bt.bitmap.height===0)continue;const Qe={x:0,y:0,w:Bt.bitmap.width+2,h:Bt.bitmap.height+2};Ae.push(Qe),dt[jt]={rect:Qe,metrics:Bt.metrics}}}const{w:De,h:Xe}=v.p(Ae),At=new v.r({width:De||1,height:Xe||1});for(const bt in ee){const it=ee[bt];for(const dt in it){const jt=it[+dt];if(!jt||jt.bitmap.width===0||jt.bitmap.height===0)continue;const Bt=ne[bt][dt].rect;v.r.copy(jt.bitmap,At,{x:0,y:0},{x:Bt.x+1,y:Bt.y+1},jt.bitmap)}}this.image=At,this.positions=ne}}v.cN("GlyphAtlas",S);class I{constructor(ee){this.tileID=new v.a2(ee.tileID.overscaledZ,ee.tileID.wrap,ee.tileID.canonical.z,ee.tileID.canonical.x,ee.tileID.canonical.y),this.uid=ee.uid,this.zoom=ee.zoom,this.pixelRatio=ee.pixelRatio,this.tileSize=ee.tileSize,this.source=ee.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ee.showCollisionBoxes,this.collectResourceTiming=!!ee.collectResourceTiming,this.returnDependencies=!!ee.returnDependencies,this.promoteId=ee.promoteId,this.inFlightDependencies=[]}parse(ee,ne,Ae,De,Xe){return v._(this,void 0,void 0,(function*(){this.status="parsing",this.data=ee,this.collisionBoxArray=new v.ag;const At=new v.cO(Object.keys(ee.layers).sort()),bt=new v.cP(this.tileID,this.promoteId);bt.bucketLayerIDs=[];const it={},dt={featureIndex:bt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:Ae,subdivisionGranularity:Xe},jt=ne.familiesBySource[this.source];for(const fn in jt){const li=ee.layers[fn];if(!li)continue;li.version===1&&v.w(`Vector tile source "${this.source}" layer "${fn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const xa=At.encode(fn),Wn=[];for(let Jt=0;Jt<li.length;Jt++){const kr=li.feature(Jt),qr=bt.getId(kr,fn);Wn.push({feature:kr,id:qr,index:Jt,sourceLayerIndex:xa})}for(const Jt of jt[fn]){const kr=Jt[0];kr.source!==this.source&&v.w(`layer.source = ${kr.source} does not equal this.source = ${this.source}`),kr.isHidden(this.zoom,!0)||(D(Jt,this.zoom,Ae),(it[kr.id]=kr.createBucket({index:bt.bucketLayerIDs.length,layers:Jt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:xa,sourceID:this.source})).populate(Wn,dt,this.tileID.canonical),bt.bucketLayerIDs.push(Jt.map((qr=>qr.id))))}}const Bt=v.bY(dt.glyphDependencies,(fn=>Object.keys(fn).map(Number)));this.inFlightDependencies.forEach((fn=>fn?.abort())),this.inFlightDependencies=[];let Qe=Promise.resolve({});if(Object.keys(Bt).length){const fn=new AbortController;this.inFlightDependencies.push(fn),Qe=De.sendAsync({type:"GG",data:{stacks:Bt,source:this.source,tileID:this.tileID,type:"glyphs"}},fn)}const ur=Object.keys(dt.iconDependencies);let Xr=Promise.resolve({});if(ur.length){const fn=new AbortController;this.inFlightDependencies.push(fn),Xr=De.sendAsync({type:"GI",data:{icons:ur,source:this.source,tileID:this.tileID,type:"icons"}},fn)}const Er=Object.keys(dt.patternDependencies);let zr=Promise.resolve({});if(Er.length){const fn=new AbortController;this.inFlightDependencies.push(fn),zr=De.sendAsync({type:"GI",data:{icons:Er,source:this.source,tileID:this.tileID,type:"patterns"}},fn)}const Pr=dt.dashDependencies;let dr=Promise.resolve({});if(Object.keys(Pr).length){const fn=new AbortController;this.inFlightDependencies.push(fn),dr=De.sendAsync({type:"GDA",data:{dashes:Pr}},fn)}const[mi,Kn,Jn,wi]=yield Promise.all([Qe,Xr,zr,dr]),xn=new S(mi),Wt=new v.cQ(Kn,Jn);for(const fn in it){const li=it[fn];li instanceof v.ah?(D(li.layers,this.zoom,Ae),v.cR({bucket:li,glyphMap:mi,glyphPositions:xn.positions,imageMap:Kn,imagePositions:Wt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:dt.subdivisionGranularity})):li.hasDependencies&&(li instanceof v.cS||li instanceof v.cT||li instanceof v.cU)&&(D(li.layers,this.zoom,Ae),li.addFeatures(dt,this.tileID.canonical,Wt.patternPositions,wi))}return this.status="done",{buckets:Object.values(it).filter((fn=>!fn.isEmpty())),featureIndex:bt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:xn.image,imageAtlas:Wt,dashPositions:wi,glyphMap:this.returnDependencies?mi:null,iconMap:this.returnDependencies?Kn:null,glyphPositions:this.returnDependencies?xn.positions:null}}))}}function D(Je,ee,ne){const Ae=new v.H(ee);for(const De of Je)De.recalculate(Ae,ne)}class z{constructor(){this.loading={},this.loaded={},this.parsing={}}startLoading(ee,ne){this.loading[ee]=ne}finishLoading(ee){delete this.loading[ee]}abort(ee){const ne=this.loading[ee];ne?.abort&&(ne.abort.abort(),delete this.loading[ee])}setParsing(ee,ne){this.parsing[ee]=ne}consumeParsing(ee){const ne=this.parsing[ee];if(ne)return delete this.parsing[ee],ne}clearParsing(ee){delete this.parsing[ee]}markLoaded(ee,ne){this.loaded[ee]=ne}getLoaded(ee){const ne=this.loaded[ee];if(ne)return ne}removeLoaded(ee){delete this.loaded[ee]}clearLoaded(){this.loaded={}}}class Z{constructor(ee,ne,Ae,De,Xe){this.type=ee,this.properties=Ae||{},this.extent=Xe,this.pointsArray=ne,this.id=De}loadGeometry(){return this.pointsArray.map((ee=>ee.map((ne=>new v.P(ne.x,ne.y)))))}}class O{constructor(ee,ne,Ae){this.version=2,this._myFeatures=ee,this.name=ne,this.length=ee.length,this.extent=Ae}feature(ee){return this._myFeatures[ee]}}class ce{constructor(){this.layers={}}addLayer(ee){this.layers[ee.name]=ee}}function ie(Je){let ee=v.cV(Je);return ee.byteOffset===0&&ee.byteLength===ee.buffer.byteLength||(ee=new Uint8Array(ee)),{vectorTile:Je,rawData:ee.buffer}}function W(Je,ee,ne){const{extent:Ae}=Je,De=Math.pow(2,ne.z-ee.z),Xe=(ne.x-ee.x*De)*Ae,At=(ne.y-ee.y*De)*Ae,bt=[];for(let it=0;it<Je.length;it++){const dt=Je.feature(it);let jt=dt.loadGeometry();for(const Qe of jt)for(const ur of Qe)ur.x=ur.x*De-Xe,ur.y=ur.y*De-At;const Bt=128;jt=v.cW(jt,dt.type,-Bt,-Bt,Ae+Bt,Ae+Bt),jt.length!==0&&bt.push(new Z(dt.type,jt,dt.properties,dt.id,Ae))}return new O(bt,Je.name,Ae)}class le{constructor(ee,ne,Ae){this.actor=ee,this.layerIndex=ne,this.availableImages=Ae,this.tileState=new z,this.overzoomedTileResultCache=new v.cX(1e3)}loadVectorTile(ee,ne){return v._(this,void 0,void 0,(function*(){const Ae=yield v.n(ee.request,ne);try{return{vectorTile:ee.encoding!=="mlt"?new v.cY(new v.cZ(Ae.data)):new v.c_(Ae.data),rawData:Ae.data,cacheControl:Ae.cacheControl,expires:Ae.expires}}catch(De){const Xe=new Uint8Array(Ae.data);let At=`Unable to parse the tile at ${ee.request.url}, `;throw At+=Xe[0]===31&&Xe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${De.message}`,new Error(At)}}))}loadTile(ee){return v._(this,void 0,void 0,(function*(){const{uid:ne,overzoomParameters:Ae}=ee;Ae&&(ee.request=Ae.overzoomRequest);const De=this._startRequestTiming(ee),Xe=new I(ee);this.tileState.startLoading(ne,Xe);const At=new AbortController;Xe.abort=At;try{const bt=yield this.loadVectorTile(ee,At);if(this.tileState.finishLoading(ne),!bt)return null;let{vectorTile:it,rawData:dt}=bt;Ae&&({vectorTile:it,rawData:dt}=this._getOverzoomTile(ee,bt.vectorTile));const jt=this._getExpiryData(bt),Bt=this._finishRequestTiming(De);Xe.vectorTile=it,this.tileState.markLoaded(ne,Xe);const Qe={rawData:dt,cacheControl:jt,resourceTiming:Bt};this.tileState.setParsing(ne,Qe);try{return yield this._parseWorkerTile(Xe,ee,Qe)}finally{this.tileState.clearParsing(ne)}}catch(bt){throw this.tileState.finishLoading(ne),Xe.status="done",this.tileState.markLoaded(ne,Xe),bt}}))}_parseWorkerTile(ee,ne,Ae){return v._(this,void 0,void 0,(function*(){let De=yield ee.parse(ee.vectorTile,this.layerIndex,this.availableImages,this.actor,ne.subdivisionGranularity);if(Ae){const{rawData:Xe,cacheControl:At,resourceTiming:bt}=Ae;De=v.e({rawTileData:Xe.slice(0),encoding:ne.encoding},De,At,bt)}return De}))}_getExpiryData(ee){const{expires:ne,cacheControl:Ae}=ee,De={};return ne&&(De.expires=ne),Ae&&(De.cacheControl=Ae),De}_startRequestTiming(ee){var ne;if(!((ne=ee.request)===null||ne===void 0)&&ne.collectResourceTiming)return new v.c$(ee.request.url)}_finishRequestTiming(ee){const ne=ee?.finish();return ne?{resourceTiming:JSON.parse(JSON.stringify(ne))}:{}}_getOverzoomTile(ee,ne){const{tileID:Ae,source:De,overzoomParameters:Xe}=ee,{maxZoomTileID:At}=Xe,bt=`${At.key}_${Ae.key}`,it=this.overzoomedTileResultCache.get(bt);if(it)return it;const dt=new ce,jt=this.layerIndex.familiesBySource[De];for(const Qe in jt){const ur=ne.layers[Qe];if(!ur)continue;const Xr=W(ur,At,Ae.canonical);Xr.length>0&&dt.addLayer(Xr)}const Bt=ie(dt);return this.overzoomedTileResultCache.set(bt,Bt),Bt}reloadTile(ee){return v._(this,void 0,void 0,(function*(){const ne=ee.uid,Ae=this.tileState.getLoaded(ne);if(!Ae)throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");if(Ae.showCollisionBoxes=ee.showCollisionBoxes,Ae.status==="parsing"){const De=this.tileState.consumeParsing(ne);return yield this._parseWorkerTile(Ae,ee,De)}if(Ae.status==="done"&&Ae.vectorTile)return yield this._parseWorkerTile(Ae,ee)}))}abortTile(ee){return v._(this,void 0,void 0,(function*(){this.tileState.abort(ee.uid)}))}removeTile(ee){return v._(this,void 0,void 0,(function*(){this.tileState.removeLoaded(ee.uid)}))}}class ye{constructor(){this.loaded={}}loadTile(ee){return v._(this,void 0,void 0,(function*(){const{uid:ne,encoding:Ae,rawImageData:De,redFactor:Xe,greenFactor:At,blueFactor:bt,baseShift:it}=ee,dt=De.width+2,jt=De.height+2,Bt=v.b(De)?new v.R({width:dt,height:jt},yield v.d0(De,-1,-1,dt,jt)):De,Qe=new v.d1(ne,Bt,Ae,Xe,At,bt,it);return this.loaded=this.loaded||{},this.loaded[ne]=Qe,Qe}))}removeTile(ee){const ne=this.loaded,Ae=ee.uid;ne&&ne[Ae]&&delete ne[Ae]}}var Be,Le,lt=(function(){if(Le)return Be;function Je(ne,Ae){if(ne.length!==0){ee(ne[0],Ae);for(var De=1;De<ne.length;De++)ee(ne[De],!Ae)}}function ee(ne,Ae){for(var De=0,Xe=0,At=0,bt=ne.length,it=bt-1;At<bt;it=At++){var dt=(ne[At][0]-ne[it][0])*(ne[it][1]+ne[At][1]),jt=De+dt;Xe+=Math.abs(De)>=Math.abs(dt)?De-jt+dt:dt-jt+De,De=jt}De+Xe>=0!=!!Ae&&ne.reverse()}return Le=1,Be=function ne(Ae,De){var Xe,At=Ae&&Ae.type;if(At==="FeatureCollection")for(Xe=0;Xe<Ae.features.length;Xe++)ne(Ae.features[Xe],De);else if(At==="GeometryCollection")for(Xe=0;Xe<Ae.geometries.length;Xe++)ne(Ae.geometries[Xe],De);else if(At==="Feature")ne(Ae.geometry,De);else if(At==="Polygon")Je(Ae.coordinates,De);else if(At==="MultiPolygon")for(Xe=0;Xe<Ae.coordinates.length;Xe++)Je(Ae.coordinates[Xe],De);return Ae}})(),ft=v.d2(lt);const ut={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Je=>Je},Ne=Math.fround||(Ce=new Float32Array(1),Je=>(Ce[0]=+Je,Ce[0]));var Ce;class _t{constructor(ee){this.options=Object.assign(Object.create(ut),ee),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ee){const{log:ne,minZoom:Ae,maxZoom:De}=this.options;ne&&console.time("total time");const Xe=`prepare ${ee.length} points`;ne&&console.time(Xe),this.points=ee;const At=[];for(let it=0;it<ee.length;it++){const dt=ee[it];if(!dt.geometry)continue;const[jt,Bt]=dt.geometry.coordinates,Qe=Ne(Ye(jt)),ur=Ne(Ve(Bt));At.push(Qe,ur,1/0,it,-1,1),this.options.reduce&&At.push(0)}let bt=this.trees[De+1]=this._createTree(At);ne&&console.timeEnd(Xe);for(let it=De;it>=Ae;it--){const dt=+Date.now();bt=this.trees[it]=this._createTree(this._cluster(bt,it)),ne&&console.log("z%d: %d clusters in %dms",it,bt.numItems,+Date.now()-dt)}return ne&&console.timeEnd("total time"),this}getClusters(ee,ne){let Ae=((ee[0]+180)%360+360)%360-180;const De=Math.max(-90,Math.min(90,ee[1]));let Xe=ee[2]===180?180:((ee[2]+180)%360+360)%360-180;const At=Math.max(-90,Math.min(90,ee[3]));if(ee[2]-ee[0]>=360)Ae=-180,Xe=180;else if(Ae>Xe){const Bt=this.getClusters([Ae,De,180,At],ne),Qe=this.getClusters([-180,De,Xe,At],ne);return Bt.concat(Qe)}const bt=this.trees[this._limitZoom(ne)],it=bt.range(Ye(Ae),Ve(At),Ye(Xe),Ve(De)),dt=bt.data,jt=[];for(const Bt of it){const Qe=this.stride*Bt;jt.push(dt[Qe+5]>1?_e(dt,Qe,this.clusterProps):this.points[dt[Qe+3]])}return jt}getChildren(ee){const ne=this._getOriginId(ee),Ae=this._getOriginZoom(ee),De="No cluster with the specified id.",Xe=this.trees[Ae];if(!Xe)throw new Error(De);const At=Xe.data;if(ne*this.stride>=At.length)throw new Error(De);const bt=this.options.radius/(this.options.extent*Math.pow(2,Ae-1)),it=Xe.within(At[ne*this.stride],At[ne*this.stride+1],bt),dt=[];for(const jt of it){const Bt=jt*this.stride;At[Bt+4]===ee&&dt.push(At[Bt+5]>1?_e(At,Bt,this.clusterProps):this.points[At[Bt+3]])}if(dt.length===0)throw new Error(De);return dt}getLeaves(ee,ne,Ae){const De=[];return this._appendLeaves(De,ee,ne=ne||10,Ae=Ae||0,0),De}getTile(ee,ne,Ae){const De=this.trees[this._limitZoom(ee)],Xe=Math.pow(2,ee),{extent:At,radius:bt}=this.options,it=bt/At,dt=(Ae-it)/Xe,jt=(Ae+1+it)/Xe,Bt={features:[]};return this._addTileFeatures(De.range((ne-it)/Xe,dt,(ne+1+it)/Xe,jt),De.data,ne,Ae,Xe,Bt),ne===0&&this._addTileFeatures(De.range(1-it/Xe,dt,1,jt),De.data,Xe,Ae,Xe,Bt),ne===Xe-1&&this._addTileFeatures(De.range(0,dt,it/Xe,jt),De.data,-1,Ae,Xe,Bt),Bt.features.length?Bt:null}getClusterExpansionZoom(ee){let ne=this._getOriginZoom(ee)-1;for(;ne<=this.options.maxZoom;){const Ae=this.getChildren(ee);if(ne++,Ae.length!==1)break;ee=Ae[0].properties.cluster_id}return ne}_appendLeaves(ee,ne,Ae,De,Xe){const At=this.getChildren(ne);for(const bt of At){const it=bt.properties;if(it&&it.cluster?Xe+it.point_count<=De?Xe+=it.point_count:Xe=this._appendLeaves(ee,it.cluster_id,Ae,De,Xe):Xe<De?Xe++:ee.push(bt),ee.length===Ae)break}return Xe}_createTree(ee){const ne=new v.aT(ee.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Ae=0;Ae<ee.length;Ae+=this.stride)ne.add(ee[Ae],ee[Ae+1]);return ne.finish(),ne.data=ee,ne}_addTileFeatures(ee,ne,Ae,De,Xe,At){for(const bt of ee){const it=bt*this.stride,dt=ne[it+5]>1;let jt,Bt,Qe;if(dt)jt=Te(ne,it,this.clusterProps),Bt=ne[it],Qe=ne[it+1];else{const Er=this.points[ne[it+3]];jt=Er.properties;const[zr,Pr]=Er.geometry.coordinates;Bt=Ye(zr),Qe=Ve(Pr)}const ur={type:1,geometry:[[Math.round(this.options.extent*(Bt*Xe-Ae)),Math.round(this.options.extent*(Qe*Xe-De))]],tags:jt};let Xr;Xr=dt||this.options.generateId?ne[it+3]:this.points[ne[it+3]].id,Xr!==void 0&&(ur.id=Xr),At.features.push(ur)}}_limitZoom(ee){return Math.max(this.options.minZoom,Math.min(Math.floor(+ee),this.options.maxZoom+1))}_cluster(ee,ne){const{radius:Ae,extent:De,reduce:Xe,minPoints:At}=this.options,bt=Ae/(De*Math.pow(2,ne)),it=ee.data,dt=[],jt=this.stride;for(let Bt=0;Bt<it.length;Bt+=jt){if(it[Bt+2]<=ne)continue;it[Bt+2]=ne;const Qe=it[Bt],ur=it[Bt+1],Xr=ee.within(it[Bt],it[Bt+1],bt),Er=it[Bt+5];let zr=Er;for(const Pr of Xr){const dr=Pr*jt;it[dr+2]>ne&&(zr+=it[dr+5])}if(zr>Er&&zr>=At){let Pr,dr=Qe*Er,mi=ur*Er,Kn=-1;const Jn=(Bt/jt<<5)+(ne+1)+this.points.length;for(const wi of Xr){const xn=wi*jt;if(it[xn+2]<=ne)continue;it[xn+2]=ne;const Wt=it[xn+5];dr+=it[xn]*Wt,mi+=it[xn+1]*Wt,it[xn+4]=Jn,Xe&&(Pr||(Pr=this._map(it,Bt,!0),Kn=this.clusterProps.length,this.clusterProps.push(Pr)),Xe(Pr,this._map(it,xn)))}it[Bt+4]=Jn,dt.push(dr/zr,mi/zr,1/0,Jn,-1,zr),Xe&&dt.push(Kn)}else{for(let Pr=0;Pr<jt;Pr++)dt.push(it[Bt+Pr]);if(zr>1)for(const Pr of Xr){const dr=Pr*jt;if(!(it[dr+2]<=ne)){it[dr+2]=ne;for(let mi=0;mi<jt;mi++)dt.push(it[dr+mi])}}}}return dt}_getOriginId(ee){return ee-this.points.length>>5}_getOriginZoom(ee){return(ee-this.points.length)%32}_map(ee,ne,Ae){if(ee[ne+5]>1){const At=this.clusterProps[ee[ne+6]];return Ae?Object.assign({},At):At}const De=this.points[ee[ne+3]].properties,Xe=this.options.map(De);return Ae&&Xe===De?Object.assign({},Xe):Xe}}function _e(Je,ee,ne){return{type:"Feature",id:Je[ee+3],properties:Te(Je,ee,ne),geometry:{type:"Point",coordinates:[(Ae=Je[ee],360*(Ae-.5)),wt(Je[ee+1])]}};var Ae}function Te(Je,ee,ne){const Ae=Je[ee+5],De=Ae>=1e4?`${Math.round(Ae/1e3)}k`:Ae>=1e3?Math.round(Ae/100)/10+"k":Ae,Xe=Je[ee+6],At=Xe===-1?{}:Object.assign({},ne[Xe]);return Object.assign(At,{cluster:!0,cluster_id:Je[ee+3],point_count:Ae,point_count_abbreviated:De})}function Ye(Je){return Je/360+.5}function Ve(Je){const ee=Math.sin(Je*Math.PI/180),ne=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return ne<0?0:ne>1?1:ne}function wt(Je){const ee=(180-360*Je)*Math.PI/180;return 360*Math.atan(Math.exp(ee))/Math.PI-90}function ke(Je,ee,ne,Ae){let De=Ae;const Xe=ee+(ne-ee>>1);let At,bt=ne-ee;const it=Je[ee],dt=Je[ee+1],jt=Je[ne],Bt=Je[ne+1];for(let Qe=ee+3;Qe<ne;Qe+=3){const ur=ot(Je[Qe],Je[Qe+1],it,dt,jt,Bt);if(ur>De)At=Qe,De=ur;else if(ur===De){const Xr=Math.abs(Qe-Xe);Xr<bt&&(At=Qe,bt=Xr)}}De>Ae&&(At-ee>3&&ke(Je,ee,At,Ae),Je[At+2]=De,ne-At>3&&ke(Je,At,ne,Ae))}function ot(Je,ee,ne,Ae,De,Xe){let At=De-ne,bt=Xe-Ae;if(At!==0||bt!==0){const it=((Je-ne)*At+(ee-Ae)*bt)/(At*At+bt*bt);it>1?(ne=De,Ae=Xe):it>0&&(ne+=At*it,Ae+=bt*it)}return At=Je-ne,bt=ee-Ae,At*At+bt*bt}function st(Je,ee,ne,Ae){const De={type:ee,geom:ne},Xe={id:Je??null,type:De.type,geometry:De.geom,tags:Ae,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};switch(De.type){case"Point":case"MultiPoint":case"LineString":xt(Xe,De.geom);break;case"Polygon":xt(Xe,De.geom[0]);break;case"MultiLineString":for(const At of De.geom)xt(Xe,At);break;case"MultiPolygon":for(const At of De.geom)xt(Xe,At[0])}return Xe}function xt(Je,ee){for(let ne=0;ne<ee.length;ne+=3)Je.minX=Math.min(Je.minX,ee[ne]),Je.minY=Math.min(Je.minY,ee[ne+1]),Je.maxX=Math.max(Je.maxX,ee[ne]),Je.maxY=Math.max(Je.maxY,ee[ne+1])}function Ct(Je,ee){const ne=[];switch(Je.type){case"FeatureCollection":for(let Ae=0;Ae<Je.features.length;Ae++)Fe(ne,Je.features[Ae],ee,Ae);break;case"Feature":Fe(ne,Je,ee);break;default:Fe(ne,{geometry:Je,properties:void 0},ee)}return ne}function Fe(Je,ee,ne,Ae){if(!ee.geometry)return;if(ee.geometry.type==="GeometryCollection"){for(const bt of ee.geometry.geometries)Fe(Je,{id:ee.id,geometry:bt,properties:ee.properties},ne,Ae);return}if(!ee.geometry.coordinates?.length)return;const Xe=Math.pow(ne.tolerance/((1<<ne.maxZoom)*ne.extent),2);let At=ee.id;switch(ne.promoteId?At=ee.properties?.[ne.promoteId]:ne.generateId&&(At=Ae||0),ee.geometry.type){case"Point":{const bt=[];return oe(ee.geometry.coordinates,bt),void Je.push(st(At,ee.geometry.type,bt,ee.properties))}case"MultiPoint":{const bt=[];for(const it of ee.geometry.coordinates)oe(it,bt);return void Je.push(st(At,ee.geometry.type,bt,ee.properties))}case"LineString":{const bt=[];return xe(ee.geometry.coordinates,bt,Xe,!1),void Je.push(st(At,ee.geometry.type,bt,ee.properties))}case"MultiLineString":{if(ne.lineMetrics){for(const it of ee.geometry.coordinates){const dt=[];xe(it,dt,Xe,!1),Je.push(st(At,"LineString",dt,ee.properties))}return}const bt=[];return Ue(ee.geometry.coordinates,bt,Xe,!1),void Je.push(st(At,ee.geometry.type,bt,ee.properties))}case"Polygon":{const bt=[];return Ue(ee.geometry.coordinates,bt,Xe,!0),void Je.push(st(At,ee.geometry.type,bt,ee.properties))}case"MultiPolygon":{const bt=[];for(const it of ee.geometry.coordinates){const dt=[];Ue(it,dt,Xe,!0),bt.push(dt)}return void Je.push(st(At,ee.geometry.type,bt,ee.properties))}default:throw new Error("Input data is not a valid GeoJSON object.")}}function oe(Je,ee){ee.push(Ge(Je[0]),tt(Je[1]),0)}function xe(Je,ee,ne,Ae){let De,Xe,At=0;for(let it=0;it<Je.length;it++){const dt=Ge(Je[it][0]),jt=tt(Je[it][1]);ee.push(dt,jt,0),it>0&&(At+=Ae?(De*jt-dt*Xe)/2:Math.sqrt(Math.pow(dt-De,2)+Math.pow(jt-Xe,2))),De=dt,Xe=jt}const bt=ee.length-3;ee[2]=1,ne>0&&ke(ee,0,bt,ne),ee[bt+2]=1,ee.size=Math.abs(At),ee.start=0,ee.end=ee.size}function Ue(Je,ee,ne,Ae){for(let De=0;De<Je.length;De++){const Xe=[];xe(Je[De],Xe,ne,Ae),ee.push(Xe)}}function Ge(Je){return Je/360+.5}function tt(Je){const ee=Math.sin(Je*Math.PI/180),ne=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return ne<0?0:ne>1?1:ne}function mt(Je,ee,ne,Ae,De,Xe,At,bt){if(Ae/=ee,Xe>=(ne/=ee)&&At<Ae)return Je;if(At<ne||Xe>=Ae)return null;const it=[];for(const dt of Je){const jt=De===0?dt.minX:dt.minY,Bt=De===0?dt.maxX:dt.maxY;if(jt>=ne&&Bt<Ae)it.push(dt);else if(!(Bt<ne||jt>=Ae))switch(dt.type){case"Point":case"MultiPoint":{const Qe=[];if(Pt(dt.geometry,Qe,ne,Ae,De),!Qe.length)continue;it.push(st(dt.id,Qe.length===3?"Point":"MultiPoint",Qe,dt.tags));continue}case"LineString":{const Qe=[];if(Et(dt.geometry,Qe,ne,Ae,De,!1,bt.lineMetrics),!Qe.length)continue;if(bt.lineMetrics){for(const ur of Qe)it.push(st(dt.id,dt.type,ur,dt.tags));continue}if(Qe.length>1){it.push(st(dt.id,"MultiLineString",Qe,dt.tags));continue}it.push(st(dt.id,dt.type,Qe[0],dt.tags));continue}case"MultiLineString":{const Qe=[];if(Ar(dt.geometry,Qe,ne,Ae,De,!1),!Qe.length)continue;if(Qe.length===1){it.push(st(dt.id,"LineString",Qe[0],dt.tags));continue}it.push(st(dt.id,dt.type,Qe,dt.tags));continue}case"Polygon":{const Qe=[];if(Ar(dt.geometry,Qe,ne,Ae,De,!0),!Qe.length)continue;it.push(st(dt.id,dt.type,Qe,dt.tags));continue}case"MultiPolygon":{const Qe=[];for(const ur of dt.geometry){const Xr=[];Ar(ur,Xr,ne,Ae,De,!0),Xr.length&&Qe.push(Xr)}if(!Qe.length)continue;it.push(st(dt.id,dt.type,Qe,dt.tags));continue}}}return it.length?it:null}function Pt(Je,ee,ne,Ae,De){for(let Xe=0;Xe<Je.length;Xe+=3){const At=Je[Xe+De];At>=ne&&At<=Ae&&pr(ee,Je[Xe],Je[Xe+1],Je[Xe+2])}}function Et(Je,ee,ne,Ae,De,Xe,At){let bt=$t(Je);const it=De===0?br:xr;let dt,jt,Bt=Je.start;for(let zr=0;zr<Je.length-3;zr+=3){const Pr=Je[zr],dr=Je[zr+1],mi=Je[zr+2],Kn=Je[zr+3],Jn=Je[zr+4],wi=De===0?Pr:dr,xn=De===0?Kn:Jn;let Wt=!1;At&&(dt=Math.sqrt(Math.pow(Pr-Kn,2)+Math.pow(dr-Jn,2))),wi<ne?xn>ne&&(jt=it(bt,Pr,dr,Kn,Jn,ne),At&&(bt.start=Bt+dt*jt)):wi>Ae?xn<Ae&&(jt=it(bt,Pr,dr,Kn,Jn,Ae),At&&(bt.start=Bt+dt*jt)):pr(bt,Pr,dr,mi),xn<ne&&wi>=ne&&(jt=it(bt,Pr,dr,Kn,Jn,ne),Wt=!0),xn>Ae&&wi<=Ae&&(jt=it(bt,Pr,dr,Kn,Jn,Ae),Wt=!0),!Xe&&Wt&&(At&&(bt.end=Bt+dt*jt),ee.push(bt),bt=$t(Je)),At&&(Bt+=dt)}let Qe=Je.length-3;const ur=Je[Qe],Xr=Je[Qe+1],Er=De===0?ur:Xr;Er>=ne&&Er<=Ae&&pr(bt,ur,Xr,Je[Qe+2]),Qe=bt.length-3,Xe&&Qe>=3&&(bt[Qe]!==bt[0]||bt[Qe+1]!==bt[1])&&pr(bt,bt[0],bt[1],bt[2]),bt.length&&ee.push(bt)}function $t(Je){const ee=[];return ee.size=Je.size,ee.start=Je.start,ee.end=Je.end,ee}function Ar(Je,ee,ne,Ae,De,Xe){for(const At of Je)Et(At,ee,ne,Ae,De,Xe,!1)}function pr(Je,ee,ne,Ae){Je.push(ee,ne,Ae)}function br(Je,ee,ne,Ae,De,Xe){const At=(Xe-ee)/(Ae-ee);return pr(Je,Xe,ne+(De-ne)*At,1),At}function xr(Je,ee,ne,Ae,De,Xe){const At=(Xe-ne)/(De-ne);return pr(Je,ee+(Ae-ee)*At,Xe,1),At}function Re(Je,ee){const ne=ee.buffer/ee.extent;let Ae=Je;const De=mt(Je,1,-1-ne,ne,0,-1,2,ee),Xe=mt(Je,1,1-ne,2+ne,0,-1,2,ee);return(De||Xe)&&(Ae=mt(Je,1,-ne,1+ne,0,-1,2,ee)||[],De&&(Ae=_r(De,1).concat(Ae)),Xe&&(Ae=Ae.concat(_r(Xe,-1)))),Ae}function _r(Je,ee){const ne=[];for(const Ae of Je)switch(Ae.type){case"Point":case"MultiPoint":case"LineString":{const De=Qr(Ae.geometry,ee);ne.push(st(Ae.id,Ae.type,De,Ae.tags));continue}case"MultiLineString":case"Polygon":{const De=[];for(const Xe of Ae.geometry)De.push(Qr(Xe,ee));ne.push(st(Ae.id,Ae.type,De,Ae.tags));continue}case"MultiPolygon":{const De=[];for(const Xe of Ae.geometry){const At=[];for(const bt of Xe)At.push(Qr(bt,ee));De.push(At)}ne.push(st(Ae.id,Ae.type,De,Ae.tags));continue}}return ne}function Qr(Je,ee){const ne=[];ne.size=Je.size,Je.start!==void 0&&(ne.start=Je.start,ne.end=Je.end);for(let Ae=0;Ae<Je.length;Ae+=3)ne.push(Je[Ae]+ee,Je[Ae+1],Je[Ae+2]);return ne}function Wr(Je,ee){if(Je.transformed)return Je;const ne=1<<Je.z,Ae=Je.x,De=Je.y;for(const Xe of Je.features){if(Xe.type===1){const bt=[];for(let it=0;it<Xe.geometry.length;it+=2)bt.push(lr(Xe.geometry[it],Xe.geometry[it+1],ee,ne,Ae,De));Xe.geometry=bt;continue}const At=[];for(const bt of Xe.geometry){const it=[];for(let dt=0;dt<bt.length;dt+=2)it.push(lr(bt[dt],bt[dt+1],ee,ne,Ae,De));At.push(it)}Xe.geometry=At}return Je.transformed=!0,Je}function lr(Je,ee,ne,Ae,De,Xe){return[Math.round(ne*(Je*Ae-De)),Math.round(ne*(ee*Ae-Xe))]}function Zr(Je,ee,ne,Ae,De){const Xe=ee===De.maxZoom?0:De.tolerance/((1<<ee)*De.extent),At={features:[],numPoints:0,numSimplified:0,numFeatures:Je.length,source:null,x:ne,y:Ae,z:ee,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const bt of Je)Sr(At,bt,Xe,De);return At}function Sr(Je,ee,ne,Ae){Je.minX=Math.min(Je.minX,ee.minX),Je.minY=Math.min(Je.minY,ee.minY),Je.maxX=Math.max(Je.maxX,ee.maxX),Je.maxY=Math.max(Je.maxY,ee.maxY);let De,Xe=ee.tags||null;switch(ee.type){case"Point":case"MultiPoint":{const At=[];for(let bt=0;bt<ee.geometry.length;bt+=3)At.push(ee.geometry[bt],ee.geometry[bt+1]),Je.numPoints++,Je.numSimplified++;if(!At.length)return;De={type:1,tags:Xe,geometry:At};break}case"LineString":{const At=[];if(Vr(At,ee.geometry,Je,ne,!1,!1),!At.length)return;if(Ae.lineMetrics){Xe={};for(const bt in ee.tags)Xe[bt]=ee.tags[bt];Xe.mapbox_clip_start=ee.geometry.start/ee.geometry.size,Xe.mapbox_clip_end=ee.geometry.end/ee.geometry.size}De={type:2,tags:Xe,geometry:At};break}case"MultiLineString":case"Polygon":{const At=[];for(let bt=0;bt<ee.geometry.length;bt++)Vr(At,ee.geometry[bt],Je,ne,ee.type==="Polygon",bt===0);if(!At.length)return;De={type:ee.type==="Polygon"?3:2,tags:Xe,geometry:At};break}case"MultiPolygon":{const At=[];for(let bt=0;bt<ee.geometry.length;bt++){const it=ee.geometry[bt];for(let dt=0;dt<it.length;dt++)Vr(At,it[dt],Je,ne,!0,dt===0)}if(!At.length)return;De={type:3,tags:Xe,geometry:At};break}}ee.id!==null&&(De.id=ee.id),Je.features.push(De)}function Vr(Je,ee,ne,Ae,De,Xe){const At=Ae*Ae;if(Ae>0&&ee.size<(De?At:Ae))return void(ne.numPoints+=ee.length/3);const bt=[];for(let it=0;it<ee.length;it+=3)(Ae===0||ee[it+2]>At)&&(ne.numSimplified++,bt.push(ee[it],ee[it+1])),ne.numPoints++;De&&(function(it,dt){let jt=0;for(let Bt=0,Qe=it.length,ur=Qe-2;Bt<Qe;ur=Bt,Bt+=2)jt+=(it[Bt]-it[ur])*(it[Bt+1]+it[ur+1]);if(jt>0===dt)for(let Bt=0,Qe=it.length;Bt<Qe/2;Bt+=2){const ur=it[Bt],Xr=it[Bt+1];it[Bt]=it[Qe-2-Bt],it[Bt+1]=it[Qe-1-Bt],it[Qe-2-Bt]=ur,it[Qe-1-Bt]=Xr}})(bt,Xe),Je.push(bt)}function Gr(Je,ee,ne){const Ae=!!ee.newGeometry,De=ee.removeAllProperties||ee.removeProperties?.length>0||ee.addOrUpdateProperties?.length>0;if(Ae){let Xe=Ct({type:"FeatureCollection",features:[{type:"Feature",id:Je.id,geometry:ee.newGeometry,properties:De?mn(Je.tags,ee):Je.tags}]},ne);return Xe=Re(Xe,ne),Xe[0]}if(De){const Xe={...Je};return Xe.tags=mn(Xe.tags,ee),Xe}return null}function mn(Je,ee){if(ee.removeAllProperties)return{};const ne={...Je||{}};if(ee.removeProperties)for(const Ae of ee.removeProperties)delete ne[Ae];if(ee.addOrUpdateProperties)for(const{key:Ae,value:De}of ee.addOrUpdateProperties)ne[Ae]=De;return ne}const Cn={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,updateable:!1,debug:0};class An{options;tiles;tileCoords;stats={};total=0;source;constructor(ee,ne){const Ae=(ne=this.options=Object.assign({},Cn,ne)).debug;if(Ae&&console.time("preprocess data"),ne.maxZoom<0||ne.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ne.promoteId&&ne.generateId)throw new Error("promoteId and generateId cannot be used together.");let De=Ct(ee,ne);this.tiles={},this.tileCoords=[],Ae&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ne.indexMaxZoom,ne.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),De=Re(De,ne),De.length&&this.splitTile(De,0,0,0),ne.updateable&&(this.source=De),Ae&&(De.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ee,ne,Ae,De,Xe,At,bt){const it=[ee,ne,Ae,De],dt=this.options,jt=dt.debug;for(;it.length;){De=it.pop(),Ae=it.pop(),ne=it.pop(),ee=it.pop();const Bt=1<<ne,Qe=Fn(ne,Ae,De);let ur=this.tiles[Qe];if(!ur&&(jt>1&&console.time("creation"),ur=this.tiles[Qe]=Zr(ee,ne,Ae,De,dt),this.tileCoords.push({z:ne,x:Ae,y:De,id:Qe}),jt)){jt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ne,Ae,De,ur.numFeatures,ur.numPoints,ur.numSimplified),console.timeEnd("creation"));const Wt=`z${ne}`;this.stats[Wt]=(this.stats[Wt]||0)+1,this.total++}if(ur.source=ee,Xe==null){if(ne===dt.indexMaxZoom||ur.numPoints<=dt.indexMaxPoints)continue}else{if(ne===dt.maxZoom||ne===Xe)continue;if(Xe!=null){const Wt=Xe-ne;if(Ae!==At>>Wt||De!==bt>>Wt)continue}}if(ur.source=null,!ee.length)continue;jt>1&&console.time("clipping");const Xr=.5*dt.buffer/dt.extent,Er=.5-Xr,zr=.5+Xr,Pr=1+Xr;let dr=null,mi=null,Kn=null,Jn=null;const wi=mt(ee,Bt,Ae-Xr,Ae+zr,0,ur.minX,ur.maxX,dt),xn=mt(ee,Bt,Ae+Er,Ae+Pr,0,ur.minX,ur.maxX,dt);wi&&(dr=mt(wi,Bt,De-Xr,De+zr,1,ur.minY,ur.maxY,dt),mi=mt(wi,Bt,De+Er,De+Pr,1,ur.minY,ur.maxY,dt)),xn&&(Kn=mt(xn,Bt,De-Xr,De+zr,1,ur.minY,ur.maxY,dt),Jn=mt(xn,Bt,De+Er,De+Pr,1,ur.minY,ur.maxY,dt)),jt>1&&console.timeEnd("clipping"),it.push(dr||[],ne+1,2*Ae,2*De),it.push(mi||[],ne+1,2*Ae,2*De+1),it.push(Kn||[],ne+1,2*Ae+1,2*De),it.push(Jn||[],ne+1,2*Ae+1,2*De+1)}}getTile(ee,ne,Ae){ee=+ee,ne=+ne,Ae=+Ae;const De=this.options,{extent:Xe,debug:At}=De;if(ee<0||ee>24)return null;const bt=1<<ee,it=Fn(ee,ne=ne+bt&bt-1,Ae);if(this.tiles[it])return Wr(this.tiles[it],Xe);At>1&&console.log("drilling down to z%d-%d-%d",ee,ne,Ae);let dt,jt=ee,Bt=ne,Qe=Ae;for(;!dt&&jt>0;)jt--,Bt>>=1,Qe>>=1,dt=this.tiles[Fn(jt,Bt,Qe)];return dt?.source?(At>1&&(console.log("found parent tile z%d-%d-%d",jt,Bt,Qe),console.time("drilling down")),this.splitTile(dt.source,jt,Bt,Qe,ee,ne,Ae),At>1&&console.timeEnd("drilling down"),this.tiles[it]?Wr(this.tiles[it],Xe):null):null}invalidateTiles(ee){const ne=this.options,{debug:Ae}=ne;let De=1/0,Xe=-1/0,At=1/0,bt=-1/0;for(const jt of ee)De=Math.min(De,jt.minX),Xe=Math.max(Xe,jt.maxX),At=Math.min(At,jt.minY),bt=Math.max(bt,jt.maxY);const it=ne.buffer/ne.extent,dt=new Set;for(const jt in this.tiles){const Bt=this.tiles[jt],Qe=1<<Bt.z,ur=(Bt.x-it)/Qe,Xr=(Bt.x+1+it)/Qe,Er=(Bt.y-it)/Qe,zr=(Bt.y+1+it)/Qe;if(Xe<ur||De>=Xr||bt<Er||At>=zr)continue;let Pr=!1;for(const dr of ee)if(dr.maxX>=ur&&dr.minX<Xr&&dr.maxY>=Er&&dr.minY<zr){Pr=!0;break}if(Pr){if(Ae){Ae>1&&console.log("invalidate tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Bt.z,Bt.x,Bt.y,Bt.numFeatures,Bt.numPoints,Bt.numSimplified);const dr=`z${Bt.z}`;this.stats[dr]=(this.stats[dr]||0)-1,this.total--}delete this.tiles[jt],dt.add(jt)}}dt.size&&(this.tileCoords=this.tileCoords.filter((jt=>!dt.has(jt.id))))}updateData(ee){const ne=this.options,Ae=ne.debug;if(!ne.updateable)throw new Error("to update tile geojson `updateable` option must be set to true");const{affected:De,source:Xe}=(function(Bt,Qe,ur){const Xr=(function(zr){return zr?{removeAll:zr.removeAll,remove:new Set(zr.remove||[]),add:new Map(zr.add?.map((Pr=>[Pr.id,Pr]))),update:new Map(zr.update?.map((Pr=>[Pr.id,Pr])))}:{remove:new Set,add:new Map,update:new Map}})(Qe);let Er=[];if(Xr.removeAll&&(Er=Bt,Bt=[]),Xr.remove.size||Xr.add.size){const zr=[];for(const Pr of Bt){const{id:dr}=Pr;(Xr.remove.has(dr)||Xr.add.has(dr))&&zr.push(Pr)}if(zr.length){Er.push(...zr);const Pr=new Set(zr.map((dr=>dr.id)));Bt=Bt.filter((dr=>!Pr.has(dr.id)))}if(Xr.add.size){let Pr=Ct({type:"FeatureCollection",features:Array.from(Xr.add.values())},ur);Pr=Re(Pr,ur),Er.push(...Pr),Bt.push(...Pr)}}if(Xr.update.size)for(const[zr,Pr]of Xr.update){const dr=Bt.findIndex((Jn=>Jn.id===zr));if(dr===-1)continue;const mi=Bt[dr],Kn=Gr(mi,Pr,ur);Kn&&(Er.push(mi,Kn),Bt[dr]=Kn)}return{affected:Er,source:Bt}})(this.source,ee,ne);if(!De.length)return;this.source=Xe,Ae>1&&(console.log("invalidating tiles"),console.time("invalidating")),this.invalidateTiles(De),Ae>1&&console.timeEnd("invalidating");const[At,bt,it]=[0,0,0],dt=Zr(this.source,At,bt,it,this.options);dt.source=this.source;const jt=Fn(At,bt,it);if(this.tiles[jt]=dt,this.tileCoords.push({z:At,x:bt,y:it,id:jt}),Ae){const Bt=`z${At}`;this.stats[Bt]=(this.stats[Bt]||0)+1,this.total++}}}function Fn(Je,ee,ne){return 32*((1<<Je)*ne+ee)+Je}class Sn{constructor(ee,ne,Ae,De=Or){this._dataUpdateable=new Map,this.actor=ee,this.layerIndex=ne,this.availableImages=Ae,this.tileState=new z,this._createGeoJSONIndex=De}loadVectorTile(ee){if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const{z:ne,x:Ae,y:De}=ee.tileID.canonical,Xe=this._geoJSONIndex.getTile(ne,Ae,De);return Xe?ie(new v.d3(Xe.features,{version:2,extent:v.a5})):null}loadTile(ee){return v._(this,void 0,void 0,(function*(){const{uid:ne}=ee,Ae=new I(ee);Ae.abort=new AbortController;try{const De=this.loadVectorTile(ee);if(!De)return null;const{vectorTile:Xe,rawData:At}=De;Ae.vectorTile=Xe,this.tileState.markLoaded(ne,Ae);const bt={rawData:At};this.tileState.setParsing(ne,bt);try{return yield this._parseWorkerTile(Ae,ee,bt)}finally{this.tileState.clearParsing(ne)}}catch(De){throw Ae.status="done",this.tileState.markLoaded(ne,Ae),De}}))}_reloadLoadedTile(ee){return v._(this,void 0,void 0,(function*(){const ne=ee.uid,Ae=this.tileState.getLoaded(ne);if(!Ae)throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");if(Ae.showCollisionBoxes=ee.showCollisionBoxes,Ae.status==="parsing"){const De=this.tileState.consumeParsing(ne);return yield this._parseWorkerTile(Ae,ee,De)}if(Ae.status==="done"&&Ae.vectorTile)return yield this._parseWorkerTile(Ae,ee)}))}_parseWorkerTile(ee,ne,Ae){return v._(this,void 0,void 0,(function*(){let De=yield ee.parse(ee.vectorTile,this.layerIndex,this.availableImages,this.actor,ne.subdivisionGranularity);if(Ae){const{rawData:Xe}=Ae;De=v.e({rawTileData:Xe.slice(0)},De)}return De}))}abortTile(ee){return v._(this,void 0,void 0,(function*(){this.tileState.abort(ee.uid)}))}removeTile(ee){return v._(this,void 0,void 0,(function*(){this.tileState.removeLoaded(ee.uid)}))}loadData(ee){return v._(this,void 0,void 0,(function*(){var ne;(ne=this._pendingRequest)===null||ne===void 0||ne.abort();const Ae=this._startRequestTiming(ee);this._pendingRequest=new AbortController;try{(!this._pendingData||ee.request||ee.data||ee.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(ee,this._pendingRequest));const De=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex(De,ee),this.tileState.clearLoaded();const Xe={};return ee.request&&(Xe.data=De),this._finishRequestTiming(Ae,ee,Xe),Xe}catch(De){if(delete this._pendingRequest,v.Z(De))return{abandoned:!0};throw De}}))}_startRequestTiming(ee){var ne;if(!((ne=ee.request)===null||ne===void 0)&&ne.collectResourceTiming)return new v.c$(ee.request.url)}_finishRequestTiming(ee,ne,Ae){const De=ee?.finish();De&&(Ae.resourceTiming={[ne.source]:JSON.parse(JSON.stringify(De))})}getData(){return v._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(ee){return this.tileState.getLoaded(ee.uid)?this._reloadLoadedTile(ee):this.loadTile(ee)}loadAndProcessGeoJSON(ee,ne){return v._(this,void 0,void 0,(function*(){let Ae;if(ee.request?Ae=yield this.loadGeoJSONFromUrl(ee.request,ee.promoteId,ne):ee.data?Ae=this._loadGeoJSONFromObject(ee.data,ee.promoteId):ee.dataDiff&&(Ae=this._loadGeoJSONFromDiff(ee.dataDiff,ee.promoteId,ee.source)),delete this._pendingRequest,typeof Ae!="object")throw new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`);return ft(Ae,!0),ee.filter&&(Ae=this._filterGeoJSON(Ae,ee.filter)),Ae}))}loadGeoJSONFromUrl(ee,ne,Ae){return v._(this,void 0,void 0,(function*(){const De=yield v.j(ee,Ae);return this._dataUpdateable=v.a7(De.data,ne),De.data}))}_loadGeoJSONFromObject(ee,ne){return this._dataUpdateable=v.a7(ee,ne),ee}_loadGeoJSONFromDiff(ee,ne,Ae){if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${Ae}`);v.a8(this._dataUpdateable,ee,ne);const De=Array.from(this._dataUpdateable.values());return this._toFeatureCollection(De)}_filterGeoJSON(ee,ne){const Ae=v.d4(ne,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ae.result==="error")throw new Error(Ae.value.map((Xe=>`${Xe.key}: ${Xe.message}`)).join(", "));const De=ee.features.filter((Xe=>Ae.value.evaluate({zoom:0},Xe)));return this._toFeatureCollection(De)}_toFeatureCollection(ee){return{type:"FeatureCollection",features:ee}}removeSource(ee){return v._(this,void 0,void 0,(function*(){var ne;(ne=this._pendingRequest)===null||ne===void 0||ne.abort()}))}getClusterExpansionZoom(ee){return this._geoJSONIndex.getClusterExpansionZoom(ee.clusterId)}getClusterChildren(ee){return this._geoJSONIndex.getChildren(ee.clusterId)}getClusterLeaves(ee){return this._geoJSONIndex.getLeaves(ee.clusterId,ee.limit,ee.offset)}}function Or(Je,ee){return ee.cluster?new _t((function({superclusterOptions:ne,clusterProperties:Ae}){if(!Ae||!ne)return ne;const De={},Xe={},At={accumulated:null,zoom:0},bt={properties:null},it=Object.keys(Ae);for(const dt of it){const[jt,Bt]=Ae[dt],Qe=v.d4(Bt),ur=v.d4(typeof jt=="string"?[jt,["accumulated"],["get",dt]]:jt);De[dt]=Qe.value,Xe[dt]=ur.value}return ne.map=dt=>{bt.properties=dt;const jt={};for(const Bt of it)jt[Bt]=De[Bt].evaluate(At,bt);return jt},ne.reduce=(dt,jt)=>{bt.properties=jt;for(const Bt of it)At.accumulated=dt[Bt],dt[Bt]=Xe[Bt].evaluate(At,bt)},ne})(ee)).load(Je.features):(function(ne,Ae){return new An(ne,Ae)})(Je,ee.geojsonVtOptions)}class gn{constructor(ee){this.self=ee,this.actor=new v.L(ee),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(ne,Ae)=>{if(this.externalWorkerSourceTypes[ne])throw new Error(`Worker source with name "${ne}" already registered.`);this.externalWorkerSourceTypes[ne]=Ae},this.self.addProtocol=v.cK,this.self.removeProtocol=v.cL,this.self.registerRTLTextPlugin=ne=>{v.d5.setMethods(ne)},this.actor.registerMessageHandler("LDT",((ne,Ae)=>this._getDEMWorkerSource(ne,Ae.source).loadTile(Ae))),this.actor.registerMessageHandler("RDT",((ne,Ae)=>v._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(ne,Ae.source).removeTile(Ae)})))),this.actor.registerMessageHandler("GCEZ",((ne,Ae)=>v._(this,void 0,void 0,(function*(){return this._getWorkerSource(ne,Ae.type,Ae.source).getClusterExpansionZoom(Ae)})))),this.actor.registerMessageHandler("GCC",((ne,Ae)=>v._(this,void 0,void 0,(function*(){return this._getWorkerSource(ne,Ae.type,Ae.source).getClusterChildren(Ae)})))),this.actor.registerMessageHandler("GCL",((ne,Ae)=>v._(this,void 0,void 0,(function*(){return this._getWorkerSource(ne,Ae.type,Ae.source).getClusterLeaves(Ae)})))),this.actor.registerMessageHandler("LD",((ne,Ae)=>this._getWorkerSource(ne,Ae.type,Ae.source).loadData(Ae))),this.actor.registerMessageHandler("GD",((ne,Ae)=>this._getWorkerSource(ne,Ae.type,Ae.source).getData())),this.actor.registerMessageHandler("LT",((ne,Ae)=>this._getWorkerSource(ne,Ae.type,Ae.source).loadTile(Ae))),this.actor.registerMessageHandler("RT",((ne,Ae)=>this._getWorkerSource(ne,Ae.type,Ae.source).reloadTile(Ae))),this.actor.registerMessageHandler("AT",((ne,Ae)=>this._getWorkerSource(ne,Ae.type,Ae.source).abortTile(Ae))),this.actor.registerMessageHandler("RMT",((ne,Ae)=>this._getWorkerSource(ne,Ae.type,Ae.source).removeTile(Ae))),this.actor.registerMessageHandler("RS",((ne,Ae)=>v._(this,void 0,void 0,(function*(){if(!this.workerSources[ne]||!this.workerSources[ne][Ae.type]||!this.workerSources[ne][Ae.type][Ae.source])return;const De=this.workerSources[ne][Ae.type][Ae.source];delete this.workerSources[ne][Ae.type][Ae.source],De.removeSource!==void 0&&De.removeSource(Ae)})))),this.actor.registerMessageHandler("RM",(ne=>v._(this,void 0,void 0,(function*(){delete this.layerIndexes[ne],delete this.availableImages[ne],delete this.workerSources[ne],delete this.demWorkerSources[ne],this.globalStates.delete(ne)})))),this.actor.registerMessageHandler("SR",((ne,Ae)=>v._(this,void 0,void 0,(function*(){this.referrer=Ae})))),this.actor.registerMessageHandler("SRPS",((ne,Ae)=>this._syncRTLPluginState(ne,Ae))),this.actor.registerMessageHandler("IS",((ne,Ae)=>v._(this,void 0,void 0,(function*(){this.self.importScripts(Ae)})))),this.actor.registerMessageHandler("SI",((ne,Ae)=>this._setImages(ne,Ae))),this.actor.registerMessageHandler("UL",((ne,Ae)=>v._(this,void 0,void 0,(function*(){this._getLayerIndex(ne).update(Ae.layers,Ae.removedIds,this._getGlobalState(ne))})))),this.actor.registerMessageHandler("UGS",((ne,Ae)=>v._(this,void 0,void 0,(function*(){const De=this._getGlobalState(ne);for(const Xe in Ae)De[Xe]=Ae[Xe]})))),this.actor.registerMessageHandler("SL",((ne,Ae)=>v._(this,void 0,void 0,(function*(){this._getLayerIndex(ne).replace(Ae,this._getGlobalState(ne))}))))}_getGlobalState(ee){let ne=this.globalStates.get(ee);return ne||(ne={},this.globalStates.set(ee,ne)),ne}_setImages(ee,ne){return v._(this,void 0,void 0,(function*(){this.availableImages[ee]=ne;for(const Ae in this.workerSources[ee]){const De=this.workerSources[ee][Ae];for(const Xe in De)De[Xe].availableImages=ne}}))}_syncRTLPluginState(ee,ne){return v._(this,void 0,void 0,(function*(){return yield v.d5.syncState(ne,this.self.importScripts)}))}_getAvailableImages(ee){let ne=this.availableImages[ee];return ne||(ne=[]),ne}_getLayerIndex(ee){let ne=this.layerIndexes[ee];return ne||(ne=this.layerIndexes[ee]=new A),ne}_getWorkerSource(ee,ne,Ae){if(this.workerSources[ee]||(this.workerSources[ee]={}),this.workerSources[ee][ne]||(this.workerSources[ee][ne]={}),!this.workerSources[ee][ne][Ae]){const De={sendAsync:(Xe,At)=>(Xe.targetMapId=ee,this.actor.sendAsync(Xe,At))};switch(ne){case"vector":this.workerSources[ee][ne][Ae]=new le(De,this._getLayerIndex(ee),this._getAvailableImages(ee));break;case"geojson":this.workerSources[ee][ne][Ae]=new Sn(De,this._getLayerIndex(ee),this._getAvailableImages(ee));break;default:this.workerSources[ee][ne][Ae]=new this.externalWorkerSourceTypes[ne](De,this._getLayerIndex(ee),this._getAvailableImages(ee))}}return this.workerSources[ee][ne][Ae]}_getDEMWorkerSource(ee,ne){return this.demWorkerSources[ee]||(this.demWorkerSources[ee]={}),this.demWorkerSources[ee][ne]||(this.demWorkerSources[ee][ne]=new ye),this.demWorkerSources[ee][ne]}}return v.i(self)&&(self.worker=new gn(self)),gn})),m("index",["exports","./shared"],(function(v,A){var S="5.19.0";function I(){var b=new A.A(4);return A.A!=Float32Array&&(b[1]=0,b[2]=0),b[0]=1,b[3]=1,b}let D,z,Z;const O={frame(b,t,l,f){const g=f||window,B=g.requestAnimationFrame((L=>{E(),t(L)})),{unsubscribe:E}=A.s(b.signal,"abort",(()=>{E(),g.cancelAnimationFrame(B),l(new A.a(b.signal.reason))}),!1)},frameAsync(b,t){return new Promise(((l,f)=>{this.frame(b,l,f,t)}))},getImageData(b,t=0){return this.getImageCanvasContext(b).getImageData(-t,-t,b.width+2*t,b.height+2*t)},getImageCanvasContext(b){const t=window.document.createElement("canvas"),l=t.getContext("2d",{willReadFrequently:!0});if(!l)throw new Error("failed to create canvas 2d context");return t.width=b.width,t.height=b.height,l.drawImage(b,0,0,b.width,b.height),l},resolveURL:b=>(D||(D=document.createElement("a")),D.href=b,D.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return Z!==void 0?Z:!!matchMedia&&(z==null&&(z=matchMedia("(prefers-reduced-motion: reduce)")),z.matches)},set prefersReducedMotion(b){Z=b}},ce=new class{constructor(){this._realTime=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(b){this._frozenAt=b}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function ie(){return ce.getCurrentTime()}class W{static testProp(t){if(!W.docStyle)return t[0];for(let l=0;l<t.length;l++)if(t[l]in W.docStyle)return t[l];return t[0]}static create(t,l,f){const g=window.document.createElement(t);return l!==void 0&&(g.className=l),f&&f.appendChild(g),g}static createNS(t,l){return window.document.createElementNS(t,l)}static disableDrag(){W.docStyle&&W.selectProp&&(W.userSelect=W.docStyle[W.selectProp],W.docStyle[W.selectProp]="none")}static enableDrag(){W.docStyle&&W.selectProp&&(W.docStyle[W.selectProp]=W.userSelect)}static setTransform(t,l){t.style[W.transformProp]=l}static addEventListener(t,l,f,g={}){t.addEventListener(l,f,"passive"in g?g:g.capture)}static removeEventListener(t,l,f,g={}){t.removeEventListener(l,f,"passive"in g?g:g.capture)}static suppressClickInternal(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",W.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",W.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",W.suppressClickInternal,!0)}),0)}static getScale(t){const l=t.getBoundingClientRect();return{x:l.width/t.offsetWidth||1,y:l.height/t.offsetHeight||1,boundingClientRect:l}}static getPoint(t,l,f){const g=l.boundingClientRect;return new A.P((f.clientX-g.left)/l.x-t.clientLeft,(f.clientY-g.top)/l.y-t.clientTop)}static mousePos(t,l){const f=W.getScale(t);return W.getPoint(t,f,l)}static touchPos(t,l){const f=[],g=W.getScale(t);for(let B=0;B<l.length;B++)f.push(W.getPoint(t,g,l[B]));return f}static mouseButton(t){return t.button}static remove(t){t.parentNode&&t.parentNode.removeChild(t)}static sanitize(t){const l=new DOMParser().parseFromString(t,"text/html").body||document.createElement("body"),f=l.querySelectorAll("script");for(const g of f)g.remove();return W.clean(l),l.innerHTML}static isPossiblyDangerous(t,l){const f=l.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(t)||!f.includes("javascript:")&&!f.includes("data:"))||!!t.startsWith("on")||void 0}static clean(t){const l=t.children;for(const f of l)W.removeAttributes(f),W.clean(f)}static removeAttributes(t){for(const{name:l,value:f}of t.attributes)W.isPossiblyDangerous(l,f)&&t.removeAttribute(l)}}W.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,W.selectProp=W.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),W.transformProp=W.testProp(["transform","WebkitTransform"]);const le={supported:!1,testSupport:function(b){!Le&&Be&&(lt?ft(b):ye=b)}};let ye,Be,Le=!1,lt=!1;function ft(b){const t=b.createTexture();b.bindTexture(b.TEXTURE_2D,t);try{if(b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,Be),b.isContextLost())return;le.supported=!0}catch{}b.deleteTexture(t),Le=!0}var ut;typeof document<"u"&&(Be=document.createElement("img"),Be.onload=()=>{ye&&ft(ye),ye=null,lt=!0},Be.onerror=()=>{Le=!0,ye=null},Be.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(b){let t,l,f,g;b.resetRequestQueue=()=>{t=[],l=0,f=0,g={}},b.addThrottleControl=N=>{const H=f++;return g[H]=N,H},b.removeThrottleControl=N=>{delete g[N],E()},b.getImage=(N,H,G=!0)=>new Promise((($,Y)=>{le.supported&&(N.headers||(N.headers={}),N.headers.accept="image/webp,*/*"),A.e(N,{type:"image"}),t.push({abortController:H,requestParameters:N,supportImageRefresh:G,state:"queued",onError:se=>{Y(se)},onSuccess:se=>{$(se)}}),E()}));const B=N=>A._(this,void 0,void 0,(function*(){N.state="running";const{requestParameters:H,supportImageRefresh:G,onError:$,onSuccess:Y,abortController:se}=N,de=G===!1&&!A.i(self)&&!A.g(H.url)&&(!H.headers||Object.keys(H.headers).reduce(((Ee,je)=>Ee&&je==="accept"),!0));l++;const Se=de?L(H,se):A.m(H,se);try{const Ee=yield Se;delete N.abortController,N.state="completed",Ee.data instanceof HTMLImageElement||A.b(Ee.data)?Y(Ee):Ee.data&&Y({data:yield(Me=Ee.data,typeof createImageBitmap=="function"?A.f(Me):A.h(Me)),cacheControl:Ee.cacheControl,expires:Ee.expires})}catch(Ee){delete N.abortController,$(Ee)}finally{l--,E()}var Me})),E=()=>{const N=(()=>{for(const H of Object.keys(g))if(g[H]())return!0;return!1})()?A.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:A.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let H=l;H<N&&t.length>0;H++){const G=t.shift();G.abortController.signal.aborted?H--:B(G)}},L=(N,H)=>new Promise(((G,$)=>{const Y=new Image,se=N.url,de=N.credentials;de&&de==="include"?Y.crossOrigin="use-credentials":(de&&de==="same-origin"||!A.d(se))&&(Y.crossOrigin="anonymous"),H.signal.addEventListener("abort",(()=>{Y.src="",$(new A.a(H.signal.reason))})),Y.fetchPriority="high",Y.onload=()=>{Y.onerror=Y.onload=null,G({data:Y})},Y.onerror=()=>{Y.onerror=Y.onload=null,H.signal.aborted||$(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},Y.src=se}))})(ut||(ut={})),ut.resetRequestQueue();class Ne{constructor(t){this._transformRequestFn=t??null}transformRequest(t,l){return this._transformRequestFn&&this._transformRequestFn(t,l)||{url:t}}setTransformRequest(t){this._transformRequestFn=t}}function Ce(b){const t=[];if(typeof b=="string")t.push({id:"default",url:b});else if(b&&b.length>0){const l=[];for(const{id:f,url:g}of b){const B=`${f}${g}`;l.indexOf(B)===-1&&(l.push(B),t.push({id:f,url:g}))}}return t}function _t(b,t,l){try{const f=new URL(b);return f.pathname+=`${t}${l}`,f.toString()}catch{throw new Error(`Invalid sprite URL "${b}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function _e(b){const{userImage:t}=b;return!!(t&&t.render&&t.render())&&(b.data.replace(new Uint8Array(t.data.buffer)),!0)}class Te extends A.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new A.R({width:1,height:1}),this.dirty=!0}destroy(){this.atlasTexture&&(this.atlasTexture.destroy(),this.atlasTexture=null);for(const t of Object.keys(this.images))this.removeImage(t);this.patterns={},this.atlasImage=new A.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:l,promiseResolve:f}of this.requestors)f(this._getImagesForIds(l));this.requestors=[]}}getImage(t){const l=this.images[t];if(l&&!l.data&&l.spriteData){const f=l.spriteData;l.data=new A.R({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),l.spriteData=null}return l}addImage(t,l){if(this.images[t])throw new Error(`Image id ${t} already exist, use updateImage instead`);this._validate(t,l)&&(this.images[t]=l)}_validate(t,l){let f=!0;const g=l.data||l.spriteData;return this._validateStretch(l.stretchX,g&&g.width)||(this.fire(new A.k(new Error(`Image "${t}" has invalid "stretchX" value`))),f=!1),this._validateStretch(l.stretchY,g&&g.height)||(this.fire(new A.k(new Error(`Image "${t}" has invalid "stretchY" value`))),f=!1),this._validateContent(l.content,l)||(this.fire(new A.k(new Error(`Image "${t}" has invalid "content" value`))),f=!1),f}_validateStretch(t,l){if(!t)return!0;let f=0;for(const g of t){if(g[0]<f||g[1]<g[0]||l<g[1])return!1;f=g[1]}return!0}_validateContent(t,l){if(!t)return!0;if(t.length!==4)return!1;const f=l.spriteData,g=f&&f.width||l.data.width,B=f&&f.height||l.data.height;return!(t[0]<0||g<t[0]||t[1]<0||B<t[1]||t[2]<0||g<t[2]||t[3]<0||B<t[3]||t[2]<t[0]||t[3]<t[1])}updateImage(t,l,f=!0){const g=this.getImage(t);if(f&&(g.data.width!==l.data.width||g.data.height!==l.data.height))throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${l.data.width}x${l.data.height}).`);l.version=g.version+1,this.images[t]=l,this.updatedImages[t]=!0}removeImage(t){const l=this.images[t];delete this.images[t],delete this.patterns[t],l.userImage&&l.userImage.onRemove&&l.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t){return new Promise(((l,f)=>{let g=!0;if(!this.isLoaded())for(const B of t)this.images[B]||(g=!1);this.isLoaded()||g?l(this._getImagesForIds(t)):this.requestors.push({ids:t,promiseResolve:l})}))}_getImagesForIds(t){const l={};for(const f of t){let g=this.getImage(f);g||(this.fire(new A.l("styleimagemissing",{id:f})),g=this.getImage(f)),g?l[f]={data:g.data.clone(),pixelRatio:g.pixelRatio,sdf:g.sdf,version:g.version,stretchX:g.stretchX,stretchY:g.stretchY,content:g.content,textFitWidth:g.textFitWidth,textFitHeight:g.textFitHeight,hasRenderCallback:!!(g.userImage&&g.userImage.render)}:A.w(`Image "${f}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return l}getPixelSize(){const{width:t,height:l}=this.atlasImage;return{width:t,height:l}}getPattern(t){const l=this.patterns[t],f=this.getImage(t);if(!f)return null;if(l&&l.position.version===f.version)return l.position;if(l)l.position.version=f.version;else{const g={w:f.data.width+2,h:f.data.height+2,x:0,y:0},B=new A.I(g,f);this.patterns[t]={bin:g,position:B}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const l=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new A.T(t,this.atlasImage,l.RGBA),this.atlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const B in this.patterns)t.push(this.patterns[B].bin);const{w:l,h:f}=A.p(t),g=this.atlasImage;g.resize({width:l||1,height:f||1});for(const B in this.patterns){const{bin:E}=this.patterns[B],L=E.x+1,N=E.y+1,H=this.getImage(B).data,G=H.width,$=H.height;A.R.copy(H,g,{x:0,y:0},{x:L,y:N},{width:G,height:$}),A.R.copy(H,g,{x:0,y:$-1},{x:L,y:N-1},{width:G,height:1}),A.R.copy(H,g,{x:0,y:0},{x:L,y:N+$},{width:G,height:1}),A.R.copy(H,g,{x:G-1,y:0},{x:L-1,y:N},{width:1,height:$}),A.R.copy(H,g,{x:0,y:0},{x:L+G,y:N},{width:1,height:$})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const l of t){if(this.callbackDispatchedThisFrame[l])continue;this.callbackDispatchedThisFrame[l]=!0;const f=this.getImage(l);f||A.w(`Image with ID: "${l}" was not found`),_e(f)&&this.updateImage(l,f)}}cloneImages(){const t={};for(const l in this.images){const f=this.images[l];t[l]=Object.assign(Object.assign({},f),{data:f.data?f.data.clone():null})}return t}}const Ye=1e20;function Ve(b,t,l,f,g,B,E,L,N){for(let H=t;H<t+f;H++)wt(b,l*B+H,B,g,E,L,N);for(let H=l;H<l+g;H++)wt(b,H*B+t,1,f,E,L,N)}function wt(b,t,l,f,g,B,E){B[0]=0,E[0]=-Ye,E[1]=Ye,g[0]=b[t];for(let L=1,N=0,H=0;L<f;L++){g[L]=b[t+L*l];const G=L*L;do{const $=B[N];H=(g[L]-g[$]+G-$*$)/(L-$)/2}while(H<=E[N]&&--N>-1);N++,B[N]=L,E[N]=H,E[N+1]=Ye}for(let L=0,N=0;L<f;L++){for(;E[N+1]<L;)N++;const H=B[N],G=L-H;b[t+L*l]=g[H]+G*G}}const ke=A.v.layout_symbol["text-font"].default.join(",");class ot{constructor(t,l,f){this.requestManager=t,this.localIdeographFontFamily=l,this.entries={},this.lang=f}setURL(t){this.url=t}getGlyphs(t){return A._(this,void 0,void 0,(function*(){const l=[];for(const B in t)for(const E of t[B])l.push(this._getAndCacheGlyphsPromise(B,E));const f=yield Promise.all(l),g={};for(const{stack:B,id:E,glyph:L}of f)g[B]||(g[B]={}),g[B][E]=L&&{id:L.id,bitmap:L.bitmap.clone(),metrics:L.metrics};return g}))}_getAndCacheGlyphsPromise(t,l){return A._(this,void 0,void 0,(function*(){let f=this.entries[t];f||(f=this.entries[t]={glyphs:{},requests:{},ranges:{}});let g=f.glyphs[l];return g!==void 0?{stack:t,id:l,glyph:g}:!this.url||this._charUsesLocalIdeographFontFamily(l)?(g=f.glyphs[l]=this._drawGlyph(f,t,l),{stack:t,id:l,glyph:g}):yield this._downloadAndCacheRangePromise(t,l)}))}_downloadAndCacheRangePromise(t,l){return A._(this,void 0,void 0,(function*(){const f=this.entries[t],g=Math.floor(l/256);if(f.ranges[g])return{stack:t,id:l,glyph:null};if(!f.requests[g]){const B=ot.loadGlyphRange(t,g,this.url,this.requestManager);f.requests[g]=B}try{const B=yield f.requests[g];for(const E in B)f.glyphs[+E]=B[+E];return f.ranges[g]=!0,{stack:t,id:l,glyph:B[l]||null}}catch(B){const E=f.glyphs[l]=this._drawGlyph(f,t,l);return this._warnOnMissingGlyphRange(E,g,l,B),{stack:t,id:l,glyph:E}}}))}_warnOnMissingGlyphRange(t,l,f,g){const B=256*l,E=B+255,L=f.toString(16).padStart(4,"0").toUpperCase();A.w(`Unable to load glyph range ${l}, ${B}-${E}. Rendering codepoint U+${L} locally instead. ${g}`)}_charUsesLocalIdeographFontFamily(t){return!!this.localIdeographFontFamily&&A.q(t)}_drawGlyph(t,l,f){const g=l===ke&&this.localIdeographFontFamily!==""&&this._charUsesLocalIdeographFontFamily(f),B=g?"ideographTinySDF":"tinySDF";t[B]||(t[B]=this._createTinySDF(g?this.localIdeographFontFamily:l));const E=t[B].draw(String.fromCodePoint(f)),L=new RegExp("^\\p{gc=Cf}+$","u").test(String.fromCodePoint(f));return{id:f,bitmap:new A.r({width:E.width||60,height:E.height||60},E.data),metrics:{width:L?0:E.glyphWidth/2||24,height:E.glyphHeight/2||24,left:E.glyphLeft/2+.5||0,top:E.glyphTop/2-27.5||-8,advance:L?0:E.glyphAdvance/2||24,isDoubleResolution:!0}}}_createTinySDF(t){const l=t?t.split(","):[];l.push("sans-serif");const f=l.map((g=>/[-\w]+/.test(g)?g:`'${CSS.escape(g)}'`)).join(",");return new ot.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:f,fontWeight:this._fontWeight(l[0]),fontStyle:this._fontStyle(l[0]),lang:this.lang})}_fontStyle(t){return/italic/i.test(t)?"italic":/oblique/i.test(t)?"oblique":"normal"}_fontWeight(t){const l={thin:100,hairline:100,"extra light":200,"ultra light":200,light:300,normal:400,regular:400,medium:500,semibold:600,demibold:600,bold:700,"extra bold":800,"ultra bold":800,black:900,heavy:900,"extra black":950,"ultra black":950};let f;for(const[g,B]of Object.entries(l))new RegExp(`\\b${g}\\b`,"i").test(t)&&(f=`${B}`);return f}destroy(){for(const t in this.entries){const l=this.entries[t];l.tinySDF&&(l.tinySDF=null),l.ideographTinySDF&&(l.ideographTinySDF=null),l.glyphs={},l.requests={},l.ranges={}}this.entries={}}}ot.loadGlyphRange=function(b,t,l,f){return A._(this,void 0,void 0,(function*(){const g=256*t,B=g+255,E=f.transformRequest(l.replace("{fontstack}",b).replace("{range}",`${g}-${B}`),"Glyphs"),L=yield A.n(E,new AbortController);if(!L||!L.data)throw new Error(`Could not load glyph range. range: ${t}, ${g}-${B}`);const N={};for(const H of A.o(L.data))N[H.id]=H;return N}))},ot.TinySDF=class{constructor({fontSize:b=24,buffer:t=3,radius:l=8,cutoff:f=.25,fontFamily:g="sans-serif",fontWeight:B="normal",fontStyle:E="normal",lang:L=null}={}){this.buffer=t,this.cutoff=f,this.radius=l,this.lang=L;const N=this.size=b+4*t,H=this._createCanvas(N),G=this.ctx=H.getContext("2d",{willReadFrequently:!0});G.font=`${E} ${B} ${b}px ${g}`,G.textBaseline="alphabetic",G.textAlign="left",G.fillStyle="black",this.gridOuter=new Float64Array(N*N),this.gridInner=new Float64Array(N*N),this.f=new Float64Array(N),this.z=new Float64Array(N+1),this.v=new Uint16Array(N)}_createCanvas(b){const t=document.createElement("canvas");return t.width=t.height=b,t}draw(b){const{width:t,actualBoundingBoxAscent:l,actualBoundingBoxDescent:f,actualBoundingBoxLeft:g,actualBoundingBoxRight:B}=this.ctx.measureText(b),E=Math.ceil(l),L=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(B-g))),N=Math.min(this.size-this.buffer,E+Math.ceil(f)),H=L+2*this.buffer,G=N+2*this.buffer,$=Math.max(H*G,0),Y=new Uint8ClampedArray($),se={data:Y,width:H,height:G,glyphWidth:L,glyphHeight:N,glyphTop:E,glyphLeft:0,glyphAdvance:t};if(L===0||N===0)return se;const{ctx:de,buffer:Se,gridInner:Me,gridOuter:Ee}=this;this.lang&&(de.lang=this.lang),de.clearRect(Se,Se,L,N),de.fillText(b,Se,Se+E);const je=de.getImageData(Se,Se,L,N);Ee.fill(Ye,0,$),Me.fill(0,0,$);for(let et=0;et<N;et++)for(let ze=0;ze<L;ze++){const nt=je.data[4*(et*L+ze)+3]/255;if(nt===0)continue;const at=(et+Se)*H+ze+Se;if(nt===1)Ee[at]=0,Me[at]=Ye;else{const $e=.5-nt;Ee[at]=$e>0?$e*$e:0,Me[at]=$e<0?$e*$e:0}}Ve(Ee,0,0,H,G,H,this.f,this.v,this.z),Ve(Me,Se,Se,L,N,H,this.f,this.v,this.z);for(let et=0;et<$;et++){const ze=Math.sqrt(Ee[et])-Math.sqrt(Me[et]);Y[et]=Math.round(255-255*(ze/this.radius+this.cutoff))}return se}};class st{constructor(){this.specification=A.u.light.position}possiblyEvaluate(t,l){return A.F(t.expression.evaluate(l))}interpolate(t,l,f){return{x:A.G.number(t.x,l.x,f),y:A.G.number(t.y,l.y,f),z:A.G.number(t.z,l.z,f)}}}let xt;class Ct extends A.E{constructor(t){super(),xt=xt||new A.t({anchor:new A.D(A.u.light.anchor),position:new st,color:new A.D(A.u.light.color),intensity:new A.D(A.u.light.intensity)}),this._transitionable=new A.x(xt,void 0),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,l={}){if(!this._validate(A.y,t,l))for(const f in t){const g=t[f];f.endsWith(A.z)?this._transitionable.setTransition(f.slice(0,-A.z.length),g):this._transitionable.setValue(f,g)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,l,f){return(!f||f.validate!==!1)&&A.B(this,t.call(A.C,{value:l,style:{glyphs:!0,sprite:!0},styleSpec:A.u}))}}const Fe=new A.t({"sky-color":new A.D(A.u.sky["sky-color"]),"horizon-color":new A.D(A.u.sky["horizon-color"]),"fog-color":new A.D(A.u.sky["fog-color"]),"fog-ground-blend":new A.D(A.u.sky["fog-ground-blend"]),"horizon-fog-blend":new A.D(A.u.sky["horizon-fog-blend"]),"sky-horizon-blend":new A.D(A.u.sky["sky-horizon-blend"]),"atmosphere-blend":new A.D(A.u.sky["atmosphere-blend"])});class oe extends A.E{constructor(t){super(),this._transitionable=new A.x(Fe,void 0),this.setSky(t),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new A.H(0))}setSky(t,l={}){if(!this._validate(A.J,t,l)){t||(t={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const f in t){const g=t[f];f.endsWith(A.z)?this._transitionable.setTransition(f.slice(0,-A.z.length),g):this._transitionable.setValue(f,g)}}}getSky(){return this._transitionable.serialize()}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,l,f={}){return f?.validate!==!1&&A.B(this,t.call(A.C,A.e({value:l,style:{glyphs:!0,sprite:!0},styleSpec:A.u})))}calculateFogBlendOpacity(t){return t<60?0:t<70?(t-60)/10:1}}class xe{constructor(t,l){this.width=t,this.height=l,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(t,l){const f=t.join(",")+String(l);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(t,l)),this.dashEntry[f]}getDashRanges(t,l,f){const g=[];let B=t.length%2==1?-t[t.length-1]*f:0,E=t[0]*f,L=!0;g.push({left:B,right:E,isDash:L,zeroLength:t[0]===0});let N=t[0];for(let H=1;H<t.length;H++){L=!L;const G=t[H];B=N*f,N+=G,E=N*f,g.push({left:B,right:E,isDash:L,zeroLength:G===0})}return g}addRoundDash(t,l,f){const g=l/2;for(let B=-f;B<=f;B++){const E=this.width*(this.nextRow+f+B);let L=0,N=t[L];for(let H=0;H<this.width;H++){H/N.right>1&&(N=t[++L]);const G=Math.abs(H-N.left),$=Math.abs(H-N.right),Y=Math.min(G,$);let se;const de=B/f*(g+1);if(N.isDash){const Se=g-Math.abs(de);se=Math.sqrt(Y*Y+Se*Se)}else se=g-Math.sqrt(Y*Y+de*de);this.data[E+H]=Math.max(0,Math.min(255,se+128))}}}addRegularDash(t){for(let L=t.length-1;L>=0;--L){const N=t[L],H=t[L+1];N.zeroLength?t.splice(L,1):H&&H.isDash===N.isDash&&(H.left=N.left,t.splice(L,1))}const l=t[0],f=t[t.length-1];l.isDash===f.isDash&&(l.left=f.left-this.width,f.right=l.right+this.width);const g=this.width*this.nextRow;let B=0,E=t[B];for(let L=0;L<this.width;L++){L/E.right>1&&(E=t[++B]);const N=Math.abs(L-E.left),H=Math.abs(L-E.right),G=Math.min(N,H);this.data[g+L]=Math.max(0,Math.min(255,(E.isDash?G:-G)+128))}}addDash(t,l){const f=l?7:0,g=2*f+1;if(this.nextRow+g>this.height)return A.w("LineAtlas out of space"),null;let B=0;for(let L=0;L<t.length;L++)B+=t[L];if(B!==0){const L=this.width/B,N=this.getDashRanges(t,this.width,L);l?this.addRoundDash(N,L,f):this.addRegularDash(N)}const E={y:this.nextRow+f,height:2*f,width:B};return this.nextRow+=g,this.dirty=!0,E}bind(t){const l=t.gl;this.texture?(l.bindTexture(l.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,l.texSubImage2D(l.TEXTURE_2D,0,0,0,this.width,this.height,l.ALPHA,l.UNSIGNED_BYTE,this.data))):(this.texture=l.createTexture(),l.bindTexture(l.TEXTURE_2D,this.texture),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texImage2D(l.TEXTURE_2D,0,l.ALPHA,this.width,this.height,0,l.ALPHA,l.UNSIGNED_BYTE,this.data))}}const Ue="maplibre_preloaded_worker_pool";class Ge{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<Ge.workerCount;)this.workers.push(new Worker(A.c.WORKER_URL));return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],this.numActive()===0&&(this.workers.forEach((l=>{l.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Ue]}numActive(){return Object.keys(this.active).length}}const tt=Math.floor(O.hardwareConcurrency/2);let mt,Pt;function Et(){return mt||(mt=new Ge),mt}Ge.workerCount=A.K(globalThis)?Math.max(Math.min(tt,3),1):1;class $t{constructor(t,l){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=l;const f=this.workerPool.acquire(l);for(let g=0;g<f.length;g++){const B=new A.L(f[g],l);B.name=`Worker ${g}`,this.actors.push(B)}if(!this.actors.length)throw new Error("No actors found")}broadcast(t,l){const f=[];for(const g of this.actors)f.push(g.sendAsync({type:t,data:l}));return Promise.all(f)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(t=!0){this.actors.forEach((l=>{l.remove()})),this.actors=[],t&&this.workerPool.release(this.id)}registerMessageHandler(t,l){for(const f of this.actors)f.registerMessageHandler(t,l)}unregisterMessageHandler(t){for(const l of this.actors)l.unregisterMessageHandler(t)}}function Ar(){return Pt||(Pt=new $t(Et(),A.M),Pt.registerMessageHandler("GR",((b,t,l)=>A.m(t,l)))),Pt}function pr(b,t){const l=A.N();return A.O(l,l,[1,1,0]),A.Q(l,l,[.5*b.width,.5*b.height,1]),b.calculatePosMatrix?A.S(l,l,b.calculatePosMatrix(t.toUnwrapped())):l}function br(b,t,l,f,g,B,E){var L;const N=(function(Y,se,de){if(Y)for(const Se of Y){const Me=se[Se];if(Me&&Me.source===de&&Me.type==="fill-extrusion")return!0}else for(const Se in se){const Me=se[Se];if(Me.source===de&&Me.type==="fill-extrusion")return!0}return!1})((L=g?.layers)!==null&&L!==void 0?L:null,t,b.id),H=B.maxPitchScaleFactor(),G=b.tilesIn(f,H,N);G.sort(xr);const $=[];for(const Y of G)$.push({wrappedTileID:Y.tileID.wrapped().key,queryResults:Y.tile.queryRenderedFeatures(t,l,b.getState(),Y.queryGeometry,Y.cameraQueryGeometry,Y.scale,g,B,H,pr(B,Y.tileID),E?(se,de)=>E(Y.tileID,se,de):void 0)});return(function(Y,se){for(const de in Y)for(const Se of Y[de])Re(Se,se);return Y})((function(Y){const se={},de={};for(const Se of Y){const Me=Se.queryResults,Ee=Se.wrappedTileID,je=de[Ee]=de[Ee]||{};for(const et in Me){const ze=Me[et],nt=je[et]=je[et]||{},at=se[et]=se[et]||[];for(const $e of ze)nt[$e.featureIndex]||(nt[$e.featureIndex]=!0,at.push($e))}}return se})($),b)}function xr(b,t){const l=b.tileID,f=t.tileID;return l.overscaledZ-f.overscaledZ||l.canonical.y-f.canonical.y||l.wrap-f.wrap||l.canonical.x-f.canonical.x}function Re(b,t){const l=b.feature,f=t.getFeatureState(l.layer["source-layer"],l.id);l.source=l.layer.source,l.layer["source-layer"]&&(l.sourceLayer=l.layer["source-layer"]),l.state=f}function _r(b,t,l,f){return A._(this,void 0,void 0,(function*(){let g=b;if(b.url?g=(yield A.j(t.transformRequest(b.url,"Source"),l)).data:yield O.frameAsync(l,f),!g)return null;const B=A.U(A.e(g,b),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in g&&g.vector_layers&&(B.vectorLayerIds=g.vector_layers.map((E=>E.id))),B}))}class Qr{constructor(t,l){t&&(l?this.setSouthWest(t).setNorthEast(l):Array.isArray(t)&&(t.length===4?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1])))}setNorthEast(t){return this._ne=t instanceof A.V?new A.V(t.lng,t.lat):A.V.convert(t),this}setSouthWest(t){return this._sw=t instanceof A.V?new A.V(t.lng,t.lat):A.V.convert(t),this}extend(t){const l=this._sw,f=this._ne;let g,B;if(t instanceof A.V)g=t,B=t;else{if(!(t instanceof Qr))return Array.isArray(t)?t.length===4||t.every(Array.isArray)?this.extend(Qr.convert(t)):this.extend(A.V.convert(t)):t&&("lng"in t||"lon"in t)&&"lat"in t?this.extend(A.V.convert(t)):this;if(g=t._sw,B=t._ne,!g||!B)return this}return l||f?(l.lng=Math.min(g.lng,l.lng),l.lat=Math.min(g.lat,l.lat),f.lng=Math.max(B.lng,f.lng),f.lat=Math.max(B.lat,f.lat)):(this._sw=new A.V(g.lng,g.lat),this._ne=new A.V(B.lng,B.lat)),this}getCenter(){return new A.V((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new A.V(this.getWest(),this.getNorth())}getSouthEast(){return new A.V(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:l,lat:f}=A.V.convert(t);let g=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&g}intersects(t){if(!((t=Qr.convert(t)).getNorth()>=this.getSouth()&&t.getSouth()<=this.getNorth()))return!1;const l=Math.abs(this.getEast()-this.getWest()),f=Math.abs(t.getEast()-t.getWest());if(l>=360||f>=360)return!0;const g=A.W(this.getWest(),-180,180),B=A.W(this.getEast(),-180,180),E=A.W(t.getWest(),-180,180),L=A.W(t.getEast(),-180,180),N=g>B,H=E>L;return!(!N||!H)||(N?L>=g||E<=B:H?B>=E||g<=L:E<=B&&L>=g)}static convert(t){return t instanceof Qr?t:t&&new Qr(t)}static fromLngLat(t,l=0){const f=360*l/40075017,g=f/Math.cos(Math.PI/180*t.lat);return new Qr(new A.V(t.lng-g,t.lat-f),new A.V(t.lng+g,t.lat+f))}adjustAntiMeridian(){const t=new A.V(this._sw.lng,this._sw.lat),l=new A.V(this._ne.lng,this._ne.lat);return new Qr(t,t.lng>l.lng?new A.V(l.lng+360,l.lat):l)}}class Wr{constructor(t,l,f){this.bounds=Qr.convert(this.validateBounds(t)),this.minzoom=l||0,this.maxzoom=f||24}validateBounds(t){return Array.isArray(t)&&t.length===4?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(t){const l=Math.pow(2,t.z),f=Math.floor(A.Y(this.bounds.getWest())*l),g=Math.floor(A.X(this.bounds.getNorth())*l),B=Math.ceil(A.Y(this.bounds.getEast())*l),E=Math.ceil(A.X(this.bounds.getSouth())*l);return t.x>=f&&t.x<B&&t.y>=g&&t.y<E}}class lr extends A.E{constructor(t,l,f,g){if(super(),this.id=t,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,A.e(this,A.U(l,["url","scheme","tileSize","promoteId","encoding"])),this._options=A.e({type:"vector"},l),this._collectResourceTiming=l.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(g)}load(){return A._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new A.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const t=yield _r(this._options,this.map._requestManager,this._tileJSONRequest,this.map._ownerWindow);this._tileJSONRequest=null,this._loaded=!0,this.map.style.tileManagers[this.id].clearTiles(),t&&(A.e(this,t),t.bounds&&(this.tileBounds=new Wr(t.bounds,this.minzoom,this.maxzoom)),this.fire(new A.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new A.l("data",{dataType:"source",sourceDataType:"content"})))}catch(t){this._tileJSONRequest=null,this._loaded=!0,A.Z(t)||this.fire(new A.k(t))}}))}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.abort(),t(),this.load()}setTiles(t){return this.setSourceProperty((()=>{this._options.tiles=t})),this}setUrl(t){return this.setSourceProperty((()=>{this.url=t,this._options.url=t})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return A.e({},this._options)}loadTile(t){return A._(this,void 0,void 0,(function*(){const l=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f={request:this.map._requestManager.transformRequest(l,"Tile"),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,encoding:this.encoding,overzoomParameters:this._getOverzoomParameters(t)};f.request.collectResourceTiming=this._collectResourceTiming;let g="RT";if(t.actor&&t.state!=="expired"){if(t.state==="loading")return new Promise(((B,E)=>{t.reloadPromise={resolve:B,reject:E}}))}else t.actor=this.dispatcher.getActor(),g="LT";t.abortController=new AbortController;try{const B=yield t.actor.sendAsync({type:g,data:f},t.abortController);if(delete t.abortController,t.aborted)return;this._afterTileLoadWorkerResponse(t,B)}catch(B){if(delete t.abortController,t.aborted)return;if(B&&B.status!==404)throw B;this._afterTileLoadWorkerResponse(t,null)}}))}_getOverzoomParameters(t){if(t.tileID.canonical.z<=this.maxzoom||this.map._zoomLevelsToOverscale===void 0)return;const l=t.tileID.scaledTo(this.maxzoom).canonical,f=l.url(this.tiles,this.map.getPixelRatio(),this.scheme);return{maxZoomTileID:l,overzoomRequest:this.map._requestManager.transformRequest(f,"Tile")}}_afterTileLoadWorkerResponse(t,l){if(l&&l.resourceTiming&&(t.resourceTiming=l.resourceTiming),l&&this.map._refreshExpiredTiles&&t.setExpiryData(l),t.loadVectorData(l,this.map.painter),t.reloadPromise){const f=t.reloadPromise;t.reloadPromise=null,this.loadTile(t).then(f.resolve).catch(f.reject)}}abortTile(t){return A._(this,void 0,void 0,(function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.actor&&(yield t.actor.sendAsync({type:"AT",data:{uid:t.uid,type:this.type,source:this.id}}))}))}unloadTile(t){return A._(this,void 0,void 0,(function*(){t.unloadVectorData(),t.actor&&(yield t.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class Zr extends A.E{constructor(t,l,f,g){super(),this.id=t,this.dispatcher=f,this.setEventedParent(g),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=A.e({type:"raster"},l),A.e(this,A.U(l,["url","scheme","tileSize"]))}load(){return A._(this,arguments,void 0,(function*(t=!1){this._loaded=!1,this.fire(new A.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const l=yield _r(this._options,this.map._requestManager,this._tileJSONRequest,this.map._ownerWindow);this._tileJSONRequest=null,this._loaded=!0,l&&(A.e(this,l),l.bounds&&(this.tileBounds=new Wr(l.bounds,this.minzoom,this.maxzoom)),this.fire(new A.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new A.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:t})))}catch(l){this._tileJSONRequest=null,this._loaded=!0,A.Z(l)||this.fire(new A.k(l))}}))}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(t){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),t(),this.load(!0)}setTiles(t){return this.setSourceProperty((()=>{this._options.tiles=t})),this}setUrl(t){return this.setSourceProperty((()=>{this.url=t,this._options.url=t})),this}serialize(){return A.e({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(t){return A._(this,void 0,void 0,(function*(){const l=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);t.abortController=new AbortController;try{const f=yield ut.getImage(this.map._requestManager.transformRequest(l,"Tile"),t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(f&&f.data){this.map._refreshExpiredTiles&&(f.cacheControl||f.expires)&&t.setExpiryData({cacheControl:f.cacheControl,expires:f.expires});const g=this.map.painter.context,B=g.gl,E=f.data;t.texture=this.map.painter.getTileTexture(E.width),t.texture?t.texture.update(E,{useMipmap:!0}):(t.texture=new A.T(g,E,B.RGBA,{useMipmap:!0}),t.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST)),t.state="loaded"}}catch(f){if(delete t.abortController,t.aborted)t.state="unloaded";else if(f)throw t.state="errored",f}}))}abortTile(t){return A._(this,void 0,void 0,(function*(){t.abortController&&(t.abortController.abort(),delete t.abortController)}))}unloadTile(t){return A._(this,void 0,void 0,(function*(){t.texture&&this.map.painter.saveTileTexture(t.texture)}))}hasTransition(){return!1}}class Sr extends Zr{constructor(t,l,f,g){super(t,l,f,g),this.type="raster-dem",this.maxzoom=22,this._options=A.e({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox",this.redFactor=l.redFactor,this.greenFactor=l.greenFactor,this.blueFactor=l.blueFactor,this.baseShift=l.baseShift}loadTile(t){return A._(this,void 0,void 0,(function*(){const l=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f=this.map._requestManager.transformRequest(l,"Tile");t.neighboringTiles=this._getNeighboringTiles(t.tileID),t.abortController=new AbortController;try{const g=yield ut.getImage(f,t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(g&&g.data){const B=g.data;this.map._refreshExpiredTiles&&(g.cacheControl||g.expires)&&t.setExpiryData({cacheControl:g.cacheControl,expires:g.expires});const E=A.b(B)&&A.$()?B:yield this.readImageNow(B),L={type:this.type,uid:t.uid,source:this.id,rawImageData:E,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!t.actor||t.state==="expired"){t.actor=this.dispatcher.getActor();const N=yield t.actor.sendAsync({type:"LDT",data:L});t.dem=N,t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0,t.state="loaded"}}}catch(g){if(delete t.abortController,t.aborted)t.state="unloaded";else if(g)throw t.state="errored",g}}))}readImageNow(t){return A._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&A.a0()){const l=t.width+2,f=t.height+2;try{return new A.R({width:l,height:f},yield A.a1(t,-1,-1,l,f))}catch{}}return O.getImageData(t,1)}))}_getNeighboringTiles(t){const l=t.canonical,f=Math.pow(2,l.z),g=(l.x-1+f)%f,B=l.x===0?t.wrap-1:t.wrap,E=(l.x+1+f)%f,L=l.x+1===f?t.wrap+1:t.wrap,N={};return N[new A.a2(t.overscaledZ,B,l.z,g,l.y).key]={backfilled:!1},N[new A.a2(t.overscaledZ,L,l.z,E,l.y).key]={backfilled:!1},l.y>0&&(N[new A.a2(t.overscaledZ,B,l.z,g,l.y-1).key]={backfilled:!1},N[new A.a2(t.overscaledZ,t.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},N[new A.a2(t.overscaledZ,L,l.z,E,l.y-1).key]={backfilled:!1}),l.y+1<f&&(N[new A.a2(t.overscaledZ,B,l.z,g,l.y+1).key]={backfilled:!1},N[new A.a2(t.overscaledZ,t.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},N[new A.a2(t.overscaledZ,L,l.z,E,l.y+1).key]={backfilled:!1}),N}unloadTile(t){return A._(this,void 0,void 0,(function*(){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&(yield t.actor.sendAsync({type:"RDT",data:{type:this.type,uid:t.uid,source:this.id}}))}))}}function Vr(b){return b&&b.length!==0?typeof b[0]=="number"?[b]:b.flatMap((t=>Vr(t))):[]}function Gr(b){return b.type==="GeometryCollection"?b.geometries.flatMap((t=>Gr(t))):Vr(b.coordinates)}function mn(b){const t=new Qr;let l;switch(b.type){case"FeatureCollection":l=b.features.flatMap((f=>Gr(f.geometry)));break;case"Feature":l=Gr(b.geometry);break;default:l=Gr(b)}if(l.length===0)return t;for(let f=0;f<l.length;f++){const[g,B]=l[f];t.extend([g,B])}return t}class Cn extends A.E{constructor(t,l,f,g){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:l.data},this.actor=f.getActor(),this.setEventedParent(g),this._data=typeof l.data=="string"?{url:l.data}:{geojson:l.data},this._options=A.e({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId,l.clusterMaxZoom!==void 0&&this.maxzoom<=l.clusterMaxZoom&&A.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${l.clusterMaxZoom}".`),this.workerOptions=A.e({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(l.buffer!==void 0?l.buffer:128),tolerance:this._pixelsToTileUnits(l.tolerance!==void 0?l.tolerance:.375),extent:A.a5,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(l.clusterMaxZoom),minPoints:Math.max(2,l.clusterMinPoints||2),extent:A.a5,radius:this._pixelsToTileUnits(l.clusterRadius||50),log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(t){return t*(A.a5/this.tileSize)}_getClusterMaxZoom(t){const l=t?Math.round(t):this.maxzoom-1;return Number.isInteger(t)||t===void 0||A.w(`Integer expected for option 'clusterMaxZoom': provided value "${t}" rounded to "${l}"`),l}load(){return A._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(t){this.map=t,this.load()}setData(t,l){this._data=typeof t=="string"?{url:t}:{geojson:t},this._pendingWorkerUpdate={data:t};const f=this._updateWorkerData();return l?f:this}updateData(t,l){this._pendingWorkerUpdate.diff=A.a6(this._pendingWorkerUpdate.diff,t);const f=this._updateWorkerData();return l?f:this}getData(){return A._(this,void 0,void 0,(function*(){const t=A.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:t})}))}getBounds(){return A._(this,void 0,void 0,(function*(){return mn(yield this.getData())}))}setClusterOptions(t){return this.workerOptions.cluster=t.cluster,t.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(t.clusterRadius)),t.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(t.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(t){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:t,source:this.id}})}getClusterChildren(t){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:t,source:this.id}})}getClusterLeaves(t,l,f){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:t,limit:l,offset:f}})}_updateWorkerData(){return A._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void A.w(`No pending worker updates for GeoJSONSource ${this.id}.`);const{data:t,diff:l}=this._pendingWorkerUpdate,f=this._getLoadGeoJSONParameters(t,l);t!==void 0?this._pendingWorkerUpdate.data=void 0:l&&(this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,yield this._dispatchWorkerUpdate(f)}))}_getLoadGeoJSONParameters(t,l){const f=A.e({type:this.type},this.workerOptions);return typeof t=="string"?(f.request=this.map._requestManager.transformRequest(O.resolveURL(t),"Source"),f.request.collectResourceTiming=this._collectResourceTiming,f):t!==void 0?(f.data=t,f):(l&&(f.dataDiff=l),f)}_dispatchWorkerUpdate(t){return A._(this,void 0,void 0,(function*(){this._isUpdatingWorker=!0,this.fire(new A.l("dataloading",{dataType:"source"}));try{const l=yield this.actor.sendAsync({type:"LD",data:t});if(this._isUpdatingWorker=!1,this._removed||l.abandoned)return void this.fire(new A.l("dataabort",{dataType:"source"}));l.data&&(this._data={geojson:l.data});const f=this._applyDiffToSource(t.dataDiff),g=this._getShouldReloadTileOptions(f),B={dataType:"source"};this._applyResourceTiming(B,l),this.fire(new A.l("data",Object.assign(Object.assign({},B),{sourceDataType:"metadata"}))),this.fire(new A.l("data",Object.assign(Object.assign({},B),{sourceDataType:"content",shouldReloadTileOptions:g})))}catch(l){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new A.l("dataabort",{dataType:"source"}));this.fire(new A.k(l))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}}))}_applyResourceTiming(t,l){var f;if(!this._collectResourceTiming)return;const g=(f=l.resourceTiming)===null||f===void 0?void 0:f[this.id];if(!g)return;const B=g.slice(0);B?.length&&A.e(t,{resourceTiming:B})}_applyDiffToSource(t){if(!t)return;const l=typeof this.promoteId=="string"?this.promoteId:void 0;if(!this._data.url&&!this._data.updateable){const g=A.a7(this._data.geojson,l);if(!g)throw new Error(`GeoJSONSource "${this.id}": GeoJSON data is not compatible with updateData`);this._data={updateable:g}}if(!this._data.updateable)return;const f=A.a8(this._data.updateable,t,l);return t.removeAll||this._options.cluster?void 0:f}_getShouldReloadTileOptions(t){if(t)return{affectedBounds:t.filter(Boolean).map((l=>mn(l)))}}shouldReloadTile(t,{affectedBounds:l}){if(t.state==="loading")return!0;if(t.state==="unloaded")return!1;const{buffer:f,extent:g}=this.workerOptions.geojsonVtOptions,B=(function({x:E,y:L,z:N},H=0){const G=A.a3((E-H)/Math.pow(2,N)),$=A.a4((L+1+H)/Math.pow(2,N)),Y=A.a3((E+1+H)/Math.pow(2,N)),se=A.a4((L-H)/Math.pow(2,N));return new Qr([G,$],[Y,se])})(t.tileID.canonical,f/g);for(const E of l)if(B.intersects(E))return!0;return!1}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(t){return A._(this,void 0,void 0,(function*(){const l=t.actor?"RT":"LT";t.actor=this.actor;const f={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};t.abortController=new AbortController;const g=yield this.actor.sendAsync({type:l,data:f},t.abortController);delete t.abortController,t.unloadVectorData(),t.aborted||t.loadVectorData(g,this.map.painter,l==="RT")}))}abortTile(t){return A._(this,void 0,void 0,(function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.aborted=!0}))}unloadTile(t){return A._(this,void 0,void 0,(function*(){t.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:t.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return A.e({},this._options,{type:this.type,data:this._data.updateable?{type:"FeatureCollection",features:Array.from(this._data.updateable.values())}:this._data.url||this._data.geojson})}hasTransition(){return!1}}class An extends A.E{constructor(t,l,f,g){super(),this.flippedWindingOrder=!1,this.id=t,this.dispatcher=f,this.coordinates=l.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(g),this.options=l}load(t){return A._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new A.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const l=yield ut.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,l&&l.data&&(this.image=l.data,t&&(this.coordinates=t),this._finishLoading())}catch(l){this._request=null,this._loaded=!0,A.Z(l)||this.fire(new A.k(l))}}))}loaded(){return this._loaded}updateImage(t){return t.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=t.url,this.load(t.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new A.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(t){this.coordinates=t;const l=t.map(A.a9.fromLngLat);var f;return this.tileID=(function(g){const B=A.aa.fromPoints(g),E=B.width(),L=B.height(),N=Math.max(E,L),H=Math.max(0,Math.floor(-Math.log(N)/Math.LN2)),G=Math.pow(2,H);return new A.ac(H,Math.floor((B.minX+B.maxX)/2*G),Math.floor((B.minY+B.maxY)/2*G))})(l),this.terrainTileRanges=this._getOverlappingTileRanges(l),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=l.map((g=>this.tileID.getTilePoint(g)._round())),this.flippedWindingOrder=((f=this.tileCoords)[1].x-f[0].x)*(f[2].y-f[0].y)-(f[1].y-f[0].y)*(f[2].x-f[0].x)<0,this.fire(new A.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const t=this.map.painter.context,l=t.gl;this.texture||(this.texture=new A.T(t,this.image,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let f=!1;for(const g in this.tiles){const B=this.tiles[g];B.state!=="loaded"&&(B.state="loaded",B.texture=this.texture,f=!0)}f&&this.fire(new A.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(t){return A._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={}):t.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(t){const{minX:l,minY:f,maxX:g,maxY:B}=A.aa.fromPoints(t),E={};for(let L=0;L<=A.ab;L++){const N=Math.pow(2,L),H=Math.floor(l*N),G=Math.floor(f*N),$=Math.floor(g*N),Y=Math.floor(B*N),se=(H%N+N)%N,de=$%N,Se=Math.floor(H/N),Me=Math.floor($/N);E[L]={minWrap:Se,maxWrap:Me,minTileXWrapped:se,maxTileXWrapped:de,minTileY:G,maxTileY:Y}}return E}}class Fn extends An{constructor(t,l,f,g){super(t,l,f,g),this.roundZoom=!0,this.type="video",this.options=l}load(){return A._(this,void 0,void 0,(function*(){this._loaded=!1;const t=this.options;this.urls=[];for(const l of t.urls)this.urls.push(this.map._requestManager.transformRequest(l,"Source").url);try{const l=yield A.ad(this.urls);if(this._loaded=!0,!l)return;this.video=l,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(l){this.fire(new A.k(l))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const l=this.video.seekable;t<l.start(0)||t>l.end(0)?this.fire(new A.k(new A.ae(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const t=this.map.painter.context,l=t.gl;this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new A.T(t,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let f=!1;for(const g in this.tiles){const B=this.tiles[g];B.state!=="loaded"&&(B.state="loaded",B.texture=this.texture,f=!0)}f&&this.fire(new A.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Sn extends An{constructor(t,l,f,g){super(t,l,f,g),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some((B=>!Array.isArray(B)||B.length!==2||B.some((E=>typeof E!="number"))))||this.fire(new A.k(new A.ae(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new A.k(new A.ae(`sources.${t}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new A.k(new A.ae(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof HTMLCanvasElement||this.fire(new A.k(new A.ae(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new A.k(new A.ae(`sources.${t}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){return A._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new A.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context,f=l.gl;this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):(this.texture=new A.T(l,this.canvas,f.RGBA,{premultiply:!0}),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE));let g=!1;for(const B in this.tiles){const E=this.tiles[B];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture,g=!0)}g&&this.fire(new A.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",animate:this.animate,canvas:this.options.canvas,coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}const Or={},gn=b=>{switch(b){case"geojson":return Cn;case"image":return An;case"raster":return Zr;case"raster-dem":return Sr;case"vector":return lr;case"video":return Fn;case"canvas":return Sn}return Or[b]},Je="RTLPluginLoaded";class ee extends A.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Ar()}_syncState(t){return this.status=t,this.dispatcher.broadcast("SRPS",{pluginStatus:t,pluginURL:this.url}).catch((l=>{throw this.status="error",l}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(t){return A._(this,arguments,void 0,(function*(l,f=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=O.resolveURL(l),!this.url)throw new Error(`requested url ${l} is invalid`);if(this.status==="unavailable"){if(!f)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return A._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new A.l(Je))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let ne=null;function Ae(){return ne||(ne=new ee),ne}var De,Xe;(function(b){b[b.Base=0]="Base",b[b.Parent=1]="Parent"})(De||(De={})),(function(b){b[b.Departing=0]="Departing",b[b.Incoming=1]="Incoming"})(Xe||(Xe={}));class At{constructor(t,l){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=t,this.uid=A.af(),this.uses=0,this.tileSize=l,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttFingerprint={},this.expiredRequestCount=0,this.state="loading"}isRenderable(t){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(t||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:t,fadingDirection:l,fadingParentID:f,fadeEndTime:g}){this.resetFadeLogic(),this.fadingRole=t,this.fadingDirection=l,this.fadingParentID=f,this.fadeEndTime=g}setSelfFadeLogic(t){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=t}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=ie(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(t){this.demTexture&&t.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(t,l,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData,this.latestFeatureIndex.encoding=t.encoding):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData,this.latestFeatureIndex.encoding=this.latestEncoding)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=(function(g,B){const E={};if(!B)return E;for(const L of g){const N=L.layerIds.map((H=>B.getLayer(H))).filter(Boolean);if(N.length!==0){L.layers=N,L.stateDependentLayerIds&&(L.stateDependentLayers=L.stateDependentLayerIds.map((H=>N.filter((G=>G.id===H))[0])));for(const H of N)E[H.id]=L}}return E})(t.buckets,l?.style),this.hasSymbolBuckets=!1;for(const g in this.buckets){const B=this.buckets[g];if(B instanceof A.ah){if(this.hasSymbolBuckets=!0,!f)break;B.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const g in this.buckets){const B=this.buckets[g];if(B instanceof A.ah&&B.hasRTLText){this.hasRTLText=!0,Ae().lazyLoad();break}}this.queryPadding=0;for(const g in this.buckets){const B=this.buckets[g];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(g).queryRadius(B))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage),this.dashPositions=t.dashPositions}else this.collisionBoxArray=new A.ag}unloadVectorData(){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(const f in this.buckets){const g=this.buckets[f];g.uploadPending()&&g.upload(t)}const l=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new A.T(t,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new A.T(t,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,l,f,g,B,E,L,N,H,G,$){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:g,cameraQueryGeometry:B,scale:E,tileSize:this.tileSize,pixelPosMatrix:G,transform:N,params:L,queryPadding:this.queryPadding*H,getElevation:$},t,l,f):{}}querySourceFeatures(t,l){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const g=f.loadVTLayers(),B=l&&l.sourceLayer?l.sourceLayer:"",E=g[A.ai]||g[B];if(!E)return;const L=A.aj(l?.filter,l?.globalState),{z:N,x:H,y:G}=this.tileID.canonical,$={z:N,x:H,y:G};for(let Y=0;Y<E.length;Y++){const se=E.feature(Y);if(L.needGeometry){const Me=A.ak(se,!0);if(!L.filter(new A.H(this.tileID.overscaledZ),Me,this.tileID.canonical))continue}else if(!L.filter(new A.H(this.tileID.overscaledZ),se))continue;const de=f.getId(se,B),Se=new A.al(se,N,H,G,de);Se.tile=$,t.push(Se)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const l=this.expirationTime;if(t.cacheControl){const f=A.am(t.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const f=Date.now();let g=!1;if(this.expirationTime>f)g=!1;else if(l)if(this.expirationTime<l)g=!0;else{const B=this.expirationTime-l;B?this.expirationTime=f+Math.max(B,3e4):g=!0}else g=!0;g?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(t,l){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(t).length===0)return;const f=this.latestFeatureIndex.loadVTLayers();for(const g in this.buckets){if(!l.style.hasLayer(g))continue;const B=this.buckets[g],E=B.layers[0].sourceLayer||A.ai,L=f[E],N=t[E];if(!L||!N||Object.keys(N).length===0)continue;B.update(N,L,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const H=l&&l.style&&l.style.getLayer(g);H&&(this.queryPadding=Math.max(this.queryPadding,H.queryRadius(B)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ie()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(t){this.symbolFadeHoldUntil=ie()+t}setDependencies(t,l){const f={};for(const g of l)f[g]=!0;this.dependencies[t]=f}hasDependency(t,l){for(const f of t){const g=this.dependencies[f];if(g){for(const B of l)if(g[B])return!0}}return!1}}class bt{constructor(){this.state={},this.stateChanges={},this.deletedStates={},this.revision=0}updateState(t,l,f){const g=String(l);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][g]=this.stateChanges[t][g]||{},A.e(this.stateChanges[t][g],f),this.deletedStates[t]===null){this.deletedStates[t]={};for(const B in this.state[t])B!==g&&(this.deletedStates[t][B]=null)}else if(this.deletedStates[t]&&this.deletedStates[t][g]===null){this.deletedStates[t][g]={};for(const B in this.state[t][g])f[B]||(this.deletedStates[t][g][B]=null)}else for(const B in f)this.deletedStates[t]&&this.deletedStates[t][g]&&this.deletedStates[t][g][B]===null&&delete this.deletedStates[t][g][B]}removeFeatureState(t,l,f){if(this.deletedStates[t]===null)return;const g=String(l);if(this.deletedStates[t]=this.deletedStates[t]||{},f&&l!==void 0)this.deletedStates[t][g]!==null&&(this.deletedStates[t][g]=this.deletedStates[t][g]||{},this.deletedStates[t][g][f]=null);else if(l!==void 0)if(this.stateChanges[t]&&this.stateChanges[t][g])for(f in this.deletedStates[t][g]={},this.stateChanges[t][g])this.deletedStates[t][g][f]=null;else this.deletedStates[t][g]=null;else this.deletedStates[t]=null}getState(t,l){const f=String(l),g=A.e({},(this.state[t]||{})[f],(this.stateChanges[t]||{})[f]);if(this.deletedStates[t]===null)return{};if(this.deletedStates[t]){const B=this.deletedStates[t][l];if(B===null)return{};for(const E in B)delete g[E]}return g}initializeTileState(t,l){t.setFeatureState(this.state,l)}coalesceChanges(t,l){const f={};for(const g in this.stateChanges){this.state[g]=this.state[g]||{};const B={};for(const E in this.stateChanges[g])this.state[g][E]||(this.state[g][E]={}),A.e(this.state[g][E],this.stateChanges[g][E]),B[E]=this.state[g][E];f[g]=B}for(const g in this.deletedStates){this.state[g]=this.state[g]||{};const B={};if(this.deletedStates[g]===null)for(const E in this.state[g])B[E]={},this.state[g][E]={};else for(const E in this.deletedStates[g]){if(this.deletedStates[g][E]===null)this.state[g][E]={};else for(const L of Object.keys(this.deletedStates[g][E]))delete this.state[g][E][L];B[E]=this.state[g][E]}f[g]=f[g]||{},A.e(f[g],B)}this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0&&(this.revision++,t.setFeatureState(f,l))}}const it=89.25;function dt(b,t){const l=A.an(t.lat,-A.ao,A.ao);return new A.P(A.Y(t.lng)*b,A.X(l)*b)}function jt(b,t){return new A.a9(t.x/b,t.y/b).toLngLat()}function Bt(b){return b.cameraToCenterDistance*Math.min(.85*Math.tan(A.ap(90-b.pitch)),Math.tan(A.ap(it-b.pitch)))}function Qe(b,t){const l=b.canonical,f=t/A.aq(l.z),g=l.x+Math.pow(2,l.z)*b.wrap,B=A.ar(new Float64Array(16));return A.O(B,B,[g*f,l.y*f,0]),A.Q(B,B,[f/A.a5,f/A.a5,1]),B}function ur(b,t,l,f,g){const B=A.a9.fromLngLat(b,t),E=g*A.as(1,b.lat),{x:L,y:N,z:H}=Xr(l,f);return new A.a9(B.x+E*-L,B.y+E*-N,B.z+E*-H)}function Xr(b,t){const l=A.ap(b),f=A.ap(t),g=Math.cos(-l),B=Math.sin(l);return{x:B*Math.sin(f),y:-B*Math.cos(f),z:g}}function Er(b,t,l){const f=t.intersectsFrustum(b);if(!l||f===0)return f;const g=t.intersectsPlane(l);return g===0?0:f===2&&g===2?2:1}function zr(b,t,l){let f=0;const g=(l-t)/10;for(let B=0;B<10;B++)f+=g*Math.pow(Math.cos(t+(B+.5)/10*(l-t)),b);return f}function Pr(b,t){return function(l,f,g,B,E){const L=2*((b-1)/A.at(Math.cos(A.ap(it-E))/Math.cos(A.ap(it)))-1),N=Math.acos(g/B),H=2*zr(L-1,0,A.ap(E/2)),G=Math.min(A.ap(it),N+A.ap(E/2)),$=zr(L-1,Math.min(G,N-A.ap(E/2)),G),Y=Math.atan(f/g),se=Math.hypot(f,g);let de=l;return de+=A.at(B/se/Math.max(.5,Math.cos(A.ap(E/2)))),de+=L*A.at(Math.cos(Y))/2,de-=A.at(Math.max(1,$/H/t))/2,de}}const dr=Pr(9.314,3);function mi(b,t){const l=(t.roundZoom?Math.round:Math.floor)(b.zoom+A.at(b.tileSize/t.tileSize));return Math.max(0,l)}function Kn(b,t){const l=b.getCameraFrustum(),f=b.getClippingPlane(),g=b.screenPointToMercatorCoordinate(b.getCameraPoint()),B=A.a9.fromLngLat(b.center,b.elevation);g.z=B.z+Math.cos(b.pitchInRadians)*b.cameraToCenterDistance/b.worldSize;const E=b.getCoveringTilesDetailsProvider(),L=E.allowVariableZoom(b,t),N=mi(b,t),H=t.minzoom||0,G=t.maxzoom!==void 0?t.maxzoom:b.maxZoom,$=Math.min(Math.max(0,N),G),Y=Math.pow(2,$),se=[Y*g.x,Y*g.y,0],de=[Y*B.x,Y*B.y,0],Se=Math.hypot(B.x-g.x,B.y-g.y),Me=Math.abs(B.z-g.z),Ee=Math.hypot(Se,Me),je=nt=>({zoom:0,x:0,y:0,wrap:nt,fullyVisible:!1}),et=[],ze=[];if(b.renderWorldCopies&&E.allowWorldCopies())for(let nt=1;nt<=3;nt++)et.push(je(-nt)),et.push(je(nt));for(et.push(je(0));et.length>0;){const nt=et.pop(),at=nt.x,$e=nt.y;let gt=nt.fullyVisible;const Nt={x:at,y:$e,z:nt.zoom},Dt=E.getTileBoundingVolume(Nt,nt.wrap,b.elevation,t);if(!gt){const fr=Er(l,Dt,f);if(fr===0)continue;gt=fr===2}const It=E.distanceToTile2d(g.x,g.y,Nt,Dt);let Qt=N;L&&(Qt=(t.calculateTileZoom||dr)(b.zoom+A.at(b.tileSize/t.tileSize),It,Me,Ee,b.fov)),Qt=(t.roundZoom?Math.round:Math.floor)(Qt),Qt=Math.max(0,Qt);const cr=Math.min(Qt,G);if(nt.wrap=E.getWrap(B,Nt,nt.wrap),nt.zoom>=cr){if(nt.zoom<H)continue;const fr=$-nt.zoom,Ht=se[0]-.5-(at<<fr),Tr=se[1]-.5-($e<<fr),_n=t.reparseOverscaled?Math.max(nt.zoom,Qt):nt.zoom;ze.push({tileID:new A.a2(nt.zoom===G?_n:nt.zoom,nt.wrap,nt.zoom,at,$e),distanceSq:A.au([de[0]-.5-at,de[1]-.5-$e]),tileDistanceToCamera:Math.sqrt(Ht*Ht+Tr*Tr)})}else for(let fr=0;fr<4;fr++)et.push({zoom:nt.zoom+1,x:(at<<1)+fr%2,y:($e<<1)+(fr>>1),wrap:nt.wrap,fullyVisible:gt})}return ze.sort(((nt,at)=>nt.distanceSq-at.distanceSq)).map((nt=>nt.tileID))}const Jn=A.aa.fromPoints([new A.P(0,0),new A.P(A.a5,A.a5)]);function wi(b){return b==="raster"||b==="image"||b==="video"}function xn(b,t,l,f,g,B,E){if(!t.hasData())return!1;const{tileID:L,fadingRole:N,fadingDirection:H,fadingParentID:G}=t;if(N===De.Base&&H===Xe.Incoming&&G)return l[G.key]=G,!0;const $=Math.max(L.overscaledZ-g,B);for(let Y=L.overscaledZ-1;Y>=$;Y--){const se=L.scaledTo(Y),de=b.getLoadedTile(se);if(de)return t.setCrossFadeLogic({fadingRole:De.Base,fadingDirection:Xe.Incoming,fadingParentID:de.tileID,fadeEndTime:f+E}),de.setCrossFadeLogic({fadingRole:De.Parent,fadingDirection:Xe.Departing,fadeEndTime:f+E}),l[se.key]=se,!0}return!1}function Wt(b,t,l,f,g,B){if(!t.hasData())return!1;const E=t.tileID.children(g);let L=fn(b,t,E,l,f,g,B);if(L)return!0;for(const N of E)fn(b,t,N.children(g),l,f,g,B)&&(L=!0);return L}function fn(b,t,l,f,g,B,E){if(l[0].overscaledZ>=B)return!1;let L=!1;for(const N of l){const H=b.getLoadedTile(N);if(!H)continue;const{fadingRole:G,fadingDirection:$,fadingParentID:Y}=H;G===De.Base&&$===Xe.Departing&&Y||(H.setCrossFadeLogic({fadingRole:De.Base,fadingDirection:Xe.Departing,fadingParentID:t.tileID,fadeEndTime:g+E}),t.setCrossFadeLogic({fadingRole:De.Parent,fadingDirection:Xe.Incoming,fadeEndTime:g+E})),f[N.key]=N,L=!0}return L}function li(b,t,l,f){const g=b.tileID;return!!b.selfFading||!b.hasData()&&!!t.has(g)&&(b.setSelfFadeLogic(l+f),!0)}function xa(b,t){var l;b.needsHillshadePrepare=!0,b.needsTerrainPrepare=!0;let f=t.tileID.canonical.x-b.tileID.canonical.x;const g=t.tileID.canonical.y-b.tileID.canonical.y,B=Math.pow(2,b.tileID.canonical.z),E=t.tileID.key;f===0&&g===0||Math.abs(g)>1||(Math.abs(f)>1&&(Math.abs(f+B)===1?f+=B:Math.abs(f-B)===1&&(f-=B)),t.dem&&b.dem&&(b.dem.backfillBorder(t.dem,f,g),!((l=b.neighboringTiles)===null||l===void 0)&&l[E]&&(b.neighboringTiles[E].backfilled=!0)))}class Wn{constructor(){this._tiles={}}handleWrapJump(t){const l={};for(const f in this._tiles){const g=this._tiles[f];g.tileID=g.tileID.unwrapTo(g.tileID.wrap+t),l[g.tileID.key]=g}this._tiles=l}setFeatureState(t,l){for(const f in this._tiles)this._tiles[f].setFeatureState(t,l)}getAllTiles(){return Object.values(this._tiles)}getAllIds(t=!1){return t?Object.values(this._tiles).map((l=>l.tileID)).sort(A.aw).map((l=>l.key)):Object.keys(this._tiles)}getTileById(t){return this._tiles[t]}setTile(t,l){this._tiles[t]=l}deleteTileById(t){delete this._tiles[t]}getLoadedTile(t){const l=this.getTileById(t.key);return l?.hasData()?l:null}isIdRenderable(t,l=!1){var f;return(f=this.getTileById(t))===null||f===void 0?void 0:f.isRenderable(l)}getRenderableIds(t=0,l){const f=[];for(const g of this.getAllIds())this.isIdRenderable(g,l)&&f.push(this.getTileById(g));return l?f.sort(((g,B)=>{const E=g.tileID,L=B.tileID,N=new A.P(E.canonical.x,E.canonical.y)._rotate(-t),H=new A.P(L.canonical.x,L.canonical.y)._rotate(-t);return E.overscaledZ-L.overscaledZ||H.y-N.y||H.x-N.x})).map((g=>g.tileID.key)):f.map((g=>g.tileID)).sort(A.aw).map((g=>g.key))}}class Jt extends A.E{constructor(t,l,f){super(),this.id=t,this.dispatcher=f,this.on("data",(g=>this._dataHandler(g))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((g,B,E,L)=>{const N=new(gn(B.type))(g,B,E,L);if(N.id!==g)throw new Error(`Expected Source id to be ${g} instead of ${N.id}`);return N})(t,l,f,this),this._inViewTiles=new Wn,this._outOfViewCache=new A.ax(0,(g=>this._unloadTile(g))),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new bt,this._didEmitContent=!1,this._updated=!1}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._maxTileCacheZoomLevels=t?t._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(t)}onRemove(t){for(const l of this._inViewTiles.getAllTiles())l.unloadVectorData();this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(t),this._inViewTiles=new Wn}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const t of this._inViewTiles.getAllTiles())if(t.state!=="loaded"&&t.state!=="errored")return!1;return!0}getSource(){return this._source}getState(){return this._state}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(t,l,f){return A._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(t),this._tileLoaded(t,l,f)}catch(g){t.state="errored",g.status!==404?this._source.fire(new A.k(g,{tile:t})):this.update(this.transform,this.terrain)}}))}_unloadTile(t){this._source.unloadTile&&this._source.unloadTile(t)}_abortTile(t){this._source.abortTile&&this._source.abortTile(t),this._source.fire(new A.l("dataabort",{tile:t,coord:t.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._inViewTiles,this.map?this.map.painter:null);for(const l of this._inViewTiles.getAllTiles())l.upload(t),l.prepare(this.map.style.imageManager)}getIds(){return this._inViewTiles.getAllIds(!0)}getRenderableIds(t){var l;return this._inViewTiles.getRenderableIds((l=this.transform)===null||l===void 0?void 0:l.bearingInRadians,t)}hasRenderableParent(t){const l=t.overscaledZ-1;if(l>=this._source.minzoom){const f=this.getLoadedTile(t.scaledTo(l));if(f)return this._inViewTiles.isIdRenderable(f.tileID.key)}return!1}reload(t,l=void 0){if(this._paused)this._shouldReloadOnResume=!0;else{this._outOfViewCache.reset();for(const f of this._inViewTiles.getAllIds()){const g=this._inViewTiles.getTileById(f);l&&!this._source.shouldReloadTile(g,l)||(t?this._reloadTile(f,"expired"):g.state!=="errored"&&this._reloadTile(f,"reloading"))}}}_reloadTile(t,l){return A._(this,void 0,void 0,(function*(){const f=this._inViewTiles.getTileById(t);f&&(f.state!=="loading"&&(f.state=l),yield this._loadTile(f,t,l))}))}_tileLoaded(t,l,f){t.timeAdded=ie(),t.selfFading&&(t.fadeEndTime=t.timeAdded+this._rasterFadeDuration),f==="expired"&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(l,t),this.getSource().type==="raster-dem"&&t.dem&&(function(g,B){var E,L;const N=B.getRenderableIds();for(const H of N){if(!g.neighboringTiles||!g.neighboringTiles[H])continue;const G=B.getTileById(H);g.neighboringTiles[H].backfilled||xa(g,G),!((L=(E=G.neighboringTiles)===null||E===void 0?void 0:E[g.tileID.key])===null||L===void 0)&&L.backfilled||xa(G,g)}})(t,this._inViewTiles),this._state.initializeTileState(t,this.map?this.map.painter:null),t.aborted||this._source.fire(new A.l("data",{dataType:"source",tile:t,coord:t.tileID}))}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._inViewTiles.getTileById(t)}_retainLoadedChildren(t,l){const f=this._getLoadedDescendents(l),g=new Set;for(const B of l){const E=f[B.key];if(!E?.length){g.add(B);continue}const L=B.overscaledZ+Jt.maxOverzooming,N=E.filter(($=>$.tileID.overscaledZ<=L));if(!N.length){g.add(B);continue}const H=Math.min(...N.map(($=>$.tileID.overscaledZ))),G=N.filter(($=>$.tileID.overscaledZ===H)).map(($=>$.tileID));for(const $ of G)t[$.key]=$;this._areDescendentsComplete(G,H,B.overscaledZ)||g.add(B)}return g}_getLoadedDescendents(t){var l;const f={};for(const g of this._inViewTiles.getAllTiles().filter((B=>B.hasData())))for(const B of t)g.tileID.isChildOf(B)&&(f[l=B.key]||(f[l]=[])).push(g);return f}_areDescendentsComplete(t,l,f){return t.length===1&&t[0].isOverscaled()?t[0].overscaledZ===l:Math.pow(4,l-f)===t.length}getLoadedTile(t){return this._inViewTiles.getLoadedTile(t)}updateCacheSize(t){const l=Math.ceil(t.width/this._source.tileSize)+1,f=Math.ceil(t.height/this._source.tileSize)+1,g=Math.floor(l*f*(this._maxTileCacheZoomLevels===null?A.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),B=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,g):g;this._outOfViewCache.setMaxSize(B)}handleWrapJump(t){const l=Math.round((t-(this._prevLng===void 0?t:this._prevLng))/360);this._prevLng=t,l&&(this._inViewTiles.handleWrapJump(l),this._resetTileReloadTimers())}update(t,l){if(!this._sourceLoaded||this._paused)return;let f;this.transform=t,this.terrain=l,this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?f=t.getVisibleUnwrappedCoordinates(this._source.tileID).map((N=>new A.a2(N.canonical.z,N.wrap,N.canonical.z,N.canonical.x,N.canonical.y))):(f=Kn(t,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.type==="vector"&&this.map._zoomLevelsToOverscale!==void 0?t.maxZoom-this.map._zoomLevelsToOverscale:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:l,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(f=f.filter((N=>this._source.hasTile(N))))):f=[],this.usedForTerrain&&(f=this._addTerrainIdealTiles(f));const g=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,g&&this.fire(new A.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const B=mi(t,this._source),E=this._updateRetainedTiles(f,B),L=wi(this._source.type);L&&this._rasterFadeDuration>0&&!l&&(function(N,H,G,$,Y,se,de){const Se=ie(),Me=A.av(H);for(const Ee of H){const je=N.getTileById(Ee.key);je.fadingDirection!==Xe.Departing&&je.fadeOpacity!==0||je.resetFadeLogic(),xn(N,je,G,Se,$,Y,de)||Wt(N,je,G,Se,se,de)||li(je,Me,Se,de)||je.resetFadeLogic()}})(this._inViewTiles,f,E,this._maxFadingAncestorLevels,this._source.minzoom,this._source.maxzoom,this._rasterFadeDuration),L?this._cleanUpRasterTiles(E):this._cleanUpVectorTiles(E)}_cleanUpRasterTiles(t){for(const l of this._inViewTiles.getAllIds())t[l]||this._removeTile(l)}_cleanUpVectorTiles(t){for(const l of this._inViewTiles.getAllIds()){const f=this._inViewTiles.getTileById(l);t[l]?f.clearSymbolFadeHold():f.hasSymbolBuckets?f.holdingForSymbolFade()?f.symbolFadeFinished()&&this._removeTile(l):f.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(l)}}_addTerrainIdealTiles(t){const l=[];for(const f of t)if(f.canonical.z>this._source.minzoom){const g=f.scaledTo(f.canonical.z-1);l.push(g);const B=f.scaledTo(Math.max(this._source.minzoom,Math.min(f.canonical.z,5)));l.push(B)}return t.concat(l)}releaseSymbolFadeTiles(){for(const t of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(t).holdingForSymbolFade()&&this._removeTile(t)}_updateRetainedTiles(t,l){var f;const g=new Set;for(const H of t)this._addTile(H).hasData()||g.add(H);const B=t.reduce(((H,G)=>(H[G.key]=G,H)),{}),E=this._retainLoadedChildren(B,g),L={},N=Math.max(l-Jt.maxUnderzooming,this._source.minzoom);for(const H of E){let G=this._inViewTiles.getTileById(H.key),$=G?.wasRequested();for(let Y=H.overscaledZ-1;Y>=N;--Y){const se=H.scaledTo(Y);if(L[se.key])break;if(L[se.key]=!0,G=this.getTile(se),!G&&$&&(G=this._addTile(se)),G){const de=G.hasData();if((de||!(!((f=this.map)===null||f===void 0)&&f.cancelPendingTileRequestsWhileZooming)||$)&&(B[se.key]=se),$=G.wasRequested(),de)break}}}return B}_addTile(t){let l=this._inViewTiles.getTileById(t.key);if(l)return l;l=this._outOfViewCache.getAndRemove(t),l&&(l.resetFadeLogic(),this._setTileReloadTimer(t.key,l),l.tileID=t,this._state.initializeTileState(l,this.map?this.map.painter:null));const f=l;return l||(l=new At(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(l,t.key,l.state)),l.uses++,this._inViewTiles.setTile(t.key,l),f||this._source.fire(new A.l("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l}_setTileReloadTimer(t,l){this._clearTileReloadTimer(t);const f=l.getExpiryTimeout();f&&(this._timers[t]=setTimeout((()=>{this._reloadTile(t,"expired"),delete this._timers[t]}),f))}_clearTileReloadTimer(t){const l=this._timers[t];l&&(clearTimeout(l),delete this._timers[t])}_resetTileReloadTimers(){for(const t in this._timers)clearTimeout(this._timers[t]),delete this._timers[t];for(const t of this._inViewTiles.getAllIds()){const l=this._inViewTiles.getTileById(t);this._setTileReloadTimer(t,l)}}refreshTiles(t){for(const l of this._inViewTiles.getAllIds()){const f=this._inViewTiles.getTileById(l);(this._inViewTiles.isIdRenderable(l)||f.state=="errored")&&t.some((g=>g.equals(f.tileID.canonical)))&&this._reloadTile(l,"expired")}}_removeTile(t){const l=this._inViewTiles.getTileById(t);l&&(l.uses--,this._inViewTiles.deleteTileById(t),this._clearTileReloadTimer(t),l.uses>0||(l.hasData()&&l.state!=="reloading"?this._outOfViewCache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))}_dataHandler(t){t.dataType==="source"&&(t.sourceDataType!=="metadata"?t.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(t.sourceDataChanged,t.shouldReloadTileOptions),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t of this._inViewTiles.getAllIds())this._removeTile(t);this._outOfViewCache.reset()}tilesIn(t,l,f){const g=[],B=this.transform;if(!B)return g;const E=B.getCoveringTilesDetailsProvider().allowWorldCopies(),L=f?B.getCameraQueryGeometry(t):t,N=se=>B.screenPointToMercatorCoordinate(se,this.terrain),H=this.transformBbox(t,N,!E),G=this.transformBbox(L,N,!E),$=this.getIds(),Y=A.aa.fromPoints(G);for(let se=0;se<$.length;se++){const de=this._inViewTiles.getTileById($[se]);if(de.holdingForSymbolFade())continue;const Se=E?[de.tileID]:[de.tileID.unwrapTo(-1),de.tileID.unwrapTo(0)],Me=Math.pow(2,B.zoom-de.tileID.overscaledZ),Ee=l*de.queryPadding*A.a5/de.tileSize/Me;for(const je of Se){const et=Y.map((ze=>je.getTilePoint(new A.a9(ze.x,ze.y))));if(et.expandBy(Ee),et.intersects(Jn)){const ze=H.map((at=>je.getTilePoint(at))),nt=G.map((at=>je.getTilePoint(at)));g.push({tile:de,tileID:E?je:je.unwrapTo(0),queryGeometry:ze,cameraQueryGeometry:nt,scale:Me})}}}return g}transformBbox(t,l,f){let g=t.map(l);if(f){const B=A.aa.fromPoints(t);B.shrinkBy(.001*Math.min(B.width(),B.height()));const E=B.map(l);A.aa.fromPoints(g).covers(E)||(g=g.map((L=>L.x>.5?new A.a9(L.x-1,L.y,L.z):L)))}return g}getVisibleCoordinates(t){const l=this.getRenderableIds(t).map((f=>this._inViewTiles.getTileById(f).tileID));return this.transform&&this.transform.populateCache(l),l}hasTransition(){return!!this._source.hasTransition()||!(!wi(this._source.type)||!(function(t,l){if(l<=0)return!1;const f=ie();for(const g of t.getAllTiles())if(g.fadeEndTime>=f)return!0;return!1})(this._inViewTiles,this._rasterFadeDuration))}setRasterFadeDuration(t){this._rasterFadeDuration=t}setFeatureState(t,l,f){this._state.updateState(t=t||A.ai,l,f)}removeFeatureState(t,l,f){this._state.removeFeatureState(t=t||A.ai,l,f)}getFeatureState(t,l){return this._state.getState(t=t||A.ai,l)}setDependencies(t,l,f){const g=this._inViewTiles.getTileById(t);g&&g.setDependencies(l,f)}reloadTilesForDependencies(t,l){for(const f of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(f).hasDependency(t,l)&&this._reloadTile(f,"reloading");this._outOfViewCache.filter((f=>!f.hasDependency(t,l)))}areTilesLoaded(){for(const t of this._inViewTiles.getAllTiles())if(t.state!=="loaded"&&t.state!=="errored")return!1;return!0}}Jt.maxUnderzooming=10,Jt.maxOverzooming=3;class kr{constructor(t,l){this.reset(t,l)}reset(t,l){this.points=t||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(l||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(this.points.length===1)return this.points[0];t=A.an(t,0,1);let l=1,f=this._distances[l];const g=t*this.paddedLength+this.padding;for(;f<g&&l<this._distances.length;)f=this._distances[++l];const B=l-1,E=this._distances[B],L=f-E,N=L>0?(g-E)/L:0;return this.points[B].mult(1-N).add(this.points[l].mult(N))}}function qr(b,t){let l=!0;return b==="always"||b!=="never"&&t!=="never"||(l=!1),l}class Ji{constructor(t,l,f){const g=this.boxCells=[],B=this.circleCells=[];this.xCellCount=Math.ceil(t/f),this.yCellCount=Math.ceil(l/f);for(let E=0;E<this.xCellCount*this.yCellCount;E++)g.push([]),B.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=l,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/l,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,l,f,g,B){this._forEachCell(l,f,g,B,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(l),this.bboxes.push(f),this.bboxes.push(g),this.bboxes.push(B)}insertCircle(t,l,f,g){this._forEachCell(l-g,f-g,l+g,f+g,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(l),this.circles.push(f),this.circles.push(g)}_insertBoxCell(t,l,f,g,B,E){this.boxCells[B].push(E)}_insertCircleCell(t,l,f,g,B,E){this.circleCells[B].push(E)}_query(t,l,f,g,B,E,L){if(f<0||t>this.width||g<0||l>this.height)return[];const N=[];if(t<=0&&l<=0&&this.width<=f&&this.height<=g){if(B)return[{key:null,x1:t,y1:l,x2:f,y2:g}];for(let H=0;H<this.boxKeys.length;H++)N.push({key:this.boxKeys[H],x1:this.bboxes[4*H],y1:this.bboxes[4*H+1],x2:this.bboxes[4*H+2],y2:this.bboxes[4*H+3]});for(let H=0;H<this.circleKeys.length;H++){const G=this.circles[3*H],$=this.circles[3*H+1],Y=this.circles[3*H+2];N.push({key:this.circleKeys[H],x1:G-Y,y1:$-Y,x2:G+Y,y2:$+Y})}}else this._forEachCell(t,l,f,g,this._queryCell,N,{hitTest:B,overlapMode:E,seenUids:{box:{},circle:{}}},L);return N}query(t,l,f,g){return this._query(t,l,f,g,!1,null)}hitTest(t,l,f,g,B,E){return this._query(t,l,f,g,!0,B,E).length>0}hitTestCircle(t,l,f,g,B){const E=t-f,L=t+f,N=l-f,H=l+f;if(L<0||E>this.width||H<0||N>this.height)return!1;const G=[];return this._forEachCell(E,N,L,H,this._queryCellCircle,G,{hitTest:!0,overlapMode:g,circle:{x:t,y:l,radius:f},seenUids:{box:{},circle:{}}},B),G.length>0}_queryCell(t,l,f,g,B,E,L,N){const{seenUids:H,hitTest:G,overlapMode:$}=L,Y=this.boxCells[B];if(Y!==null){const de=this.bboxes;for(const Se of Y)if(!H.box[Se]){H.box[Se]=!0;const Me=4*Se,Ee=this.boxKeys[Se];if(t<=de[Me+2]&&l<=de[Me+3]&&f>=de[Me+0]&&g>=de[Me+1]&&(!N||N(Ee))&&(!G||!qr($,Ee.overlapMode))&&(E.push({key:Ee,x1:de[Me],y1:de[Me+1],x2:de[Me+2],y2:de[Me+3]}),G))return!0}}const se=this.circleCells[B];if(se!==null){const de=this.circles;for(const Se of se)if(!H.circle[Se]){H.circle[Se]=!0;const Me=3*Se,Ee=this.circleKeys[Se];if(this._circleAndRectCollide(de[Me],de[Me+1],de[Me+2],t,l,f,g)&&(!N||N(Ee))&&(!G||!qr($,Ee.overlapMode))){const je=de[Me],et=de[Me+1],ze=de[Me+2];if(E.push({key:Ee,x1:je-ze,y1:et-ze,x2:je+ze,y2:et+ze}),G)return!0}}}return!1}_queryCellCircle(t,l,f,g,B,E,L,N){const{circle:H,seenUids:G,overlapMode:$}=L,Y=this.boxCells[B];if(Y!==null){const de=this.bboxes;for(const Se of Y)if(!G.box[Se]){G.box[Se]=!0;const Me=4*Se,Ee=this.boxKeys[Se];if(this._circleAndRectCollide(H.x,H.y,H.radius,de[Me+0],de[Me+1],de[Me+2],de[Me+3])&&(!N||N(Ee))&&!qr($,Ee.overlapMode))return E.push(!0),!0}}const se=this.circleCells[B];if(se!==null){const de=this.circles;for(const Se of se)if(!G.circle[Se]){G.circle[Se]=!0;const Me=3*Se,Ee=this.circleKeys[Se];if(this._circlesCollide(de[Me],de[Me+1],de[Me+2],H.x,H.y,H.radius)&&(!N||N(Ee))&&!qr($,Ee.overlapMode))return E.push(!0),!0}}}_forEachCell(t,l,f,g,B,E,L,N){const H=this._convertToXCellCoord(t),G=this._convertToYCellCoord(l),$=this._convertToXCellCoord(f),Y=this._convertToYCellCoord(g);for(let se=H;se<=$;se++)for(let de=G;de<=Y;de++)if(B.call(this,t,l,f,g,this.xCellCount*de+se,E,L,N))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,l,f,g,B,E){const L=g-t,N=B-l,H=f+E;return H*H>L*L+N*N}_circleAndRectCollide(t,l,f,g,B,E,L){const N=(E-g)/2,H=Math.abs(t-(g+N));if(H>N+f)return!1;const G=(L-B)/2,$=Math.abs(l-(B+G));if($>G+f)return!1;if(H<=N||$<=G)return!0;const Y=H-N,se=$-G;return Y*Y+se*se<=f*f}}function Ko(b,t,l){const f=A.N();if(!b){const{vecSouth:$,vecEast:Y}=an(t),se=I();se[0]=Y[0],se[1]=Y[1],se[2]=$[0],se[3]=$[1],g=se,(G=(E=(B=se)[0])*(H=B[3])-(N=B[2])*(L=B[1]))&&(g[0]=H*(G=1/G),g[1]=-L*G,g[2]=-N*G,g[3]=E*G),f[0]=se[0],f[1]=se[1],f[4]=se[2],f[5]=se[3]}var g,B,E,L,N,H,G;return A.Q(f,f,[1/l,1/l,1]),f}function os(b,t,l,f){if(b){const g=A.N();if(!t){const{vecSouth:B,vecEast:E}=an(l);g[0]=E[0],g[1]=E[1],g[4]=B[0],g[5]=B[1]}return A.Q(g,g,[f,f,1]),g}return l.pixelsToClipSpaceMatrix}function an(b){const t=Math.cos(b.rollInRadians),l=Math.sin(b.rollInRadians),f=Math.cos(b.pitchInRadians),g=Math.cos(b.bearingInRadians),B=Math.sin(b.bearingInRadians),E=A.aC();E[0]=-g*f*l-B*t,E[1]=-B*f*l+g*t;const L=A.aD(E);L<1e-9?A.aE(E):A.aF(E,E,1/L);const N=A.aC();N[0]=g*f*t-B*l,N[1]=B*f*t+g*l;const H=A.aD(N);return H<1e-9?A.aE(N):A.aF(N,N,1/H),{vecEast:N,vecSouth:E}}function To(b,t,l,f){let g;f?(g=[b,t,f(b,t),1],A.aH(g,g,l)):(g=[b,t,0,1],Qn(g,g,l));const B=g[3];return{point:new A.P(g[0]/B,g[1]/B),signedDistanceFromCamera:B,isOccluded:!1}}function ys(b,t){return .5+b/t*.5}function so(b,t){return b.x>=-t[0]&&b.x<=t[0]&&b.y>=-t[1]&&b.y<=t[1]}function _l(b,t,l,f,g,B,E,L,N,H,G,$,Y){const se=l?b.textSizeData:b.iconSizeData,de=A.ay(se,t.transform.zoom),Se=[256/t.width*2+1,256/t.height*2+1],Me=l?b.text.dynamicLayoutVertexArray:b.icon.dynamicLayoutVertexArray;Me.clear();const Ee=b.lineVertexArray,je=l?b.text.placedSymbolArray:b.icon.placedSymbolArray,et=t.transform.width/t.transform.height;let ze=!1;for(let nt=0;nt<je.length;nt++){const at=je.get(nt);if(at.hidden||at.writingMode===A.az.vertical&&!ze){As(at.numGlyphs,Me);continue}ze=!1;const $e=new A.P(at.anchorX,at.anchorY),gt={getElevation:Y,pitchedLabelPlaneMatrix:f,lineVertexArray:Ee,pitchWithMap:B,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:t.transform,tileAnchorPoint:$e,unwrappedTileID:N,width:H,height:G,translation:$},Nt=XA(at.anchorX,at.anchorY,gt);if(!so(Nt.point,Se)){As(at.numGlyphs,Me);continue}const Dt=ys(t.transform.cameraToCenterDistance,Nt.signedDistanceFromCamera),It=A.aA(se,de,at),Qt=B?It*t.transform.getPitchedTextCorrection(at.anchorX,at.anchorY,N)/Dt:It*Dt,cr=xA({projectionContext:gt,pitchedLabelPlaneMatrixInverse:g,symbol:at,fontSize:Qt,flip:!1,keepUpright:E,glyphOffsetArray:b.glyphOffsetArray,dynamicLayoutVertexArray:Me,aspectRatio:et,rotateToLine:L});ze=cr.useVertical,(cr.notEnoughRoom||ze||cr.needsFlipping&&xA({projectionContext:gt,pitchedLabelPlaneMatrixInverse:g,symbol:at,fontSize:Qt,flip:!0,keepUpright:E,glyphOffsetArray:b.glyphOffsetArray,dynamicLayoutVertexArray:Me,aspectRatio:et,rotateToLine:L}).notEnoughRoom)&&As(at.numGlyphs,Me)}l?b.text.dynamicLayoutVertexBuffer.updateData(Me):b.icon.dynamicLayoutVertexBuffer.updateData(Me)}function oo(b,t,l,f,g,B,E,L){const N=B.glyphStartIndex+B.numGlyphs,H=B.lineStartIndex,G=B.lineStartIndex+B.lineLength,$=t.getoffsetX(B.glyphStartIndex),Y=t.getoffsetX(N-1),se=ls(b*$,l,f,g,B.segment,H,G,L,E);if(!se)return null;const de=ls(b*Y,l,f,g,B.segment,H,G,L,E);return de?L.projectionCache.anyProjectionOccluded?null:{first:se,last:de}:null}function Pi(b,t,l,f){return b===A.az.horizontal&&Math.abs(l.y-t.y)>Math.abs(l.x-t.x)*f?{useVertical:!0}:(b===A.az.vertical?t.y<l.y:t.x>l.x)?{needsFlipping:!0}:null}function xA(b){const{projectionContext:t,pitchedLabelPlaneMatrixInverse:l,symbol:f,fontSize:g,flip:B,keepUpright:E,glyphOffsetArray:L,dynamicLayoutVertexArray:N,aspectRatio:H,rotateToLine:G}=b,$=g/24,Y=f.lineOffsetX*$,se=f.lineOffsetY*$;let de;if(f.numGlyphs>1){const Se=f.glyphStartIndex+f.numGlyphs,Me=f.lineStartIndex,Ee=f.lineStartIndex+f.lineLength,je=oo($,L,Y,se,B,f,G,t);if(!je)return{notEnoughRoom:!0};const et=Zo(je.first.point.x,je.first.point.y,t,l),ze=Zo(je.last.point.x,je.last.point.y,t,l);if(E&&!B){const nt=Pi(f.writingMode,et,ze,H);if(nt)return nt}de=[je.first];for(let nt=f.glyphStartIndex+1;nt<Se-1;nt++){const at=ls($*L.getoffsetX(nt),Y,se,B,f.segment,Me,Ee,t,G);if(!at)return{notEnoughRoom:!0};de.push(at)}de.push(je.last)}else{if(E&&!B){const Me=ks(t.tileAnchorPoint.x,t.tileAnchorPoint.y,t).point,Ee=f.lineStartIndex+f.segment+1,je=new A.P(t.lineVertexArray.getx(Ee),t.lineVertexArray.gety(Ee)),et=ks(je.x,je.y,t),ze=et.signedDistanceFromCamera>0?et.point:Ni(t.tileAnchorPoint,je,Me,1,t),nt=Zo(Me.x,Me.y,t,l),at=Zo(ze.x,ze.y,t,l),$e=Pi(f.writingMode,nt,at,H);if($e)return $e}const Se=ls($*L.getoffsetX(f.glyphStartIndex),Y,se,B,f.segment,f.lineStartIndex,f.lineStartIndex+f.lineLength,t,G);if(!Se||t.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};de=[Se]}for(const Se of de)A.aG(N,Se.point,Se.angle);return{}}function Ni(b,t,l,f,g){const B=b.add(b.sub(t)._unit()),E=ks(B.x,B.y,g).point,L=l.sub(E);return l.add(L._mult(f/L.mag()))}function Zn(b,t,l){const f=t.projectionCache;if(f.projections[b])return f.projections[b];const g=new A.P(t.lineVertexArray.getx(b),t.lineVertexArray.gety(b)),B=ks(g.x,g.y,t);if(B.signedDistanceFromCamera>0)return f.projections[b]=B.point,f.anyProjectionOccluded=f.anyProjectionOccluded||B.isOccluded,B.point;const E=b-l.direction;return Ni(l.distanceFromAnchor===0?t.tileAnchorPoint:new A.P(t.lineVertexArray.getx(E),t.lineVertexArray.gety(E)),g,l.previousVertex,l.absOffsetX-l.distanceFromAnchor+1,t)}function ks(b,t,l){const f=b+l.translation[0],g=t+l.translation[1];let B;return l.pitchWithMap?(B=To(f,g,l.pitchedLabelPlaneMatrix,l.getElevation),B.isOccluded=!1):(B=l.transform.projectTileCoordinates(f,g,l.unwrappedTileID,l.getElevation),B.point.x=(.5*B.point.x+.5)*l.width,B.point.y=(.5*-B.point.y+.5)*l.height),B}function Zo(b,t,l,f){if(l.pitchWithMap){const g=[b,t,0,1];return A.aH(g,g,f),l.transform.projectTileCoordinates(g[0]/g[3],g[1]/g[3],l.unwrappedTileID,l.getElevation).point}return{x:b/l.width*2-1,y:1-t/l.height*2}}function XA(b,t,l){return l.transform.projectTileCoordinates(b,t,l.unwrappedTileID,l.getElevation)}function Fo(b,t,l){return b._unit()._perp()._mult(t*l)}function vl(b,t,l,f,g,B,E,L,N){if(L.projectionCache.offsets[b])return L.projectionCache.offsets[b];const H=l.add(t);if(b+N.direction<f||b+N.direction>=g)return L.projectionCache.offsets[b]=H,H;const G=Zn(b+N.direction,L,N),$=Fo(G.sub(l),E,N.direction),Y=l.add($),se=G.add($);return L.projectionCache.offsets[b]=A.aI(B,H,Y,se)||H,L.projectionCache.offsets[b]}function ls(b,t,l,f,g,B,E,L,N){const H=f?b-t:b+t;let G=H>0?1:-1,$=0;f&&(G*=-1,$=Math.PI),G<0&&($+=Math.PI);let Y,se=G>0?B+g:B+g+1;L.projectionCache.cachedAnchorPoint?Y=L.projectionCache.cachedAnchorPoint:(Y=ks(L.tileAnchorPoint.x,L.tileAnchorPoint.y,L).point,L.projectionCache.cachedAnchorPoint=Y);let de,Se,Me=Y,Ee=Y,je=0,et=0;const ze=Math.abs(H),nt=[];let at;for(;je+et<=ze;){if(se+=G,se<B||se>=E)return null;je+=et,Ee=Me,Se=de;const Nt={absOffsetX:ze,direction:G,distanceFromAnchor:je,previousVertex:Ee};if(Me=Zn(se,L,Nt),l===0)nt.push(Ee),at=Me.sub(Ee);else{let Dt;const It=Me.sub(Ee);Dt=It.mag()===0?Fo(Zn(se+G,L,Nt).sub(Me),l,G):Fo(It,l,G),Se||(Se=Ee.add(Dt)),de=vl(se,Dt,Me,B,E,Se,l,L,Nt),nt.push(Se),at=de.sub(Se)}et=at.mag()}const $e=at._mult((ze-je)/et)._add(Se||Ee),gt=$+Math.atan2(Me.y-Ee.y,Me.x-Ee.x);return nt.push($e),{point:$e,angle:N?gt:0,path:nt}}const Hl=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function As(b,t){for(let l=0;l<b;l++){const f=t.length;t.resize(f+4),t.float32.set(Hl,3*f)}}function Qn(b,t,l){const f=t[0],g=t[1];return b[0]=l[0]*f+l[4]*g+l[12],b[1]=l[1]*f+l[5]*g+l[13],b[3]=l[3]*f+l[7]*g+l[15],b}const ea=100;class Vl{constructor(t,l=new Ji(t.width+200,t.height+200,25),f=new Ji(t.width+200,t.height+200,25)){this.transform=t,this.grid=l,this.ignoredGrid=f,this.pitchFactor=Math.cos(t.pitch*Math.PI/180)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+ea,this.screenBottomBoundary=t.height+ea,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(t,l,f,g,B,E,L,N,H,G,$,Y){const se=this.projectAndGetPerspectiveRatio(t.anchorPointX+N[0],t.anchorPointY+N[1],B,G,Y),de=f*se.perspectiveRatio;let Se;if(E||L)Se=this._projectCollisionBox(t,de,g,B,E,L,N,se,G,$,Y);else{const at=se.x+($?$.x*de:0),$e=se.y+($?$.y*de:0);Se={allPointsOccluded:!1,box:[at+t.x1*de,$e+t.y1*de,at+t.x2*de,$e+t.y2*de]}}const[Me,Ee,je,et]=Se.box,ze=E?Se.allPointsOccluded:se.isOccluded;let nt=ze;return nt||(nt=se.perspectiveRatio<this.perspectiveRatioCutoff),nt||(nt=!this.isInsideGrid(Me,Ee,je,et)),nt||l!=="always"&&this.grid.hitTest(Me,Ee,je,et,l,H)?{box:[Me,Ee,je,et],placeable:!1,offscreen:!1,occluded:ze}:{box:[Me,Ee,je,et],placeable:!0,offscreen:this.isOffscreen(Me,Ee,je,et),occluded:ze}}placeCollisionCircles(t,l,f,g,B,E,L,N,H,G,$,Y,se,de){const Se=[],Me=new A.P(l.anchorX,l.anchorY),Ee=this.getPerspectiveRatio(Me.x,Me.y,E,de),je=(H?B*this.transform.getPitchedTextCorrection(l.anchorX,l.anchorY,E)/Ee:B*Ee)/A.aM,et={getElevation:de,pitchedLabelPlaneMatrix:L,lineVertexArray:f,pitchWithMap:H,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:Me,unwrappedTileID:E,width:this.transform.width,height:this.transform.height,translation:se},ze=oo(je,g,l.lineOffsetX*je,l.lineOffsetY*je,!1,l,!1,et);let nt=!1,at=!1,$e=!0;if(ze){const gt=.5*$*Ee+Y,Nt=new A.P(-100,-100),Dt=new A.P(this.screenRightBoundary,this.screenBottomBoundary),It=new kr,Qt=ze.first,cr=ze.last;let fr=[];for(let _n=Qt.path.length-1;_n>=1;_n--)fr.push(Qt.path[_n]);for(let _n=1;_n<cr.path.length;_n++)fr.push(cr.path[_n]);const Ht=2.5*gt;if(H){const _n=this.projectPathToScreenSpace(fr,et);fr=_n.some((fi=>fi.signedDistanceFromCamera<=0))?[]:_n.map((fi=>fi.point))}let Tr=[];if(fr.length>0){const _n=fr[0].clone(),fi=fr[0].clone();for(let Ri=1;Ri<fr.length;Ri++)_n.x=Math.min(_n.x,fr[Ri].x),_n.y=Math.min(_n.y,fr[Ri].y),fi.x=Math.max(fi.x,fr[Ri].x),fi.y=Math.max(fi.y,fr[Ri].y);Tr=_n.x>=Nt.x&&fi.x<=Dt.x&&_n.y>=Nt.y&&fi.y<=Dt.y?[fr]:fi.x<Nt.x||_n.x>Dt.x||fi.y<Nt.y||_n.y>Dt.y?[]:A.aJ([fr],Nt.x,Nt.y,Dt.x,Dt.y)}for(const _n of Tr){It.reset(_n,.25*gt);let fi=0;fi=It.length<=.5*gt?1:Math.ceil(It.paddedLength/Ht)+1;for(let Ri=0;Ri<fi;Ri++){const Mi=Ri/Math.max(fi-1,1),zi=It.lerp(Mi),vi=zi.x+ea,Va=zi.y+ea;Se.push(vi,Va,gt,0);const sa=vi-gt,ps=Va-gt,ga=vi+gt,ya=Va+gt;if($e=$e&&this.isOffscreen(sa,ps,ga,ya),at=at||this.isInsideGrid(sa,ps,ga,ya),t!=="always"&&this.grid.hitTestCircle(vi,Va,gt,t,G)&&(nt=!0,!N))return{circles:[],offscreen:!1,collisionDetected:nt}}}}return{circles:!N&&nt||!at||Ee<this.perspectiveRatioCutoff?[]:Se,offscreen:$e,collisionDetected:nt}}projectPathToScreenSpace(t,l){const f=(function(g,B){const E=A.N();return A.aB(E,B.pitchedLabelPlaneMatrix),g.map((L=>{const N=To(L.x,L.y,E,B.getElevation),H=B.transform.projectTileCoordinates(N.point.x,N.point.y,B.unwrappedTileID,B.getElevation);return H.point.x=(.5*H.point.x+.5)*B.width,H.point.y=(.5*-H.point.y+.5)*B.height,H}))})(t,l);return(function(g){let B=0,E=0,L=0,N=0;for(let H=0;H<g.length;H++)g[H].isOccluded?(L=H+1,N=0):(N++,N>E&&(E=N,B=L));return g.slice(B,B+E)})(f)}queryRenderedSymbols(t){if(t.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const l=[],f=new A.aa;for(const $ of t){const Y=new A.P($.x+ea,$.y+ea);f.extend(Y),l.push(Y)}const{minX:g,minY:B,maxX:E,maxY:L}=f,N=this.grid.query(g,B,E,L).concat(this.ignoredGrid.query(g,B,E,L)),H={},G={};for(const $ of N){const Y=$.key;if(H[Y.bucketInstanceId]===void 0&&(H[Y.bucketInstanceId]={}),H[Y.bucketInstanceId][Y.featureIndex])continue;const se=[new A.P($.x1,$.y1),new A.P($.x2,$.y1),new A.P($.x2,$.y2),new A.P($.x1,$.y2)];A.aK(l,se)&&(H[Y.bucketInstanceId][Y.featureIndex]=!0,G[Y.bucketInstanceId]===void 0&&(G[Y.bucketInstanceId]=[]),G[Y.bucketInstanceId].push(Y.featureIndex))}return G}insertCollisionBox(t,l,f,g,B,E){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:B,collisionGroupID:E,overlapMode:l},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,l,f,g,B,E){const L=f?this.ignoredGrid:this.grid,N={bucketInstanceId:g,featureIndex:B,collisionGroupID:E,overlapMode:l};for(let H=0;H<t.length;H+=4)L.insertCircle(N,t[H],t[H+1],t[H+2])}projectAndGetPerspectiveRatio(t,l,f,g,B){if(B){let E;g?(E=[t,l,g(t,l),1],A.aH(E,E,B)):(E=[t,l,0,1],Qn(E,E,B));const L=E[3];return{x:(E[0]/L+1)/2*this.transform.width+ea,y:(-E[1]/L+1)/2*this.transform.height+ea,perspectiveRatio:.5+this.transform.cameraToCenterDistance/L*.5,isOccluded:!1,signedDistanceFromCamera:L}}{const E=this.transform.projectTileCoordinates(t,l,f,g);return{x:(E.point.x+1)/2*this.transform.width+ea,y:(1-E.point.y)/2*this.transform.height+ea,perspectiveRatio:.5+this.transform.cameraToCenterDistance/E.signedDistanceFromCamera*.5,isOccluded:E.isOccluded,signedDistanceFromCamera:E.signedDistanceFromCamera}}}getPerspectiveRatio(t,l,f,g){const B=this.transform.projectTileCoordinates(t,l,f,g);return .5+this.transform.cameraToCenterDistance/B.signedDistanceFromCamera*.5}isOffscreen(t,l,f,g){return f<ea||t>=this.screenRightBoundary||g<ea||l>this.screenBottomBoundary}isInsideGrid(t,l,f,g){return f>=0&&t<this.gridRightBoundary&&g>=0&&l<this.gridBottomBoundary}getViewportMatrix(){const t=A.ar([]);return A.O(t,t,[-100,-100,0]),t}_projectCollisionBox(t,l,f,g,B,E,L,N,H,G,$){let Y=1,se=0,de=0,Se=1;const Me=t.anchorPointX+L[0],Ee=t.anchorPointY+L[1];if(E&&!B){const fr=this.projectAndGetPerspectiveRatio(Me+1,Ee,g,H,$),Ht=fr.x-N.x,Tr=Math.atan((fr.y-N.y)/Ht)+(Ht<0?Math.PI:0),_n=Math.sin(Tr),fi=Math.cos(Tr);Y=fi,se=_n,de=-_n,Se=fi}else if(!E&&B){const fr=an(this.transform);Y=fr.vecEast[0],se=fr.vecEast[1],de=fr.vecSouth[0],Se=fr.vecSouth[1]}let je=N.x,et=N.y,ze=l;B&&(je=Me,et=Ee,ze=Math.pow(2,-(this.transform.zoom-f.overscaledZ)),ze*=this.transform.getPitchedTextCorrection(Me,Ee,g),G||(ze*=A.an(.5+N.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),G&&(je+=Y*G.x*ze+de*G.y*ze,et+=se*G.x*ze+Se*G.y*ze);const nt=t.x1*ze,at=t.x2*ze,$e=(nt+at)/2,gt=t.y1*ze,Nt=t.y2*ze,Dt=(gt+Nt)/2,It=[{offsetX:nt,offsetY:gt},{offsetX:$e,offsetY:gt},{offsetX:at,offsetY:gt},{offsetX:at,offsetY:Dt},{offsetX:at,offsetY:Nt},{offsetX:$e,offsetY:Nt},{offsetX:nt,offsetY:Nt},{offsetX:nt,offsetY:Dt}];let Qt=[];for(const{offsetX:fr,offsetY:Ht}of It)Qt.push(new A.P(je+Y*fr+de*Ht,et+se*fr+Se*Ht));let cr=!1;if(B){const fr=Qt.map((Ht=>this.projectAndGetPerspectiveRatio(Ht.x,Ht.y,g,H,$)));cr=fr.some((Ht=>!Ht.isOccluded)),Qt=fr.map((Ht=>new A.P(Ht.x,Ht.y)))}else cr=!0;return{box:A.aL(Qt),allPointsOccluded:!cr}}}class bA{constructor(t,l,f,g){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?l:-l))):g&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class wA{constructor(t,l,f,g,B){this.text=new bA(t?t.text:null,l,f,B),this.icon=new bA(t?t.icon:null,l,g,B)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class cs{constructor(t,l,f){this.text=t,this.icon=l,this.skipFade=f}}class Ia{constructor(t,l,f,g,B){this.bucketInstanceId=t,this.featureIndex=l,this.sourceLayerIndex=f,this.bucketIndex=g,this.tileID=B}}class la{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const l=++this.maxGroupID;this.collisionGroups[t]={ID:l,predicate:f=>f.collisionGroupID===l}}return this.collisionGroups[t]}}function BA(b,t,l,f,g){const{horizontalAlign:B,verticalAlign:E}=A.aS(b);return new A.P(-(B-.5)*t+f[0]*g,-(E-.5)*l+f[1]*g)}class gu{constructor(t,l,f,g,B){this.transform=t.clone(),this.terrain=l,this.collisionIndex=new Vl(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new la(g),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=B,B&&(B.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(t){const l=this.terrain;return l?(f,g)=>l.getElevation(t,f,g):null}getBucketParts(t,l,f,g){const B=f.getBucket(l),E=f.latestFeatureIndex;if(!B||!E||l.id!==B.layerIds[0])return;const L=f.collisionBoxArray,N=B.layers[0].layout,H=B.layers[0].paint,G=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),$=f.tileSize/A.a5,Y=f.tileID.toUnwrapped(),se=N.get("text-rotation-alignment")==="map",de=A.aN(f,1,this.transform.zoom),Se=A.aO(this.collisionIndex.transform,f,H.get("text-translate"),H.get("text-translate-anchor")),Me=A.aO(this.collisionIndex.transform,f,H.get("icon-translate"),H.get("icon-translate-anchor")),Ee=Ko(se,this.transform,de);this.retainedQueryData[B.bucketInstanceId]=new Ia(B.bucketInstanceId,E,B.sourceLayerIndex,B.index,f.tileID);const je={bucket:B,layout:N,translationText:Se,translationIcon:Me,unwrappedTileID:Y,pitchedLabelPlaneMatrix:Ee,scale:G,textPixelRatio:$,holdingForFade:f.holdingForSymbolFade(),collisionBoxArray:L,partiallyEvaluatedTextSize:A.ay(B.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(B.sourceID)};if(g)for(const et of B.sortKeyRanges){const{sortKey:ze,symbolInstanceStart:nt,symbolInstanceEnd:at}=et;t.push({sortKey:ze,symbolInstanceStart:nt,symbolInstanceEnd:at,parameters:je})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:B.symbolInstances.length,parameters:je})}attemptAnchorPlacement(t,l,f,g,B,E,L,N,H,G,$,Y,se,de,Se,Me,Ee,je,et,ze){const nt=A.aP[t.textAnchor],at=[t.textOffset0,t.textOffset1],$e=BA(nt,f,g,at,B),gt=this.collisionIndex.placeCollisionBox(l,Y,N,H,G,L,E,Me,$.predicate,et,$e,ze);if((!je||this.collisionIndex.placeCollisionBox(je,Y,N,H,G,L,E,Ee,$.predicate,et,$e,ze).placeable)&&gt.placeable){let Nt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[se.crossTileID]&&this.prevPlacement.placements[se.crossTileID]&&this.prevPlacement.placements[se.crossTileID].text&&(Nt=this.prevPlacement.variableOffsets[se.crossTileID].anchor),se.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[se.crossTileID]={textOffset:at,width:f,height:g,anchor:nt,textBoxScale:B,prevAnchor:Nt},this.markUsedJustification(de,nt,se,Se),de.allowVerticalPlacement&&(this.markUsedOrientation(de,Se,se),this.placedOrientations[se.crossTileID]=Se),{shift:$e,placedGlyphBoxes:gt}}}placeLayerBucketPart(t,l,f){const{bucket:g,layout:B,translationText:E,translationIcon:L,unwrappedTileID:N,pitchedLabelPlaneMatrix:H,textPixelRatio:G,holdingForFade:$,collisionBoxArray:Y,partiallyEvaluatedTextSize:se,collisionGroup:de}=t.parameters,Se=B.get("text-optional"),Me=B.get("icon-optional"),Ee=A.aQ(B,"text-overlap","text-allow-overlap"),je=Ee==="always",et=A.aQ(B,"icon-overlap","icon-allow-overlap"),ze=et==="always",nt=B.get("text-rotation-alignment")==="map",at=B.get("text-pitch-alignment")==="map",$e=B.get("icon-text-fit")!=="none",gt=B.get("symbol-z-order")==="viewport-y",Nt=je&&(ze||!g.hasIconData()||Me),Dt=ze&&(je||!g.hasTextData()||Se);!g.collisionArrays&&Y&&g.deserializeCollisionBoxes(Y);const It=this.retainedQueryData[g.bucketInstanceId].tileID,Qt=this._getTerrainElevationFunc(It),cr=this.transform.getFastPathSimpleProjectionMatrix(It),fr=(Ht,Tr,_n)=>{var fi,Ri;if(l[Ht.crossTileID])return;if($)return void(this.placements[Ht.crossTileID]=new cs(!1,!1,!1));let Mi=!1,zi=!1,vi=!0,Va=null,sa={box:null,placeable:!1,offscreen:null,occluded:!1},ps={placeable:!1},ga=null,ya=null,Ws=null,uc=0,OA=0,zo=0;Tr.textFeatureIndex?uc=Tr.textFeatureIndex:Ht.useRuntimeCollisionCircles&&(uc=Ht.featureIndex),Tr.verticalTextFeatureIndex&&(OA=Tr.verticalTextFeatureIndex);const Ec=Tr.textBox;if(Ec){const Ys=Ti=>{let ji=A.az.horizontal;if(g.allowVerticalPlacement&&!Ti&&this.prevPlacement){const sl=this.prevPlacement.placedOrientations[Ht.crossTileID];sl&&(this.placedOrientations[Ht.crossTileID]=sl,ji=sl,this.markUsedOrientation(g,ji,Ht))}return ji},Dl=(Ti,ji)=>{if(g.allowVerticalPlacement&&Ht.numVerticalGlyphVertices>0&&Tr.verticalTextBox){for(const sl of g.writingModes)if(sl===A.az.vertical?(sa=ji(),ps=sa):sa=Ti(),sa&&sa.placeable)break}else sa=Ti()},al=Ht.textAnchorOffsetStartIndex,$s=Ht.textAnchorOffsetEndIndex;if($s===al){const Ti=(ji,sl)=>{const Ga=this.collisionIndex.placeCollisionBox(ji,Ee,G,It,N,at,nt,E,de.predicate,Qt,void 0,cr);return Ga&&Ga.placeable&&(this.markUsedOrientation(g,sl,Ht),this.placedOrientations[Ht.crossTileID]=sl),Ga};Dl((()=>Ti(Ec,A.az.horizontal)),(()=>{const ji=Tr.verticalTextBox;return g.allowVerticalPlacement&&Ht.numVerticalGlyphVertices>0&&ji?Ti(ji,A.az.vertical):{box:null,offscreen:null}})),Ys(sa&&sa.placeable)}else{let Ti=A.aP[(Ri=(fi=this.prevPlacement)===null||fi===void 0?void 0:fi.variableOffsets[Ht.crossTileID])===null||Ri===void 0?void 0:Ri.anchor];const ji=(Ga,hf,Yc)=>{const Xd=Ga.x2-Ga.x1,$c=Ga.y2-Ga.y1,ff=Ht.textBoxScale,ad=$e&&et==="never"?hf:null;let ol=null,zA=Ee==="never"?1:2,df="never";Ti&&zA++;for(let pf=0;pf<zA;pf++){for(let eh=al;eh<$s;eh++){const mf=g.textAnchorOffsets.get(eh);if(Ti&&mf.textAnchor!==Ti)continue;const th=this.attemptAnchorPlacement(mf,Ga,Xd,$c,ff,nt,at,G,It,N,de,df,Ht,g,Yc,E,L,ad,Qt);if(th&&(ol=th.placedGlyphBoxes,ol&&ol.placeable))return Mi=!0,Va=th.shift,ol}Ti?Ti=null:df=Ee}return f&&!ol&&(ol={box:this.collisionIndex.placeCollisionBox(Ec,"always",G,It,N,at,nt,E,de.predicate,Qt,void 0,cr).box,offscreen:!1,placeable:!1,occluded:!1}),ol};Dl((()=>ji(Ec,Tr.iconBox,A.az.horizontal)),(()=>{const Ga=Tr.verticalTextBox;return g.allowVerticalPlacement&&(!sa||!sa.placeable)&&Ht.numVerticalGlyphVertices>0&&Ga?ji(Ga,Tr.verticalIconBox,A.az.vertical):{box:null,occluded:!0,offscreen:null}})),sa&&(Mi=sa.placeable,vi=sa.offscreen);const sl=Ys(sa&&sa.placeable);if(!Mi&&this.prevPlacement){const Ga=this.prevPlacement.variableOffsets[Ht.crossTileID];Ga&&(this.variableOffsets[Ht.crossTileID]=Ga,this.markUsedJustification(g,Ga.anchor,Ht,sl))}}}if(ga=sa,Mi=ga&&ga.placeable,vi=ga&&ga.offscreen,Ht.useRuntimeCollisionCircles&&Ht.centerJustifiedTextSymbolIndex>=0){const Ys=g.text.placedSymbolArray.get(Ht.centerJustifiedTextSymbolIndex),Dl=A.aA(g.textSizeData,se,Ys),al=B.get("text-padding");ya=this.collisionIndex.placeCollisionCircles(Ee,Ys,g.lineVertexArray,g.glyphOffsetArray,Dl,N,H,f,at,de.predicate,Ht.collisionCircleDiameter,al,E,Qt),ya.circles.length&&ya.collisionDetected&&!f&&A.w("Collisions detected, but collision boxes are not shown"),Mi=je||ya.circles.length>0&&!ya.collisionDetected,vi=vi&&ya.offscreen}if(Tr.iconFeatureIndex&&(zo=Tr.iconFeatureIndex),Tr.iconBox){const Ys=Dl=>this.collisionIndex.placeCollisionBox(Dl,et,G,It,N,at,nt,L,de.predicate,Qt,$e&&Va?Va:void 0,cr);ps&&ps.placeable&&Tr.verticalIconBox?(Ws=Ys(Tr.verticalIconBox),zi=Ws.placeable):(Ws=Ys(Tr.iconBox),zi=Ws.placeable),vi=vi&&Ws.offscreen}const Ju=Se||Ht.numHorizontalGlyphVertices===0&&Ht.numVerticalGlyphVertices===0,Tc=Me||Ht.numIconVertices===0;Ju||Tc?Tc?Ju||(zi=zi&&Mi):Mi=zi&&Mi:zi=Mi=zi&&Mi;const Wc=zi&&Ws.placeable;if(Mi&&ga.placeable&&this.collisionIndex.insertCollisionBox(ga.box,Ee,B.get("text-ignore-placement"),g.bucketInstanceId,ps&&ps.placeable&&OA?OA:uc,de.ID),Wc&&this.collisionIndex.insertCollisionBox(Ws.box,et,B.get("icon-ignore-placement"),g.bucketInstanceId,zo,de.ID),ya&&Mi&&this.collisionIndex.insertCollisionCircles(ya.circles,Ee,B.get("text-ignore-placement"),g.bucketInstanceId,uc,de.ID),f&&this.storeCollisionData(g.bucketInstanceId,_n,Tr,ga,Ws,ya),Ht.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(g.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Ht.crossTileID]=new cs((Mi||Nt)&&!ga?.occluded,(zi||Dt)&&!Ws?.occluded,vi||g.justReloaded),l[Ht.crossTileID]=!0};if(gt){if(t.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Ht=g.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Tr=Ht.length-1;Tr>=0;--Tr){const _n=Ht[Tr];fr(g.symbolInstances.get(_n),g.collisionArrays[_n],_n)}}else for(let Ht=t.symbolInstanceStart;Ht<t.symbolInstanceEnd;Ht++)fr(g.symbolInstances.get(Ht),g.collisionArrays[Ht],Ht);g.justReloaded=!1}storeCollisionData(t,l,f,g,B,E){if(f.textBox||f.iconBox){let L,N;this.collisionBoxArrays.has(t)?L=this.collisionBoxArrays.get(t):(L=new Map,this.collisionBoxArrays.set(t,L)),L.has(l)?N=L.get(l):(N={text:null,icon:null},L.set(l,N)),f.textBox&&(N.text=g.box),f.iconBox&&(N.icon=B.box)}if(E){let L=this.collisionCircleArrays[t];L===void 0&&(L=this.collisionCircleArrays[t]=[]);for(let N=0;N<E.circles.length;N+=4)L.push(E.circles[N+0]-ea),L.push(E.circles[N+1]-ea),L.push(E.circles[N+2]),L.push(E.collisionDetected?1:0)}}markUsedJustification(t,l,f,g){let B;B=g===A.az.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[A.aR(l)];const E=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(const L of E)L>=0&&(t.text.placedSymbolArray.get(L).crossTileID=B>=0&&L!==B?0:f.crossTileID)}markUsedOrientation(t,l,f){const g=l===A.az.horizontal||l===A.az.horizontalOnly?l:0,B=l===A.az.vertical?l:0,E=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(const L of E)t.text.placedSymbolArray.get(L).placedOrientation=g;f.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=B)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const l=this.prevPlacement;let f=!1;this.prevZoomAdjustment=l?l.zoomAdjustment(this.transform.zoom):0;const g=l?l.symbolFadeChange(t):1,B=l?l.opacities:{},E=l?l.variableOffsets:{},L=l?l.placedOrientations:{};for(const N in this.placements){const H=this.placements[N],G=B[N];G?(this.opacities[N]=new wA(G,g,H.text,H.icon),f=f||H.text!==G.text.placed||H.icon!==G.icon.placed):(this.opacities[N]=new wA(null,g,H.text,H.icon,H.skipFade),f=f||H.text||H.icon)}for(const N in B){const H=B[N];if(!this.opacities[N]){const G=new wA(H,g,!1,!1);G.isHidden()||(this.opacities[N]=G,f=f||H.text.placed||H.icon.placed)}}for(const N in E)this.variableOffsets[N]||!this.opacities[N]||this.opacities[N].isHidden()||(this.variableOffsets[N]=E[N]);for(const N in L)this.placedOrientations[N]||!this.opacities[N]||this.opacities[N].isHidden()||(this.placedOrientations[N]=L[N]);if(l&&l.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=t:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=l?l.lastPlacementChangeTime:t)}updateLayerOpacities(t,l){const f={};for(const g of l){const B=g.getBucket(t);B&&g.latestFeatureIndex&&t.id===B.layerIds[0]&&this.updateBucketOpacities(B,g.tileID,f,g.collisionBoxArray)}}updateBucketOpacities(t,l,f,g){t.hasTextData()&&(t.text.opacityVertexArray.clear(),t.text.hasVisibleVertices=!1),t.hasIconData()&&(t.icon.opacityVertexArray.clear(),t.icon.hasVisibleVertices=!1),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const B=t.layers[0],E=B.layout,L=new wA(null,0,!1,!1,!0),N=E.get("text-allow-overlap"),H=E.get("icon-allow-overlap"),G=B._unevaluatedLayout.hasValue("text-variable-anchor")||B._unevaluatedLayout.hasValue("text-variable-anchor-offset"),$=E.get("text-rotation-alignment")==="map",Y=E.get("text-pitch-alignment")==="map",se=E.get("icon-text-fit")!=="none",de=new wA(null,0,N&&(H||!t.hasIconData()||E.get("icon-optional")),H&&(N||!t.hasTextData()||E.get("text-optional")),!0);!t.collisionArrays&&g&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(g);const Se=(Ee,je,et)=>{for(let ze=0;ze<je/4;ze++)Ee.opacityVertexArray.emplaceBack(et);Ee.hasVisibleVertices=Ee.hasVisibleVertices||et!==_s},Me=this.collisionBoxArrays.get(t.bucketInstanceId);for(let Ee=0;Ee<t.symbolInstances.length;Ee++){const je=t.symbolInstances.get(Ee),{numHorizontalGlyphVertices:et,numVerticalGlyphVertices:ze,crossTileID:nt}=je;let at=this.opacities[nt];f[nt]?at=L:at||(at=de,this.opacities[nt]=at),f[nt]=!0;const $e=je.numIconVertices>0,gt=this.placedOrientations[je.crossTileID],Nt=gt===A.az.vertical,Dt=gt===A.az.horizontal||gt===A.az.horizontalOnly;if(et>0||ze>0){const Qt=Rc(at.text);Se(t.text,et,Nt?_s:Qt),Se(t.text,ze,Dt?_s:Qt);const cr=at.text.isHidden();[je.rightJustifiedTextSymbolIndex,je.centerJustifiedTextSymbolIndex,je.leftJustifiedTextSymbolIndex].forEach((Tr=>{Tr>=0&&(t.text.placedSymbolArray.get(Tr).hidden=cr||Nt?1:0)})),je.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(je.verticalPlacedTextSymbolIndex).hidden=cr||Dt?1:0);const fr=this.variableOffsets[je.crossTileID];fr&&this.markUsedJustification(t,fr.anchor,je,gt);const Ht=this.placedOrientations[je.crossTileID];Ht&&(this.markUsedJustification(t,"left",je,Ht),this.markUsedOrientation(t,Ht,je))}if($e){const Qt=Rc(at.icon),cr=!(se&&je.verticalPlacedIconSymbolIndex&&Nt);je.placedIconSymbolIndex>=0&&(Se(t.icon,je.numIconVertices,cr?Qt:_s),t.icon.placedSymbolArray.get(je.placedIconSymbolIndex).hidden=at.icon.isHidden()),je.verticalPlacedIconSymbolIndex>=0&&(Se(t.icon,je.numVerticalIconVertices,cr?_s:Qt),t.icon.placedSymbolArray.get(je.verticalPlacedIconSymbolIndex).hidden=at.icon.isHidden())}const It=Me&&Me.has(Ee)?Me.get(Ee):{text:null,icon:null};if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const Qt=t.collisionArrays[Ee];if(Qt){let cr=new A.P(0,0);if(Qt.textBox||Qt.verticalTextBox){let fr=!0;if(G){const Ht=this.variableOffsets[nt];Ht?(cr=BA(Ht.anchor,Ht.width,Ht.height,Ht.textOffset,Ht.textBoxScale),$&&cr._rotate(Y?-this.transform.bearingInRadians:this.transform.bearingInRadians)):fr=!1}if(Qt.textBox||Qt.verticalTextBox){let Ht;Qt.textBox&&(Ht=Nt),Qt.verticalTextBox&&(Ht=Dt),WA(t.textCollisionBox.collisionVertexArray,at.text.placed,!fr||Ht,It.text,cr.x,cr.y)}}if(Qt.iconBox||Qt.verticalIconBox){const fr=!!(!Dt&&Qt.verticalIconBox);let Ht;Qt.iconBox&&(Ht=fr),Qt.verticalIconBox&&(Ht=!fr),WA(t.iconCollisionBox.collisionVertexArray,at.icon.placed,Ht,It.icon,se?cr.x:0,se?cr.y:0)}}}}if(t.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.text.opacityVertexArray.length!==t.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${t.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${t.text.layoutVertexArray.length}) / 4`);if(t.icon.opacityVertexArray.length!==t.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${t.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${t.icon.layoutVertexArray.length}) / 4`);t.bucketInstanceId in this.collisionCircleArrays&&(t.collisionCircleArray=this.collisionCircleArrays[t.bucketInstanceId],delete this.collisionCircleArrays[t.bucketInstanceId])}symbolFadeChange(t){return this.fadeDuration===0?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,l){const f=this.zoomAtLastRecencyCheck===l?1-this.zoomAdjustment(l):1;return this.zoomAtLastRecencyCheck=l,this.commitTime+this.fadeDuration*f>t}setStale(){this.stale=!0}}function WA(b,t,l,f,g,B){f&&f.length!==0||(f=[0,0,0,0]);const E=f[0]-ea,L=f[1]-ea,N=f[2]-ea,H=f[3]-ea;b.emplaceBack(t?1:0,l?1:0,g||0,B||0,E,L),b.emplaceBack(t?1:0,l?1:0,g||0,B||0,N,L),b.emplaceBack(t?1:0,l?1:0,g||0,B||0,N,H),b.emplaceBack(t?1:0,l?1:0,g||0,B||0,E,H)}const us=Math.pow(2,25),yu=Math.pow(2,24),CA=Math.pow(2,17),lo=Math.pow(2,16),YA=Math.pow(2,9),SA=Math.pow(2,8),_u=Math.pow(2,1);function Rc(b){if(b.opacity===0&&!b.placed)return 0;if(b.opacity===1&&b.placed)return 4294967295;const t=b.placed?1:0,l=Math.floor(127*b.opacity);return l*us+t*yu+l*CA+t*lo+l*YA+t*SA+l*_u+t}const _s=0;class EA{constructor(t){this._sortAcrossTiles=t.layout.get("symbol-z-order")!=="viewport-y"&&!t.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,l,f,g,B){const E=this._bucketParts;for(;this._currentTileIndex<t.length;)if(l.getBucketParts(E,g,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,B())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,E.sort(((L,N)=>L.sortKey-N.sortKey)));this._currentPartIndex<E.length;)if(l.placeLayerBucketPart(E[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,B())return!0;return!1}}class cn{constructor(t,l,f,g,B,E,L,N){this.placement=new gu(t,l,E,L,N),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=B,this._done=!1}isDone(){return this._done}continuePlacement(t,l,f){const g=ie(),B=()=>!this._forceFullPlacement&&ie()-g>2;for(;this._currentPlacementIndex>=0;){const E=l[t[this._currentPlacementIndex]],L=this.placement.collisionIndex.transform.zoom;if(E.type==="symbol"&&(!E.minzoom||E.minzoom<=L)&&(!E.maxzoom||E.maxzoom>L)){if(this._inProgressLayer||(this._inProgressLayer=new EA(E)),this._inProgressLayer.continuePlacement(f[E.source],this.placement,this._showCollisionBoxes,E,B))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const hs=512/A.a5/2;class TA{constructor(t,l,f){this.tileID=t,this.bucketInstanceId=f,this._symbolsByKey={};const g=new Map;for(let B=0;B<l.length;B++){const E=l.get(B),L=E.key,N=g.get(L);N?N.push(E):g.set(L,[E])}for(const[B,E]of g){const L={positions:E.map((N=>({x:Math.floor(N.anchorX*hs),y:Math.floor(N.anchorY*hs)}))),crossTileIDs:E.map((N=>N.crossTileID))};if(L.positions.length>128){const N=new A.aT(L.positions.length,16,Uint16Array);for(const{x:H,y:G}of L.positions)N.add(H,G);N.finish(),delete L.positions,L.index=N}this._symbolsByKey[B]=L}}getScaledCoordinates(t,l){const{x:f,y:g,z:B}=this.tileID.canonical,{x:E,y:L,z:N}=l.canonical,H=hs/Math.pow(2,N-B),G=(L*A.a5+t.anchorY)*H,$=g*A.a5*hs;return{x:Math.floor((E*A.a5+t.anchorX)*H-f*A.a5*hs),y:Math.floor(G-$)}}findMatches(t,l,f){const g=this.tileID.canonical.z<l.canonical.z?1:Math.pow(2,this.tileID.canonical.z-l.canonical.z);for(let B=0;B<t.length;B++){const E=t.get(B);if(E.crossTileID)continue;const L=this._symbolsByKey[E.key];if(!L)continue;const N=this.getScaledCoordinates(E,l);if(L.index){const H=L.index.range(N.x-g,N.y-g,N.x+g,N.y+g).sort();for(const G of H){const $=L.crossTileIDs[G];if(!f[$]){f[$]=!0,E.crossTileID=$;break}}}else if(L.positions)for(let H=0;H<L.positions.length;H++){const G=L.positions[H],$=L.crossTileIDs[H];if(Math.abs(G.x-N.x)<=g&&Math.abs(G.y-N.y)<=g&&!f[$]){f[$]=!0,E.crossTileID=$;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:t})=>t))}}class FA{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class La{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const l=Math.round((t-this.lng)/360);if(l!==0)for(const f in this.indexes){const g=this.indexes[f],B={};for(const E in g){const L=g[E];L.tileID=L.tileID.unwrapTo(L.tileID.wrap+l),B[L.tileID.key]=L}this.indexes[f]=B}this.lng=t}addBucket(t,l,f){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===l.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let B=0;B<l.symbolInstances.length;B++)l.symbolInstances.get(B).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const g=this.usedCrossTileIDs[t.overscaledZ];for(const B in this.indexes){const E=this.indexes[B];if(Number(B)>t.overscaledZ)for(const L in E){const N=E[L];N.tileID.isChildOf(t)&&N.findMatches(l.symbolInstances,t,g)}else{const L=E[t.scaledTo(Number(B)).key];L&&L.findMatches(l.symbolInstances,t,g)}}for(let B=0;B<l.symbolInstances.length;B++){const E=l.symbolInstances.get(B);E.crossTileID||(E.crossTileID=f.generate(),g[E.crossTileID]=!0)}return this.indexes[t.overscaledZ]===void 0&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new TA(t,l.symbolInstances,l.bucketInstanceId),!0}removeBucketCrossTileIDs(t,l){for(const f of l.getCrossTileIDsLists())for(const g of f)delete this.usedCrossTileIDs[t][g]}removeStaleBuckets(t){let l=!1;for(const f in this.indexes){const g=this.indexes[f];for(const B in g)t[g[B].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,g[B]),delete g[B],l=!0)}return l}}class Rr{constructor(){this.layerIndexes={},this.crossTileIDs=new FA,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,l,f){let g=this.layerIndexes[t.id];g===void 0&&(g=this.layerIndexes[t.id]=new La);let B=!1;const E={};g.handleWrapJump(f);for(const L of l){const N=L.getBucket(t);N&&t.id===N.layerIds[0]&&(N.bucketInstanceId||(N.bucketInstanceId=++this.maxBucketInstanceId),g.addBucket(L.tileID,N,this.crossTileIDs)&&(B=!0),E[N.bucketInstanceId]=!0)}return g.removeStaleBuckets(E)&&(B=!0),B}pruneUnusedLayers(t){const l={};t.forEach((f=>{l[f]=!0}));for(const f in this.layerIndexes)l[f]||delete this.layerIndexes[f]}}var ja="void main() {fragColor=vec4(1.0);}";const gi={prelude:Hr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Hr("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Hr("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Hr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Hr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Hr(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Hr(ja,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Hr(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Hr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Hr("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Hr("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:Hr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:Hr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Hr(ja,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Hr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Hr(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Hr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Hr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Hr(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Hr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Hr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Hr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Hr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Hr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Hr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Hr(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:Hr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:Hr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Hr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Hr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy/16.0;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Hr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Hr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Hr("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Hr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Hr("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Hr(`#ifdef GL_ES
precision highp float;
#endif
in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Hr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Hr(b,t){const l=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=t.match(/in ([\w]+) ([\w]+)/g),g=b.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),B=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=B?B.concat(g):g,L={};return{fragmentSource:b=b.replace(l,((N,H,G,$,Y)=>(L[Y]=!0,H==="define"?`
#ifndef HAS_UNIFORM_u_${Y}
in ${G} ${$} ${Y};
#else
uniform ${G} ${$} u_${Y};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Y}
    ${G} ${$} ${Y} = u_${Y};
#endif
`))),vertexSource:t=t.replace(l,((N,H,G,$,Y)=>{const se=$==="float"?"vec2":"vec4",de=Y.match(/color/)?"color":se;return L[Y]?H==="define"?`
#ifndef HAS_UNIFORM_u_${Y}
uniform lowp float u_${Y}_t;
in ${G} ${se} a_${Y};
out ${G} ${$} ${Y};
#else
uniform ${G} ${$} u_${Y};
#endif
`:de==="vec4"?`
#ifndef HAS_UNIFORM_u_${Y}
    ${Y} = a_${Y};
#else
    ${G} ${$} ${Y} = u_${Y};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Y}
    ${Y} = unpack_mix_${de}(a_${Y}, u_${Y}_t);
#else
    ${G} ${$} ${Y} = u_${Y};
#endif
`:H==="define"?`
#ifndef HAS_UNIFORM_u_${Y}
uniform lowp float u_${Y}_t;
in ${G} ${se} a_${Y};
#else
uniform ${G} ${$} u_${Y};
#endif
`:de==="vec4"?`
#ifndef HAS_UNIFORM_u_${Y}
    ${G} ${$} ${Y} = a_${Y};
#else
    ${G} ${$} ${Y} = u_${Y};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Y}
    ${G} ${$} ${Y} = unpack_mix_${de}(a_${Y}, u_${Y}_t);
#else
    ${G} ${$} ${Y} = u_${Y};
#endif
`})),staticAttributes:f,staticUniforms:E}}class Za{constructor(t,l,f){this.vertexBuffer=t,this.indexBuffer=l,this.segments=f}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var jn=A.aU([{name:"a_pos",type:"Int16",components:2}]);const fs="#define PROJECTION_MERCATOR",Ma="mercator";class vs{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Ma}get shaderDefine(){return fs}get shaderPreludeCode(){return gi.projectionMercator}get vertexShaderPreludeCode(){return gi.projectionMercator.vertexSource}get subdivisionGranularity(){return A.aV.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(t){}getMeshFromTileID(t,l,f,g,B){if(this._cachedMesh)return this._cachedMesh;const E=new A.aW;E.emplaceBack(0,0),E.emplaceBack(A.a5,0),E.emplaceBack(0,A.a5),E.emplaceBack(A.a5,A.a5);const L=t.createVertexBuffer(E,jn.members),N=A.aX.simpleSegment(0,0,4,2),H=new A.aY;H.emplaceBack(1,0,2),H.emplaceBack(1,2,3);const G=t.createIndexBuffer(H);return this._cachedMesh=new Za(L,G,N),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(t){}}class Os{constructor(t=0,l=0,f=0,g=0){if(isNaN(t)||t<0||isNaN(l)||l<0||isNaN(f)||f<0||isNaN(g)||g<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=l,this.left=f,this.right=g}interpolate(t,l,f){return l.top!=null&&t.top!=null&&(this.top=A.G.number(t.top,l.top,f)),l.bottom!=null&&t.bottom!=null&&(this.bottom=A.G.number(t.bottom,l.bottom,f)),l.left!=null&&t.left!=null&&(this.left=A.G.number(t.left,l.left,f)),l.right!=null&&t.right!=null&&(this.right=A.G.number(t.right,l.right,f)),this}getCenter(t,l){const f=A.an((this.left+t-this.right)/2,0,t),g=A.an((this.top+l-this.bottom)/2,0,l);return new A.P(f,g)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new Os(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function ri(b,t){if(!b.renderWorldCopies||b.lngRange)return;const l=t.lng-b.center.lng;t.lng+=l>180?-360:l<-180?360:0}function IA(b){return Math.max(0,Math.floor(b))}class Ua{constructor(t,l){var f;this.applyConstrain=(g,B)=>this._constrainOverride!==null?this._constrainOverride(g,B):this._callbacks.defaultConstrain(g,B),this._callbacks=t,this._tileSize=512,this._renderWorldCopies=l?.renderWorldCopies===void 0||!!l?.renderWorldCopies,this._minZoom=l?.minZoom||0,this._maxZoom=l?.maxZoom||22,this._minPitch=l?.minPitch==null?0:l?.minPitch,this._maxPitch=l?.maxPitch==null?60:l?.maxPitch,this._constrainOverride=(f=l?.constrainOverride)!==null&&f!==void 0?f:null,this.setMaxBounds(),this._width=0,this._height=0,this._center=new A.V(0,0),this._elevation=0,this._zoom=0,this._tileZoom=IA(this._zoom),this._scale=A.aq(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Os,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(t,l,f){this._constrainOverride=t.constrainOverride,this._latRange=t.latRange,this._lngRange=t.lngRange,this._width=t.width,this._height=t.height,this._center=t.center,this._elevation=t.elevation,this._minElevationForCurrentTile=t.minElevationForCurrentTile,this._zoom=t.zoom,this._tileZoom=IA(this._zoom),this._scale=A.aq(this._zoom),this._bearingInRadians=t.bearingInRadians,this._fovInRadians=t.fovInRadians,this._pitchInRadians=t.pitchInRadians,this._rollInRadians=t.rollInRadians,this._unmodified=t.unmodified,this._edgeInsets=new Os(t.padding.top,t.padding.bottom,t.padding.left,t.padding.right),this._minZoom=t.minZoom,this._maxZoom=t.maxZoom,this._minPitch=t.minPitch,this._maxPitch=t.maxPitch,this._renderWorldCopies=t.renderWorldCopies,this._cameraToCenterDistance=t.cameraToCenterDistance,this._nearZ=t.nearZ,this._farZ=t.farZ,this._autoCalculateNearFarZ=!f&&t.autoCalculateNearFarZ,l&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(t){this._minElevationForCurrentTile=t}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(t){this._minZoom!==t&&(this._minZoom=t,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(t){this._minPitch!==t&&(this._minPitch=t,this.setPitch(Math.max(this.pitch,t)))}get maxPitch(){return this._maxPitch}setMaxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.setPitch(Math.min(this.pitch,t)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(t){t===void 0?t=!0:t===null&&(t=!1),this._renderWorldCopies=t}get constrainOverride(){return this._constrainOverride}setConstrainOverride(t){t===void 0&&(t=null),this._constrainOverride!==t&&(this._constrainOverride=t,this.constrainInternal(),this._calcMatrices())}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new A.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(t){const l=A.W(t,-180,180)*Math.PI/180;var f,g,B,E,L,N,H,G,$;this._bearingInRadians!==l&&(this._unmodified=!1,this._bearingInRadians=l,this._calcMatrices(),this._rotationMatrix=I(),f=this._rotationMatrix,B=-this._bearingInRadians,E=(g=this._rotationMatrix)[0],L=g[1],N=g[2],H=g[3],G=Math.sin(B),$=Math.cos(B),f[0]=E*$+N*G,f[1]=L*$+H*G,f[2]=E*-G+N*$,f[3]=L*-G+H*$)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(t){const l=A.an(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==l&&(this._unmodified=!1,this._pitchInRadians=l,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(t){const l=t/180*Math.PI;this._rollInRadians!==l&&(this._unmodified=!1,this._rollInRadians=l,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return A.aZ(this._fovInRadians)}setFov(t){t=A.an(t,.1,150),this.fov!==t&&(this._unmodified=!1,this._fovInRadians=A.ap(t),this._calcMatrices())}get zoom(){return this._zoom}setZoom(t){const l=this.applyConstrain(this._center,t).zoom;this._zoom!==l&&(this._unmodified=!1,this._zoom=l,this._tileZoom=Math.max(0,Math.floor(l)),this._scale=A.aq(l),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(t){t!==this._elevation&&(this._elevation=t,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(t,l){this._autoCalculateNearFarZ=!1,this._nearZ=t,this._farZ=l,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,l,f){this._unmodified=!1,this._edgeInsets.interpolate(t,l,f),this.constrainInternal(),this._calcMatrices()}resize(t,l,f=!0){this._width=t,this._height=l,f&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Qr([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(t){t?(this._lngRange=[t.getWest(),t.getEast()],this._latRange=[t.getSouth(),t.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-A.ao,A.ao])}getCameraQueryGeometry(t,l){if(l.length===1)return[l[0],t];{const{minX:f,minY:g,maxX:B,maxY:E}=A.aa.fromPoints(l).extend(t);return[new A.P(f,g),new A.P(B,g),new A.P(B,E),new A.P(f,E),new A.P(f,g)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const t=this._unmodified,{center:l,zoom:f}=this.applyConstrain(this.center,this.zoom);this.setCenter(l),this.setZoom(f),this._unmodified=t,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let t=A.ar(new Float64Array(16));A.Q(t,t,[this._width/2,-this._height/2,1]),A.O(t,t,[1,-1,0]),this._clipSpaceToPixelsMatrix=t,t=A.ar(new Float64Array(16)),A.Q(t,t,[1,-1,1]),A.O(t,t,[-1,-1,0]),A.Q(t,t,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=t,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(t,l,f,g){const B=f!==void 0?f:this.bearing,E=g=g!==void 0?g:this.pitch,{distanceToCenter:L,clampedElevation:N}=this._distanceToCenterFromAltElevationPitch(l,this.elevation,E),{x:H,y:G}=Xr(E,B),$=A.a9.fromLngLat(t,l);let Y,se,de=A.a_(1,$.y),Se=0;do{if(Se+=1,Se>10)break;se=L/de,Y=new A.a9($.x+H*se,$.y+G*se),de=1/Y.meterInMercatorCoordinateUnits()}while(Math.abs(L-se*de)>1e-12);return{center:Y.toLngLat(),elevation:N,zoom:A.at(this.height/2/Math.tan(this.fovInRadians/2)/se/this.tileSize)}}recalculateZoomAndCenter(t){if(this.elevation-t==0)return;const l=1/this.worldSize,f=A.as(1,this.center.lat)*this.worldSize,g=A.a9.fromLngLat(this.center,this.elevation),B=g.x/l,E=g.y/l,L=g.z/l,N=this.pitch,H=this.bearing,{x:G,y:$,z:Y}=Xr(N,H),se=this.cameraToCenterDistance,de=B+se*-G,Se=E+se*-$,Me=L+se*Y,{distanceToCenter:Ee,clampedElevation:je}=this._distanceToCenterFromAltElevationPitch(Me/f,t,N),et=Ee*f,ze=new A.a9((de+G*et)*l,(Se+$*et)*l,0).toLngLat(),nt=A.as(1,ze.lat),at=A.at(this.height/2/Math.tan(this.fovInRadians/2)/Ee/nt/this.tileSize);this._elevation=je,this._center=ze,this.setZoom(at)}_distanceToCenterFromAltElevationPitch(t,l,f){const g=-Math.cos(A.ap(f)),B=t-l;let E,L=l;return g*B>=0||Math.abs(g)<.1?(E=1e4,L=t+E*g):E=-B/g,{distanceToCenter:E,clampedElevation:L}}getCameraPoint(){const t=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new A.P(t*Math.sin(this.rollInRadians),t*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const t=A.as(1,this.center.lat)*this.worldSize;return ur(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/t).toLngLat()}getMercatorTileCoordinates(t){if(!t)return[0,0,1,1];const l=t.canonical.z>=0?1<<t.canonical.z:Math.pow(2,t.canonical.z);return[t.canonical.x/l,t.canonical.y/l,1/l/A.a5,1/l/A.a5]}}class Xo{constructor(t,l){this.min=t,this.max=l,this.center=A.a$([],A.b0([],this.min,this.max),.5)}quadrant(t){const l=[t%2==0,t<2],f=A.b1(this.min),g=A.b1(this.max);for(let B=0;B<l.length;B++)f[B]=l[B]?this.min[B]:this.center[B],g[B]=l[B]?this.center[B]:this.max[B];return g[2]=this.max[2],new Xo(f,g)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}intersectsFrustum(t){let l=!0;for(let f=0;f<t.planes.length;f++){const g=this.intersectsPlane(t.planes[f]);if(g===0)return 0;g===1&&(l=!1)}return l?2:t.aabb.min[0]>this.max[0]||t.aabb.min[1]>this.max[1]||t.aabb.min[2]>this.max[2]||t.aabb.max[0]<this.min[0]||t.aabb.max[1]<this.min[1]||t.aabb.max[2]<this.min[2]?0:1}intersectsPlane(t){let l=t[3],f=t[3];for(let g=0;g<3;g++)t[g]>0?(l+=t[g]*this.min[g],f+=t[g]*this.max[g]):(f+=t[g]*this.min[g],l+=t[g]*this.max[g]);return l>=0?2:f<0?0:1}}class xs{distanceToTile2d(t,l,f,g){const B=g.distanceX([t,l]),E=g.distanceY([t,l]);return Math.hypot(B,E)}getWrap(t,l,f){return f}getTileBoundingVolume(t,l,f,g){var B,E;let L=0,N=0;if(g?.terrain){const G=new A.a2(t.z,l,t.z,t.x,t.y),$=g.terrain.getMinMaxElevation(G);L=(B=$.minElevation)!==null&&B!==void 0?B:Math.min(0,f),N=(E=$.maxElevation)!==null&&E!==void 0?E:Math.max(0,f)}const H=1<<t.z;return new Xo([l+t.x/H,t.y/H,L],[l+(t.x+1)/H,(t.y+1)/H,N])}allowVariableZoom(t,l){const f=t.fov*(Math.abs(Math.cos(t.rollInRadians))*t.height+Math.abs(Math.sin(t.rollInRadians))*t.width)/t.height,g=A.an(78.5-f/2,0,60);return!!l.terrain||t.pitch>g}allowWorldCopies(){return!0}prepareNextFrame(){}}class Aa{constructor(t,l,f){this.points=t,this.planes=l,this.aabb=f}static fromInvProjectionMatrix(t,l=1,f=0,g,B){const E=B?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],L=Math.pow(2,f),N=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((Y=>(function(se,de,Se,Me){const Ee=A.aH([],se,de),je=1/Ee[3]/Se*Me;return A.b6(Ee,Ee,[je,je,1/Ee[3],je])})(Y,t,l,L)));g&&(function(Y,se,de,Se){const Me=Se?4:0,Ee=Se?0:4;let je=0;const et=[],ze=[];for(let $e=0;$e<4;$e++){const gt=A.b2([],Y[$e+Ee],Y[$e+Me]),Nt=A.b7(gt);A.a$(gt,gt,1/Nt),et.push(Nt),ze.push(gt)}for(let $e=0;$e<4;$e++){const gt=A.b8(Y[$e+Me],ze[$e],de);je=gt!==null&&gt>=0?Math.max(je,gt):Math.max(je,et[$e])}const nt=(function($e,gt){const Nt=A.b2([],$e[gt[0]],$e[gt[1]]),Dt=A.b2([],$e[gt[2]],$e[gt[1]]),It=[0,0,0,0];return A.b3(It,A.b4([],Nt,Dt)),It[3]=-A.b5(It,$e[gt[0]]),It})(Y,se),at=(function($e,gt){const Nt=A.b9($e),Dt=A.ba([],$e,1/Nt),It=A.b2([],gt,A.a$([],Dt,A.b5(gt,Dt))),Qt=A.b9(It);if(Qt>0){const cr=Math.sqrt(1-Dt[3]*Dt[3]),fr=A.a$([],Dt,-Dt[3]),Ht=A.b0([],fr,A.a$([],It,cr/Qt));return A.bb(gt,Ht)}return null})(de,nt);if(at!==null){const $e=at/A.b5(ze[0],nt);je=Math.min(je,$e)}for(let $e=0;$e<4;$e++){const gt=Math.min(je,et[$e]);Y[$e+Ee]=[Y[$e+Me][0]+ze[$e][0]*gt,Y[$e+Me][1]+ze[$e][1]*gt,Y[$e+Me][2]+ze[$e][2]*gt,1]}})(N,E[0],g,B);const H=E.map((Y=>{const se=A.b2([],N[Y[0]],N[Y[1]]),de=A.b2([],N[Y[2]],N[Y[1]]),Se=A.b3([],A.b4([],se,de)),Me=-A.b5(Se,N[Y[1]]);return Se.concat(Me)})),G=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],$=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const Y of N)for(let se=0;se<3;se++)G[se]=Math.min(G[se],Y[se]),$[se]=Math.max($[se],Y[se]);return new Aa(N,H,new Xo(G,$))}}class ca{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,l,f){return this._helper.interpolatePadding(t,l,f)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,l,f=!0){this._helper.resize(t,l,f)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}setConstrainOverride(t){this._helper.setConstrainOverride(t)}overrideNearFarZ(t,l){this._helper.overrideNearFarZ(t,l)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(t,l){}constructor(t){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(l,f)=>{f=A.an(+f,this.minZoom,this.maxZoom);const g={center:new A.V(l.lng,l.lat),zoom:f};let B=this._helper._lngRange;if(!this._helper._renderWorldCopies&&B===null){const ze=179.9999999999;B=[-ze,ze]}const E=this.tileSize*A.aq(g.zoom);let L=0,N=E,H=0,G=E,$=0,Y=0;const{x:se,y:de}=this.size;if(this._helper._latRange){const ze=this._helper._latRange;L=A.X(ze[1])*E,N=A.X(ze[0])*E,N-L<de&&($=de/(N-L))}B&&(H=A.W(A.Y(B[0])*E,0,E),G=A.W(A.Y(B[1])*E,0,E),G<H&&(G+=E),G-H<se&&(Y=se/(G-H)));const{x:Se,y:Me}=dt(E,l);let Ee,je;const et=Math.max(Y||0,$||0);if(et){const ze=new A.P(Y?(G+H)/2:Se,$?(N+L)/2:Me);return g.center=jt(E,ze).wrap(),g.zoom+=A.at(et),g}if(this._helper._latRange){const ze=de/2;Me-ze<L&&(je=L+ze),Me+ze>N&&(je=N-ze)}if(B){const ze=(H+G)/2;let nt=Se;this._helper._renderWorldCopies&&(nt=A.W(Se,ze-E/2,ze+E/2));const at=se/2;nt-at<H&&(Ee=H+at),nt+at>G&&(Ee=G-at)}if(Ee!==void 0||je!==void 0){const ze=new A.P(Ee??Se,je??Me);g.center=jt(E,ze).wrap()}return g},this.applyConstrain=(l,f)=>this._helper.applyConstrain(l,f),this._helper=new Ua({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(l,f)=>this.defaultConstrain(l,f)},t),this._coveringTilesDetailsProvider=new xs}clone(){const t=new ca;return t.apply(this,!1),t}apply(t,l,f){this._helper.apply(t,l,f)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(t){const l=[new A.bc(0,t)];if(this._helper._renderWorldCopies){const f=this.screenPointToMercatorCoordinate(new A.P(0,0)),g=this.screenPointToMercatorCoordinate(new A.P(this._helper._width,0)),B=this.screenPointToMercatorCoordinate(new A.P(this._helper._width,this._helper._height)),E=this.screenPointToMercatorCoordinate(new A.P(0,this._helper._height)),L=Math.floor(Math.min(f.x,g.x,B.x,E.x)),N=Math.floor(Math.max(f.x,g.x,B.x,E.x)),H=1;for(let G=L-H;G<=N+H;G++)G!==0&&l.push(new A.bc(G,t))}return l}getCameraFrustum(){return Aa.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(t){const l=this.screenPointToLocation(this.centerPoint,t),f=t?t.getElevationForLngLatZoom(l,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(f)}setLocationAtPoint(t,l){const f=A.as(this.elevation,this.center.lat),g=this.screenPointToMercatorCoordinateAtZ(l,f),B=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,f),E=A.a9.fromLngLat(t),L=new A.a9(E.x-(g.x-B.x),E.y-(g.y-B.y));this.setCenter(L?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(t,l){return l?this.coordinatePoint(A.a9.fromLngLat(t),l.getElevationForLngLat(t,this),this._pixelMatrix3D):this.coordinatePoint(A.a9.fromLngLat(t))}screenPointToLocation(t,l){var f;return(f=this.screenPointToMercatorCoordinate(t,l))===null||f===void 0?void 0:f.toLngLat()}screenPointToMercatorCoordinate(t,l){if(l){const f=l.pointCoordinate(t);if(f!=null)return f}return this.screenPointToMercatorCoordinateAtZ(t)}screenPointToMercatorCoordinateAtZ(t,l){const f=l||0,g=[t.x,t.y,0,1],B=[t.x,t.y,1,1];A.aH(g,g,this._pixelMatrixInverse),A.aH(B,B,this._pixelMatrixInverse);const E=g[3],L=B[3],N=g[1]/E,H=B[1]/L,G=g[2]/E,$=B[2]/L,Y=G===$?0:(f-G)/($-G);return new A.a9(A.G.number(g[0]/E,B[0]/L,Y)/this.worldSize,A.G.number(N,H,Y)/this.worldSize,f)}coordinatePoint(t,l=0,f=this._pixelMatrix){const g=[t.x*this.worldSize,t.y*this.worldSize,l,1];return A.aH(g,g,f),new A.P(g[0]/g[3],g[1]/g[3])}getBounds(){const t=Math.max(0,this._helper._height/2-Bt(this));return new Qr().extend(this.screenPointToLocation(new A.P(0,t))).extend(this.screenPointToLocation(new A.P(this._helper._width,t))).extend(this.screenPointToLocation(new A.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new A.P(0,this._helper._height)))}isPointOnMapSurface(t,l){return l?l.pointCoordinate(t)!=null:t.y>this.height/2-Bt(this)}calculatePosMatrix(t,l=!1,f){var g;const B=(g=t.key)!==null&&g!==void 0?g:A.bd(t.wrap,t.canonical.z,t.canonical.z,t.canonical.x,t.canonical.y),E=l?this._alignedPosMatrixCache:this._posMatrixCache;if(E.has(B)){const H=E.get(B);return f?H.f32:H.f64}const L=Qe(t,this.worldSize);A.S(L,l?this._alignedProjMatrix:this._viewProjMatrix,L);const N={f64:L,f32:new Float32Array(L)};return E.set(B,N),f?N.f32:N.f64}calculateFogMatrix(t){const l=t.key,f=this._fogMatrixCacheF32;if(f.has(l))return f.get(l);const g=Qe(t,this.worldSize);return A.S(g,this._fogMatrix,g),f.set(l,new Float32Array(g)),f.get(l)}calculateCenterFromCameraLngLatAlt(t,l,f,g){return this._helper.calculateCenterFromCameraLngLatAlt(t,l,f,g)}_calculateNearFarZIfNeeded(t,l,f){if(!this._helper.autoCalculateNearFarZ)return;const g=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),B=t-g*this._helper._pixelPerMeter/Math.cos(l),E=g<0?B:t,L=Math.PI/2+this.pitchInRadians,N=A.ap(this.fov)*(Math.abs(Math.cos(A.ap(this.roll)))*this.height+Math.abs(Math.sin(A.ap(this.roll)))*this.width)/this.height*(.5+f.y/this.height),H=Math.sin(N)*E/Math.sin(A.an(Math.PI-L-N,.01,Math.PI-.01)),G=Bt(this),$=Math.atan(G/this._helper.cameraToCenterDistance),Y=A.ap(.75),se=$>Y?2*$*(.5+f.y/(2*G)):Y,de=Math.sin(se)*E/Math.sin(A.an(Math.PI-L-se,.01,Math.PI-.01)),Se=Math.min(H,de);this._helper._farZ=1.01*(Math.cos(Math.PI/2-l)*Se+E),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const t=this.centerOffset,l=dt(this.worldSize,this.center),f=l.x,g=l.y;this._helper._pixelPerMeter=A.as(1,this.center.lat)*this.worldSize;const B=A.ap(Math.min(this.pitch,it)),E=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(B));let L;this._calculateNearFarZIfNeeded(E,B,t),L=new Float64Array(16),A.be(L,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),A.aB(this._invProjMatrix,L),L[8]=2*-t.x/this._helper._width,L[9]=2*t.y/this._helper._height,this._projectionMatrix=A.bf(L),A.Q(L,L,[1,-1,1]),A.O(L,L,[0,0,-this._helper.cameraToCenterDistance]),A.bg(L,L,-this.rollInRadians),A.bh(L,L,this.pitchInRadians),A.bg(L,L,-this.bearingInRadians),A.O(L,L,[-f,-g,0]),this._mercatorMatrix=A.Q([],L,[this.worldSize,this.worldSize,this.worldSize]),A.Q(L,L,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=A.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,L),A.O(L,L,[0,0,-this.elevation]),this._viewProjMatrix=L,this._invViewProjMatrix=A.aB([],L);const N=[0,0,-1,1];A.aH(N,N,this._invViewProjMatrix),this._cameraPosition=[N[0]/N[3],N[1]/N[3],N[2]/N[3]],this._fogMatrix=new Float64Array(16),A.be(this._fogMatrix,this.fovInRadians,this.width/this.height,E,this._helper._farZ),this._fogMatrix[8]=2*-t.x/this.width,this._fogMatrix[9]=2*t.y/this.height,A.Q(this._fogMatrix,this._fogMatrix,[1,-1,1]),A.O(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),A.bg(this._fogMatrix,this._fogMatrix,-this.rollInRadians),A.bh(this._fogMatrix,this._fogMatrix,this.pitchInRadians),A.bg(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),A.O(this._fogMatrix,this._fogMatrix,[-f,-g,0]),A.Q(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),A.O(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=A.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,L);const H=this._helper._width%2/2,G=this._helper._height%2/2,$=Math.cos(this.bearingInRadians),Y=Math.sin(-this.bearingInRadians),se=f-Math.round(f)+$*H+Y*G,de=g-Math.round(g)+$*G+Y*H,Se=new Float64Array(L);if(A.O(Se,Se,[se>.5?se-1:se,de>.5?de-1:de,0]),this._alignedProjMatrix=Se,L=A.aB(new Float64Array(16),this._pixelMatrix),!L)throw new Error("failed to invert matrix");this._pixelMatrixInverse=L,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const t=this.screenPointToMercatorCoordinate(new A.P(0,0)),l=[t.x*this.worldSize,t.y*this.worldSize,0,1];return A.aH(l,l,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const t=A.as(1,this.center.lat)*this.worldSize;return ur(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/t).toLngLat()}lngLatToCameraDepth(t,l){const f=A.a9.fromLngLat(t),g=[f.x*this.worldSize,f.y*this.worldSize,l,1];return A.aH(g,g,this._viewProjMatrix),g[2]/g[3]}getProjectionData(t){const{overscaledTileID:l,aligned:f,applyTerrainMatrix:g}=t,B=this._helper.getMercatorTileCoordinates(l),E=l?this.calculatePosMatrix(l,f,!0):null;let L;return L=l&&l.terrainRttPosMatrix32f&&g?l.terrainRttPosMatrix32f:E||A.bi(),{mainMatrix:L,tileMercatorCoords:B,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:L}}isLocationOccluded(t){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(t,l,f){return 1}transformLightDirection(t){return A.b1(t)}getRayDirectionFromPixel(t){throw new Error("Not implemented.")}projectTileCoordinates(t,l,f,g){const B=this.calculatePosMatrix(f);let E;g?(E=[t,l,g(t,l),1],A.aH(E,E,B)):(E=[t,l,0,1],Qn(E,E,B));const L=E[3];return{point:new A.P(E[0]/L,E[1]/L),signedDistanceFromCamera:L,isOccluded:!1}}populateCache(t){for(const l of t)this.calculatePosMatrix(l)}getMatrixForModel(t,l){const f=A.a9.fromLngLat(t,l),g=f.meterInMercatorCoordinateUnits(),B=A.bj();return A.O(B,B,[f.x,f.y,f.z]),A.bg(B,B,Math.PI),A.bh(B,B,Math.PI/2),A.Q(B,B,[-g,g,g]),B}getProjectionDataForCustomLayer(t=!0){const l=new A.a2(0,0,0,0,0),f=this.getProjectionData({overscaledTileID:l,applyGlobeMatrix:t}),g=Qe(l,this.worldSize);A.S(g,this._viewProjMatrix,g),f.tileMercatorCoords=[0,0,1,1];const B=[A.a5,A.a5,this.worldSize/this._helper.pixelsPerMeter],E=A.bk();return A.Q(E,g,B),f.fallbackMatrix=E,f.mainMatrix=E,f}getFastPathSimpleProjectionMatrix(t){return this.calculatePosMatrix(t)}}function Io(){A.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function xl(b){if(b.useSlerp)if(b.k<1){const t=A.bl(b.startEulerAngles.roll,b.startEulerAngles.pitch,b.startEulerAngles.bearing),l=A.bl(b.endEulerAngles.roll,b.endEulerAngles.pitch,b.endEulerAngles.bearing),f=new Float64Array(4);A.bm(f,t,l,b.k);const g=A.bn(f);b.tr.setRoll(g.roll),b.tr.setPitch(g.pitch),b.tr.setBearing(g.bearing)}else b.tr.setRoll(b.endEulerAngles.roll),b.tr.setPitch(b.endEulerAngles.pitch),b.tr.setBearing(b.endEulerAngles.bearing);else b.tr.setRoll(A.G.number(b.startEulerAngles.roll,b.endEulerAngles.roll,b.k)),b.tr.setPitch(A.G.number(b.startEulerAngles.pitch,b.endEulerAngles.pitch,b.k)),b.tr.setBearing(A.G.number(b.startEulerAngles.bearing,b.endEulerAngles.bearing,b.k))}function Gl(b,t,l,f,g){const B=g.padding,E=dt(g.worldSize,l.getNorthWest()),L=dt(g.worldSize,l.getNorthEast()),N=dt(g.worldSize,l.getSouthEast()),H=dt(g.worldSize,l.getSouthWest()),G=A.ap(-f),$=E.rotate(G),Y=L.rotate(G),se=N.rotate(G),de=H.rotate(G),Se=new A.P(Math.max($.x,Y.x,de.x,se.x),Math.max($.y,Y.y,de.y,se.y)),Me=new A.P(Math.min($.x,Y.x,de.x,se.x),Math.min($.y,Y.y,de.y,se.y)),Ee=Se.sub(Me),je=(g.width-(B.left+B.right+t.left+t.right))/Ee.x,et=(g.height-(B.top+B.bottom+t.top+t.bottom))/Ee.y;if(et<0||je<0)return void Io();const ze=Math.min(A.at(g.scale*Math.min(je,et)),b.maxZoom),nt=A.P.convert(b.offset),at=new A.P((t.left-t.right)/2,(t.top-t.bottom)/2).rotate(A.ap(f)),$e=nt.add(at).mult(g.scale/A.aq(ze));return{center:jt(g.worldSize,E.add(N).div(2).sub($e)),zoom:ze,bearing:f}}class Lo{get useGlobeControls(){return!1}handlePanInertia(t,l){const f=t.mag(),g=Math.abs(Bt(l));return{easingOffset:t.mult(Math.min(.75*g/f,1)),easingCenter:l.center}}handleMapControlsRollPitchBearingZoom(t,l){t.bearingDelta&&l.setBearing(l.bearing+t.bearingDelta),t.pitchDelta&&l.setPitch(l.pitch+t.pitchDelta),t.rollDelta&&l.setRoll(l.roll+t.rollDelta),t.zoomDelta&&l.setZoom(l.zoom+t.zoomDelta)}handleMapControlsPan(t,l,f){t.around.distSqr(l.centerPoint)<.01||l.setLocationAtPoint(f,t.around)}cameraForBoxAndBearing(t,l,f,g,B){return Gl(t,l,f,g,B)}handleJumpToCenterZoom(t,l){t.zoom!==(l.zoom!==void 0?+l.zoom:t.zoom)&&t.setZoom(+l.zoom),l.center!==void 0&&t.setCenter(A.V.convert(l.center))}handleEaseTo(t,l){const f=t.zoom,g=t.padding,B={roll:t.roll,pitch:t.pitch,bearing:t.bearing},E={roll:l.roll===void 0?t.roll:l.roll,pitch:l.pitch===void 0?t.pitch:l.pitch,bearing:l.bearing===void 0?t.bearing:l.bearing},L=l.zoom!==void 0,N=!t.isPaddingEqual(l.padding);let H=!1;const G=L?+l.zoom:t.zoom;let $=t.centerPoint.add(l.offsetAsPoint);const Y=t.screenPointToLocation($),{center:se,zoom:de}=t.applyConstrain(A.V.convert(l.center||Y),G??f);ri(t,se);const Se=dt(t.worldSize,Y),Me=dt(t.worldSize,se).sub(Se),Ee=A.aq(de-f);return H=de!==f,{easeFunc:je=>{if(H&&t.setZoom(A.G.number(f,de,je)),A.bo(B,E)||xl({startEulerAngles:B,endEulerAngles:E,tr:t,k:je,useSlerp:B.roll!=E.roll}),N&&(t.interpolatePadding(g,l.padding,je),$=t.centerPoint.add(l.offsetAsPoint)),l.around)t.setLocationAtPoint(l.around,l.aroundPoint);else{const et=A.aq(t.zoom-f),ze=de>f?Math.min(2,Ee):Math.max(.5,Ee),nt=Math.pow(ze,1-je),at=jt(t.worldSize,Se.add(Me.mult(je*nt)).mult(et));t.setLocationAtPoint(t.renderWorldCopies?at.wrap():at,$)}},isZooming:H,elevationCenter:se}}handleFlyTo(t,l){const f=l.zoom!==void 0,g=t.zoom,B=t.applyConstrain(A.V.convert(l.center||l.locationAtOffset),f?+l.zoom:g),E=B.center,L=B.zoom;ri(t,E);const N=dt(t.worldSize,l.locationAtOffset),H=dt(t.worldSize,E).sub(N),G=H.mag(),$=A.aq(L-g);let Y;if(l.minZoom!==void 0){const se=Math.min(+l.minZoom,g,L),de=t.applyConstrain(E,se).zoom;Y=A.aq(de-g)}return{easeFunc:(se,de,Se,Me)=>{t.setZoom(se===1?L:g+A.at(de));const Ee=se===1?E:jt(t.worldSize,N.add(H.mult(Se)).mult(de));t.setLocationAtPoint(t.renderWorldCopies?Ee.wrap():Ee,Me)},scaleOfZoom:$,targetCenter:E,scaleOfMinZoom:Y,pixelPathLength:G}}}class Xn{constructor(t,l,f){this.blendFunction=t,this.blendColor=l,this.mask=f}}Xn.Replace=[1,0],Xn.disabled=new Xn(Xn.Replace,A.bp.transparent,[!1,!1,!1,!1]),Xn.unblended=new Xn(Xn.Replace,A.bp.transparent,[!0,!0,!0,!0]),Xn.alphaBlended=new Xn([1,771],A.bp.transparent,[!0,!0,!0,!0]);const Mo=2305;class In{constructor(t,l,f){this.enable=t,this.mode=l,this.frontFace=f}}In.disabled=new In(!1,1029,Mo),In.backCCW=new In(!0,1029,Mo),In.frontCCW=new In(!0,1028,Mo);class pn{constructor(t,l,f){this.func=t,this.mask=l,this.range=f}}pn.ReadOnly=!1,pn.ReadWrite=!0,pn.disabled=new pn(519,pn.ReadOnly,[0,1]);const Uo=7680;class En{constructor(t,l,f,g,B,E){this.test=t,this.ref=l,this.mask=f,this.fail=g,this.depthFail=B,this.pass=E}}En.disabled=new En({func:519,mask:0},0,0,Uo,Uo,Uo);const LA=new WeakMap;function Da(b){var t;if(LA.has(b))return LA.get(b);{const l=(t=b.getParameter(b.VERSION))===null||t===void 0?void 0:t.startsWith("WebGL 2.0");return LA.set(b,l),l}}class ql{get awaitingQuery(){return!!this._readbackQueue}constructor(t){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=t;const l=t.context,f=l.gl;this._texFormat=f.RGBA,this._texType=f.UNSIGNED_BYTE;const g=new A.aW;g.emplaceBack(-1,-1),g.emplaceBack(2,-1),g.emplaceBack(-1,2);const B=new A.aY;B.emplaceBack(0,1,2),this._fullscreenTriangle=new Za(l.createVertexBuffer(g,jn.members),l.createIndexBuffer(B),A.aX.simpleSegment(0,0,g.length,B.length)),this._resultBuffer=new Uint8Array(4),l.activeTexture.set(f.TEXTURE1);const E=f.createTexture();f.bindTexture(f.TEXTURE_2D,E),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST),f.texImage2D(f.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=l.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(E),Da(f)&&(this._pbo=f.createBuffer(),f.bindBuffer(f.PIXEL_PACK_BUFFER,this._pbo),f.bufferData(f.PIXEL_PACK_BUFFER,4,f.STREAM_READ),f.bindBuffer(f.PIXEL_PACK_BUFFER,null))}destroy(){const t=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),t.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(t,l){const f=this._updateCount;return this._readbackQueue?f>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():f>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(t,l),this._updateCount++,this._measuredError}_bindFramebuffer(){const t=this._cachedRenderContext.context,l=t.gl;t.activeTexture.set(l.TEXTURE1),l.bindTexture(l.TEXTURE_2D,this._fbo.colorAttachment.get()),t.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(t,l){const f=this._cachedRenderContext.context,g=f.gl;if(this._bindFramebuffer(),f.viewport.set([0,0,this._texWidth,this._texHeight]),f.clear({color:A.bp.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(f,g.TRIANGLES,pn.disabled,En.disabled,Xn.unblended,In.disabled,((B,E)=>({u_input:B,u_output_expected:E}))(t,l),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Da(g)){g.bindBuffer(g.PIXEL_PACK_BUFFER,this._pbo),g.readBuffer(g.COLOR_ATTACHMENT0),g.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),g.bindBuffer(g.PIXEL_PACK_BUFFER,null);const B=g.fenceSync(g.SYNC_GPU_COMMANDS_COMPLETE,0);g.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:B}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const t=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Da(t)){const l=t.clientWaitSync(this._readbackQueue.sync,0,0);if(l===t.WAIT_FAILED)return A.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(l===t.TIMEOUT_EXPIRED)return;t.bindBuffer(t.PIXEL_PACK_BUFFER,this._pbo),t.getBufferSubData(t.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),t.bindBuffer(t.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),t.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=ql._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(t){let l=0;return l+=t[0]/256,l+=t[1]/65536,l+=t[2]/16777216,t[3]<127&&(l=-l),l/128}}const V=A.a5/128;function he(b,t){const l=b.granularity!==void 0?Math.max(b.granularity,1):1,f=l+(b.generateBorders?2:0),g=l+(b.extendToNorthPole||b.generateBorders?1:0)+(b.extendToSouthPole||b.generateBorders?1:0),B=f+1,E=g+1,L=b.generateBorders?-1:0,N=b.generateBorders||b.extendToNorthPole?-1:0,H=l+(b.generateBorders?1:0),G=l+(b.generateBorders||b.extendToSouthPole?1:0),$=B*E,Y=f*g*6,se=B*E>65536;if(se&&t==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const de=se||t==="32bit",Se=new Int16Array(2*$);let Me=0;for(let et=N;et<=G;et++)for(let ze=L;ze<=H;ze++){let nt=ze/l*A.a5;ze===-1&&(nt=-V),ze===l+1&&(nt=A.a5+V);let at=et/l*A.a5;et===-1&&(at=b.extendToNorthPole?A.br:-V),et===l+1&&(at=b.extendToSouthPole?A.bs:A.a5+V),Se[Me++]=nt,Se[Me++]=at}const Ee=de?new Uint32Array(Y):new Uint16Array(Y);let je=0;for(let et=0;et<g;et++)for(let ze=0;ze<f;ze++){const nt=ze+1+et*B,at=ze+(et+1)*B,$e=ze+1+(et+1)*B;Ee[je++]=ze+et*B,Ee[je++]=at,Ee[je++]=nt,Ee[je++]=nt,Ee[je++]=at,Ee[je++]=$e}return{vertices:Se.buffer.slice(0),indices:Ee.buffer.slice(0),uses32bitIndices:de}}const qe=new A.aV({fill:new A.bt(128,2),line:new A.bt(512,0),tile:new A.bt(128,32),stencil:new A.bt(128,1),circle:3});class pt{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return gi.projectionGlobe}get vertexShaderPreludeCode(){return gi.projectionMercator.vertexSource}get subdivisionGranularity(){return qe}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(t){this._errorMeasurement||(this._errorMeasurement=new ql(t));const l=A.X(this._errorQueryLatitudeDegrees),f=2*Math.atan(Math.exp(Math.PI-l*Math.PI*2))-.5*Math.PI,g=this._errorMeasurement.updateErrorLoop(l,f),B=ie();g!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=g,this._errorMeasurementLastChangeTime=B);const E=Math.min(Math.max((B-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=A.bu(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,A.bv(E))}_getMeshKey(t){return`${t.granularity.toString(36)}_${t.generateBorders?"b":""}${t.extendToNorthPole?"n":""}${t.extendToSouthPole?"s":""}`}getMeshFromTileID(t,l,f,g,B){const E=(B==="stencil"?qe.stencil:qe.tile).getGranularityForZoomLevel(l.z);return this._getMesh(t,{granularity:E,generateBorders:f,extendToNorthPole:l.y===0&&g,extendToSouthPole:l.y===(1<<l.z)-1&&g})}_getMesh(t,l){const f=this._getMeshKey(l);if(f in this._tileMeshCache)return this._tileMeshCache[f];const g=(function(B,E){const L=he(E,"16bit"),N=A.aW.deserialize({arrayBuffer:L.vertices,length:L.vertices.byteLength/2/2}),H=A.aY.deserialize({arrayBuffer:L.indices,length:L.indices.byteLength/2/3});return new Za(B.createVertexBuffer(N,jn.members),B.createIndexBuffer(H),A.aX.simpleSegment(0,0,N.length,H.length))})(t,l);return this._tileMeshCache[f]=g,g}recalculate(t){}hasTransition(){const t=ie();let l=!1;return l=l||(t-this._errorMeasurementLastChangeTime)/1e3<.7,l=l||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,l}setErrorQueryLatitudeDegrees(t){this._errorQueryLatitudeDegrees=t}}const St=new A.t({type:new A.D(A.u.projection.type)});class Kt extends A.E{constructor(t){super(),this._transitionable=new A.x(St,void 0),this.setProjection(t),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new A.H(0)),this._mercatorProjection=new vs,this._verticalPerspectiveProjection=new pt}get transitionState(){const t=this.properties.get("type");if(typeof t=="string"&&t==="mercator")return 0;if(typeof t=="string"&&t==="vertical-perspective")return 1;if(t instanceof A.bw){if(t.from==="vertical-perspective"&&t.to==="mercator")return 1-t.transition;if(t.from==="mercator"&&t.to==="vertical-perspective")return t.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(t){this._mercatorProjection.updateGPUdependent(t),this._verticalPerspectiveProjection.updateGPUdependent(t)}getMeshFromTileID(t,l,f,g,B){return this.currentProjection.getMeshFromTileID(t,l,f,g,B)}setProjection(t){this._transitionable.setValue("type",t?.type||"mercator")}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}setErrorQueryLatitudeDegrees(t){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(t),this._mercatorProjection.setErrorQueryLatitudeDegrees(t)}}function or(b){const t=un(b.worldSize,b.center.lat);return 2*Math.PI*t}function wr(b,t,l,f,g){const B=1/(1<<g),E=t/A.a5*B+f*B,L=A.bz((b/A.a5*B+l*B)*Math.PI*2+Math.PI,2*Math.PI),N=2*Math.atan(Math.exp(Math.PI-E*Math.PI*2))-.5*Math.PI,H=Math.cos(N),G=new Float64Array(3);return G[0]=Math.sin(L)*H,G[1]=Math.sin(N),G[2]=Math.cos(L)*H,G}function Br(b){return(function(t,l){const f=Math.cos(l),g=new Float64Array(3);return g[0]=Math.sin(t)*f,g[1]=Math.sin(l),g[2]=Math.cos(t)*f,g})(b.lng*Math.PI/180,b.lat*Math.PI/180)}function un(b,t){return b/(2*Math.PI)/Math.cos(t*Math.PI/180)}function Tn(b){const t=Math.asin(b[1])/Math.PI*180,l=Math.sqrt(b[0]*b[0]+b[2]*b[2]);if(l>1e-6){const f=b[0]/l,g=Math.acos(b[2]/l),B=(f>0?g:-g)/Math.PI*180;return new A.V(A.W(B,-180,180),t)}return new A.V(0,t)}function Mn(b){return Math.cos(b*Math.PI/180)}function Nn(b,t){const l=Mn(b),f=Mn(t);return A.at(f/l)}function ua(b,t){const l=b.rotate(t.bearingInRadians),f=t.zoom+Nn(t.center.lat,0),g=A.bu(1/Mn(t.center.lat),1/Mn(Math.min(Math.abs(t.center.lat),60)),A.bx(f,7,3,0,1)),B=360/or({worldSize:t.worldSize,center:{lat:t.center.lat}});return new A.V(t.center.lng-l.x*B*g,A.an(t.center.lat+l.y*B,-A.ao,A.ao))}function Ci(b){const t=.5*b,l=Math.sin(t),f=Math.cos(t);return Math.log(l+f)-Math.log(f-l)}function Pa(b,t,l,f){const g=b.lat+l*f;if(Math.abs(l)>1){const B=(Math.sign(b.lat+l)!==Math.sign(b.lat)?-Math.abs(b.lat):Math.abs(b.lat))*Math.PI/180,E=Math.abs(b.lat+l)*Math.PI/180,L=Ci(B+f*(E-B)),N=Ci(B),H=Ci(E);return new A.V(b.lng+t*((L-N)/(H-N)),g)}return new A.V(b.lng+t*f,g)}class Na{constructor(t){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=t}swapBuffers(){if(!this._hadAnyChanges)return;const t=this._cachePrevious;this._cachePrevious=this._cache,this._cache=t,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(t,l,f,g){const B=`${t.z}_${t.x}_${t.y}_${g?.terrain?"t":""}`,E=this._cache.get(B);if(E)return E;const L=this._cachePrevious.get(B);if(L)return this._cache.set(B,L),L;const N=this._boundingVolumeFactory(t,l,f,g);return this._cache.set(B,N),this._hadAnyChanges=!0,N}}class ha{constructor(t,l,f,g){this.min=f,this.max=g,this.points=t,this.planes=l}static fromAabb(t,l){const f=[];for(let g=0;g<8;g++)f.push([1&~g?t[0]:l[0],(g>>1&1)==1?l[1]:t[1],(g>>2&1)==1?l[2]:t[2]]);return new ha(f,[[-1,0,0,l[0]],[1,0,0,-t[0]],[0,-1,0,l[1]],[0,1,0,-t[1]],[0,0,-1,l[2]],[0,0,1,-t[2]]],t,l)}static fromCenterSizeAngles(t,l,f){const g=A.bB([],f[0],f[1],f[2]),B=A.bC([],[l[0],0,0],g),E=A.bC([],[0,l[1],0],g),L=A.bC([],[0,0,l[2]],g),N=[...t],H=[...t];for(let $=0;$<8;$++)for(let Y=0;Y<3;Y++){const se=t[Y]+B[Y]*(1&~$?-1:1)+E[Y]*(($>>1&1)==1?1:-1)+L[Y]*(($>>2&1)==1?1:-1);N[Y]=Math.min(N[Y],se),H[Y]=Math.max(H[Y],se)}const G=[];for(let $=0;$<8;$++){const Y=[...t];A.b0(Y,Y,A.a$([],B,1&~$?-1:1)),A.b0(Y,Y,A.a$([],E,($>>1&1)==1?1:-1)),A.b0(Y,Y,A.a$([],L,($>>2&1)==1?1:-1)),G.push(Y)}return new ha(G,[[...B,-A.b5(B,G[0])],[...E,-A.b5(E,G[0])],[...L,-A.b5(L,G[0])],[-B[0],-B[1],-B[2],-A.b5(B,G[7])],[-E[0],-E[1],-E[2],-A.b5(E,G[7])],[-L[0],-L[1],-L[2],-A.b5(L,G[7])]],N,H)}intersectsFrustum(t){let l=!0;const f=this.points.length,g=this.planes.length,B=t.planes.length,E=t.points.length;for(let L=0;L<B;L++){const N=t.planes[L];let H=0;for(let G=0;G<f;G++){const $=this.points[G];N[0]*$[0]+N[1]*$[1]+N[2]*$[2]+N[3]>=0&&H++}if(H===0)return 0;H<f&&(l=!1)}if(l)return 2;for(let L=0;L<g;L++){const N=this.planes[L];let H=0;for(let G=0;G<E;G++){const $=t.points[G];N[0]*$[0]+N[1]*$[1]+N[2]*$[2]+N[3]>=0&&H++}if(H===0)return 0}return 1}intersectsPlane(t){const l=this.points.length;let f=0;for(let g=0;g<l;g++){const B=this.points[g];t[0]*B[0]+t[1]*B[1]+t[2]*B[2]+t[3]>=0&&f++}return f===l?2:f===0?0:1}}function zs(b,t,l){const f=b-t;return f<0?-f:Math.max(0,f-l)}function js(b,t,l,f,g){const B=b-l;let E;return E=B<0?Math.min(-B,1+B-g):B>1?Math.min(Math.max(B-g,0),1-B):0,Math.max(E,zs(t,f,g))}class Wo{constructor(){this._boundingVolumeCache=new Na(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(t,l,f,g){const B=1<<f.z,E=1/B,L=f.x/B,N=f.y/B;let H=2;return H=Math.min(H,js(t,l,L,N,E)),H=Math.min(H,js(t,l,L+.5,-N-E,E)),H=Math.min(H,js(t,l,L+.5,2-N-E,E)),H}getWrap(t,l,f){const g=1<<l.z,B=1/g,E=l.x/g,L=zs(t.x,E,B),N=zs(t.x,E-1,B),H=zs(t.x,E+1,B),G=Math.min(L,N,H);return G===H?1:G===N?-1:0}allowVariableZoom(t,l){return mi(t,l)>4}allowWorldCopies(){return!1}getTileBoundingVolume(t,l,f,g){return this._boundingVolumeCache.getTileBoundingVolume(t,l,f,g)}_computeTileBoundingVolume(t,l,f,g){var B,E;let L=0,N=0;if(g?.terrain){const H=new A.a2(t.z,l,t.z,t.x,t.y),G=g.terrain.getMinMaxElevation(H);L=(B=G.minElevation)!==null&&B!==void 0?B:Math.min(0,f),N=(E=G.maxElevation)!==null&&E!==void 0?E:Math.max(0,f)}if(L/=A.bE,N/=A.bE,L+=1,N+=1,t.z<=0)return ha.fromAabb([-N,-N,-N],[N,N,N]);if(t.z===1)return ha.fromAabb([t.x===0?-N:0,t.y===0?0:-N,-N],[t.x===0?0:N,t.y===0?N:0,N]);{const H=[wr(0,0,t.x,t.y,t.z),wr(A.a5,0,t.x,t.y,t.z),wr(A.a5,A.a5,t.x,t.y,t.z),wr(0,A.a5,t.x,t.y,t.z)],G=[];for(const It of H)G.push(A.a$([],It,N));if(N!==L)for(const It of H)G.push(A.a$([],It,L));t.y===0&&G.push([0,1,0]),t.y===(1<<t.z)-1&&G.push([0,-1,0]);const $=[1,1,1],Y=[-1,-1,-1];for(const It of G)for(let Qt=0;Qt<3;Qt++)$[Qt]=Math.min($[Qt],It[Qt]),Y[Qt]=Math.max(Y[Qt],It[Qt]);const se=wr(A.a5/2,A.a5/2,t.x,t.y,t.z),de=A.b4([],[0,1,0],se);A.b3(de,de);const Se=A.b4([],se,de);A.b3(Se,Se);const Me=A.b4([],H[2],H[1]);A.b3(Me,Me);const Ee=A.b4([],H[0],H[3]);A.b3(Ee,Ee),G.push(A.a$([],se,N)),t.y>=(1<<t.z)/2&&G.push(A.a$([],wr(A.a5/2,0,t.x,t.y,t.z),N)),t.y<(1<<t.z)/2&&G.push(A.a$([],wr(A.a5/2,A.a5,t.x,t.y,t.z),N));const je=$A(se,G),et=$A(Se,G),ze=[-se[0],-se[1],-se[2],je.max],nt=[se[0],se[1],se[2],-je.min],at=[-Se[0],-Se[1],-Se[2],et.max],$e=[Se[0],Se[1],Se[2],-et.min],gt=[...Me,0],Nt=[...Ee,0],Dt=[];return t.y===0?Dt.push(A.bD(Nt,gt,ze),A.bD(Nt,gt,nt)):Dt.push(A.bD(at,gt,ze),A.bD(at,gt,nt),A.bD(at,Nt,ze),A.bD(at,Nt,nt)),t.y===(1<<t.z)-1?Dt.push(A.bD(Nt,gt,ze),A.bD(Nt,gt,nt)):Dt.push(A.bD($e,gt,ze),A.bD($e,gt,nt),A.bD($e,Nt,ze),A.bD($e,Nt,nt)),new ha(Dt,[ze,nt,at,$e,gt,Nt],$,Y)}}}function $A(b,t){let l=1/0,f=-1/0;for(const g of t){const B=A.b5(b,g);l=Math.min(l,B),f=Math.max(f,B)}return{min:l,max:f}}class bl{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,l,f){return this._helper.interpolatePadding(t,l,f)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,l){this._helper.resize(t,l)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}setConstrainOverride(t){this._helper.setConstrainOverride(t)}overrideNearFarZ(t,l){this._helper.overrideNearFarZ(t,l)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(t){}constructor(t){this._cachedClippingPlane=A.bF(),this._projectionMatrix=A.bj(),this._globeViewProjMatrix32f=A.bi(),this._globeViewProjMatrixNoCorrection=A.bj(),this._globeViewProjMatrixNoCorrectionInverted=A.bj(),this._globeProjMatrixInverted=A.bj(),this._cameraPosition=A.bA(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(l,f)=>{const g=A.an(l.lat,-A.ao,A.ao),B=A.an(+f,this.minZoom+Nn(0,g),this.maxZoom);return{center:new A.V(l.lng,g),zoom:B}},this.applyConstrain=(l,f)=>this._helper.applyConstrain(l,f),this._helper=new Ua({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(l,f)=>this.defaultConstrain(l,f)},t),this._coveringTilesDetailsProvider=new Wo}clone(){const t=new bl;return t.apply(this,!1),t}apply(t,l,f){this._globeLatitudeErrorCorrectionRadians=f||0,this._helper.apply(t,l)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const t=A.bA();return t[0]=this._cameraPosition[0],t[1]=this._cameraPosition[1],t[2]=this._cameraPosition[2],t}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(t){const{overscaledTileID:l,applyGlobeMatrix:f}=t,g=this._helper.getMercatorTileCoordinates(l);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:g,clippingPlane:this._cachedClippingPlane,projectionTransition:f?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(t){const l=this.pitchInRadians,f=this.cameraToCenterDistance/t,g=Math.sin(l)*f,B=Math.cos(l)*f+1,E=1/Math.sqrt(g*g+B*B)*1;let L=-g,N=B;const H=Math.sqrt(L*L+N*N);L/=H,N/=H;const G=[0,L,N];A.bG(G,G,[0,0,0],-this.bearingInRadians),A.bH(G,G,[0,0,0],-1*this.center.lat*Math.PI/180),A.bI(G,G,[0,0,0],this.center.lng*Math.PI/180);const $=1/A.b7(G);return A.a$(G,G,$),[...G,-E*$]}isLocationOccluded(t){return!this.isSurfacePointVisible(Br(t))}transformLightDirection(t){const l=this._helper._center.lng*Math.PI/180,f=this._helper._center.lat*Math.PI/180,g=Math.cos(f),B=[Math.sin(l)*g,Math.sin(f),Math.cos(l)*g],E=[B[2],0,-B[0]],L=[0,0,0];A.b4(L,E,B),A.b3(E,E),A.b3(L,L);const N=[0,0,0];return A.b3(N,[E[0]*t[0]+L[0]*t[1]+B[0]*t[2],E[1]*t[0]+L[1]*t[1]+B[1]*t[2],E[2]*t[0]+L[2]*t[1]+B[2]*t[2]]),N}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(t,l,f){const g=(function(L,N,H){const G=1/(1<<H.z);return new A.a9(L/A.a5*G+H.x*G,N/A.a5*G+H.y*G)})(t,l,f.canonical),B=(E=g.y,[A.bz(g.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-E*Math.PI*2))-.5*Math.PI]);var E;return this.getCircleRadiusCorrection()/Math.cos(B[1])}projectTileCoordinates(t,l,f,g){const B=f.canonical,E=wr(t,l,B.x,B.y,B.z),L=1+(g?g(t,l):0)/A.bE,N=[E[0]*L,E[1]*L,E[2]*L,1];A.aH(N,N,this._globeViewProjMatrixNoCorrection);const H=this._cachedClippingPlane,G=H[0]*E[0]+H[1]*E[1]+H[2]*E[2]+H[3]<0;return{point:new A.P(N[0]/N[3],N[1]/N[3]),signedDistanceFromCamera:N[3],isOccluded:G}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const t=un(this.worldSize,this.center.lat),l=A.bk(),f=A.bk();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*t),A.be(l,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const g=this.centerOffset;l[8]=2*-g.x/this._helper._width,l[9]=2*g.y/this._helper._height,this._projectionMatrix=A.bf(l),this._globeProjMatrixInverted=A.bk(),A.aB(this._globeProjMatrixInverted,l),A.O(l,l,[0,0,-this.cameraToCenterDistance]),A.bg(l,l,this.rollInRadians),A.bh(l,l,-this.pitchInRadians),A.bg(l,l,this.bearingInRadians),A.O(l,l,[0,0,-t]);const B=A.bA();B[0]=t,B[1]=t,B[2]=t,A.bh(f,l,this.center.lat*Math.PI/180),A.bJ(f,f,-this.center.lng*Math.PI/180),A.Q(f,f,B),this._globeViewProjMatrixNoCorrection=f,A.bh(l,l,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),A.bJ(l,l,-this.center.lng*Math.PI/180),A.Q(l,l,B),this._globeViewProjMatrix32f=new Float32Array(l),this._globeViewProjMatrixNoCorrectionInverted=A.bk(),A.aB(this._globeViewProjMatrixNoCorrectionInverted,f);const E=A.bA();this._cameraPosition=A.bA(),this._cameraPosition[2]=this.cameraToCenterDistance/t,A.bG(this._cameraPosition,this._cameraPosition,E,-this.rollInRadians),A.bH(this._cameraPosition,this._cameraPosition,E,this.pitchInRadians),A.bG(this._cameraPosition,this._cameraPosition,E,-this.bearingInRadians),A.b0(this._cameraPosition,this._cameraPosition,[0,0,1]),A.bH(this._cameraPosition,this._cameraPosition,E,-this.center.lat*Math.PI/180),A.bI(this._cameraPosition,this._cameraPosition,E,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(t);const L=A.bf(this._globeViewProjMatrixNoCorrectionInverted);A.Q(L,L,[1,1,-1]),this._cachedFrustum=Aa.fromInvProjectionMatrix(L,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(t){A.w("calculateFogMatrix is not supported on globe projection.");const l=A.bk();return A.ar(l),l}getVisibleUnwrappedCoordinates(t){return[new A.bc(0,t)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(t){t&&A.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(t,l){if(!this._globeViewProjMatrixNoCorrection)return 1;const f=Br(t);A.a$(f,f,1+l/A.bE);const g=A.bF();return A.aH(g,[f[0],f[1],f[2],1],this._globeViewProjMatrixNoCorrection),g[2]/g[3]}populateCache(t){}getBounds(){const t=.5*this.width,l=.5*this.height,f=[new A.P(0,0),new A.P(t,0),new A.P(this.width,0),new A.P(this.width,l),new A.P(this.width,this.height),new A.P(t,this.height),new A.P(0,this.height),new A.P(0,l)],g=[];for(const $ of f)g.push(this.unprojectScreenPoint($));let B=0,E=0,L=0,N=0;const H=this.center;for(const $ of g){const Y=A.bK(H.lng,$.lng),se=A.bK(H.lat,$.lat);Y<E&&(E=Y),Y>B&&(B=Y),se<N&&(N=se),se>L&&(L=se)}const G=[H.lng+E,H.lat+N,H.lng+B,H.lat+L];return this.isSurfacePointOnScreen([0,1,0])&&(G[3]=90,G[0]=-180,G[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(G[1]=-90,G[0]=-180,G[2]=180),new Qr(G)}calculateCenterFromCameraLngLatAlt(t,l,f,g){return this._helper.calculateCenterFromCameraLngLatAlt(t,l,f,g)}setLocationAtPoint(t,l){const f=Br(this.unprojectScreenPoint(l)),g=Br(t),B=A.bA();A.bL(B);const E=A.bA();A.bI(E,f,B,-this.center.lng*Math.PI/180),A.bH(E,E,B,this.center.lat*Math.PI/180);const L=g[0]*g[0]+g[2]*g[2],N=E[0]*E[0];if(L<N)return;const H=Math.sqrt(L-N),G=-H,$=A.bM(g[0],g[2],E[0],H),Y=A.bM(g[0],g[2],E[0],G),se=A.bA();A.bI(se,g,B,-$);const de=A.bM(se[1],se[2],E[1],E[2]),Se=A.bA();A.bI(Se,g,B,-Y);const Me=A.bM(Se[1],Se[2],E[1],E[2]),Ee=.5*Math.PI,je=de>=-Ee&&de<=Ee,et=Me>=-Ee&&Me<=Ee;let ze,nt;if(je&&et){const Nt=this.center.lng*Math.PI/180,Dt=this.center.lat*Math.PI/180;A.bN($,Nt)+A.bN(de,Dt)<A.bN(Y,Nt)+A.bN(Me,Dt)?(ze=$,nt=de):(ze=Y,nt=Me)}else if(je)ze=$,nt=de;else{if(!et)return;ze=Y,nt=Me}const at=ze/Math.PI*180,$e=nt/Math.PI*180,gt=this.center.lat;this.setCenter(new A.V(at,A.an($e,-90,90))),this.setZoom(this.zoom+Nn(gt,this.center.lat))}locationToScreenPoint(t,l){const f=Br(t);if(l){const g=l.getElevationForLngLatZoom(t,this._helper._tileZoom);A.a$(f,f,1+g/A.bE)}return this._projectSurfacePointToScreen(f)}_projectSurfacePointToScreen(t){const l=A.bF();return A.aH(l,[...t,1],this._globeViewProjMatrixNoCorrection),l[0]/=l[3],l[1]/=l[3],new A.P((.5*l[0]+.5)*this.width,(.5*-l[1]+.5)*this.height)}screenPointToMercatorCoordinate(t,l){if(l){const f=l.pointCoordinate(t);if(f)return f}return A.a9.fromLngLat(this.unprojectScreenPoint(t))}screenPointToLocation(t,l){var f;return(f=this.screenPointToMercatorCoordinate(t,l))===null||f===void 0?void 0:f.toLngLat()}isPointOnMapSurface(t,l){const f=this._cameraPosition,g=this.getRayDirectionFromPixel(t);return!!this.rayPlanetIntersection(f,g)}getRayDirectionFromPixel(t){const l=A.bF();l[0]=t.x/this.width*2-1,l[1]=-1*(t.y/this.height*2-1),l[2]=1,l[3]=1,A.aH(l,l,this._globeViewProjMatrixNoCorrectionInverted),l[0]/=l[3],l[1]/=l[3],l[2]/=l[3];const f=A.bA();f[0]=l[0]-this._cameraPosition[0],f[1]=l[1]-this._cameraPosition[1],f[2]=l[2]-this._cameraPosition[2];const g=A.bA();return A.b3(g,f),g}isSurfacePointVisible(t){const l=this._cachedClippingPlane;return l[0]*t[0]+l[1]*t[1]+l[2]*t[2]+l[3]>=0}isSurfacePointOnScreen(t){if(!this.isSurfacePointVisible(t))return!1;const l=A.bF();return A.aH(l,[...t,1],this._globeViewProjMatrixNoCorrection),l[0]/=l[3],l[1]/=l[3],l[2]/=l[3],l[0]>-1&&l[0]<1&&l[1]>-1&&l[1]<1&&l[2]>-1&&l[2]<1}rayPlanetIntersection(t,l){const f=A.b5(t,l),g=A.bA(),B=A.bA();A.a$(B,l,f),A.b2(g,t,B);const E=1-A.b5(g,g);if(E<0)return null;const L=A.b5(t,t)-1,N=-f+(f<0?1:-1)*Math.sqrt(E),H=L/N,G=N;return{tMin:Math.min(H,G),tMax:Math.max(H,G)}}unprojectScreenPoint(t){const l=this._cameraPosition,f=this.getRayDirectionFromPixel(t),g=this.rayPlanetIntersection(l,f);if(g){const G=A.bA();A.b0(G,l,[f[0]*g.tMin,f[1]*g.tMin,f[2]*g.tMin]);const $=A.bA();return A.b3($,G),Tn($)}const B=this._cachedClippingPlane,E=B[0]*f[0]+B[1]*f[1]+B[2]*f[2],L=-A.bb(B,l)/E,N=A.bA();if(L>0)A.b0(N,l,[f[0]*L,f[1]*L,f[2]*L]);else{const G=A.bA();A.b0(G,l,[2*f[0],2*f[1],2*f[2]]);const $=A.bb(this._cachedClippingPlane,G);A.b2(N,G,[this._cachedClippingPlane[0]*$,this._cachedClippingPlane[1]*$,this._cachedClippingPlane[2]*$])}const H=(function(G){const $=A.bA();return $[0]=G[0]*-G[3],$[1]=G[1]*-G[3],$[2]=G[2]*-G[3],{center:$,radius:Math.sqrt(1-G[3]*G[3])}})(B);return Tn((function(G,$,Y){const se=A.bA();A.b2(se,Y,G);const de=A.bA();return A.by(de,G,se,$/A.b9(se)),de})(H.center,H.radius,N))}getMatrixForModel(t,l){const f=A.V.convert(t),g=1/A.bE,B=A.bj();return A.bJ(B,B,f.lng/180*Math.PI),A.bh(B,B,-f.lat/180*Math.PI),A.O(B,B,[0,0,1+l/A.bE]),A.bh(B,B,.5*Math.PI),A.Q(B,B,[g,g,g]),B}getProjectionDataForCustomLayer(t=!0){const l=this.getProjectionData({overscaledTileID:new A.a2(0,0,0,0,0),applyGlobeMatrix:t});return l.tileMercatorCoords=[0,0,1,1],l}getFastPathSimpleProjectionMatrix(t){}}class fa{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(t){this._helper.setMinZoom(t)}setMaxZoom(t){this._helper.setMaxZoom(t)}setMinPitch(t){this._helper.setMinPitch(t)}setMaxPitch(t){this._helper.setMaxPitch(t)}setRenderWorldCopies(t){this._helper.setRenderWorldCopies(t)}setBearing(t){this._helper.setBearing(t)}setPitch(t){this._helper.setPitch(t)}setRoll(t){this._helper.setRoll(t)}setFov(t){this._helper.setFov(t)}setZoom(t){this._helper.setZoom(t)}setCenter(t){this._helper.setCenter(t)}setElevation(t){this._helper.setElevation(t)}setMinElevationForCurrentTile(t){this._helper.setMinElevationForCurrentTile(t)}setPadding(t){this._helper.setPadding(t)}interpolatePadding(t,l,f){return this._helper.interpolatePadding(t,l,f)}isPaddingEqual(t){return this._helper.isPaddingEqual(t)}resize(t,l,f=!0){this._helper.resize(t,l,f)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(t){this._helper.setMaxBounds(t)}setConstrainOverride(t){this._helper.setConstrainOverride(t)}overrideNearFarZ(t,l){this._helper.overrideNearFarZ(t,l)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(t){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),t)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(t,l){this._globeness=t,this._globeLatitudeErrorCorrectionRadians=l,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(t){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(l,f)=>this.currentTransform.defaultConstrain(l,f),this.applyConstrain=(l,f)=>this._helper.applyConstrain(l,f),this._helper=new Ua({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(l,f)=>this.defaultConstrain(l,f)},t),this._globeness=1,this._mercatorTransform=new ca,this._verticalPerspectiveTransform=new bl}clone(){const t=new fa;return t._globeness=this._globeness,t._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,t.apply(this,!1),t}apply(t,l){this._helper.apply(t,l),this._mercatorTransform.apply(this,!1),this._verticalPerspectiveTransform.apply(this,!1,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(t){const l=this._mercatorTransform.getProjectionData(t),f=this._verticalPerspectiveTransform.getProjectionData(t);return{mainMatrix:this.isGlobeRendering?f.mainMatrix:l.mainMatrix,clippingPlane:f.clippingPlane,tileMercatorCoords:f.tileMercatorCoords,projectionTransition:t.applyGlobeMatrix?this._globeness:0,fallbackMatrix:l.fallbackMatrix}}isLocationOccluded(t){return this.currentTransform.isLocationOccluded(t)}transformLightDirection(t){return this.currentTransform.transformLightDirection(t)}getPixelScale(){return A.bu(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return A.bu(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(t,l,f){const g=this._mercatorTransform.getPitchedTextCorrection(t,l,f),B=this._verticalPerspectiveTransform.getPitchedTextCorrection(t,l,f);return A.bu(g,B,this._globeness)}projectTileCoordinates(t,l,f,g){return this.currentTransform.projectTileCoordinates(t,l,f,g)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,!1,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(t){return this.currentTransform.calculateFogMatrix(t)}getVisibleUnwrappedCoordinates(t){return this.currentTransform.getVisibleUnwrappedCoordinates(t)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(t){this._mercatorTransform.recalculateZoomAndCenter(t),this._verticalPerspectiveTransform.recalculateZoomAndCenter(t)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(t,l){return this.currentTransform.lngLatToCameraDepth(t,l)}populateCache(t){this._mercatorTransform.populateCache(t),this._verticalPerspectiveTransform.populateCache(t)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(t,l,f,g){return this._helper.calculateCenterFromCameraLngLatAlt(t,l,f,g)}setLocationAtPoint(t,l){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(t,l),void this.apply(this._mercatorTransform,!1);this._verticalPerspectiveTransform.setLocationAtPoint(t,l),this.apply(this._verticalPerspectiveTransform,!1)}locationToScreenPoint(t,l){return this.currentTransform.locationToScreenPoint(t,l)}screenPointToMercatorCoordinate(t,l){return this.currentTransform.screenPointToMercatorCoordinate(t,l)}screenPointToLocation(t,l){return this.currentTransform.screenPointToLocation(t,l)}isPointOnMapSurface(t,l){return this.currentTransform.isPointOnMapSurface(t,l)}getRayDirectionFromPixel(t){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(t)}getMatrixForModel(t,l){return this.currentTransform.getMatrixForModel(t,l)}getProjectionDataForCustomLayer(t=!0){const l=this._mercatorTransform.getProjectionDataForCustomLayer(t);if(!this.isGlobeRendering)return l;const f=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(t);return f.fallbackMatrix=l.mainMatrix,f}getFastPathSimpleProjectionMatrix(t){return this.currentTransform.getFastPathSimpleProjectionMatrix(t)}}class ba{get useGlobeControls(){return!0}handlePanInertia(t,l){const f=ua(t,l);return Math.abs(f.lng-l.center.lng)>180&&(f.lng=l.center.lng+179.5*Math.sign(f.lng-l.center.lng)),{easingCenter:f,easingOffset:new A.P(0,0)}}handleMapControlsRollPitchBearingZoom(t,l){const f=t.around,g=l.screenPointToLocation(f);t.bearingDelta&&l.setBearing(l.bearing+t.bearingDelta),t.pitchDelta&&l.setPitch(l.pitch+t.pitchDelta),t.rollDelta&&l.setRoll(l.roll+t.rollDelta);const B=l.zoom;t.zoomDelta&&l.setZoom(l.zoom+t.zoomDelta);const E=l.zoom-B;if(E===0)return;const L=A.bK(l.center.lng,g.lng),N=L/(Math.abs(L/180)+1),H=A.bK(l.center.lat,g.lat),G=l.getRayDirectionFromPixel(f),$=l.cameraPosition,Y=-1*A.b5($,G),se=A.bA();A.b0(se,$,[G[0]*Y,G[1]*Y,G[2]*Y]);const de=A.b7(se)-1,Se=Math.exp(.5*-Math.max(de-.3,0)),Me=un(l.worldSize,l.center.lat)/Math.min(l.width,l.height),Ee=A.bx(Me,.9,.5,1,.25),je=(1-A.aq(-E))*Math.min(Se,Ee),et=l.center.lat,ze=l.zoom,nt=new A.V(l.center.lng+N*je,A.an(l.center.lat+H*je,-A.ao,A.ao));l.setLocationAtPoint(g,f);const at=l.center,$e=A.bx(Math.abs(L),45,85,0,1),gt=A.bx(Me,.75,.35,0,1),Nt=Math.pow(Math.max($e,gt),.25),Dt=A.bK(at.lng,nt.lng),It=A.bK(at.lat,nt.lat);l.setCenter(new A.V(at.lng+Dt*Nt,at.lat+It*Nt).wrap()),l.setZoom(ze+Nn(et,l.center.lat))}handleMapControlsPan(t,l,f){if(!t.panDelta)return;const g=l.center.lat,B=l.zoom;l.setCenter(ua(t.panDelta,l).wrap()),l.setZoom(B+Nn(g,l.center.lat))}cameraForBoxAndBearing(t,l,f,g,B){const E=Gl(t,l,f,g,B),L=l.left/B.width*2-1,N=(B.width-l.right)/B.width*2-1,H=l.top/B.height*-2+1,G=(B.height-l.bottom)/B.height*-2+1,$=A.bK(f.getWest(),f.getEast())<0,Y=$?f.getEast():f.getWest(),se=$?f.getWest():f.getEast(),de=Math.max(f.getNorth(),f.getSouth()),Se=Math.min(f.getNorth(),f.getSouth()),Me=Y+.5*A.bK(Y,se),Ee=de+.5*A.bK(de,Se),je=B.clone();je.setCenter(E.center),je.setBearing(E.bearing),je.setPitch(0),je.setRoll(0),je.setZoom(E.zoom);const et=je.modelViewProjectionMatrix,ze=[Br(f.getNorthWest()),Br(f.getNorthEast()),Br(f.getSouthWest()),Br(f.getSouthEast()),Br(new A.V(se,Ee)),Br(new A.V(Y,Ee)),Br(new A.V(Me,de)),Br(new A.V(Me,Se))],nt=Br(E.center);let at=Number.POSITIVE_INFINITY;for(const $e of ze)L<0&&(at=ba.getLesserNonNegativeNonNull(at,ba.solveVectorScale($e,nt,et,"x",L))),N>0&&(at=ba.getLesserNonNegativeNonNull(at,ba.solveVectorScale($e,nt,et,"x",N))),H>0&&(at=ba.getLesserNonNegativeNonNull(at,ba.solveVectorScale($e,nt,et,"y",H))),G<0&&(at=ba.getLesserNonNegativeNonNull(at,ba.solveVectorScale($e,nt,et,"y",G)));if(Number.isFinite(at)&&at!==0)return E.zoom=je.zoom+A.at(at),E;Io()}handleJumpToCenterZoom(t,l){const f=t.center.lat,g=t.applyConstrain(l.center?A.V.convert(l.center):t.center,t.zoom).center;t.setCenter(g.wrap());const B=l.zoom!==void 0?+l.zoom:t.zoom+Nn(f,g.lat);t.zoom!==B&&t.setZoom(B)}handleEaseTo(t,l){const f=t.zoom,g=t.center,B=t.padding,E={roll:t.roll,pitch:t.pitch,bearing:t.bearing},L={roll:l.roll===void 0?t.roll:l.roll,pitch:l.pitch===void 0?t.pitch:l.pitch,bearing:l.bearing===void 0?t.bearing:l.bearing},N=l.zoom!==void 0,H=!t.isPaddingEqual(l.padding);let G=!1;const $=l.center?A.V.convert(l.center):g,Y=t.applyConstrain($,f).center;ri(t,Y);const se=t.clone();se.setCenter(Y),se.setZoom(N?+l.zoom:f+Nn(g.lat,$.lat)),se.setBearing(l.bearing);const de=new A.P(A.an(t.centerPoint.x+l.offsetAsPoint.x,0,t.width),A.an(t.centerPoint.y+l.offsetAsPoint.y,0,t.height));se.setLocationAtPoint(Y,de);const Se=(l.offset&&l.offsetAsPoint.mag())>0?se.center:Y,Me=N?+l.zoom:f+Nn(g.lat,Se.lat),Ee=f+Nn(g.lat,0),je=Me+Nn(Se.lat,0),et=A.bK(g.lng,Se.lng),ze=A.bK(g.lat,Se.lat),nt=A.aq(je-Ee);return G=Me!==f,{easeFunc:at=>{if(A.bo(E,L)||xl({startEulerAngles:E,endEulerAngles:L,tr:t,k:at,useSlerp:E.roll!=L.roll}),H&&t.interpolatePadding(B,l.padding,at),l.around)A.w("Easing around a point is not supported under globe projection."),t.setLocationAtPoint(l.around,l.aroundPoint);else{const $e=je>Ee?Math.min(2,nt):Math.max(.5,nt),gt=Math.pow($e,1-at),Nt=Pa(g,et,ze,at*gt);t.setCenter(Nt.wrap())}if(G){const $e=A.G.number(Ee,je,at)+Nn(0,t.center.lat);t.setZoom($e)}},isZooming:G,elevationCenter:Se}}handleFlyTo(t,l){const f=l.zoom!==void 0,g=t.center,B=t.zoom,E=t.padding,L=!t.isPaddingEqual(l.padding),N=t.applyConstrain(A.V.convert(l.center||l.locationAtOffset),B).center,H=f?+l.zoom:t.zoom+Nn(t.center.lat,N.lat),G=t.clone();G.setCenter(N),G.setZoom(H),G.setBearing(l.bearing);const $=new A.P(A.an(t.centerPoint.x+l.offsetAsPoint.x,0,t.width),A.an(t.centerPoint.y+l.offsetAsPoint.y,0,t.height));G.setLocationAtPoint(N,$);const Y=G.center;ri(t,Y);const se=(function(ze,nt,at){const $e=Br(nt),gt=Br(at),Nt=A.b5($e,gt),Dt=Math.acos(Nt),It=or(ze);return Dt/(2*Math.PI)*It})(t,g,Y),de=B+Nn(g.lat,0),Se=H+Nn(Y.lat,0),Me=A.aq(Se-de);let Ee;if(typeof l.minZoom=="number"){const ze=+l.minZoom+Nn(Y.lat,0),nt=Math.min(ze,de,Se)+Nn(0,Y.lat),at=t.applyConstrain(Y,nt).zoom+Nn(Y.lat,0);Ee=A.aq(at-de)}const je=A.bK(g.lng,Y.lng),et=A.bK(g.lat,Y.lat);return{easeFunc:(ze,nt,at,$e)=>{const gt=Pa(g,je,et,at);L&&t.interpolatePadding(E,l.padding,ze);const Nt=ze===1?Y:gt;t.setCenter(Nt.wrap());const Dt=de+A.at(nt);t.setZoom(ze===1?H:Dt+Nn(0,Nt.lat))},scaleOfZoom:Me,targetCenter:Y,scaleOfMinZoom:Ee,pixelPathLength:se}}static solveVectorScale(t,l,f,g,B){const E=g==="x"?[f[0],f[4],f[8],f[12]]:[f[1],f[5],f[9],f[13]],L=[f[3],f[7],f[11],f[15]],N=t[0]*E[0]+t[1]*E[1]+t[2]*E[2],H=t[0]*L[0]+t[1]*L[1]+t[2]*L[2],G=l[0]*E[0]+l[1]*E[1]+l[2]*E[2],$=l[0]*L[0]+l[1]*L[1]+l[2]*L[2];return G+B*H===N+B*$||L[3]*(N-G)+E[3]*($-H)+N*$==G*H?null:(G+E[3]-B*$-B*L[3])/(G-N-B*$+B*H)}static getLesserNonNegativeNonNull(t,l){return l!==null&&l>=0&&l<t?l:t}}class Kl{constructor(t){this._globe=t,this._mercatorCameraHelper=new Lo,this._verticalPerspectiveCameraHelper=new ba}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(t,l){return this.currentHelper.handlePanInertia(t,l)}handleMapControlsRollPitchBearingZoom(t,l){return this.currentHelper.handleMapControlsRollPitchBearingZoom(t,l)}handleMapControlsPan(t,l,f){this.currentHelper.handleMapControlsPan(t,l,f)}cameraForBoxAndBearing(t,l,f,g,B){return this.currentHelper.cameraForBoxAndBearing(t,l,f,g,B)}handleJumpToCenterZoom(t,l){this.currentHelper.handleJumpToCenterZoom(t,l)}handleEaseTo(t,l){return this.currentHelper.handleEaseTo(t,l)}handleFlyTo(t,l){return this.currentHelper.handleFlyTo(t,l)}}const bs=(b,t)=>A.B(b,t&&t.filter((l=>l.identifier!=="source.canvas"))),da=A.bO();class Zl extends A.E{constructor(t,l={}){var f,g;super(),this._rtlPluginLoaded=()=>{for(const E in this.tileManagers){const L=this.tileManagers[E].getSource().type;L!=="vector"&&L!=="geojson"||this.tileManagers[E].reload()}},this.map=t,this.dispatcher=new $t(Et(),t._getMapId()),this.dispatcher.registerMessageHandler("GG",((E,L)=>this.getGlyphs(E,L))),this.dispatcher.registerMessageHandler("GI",((E,L)=>this.getImages(E,L))),this.dispatcher.registerMessageHandler("GDA",((E,L)=>this.getDashes(E,L))),this.imageManager=new Te,this.imageManager.setEventedParent(this);const B=((f=t._container)===null||f===void 0?void 0:f.lang)||typeof document<"u"&&((g=document.documentElement)===null||g===void 0?void 0:g.lang)||void 0;this.glyphManager=new ot(t._requestManager,l.localIdeographFontFamily,B),this.lineAtlas=new xe(256,512),this.crossTileSymbolIndex=new Rr,this._setInitialValues(),this._resetUpdates(),this.dispatcher.broadcast("SR",A.bP()),Ae().on(Je,this._rtlPluginLoaded),this.on("data",(E=>{if(E.dataType!=="source"||E.sourceDataType!=="metadata")return;const L=this.tileManagers[E.sourceId];if(!L)return;const N=L.getSource();if(N&&N.vectorLayerIds)for(const H in this._layers){const G=this._layers[H];G.source===N.id&&this._validateLayer(G)}}))}_setInitialValues(){var t;this._spritesImagesIds={},this._layers={},this._order=[],this.tileManagers={},this.zoomHistory=new A.bQ,this._availableImages=[],this._globalState={},this._serializedLayers={},this.stylesheet=null,this.light=null,this.sky=null,this.projection&&(this.projection.destroy(),delete this.projection),this._loaded=!1,this._changed=!1,this._updatedLayers={},this._updatedSources={},this._changedImages={},this._glyphsDidChange=!1,this._updatedPaintProps={},this._layerOrderChanged=!1,this.crossTileSymbolIndex=new(((t=this.crossTileSymbolIndex)===null||t===void 0?void 0:t.constructor)||Object),this.pauseablePlacement=void 0,this.placement=void 0,this.z=0}setGlobalStateProperty(t,l){var f,g,B;this._checkLoaded();const E=l===null?(B=(g=(f=this.stylesheet.state)===null||f===void 0?void 0:f[t])===null||g===void 0?void 0:g.default)!==null&&B!==void 0?B:null:l;if(A.bR(E,this._globalState[t]))return this;this._globalState[t]=E,this._applyGlobalStateChanges([t])}getGlobalState(){return this._globalState}setGlobalState(t){this._checkLoaded();const l=[];for(const f in t)!A.bR(this._globalState[f],t[f].default)&&(l.push(f),this._globalState[f]=t[f].default);this._applyGlobalStateChanges(l)}_applyGlobalStateChanges(t){if(t.length===0)return;const l=new Set,f={};for(const g of t){f[g]=this._globalState[g];for(const B in this._layers){const E=this._layers[B],L=E.getLayoutAffectingGlobalStateRefs(),N=E.getPaintAffectingGlobalStateRefs(),H=E.getVisibilityAffectingGlobalStateRefs();if(L.has(g)&&l.add(E.source),N.has(g))for(const{name:G,value:$}of N.get(g))this._updatePaintProperty(E,G,$);H?.has(g)&&(E.recalculateVisibility(),this._updateLayer(E))}}this.dispatcher.broadcast("UGS",f);for(const g in this.tileManagers)l.has(g)&&(this._reloadSource(g),this._changed=!0)}loadURL(t,l={},f){this.fire(new A.l("dataloading",{dataType:"style"})),l.validate=typeof l.validate!="boolean"||l.validate;const g=this.map._requestManager.transformRequest(t,"Style");this._loadStyleRequest=new AbortController;const B=this._loadStyleRequest;A.j(g,this._loadStyleRequest).then((E=>{this._loadStyleRequest=null,this._load(E.data,l,f)})).catch((E=>{this._loadStyleRequest=null,E&&!B.signal.aborted&&this.fire(new A.k(E))}))}loadJSON(t,l={},f){this.fire(new A.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,O.frameAsync(this._frameRequest,this.map._ownerWindow).then((()=>{this._frameRequest=null,l.validate=l.validate!==!1,this._load(t,l,f)})).catch((()=>{}))}loadEmpty(){this.fire(new A.l("dataloading",{dataType:"style"})),this._load(da,{validate:!1})}_load(t,l,f){var g,B;let E=l.transformStyle?l.transformStyle(f,t):t;if(!l.validate||!bs(this,A.C(E))){E=Object.assign({},E),this._loaded=!0,this.stylesheet=E;for(const L in E.sources)this.addSource(L,E.sources[L],{validate:!1});E.sprite?this._loadSprite(E.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(E.glyphs),this._createLayers(),this.light=new Ct(this.stylesheet.light),this._setProjectionInternal(((g=this.stylesheet.projection)===null||g===void 0?void 0:g.type)||"mercator"),this.sky=new oe(this.stylesheet.sky),this.map.setTerrain((B=this.stylesheet.terrain)!==null&&B!==void 0?B:null),this.fire(new A.l("data",{dataType:"style"})),this.fire(new A.l("style.load"))}}_createLayers(){var t,l,f;const g=A.bS(this.stylesheet.layers);this.setGlobalState((t=this.stylesheet.state)!==null&&t!==void 0?t:null),this.dispatcher.broadcast("SL",g),this._order=g.map((B=>B.id)),this._layers={},this._serializedLayers=null;for(const B of g){const E=A.bT(B,this._globalState);if(E.setEventedParent(this,{layer:{id:B.id}}),this._layers[B.id]=E,A.bU(E)&&this.tileManagers[E.source]){const L=(f=(l=B.paint)===null||l===void 0?void 0:l["raster-fade-duration"])!==null&&f!==void 0?f:E.paint.get("raster-fade-duration");this.tileManagers[E.source].setRasterFadeDuration(L)}}}_loadSprite(t,l=!1,f=void 0){this.imageManager.setLoaded(!1);const g=new AbortController;let B;this._spriteRequest=g,(function(E,L,N,H){return A._(this,void 0,void 0,(function*(){const G=Ce(E),$=N>1?"@2x":"",Y={},se={};for(const{id:de,url:Se}of G){const Me=L.transformRequest(_t(Se,$,".json"),"SpriteJSON");Y[de]=A.j(Me,H);const Ee=L.transformRequest(_t(Se,$,".png"),"SpriteImage");se[de]=ut.getImage(Ee,H)}return yield Promise.all([...Object.values(Y),...Object.values(se)]),(function(de,Se){return A._(this,void 0,void 0,(function*(){const Me={};for(const Ee in de){Me[Ee]={};const je=O.getImageCanvasContext((yield Se[Ee]).data),et=(yield de[Ee]).data;for(const ze in et){const{width:nt,height:at,x:$e,y:gt,sdf:Nt,pixelRatio:Dt,stretchX:It,stretchY:Qt,content:cr,textFitWidth:fr,textFitHeight:Ht}=et[ze];Me[Ee][ze]={data:null,pixelRatio:Dt,sdf:Nt,stretchX:It,stretchY:Qt,content:cr,textFitWidth:fr,textFitHeight:Ht,spriteData:{width:nt,height:at,x:$e,y:gt,context:je}}}}return Me}))})(Y,se)}))})(t,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((E=>{if(this._spriteRequest=null,E)for(const L in E){this._spritesImagesIds[L]=[];const N=this._spritesImagesIds[L]?this._spritesImagesIds[L].filter((H=>!(H in E))):[];for(const H of N)this.imageManager.removeImage(H),this._changedImages[H]=!0;for(const H in E[L]){const G=L==="default"?H:`${L}:${H}`;this._spritesImagesIds[L].push(G),G in this.imageManager.images?this.imageManager.updateImage(G,E[L][H],!1):this.imageManager.addImage(G,E[L][H]),l&&(this._changedImages[G]=!0)}}})).catch((E=>{this._spriteRequest=null,B=E,g.signal.aborted||this.fire(new A.k(B))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),l&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new A.l("data",{dataType:"style"})),f&&f(B)}))}_unloadSprite(){for(const t of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(t),this._changedImages[t]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new A.l("data",{dataType:"style"}))}_validateLayer(t){const l=this.tileManagers[t.source];if(!l)return;const f=t.sourceLayer;if(!f)return;const g=l.getSource();(g.type==="geojson"||g.vectorLayerIds&&g.vectorLayerIds.indexOf(f)===-1)&&this.fire(new A.k(new Error(`Source layer "${f}" does not exist on source "${g.id}" as specified by style layer "${t.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const t in this.tileManagers)if(!this.tileManagers[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(t,l=!1){const f=this._serializedAllLayers();if(!t||t.length===0)return Object.values(l?A.bV(f):f);const g=[];for(const B of t)if(f[B]){const E=l?A.bV(f[B]):f[B];g.push(E)}return g}_serializedAllLayers(){let t=this._serializedLayers;if(t)return t;t=this._serializedLayers={};const l=Object.keys(this._layers);for(const f of l){const g=this._layers[f];g.type!=="custom"&&(t[f]=g.serialize())}return t}hasTransitions(){var t,l,f;if(!((t=this.light)===null||t===void 0)&&t.hasTransition()||!((l=this.sky)===null||l===void 0)&&l.hasTransition()||!((f=this.projection)===null||f===void 0)&&f.hasTransition())return!0;for(const g in this.tileManagers)if(this.tileManagers[g].hasTransition())return!0;for(const g in this._layers)if(this._layers[g].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(t){if(!this._loaded)return;const l=this._changed;if(l){const g=Object.keys(this._updatedLayers),B=Object.keys(this._removedLayers);(g.length||B.length)&&this._updateWorkerLayers(g,B);for(const E in this._updatedSources){const L=this._updatedSources[E];if(L==="reload")this._reloadSource(E);else{if(L!=="clear")throw new Error(`Invalid action ${L}`);this._clearSource(E)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const E in this._updatedPaintProps)this._layers[E].updateTransitions(t);this.light.updateTransitions(t),this.sky.updateTransitions(t),this._resetUpdates()}const f={};for(const g in this.tileManagers){const B=this.tileManagers[g];f[g]=B.used,B.used=!1}for(const g of this._order){const B=this._layers[g];B.recalculate(t,this._availableImages),!B.isHidden(t.zoom)&&B.source&&(this.tileManagers[B.source].used=!0)}for(const g in f){const B=this.tileManagers[g];!!f[g]!=!!B.used&&B.fire(new A.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:g}))}this.light.recalculate(t),this.sky.recalculate(t),this.projection.recalculate(t),this.z=t.zoom,l&&this.fire(new A.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const l in this.tileManagers)this.tileManagers[l].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const t in this.tileManagers)this.tileManagers[t].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(t,l){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(t,!1),removedIds:l})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(t,l={}){var f;this._checkLoaded();const g=this.serialize();if(t=l.transformStyle?l.transformStyle(g,t):t,((f=l.validate)===null||f===void 0||f)&&bs(this,A.C(t)))return!1;(t=A.bV(t)).layers=A.bS(t.layers);const B=A.bW(g,t),E=this._getOperationsToPerform(B);if(E.unimplemented.length>0)throw new Error(`Unimplemented: ${E.unimplemented.join(", ")}.`);if(E.operations.length===0)return!1;for(const L of E.operations)L();return this.stylesheet=t,this._serializedLayers=null,this.fire(new A.l("style.load",{style:this})),!0}_getOperationsToPerform(t){const l=[],f=[];for(const g of t)switch(g.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":l.push((()=>this.addLayer.apply(this,g.args)));break;case"removeLayer":l.push((()=>this.removeLayer.apply(this,g.args)));break;case"setPaintProperty":l.push((()=>this.setPaintProperty.apply(this,g.args)));break;case"setLayoutProperty":l.push((()=>this.setLayoutProperty.apply(this,g.args)));break;case"setFilter":l.push((()=>this.setFilter.apply(this,g.args)));break;case"addSource":l.push((()=>this.addSource.apply(this,g.args)));break;case"removeSource":l.push((()=>this.removeSource.apply(this,g.args)));break;case"setLayerZoomRange":l.push((()=>this.setLayerZoomRange.apply(this,g.args)));break;case"setLight":l.push((()=>this.setLight.apply(this,g.args)));break;case"setGeoJSONSourceData":l.push((()=>this.setGeoJSONSourceData.apply(this,g.args)));break;case"setGlyphs":l.push((()=>this.setGlyphs.apply(this,g.args)));break;case"setSprite":l.push((()=>this.setSprite.apply(this,g.args)));break;case"setTerrain":l.push((()=>this.map.setTerrain.apply(this,g.args)));break;case"setSky":l.push((()=>this.setSky.apply(this,g.args)));break;case"setProjection":this.setProjection.apply(this,g.args);break;case"setGlobalState":l.push((()=>this.setGlobalState.apply(this,g.args)));break;case"setTransition":l.push((()=>{}));break;default:f.push(g.command)}return{operations:l,unimplemented:f}}addImage(t,l){if(this.getImage(t))return this.fire(new A.k(new Error(`An image named "${t}" already exists.`)));this.imageManager.addImage(t,l),this._afterImageUpdated(t)}updateImage(t,l){this.imageManager.updateImage(t,l)}getImage(t){return this.imageManager.getImage(t)}removeImage(t){if(!this.getImage(t))return this.fire(new A.k(new Error(`An image named "${t}" does not exist.`)));this.imageManager.removeImage(t),this._afterImageUpdated(t)}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new A.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(t,l,f={}){if(this._checkLoaded(),this.tileManagers[t]!==void 0)throw new Error(`Source "${t}" already exists.`);if(!l.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(l).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(l.type)>=0&&this._validate(A.C.source,`sources.${t}`,l,null,f))return;this.map&&this.map._collectResourceTiming&&(l.collectResourceTiming=!0);const g=this.tileManagers[t]=new Jt(t,l,this.dispatcher);g.style=this,g.setEventedParent(this,(()=>({isSourceLoaded:g.loaded(),source:g.serialize(),sourceId:t}))),g.onAdd(this.map),this._changed=!0}removeSource(t){if(this._checkLoaded(),this.tileManagers[t]===void 0)throw new Error(`There is no source with this ID=${t}`);for(const f in this._layers)if(this._layers[f].source===t)return this.fire(new A.k(new Error(`Source "${t}" cannot be removed while layer "${f}" is using it.`)));const l=this.tileManagers[t];delete this.tileManagers[t],delete this._updatedSources[t],l.fire(new A.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),l.setEventedParent(null),l.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,l){if(this._checkLoaded(),this.tileManagers[t]===void 0)throw new Error(`There is no source with this ID=${t}`);const f=this.tileManagers[t].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(l),this._changed=!0}getSource(t){return this.tileManagers[t]&&this.tileManagers[t].getSource()}addLayer(t,l,f={}){this._checkLoaded();const g=t.id;if(this.getLayer(g))return void this.fire(new A.k(new Error(`Layer "${g}" already exists on this map.`)));let B;if(t.type==="custom"){if(bs(this,A.bX(t)))return;B=A.bT(t,this._globalState)}else{if("source"in t&&typeof t.source=="object"&&(this.addSource(g,t.source),t=A.bV(t),t=A.e(t,{source:g})),this._validate(A.C.layer,`layers.${g}`,t,{arrayIndex:-1},f))return;B=A.bT(t,this._globalState),this._validateLayer(B),B.setEventedParent(this,{layer:{id:g}})}const E=l?this._order.indexOf(l):this._order.length;if(l&&E===-1)this.fire(new A.k(new Error(`Cannot add layer "${g}" before non-existing layer "${l}".`)));else{if(this._order.splice(E,0,g),this._layerOrderChanged=!0,this._layers[g]=B,this._removedLayers[g]&&B.source&&B.type!=="custom"){const L=this._removedLayers[g];delete this._removedLayers[g],L.type!==B.type?this._updatedSources[B.source]="clear":(this._updatedSources[B.source]="reload",this.tileManagers[B.source].pause())}this._updateLayer(B),B.onAdd&&B.onAdd(this.map)}}moveLayer(t,l){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new A.k(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===l)return;const f=this._order.indexOf(t);this._order.splice(f,1);const g=l?this._order.indexOf(l):this._order.length;l&&g===-1?this.fire(new A.k(new Error(`Cannot move layer "${t}" before non-existing layer "${l}".`))):(this._order.splice(g,0,t),this._layerOrderChanged=!0)}removeLayer(t){this._checkLoaded();const l=this._layers[t];if(!l)return void this.fire(new A.k(new Error(`Cannot remove non-existing layer "${t}".`)));l.setEventedParent(null);const f=this._order.indexOf(t);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=l,delete this._layers[t],this._serializedLayers&&delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],l.onRemove&&l.onRemove(this.map)}getLayer(t){return this._layers[t]}getLayersOrder(){return[...this._order]}hasLayer(t){return t in this._layers}setLayerZoomRange(t,l,f){this._checkLoaded();const g=this.getLayer(t);g?g.minzoom===l&&g.maxzoom===f||(l!=null&&(g.minzoom=l),f!=null&&(g.maxzoom=f),this._updateLayer(g)):this.fire(new A.k(new Error(`Cannot set the zoom range of non-existing layer "${t}".`)))}setFilter(t,l,f={}){this._checkLoaded();const g=this.getLayer(t);if(g){if(!A.bR(g.filter,l))return l==null?(g.setFilter(void 0),void this._updateLayer(g)):void(this._validate(A.C.filter,`layers.${g.id}.filter`,l,null,f)||(g.setFilter(A.bV(l)),this._updateLayer(g)))}else this.fire(new A.k(new Error(`Cannot filter non-existing layer "${t}".`)))}getFilter(t){return A.bV(this.getLayer(t).filter)}setLayoutProperty(t,l,f,g={}){this._checkLoaded();const B=this.getLayer(t);B?A.bR(B.getLayoutProperty(l),f)||(B.setLayoutProperty(l,f,g),this._updateLayer(B)):this.fire(new A.k(new Error(`Cannot style non-existing layer "${t}".`)))}getLayoutProperty(t,l){const f=this.getLayer(t);if(f)return f.getLayoutProperty(l);this.fire(new A.k(new Error(`Cannot get style of non-existing layer "${t}".`)))}setPaintProperty(t,l,f,g={}){this._checkLoaded();const B=this.getLayer(t);B?A.bR(B.getPaintProperty(l),f)||this._updatePaintProperty(B,l,f,g):this.fire(new A.k(new Error(`Cannot style non-existing layer "${t}".`)))}_updatePaintProperty(t,l,f,g={}){t.setPaintProperty(l,f,g)&&this._updateLayer(t),A.bU(t)&&l==="raster-fade-duration"&&this.tileManagers[t.source].setRasterFadeDuration(f),this._changed=!0,this._updatedPaintProps[t.id]=!0,this._serializedLayers=null}getPaintProperty(t,l){return this.getLayer(t).getPaintProperty(l)}setFeatureState(t,l){this._checkLoaded();const f=t.source,g=t.sourceLayer,B=this.tileManagers[f];if(B===void 0)return void this.fire(new A.k(new Error(`The source '${f}' does not exist in the map's style.`)));const E=B.getSource().type;E==="geojson"&&g?this.fire(new A.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):E!=="vector"||g?(t.id===void 0&&this.fire(new A.k(new Error("The feature id parameter must be provided."))),B.setFeatureState(g,t.id,l)):this.fire(new A.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(t,l){this._checkLoaded();const f=t.source,g=this.tileManagers[f];if(g===void 0)return void this.fire(new A.k(new Error(`The source '${f}' does not exist in the map's style.`)));const B=g.getSource().type,E=B==="vector"?t.sourceLayer:void 0;B!=="vector"||E?l&&typeof t.id!="string"&&typeof t.id!="number"?this.fire(new A.k(new Error("A feature id is required to remove its specific state property."))):g.removeFeatureState(E,t.id,l):this.fire(new A.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(t){this._checkLoaded();const l=t.source,f=t.sourceLayer,g=this.tileManagers[l];if(g!==void 0)return g.getSource().type!=="vector"||f?(t.id===void 0&&this.fire(new A.k(new Error("The feature id parameter must be provided."))),g.getFeatureState(f,t.id)):void this.fire(new A.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new A.k(new Error(`The source '${l}' does not exist in the map's style.`)))}getTransition(){return A.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const t=A.bY(this.tileManagers,(B=>B.serialize())),l=this._serializeByIds(this._order,!0),f=this.map.getTerrain()||void 0,g=this.stylesheet;return A.bZ({version:g.version,name:g.name,metadata:g.metadata,light:g.light,sky:g.sky,center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,sprite:g.sprite,glyphs:g.glyphs,transition:g.transition,projection:g.projection,sources:t,layers:l,terrain:f},(B=>B!==void 0))}_updateLayer(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&this.tileManagers[t.source].getSource().type!=="raster"&&(this._updatedSources[t.source]="reload",this.tileManagers[t.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(t){const l=E=>this._layers[E].type==="fill-extrusion",f={},g=[];for(let E=this._order.length-1;E>=0;E--){const L=this._order[E];if(l(L)){f[L]=E;for(const N of t){const H=N[L];if(H)for(const G of H)g.push(G)}}}g.sort(((E,L)=>L.intersectionZ-E.intersectionZ));const B=[];for(let E=this._order.length-1;E>=0;E--){const L=this._order[E];if(l(L))for(let N=g.length-1;N>=0;N--){const H=g[N].feature;if(f[H.layer.id]<E)break;B.push(H),g.pop()}else for(const N of t){const H=N[L];if(H)for(const G of H)B.push(G.feature)}}return B}queryRenderedFeatures(t,l,f){l&&l.filter&&this._validate(A.C.filter,"queryRenderedFeatures.filter",l.filter,null,l);const g={};if(l&&l.layers){if(!(Array.isArray(l.layers)||l.layers instanceof Set))return this.fire(new A.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const H of l.layers){const G=this._layers[H];if(!G)return this.fire(new A.k(new Error(`The layer '${H}' does not exist in the map's style and cannot be queried for features.`))),[];g[G.source]=!0}}const B=[];l.availableImages=this._availableImages;const E=this._serializedAllLayers(),L=l.layers instanceof Set?l.layers:Array.isArray(l.layers)?new Set(l.layers):null,N=Object.assign(Object.assign({},l),{layers:L,globalState:this._globalState});for(const H in this.tileManagers)l.layers&&!g[H]||B.push(br(this.tileManagers[H],this._layers,E,t,N,f,this.map.terrain?(G,$,Y)=>this.map.terrain.getElevation(G,$,Y):void 0));return this.placement&&B.push((function(H,G,$,Y,se,de,Se){const Me={},Ee=de.queryRenderedSymbols(Y),je=[];for(const et of Object.keys(Ee).map(Number))je.push(Se[et]);je.sort(xr);for(const et of je){const ze=et.featureIndex.lookupSymbolFeatures(Ee[et.bucketInstanceId],G,et.bucketIndex,et.sourceLayerIndex,{filterSpec:se.filter,globalState:se.globalState},se.layers,se.availableImages,H);for(const nt in ze){const at=Me[nt]=Me[nt]||[],$e=ze[nt];$e.sort(((gt,Nt)=>{const Dt=et.featureSortOrder;if(Dt){const It=Dt.indexOf(gt.featureIndex);return Dt.indexOf(Nt.featureIndex)-It}return Nt.featureIndex-gt.featureIndex}));for(const gt of $e)at.push(gt)}}return(function(et,ze,nt){for(const at in et)for(const $e of et[at])Re($e,nt[ze[at].source]);return et})(Me,H,$)})(this._layers,E,this.tileManagers,t,N,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(B)}querySourceFeatures(t,l){l?.filter&&this._validate(A.C.filter,"querySourceFeatures.filter",l.filter,null,l);const f=this.tileManagers[t];return f?(function(g,B){const E=g.getRenderableIds().map((H=>g.getTileByID(H))),L=[],N={};for(let H=0;H<E.length;H++){const G=E[H],$=G.tileID.canonical.key;N[$]||(N[$]=!0,G.querySourceFeatures(L,B))}return L})(f,l?Object.assign(Object.assign({},l),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(t,l={}){this._checkLoaded();const f=this.light.getLight();let g=!1;for(const E in t)if(!A.bR(t[E],f[E])){g=!0;break}if(!g)return;const B={now:ie(),transition:A.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,l),this.light.updateTransitions(B)}getProjection(){var t;return(t=this.stylesheet)===null||t===void 0?void 0:t.projection}setProjection(t){if(this._checkLoaded(),this.stylesheet.projection=t,this.projection){if(this.projection.name===t.type)return;this.projection.destroy(),delete this.projection}this._setProjectionInternal(t.type)}getSky(){var t;return(t=this.stylesheet)===null||t===void 0?void 0:t.sky}setSky(t,l={}){this._checkLoaded();const f=this.getSky();let g=!1;if(!t&&!f)return;if(t&&!f)g=!0;else if(!t&&f)g=!0;else for(const E in t)if(!A.bR(t[E],f[E])){g=!0;break}if(!g)return;const B={now:ie(),transition:A.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=t,this.sky.setSky(t,l),this.sky.updateTransitions(B)}_setProjectionInternal(t){const l=(function(f,g){const B={constrainOverride:g};if(Array.isArray(f)){const E=new Kt({type:f});return{projection:E,transform:new fa(B),cameraHelper:new Kl(E)}}switch(f){case"mercator":return{projection:new vs,transform:new ca(B),cameraHelper:new Lo};case"globe":{const E=new Kt({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:E,transform:new fa(B),cameraHelper:new Kl(E)}}case"vertical-perspective":return{projection:new pt,transform:new bl(B),cameraHelper:new ba};default:return A.w(`Unknown projection name: ${f}. Falling back to mercator projection.`),{projection:new vs,transform:new ca(B),cameraHelper:new Lo}}})(t,this.map.transformConstrain);this.projection=l.projection,this.map.migrateProjection(l.transform,l.cameraHelper);for(const f in this.tileManagers)this.tileManagers[f].reload()}_validate(t,l,f,g,B={}){return(!B||B.validate!==!1)&&bs(this,t.call(A.C,A.e({key:l,style:this.serialize(),value:f,styleSpec:A.u},g)))}_remove(t=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Ae().off(Je,this._rtlPluginLoaded);for(const l in this._layers)this._layers[l].setEventedParent(null);for(const l in this.tileManagers){const f=this.tileManagers[l];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),t&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(t)}_clearSource(t){this.tileManagers[t].clearTiles()}_reloadSource(t){this.tileManagers[t].resume(),this.tileManagers[t].reload()}_updateSources(t){for(const l in this.tileManagers)this.tileManagers[l].update(t,this.map.terrain)}_generateCollisionBoxes(){for(const t in this.tileManagers)this._reloadSource(t)}_updatePlacement(t,l,f,g,B=!1){let E=!1,L=!1;const N={};for(const H of this._order){const G=this._layers[H];if(G.type!=="symbol")continue;if(!N[G.source]){const Y=this.tileManagers[G.source];N[G.source]=Y.getRenderableIds(!0).map((se=>Y.getTileByID(se))).sort(((se,de)=>de.tileID.overscaledZ-se.tileID.overscaledZ||(se.tileID.isLessThan(de.tileID)?-1:1)))}const $=this.crossTileSymbolIndex.addLayer(G,N[G.source],t.center.lng);E=E||$}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((B=B||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(ie(),t.zoom))&&(this.pauseablePlacement=new cn(t,this.map.terrain,this._order,B,l,f,g,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,N),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(ie()),L=!0),E&&this.pauseablePlacement.placement.setStale()),L||E)for(const H of this._order){const G=this._layers[H];G.type==="symbol"&&this.placement.updateLayerOpacities(G,N[G.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(ie())}_releaseSymbolFadeTiles(){for(const t in this.tileManagers)this.tileManagers[t].releaseSymbolFadeTiles()}getImages(t,l){return A._(this,void 0,void 0,(function*(){const f=yield this.imageManager.getImages(l.icons);this._updateTilesForChangedImages();const g=this.tileManagers[l.source];return g&&g.setDependencies(l.tileID.key,l.type,l.icons),f}))}getGlyphs(t,l){return A._(this,void 0,void 0,(function*(){const f=yield this.glyphManager.getGlyphs(l.stacks),g=this.tileManagers[l.source];return g&&g.setDependencies(l.tileID.key,l.type,[""]),f}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(t,l={}){this._checkLoaded(),t&&this._validate(A.C.glyphs,"glyphs",t,null,l)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=t,this.glyphManager.entries={},this.glyphManager.setURL(t))}getDashes(t,l){return A._(this,void 0,void 0,(function*(){const f={};for(const[g,B]of Object.entries(l.dashes))f[g]=this.lineAtlas.getDash(B.dasharray,B.round);return f}))}addSprite(t,l,f={},g){this._checkLoaded();const B=[{id:t,url:l}],E=[...Ce(this.stylesheet.sprite),...B];this._validate(A.C.sprite,"sprite",E,null,f)||(this.stylesheet.sprite=E,this._loadSprite(B,!0,g))}removeSprite(t){this._checkLoaded();const l=Ce(this.stylesheet.sprite);if(l.find((f=>f.id===t))){if(this._spritesImagesIds[t])for(const f of this._spritesImagesIds[t])this.imageManager.removeImage(f),this._changedImages[f]=!0;l.splice(l.findIndex((f=>f.id===t)),1),this.stylesheet.sprite=l.length>0?l:void 0,delete this._spritesImagesIds[t],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new A.l("data",{dataType:"style"}))}else this.fire(new A.k(new Error(`Sprite "${t}" doesn't exists on this map.`)))}getSprite(){return Ce(this.stylesheet.sprite)}setSprite(t,l={},f){this._checkLoaded(),t&&this._validate(A.C.sprite,"sprite",t,null,l)||(this.stylesheet.sprite=t,t?this._loadSprite(t,!0,f):(this._unloadSprite(),f&&f(null)))}destroy(){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null);for(const t in this.tileManagers){const l=this.tileManagers[t];l.setEventedParent(null),l.onRemove(this.map)}this.tileManagers={},this.imageManager&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this._availableImages=[],this._spritesImagesIds={}),this.glyphManager&&this.glyphManager.destroy();for(const t in this._layers){const l=this._layers[t];l.setEventedParent(null),l.onRemove&&l.onRemove(this.map)}this._setInitialValues(),this.setEventedParent(null),this.dispatcher.unregisterMessageHandler("GG"),this.dispatcher.unregisterMessageHandler("GI"),this.dispatcher.unregisterMessageHandler("GDA"),this.dispatcher.remove(!0),this._listeners={},this._oneTimeListeners={}}}var wl=A.aU([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Qc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,l,f,g,B,E,L,N,H){this.context=t;let G=this.boundPaintVertexBuffers.length!==g.length;for(let $=0;!G&&$<g.length;$++)this.boundPaintVertexBuffers[$]!==g[$]&&(G=!0);!this.vao||this.boundProgram!==l||this.boundLayoutVertexBuffer!==f||G||this.boundIndexBuffer!==B||this.boundVertexOffset!==E||this.boundDynamicVertexBuffer!==L||this.boundDynamicVertexBuffer2!==N||this.boundDynamicVertexBuffer3!==H?this.freshBind(l,f,g,B,E,L,N,H):(t.bindVertexArray.set(this.vao),L&&L.bind(),B&&B.dynamicDraw&&B.bind(),N&&N.bind(),H&&H.bind())}freshBind(t,l,f,g,B,E,L,N){const H=t.numAttributes,G=this.context,$=G.gl;this.vao&&this.destroy(),this.vao=G.createVertexArray(),G.bindVertexArray.set(this.vao),this.boundProgram=t,this.boundLayoutVertexBuffer=l,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=g,this.boundVertexOffset=B,this.boundDynamicVertexBuffer=E,this.boundDynamicVertexBuffer2=L,this.boundDynamicVertexBuffer3=N,l.enableAttributes($,t);for(const Y of f)Y.enableAttributes($,t);E&&E.enableAttributes($,t),L&&L.enableAttributes($,t),N&&N.enableAttributes($,t),l.bind(),l.setVertexAttribPointers($,t,B);for(const Y of f)Y.bind(),Y.setVertexAttribPointers($,t,B);E&&(E.bind(),E.setVertexAttribPointers($,t,B)),g&&g.bind(),L&&(L.bind(),L.setVertexAttribPointers($,t,B)),N&&(N.bind(),N.setVertexAttribPointers($,t,B)),G.currentNumAttributes=H}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Hs=(b,t,l,f,g)=>({u_texture:0,u_ele_delta:b,u_fog_matrix:t,u_fog_color:l?l.properties.get("fog-color"):A.bp.white,u_fog_ground_blend:l?l.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:g?0:l?l.calculateFogBlendOpacity(f):0,u_horizon_color:l?l.properties.get("horizon-color"):A.bp.white,u_horizon_fog_blend:l?l.properties.get("horizon-fog-blend"):1,u_is_globe_mode:g?1:0}),Vs={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Do(b){const t=[];for(let l=0;l<b.length;l++){if(b[l]===null)continue;const f=b[l].split(" ");t.push(f.pop())}return t}class kc{constructor(t,l,f,g,B,E,L,N,H=[]){const G=t.gl;this.program=G.createProgram();const $=Do(l.staticAttributes),Y=f?f.getBinderAttributes():[],se=$.concat(Y),de=gi.prelude.staticUniforms?Do(gi.prelude.staticUniforms):[],Se=L.staticUniforms?Do(L.staticUniforms):[],Me=l.staticUniforms?Do(l.staticUniforms):[],Ee=f?f.getBinderUniforms():[],je=de.concat(Se).concat(Me).concat(Ee),et=[];for(const Dt of je)et.indexOf(Dt)<0&&et.push(Dt);const ze=f?f.defines():[];Da(G)&&ze.unshift("#version 300 es"),B&&ze.push("#define OVERDRAW_INSPECTOR;"),E&&ze.push("#define TERRAIN3D;"),N&&ze.push(N),H&&ze.push(...H);let nt=ze.concat(gi.prelude.fragmentSource,L.fragmentSource,l.fragmentSource).join(`
`),at=ze.concat(gi.prelude.vertexSource,L.vertexSource,l.vertexSource).join(`
`);Da(G)||(nt=(function(Dt){return Dt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(nt),at=(function(Dt){return Dt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(at));const $e=G.createShader(G.FRAGMENT_SHADER);if(G.isContextLost())return void(this.failedToCreate=!0);if(G.shaderSource($e,nt),G.compileShader($e),!G.getShaderParameter($e,G.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${G.getShaderInfoLog($e)}`);G.attachShader(this.program,$e);const gt=G.createShader(G.VERTEX_SHADER);if(G.isContextLost())return void(this.failedToCreate=!0);if(G.shaderSource(gt,at),G.compileShader(gt),!G.getShaderParameter(gt,G.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${G.getShaderInfoLog(gt)}`);G.attachShader(this.program,gt),this.attributes={};const Nt={};this.numAttributes=se.length;for(let Dt=0;Dt<this.numAttributes;Dt++)se[Dt]&&(G.bindAttribLocation(this.program,Dt,se[Dt]),this.attributes[se[Dt]]=Dt);if(G.linkProgram(this.program),!G.getProgramParameter(this.program,G.LINK_STATUS))throw new Error(`Program failed to link: ${G.getProgramInfoLog(this.program)}`);G.deleteShader(gt),G.deleteShader($e);for(let Dt=0;Dt<et.length;Dt++){const It=et[Dt];if(It&&!Nt[It]){const Qt=G.getUniformLocation(this.program,It);Qt&&(Nt[It]=Qt)}}this.fixedUniforms=g(t,Nt),this.terrainUniforms=((Dt,It)=>({u_depth:new A.b_(Dt,It.u_depth),u_terrain:new A.b_(Dt,It.u_terrain),u_terrain_dim:new A.bq(Dt,It.u_terrain_dim),u_terrain_matrix:new A.c0(Dt,It.u_terrain_matrix),u_terrain_unpack:new A.c1(Dt,It.u_terrain_unpack),u_terrain_exaggeration:new A.bq(Dt,It.u_terrain_exaggeration)}))(t,Nt),this.projectionUniforms=((Dt,It)=>({u_projection_matrix:new A.c0(Dt,It.u_projection_matrix),u_projection_tile_mercator_coords:new A.c1(Dt,It.u_projection_tile_mercator_coords),u_projection_clipping_plane:new A.c1(Dt,It.u_projection_clipping_plane),u_projection_transition:new A.bq(Dt,It.u_projection_transition),u_projection_fallback_matrix:new A.c0(Dt,It.u_projection_fallback_matrix)}))(t,Nt),this.binderUniforms=f?f.getUniforms(t,Nt):[]}draw(t,l,f,g,B,E,L,N,H,G,$,Y,se,de,Se,Me,Ee,je,et){const ze=t.gl;if(this.failedToCreate)return;if(t.program.set(this.program),t.setDepthMode(f),t.setStencilMode(g),t.setColorMode(B),t.setCullFace(E),N){t.activeTexture.set(ze.TEXTURE2),ze.bindTexture(ze.TEXTURE_2D,N.depthTexture),t.activeTexture.set(ze.TEXTURE3),ze.bindTexture(ze.TEXTURE_2D,N.texture);for(const at in this.terrainUniforms)this.terrainUniforms[at].set(N[at])}if(H)for(const at in H)this.projectionUniforms[Vs[at]].set(H[at]);if(L)for(const at in this.fixedUniforms)this.fixedUniforms[at].set(L[at]);Me&&Me.setUniforms(t,this.binderUniforms,de,{zoom:Se});let nt=0;switch(l){case ze.LINES:nt=2;break;case ze.TRIANGLES:nt=3;break;case ze.LINE_STRIP:nt=1}for(const at of se.get()){const $e=at.vaos||(at.vaos={});($e[G]||($e[G]=new Qc)).bind(t,this,$,Me?Me.getPaintVertexBuffers():[],Y,at.vertexOffset,Ee,je,et),ze.drawElements(l,at.primitiveLength*nt,ze.UNSIGNED_SHORT,at.primitiveOffset*nt*2)}}}function _c(b,t,l){const f=1/A.aN(l,1,t.transform.tileZoom),g=Math.pow(2,l.tileID.overscaledZ),B=l.tileSize*Math.pow(2,t.transform.tileZoom)/g,E=B*(l.tileID.canonical.x+l.tileID.wrap*g),L=B*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture.size,u_scale:[f,b.fromScale,b.toScale],u_fade:b.t,u_pixel_coord_upper:[E>>16,L>>16],u_pixel_coord_lower:[65535&E,65535&L]}}const ws=(b,t,l,f)=>{const g=b.style.light,B=g.properties.get("position"),E=[B.x,B.y,B.z],L=A.c4();g.properties.get("anchor")==="viewport"&&A.c5(L,b.transform.bearingInRadians),A.c6(E,E,L);const N=b.transform.transformLightDirection(E),H=g.properties.get("color");return{u_lightpos:E,u_lightpos_globe:N,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[H.r,H.g,H.b],u_vertical_gradient:+t,u_opacity:l,u_fill_translate:f}},Yo=(b,t,l,f,g,B,E)=>A.e(ws(b,t,l,f),_c(B,b,E),{u_height_factor:-Math.pow(2,g.overscaledZ)/E.tileSize/8}),Bl=(b,t,l,f)=>A.e(_c(t,b,l),{u_fill_translate:f}),Oc=(b,t)=>({u_world:b,u_fill_translate:t}),$o=(b,t,l,f,g)=>A.e(Bl(b,t,l,g),{u_world:f}),Ao=(b,t,l,f,g)=>{const B=b.transform;let E,L,N=0;if(l.paint.get("circle-pitch-alignment")==="map"){const H=A.aN(t,1,B.zoom);E=!0,L=[H,H],N=H/(A.a5*Math.pow(2,t.tileID.overscaledZ))*2*Math.PI*g}else E=!1,L=B.pixelsToGLUnits;return{u_camera_to_center_distance:B.cameraToCenterDistance,u_scale_with_map:+(l.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+E,u_device_pixel_ratio:b.pixelRatio,u_extrude_scale:L,u_globe_extrude_scale:N,u_translate:f}},Gs=b=>({u_pixel_extrude_scale:[1/b.width,1/b.height]}),Bs=b=>({u_viewport_size:[b.width,b.height]}),qs=(b,t=1)=>({u_color:b,u_overlay:0,u_overlay_scale:t}),Cl=(b,t,l,f)=>{const g=A.aN(b,1,t)/(A.a5*Math.pow(2,b.tileID.overscaledZ))*2*Math.PI*f;return{u_extrude_scale:A.aN(b,1,t),u_intensity:l,u_globe_extrude_scale:g}},Po=(b,t,l,f)=>{const g=A.N();A.c7(g,0,b.width,b.height,0,0,1);const B=b.context.gl;return{u_matrix:g,u_world:[B.drawingBufferWidth,B.drawingBufferHeight],u_image:l,u_color_ramp:f,u_opacity:t.paint.get("heatmap-opacity")}},zc=(b,t,l)=>{const f=l.paint.get("hillshade-accent-color");let g;switch(l.paint.get("hillshade-method")){case"basic":g=4;break;case"combined":g=1;break;case"igor":g=2;break;case"multidirectional":g=3;break;default:g=0}const B=l.getIlluminationProperties();for(let E=0;E<B.directionRadians.length;E++)l.paint.get("hillshade-illumination-anchor")==="viewport"&&(B.directionRadians[E]+=b.transform.bearingInRadians);return{u_image:0,u_latrange:pa(0,t.tileID),u_exaggeration:l.paint.get("hillshade-exaggeration"),u_altitudes:B.altitudeRadians,u_azimuths:B.directionRadians,u_accent:f,u_method:g,u_highlights:B.highlightColor,u_shadows:B.shadowColor}},jc=(b,t)=>{const l=t.stride,f=A.N();return A.c7(f,0,A.a5,-A.a5,0,0,1),A.O(f,f,[0,-A.a5,0]),{u_matrix:f,u_image:1,u_dimension:[l,l],u_zoom:b.overscaledZ,u_unpack:t.getUnpackVector()}};function pa(b,t){const l=Math.pow(2,t.canonical.z),f=t.canonical.y;return[new A.a9(0,f/l).toLngLat().lat,new A.a9(0,(f+1)/l).toLngLat().lat]}const vu=(b,t,l=0)=>({u_image:0,u_unpack:t.getUnpackVector(),u_dimension:[t.stride,t.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:l,u_opacity:b.paint.get("color-relief-opacity")}),co=(b,t,l,f)=>{const g=b.transform;return{u_translation:tl(b,t,l),u_ratio:f/A.aN(t,1,g.zoom),u_device_pixel_ratio:b.pixelRatio,u_units_to_pixels:[1/g.pixelsToGLUnits[0],1/g.pixelsToGLUnits[1]]}},Jo=(b,t,l,f,g)=>A.e(co(b,t,l,f),{u_image:0,u_image_height:g}),Xa=(b,t,l,f,g)=>{const B=b.transform,E=Xl(t,B);return{u_translation:tl(b,t,l),u_texsize:t.imageAtlasTexture.size,u_ratio:f/A.aN(t,1,B.zoom),u_device_pixel_ratio:b.pixelRatio,u_image:0,u_scale:[E,g.fromScale,g.toScale],u_fade:g.t,u_units_to_pixels:[1/B.pixelsToGLUnits[0],1/B.pixelsToGLUnits[1]]}},el=(b,t,l,f,g)=>{const B=Xl(t,b.transform);return A.e(co(b,t,l,f),{u_tileratio:B,u_crossfade_from:g.fromScale,u_crossfade_to:g.toScale,u_image:0,u_mix:g.t,u_lineatlas_width:b.lineAtlas.width,u_lineatlas_height:b.lineAtlas.height})},uo=(b,t,l,f,g,B)=>{const E=Xl(t,b.transform);return A.e(co(b,t,l,f),{u_image:0,u_image_height:B,u_tileratio:E,u_crossfade_from:g.fromScale,u_crossfade_to:g.toScale,u_image_dash:1,u_mix:g.t,u_lineatlas_width:b.lineAtlas.width,u_lineatlas_height:b.lineAtlas.height})};function Xl(b,t){return 1/A.aN(b,1,t.tileZoom)}function tl(b,t,l){return A.aO(b.transform,t,l.paint.get("line-translate"),l.paint.get("line-translate-anchor"))}const Sl=(b,t,l,f,g)=>{return{u_tl_parent:b,u_scale_parent:t,u_buffer_scale:1,u_fade_t:l.mix,u_opacity:l.opacity*f.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:f.paint.get("raster-brightness-min"),u_brightness_high:f.paint.get("raster-brightness-max"),u_saturation_factor:(E=f.paint.get("raster-saturation"),E>0?1-1/(1.001-E):-E),u_contrast_factor:(B=f.paint.get("raster-contrast"),B>0?1/(1-B):1+B),u_spin_weights:El(f.paint.get("raster-hue-rotate")),u_coords_top:[g[0].x,g[0].y,g[1].x,g[1].y],u_coords_bottom:[g[3].x,g[3].y,g[2].x,g[2].y]};var B,E};function El(b){b*=Math.PI/180;const t=Math.sin(b),l=Math.cos(b);return[(2*l+1)/3,(-Math.sqrt(3)*t-l+1)/3,(Math.sqrt(3)*t-l+1)/3]}const Wl=(b,t,l,f,g,B,E,L,N,H,G,$,Y)=>{const se=E.transform;return{u_is_size_zoom_constant:+(b==="constant"||b==="source"),u_is_size_feature_constant:+(b==="constant"||b==="camera"),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:se.cameraToCenterDistance,u_pitch:se.pitch/360*2*Math.PI,u_rotate_symbol:+l,u_aspect_ratio:se.width/se.height,u_fade_change:E.options.fadeDuration?E.symbolFadeChange:1,u_label_plane_matrix:L,u_coord_matrix:N,u_is_text:+G,u_pitch_with_map:+f,u_is_along_line:g,u_is_variable_anchor:B,u_texsize:$,u_texture:0,u_translation:H,u_pitched_scale:Y}},Ra=(b,t,l,f,g,B,E,L,N,H,G,$,Y,se)=>{const de=E.transform;return A.e(Wl(b,t,l,f,g,B,E,L,N,H,G,$,se),{u_gamma_scale:f?Math.cos(de.pitch*Math.PI/180)*de.cameraToCenterDistance:1,u_device_pixel_ratio:E.pixelRatio,u_is_halo:1})},Tl=(b,t,l,f,g,B,E,L,N,H,G,$,Y)=>A.e(Ra(b,t,l,f,g,B,E,L,N,H,!0,G,0,Y),{u_texsize_icon:$,u_texture_icon:1}),Cs=(b,t)=>({u_opacity:b,u_color:t}),rl=(b,t,l,f,g)=>A.e((function(B,E,L,N){const H=L.imageManager.getPattern(B.from.toString()),G=L.imageManager.getPattern(B.to.toString()),{width:$,height:Y}=L.imageManager.getPixelSize(),se=Math.pow(2,N.tileID.overscaledZ),de=N.tileSize*Math.pow(2,L.transform.tileZoom)/se,Se=de*(N.tileID.canonical.x+N.tileID.wrap*se),Me=de*N.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:H.tl,u_pattern_br_a:H.br,u_pattern_tl_b:G.tl,u_pattern_br_b:G.br,u_texsize:[$,Y],u_mix:E.t,u_pattern_size_a:H.displaySize,u_pattern_size_b:G.displaySize,u_scale_a:E.fromScale,u_scale_b:E.toScale,u_tile_units_to_pixels:1/A.aN(N,1,L.transform.tileZoom),u_pixel_coord_upper:[Se>>16,Me>>16],u_pixel_coord_lower:[65535&Se,65535&Me]}})(l,g,t,f),{u_opacity:b}),Ai=(b,t)=>{},ni={fillExtrusion:(b,t)=>({u_lightpos:new A.c2(b,t.u_lightpos),u_lightpos_globe:new A.c2(b,t.u_lightpos_globe),u_lightintensity:new A.bq(b,t.u_lightintensity),u_lightcolor:new A.c2(b,t.u_lightcolor),u_vertical_gradient:new A.bq(b,t.u_vertical_gradient),u_opacity:new A.bq(b,t.u_opacity),u_fill_translate:new A.c3(b,t.u_fill_translate)}),fillExtrusionPattern:(b,t)=>({u_lightpos:new A.c2(b,t.u_lightpos),u_lightpos_globe:new A.c2(b,t.u_lightpos_globe),u_lightintensity:new A.bq(b,t.u_lightintensity),u_lightcolor:new A.c2(b,t.u_lightcolor),u_vertical_gradient:new A.bq(b,t.u_vertical_gradient),u_height_factor:new A.bq(b,t.u_height_factor),u_opacity:new A.bq(b,t.u_opacity),u_fill_translate:new A.c3(b,t.u_fill_translate),u_image:new A.b_(b,t.u_image),u_texsize:new A.c3(b,t.u_texsize),u_pixel_coord_upper:new A.c3(b,t.u_pixel_coord_upper),u_pixel_coord_lower:new A.c3(b,t.u_pixel_coord_lower),u_scale:new A.c2(b,t.u_scale),u_fade:new A.bq(b,t.u_fade)}),fill:(b,t)=>({u_fill_translate:new A.c3(b,t.u_fill_translate)}),fillPattern:(b,t)=>({u_image:new A.b_(b,t.u_image),u_texsize:new A.c3(b,t.u_texsize),u_pixel_coord_upper:new A.c3(b,t.u_pixel_coord_upper),u_pixel_coord_lower:new A.c3(b,t.u_pixel_coord_lower),u_scale:new A.c2(b,t.u_scale),u_fade:new A.bq(b,t.u_fade),u_fill_translate:new A.c3(b,t.u_fill_translate)}),fillOutline:(b,t)=>({u_world:new A.c3(b,t.u_world),u_fill_translate:new A.c3(b,t.u_fill_translate)}),fillOutlinePattern:(b,t)=>({u_world:new A.c3(b,t.u_world),u_image:new A.b_(b,t.u_image),u_texsize:new A.c3(b,t.u_texsize),u_pixel_coord_upper:new A.c3(b,t.u_pixel_coord_upper),u_pixel_coord_lower:new A.c3(b,t.u_pixel_coord_lower),u_scale:new A.c2(b,t.u_scale),u_fade:new A.bq(b,t.u_fade),u_fill_translate:new A.c3(b,t.u_fill_translate)}),circle:(b,t)=>({u_camera_to_center_distance:new A.bq(b,t.u_camera_to_center_distance),u_scale_with_map:new A.b_(b,t.u_scale_with_map),u_pitch_with_map:new A.b_(b,t.u_pitch_with_map),u_extrude_scale:new A.c3(b,t.u_extrude_scale),u_device_pixel_ratio:new A.bq(b,t.u_device_pixel_ratio),u_globe_extrude_scale:new A.bq(b,t.u_globe_extrude_scale),u_translate:new A.c3(b,t.u_translate)}),collisionBox:(b,t)=>({u_pixel_extrude_scale:new A.c3(b,t.u_pixel_extrude_scale)}),collisionCircle:(b,t)=>({u_viewport_size:new A.c3(b,t.u_viewport_size)}),debug:(b,t)=>({u_color:new A.b$(b,t.u_color),u_overlay:new A.b_(b,t.u_overlay),u_overlay_scale:new A.bq(b,t.u_overlay_scale)}),depth:Ai,clippingMask:Ai,heatmap:(b,t)=>({u_extrude_scale:new A.bq(b,t.u_extrude_scale),u_intensity:new A.bq(b,t.u_intensity),u_globe_extrude_scale:new A.bq(b,t.u_globe_extrude_scale)}),heatmapTexture:(b,t)=>({u_matrix:new A.c0(b,t.u_matrix),u_world:new A.c3(b,t.u_world),u_image:new A.b_(b,t.u_image),u_color_ramp:new A.b_(b,t.u_color_ramp),u_opacity:new A.bq(b,t.u_opacity)}),hillshade:(b,t)=>({u_image:new A.b_(b,t.u_image),u_latrange:new A.c3(b,t.u_latrange),u_exaggeration:new A.bq(b,t.u_exaggeration),u_altitudes:new A.c9(b,t.u_altitudes),u_azimuths:new A.c9(b,t.u_azimuths),u_accent:new A.b$(b,t.u_accent),u_method:new A.b_(b,t.u_method),u_shadows:new A.c8(b,t.u_shadows),u_highlights:new A.c8(b,t.u_highlights)}),hillshadePrepare:(b,t)=>({u_matrix:new A.c0(b,t.u_matrix),u_image:new A.b_(b,t.u_image),u_dimension:new A.c3(b,t.u_dimension),u_zoom:new A.bq(b,t.u_zoom),u_unpack:new A.c1(b,t.u_unpack)}),colorRelief:(b,t)=>({u_image:new A.b_(b,t.u_image),u_unpack:new A.c1(b,t.u_unpack),u_dimension:new A.c3(b,t.u_dimension),u_elevation_stops:new A.b_(b,t.u_elevation_stops),u_color_stops:new A.b_(b,t.u_color_stops),u_color_ramp_size:new A.b_(b,t.u_color_ramp_size),u_opacity:new A.bq(b,t.u_opacity)}),line:(b,t)=>({u_translation:new A.c3(b,t.u_translation),u_ratio:new A.bq(b,t.u_ratio),u_device_pixel_ratio:new A.bq(b,t.u_device_pixel_ratio),u_units_to_pixels:new A.c3(b,t.u_units_to_pixels)}),lineGradient:(b,t)=>({u_translation:new A.c3(b,t.u_translation),u_ratio:new A.bq(b,t.u_ratio),u_device_pixel_ratio:new A.bq(b,t.u_device_pixel_ratio),u_units_to_pixels:new A.c3(b,t.u_units_to_pixels),u_image:new A.b_(b,t.u_image),u_image_height:new A.bq(b,t.u_image_height)}),linePattern:(b,t)=>({u_translation:new A.c3(b,t.u_translation),u_texsize:new A.c3(b,t.u_texsize),u_ratio:new A.bq(b,t.u_ratio),u_device_pixel_ratio:new A.bq(b,t.u_device_pixel_ratio),u_image:new A.b_(b,t.u_image),u_units_to_pixels:new A.c3(b,t.u_units_to_pixels),u_scale:new A.c2(b,t.u_scale),u_fade:new A.bq(b,t.u_fade)}),lineSDF:(b,t)=>({u_translation:new A.c3(b,t.u_translation),u_ratio:new A.bq(b,t.u_ratio),u_device_pixel_ratio:new A.bq(b,t.u_device_pixel_ratio),u_units_to_pixels:new A.c3(b,t.u_units_to_pixels),u_image:new A.b_(b,t.u_image),u_mix:new A.bq(b,t.u_mix),u_tileratio:new A.bq(b,t.u_tileratio),u_crossfade_from:new A.bq(b,t.u_crossfade_from),u_crossfade_to:new A.bq(b,t.u_crossfade_to),u_lineatlas_width:new A.bq(b,t.u_lineatlas_width),u_lineatlas_height:new A.bq(b,t.u_lineatlas_height)}),lineGradientSDF:(b,t)=>({u_translation:new A.c3(b,t.u_translation),u_ratio:new A.bq(b,t.u_ratio),u_device_pixel_ratio:new A.bq(b,t.u_device_pixel_ratio),u_units_to_pixels:new A.c3(b,t.u_units_to_pixels),u_image:new A.b_(b,t.u_image),u_image_height:new A.bq(b,t.u_image_height),u_tileratio:new A.bq(b,t.u_tileratio),u_crossfade_from:new A.bq(b,t.u_crossfade_from),u_crossfade_to:new A.bq(b,t.u_crossfade_to),u_image_dash:new A.b_(b,t.u_image_dash),u_mix:new A.bq(b,t.u_mix),u_lineatlas_width:new A.bq(b,t.u_lineatlas_width),u_lineatlas_height:new A.bq(b,t.u_lineatlas_height)}),raster:(b,t)=>({u_tl_parent:new A.c3(b,t.u_tl_parent),u_scale_parent:new A.bq(b,t.u_scale_parent),u_buffer_scale:new A.bq(b,t.u_buffer_scale),u_fade_t:new A.bq(b,t.u_fade_t),u_opacity:new A.bq(b,t.u_opacity),u_image0:new A.b_(b,t.u_image0),u_image1:new A.b_(b,t.u_image1),u_brightness_low:new A.bq(b,t.u_brightness_low),u_brightness_high:new A.bq(b,t.u_brightness_high),u_saturation_factor:new A.bq(b,t.u_saturation_factor),u_contrast_factor:new A.bq(b,t.u_contrast_factor),u_spin_weights:new A.c2(b,t.u_spin_weights),u_coords_top:new A.c1(b,t.u_coords_top),u_coords_bottom:new A.c1(b,t.u_coords_bottom)}),symbolIcon:(b,t)=>({u_is_size_zoom_constant:new A.b_(b,t.u_is_size_zoom_constant),u_is_size_feature_constant:new A.b_(b,t.u_is_size_feature_constant),u_size_t:new A.bq(b,t.u_size_t),u_size:new A.bq(b,t.u_size),u_camera_to_center_distance:new A.bq(b,t.u_camera_to_center_distance),u_pitch:new A.bq(b,t.u_pitch),u_rotate_symbol:new A.b_(b,t.u_rotate_symbol),u_aspect_ratio:new A.bq(b,t.u_aspect_ratio),u_fade_change:new A.bq(b,t.u_fade_change),u_label_plane_matrix:new A.c0(b,t.u_label_plane_matrix),u_coord_matrix:new A.c0(b,t.u_coord_matrix),u_is_text:new A.b_(b,t.u_is_text),u_pitch_with_map:new A.b_(b,t.u_pitch_with_map),u_is_along_line:new A.b_(b,t.u_is_along_line),u_is_variable_anchor:new A.b_(b,t.u_is_variable_anchor),u_texsize:new A.c3(b,t.u_texsize),u_texture:new A.b_(b,t.u_texture),u_translation:new A.c3(b,t.u_translation),u_pitched_scale:new A.bq(b,t.u_pitched_scale)}),symbolSDF:(b,t)=>({u_is_size_zoom_constant:new A.b_(b,t.u_is_size_zoom_constant),u_is_size_feature_constant:new A.b_(b,t.u_is_size_feature_constant),u_size_t:new A.bq(b,t.u_size_t),u_size:new A.bq(b,t.u_size),u_camera_to_center_distance:new A.bq(b,t.u_camera_to_center_distance),u_pitch:new A.bq(b,t.u_pitch),u_rotate_symbol:new A.b_(b,t.u_rotate_symbol),u_aspect_ratio:new A.bq(b,t.u_aspect_ratio),u_fade_change:new A.bq(b,t.u_fade_change),u_label_plane_matrix:new A.c0(b,t.u_label_plane_matrix),u_coord_matrix:new A.c0(b,t.u_coord_matrix),u_is_text:new A.b_(b,t.u_is_text),u_pitch_with_map:new A.b_(b,t.u_pitch_with_map),u_is_along_line:new A.b_(b,t.u_is_along_line),u_is_variable_anchor:new A.b_(b,t.u_is_variable_anchor),u_texsize:new A.c3(b,t.u_texsize),u_texture:new A.b_(b,t.u_texture),u_gamma_scale:new A.bq(b,t.u_gamma_scale),u_device_pixel_ratio:new A.bq(b,t.u_device_pixel_ratio),u_is_halo:new A.b_(b,t.u_is_halo),u_translation:new A.c3(b,t.u_translation),u_pitched_scale:new A.bq(b,t.u_pitched_scale)}),symbolTextAndIcon:(b,t)=>({u_is_size_zoom_constant:new A.b_(b,t.u_is_size_zoom_constant),u_is_size_feature_constant:new A.b_(b,t.u_is_size_feature_constant),u_size_t:new A.bq(b,t.u_size_t),u_size:new A.bq(b,t.u_size),u_camera_to_center_distance:new A.bq(b,t.u_camera_to_center_distance),u_pitch:new A.bq(b,t.u_pitch),u_rotate_symbol:new A.b_(b,t.u_rotate_symbol),u_aspect_ratio:new A.bq(b,t.u_aspect_ratio),u_fade_change:new A.bq(b,t.u_fade_change),u_label_plane_matrix:new A.c0(b,t.u_label_plane_matrix),u_coord_matrix:new A.c0(b,t.u_coord_matrix),u_is_text:new A.b_(b,t.u_is_text),u_pitch_with_map:new A.b_(b,t.u_pitch_with_map),u_is_along_line:new A.b_(b,t.u_is_along_line),u_is_variable_anchor:new A.b_(b,t.u_is_variable_anchor),u_texsize:new A.c3(b,t.u_texsize),u_texsize_icon:new A.c3(b,t.u_texsize_icon),u_texture:new A.b_(b,t.u_texture),u_texture_icon:new A.b_(b,t.u_texture_icon),u_gamma_scale:new A.bq(b,t.u_gamma_scale),u_device_pixel_ratio:new A.bq(b,t.u_device_pixel_ratio),u_is_halo:new A.b_(b,t.u_is_halo),u_translation:new A.c3(b,t.u_translation),u_pitched_scale:new A.bq(b,t.u_pitched_scale)}),background:(b,t)=>({u_opacity:new A.bq(b,t.u_opacity),u_color:new A.b$(b,t.u_color)}),backgroundPattern:(b,t)=>({u_opacity:new A.bq(b,t.u_opacity),u_image:new A.b_(b,t.u_image),u_pattern_tl_a:new A.c3(b,t.u_pattern_tl_a),u_pattern_br_a:new A.c3(b,t.u_pattern_br_a),u_pattern_tl_b:new A.c3(b,t.u_pattern_tl_b),u_pattern_br_b:new A.c3(b,t.u_pattern_br_b),u_texsize:new A.c3(b,t.u_texsize),u_mix:new A.bq(b,t.u_mix),u_pattern_size_a:new A.c3(b,t.u_pattern_size_a),u_pattern_size_b:new A.c3(b,t.u_pattern_size_b),u_scale_a:new A.bq(b,t.u_scale_a),u_scale_b:new A.bq(b,t.u_scale_b),u_pixel_coord_upper:new A.c3(b,t.u_pixel_coord_upper),u_pixel_coord_lower:new A.c3(b,t.u_pixel_coord_lower),u_tile_units_to_pixels:new A.bq(b,t.u_tile_units_to_pixels)}),terrain:(b,t)=>({u_texture:new A.b_(b,t.u_texture),u_ele_delta:new A.bq(b,t.u_ele_delta),u_fog_matrix:new A.c0(b,t.u_fog_matrix),u_fog_color:new A.b$(b,t.u_fog_color),u_fog_ground_blend:new A.bq(b,t.u_fog_ground_blend),u_fog_ground_blend_opacity:new A.bq(b,t.u_fog_ground_blend_opacity),u_horizon_color:new A.b$(b,t.u_horizon_color),u_horizon_fog_blend:new A.bq(b,t.u_horizon_fog_blend),u_is_globe_mode:new A.bq(b,t.u_is_globe_mode)}),terrainDepth:(b,t)=>({u_ele_delta:new A.bq(b,t.u_ele_delta)}),terrainCoords:(b,t)=>({u_texture:new A.b_(b,t.u_texture),u_terrain_coords_id:new A.bq(b,t.u_terrain_coords_id),u_ele_delta:new A.bq(b,t.u_ele_delta)}),projectionErrorMeasurement:(b,t)=>({u_input:new A.bq(b,t.u_input),u_output_expected:new A.bq(b,t.u_output_expected)}),atmosphere:(b,t)=>({u_sun_pos:new A.c2(b,t.u_sun_pos),u_atmosphere_blend:new A.bq(b,t.u_atmosphere_blend),u_globe_position:new A.c2(b,t.u_globe_position),u_globe_radius:new A.bq(b,t.u_globe_radius),u_inv_proj_matrix:new A.c0(b,t.u_inv_proj_matrix)}),sky:(b,t)=>({u_sky_color:new A.b$(b,t.u_sky_color),u_horizon_color:new A.b$(b,t.u_horizon_color),u_horizon:new A.c3(b,t.u_horizon),u_horizon_normal:new A.c3(b,t.u_horizon_normal),u_sky_horizon_blend:new A.bq(b,t.u_sky_horizon_blend),u_sky_blend:new A.bq(b,t.u_sky_blend)})};class Ii{constructor(t,l,f){this.context=t;const g=t.gl;this.buffer=g.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?g.DYNAMIC_DRAW:g.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const l=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),l.bufferSubData(l.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const wa={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Fl{constructor(t,l,f,g){this.length=l.length,this.attributes=f,this.itemSize=l.bytesPerElement,this.dynamicDraw=g,this.context=t;const B=t.gl;this.buffer=B.createBuffer(),t.bindVertexBuffer.set(this.buffer),B.bufferData(B.ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?B.DYNAMIC_DRAW:B.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){if(t.length!==this.length)throw new Error(`Length of new data is ${t.length}, which doesn't match current length of ${this.length}`);const l=this.context.gl;this.bind(),l.bufferSubData(l.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,l){for(let f=0;f<this.attributes.length;f++){const g=l.attributes[this.attributes[f].name];g!==void 0&&t.enableVertexAttribArray(g)}}setVertexAttribPointers(t,l,f){for(let g=0;g<this.attributes.length;g++){const B=this.attributes[g],E=l.attributes[B.name];E!==void 0&&t.vertexAttribPointer(E,B.components,t[wa[B.type]],!1,this.itemSize,B.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class wn{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Yl extends wn{getDefault(){return A.bp.transparent}set(t){const l=this.current;(t.r!==l.r||t.g!==l.g||t.b!==l.b||t.a!==l.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class JA extends wn{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class xu extends wn{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class ec extends wn{getDefault(){return[!0,!0,!0,!0]}set(t){const l=this.current;(t[0]!==l[0]||t[1]!==l[1]||t[2]!==l[2]||t[3]!==l[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class Hc extends wn{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class vc extends wn{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class ho extends wn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const l=this.current;(t.func!==l.func||t.ref!==l.ref||t.mask!==l.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class Wu extends wn{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const l=this.current;(t[0]!==l[0]||t[1]!==l[1]||t[2]!==l[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class tc extends wn{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const l=this.gl;t?l.enable(l.STENCIL_TEST):l.disable(l.STENCIL_TEST),this.current=t,this.dirty=!1}}class fo extends wn{getDefault(){return[0,1]}set(t){const l=this.current;(t[0]!==l[0]||t[1]!==l[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class Il extends wn{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const l=this.gl;t?l.enable(l.DEPTH_TEST):l.disable(l.DEPTH_TEST),this.current=t,this.dirty=!1}}class Ss extends wn{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class $l extends wn{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const l=this.gl;t?l.enable(l.BLEND):l.disable(l.BLEND),this.current=t,this.dirty=!1}}class rc extends wn{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const l=this.current;(t[0]!==l[0]||t[1]!==l[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class nc extends wn{getDefault(){return A.bp.transparent}set(t){const l=this.current;(t.r!==l.r||t.g!==l.g||t.b!==l.b||t.a!==l.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class Vc extends wn{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class MA extends wn{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const l=this.gl;t?l.enable(l.CULL_FACE):l.disable(l.CULL_FACE),this.current=t,this.dirty=!1}}class po extends wn{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class Gc extends wn{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class Wa extends wn{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class Yr extends wn{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class xc extends wn{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const l=this.current;(t[0]!==l[0]||t[1]!==l[1]||t[2]!==l[2]||t[3]!==l[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class Es extends wn{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const l=this.gl;l.bindFramebuffer(l.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class bu extends wn{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const l=this.gl;l.bindRenderbuffer(l.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class Ts extends wn{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const l=this.gl;l.bindTexture(l.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class wu extends wn{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class qc extends wn{getDefault(){return null}set(t){const l=this.gl;l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class UA extends wn{getDefault(){return null}set(t){var l;if(t===this.current&&!this.dirty)return;const f=this.gl;Da(f)?f.bindVertexArray(t):(l=f.getExtension("OES_vertex_array_object"))===null||l===void 0||l.bindVertexArrayOES(t),this.current=t,this.dirty=!1}}class Bu extends wn{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class Kc extends wn{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class DA extends wn{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class Jl extends wn{constructor(t,l){super(t),this.context=t,this.parent=l}getDefault(){return null}}class Ks extends Jl{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class ic extends Jl{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class ac extends Jl{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_STENCIL_ATTACHMENT,l.RENDERBUFFER,t),this.current=t,this.dirty=!1}}const sc="Framebuffer is not complete";class oc{constructor(t,l,f,g,B){this.context=t,this.width=l,this.height=f;const E=t.gl,L=this.framebuffer=E.createFramebuffer();if(this.colorAttachment=new Ks(t,L),g)this.depthAttachment=B?new ac(t,L):new ic(t,L);else if(B)throw new Error("Stencil cannot be set without depth");if(E.checkFramebufferStatus(E.FRAMEBUFFER)!==E.FRAMEBUFFER_COMPLETE)throw new Error(sc)}destroy(){const t=this.context.gl,l=this.colorAttachment.get();if(l&&t.deleteTexture(l),this.depthAttachment){const f=this.depthAttachment.get();f&&t.deleteRenderbuffer(f)}t.deleteFramebuffer(this.framebuffer)}}class Fs{constructor(t){var l,f;if(this.gl=t,this.clearColor=new Yl(this),this.clearDepth=new JA(this),this.clearStencil=new xu(this),this.colorMask=new ec(this),this.depthMask=new Hc(this),this.stencilMask=new vc(this),this.stencilFunc=new ho(this),this.stencilOp=new Wu(this),this.stencilTest=new tc(this),this.depthRange=new fo(this),this.depthTest=new Il(this),this.depthFunc=new Ss(this),this.blend=new $l(this),this.blendFunc=new rc(this),this.blendColor=new nc(this),this.blendEquation=new Vc(this),this.cullFace=new MA(this),this.cullFaceSide=new po(this),this.frontFace=new Gc(this),this.program=new Wa(this),this.activeTexture=new Yr(this),this.viewport=new xc(this),this.bindFramebuffer=new Es(this),this.bindRenderbuffer=new bu(this),this.bindTexture=new Ts(this),this.bindVertexBuffer=new wu(this),this.bindElementBuffer=new qc(this),this.bindVertexArray=new UA(this),this.pixelStoreUnpack=new Bu(this),this.pixelStoreUnpackPremultiplyAlpha=new Kc(this),this.pixelStoreUnpackFlipY=new DA(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),Da(t)){this.HALF_FLOAT=t.HALF_FLOAT;const g=t.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(l=t.RGBA16F)!==null&&l!==void 0?l:g?.RGBA16F_EXT,this.RGB16F=(f=t.RGB16F)!==null&&f!==void 0?f:g?.RGB16F_EXT,t.getExtension("EXT_color_buffer_float")}else{t.getExtension("EXT_color_buffer_half_float"),t.getExtension("OES_texture_half_float_linear");const g=t.getExtension("OES_texture_half_float");this.HALF_FLOAT=g?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,l){return new Ii(this,t,l)}createVertexBuffer(t,l,f){return new Fl(this,t,l,f)}createRenderbuffer(t,l,f){const g=this.gl,B=g.createRenderbuffer();return this.bindRenderbuffer.set(B),g.renderbufferStorage(g.RENDERBUFFER,t,l,f),this.bindRenderbuffer.set(null),B}createFramebuffer(t,l,f,g){return new oc(this,t,l,f,g)}clear({color:t,depth:l,stencil:f}){const g=this.gl;let B=0;t&&(B|=g.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),l!==void 0&&(B|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(l),this.depthMask.set(!0)),f!==void 0&&(B|=g.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),g.clear(B)}setCullFace(t){t.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){A.bR(t.blendFunction,Xn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}createVertexArray(){var t;return Da(this.gl)?this.gl.createVertexArray():(t=this.gl.getExtension("OES_vertex_array_object"))===null||t===void 0?void 0:t.createVertexArrayOES()}deleteVertexArray(t){var l;return Da(this.gl)?this.gl.deleteVertexArray(t):(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.deleteVertexArrayOES(t)}unbindVAO(){this.bindVertexArray.set(null)}}let Qa;function Ll(b,t,l,f,g){const B=b.context,E=b.transform,L=B.gl,N=b.useProgram("collisionBox"),H=[];let G=0,$=0;for(let Ee=0;Ee<f.length;Ee++){const je=f[Ee],et=t.getTile(je).getBucket(l);if(!et)continue;const ze=g?et.textCollisionBox:et.iconCollisionBox,nt=et.collisionCircleArray;nt.length>0&&(H.push({circleArray:nt,circleOffset:$,coord:je}),G+=nt.length/4,$=G),ze&&N.draw(B,L.LINES,pn.disabled,En.disabled,b.colorModeForRenderPass(),In.disabled,Gs(b.transform),b.style.map.terrain&&b.style.map.terrain.getTerrainData(je),E.getProjectionData({overscaledTileID:je,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),l.id,ze.layoutVertexBuffer,ze.indexBuffer,ze.segments,null,b.transform.zoom,null,null,ze.collisionVertexBuffer)}if(!g||!H.length)return;const Y=b.useProgram("collisionCircle"),se=new A.ca;se.resize(4*G),se._trim();let de=0;for(const Ee of H)for(let je=0;je<Ee.circleArray.length/4;je++){const et=4*je,ze=Ee.circleArray[et+0],nt=Ee.circleArray[et+1],at=Ee.circleArray[et+2],$e=Ee.circleArray[et+3];se.emplace(de++,ze,nt,at,$e,0),se.emplace(de++,ze,nt,at,$e,1),se.emplace(de++,ze,nt,at,$e,2),se.emplace(de++,ze,nt,at,$e,3)}(!Qa||Qa.length<2*G)&&(Qa=(function(Ee){const je=2*Ee,et=new A.cc;et.resize(je),et._trim();for(let ze=0;ze<je;ze++){const nt=6*ze;et.uint16[nt+0]=4*ze+0,et.uint16[nt+1]=4*ze+1,et.uint16[nt+2]=4*ze+2,et.uint16[nt+3]=4*ze+2,et.uint16[nt+4]=4*ze+3,et.uint16[nt+5]=4*ze+0}return et})(G));const Se=B.createIndexBuffer(Qa,!0),Me=B.createVertexBuffer(se,A.cb.members,!0);for(const Ee of H){const je=Bs(b.transform);Y.draw(B,L.TRIANGLES,pn.disabled,En.disabled,b.colorModeForRenderPass(),In.disabled,je,b.style.map.terrain&&b.style.map.terrain.getTerrainData(Ee.coord),null,l.id,Me,Se,A.aX.simpleSegment(0,2*Ee.circleOffset,Ee.circleArray.length,Ee.circleArray.length/2),null,b.transform.zoom,null,null,null)}Me.destroy(),Se.destroy()}const nl=A.ar(new Float32Array(16));function Is(b,t,l,f,g,B){const{horizontalAlign:E,verticalAlign:L}=A.aS(b);return new A.P((-(E-.5)*t/g+f[0])*B,(-(L-.5)*l/g+f[1])*B)}function No(b,t,l,f,g,B){const E=t.tileAnchorPoint.add(new A.P(t.translation[0],t.translation[1]));if(t.pitchWithMap){let L=f.mult(B);l||(L=L.rotate(-g));const N=E.add(L);return To(N.x,N.y,t.pitchedLabelPlaneMatrix,t.getElevation).point}if(l){const L=ks(t.tileAnchorPoint.x+1,t.tileAnchorPoint.y,t).point.sub(b),N=Math.atan(L.y/L.x)+(L.x<0?Math.PI:0);return b.add(f.rotate(N))}return b.add(f)}function Fh(b,t,l,f,g,B,E,L,N,H,G,$){const Y=b.text.placedSymbolArray,se=b.text.dynamicLayoutVertexArray,de=b.icon.dynamicLayoutVertexArray,Se={};se.clear();for(let Me=0;Me<Y.length;Me++){const Ee=Y.get(Me),je=Ee.hidden||!Ee.crossTileID||b.allowVerticalPlacement&&!Ee.placedOrientation?null:f[Ee.crossTileID];if(je){const et=new A.P(Ee.anchorX,Ee.anchorY),ze={getElevation:$,width:g.width,height:g.height,pitchedLabelPlaneMatrix:B,pitchWithMap:l,transform:g,tileAnchorPoint:et,translation:H,unwrappedTileID:G},nt=l?XA(et.x,et.y,ze):ks(et.x,et.y,ze),at=ys(g.cameraToCenterDistance,nt.signedDistanceFromCamera);let $e=A.aA(b.textSizeData,L,Ee)*at/A.aM;l&&($e*=b.tilePixelRatio/E);const{width:gt,height:Nt,anchor:Dt,textOffset:It,textBoxScale:Qt}=je,cr=Is(Dt,gt,Nt,It,Qt,$e),fr=g.getPitchedTextCorrection(et.x+H[0],et.y+H[1],G),Ht=No(nt.point,ze,t,cr,-g.bearingInRadians,fr),Tr=b.allowVerticalPlacement&&Ee.placedOrientation===A.az.vertical?Math.PI/2:0;for(let _n=0;_n<Ee.numGlyphs;_n++)A.aG(se,Ht,Tr);N&&Ee.associatedIconIndex>=0&&(Se[Ee.associatedIconIndex]={shiftedAnchor:Ht,angle:Tr})}else As(Ee.numGlyphs,se)}if(N){de.clear();const Me=b.icon.placedSymbolArray;for(let Ee=0;Ee<Me.length;Ee++){const je=Me.get(Ee);if(je.hidden)As(je.numGlyphs,de);else{const et=Se[Ee];if(et)for(let ze=0;ze<je.numGlyphs;ze++)A.aG(de,et.shiftedAnchor,et.angle);else As(je.numGlyphs,de)}}b.icon.dynamicLayoutVertexBuffer.updateData(de)}b.text.dynamicLayoutVertexBuffer.updateData(se)}function Zc(b,t,l){return l.iconsInText&&t?"symbolTextAndIcon":b?"symbolSDF":"symbolIcon"}function bc(b,t,l,f,g,B,E,L,N,H,G,$,Y){const se=b.context,de=se.gl,Se=b.transform,Me=L==="map",Ee=N==="map",je=L!=="viewport"&&l.layout.get("symbol-placement")!=="point",et=Me&&!Ee&&!je,ze=!l.layout.get("symbol-sort-key").isConstant();let nt=!1;const at=b.getDepthModeForSublayer(0,pn.ReadOnly),$e=l._unevaluatedLayout.hasValue("text-variable-anchor")||l._unevaluatedLayout.hasValue("text-variable-anchor-offset"),gt=[],Nt=Se.getCircleRadiusCorrection();for(const Dt of f){const It=t.getTile(Dt),Qt=It.getBucket(l);if(!Qt)continue;const cr=g?Qt.text:Qt.icon;if(!cr||!cr.segments.get().length||!cr.hasVisibleVertices)continue;const fr=cr.programConfigurations.get(l.id),Ht=g||Qt.sdfIcons,Tr=g?Qt.textSizeData:Qt.iconSizeData,_n=Ee||Se.pitch!==0,fi=b.useProgram(Zc(Ht,g,Qt),fr),Ri=A.ay(Tr,Se.zoom),Mi=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Dt);let zi,vi,Va,sa,ps=[0,0],ga=null;if(g)vi=It.glyphAtlasTexture,Va=de.LINEAR,zi=It.glyphAtlasTexture.size,Qt.iconsInText&&(ps=It.imageAtlasTexture.size,ga=It.imageAtlasTexture,sa=_n||b.options.rotating||b.options.zooming||Tr.kind==="composite"||Tr.kind==="camera"?de.LINEAR:de.NEAREST);else{const Ti=l.layout.get("icon-size").constantOr(0)!==1||Qt.iconsNeedLinear;vi=It.imageAtlasTexture,Va=Ht||b.options.rotating||b.options.zooming||Ti||_n?de.LINEAR:de.NEAREST,zi=It.imageAtlasTexture.size}const ya=A.aN(It,1,b.transform.zoom),Ws=Ko(Me,b.transform,ya),uc=A.N();A.aB(uc,Ws);const OA=os(Ee,Me,b.transform,ya),zo=A.aO(Se,It,B,E),Ec=Se.getProjectionData({overscaledTileID:Dt,applyGlobeMatrix:!Y,applyTerrainMatrix:!0}),Ju=$e&&Qt.hasTextData(),Tc=l.layout.get("icon-text-fit")!=="none"&&Ju&&Qt.hasIconData();if(je){const Ti=b.style.map.terrain?(sl,Ga)=>b.style.map.terrain.getElevation(Dt,sl,Ga):null,ji=l.layout.get("text-rotation-alignment")==="map";_l(Qt,b,g,Ws,uc,Ee,H,ji,Dt.toUnwrapped(),Se.width,Se.height,zo,Ti)}const Wc=g&&$e||Tc,Ys=je||Wc?nl:Ee?Ws:b.transform.clipSpaceToPixelsMatrix,Dl=Ht&&l.paint.get(g?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let al;al=Ht?Qt.iconsInText?Tl(Tr.kind,Ri,et,Ee,je,Wc,b,Ys,OA,zo,zi,ps,Nt):Ra(Tr.kind,Ri,et,Ee,je,Wc,b,Ys,OA,zo,g,zi,0,Nt):Wl(Tr.kind,Ri,et,Ee,je,Wc,b,Ys,OA,zo,g,zi,Nt);const $s={program:fi,buffers:cr,uniformValues:al,projectionData:Ec,atlasTexture:vi,atlasTextureIcon:ga,atlasInterpolation:Va,atlasInterpolationIcon:sa,isSDF:Ht,hasHalo:Dl};if(ze&&Qt.canOverlap){nt=!0;const Ti=cr.segments.get();for(const ji of Ti)gt.push({segments:new A.aX([ji]),sortKey:ji.sortKey,state:$s,terrainData:Mi})}else gt.push({segments:cr.segments,sortKey:0,state:$s,terrainData:Mi})}nt&&gt.sort(((Dt,It)=>Dt.sortKey-It.sortKey));for(const Dt of gt){const It=Dt.state;if(se.activeTexture.set(de.TEXTURE0),It.atlasTexture.bind(It.atlasInterpolation,de.CLAMP_TO_EDGE),It.atlasTextureIcon&&(se.activeTexture.set(de.TEXTURE1),It.atlasTextureIcon&&It.atlasTextureIcon.bind(It.atlasInterpolationIcon,de.CLAMP_TO_EDGE)),It.isSDF){const Qt=It.uniformValues;It.hasHalo&&(Qt.u_is_halo=1,Yu(It.buffers,Dt.segments,l,b,It.program,at,G,$,Qt,It.projectionData,Dt.terrainData)),Qt.u_is_halo=0}Yu(It.buffers,Dt.segments,l,b,It.program,at,G,$,It.uniformValues,It.projectionData,Dt.terrainData)}}function Yu(b,t,l,f,g,B,E,L,N,H,G){const $=f.context;g.draw($,$.gl.TRIANGLES,B,E,L,In.backCCW,N,G,H,l.id,b.layoutVertexBuffer,b.indexBuffer,t,l.paint,f.transform.zoom,b.programConfigurations.get(l.id),b.dynamicLayoutVertexBuffer,b.opacityVertexBuffer)}function Ya(b,t,l,f,g){const B=b.context,E=B.gl,L=En.disabled,N=new Xn([E.ONE,E.ONE],A.bp.transparent,[!0,!0,!0,!0]),H=t.getBucket(l);if(!H)return;const G=f.key;let $=l.heatmapFbos.get(G);$||($=kn(B,t.tileSize,t.tileSize),l.heatmapFbos.set(G,$)),B.bindFramebuffer.set($.framebuffer),B.viewport.set([0,0,t.tileSize,t.tileSize]),B.clear({color:A.bp.transparent});const Y=H.programConfigurations.get(l.id),se=b.useProgram("heatmap",Y,!g),de=b.transform.getProjectionData({overscaledTileID:t.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Se=b.style.map.terrain.getTerrainData(f);se.draw(B,E.TRIANGLES,pn.disabled,L,N,In.disabled,Cl(t,b.transform.zoom,l.paint.get("heatmap-intensity"),1),Se,de,l.id,H.layoutVertexBuffer,H.indexBuffer,H.segments,l.paint,b.transform.zoom,Y)}function Si(b,t,l,f,g){const B=b.context,E=B.gl,L=b.transform;B.setColorMode(b.colorModeForRenderPass());const N=Ls(B,t),H=l.key,G=t.heatmapFbos.get(H);if(!G)return;B.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,G.colorAttachment.get()),B.activeTexture.set(E.TEXTURE1),N.bind(E.LINEAR,E.CLAMP_TO_EDGE);const $=L.getProjectionData({overscaledTileID:l,applyTerrainMatrix:g,applyGlobeMatrix:!f});b.useProgram("heatmapTexture").draw(B,E.TRIANGLES,pn.disabled,En.disabled,b.colorModeForRenderPass(),In.disabled,Po(b,t,0,1),null,$,t.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments,t.paint,L.zoom),G.destroy(),t.heatmapFbos.delete(H)}function kn(b,t,l){var f,g;const B=b.gl,E=B.createTexture();B.bindTexture(B.TEXTURE_2D,E),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_S,B.CLAMP_TO_EDGE),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_T,B.CLAMP_TO_EDGE),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MIN_FILTER,B.LINEAR),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MAG_FILTER,B.LINEAR);const L=(f=b.HALF_FLOAT)!==null&&f!==void 0?f:B.UNSIGNED_BYTE,N=(g=b.RGBA16F)!==null&&g!==void 0?g:B.RGBA;B.texImage2D(B.TEXTURE_2D,0,N,t,l,0,B.RGBA,L,null);const H=b.createFramebuffer(t,l,!1,!1);return H.colorAttachment.set(E),H}function Ls(b,t){return t.colorRampTexture||(t.colorRampTexture=new A.T(b,t.colorRamp,b.gl.RGBA)),t.colorRampTexture}function qi(b,t,l,f,g,B,E,L){let N=256;if(g.stepInterpolant){const H=t.getSource().maxzoom,G=E.canonical.z===H?Math.ceil(1<<b.transform.maxZoom-E.canonical.z):1;N=A.an(A.ce(B.maxLineLength/A.a5*1024*G),256,l.maxTextureSize)}return L.gradient=A.cf({expression:g.gradientExpression(),evaluationKey:"lineProgress",resolution:N,image:L.gradient||void 0,clips:B.lineClipsArray}),L.texture?L.texture.update(L.gradient):L.texture=new A.T(l,L.gradient,f.RGBA),L.version=g.gradientVersion,L.texture}function ci(b,t,l,f,g){b.activeTexture.set(t.TEXTURE0),l.imageAtlasTexture.bind(t.LINEAR,t.CLAMP_TO_EDGE),f.updatePaintBuffers(g)}function mo(b,t,l,f,g,B){(g||b.lineAtlas.dirty)&&(t.activeTexture.set(l.TEXTURE0),b.lineAtlas.bind(t)),f.updatePaintBuffers(B)}function Zs(b,t,l,f,g,B,E){const L=B.gradients[g.id];let N=L.texture;g.gradientVersion!==L.version&&(N=qi(b,t,l,f,g,B,E,L)),l.activeTexture.set(f.TEXTURE0),N.bind(g.stepInterpolant?f.NEAREST:f.LINEAR,f.CLAMP_TO_EDGE)}function Ml(b,t,l,f,g,B,E,L,N){const H=B.gradients[g.id];let G=H.texture;g.gradientVersion!==H.version&&(G=qi(b,t,l,f,g,B,E,H)),l.activeTexture.set(f.TEXTURE0),G.bind(g.stepInterpolant?f.NEAREST:f.LINEAR,f.CLAMP_TO_EDGE),l.activeTexture.set(f.TEXTURE1),b.lineAtlas.bind(l),L.updatePaintBuffers(N)}function Ba(b,t,l,f,g){if(!l||!f||!f.imageAtlas)return;const B=f.imageAtlas.patternPositions;let E=B[l.to.toString()],L=B[l.from.toString()];if(!E&&L&&(E=L),!L&&E&&(L=E),!E||!L){const N=g.getPaintProperty(t);E=B[N],L=B[N]}E&&L&&b.setConstantPatternPositions(E,L)}function PA(b,t,l,f,g,B,E,L){const N=b.context.gl,H="fill-pattern",G=l.paint.get(H),$=G&&G.constantOr(1),Y=l.getCrossfadeParameters();let se,de,Se,Me,Ee;const je=b.transform,et=l.paint.get("fill-translate"),ze=l.paint.get("fill-translate-anchor");E?(de=$&&!l.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",se=N.LINES):(de=$?"fillPattern":"fill",se=N.TRIANGLES);const nt=G.constantOr(null);for(const at of f){const $e=t.getTile(at);if($&&!$e.patternsLoaded())continue;const gt=$e.getBucket(l);if(!gt)continue;const Nt=gt.programConfigurations.get(l.id),Dt=b.useProgram(de,Nt),It=b.style.map.terrain&&b.style.map.terrain.getTerrainData(at);$&&(b.context.activeTexture.set(N.TEXTURE0),$e.imageAtlasTexture.bind(N.LINEAR,N.CLAMP_TO_EDGE),Nt.updatePaintBuffers(Y)),Ba(Nt,H,nt,$e,l);const Qt=je.getProjectionData({overscaledTileID:at,applyGlobeMatrix:!L,applyTerrainMatrix:!0}),cr=A.aO(je,$e,et,ze);if(E){Me=gt.indexBuffer2,Ee=gt.segments2;const Ht=[N.drawingBufferWidth,N.drawingBufferHeight];Se=de==="fillOutlinePattern"&&$?$o(b,Y,$e,Ht,cr):Oc(Ht,cr)}else Me=gt.indexBuffer,Ee=gt.segments,Se=$?Bl(b,Y,$e,cr):{u_fill_translate:cr};const fr=b.stencilModeForClipping(at);Dt.draw(b.context,se,g,fr,B,In.backCCW,Se,It,Qt,l.id,gt.layoutVertexBuffer,Me,Ee,l.paint,b.transform.zoom,Nt)}}function eA(b,t,l,f,g,B,E,L){const N=b.context,H=N.gl,G="fill-extrusion-pattern",$=l.paint.get(G),Y=$.constantOr(1),se=l.getCrossfadeParameters(),de=l.paint.get("fill-extrusion-opacity"),Se=$.constantOr(null),Me=b.transform;for(const Ee of f){const je=t.getTile(Ee),et=je.getBucket(l);if(!et)continue;const ze=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Ee),nt=et.programConfigurations.get(l.id),at=b.useProgram(Y?"fillExtrusionPattern":"fillExtrusion",nt);Y&&(b.context.activeTexture.set(H.TEXTURE0),je.imageAtlasTexture.bind(H.LINEAR,H.CLAMP_TO_EDGE),nt.updatePaintBuffers(se));const $e=Me.getProjectionData({overscaledTileID:Ee,applyGlobeMatrix:!L,applyTerrainMatrix:!0});Ba(nt,G,Se,je,l);const gt=A.aO(Me,je,l.paint.get("fill-extrusion-translate"),l.paint.get("fill-extrusion-translate-anchor")),Nt=l.paint.get("fill-extrusion-vertical-gradient"),Dt=Y?Yo(b,Nt,de,gt,Ee,se,je):ws(b,Nt,de,gt);at.draw(N,N.gl.TRIANGLES,g,B,E,In.backCCW,Dt,ze,$e,l.id,et.layoutVertexBuffer,et.indexBuffer,et.segments,l.paint,b.transform.zoom,nt,b.style.map.terrain&&et.centroidVertexBuffer)}}function tA(b,t,l,f,g,B,E,L,N){var H;const G=b.style.projection,$=b.context,Y=b.transform,se=$.gl,de=[`#define NUM_ILLUMINATION_SOURCES ${l.paint.get("hillshade-highlight-color").values.length}`],Se=b.useProgram("hillshade",null,!1,de),Me=!b.options.moving;for(const Ee of f){const je=t.getTile(Ee),et=je.fbo;if(!et)continue;const ze=G.getMeshFromTileID($,Ee.canonical,L,!0,"raster"),nt=(H=b.style.map.terrain)===null||H===void 0?void 0:H.getTerrainData(Ee);$.activeTexture.set(se.TEXTURE0),se.bindTexture(se.TEXTURE_2D,et.colorAttachment.get());const at=Y.getProjectionData({overscaledTileID:Ee,aligned:Me,applyGlobeMatrix:!N,applyTerrainMatrix:!0});Se.draw($,se.TRIANGLES,B,g[Ee.overscaledZ],E,In.backCCW,zc(b,je,l),nt,at,l.id,ze.vertexBuffer,ze.indexBuffer,ze.segments)}}function rA(b,t,l,f,g,B,E,L,N){var H;const G=b.style.projection,$=b.context,Y=b.transform,se=$.gl,de=b.useProgram("colorRelief"),Se=!b.options.moving;let Me=!0,Ee=0;for(const je of f){const et=t.getTile(je),ze=et.dem;if(Me){const Dt=se.getParameter(se.MAX_TEXTURE_SIZE),{elevationTexture:It,colorTexture:Qt}=l.getColorRampTextures($,Dt,ze.getUnpackVector());$.activeTexture.set(se.TEXTURE1),It.bind(se.NEAREST,se.CLAMP_TO_EDGE),$.activeTexture.set(se.TEXTURE4),Qt.bind(se.LINEAR,se.CLAMP_TO_EDGE),Me=!1,Ee=It.size[0]}if(!ze||!ze.data)continue;const nt=ze.stride,at=ze.getPixels();if($.activeTexture.set(se.TEXTURE0),$.pixelStoreUnpackPremultiplyAlpha.set(!1),et.demTexture=et.demTexture||b.getTileTexture(nt),et.demTexture){const Dt=et.demTexture;Dt.update(at,{premultiply:!1}),Dt.bind(se.LINEAR,se.CLAMP_TO_EDGE)}else et.demTexture=new A.T($,at,se.RGBA,{premultiply:!1}),et.demTexture.bind(se.LINEAR,se.CLAMP_TO_EDGE);const $e=G.getMeshFromTileID($,je.canonical,L,!0,"raster"),gt=(H=b.style.map.terrain)===null||H===void 0?void 0:H.getTerrainData(je),Nt=Y.getProjectionData({overscaledTileID:je,aligned:Se,applyGlobeMatrix:!N,applyTerrainMatrix:!0});de.draw($,se.TRIANGLES,B,g[je.overscaledZ],E,In.backCCW,vu(l,et.dem,Ee),gt,Nt,l.id,$e.vertexBuffer,$e.indexBuffer,$e.segments)}}const il=[new A.P(0,0),new A.P(A.a5,0),new A.P(A.a5,A.a5),new A.P(0,A.a5)];function go(b,t,l,f,g,B,E,L,N=!1,H=!1){const G=f[f.length-1].overscaledZ,$=b.context,Y=$.gl,se=b.useProgram("raster"),de=b.transform,Se=b.style.projection,Me=b.colorModeForRenderPass(),Ee=!b.options.moving,je=l.paint.get("raster-opacity"),et=l.paint.get("raster-resampling"),ze=l.paint.get("raster-fade-duration"),nt=!!b.style.map.terrain;for(const at of f){const $e=b.getDepthModeForSublayer(at.overscaledZ-G,je===1?pn.ReadWrite:pn.ReadOnly,Y.LESS),gt=t.getTile(at),Nt=et==="nearest"?Y.NEAREST:Y.LINEAR;$.activeTexture.set(Y.TEXTURE0),gt.texture.bind(Nt,Y.CLAMP_TO_EDGE,Y.LINEAR_MIPMAP_NEAREST),$.activeTexture.set(Y.TEXTURE1);const{parentTile:Dt,parentScaleBy:It,parentTopLeft:Qt,fadeValues:cr}=NA(gt,t,ze,nt);gt.fadeOpacity=cr.tileOpacity,Dt?(Dt.fadeOpacity=cr.parentTileOpacity,Dt.texture.bind(Nt,Y.CLAMP_TO_EDGE,Y.LINEAR_MIPMAP_NEAREST)):gt.texture.bind(Nt,Y.CLAMP_TO_EDGE,Y.LINEAR_MIPMAP_NEAREST),gt.texture.useMipmap&&$.extTextureFilterAnisotropic&&b.transform.pitch>b.options.anisotropicFilterPitch&&Y.texParameterf(Y.TEXTURE_2D,$.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,$.extTextureFilterAnisotropicMax);const fr=b.style.map.terrain&&b.style.map.terrain.getTerrainData(at),Ht=de.getProjectionData({overscaledTileID:at,aligned:Ee,applyGlobeMatrix:!H,applyTerrainMatrix:!0}),Tr=Sl(Qt,It,cr.fadeMix,l,L),_n=Se.getMeshFromTileID($,at.canonical,B,E,"raster");se.draw($,Y.TRIANGLES,$e,g?g[at.overscaledZ]:En.disabled,Me,N?In.frontCCW:In.backCCW,Tr,fr,Ht,l.id,_n.vertexBuffer,_n.indexBuffer,_n.segments)}}function NA(b,t,l,f){const g={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(l===0||f)return g;if(b.fadingParentID){const B=t.getLoadedTile(b.fadingParentID);if(!B)return g;const E=Math.pow(2,B.tileID.overscaledZ-b.tileID.overscaledZ),L=[b.tileID.canonical.x*E%1,b.tileID.canonical.y*E%1],N=(function(H,G,$){const Y=ie(),se=(Y-G.timeAdded)/$,de=H.fadingDirection===Xe.Incoming,Se=A.an((Y-H.timeAdded)/$,0,1),Me=A.an(1-se,0,1),Ee=de?Se:Me;return{tileOpacity:Ee,parentTileOpacity:de?Me:Se,fadeMix:{opacity:1,mix:1-Ee}}})(b,B,l);return{parentTile:B,parentScaleBy:E,parentTopLeft:L,fadeValues:N}}if(b.selfFading){const B=(function(E,L){const N=(ie()-E.timeAdded)/L,H=A.an(N,0,1);return{tileOpacity:H,fadeMix:{opacity:H,mix:0}}})(b,l);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:B}}return g}const Ro=new A.bp(1,0,0,1),wc=new A.bp(0,1,0,1),lc=new A.bp(0,0,1,1),Xs=new A.bp(1,0,1,1),Cu=new A.bp(0,1,1,1);function nA(b,t,l,f){Ac(b,0,t+l/2,b.transform.width,l,f)}function Ha(b,t,l,f){Ac(b,t-l/2,0,l,b.transform.height,f)}function Ac(b,t,l,f,g,B){const E=b.context,L=E.gl;L.enable(L.SCISSOR_TEST),L.scissor(t*b.pixelRatio,l*b.pixelRatio,f*b.pixelRatio,g*b.pixelRatio),E.clear({color:B}),L.disable(L.SCISSOR_TEST)}function Ih(b,t,l){const f=b.context,g=f.gl,B=b.useProgram("debug"),E=pn.disabled,L=En.disabled,N=b.colorModeForRenderPass(),H="$debug",G=b.style.map.terrain&&b.style.map.terrain.getTerrainData(l);f.activeTexture.set(g.TEXTURE0);const $=t.getTileByID(l.key).latestRawTileData,Y=Math.floor(($&&$.byteLength||0)/1024),se=t.getTile(l).tileSize,de=512/Math.min(se,512)*(l.overscaledZ/b.transform.zoom)*.5;let Se=l.canonical.toString();l.overscaledZ!==l.canonical.z&&(Se+=` => ${l.overscaledZ}`),(function(Ee,je){Ee.initDebugOverlayCanvas();const et=Ee.debugOverlayCanvas,ze=Ee.context.gl,nt=Ee.debugOverlayCanvas.getContext("2d");nt.clearRect(0,0,et.width,et.height),nt.shadowColor="white",nt.shadowBlur=2,nt.lineWidth=1.5,nt.strokeStyle="white",nt.textBaseline="top",nt.font="bold 36px Open Sans, sans-serif",nt.fillText(je,5,5),nt.strokeText(je,5,5),Ee.debugOverlayTexture.update(et),Ee.debugOverlayTexture.bind(ze.LINEAR,ze.CLAMP_TO_EDGE)})(b,`${Se} ${Y}kB`);const Me=b.transform.getProjectionData({overscaledTileID:l,applyGlobeMatrix:!0,applyTerrainMatrix:!0});B.draw(f,g.TRIANGLES,E,L,Xn.alphaBlended,In.disabled,qs(A.bp.transparent,de),null,Me,H,b.debugBuffer,b.quadTriangleIndexBuffer,b.debugSegments),B.draw(f,g.LINE_STRIP,E,L,N,In.disabled,qs(A.bp.red),G,Me,H,b.debugBuffer,b.tileBorderIndexBuffer,b.debugSegments)}function Lh(b,t,l,f){const{isRenderingGlobe:g}=f,B=b.context,E=B.gl,L=b.transform,N=b.colorModeForRenderPass(),H=b.getDepthModeFor3D(),G=b.useProgram("terrain");B.bindFramebuffer.set(null),B.viewport.set([0,0,b.width,b.height]);for(const $ of l){const Y=t.getTerrainMesh($.tileID),se=b.renderToTexture.getTexture($),de=t.getTerrainData($.tileID);B.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,se.texture);const Se=t.getMeshFrameDelta(L.zoom),Me=L.calculateFogMatrix($.tileID.toUnwrapped()),Ee=Hs(Se,Me,b.style.sky,L.pitch,g),je=L.getProjectionData({overscaledTileID:$.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});G.draw(B,E.TRIANGLES,H,En.disabled,N,In.backCCW,Ee,de,je,"terrain",Y.vertexBuffer,Y.indexBuffer,Y.segments)}}function Mh(b,t){if(!t.mesh){const l=new A.aW;l.emplaceBack(-1,-1),l.emplaceBack(1,-1),l.emplaceBack(1,1),l.emplaceBack(-1,1);const f=new A.aY;f.emplaceBack(0,1,2),f.emplaceBack(0,2,3),t.mesh=new Za(b.createVertexBuffer(l,jn.members),b.createIndexBuffer(f),A.aX.simpleSegment(0,0,l.length,f.length))}return t.mesh}class uf{constructor(t,l){this.context=new Fs(t),this.transform=l,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:A.ar(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Jt.maxOverzooming+Jt.maxUnderzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Rr}resize(t,l,f){if(this.width=Math.floor(t*f),this.height=Math.floor(l*f),this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const g of this.style._order)this.style._layers[g].resize()}setup(){const t=this.context,l=new A.aW;l.emplaceBack(0,0),l.emplaceBack(A.a5,0),l.emplaceBack(0,A.a5),l.emplaceBack(A.a5,A.a5),this.tileExtentBuffer=t.createVertexBuffer(l,jn.members),this.tileExtentSegments=A.aX.simpleSegment(0,0,4,2);const f=new A.aW;f.emplaceBack(0,0),f.emplaceBack(A.a5,0),f.emplaceBack(0,A.a5),f.emplaceBack(A.a5,A.a5),this.debugBuffer=t.createVertexBuffer(f,jn.members),this.debugSegments=A.aX.simpleSegment(0,0,4,5);const g=new A.ch;g.emplaceBack(0,0,0,0),g.emplaceBack(A.a5,0,A.a5,0),g.emplaceBack(0,A.a5,0,A.a5),g.emplaceBack(A.a5,A.a5,A.a5,A.a5),this.rasterBoundsBuffer=t.createVertexBuffer(g,wl.members),this.rasterBoundsSegments=A.aX.simpleSegment(0,0,4,2);const B=new A.aW;B.emplaceBack(0,0),B.emplaceBack(A.a5,0),B.emplaceBack(0,A.a5),B.emplaceBack(A.a5,A.a5),this.rasterBoundsBufferPosOnly=t.createVertexBuffer(B,jn.members),this.rasterBoundsSegmentsPosOnly=A.aX.simpleSegment(0,0,4,5);const E=new A.aW;E.emplaceBack(0,0),E.emplaceBack(1,0),E.emplaceBack(0,1),E.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(E,jn.members),this.viewportSegments=A.aX.simpleSegment(0,0,4,2);const L=new A.ci;L.emplaceBack(0),L.emplaceBack(1),L.emplaceBack(3),L.emplaceBack(2),L.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(L);const N=new A.aY;N.emplaceBack(1,0,2),N.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(N);const H=this.context.gl;this.stencilClearMode=new En({func:H.ALWAYS,mask:0},0,255,H.ZERO,H.ZERO,H.ZERO),this.tileExtentMesh=new Za(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const t=this.context,l=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const f=A.N();A.c7(f,0,this.width,this.height,0,0,1),A.Q(f,f,[l.drawingBufferWidth,l.drawingBufferHeight,0]);const g={mainMatrix:f,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:f};this.useProgram("clippingMask",null,!0).draw(t,l.TRIANGLES,pn.disabled,this.stencilClearMode,Xn.disabled,In.disabled,null,null,g,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,l,f){if(this.currentStencilSource===t.source||!t.isTileClipped()||!l||!l.length)return;this.currentStencilSource=t.source,this.nextStencilID+l.length>256&&this.clearStencil();const g=this.context;g.setColorMode(Xn.disabled),g.setDepthMode(pn.disabled);const B={};for(const E of l)B[E.key]=this.nextStencilID++;this._renderTileMasks(B,l,f,!0),this._renderTileMasks(B,l,f,!1),this._tileClippingMaskIDs=B}_renderTileMasks(t,l,f,g){const B=this.context,E=B.gl,L=this.style.projection,N=this.transform,H=this.useProgram("clippingMask");for(const G of l){const $=t[G.key],Y=this.style.map.terrain&&this.style.map.terrain.getTerrainData(G),se=L.getMeshFromTileID(this.context,G.canonical,g,!0,"stencil"),de=N.getProjectionData({overscaledTileID:G,applyGlobeMatrix:!f,applyTerrainMatrix:!0});H.draw(B,E.TRIANGLES,pn.disabled,new En({func:E.ALWAYS,mask:0},$,255,E.KEEP,E.KEEP,E.REPLACE),Xn.disabled,f?In.disabled:In.backCCW,null,Y,de,"$clipping",se.vertexBuffer,se.indexBuffer,se.segments)}}_renderTilesDepthBuffer(){const t=this.context,l=t.gl,f=this.style.projection,g=this.transform,B=this.useProgram("depth"),E=this.getDepthModeFor3D(),L=Kn(g,{tileSize:g.tileSize});for(const N of L){const H=this.style.map.terrain&&this.style.map.terrain.getTerrainData(N),G=f.getMeshFromTileID(this.context,N.canonical,!0,!0,"raster"),$=g.getProjectionData({overscaledTileID:N,applyGlobeMatrix:!0,applyTerrainMatrix:!0});B.draw(t,l.TRIANGLES,E,En.disabled,Xn.disabled,In.backCCW,null,H,$,"$clipping",G.vertexBuffer,G.indexBuffer,G.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,l=this.context.gl;return new En({func:l.NOTEQUAL,mask:255},t,255,l.KEEP,l.KEEP,l.REPLACE)}stencilModeForClipping(t){const l=this.context.gl;return new En({func:l.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,l.KEEP,l.KEEP,l.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(t){const l=this.context.gl,f=t.sort(((E,L)=>L.overscaledZ-E.overscaledZ)),g=f[f.length-1].overscaledZ,B=f[0].overscaledZ-g+1;if(B>1){this.currentStencilSource=void 0,this.nextStencilID+B>256&&this.clearStencil();const E={};for(let L=0;L<B;L++)E[L+g]=new En({func:l.GEQUAL,mask:255},L+this.nextStencilID,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID+=B,[E,f]}return[{[g]:En.disabled},f]}stencilConfigForOverlapTwoPass(t){const l=this.context.gl,f=t.sort(((E,L)=>L.overscaledZ-E.overscaledZ)),g=f[f.length-1].overscaledZ,B=f[0].overscaledZ-g+1;if(this.clearStencil(),B>1){const E={},L={};for(let N=0;N<B;N++)E[N+g]=new En({func:l.GREATER,mask:255},B+1+N,255,l.KEEP,l.KEEP,l.REPLACE),L[N+g]=new En({func:l.GREATER,mask:255},1+N,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID=2*B+1,[E,L,f]}return this.nextStencilID=3,[{[g]:new En({func:l.GREATER,mask:255},2,255,l.KEEP,l.KEEP,l.REPLACE)},{[g]:new En({func:l.GREATER,mask:255},1,255,l.KEEP,l.KEEP,l.REPLACE)},f]}colorModeForRenderPass(){const t=this.context.gl;return this._showOverdrawInspector?new Xn([t.CONSTANT_COLOR,t.ONE],new A.bp(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Xn.unblended:Xn.alphaBlended}getDepthModeForSublayer(t,l,f){if(!this.opaquePassEnabledForLayer())return pn.disabled;const g=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new pn(f||this.context.gl.LEQUAL,l,[g,g])}getDepthModeFor3D(){return new pn(this.context.gl.LEQUAL,pn.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,l){var f,g;this.style=t,this.options=l,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(ie()),this.imageManager.beginFrame();const B=this.style._order,E=this.style.tileManagers,L={},N={},H={},G={isRenderingToTexture:!1,isRenderingGlobe:((f=t.projection)===null||f===void 0?void 0:f.transitionState)>0};for(const Y in E){const se=E[Y];se.used&&se.prepare(this.context),L[Y]=se.getVisibleCoordinates(!1),N[Y]=L[Y].slice().reverse(),H[Y]=se.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Y=0;Y<B.length;Y++)if(this.style._layers[B[Y]].is3D()){this.opaquePassCutoff=Y;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const Y of B){const se=this.style._layers[Y];if(!se.hasOffscreenPass()||se.isHidden(this.transform.zoom))continue;const de=N[se.source];(se.type==="custom"||de.length)&&this.renderLayer(this,E[se.source],se,de,G)}if((g=this.style.projection)===null||g===void 0||g.updateGPUdependent({context:this.context,useProgram:Y=>this.useProgram(Y)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:l.showOverdrawInspector?A.bp.black:A.bp.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(Y,se){const de=Y.context,Se=de.gl,Me=((at,$e,gt)=>{const Nt=Math.cos($e.rollInRadians),Dt=Math.sin($e.rollInRadians),It=Bt($e),Qt=$e.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:at.properties.get("sky-color"),u_horizon_color:at.properties.get("horizon-color"),u_horizon:[($e.width/2-It*Dt)*gt,($e.height/2+It*Nt)*gt],u_horizon_normal:[-Dt,Nt],u_sky_horizon_blend:at.properties.get("sky-horizon-blend")*$e.height/2*gt,u_sky_blend:Qt}})(se,Y.style.map.transform,Y.pixelRatio),Ee=new pn(Se.LEQUAL,pn.ReadWrite,[0,1]),je=En.disabled,et=Y.colorModeForRenderPass(),ze=Y.useProgram("sky"),nt=Mh(de,se);ze.draw(de,Se.TRIANGLES,Ee,je,et,In.disabled,Me,null,void 0,"sky",nt.vertexBuffer,nt.indexBuffer,nt.segments)})(this,this.style.sky),this._showOverdrawInspector=l.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=B.length-1;this.currentLayer>=0;this.currentLayer--){const Y=this.style._layers[B[this.currentLayer]],se=E[Y.source],de=L[Y.source];this._renderTileClippingMasks(Y,de,!1),this.renderLayer(this,se,Y,de,G)}this.renderPass="translucent";let $=!1;for(this.currentLayer=0;this.currentLayer<B.length;this.currentLayer++){const Y=this.style._layers[B[this.currentLayer]],se=E[Y.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(Y,G))continue;this.opaquePassEnabledForLayer()||$||($=!0,G.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const de=(Y.type==="symbol"?H:N)[Y.source];this._renderTileClippingMasks(Y,L[Y.source],!!this.renderToTexture),this.renderLayer(this,se,Y,de,G)}if(G.isRenderingGlobe&&(function(Y,se,de){const Se=Y.context,Me=Se.gl,Ee=Y.useProgram("atmosphere"),je=new pn(Me.LEQUAL,pn.ReadOnly,[0,1]),et=Y.transform,ze=(function(Qt,cr){const fr=Qt.properties.get("position"),Ht=[-fr.x,-fr.y,-fr.z],Tr=A.ar(new Float64Array(16));return Qt.properties.get("anchor")==="map"&&(A.bg(Tr,Tr,cr.rollInRadians),A.bh(Tr,Tr,-cr.pitchInRadians),A.bg(Tr,Tr,cr.bearingInRadians),A.bh(Tr,Tr,cr.center.lat*Math.PI/180),A.bJ(Tr,Tr,-cr.center.lng*Math.PI/180)),A.cg(Ht,Ht,Tr),Ht})(de,Y.transform),nt=et.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),at=se.properties.get("atmosphere-blend")*nt.projectionTransition;if(at===0)return;const $e=un(et.worldSize,et.center.lat),gt=et.inverseProjectionMatrix,Nt=new Float64Array(4);Nt[3]=1,A.aH(Nt,Nt,et.modelViewProjectionMatrix),Nt[0]/=Nt[3],Nt[1]/=Nt[3],Nt[2]/=Nt[3],Nt[3]=1,A.aH(Nt,Nt,gt),Nt[0]/=Nt[3],Nt[1]/=Nt[3],Nt[2]/=Nt[3],Nt[3]=1;const Dt=((Qt,cr,fr,Ht,Tr)=>({u_sun_pos:Qt,u_atmosphere_blend:cr,u_globe_position:fr,u_globe_radius:Ht,u_inv_proj_matrix:Tr}))(ze,at,[Nt[0],Nt[1],Nt[2]],$e,gt),It=Mh(Se,se);Ee.draw(Se,Me.TRIANGLES,je,En.disabled,Xn.alphaBlended,In.disabled,Dt,null,null,"atmosphere",It.vertexBuffer,It.indexBuffer,It.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const Y=(function(se,de){let Se=null;const Me=Object.values(se._layers).flatMap((ze=>ze.source&&!ze.isHidden(de)?[se.tileManagers[ze.source]]:[])),Ee=Me.filter((ze=>ze.getSource().type==="vector")),je=Me.filter((ze=>ze.getSource().type!=="vector")),et=ze=>{(!Se||Se.getSource().maxzoom<ze.getSource().maxzoom)&&(Se=ze)};return Ee.forEach((ze=>et(ze))),Se||je.forEach((ze=>et(ze))),Se})(this.style,this.transform.zoom);Y&&(function(se,de,Se){for(let Me=0;Me<Se.length;Me++)Ih(se,de,Se[Me])})(this,Y,Y.getVisibleCoordinates())}this.options.showPadding&&(function(Y){const se=Y.transform.padding;nA(Y,Y.transform.height-(se.top||0),3,Ro),nA(Y,se.bottom||0,3,wc),Ha(Y,se.left||0,3,lc),Ha(Y,Y.transform.width-(se.right||0),3,Xs);const de=Y.transform.centerPoint;(function(Se,Me,Ee,je){Ac(Se,Me-1,Ee-10,2,20,je),Ac(Se,Me-10,Ee-1,20,2,je)})(Y,de.x,Y.transform.height-de.y,Cu)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(t){if(!this.style||!this.style.map||!this.style.map.terrain)return;const l=this.terrainFacilitator.matrix,f=this.transform.modelViewProjectionMatrix;let g=this.terrainFacilitator.dirty;g||(g=t?!A.cj(l,f):!A.ck(l,f)),g||(g=this.style.map.terrain.tileManager.anyTilesAfterTime(this.terrainFacilitator.renderTime)),g&&(A.cl(l,f),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(B,E){const L=B.context,N=L.gl,H=B.transform,G=Xn.unblended,$=new pn(N.LEQUAL,pn.ReadWrite,[0,1]),Y=E.tileManager.getRenderableTiles(),se=B.useProgram("terrainDepth");L.bindFramebuffer.set(E.getFramebuffer("depth").framebuffer),L.viewport.set([0,0,B.width/devicePixelRatio,B.height/devicePixelRatio]),L.clear({color:A.bp.transparent,depth:1});for(const de of Y){const Se=E.getTerrainMesh(de.tileID),Me=E.getTerrainData(de.tileID),Ee=H.getProjectionData({overscaledTileID:de.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),je={u_ele_delta:E.getMeshFrameDelta(H.zoom)};se.draw(L,N.TRIANGLES,$,En.disabled,G,In.backCCW,je,Me,Ee,"terrain",Se.vertexBuffer,Se.indexBuffer,Se.segments)}L.bindFramebuffer.set(null),L.viewport.set([0,0,B.width,B.height])})(this,this.style.map.terrain),(function(B,E){const L=B.context,N=L.gl,H=B.transform,G=Xn.unblended,$=new pn(N.LEQUAL,pn.ReadWrite,[0,1]),Y=E.getCoordsTexture(),se=E.tileManager.getRenderableTiles(),de=B.useProgram("terrainCoords");L.bindFramebuffer.set(E.getFramebuffer("coords").framebuffer),L.viewport.set([0,0,B.width/devicePixelRatio,B.height/devicePixelRatio]),L.clear({color:A.bp.transparent,depth:1}),E.coordsIndex=[];for(const Se of se){const Me=E.getTerrainMesh(Se.tileID),Ee=E.getTerrainData(Se.tileID);L.activeTexture.set(N.TEXTURE0),N.bindTexture(N.TEXTURE_2D,Y.texture);const je={u_terrain_coords_id:(255-E.coordsIndex.length)/255,u_texture:0,u_ele_delta:E.getMeshFrameDelta(H.zoom)},et=H.getProjectionData({overscaledTileID:Se.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});de.draw(L,N.TRIANGLES,$,En.disabled,G,In.backCCW,je,Ee,et,"terrain",Me.vertexBuffer,Me.indexBuffer,Me.segments),E.coordsIndex.push(Se.tileID.key)}L.bindFramebuffer.set(null),L.viewport.set([0,0,B.width,B.height])})(this,this.style.map.terrain))}renderLayer(t,l,f,g,B){f.isHidden(this.transform.zoom)||(f.type==="background"||f.type==="custom"||(g||[]).length)&&(this.id=f.id,A.cm(f)?(function(E,L,N,H,G,$){if(E.renderPass!=="translucent")return;const{isRenderingToTexture:Y}=$,se=En.disabled,de=E.colorModeForRenderPass();(N._unevaluatedLayout.hasValue("text-variable-anchor")||N._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(Se,Me,Ee,je,et,ze,nt,at,$e){const gt=Me.transform,Nt=Me.style.map.terrain,Dt=et==="map",It=ze==="map";for(const Qt of Se){const cr=je.getTile(Qt),fr=cr.getBucket(Ee);if(!fr||!fr.text||!fr.text.segments.get().length)continue;const Ht=A.ay(fr.textSizeData,gt.zoom),Tr=A.aN(cr,1,Me.transform.zoom),_n=Ko(Dt,Me.transform,Tr),fi=Ee.layout.get("icon-text-fit")!=="none"&&fr.hasIconData();if(Ht){const Ri=Math.pow(2,gt.zoom-cr.tileID.overscaledZ),Mi=Nt?(zi,vi)=>Nt.getElevation(Qt,zi,vi):null;Fh(fr,Dt,It,$e,gt,_n,Ri,Ht,fi,A.aO(gt,cr,nt,at),Qt.toUnwrapped(),Mi)}}})(H,E,N,L,N.layout.get("text-rotation-alignment"),N.layout.get("text-pitch-alignment"),N.paint.get("text-translate"),N.paint.get("text-translate-anchor"),G),N.paint.get("icon-opacity").constantOr(1)!==0&&bc(E,L,N,H,!1,N.paint.get("icon-translate"),N.paint.get("icon-translate-anchor"),N.layout.get("icon-rotation-alignment"),N.layout.get("icon-pitch-alignment"),N.layout.get("icon-keep-upright"),se,de,Y),N.paint.get("text-opacity").constantOr(1)!==0&&bc(E,L,N,H,!0,N.paint.get("text-translate"),N.paint.get("text-translate-anchor"),N.layout.get("text-rotation-alignment"),N.layout.get("text-pitch-alignment"),N.layout.get("text-keep-upright"),se,de,Y),L.map.showCollisionBoxes&&(Ll(E,L,N,H,!0),Ll(E,L,N,H,!1))})(t,l,f,g,this.style.placement.variableOffsets,B):A.cn(f)?(function(E,L,N,H,G){if(E.renderPass!=="translucent")return;const{isRenderingToTexture:$}=G,Y=N.paint.get("circle-opacity"),se=N.paint.get("circle-stroke-width"),de=N.paint.get("circle-stroke-opacity"),Se=!N.layout.get("circle-sort-key").isConstant();if(Y.constantOr(1)===0&&(se.constantOr(1)===0||de.constantOr(1)===0))return;const Me=E.context,Ee=Me.gl,je=E.transform,et=E.getDepthModeForSublayer(0,pn.ReadOnly),ze=En.disabled,nt=E.colorModeForRenderPass(),at=[],$e=je.getCircleRadiusCorrection();for(let gt=0;gt<H.length;gt++){const Nt=H[gt],Dt=L.getTile(Nt),It=Dt.getBucket(N);if(!It)continue;const Qt=N.paint.get("circle-translate"),cr=N.paint.get("circle-translate-anchor"),fr=A.aO(je,Dt,Qt,cr),Ht=It.programConfigurations.get(N.id),Tr=E.useProgram("circle",Ht),_n=It.layoutVertexBuffer,fi=It.indexBuffer,Ri=E.style.map.terrain&&E.style.map.terrain.getTerrainData(Nt),Mi={programConfiguration:Ht,program:Tr,layoutVertexBuffer:_n,indexBuffer:fi,uniformValues:Ao(E,Dt,N,fr,$e),terrainData:Ri,projectionData:je.getProjectionData({overscaledTileID:Nt,applyGlobeMatrix:!$,applyTerrainMatrix:!0})};if(Se){const zi=It.segments.get();for(const vi of zi)at.push({segments:new A.aX([vi]),sortKey:vi.sortKey,state:Mi})}else at.push({segments:It.segments,sortKey:0,state:Mi})}Se&&at.sort(((gt,Nt)=>gt.sortKey-Nt.sortKey));for(const gt of at){const{programConfiguration:Nt,program:Dt,layoutVertexBuffer:It,indexBuffer:Qt,uniformValues:cr,terrainData:fr,projectionData:Ht}=gt.state;Dt.draw(Me,Ee.TRIANGLES,et,ze,nt,In.backCCW,cr,fr,Ht,N.id,It,Qt,gt.segments,N.paint,E.transform.zoom,Nt)}})(t,l,f,g,B):A.co(f)?(function(E,L,N,H,G){if(N.paint.get("heatmap-opacity")===0)return;const $=E.context,{isRenderingToTexture:Y,isRenderingGlobe:se}=G;if(E.style.map.terrain){for(const de of H){const Se=L.getTile(de);L.hasRenderableParent(de)||(E.renderPass==="offscreen"?Ya(E,Se,N,de,se):E.renderPass==="translucent"&&Si(E,N,de,Y,se))}$.viewport.set([0,0,E.width,E.height])}else E.renderPass==="offscreen"?(function(de,Se,Me,Ee){const je=de.context,et=je.gl,ze=de.transform,nt=En.disabled,at=new Xn([et.ONE,et.ONE],A.bp.transparent,[!0,!0,!0,!0]);(function($e,gt,Nt){const Dt=$e.gl;$e.activeTexture.set(Dt.TEXTURE1),$e.viewport.set([0,0,gt.width/4,gt.height/4]);let It=Nt.heatmapFbos.get(A.cd);It?(Dt.bindTexture(Dt.TEXTURE_2D,It.colorAttachment.get()),$e.bindFramebuffer.set(It.framebuffer)):(It=kn($e,gt.width/4,gt.height/4),Nt.heatmapFbos.set(A.cd,It))})(je,de,Me),je.clear({color:A.bp.transparent});for(let $e=0;$e<Ee.length;$e++){const gt=Ee[$e];if(Se.hasRenderableParent(gt))continue;const Nt=Se.getTile(gt),Dt=Nt.getBucket(Me);if(!Dt)continue;const It=Dt.programConfigurations.get(Me.id),Qt=de.useProgram("heatmap",It),cr=ze.getProjectionData({overscaledTileID:gt,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),fr=ze.getCircleRadiusCorrection();Qt.draw(je,et.TRIANGLES,pn.disabled,nt,at,In.backCCW,Cl(Nt,ze.zoom,Me.paint.get("heatmap-intensity"),fr),null,cr,Me.id,Dt.layoutVertexBuffer,Dt.indexBuffer,Dt.segments,Me.paint,ze.zoom,It)}je.viewport.set([0,0,de.width,de.height])})(E,L,N,H):E.renderPass==="translucent"&&(function(de,Se){const Me=de.context,Ee=Me.gl;Me.setColorMode(de.colorModeForRenderPass());const je=Se.heatmapFbos.get(A.cd);je&&(Me.activeTexture.set(Ee.TEXTURE0),Ee.bindTexture(Ee.TEXTURE_2D,je.colorAttachment.get()),Me.activeTexture.set(Ee.TEXTURE1),Ls(Me,Se).bind(Ee.LINEAR,Ee.CLAMP_TO_EDGE),de.useProgram("heatmapTexture").draw(Me,Ee.TRIANGLES,pn.disabled,En.disabled,de.colorModeForRenderPass(),In.disabled,Po(de,Se,0,1),null,null,Se.id,de.viewportBuffer,de.quadTriangleIndexBuffer,de.viewportSegments,Se.paint,de.transform.zoom))})(E,N)})(t,l,f,g,B):A.cp(f)?(function(E,L,N,H,G){if(E.renderPass!=="translucent")return;const{isRenderingToTexture:$}=G,Y=N.paint.get("line-opacity"),se=N.paint.get("line-width");if(Y.constantOr(1)===0||se.constantOr(1)===0)return;const de=E.getDepthModeForSublayer(0,pn.ReadOnly),Se=E.colorModeForRenderPass(),Me=N.paint.get("line-dasharray"),Ee=Me.constantOr(1),je=N.paint.get("line-pattern"),et=je.constantOr(1),ze=N.paint.get("line-gradient"),nt=N.getCrossfadeParameters();let at;at=et?"linePattern":Ee&&ze?"lineGradientSDF":Ee?"lineSDF":ze?"lineGradient":"line";const $e=E.context,gt=$e.gl,Nt=E.transform;let Dt=!0;for(const It of H){const Qt=L.getTile(It);if(et&&!Qt.patternsLoaded())continue;const cr=Qt.getBucket(N);if(!cr)continue;const fr=cr.programConfigurations.get(N.id),Ht=E.context.program.get(),Tr=E.useProgram(at,fr),_n=Dt||Tr.program!==Ht,fi=E.style.map.terrain&&E.style.map.terrain.getTerrainData(It),Ri=je.constantOr(null),Mi=Me&&Me.constantOr(null);if(Ri&&Qt.imageAtlas){const ps=Qt.imageAtlas,ga=ps.patternPositions[Ri.to.toString()],ya=ps.patternPositions[Ri.from.toString()];ga&&ya&&fr.setConstantPatternPositions(ga,ya)}else if(Mi){const ps=N.layout.get("line-cap")==="round",ga=E.lineAtlas.getDash(Mi.to,ps),ya=E.lineAtlas.getDash(Mi.from,ps);fr.setConstantDashPositions(ga,ya)}const zi=Nt.getProjectionData({overscaledTileID:It,applyGlobeMatrix:!$,applyTerrainMatrix:!0}),vi=Nt.getPixelScale();let Va;et?(Va=Xa(E,Qt,N,vi,nt),ci($e,gt,Qt,fr,nt)):Ee&&ze?(Va=uo(E,Qt,N,vi,nt,cr.lineClipsArray.length),Ml(E,L,$e,gt,N,cr,It,fr,nt)):Ee?(Va=el(E,Qt,N,vi,nt),mo(E,$e,gt,fr,_n,nt)):ze?(Va=Jo(E,Qt,N,vi,cr.lineClipsArray.length),Zs(E,L,$e,gt,N,cr,It)):Va=co(E,Qt,N,vi);const sa=E.stencilModeForClipping(It);Tr.draw($e,gt.TRIANGLES,de,sa,Se,In.disabled,Va,fi,zi,N.id,cr.layoutVertexBuffer,cr.indexBuffer,cr.segments,N.paint,E.transform.zoom,fr,cr.layoutVertexBuffer2),Dt=!1}})(t,l,f,g,B):A.cq(f)?(function(E,L,N,H,G){const $=N.paint.get("fill-color"),Y=N.paint.get("fill-opacity");if(Y.constantOr(1)===0)return;const{isRenderingToTexture:se}=G,de=E.colorModeForRenderPass(),Se=N.paint.get("fill-pattern"),Me=E.opaquePassEnabledForLayer()&&!Se.constantOr(1)&&$.constantOr(A.bp.transparent).a===1&&Y.constantOr(0)===1?"opaque":"translucent";if(E.renderPass===Me){const Ee=E.getDepthModeForSublayer(1,E.renderPass==="opaque"?pn.ReadWrite:pn.ReadOnly);PA(E,L,N,H,Ee,de,!1,se)}if(E.renderPass==="translucent"&&N.paint.get("fill-antialias")){const Ee=E.getDepthModeForSublayer(N.getPaintProperty("fill-outline-color")?2:0,pn.ReadOnly);PA(E,L,N,H,Ee,de,!0,se)}})(t,l,f,g,B):A.cr(f)?(function(E,L,N,H,G){const $=N.paint.get("fill-extrusion-opacity");if($===0)return;const{isRenderingToTexture:Y}=G;if(E.renderPass==="translucent"){const se=new pn(E.context.gl.LEQUAL,pn.ReadWrite,E.depthRangeFor3D);if($!==1||N.paint.get("fill-extrusion-pattern").constantOr(1))eA(E,L,N,H,se,En.disabled,Xn.disabled,Y),eA(E,L,N,H,se,E.stencilModeFor3D(),E.colorModeForRenderPass(),Y);else{const de=E.colorModeForRenderPass();eA(E,L,N,H,se,En.disabled,de,Y)}}})(t,l,f,g,B):A.cs(f)?(function(E,L,N,H,G){if(E.renderPass!=="offscreen"&&E.renderPass!=="translucent")return;const{isRenderingToTexture:$}=G,Y=E.context,se=E.style.projection.useSubdivision,de=E.getDepthModeForSublayer(0,pn.ReadOnly),Se=E.colorModeForRenderPass();if(E.renderPass==="offscreen")(function(Me,Ee,je,et,ze,nt,at){const $e=Me.context,gt=$e.gl;for(const Nt of je){const Dt=Ee.getTile(Nt),It=Dt.dem;if(!It||!It.data||!Dt.needsHillshadePrepare)continue;const Qt=It.dim,cr=It.stride,fr=It.getPixels();if($e.activeTexture.set(gt.TEXTURE1),$e.pixelStoreUnpackPremultiplyAlpha.set(!1),Dt.demTexture=Dt.demTexture||Me.getTileTexture(cr),Dt.demTexture){const Tr=Dt.demTexture;Tr.update(fr,{premultiply:!1}),Tr.bind(gt.NEAREST,gt.CLAMP_TO_EDGE)}else Dt.demTexture=new A.T($e,fr,gt.RGBA,{premultiply:!1}),Dt.demTexture.bind(gt.NEAREST,gt.CLAMP_TO_EDGE);$e.activeTexture.set(gt.TEXTURE0);let Ht=Dt.fbo;if(!Ht){const Tr=new A.T($e,{width:Qt,height:Qt,data:null},gt.RGBA);Tr.bind(gt.LINEAR,gt.CLAMP_TO_EDGE),Ht=Dt.fbo=$e.createFramebuffer(Qt,Qt,!0,!1),Ht.colorAttachment.set(Tr.texture)}$e.bindFramebuffer.set(Ht.framebuffer),$e.viewport.set([0,0,Qt,Qt]),Me.useProgram("hillshadePrepare").draw($e,gt.TRIANGLES,ze,nt,at,In.disabled,jc(Dt.tileID,It),null,null,et.id,Me.rasterBoundsBuffer,Me.quadTriangleIndexBuffer,Me.rasterBoundsSegments),Dt.needsHillshadePrepare=!1}})(E,L,H,N,de,En.disabled,Se),Y.viewport.set([0,0,E.width,E.height]);else if(E.renderPass==="translucent")if(se){const[Me,Ee,je]=E.stencilConfigForOverlapTwoPass(H);tA(E,L,N,je,Me,de,Se,!1,$),tA(E,L,N,je,Ee,de,Se,!0,$)}else{const[Me,Ee]=E.getStencilConfigForOverlapAndUpdateStencilID(H);tA(E,L,N,Ee,Me,de,Se,!1,$)}})(t,l,f,g,B):A.ct(f)?(function(E,L,N,H,G){if(E.renderPass!=="translucent"||!H.length)return;const{isRenderingToTexture:$}=G,Y=E.style.projection.useSubdivision,se=E.getDepthModeForSublayer(0,pn.ReadOnly),de=E.colorModeForRenderPass();if(Y){const[Se,Me,Ee]=E.stencilConfigForOverlapTwoPass(H);rA(E,L,N,Ee,Se,se,de,!1,$),rA(E,L,N,Ee,Me,se,de,!0,$)}else{const[Se,Me]=E.getStencilConfigForOverlapAndUpdateStencilID(H);rA(E,L,N,Me,Se,se,de,!1,$)}})(t,l,f,g,B):A.bU(f)?(function(E,L,N,H,G){if(E.renderPass!=="translucent"||N.paint.get("raster-opacity")===0||!H.length)return;const{isRenderingToTexture:$}=G,Y=L.getSource(),se=E.style.projection.useSubdivision;if(Y instanceof An)go(E,L,N,H,null,!1,!1,Y.tileCoords,Y.flippedWindingOrder,$);else if(se){const[de,Se,Me]=E.stencilConfigForOverlapTwoPass(H);go(E,L,N,Me,de,!1,!0,il,!1,$),go(E,L,N,Me,Se,!0,!0,il,!1,$)}else{const[de,Se]=E.getStencilConfigForOverlapAndUpdateStencilID(H);go(E,L,N,Se,de,!1,!0,il,!1,$)}})(t,l,f,g,B):A.cu(f)?(function(E,L,N,H,G){const $=N.paint.get("background-color"),Y=N.paint.get("background-opacity");if(Y===0)return;const{isRenderingToTexture:se}=G,de=E.context,Se=de.gl,Me=E.style.projection,Ee=E.transform,je=Ee.tileSize,et=N.paint.get("background-pattern");if(E.isPatternMissing(et))return;const ze=!et&&$.a===1&&Y===1&&E.opaquePassEnabledForLayer()?"opaque":"translucent";if(E.renderPass!==ze)return;const nt=En.disabled,at=E.getDepthModeForSublayer(0,ze==="opaque"?pn.ReadWrite:pn.ReadOnly),$e=E.colorModeForRenderPass(),gt=E.useProgram(et?"backgroundPattern":"background"),Nt=H||Kn(Ee,{tileSize:je,terrain:E.style.map.terrain});et&&(de.activeTexture.set(Se.TEXTURE0),E.imageManager.bind(E.context));const Dt=N.getCrossfadeParameters();for(const It of Nt){const Qt=Ee.getProjectionData({overscaledTileID:It,applyGlobeMatrix:!se,applyTerrainMatrix:!0}),cr=et?rl(Y,E,et,{tileID:It,tileSize:je},Dt):Cs(Y,$),fr=E.style.map.terrain&&E.style.map.terrain.getTerrainData(It),Ht=Me.getMeshFromTileID(de,It.canonical,!1,!0,"raster");gt.draw(de,Se.TRIANGLES,at,nt,$e,In.backCCW,cr,fr,Qt,N.id,Ht.vertexBuffer,Ht.indexBuffer,Ht.segments)}})(t,0,f,g,B):A.cv(f)&&(function(E,L,N,H){const{isRenderingGlobe:G}=H,$=E.context,Y=N.implementation,se=E.style.projection,de=E.transform,Se=de.getProjectionDataForCustomLayer(G),Me={farZ:de.farZ,nearZ:de.nearZ,fov:de.fov*Math.PI/180,modelViewProjectionMatrix:de.modelViewProjectionMatrix,projectionMatrix:de.projectionMatrix,shaderData:{variantName:se.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${se.shaderPreludeCode.vertexSource}`,define:se.shaderDefine},defaultProjectionData:Se},Ee=Y.renderingMode?Y.renderingMode:"2d";if(E.renderPass==="offscreen"){const je=Y.prerender;je&&(E.setCustomLayerDefaults(),$.setColorMode(E.colorModeForRenderPass()),je.call(Y,$.gl,Me),$.setDirty(),E.setBaseState())}else if(E.renderPass==="translucent"){E.setCustomLayerDefaults(),$.setColorMode(E.colorModeForRenderPass()),$.setStencilMode(En.disabled);const je=Ee==="3d"?E.getDepthModeFor3D():E.getDepthModeForSublayer(0,pn.ReadOnly);$.setDepthMode(je),Y.render($.gl,Me),$.setDirty(),E.setBaseState(),$.bindFramebuffer.set(null)}})(t,0,f,B))}saveTileTexture(t){const l=this._tileTextures[t.size[0]];l?l.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const l=this._tileTextures[t];return l&&l.length>0?l.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const l=this.imageManager.getPattern(t.from.toString()),f=this.imageManager.getPattern(t.to.toString());return!l||!f}useProgram(t,l,f=!1,g=[]){this.cache=this.cache||{};const B=!!this.style.map.terrain,E=this.style.projection,L=f?gi.projectionMercator:E.shaderPreludeCode,N=f?fs:E.shaderDefine,H=t+(l?l.cacheKey:"")+`/${f?Ma:E.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(B?"/terrain":"")+(g?`/${g.join("/")}`:"");return this.cache[H]||(this.cache[H]=new kc(this.context,gi[t],l,ni[t],this._showOverdrawInspector,B,L,N,g)),this.cache[H]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new A.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){var t,l;if(this._tileTextures){for(const f in this._tileTextures){const g=this._tileTextures[f];if(g)for(const B of g)B.destroy()}this._tileTextures={}}if(this.tileExtentBuffer&&this.tileExtentBuffer.destroy(),this.debugBuffer&&this.debugBuffer.destroy(),this.rasterBoundsBuffer&&this.rasterBoundsBuffer.destroy(),this.rasterBoundsBufferPosOnly&&this.rasterBoundsBufferPosOnly.destroy(),this.viewportBuffer&&this.viewportBuffer.destroy(),this.tileBorderIndexBuffer&&this.tileBorderIndexBuffer.destroy(),this.quadTriangleIndexBuffer&&this.quadTriangleIndexBuffer.destroy(),this.tileExtentMesh&&((t=this.tileExtentMesh.vertexBuffer)===null||t===void 0||t.destroy()),this.tileExtentMesh&&((l=this.tileExtentMesh.indexBuffer)===null||l===void 0||l.destroy()),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.cache){for(const f in this.cache){const g=this.cache[f];g&&g.program&&this.context.gl.deleteProgram(g.program)}this.cache={}}this.context&&this.context.setDefault()}overLimit(){const{drawingBufferWidth:t,drawingBufferHeight:l}=this.context.gl;return this.width!==t||this.height!==l}}function ta(b,t){let l,f=!1,g=null,B=null;const E=()=>{g=null,f&&(b.apply(B,l),g=setTimeout(E,t),f=!1)};return(...L)=>(f=!0,B=this,l=L,g||E(),g)}class iA{constructor(t){this._getCurrentHash=()=>{const l=window.location.hash.replace("#","");if(this._hashName){let f;return l.split("&").map((g=>g.split("="))).forEach((g=>{g[0]===this._hashName&&(f=g)})),(f&&f[1]||"").split("/")}return l.split("/")},this._onHashChange=()=>{const l=this._getCurrentHash();if(!this._isValidHash(l))return!1;const f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(l[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:f,pitch:+(l[4]||0)}),!0},this._updateHashUnthrottled=()=>{const l=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,l)},this._removeHash=()=>{const l=this._getCurrentHash();if(l.length===0)return;const f=l.join("/");let g=f;g.split("&").length>0&&(g=g.split("&")[0]),this._hashName&&(g=`${this._hashName}=${f}`);let B=window.location.hash.replace(g,"");B.startsWith("#&")?B=B.slice(0,1)+B.slice(2):B==="#"&&(B="");let E=window.location.href.replace(/(#.+)?$/,B);E=E.replace("&&","&"),window.history.replaceState(window.history.state,null,E)},this._updateHash=ta(this._updateHashUnthrottled,300),this._hashName=t&&encodeURIComponent(t)}addTo(t){return this._map=t,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(t){const l=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,g=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),B=Math.pow(10,g),E=Math.round(l.lng*B)/B,L=Math.round(l.lat*B)/B,N=this._map.getBearing(),H=this._map.getPitch();let G="";if(G+=t?`/${E}/${L}/${f}`:`${f}/${L}/${E}`,(N||H)&&(G+="/"+Math.round(10*N)/10),H&&(G+=`/${Math.round(H)}`),this._hashName){const $=this._hashName;let Y=!1;const se=window.location.hash.slice(1).split("&").map((de=>{const Se=de.split("=")[0];return Se===$?(Y=!0,`${Se}=${G}`):de})).filter((de=>de));return Y||se.push(`${$}=${G}`),`#${se.join("&")}`}return`#${G}`}_isValidHash(t){if(t.length<3||t.some(isNaN))return!1;try{new A.V(+t[2],+t[1])}catch{return!1}const l=+t[0],f=+(t[3]||0),g=+(t[4]||0);return l>=this._map.getMinZoom()&&l<=this._map.getMaxZoom()&&f>=-180&&f<=180&&g>=this._map.getMinPitch()&&g<=this._map.getMaxPitch()}}const aA={linearity:.3,easing:A.cw(0,0,.3,1)},Ms=A.e({deceleration:2500,maxSpeed:1400},aA),yo=A.e({deceleration:20,maxSpeed:1400},aA),F=A.e({deceleration:1e3,maxSpeed:360},aA),U=A.e({deceleration:1e3,maxSpeed:90},aA),q=A.e({deceleration:1e3,maxSpeed:360},aA);class J{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:ie(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,l=ie();for(;t.length>0&&l-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const l={zoom:0,bearing:0,pitch:0,roll:0,pan:new A.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:B}of this._inertiaBuffer)l.zoom+=B.zoomDelta||0,l.bearing+=B.bearingDelta||0,l.pitch+=B.pitchDelta||0,l.roll+=B.rollDelta||0,B.panDelta&&l.pan._add(B.panDelta),B.around&&(l.around=B.around),B.pinchAround&&(l.pinchAround=B.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,g={};if(l.pan.mag()){const B=pe(l.pan.mag(),f,A.e({},Ms,t||{})),E=l.pan.mult(B.amount/l.pan.mag()),L=this._map.cameraHelper.handlePanInertia(E,this._map.transform);g.center=L.easingCenter,g.offset=L.easingOffset,fe(g,B)}if(l.zoom){const B=pe(l.zoom,f,yo),E=A.cx(this._map.transform.zoom+B.amount,this._map.getZoomSnap(),B.amount);g.zoom=E,fe(g,B)}if(l.bearing){const B=pe(l.bearing,f,F);g.bearing=this._map.transform.bearing+A.an(B.amount,-179,179),fe(g,B)}if(l.pitch){const B=pe(l.pitch,f,U);g.pitch=this._map.transform.pitch+B.amount,fe(g,B)}if(l.roll){const B=pe(l.roll,f,q);g.roll=this._map.transform.roll+A.an(B.amount,-179,179),fe(g,B)}if(g.zoom||g.bearing){const B=l.pinchAround===void 0?l.around:l.pinchAround;g.around=B?this._map.unproject(B):this._map.getCenter()}return this.clear(),A.e(g,{noMoveStart:!0})}}function fe(b,t){(!b.duration||b.duration<t.duration)&&(b.duration=t.duration,b.easing=t.easing)}function pe(b,t,l){const{maxSpeed:f,linearity:g,deceleration:B}=l,E=A.an(b*g/(t/1e3),-f,f),L=Math.abs(E)/(B*g);return{easing:l.easing,duration:1e3*L,amount:E*(L/2)}}class ge extends A.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,l,f,g={}){f=f instanceof MouseEvent?f:new MouseEvent(t,f);const B=W.mousePos(l.getCanvas(),f),E=l.unproject(B);super(t,A.e({point:B,lngLat:E,originalEvent:f},g)),this._defaultPrevented=!1,this.target=l}}class we extends A.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,l,f){const g=t==="touchend"?f.changedTouches:f.touches,B=W.touchPos(l.getCanvasContainer(),g),E=B.map((N=>l.unproject(N))),L=B.reduce(((N,H,G,$)=>N.add(H.div($.length))),new A.P(0,0));super(t,{points:B,point:L,lngLats:E,lngLat:l.unproject(L),originalEvent:f}),this._defaultPrevented=!1}}class Pe extends A.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,l,f){super(t,{originalEvent:f}),this._defaultPrevented=!1}}class Ke{constructor(t,l){this._map=t,this._clickTolerance=l.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new Pe(t.type,this._map,t))}mousedown(t,l){return this._mousedownPos=l,this._firePreventable(new ge(t.type,this._map,t))}mouseup(t){this._map.fire(new ge(t.type,this._map,t))}click(t,l){this._mousedownPos&&this._mousedownPos.dist(l)>=this._clickTolerance||this._map.fire(new ge(t.type,this._map,t))}dblclick(t){return this._firePreventable(new ge(t.type,this._map,t))}mouseover(t){this._map.fire(new ge(t.type,this._map,t))}mouseout(t){this._map.fire(new ge(t.type,this._map,t))}touchstart(t){return this._firePreventable(new we(t.type,this._map,t))}touchmove(t){this._map.fire(new we(t.type,this._map,t))}touchend(t){this._map.fire(new we(t.type,this._map,t))}touchcancel(t){this._map.fire(new we(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class yt{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(t){this._map.fire(new ge(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ge("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._ignoreContextMenu||this._map.fire(new ge(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Mt{constructor(t){this._map=t}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(t){return this.transform.screenPointToLocation(A.P.convert(t),this._map.terrain)}}class Oe{constructor(t,l){this._map=t,this._tr=new Mt(t),this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=l.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,l){this.isEnabled()&&t.shiftKey&&t.button===0&&(W.disableDrag(),this._startPos=this._lastPos=l,this._active=!0)}mousemoveWindow(t,l){if(!this._active)return;const f=l;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;const g=this._startPos;this._lastPos=f,this._box||(this._box=W.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",t));const B=Math.min(g.x,f.x),E=Math.max(g.x,f.x),L=Math.min(g.y,f.y),N=Math.max(g.y,f.y);W.setTransform(this._box,`translate(${B}px,${L}px)`),this._box.style.width=E-B+"px",this._box.style.height=N-L+"px"}mouseupWindow(t,l){if(!this._active||t.button!==0)return;const f=this._startPos,g=l;if(this.reset(),W.suppressClick(),f.x!==g.x||f.y!==g.y)return this._map.fire(new A.l("boxzoomend",{originalEvent:t})),{cameraAnimation:B=>B.fitScreenCoordinates(f,g,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",t)}keydown(t){this._active&&t.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(W.remove(this._box),this._box=null),W.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(t,l){return this._map.fire(new A.l(t,{originalEvent:l}))}}function Ze(b,t){if(b.length!==t.length)throw new Error(`The number of touches and points are not equal - touches ${b.length}, points ${t.length}`);const l={};for(let f=0;f<b.length;f++)l[b[f].identifier]=t[f];return l}class Ft{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(t,l,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=t.timeStamp),f.length===this.numTouches&&(this.centroid=(function(g){const B=new A.P(0,0);for(const E of g)B._add(E);return B.div(g.length)})(l),this.touches=Ze(f,l)))}touchmove(t,l,f){if(this.aborted||!this.centroid)return;const g=Ze(f,l);for(const B in this.touches){const E=g[B];(!E||E.dist(this.touches[B])>30)&&(this.aborted=!0)}}touchend(t,l,f){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const g=!this.aborted&&this.centroid;if(this.reset(),g)return g}}}class Zt{constructor(t){this.singleTap=new Ft(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,l,f){this.singleTap.touchstart(t,l,f)}touchmove(t,l,f){this.singleTap.touchmove(t,l,f)}touchend(t,l,f){const g=this.singleTap.touchend(t,l,f);if(g){const B=t.timeStamp-this.lastTime<500,E=!this.lastTap||this.lastTap.dist(g)<30;if(B&&E||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=g,this.count===this.numTaps)return this.reset(),g}}}class Ut{constructor(t){this._tr=new Mt(t),this._zoomIn=new Zt({numTouches:1,numTaps:2}),this._zoomOut=new Zt({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,l,f){this._zoomIn.touchstart(t,l,f),this._zoomOut.touchstart(t,l,f)}touchmove(t,l,f){this._zoomIn.touchmove(t,l,f),this._zoomOut.touchmove(t,l,f)}touchend(t,l,f){const g=this._zoomIn.touchend(t,l,f),B=this._zoomOut.touchend(t,l,f),E=this._tr;return g?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:L=>L.easeTo({duration:300,zoom:A.cx(E.zoom+1,L.getZoomSnap()),around:E.unproject(g)},{originalEvent:t})}):B?(this._active=!0,t.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:L=>L.easeTo({duration:300,zoom:A.cx(E.zoom-1,L.getZoomSnap()),around:E.unproject(B)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Vt{constructor(t){this._enabled=!!t.enable,this._moveStateManager=t.moveStateManager,this._clickTolerance=t.clickTolerance||1,this._moveFunction=t.move,this._activateOnStart=!!t.activateOnStart,t.assignEvents(this),this.reset()}reset(t){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(t)}_move(...t){const l=this._moveFunction(...t);if(l.bearingDelta||l.pitchDelta||l.rollDelta||l.around||l.panDelta)return this._active=!0,l}dragStart(t,l){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(t)&&(this._moveStateManager.startMove(t),this._lastPoint=Array.isArray(l)?l[0]:l,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(t,l){if(!this.isEnabled())return;const f=this._lastPoint;if(!f)return;if(t.preventDefault(),!this._moveStateManager.isValidMoveEvent(t))return void this.reset(t);const g=Array.isArray(l)?l[0]:l;return!this._moved&&g.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=g,this._move(f,g))}dragEnd(t){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(t)&&(this._moved&&W.suppressClick(),this.reset(t))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const er=0,hr=2,ar={[er]:1,[hr]:2};class Mr{constructor(t){this._correctEvent=t.checkCorrectEvent}startMove(t){const l=W.mouseButton(t);this._eventButton=l}endMove(t){delete this._eventButton}isValidStartEvent(t){return this._correctEvent(t)}isValidMoveEvent(t){return!(function(l,f){const g=ar[f];return l.buttons===void 0||(l.buttons&g)!==g})(t,this._eventButton)}isValidEndEvent(t){return W.mouseButton(t)===this._eventButton}}class Lr{constructor(){this._firstTouch=void 0}_isOneFingerTouch(t){return t.targetTouches.length===1}_isSameTouchEvent(t){return t.targetTouches[0].identifier===this._firstTouch}startMove(t){this._firstTouch=t.targetTouches[0].identifier}endMove(t){delete this._firstTouch}isValidStartEvent(t){return this._isOneFingerTouch(t)}isValidMoveEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}isValidEndEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}}class yn{constructor(t=new Mr({checkCorrectEvent:()=>!0}),l=new Lr){this.mouseMoveStateManager=t,this.oneFingerTouchMoveStateManager=l}_executeRelevantHandler(t,l,f){return t instanceof MouseEvent?l(t):typeof TouchEvent<"u"&&t instanceof TouchEvent?f(t):void 0}startMove(t){this._executeRelevantHandler(t,(l=>this.mouseMoveStateManager.startMove(l)),(l=>this.oneFingerTouchMoveStateManager.startMove(l)))}endMove(t){this._executeRelevantHandler(t,(l=>this.mouseMoveStateManager.endMove(l)),(l=>this.oneFingerTouchMoveStateManager.endMove(l)))}isValidStartEvent(t){return this._executeRelevantHandler(t,(l=>this.mouseMoveStateManager.isValidStartEvent(l)),(l=>this.oneFingerTouchMoveStateManager.isValidStartEvent(l)))}isValidMoveEvent(t){return this._executeRelevantHandler(t,(l=>this.mouseMoveStateManager.isValidMoveEvent(l)),(l=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(l)))}isValidEndEvent(t){return this._executeRelevantHandler(t,(l=>this.mouseMoveStateManager.isValidEndEvent(l)),(l=>this.oneFingerTouchMoveStateManager.isValidEndEvent(l)))}}const Dr=b=>{b.mousedown=b.dragStart,b.mousemoveWindow=b.dragMove,b.mouseup=b.dragEnd,b.contextmenu=t=>{t.preventDefault()}};class Hn{constructor(t,l){this._clickTolerance=t.clickTolerance||1,this._map=l,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new A.P(0,0)}_shouldBePrevented(t){return t<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(t,l,f){return this._calculateTransform(t,l,f)}touchmove(t,l,f){if(this._active){if(!this._shouldBePrevented(f.length))return t.preventDefault(),this._calculateTransform(t,l,f);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",t)}}touchend(t,l,f){this._calculateTransform(t,l,f),this._active&&this._shouldBePrevented(f.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,l,f){f.length>0&&(this._active=!0);const g=Ze(f,l),B=new A.P(0,0),E=new A.P(0,0);let L=0;for(const H in g){const G=g[H],$=this._touches[H];$&&(B._add(G),E._add(G.sub($)),L++,g[H]=G)}if(this._touches=g,this._shouldBePrevented(L)||!E.mag())return;const N=E.div(L);return this._sum._add(N),this._sum.mag()<this._clickTolerance?void 0:{around:B.div(L),panDelta:N}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Li{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(t,l,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([l[0],l[1]]))}touchmove(t,l,f){if(!this._firstTwoTouches)return;t.preventDefault();const[g,B]=this._firstTwoTouches,E=Bn(f,l,g),L=Bn(f,l,B);if(!E||!L)return;const N=this._aroundCenter?null:E.add(L).div(2);return this._move([E,L],N,t)}touchend(t,l,f){if(!this._firstTwoTouches)return;const[g,B]=this._firstTwoTouches,E=Bn(f,l,g),L=Bn(f,l,B);E&&L||(this._active&&W.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&t.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Bn(b,t,l){for(let f=0;f<b.length;f++)if(b[f].identifier===l)return t[f]}function Fr(b,t){return Math.log(b/t)/Math.LN2}class vr extends Li{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,l){const f=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Fr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Fr(this._distance,f),pinchAround:l}}}function Qi(b,t){return 180*b.angleWith(t)/Math.PI}class dn extends Li{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,l,f){const g=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Qi(this._vector,g),pinchAround:l}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const l=25/(Math.PI*this._minDiameter)*360,f=Qi(t,this._startVector);return Math.abs(f)<l}}function Ln(b){return Math.abs(b.y)>Math.abs(b.x)}class Vn extends Li{constructor(t){super(),this._currentTouchCount=0,this._map=t}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(t,l,f){super.touchstart(t,l,f),this._currentTouchCount=f.length}_start(t){this._lastPoints=t,Ln(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,l,f){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const g=t[0].sub(this._lastPoints[0]),B=t[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(g,B,f.timeStamp),this._valid?(this._lastPoints=t,this._active=!0,{pitchDelta:(g.y+B.y)/2*-.5}):void 0}gestureBeginsVertically(t,l,f){if(this._valid!==void 0)return this._valid;const g=t.mag()>=2,B=l.mag()>=2;if(!g&&!B)return;if(!g||!B)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;const E=t.y>0==l.y>0;return Ln(t)&&Ln(l)&&E}}const bn={panStep:100,bearingStep:15,pitchStep:10};class $a{constructor(t){this._tr=new Mt(t);const l=bn;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let l=0,f=0,g=0,B=0,E=0;switch(t.keyCode){case 61:case 107:case 171:case 187:l=1;break;case 189:case 109:case 173:l=-1;break;case 37:t.shiftKey?f=-1:(t.preventDefault(),B=-1);break;case 39:t.shiftKey?f=1:(t.preventDefault(),B=1);break;case 38:t.shiftKey?g=1:(t.preventDefault(),E=-1);break;case 40:t.shiftKey?g=-1:(t.preventDefault(),E=1);break;default:return}return this._rotationDisabled&&(f=0,g=0),{cameraAnimation:L=>{const N=this._tr;L.easeTo({duration:300,easeId:"keyboardHandler",easing:Bi,zoom:l?A.cx(N.zoom+l*(t.shiftKey?2:1),L.getZoomSnap()):N.zoom,bearing:N.bearing+f*this._bearingStep,pitch:N.pitch+g*this._pitchStep,offset:[-B*this._panStep,-E*this._panStep],center:N.center},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Bi(b){return b*(2-b)}const Ki=4.000244140625,Ja=1/450;class ma{constructor(t,l){this._onTimeout=f=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},this._map=t,this._tr=new Mt(t),this._triggerRenderFrame=l,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Ja}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!t&&t.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(t){return!!this._map.cooperativeGestures.isEnabled()&&!(t.ctrlKey||this._map.cooperativeGestures.isBypassed(t))}wheel(t){if(!this.isEnabled())return;if(this._shouldBePrevented(t))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",t);let l=t.deltaMode===WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const f=ie(),g=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,l!==0&&l%Ki==0?this._type="wheel":l!==0&&Math.abs(l)<4?this._type="trackpad":g>400?(this._type=null,this._lastValue=l,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(g*l)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,l+=this._lastValue)),t.shiftKey&&l&&(l/=4),this._type&&(this._lastWheelEvent=t,this._delta-=l,this._active||this._start(t)),t.preventDefault()}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const l=W.mousePos(this._map.getCanvas(),t),f=this._tr;this._aroundPoint=this._aroundCenter?f.transform.locationToScreenPoint(A.V.convert(f.center)):l,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const t=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const L=t.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=L),typeof this._targetZoom=="number"&&(this._targetZoom+=L)}if(this._delta!==0){const L=this._type==="wheel"&&Math.abs(this._delta)>Ki?this._wheelZoomRate:this._defaultZoomRate;let N=2/(1+Math.exp(-Math.abs(this._delta*L)));this._delta<0&&N!==0&&(N=1/N);const H=typeof this._targetZoom!="number"?t.scale:A.aq(this._targetZoom),G=t.applyConstrain(t.getCameraLngLat(),A.at(H*N)).zoom,$=this._map.getZoomSnap();if(this._type==="wheel"&&$>0){const Y=A.cx(t.zoom,$);this._targetZoom=A.cx(G,$,G-Y)}else this._targetZoom=G;this._type==="wheel"&&(this._startZoom=t.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const l=typeof this._targetZoom!="number"?t.zoom:this._targetZoom,f=this._startZoom,g=this._easing;let B,E=!1;if(this._type==="wheel"&&f&&g){const L=ie()-this._lastWheelEventTime,N=Math.min((L+5)/200,1),H=g(N);B=A.G.number(f,l,H),N<1?this._frameId||(this._frameId=!0):E=!0}else B=l,E=!0;return this._active=!0,E&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=B,{noInertia:!0,needsRenderFrame:!E,zoomDelta:B-t.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let l=A.cz;if(this._prevEase){const f=this._prevEase,g=(ie()-f.start)/f.duration,B=f.easing(g+.01)-f.easing(g),E=.27/Math.sqrt(B*B+1e-4)*.01,L=Math.sqrt(.0729-E*E);l=A.cw(E,L,.25,1)}return this._prevEase={start:ie(),duration:t,easing:l},l}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Rn{constructor(t,l){this._clickZoom=t,this._tapZoom=l}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ii{constructor(t){this._tr=new Mt(t),this.reset()}reset(){this._active=!1}dblclick(t,l){return t.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:A.cx(this._tr.zoom+(t.shiftKey?-1:1),f.getZoomSnap()),around:this._tr.unproject(l)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ra{constructor(){this._tap=new Zt({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(t,l,f){if(!this._swipePoint)if(this._tapTime){const g=l[0],B=t.timeStamp-this._tapTime<500,E=this._tapPoint.dist(g)<30;B&&E?f.length>0&&(this._swipePoint=g,this._swipeTouch=f[0].identifier):this.reset()}else this._tap.touchstart(t,l,f)}touchmove(t,l,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const g=l[0],B=g.y-this._swipePoint.y;return this._swipePoint=g,t.preventDefault(),this._active=!0,{zoomDelta:B/128}}}else this._tap.touchmove(t,l,f)}touchend(t,l,f){if(this._tapTime)this._swipePoint&&f.length===0&&this.reset();else{const g=this._tap.touchend(t,l,f);g&&(this._tapTime=t.timeStamp,this._tapPoint=g)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Un{constructor(t,l,f){this._el=t,this._mousePan=l,this._touchPan=f}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class na{constructor(t,l,f,g){this._pitchWithRotate=t.pitchWithRotate,this._rollEnabled=t.rollEnabled,this._mouseRotate=l,this._mousePitch=f,this._mouseRoll=g}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class gr{constructor(t,l,f,g){this._el=t,this._touchZoom=l,this._touchRotate=f,this._tapDragZoom=g,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class yr{constructor(t,l){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=t,this._options=l,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const t=this._map.getCanvasContainer();t.classList.add("maplibregl-cooperative-gestures"),this._container=W.create("div","maplibregl-cooperative-gesture-screen",t);let l=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(l=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const f=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),g=document.createElement("div");g.className="maplibregl-desktop-message",g.textContent=l,this._container.appendChild(g);const B=document.createElement("div");B.className="maplibregl-mobile-message",B.textContent=f,this._container.appendChild(B),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(W.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(t){return t[this._bypassKey]}notifyGestureBlocked(t,l){this._enabled&&(this._map.fire(new A.l("cooperativegestureprevented",{gestureType:t,originalEvent:l})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const Ei=b=>b.zoom||b.drag||b.roll||b.pitch||b.rotate;class yi extends A.l{}function ki(b){return b.panDelta&&b.panDelta.mag()||b.zoomDelta||b.bearingDelta||b.pitchDelta||b.rollDelta}class ei{get _ownerDocument(){var t;return((t=this._el)===null||t===void 0?void 0:t.ownerDocument)||document}get _ownerWindow(){var t,l;return((l=(t=this._el)===null||t===void 0?void 0:t.ownerDocument)===null||l===void 0?void 0:l.defaultView)||window}constructor(t,l){this.handleWindowEvent=g=>{this.handleEvent(g,`${g.type}Window`)},this.handleEvent=(g,B)=>{if(g.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const E=g.type==="renderFrame"?void 0:g,L={needsRenderFrame:!1},N={},H={};for(const{handlerName:Y,handler:se,allowed:de}of this._handlers){if(!se.isEnabled())continue;let Se;if(this._blockedByActive(H,de,Y))se.reset();else if(se[B||g.type]){if(A.cA(g,B||g.type)){const Me=W.mousePos(this._map.getCanvas(),g);Se=se[B||g.type](g,Me)}else if(A.cB(g,B||g.type)){const Me=this._getMapTouches(g.touches),Ee=W.touchPos(this._map.getCanvas(),Me);Se=se[B||g.type](g,Ee,Me)}else A.cC(B||g.type)||(Se=se[B||g.type](g));this.mergeHandlerResult(L,N,Se,Y,E),Se&&Se.needsRenderFrame&&this._triggerRenderFrame()}(Se||se.isActive())&&(H[Y]=se)}const G={};for(const Y in this._previousActiveHandlers)H[Y]||(G[Y]=E);this._previousActiveHandlers=H,(Object.keys(G).length||ki(L))&&(this._changes.push([L,N,G]),this._triggerRenderFrame()),(Object.keys(H).length||ki(L))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:$}=L;$&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],$(this._map))},this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new J(t),this._bearingSnap=l.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(l);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[this._ownerDocument,"mousemove",{capture:!0}],[this._ownerDocument,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[this._ownerWindow,"blur",void 0]];for(const[g,B,E]of this._listeners)W.addEventListener(g,B,g===this._ownerDocument?this.handleWindowEvent:this.handleEvent,E)}destroy(){for(const[t,l,f]of this._listeners)W.removeEventListener(t,l,t===this._ownerDocument?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(t){const l=this._map,f=l.getCanvasContainer();this._add("mapEvent",new Ke(l,t));const g=l.boxZoom=new Oe(l,t);this._add("boxZoom",g),t.interactive&&t.boxZoom&&g.enable();const B=l.cooperativeGestures=new yr(l,t.cooperativeGestures);this._add("cooperativeGestures",B),t.cooperativeGestures&&B.enable();const E=new Ut(l),L=new ii(l);l.doubleClickZoom=new Rn(L,E),this._add("tapZoom",E),this._add("clickZoom",L),t.interactive&&t.doubleClickZoom&&l.doubleClickZoom.enable();const N=new ra;this._add("tapDragZoom",N);const H=l.touchPitch=new Vn(l);this._add("touchPitch",H),t.interactive&&t.touchPitch&&l.touchPitch.enable(t.touchPitch);const G=()=>l.project(l.getCenter()),$=(function({enable:ze,clickTolerance:nt,aroundCenter:at=!0,minPixelCenterThreshold:$e=100,rotateDegreesPerPixelMoved:gt=.8},Nt){const Dt=new Mr({checkCorrectEvent:It=>W.mouseButton(It)===0&&It.ctrlKey||W.mouseButton(It)===2&&!It.ctrlKey});return new Vt({clickTolerance:nt,move:(It,Qt)=>{const cr=Nt();if(at&&Math.abs(cr.y-It.y)>$e)return{bearingDelta:A.cy(new A.P(It.x,Qt.y),Qt,cr)};let fr=(Qt.x-It.x)*gt;return at&&Qt.y<cr.y&&(fr=-fr),{bearingDelta:fr}},moveStateManager:Dt,enable:ze,assignEvents:Dr})})(t,G),Y=(function({enable:ze,clickTolerance:nt,pitchDegreesPerPixelMoved:at=-.5}){const $e=new Mr({checkCorrectEvent:gt=>W.mouseButton(gt)===0&&gt.ctrlKey||W.mouseButton(gt)===2});return new Vt({clickTolerance:nt,move:(gt,Nt)=>({pitchDelta:(Nt.y-gt.y)*at}),moveStateManager:$e,enable:ze,assignEvents:Dr})})(t),se=(function({enable:ze,clickTolerance:nt,rollDegreesPerPixelMoved:at=.3},$e){const gt=new Mr({checkCorrectEvent:Nt=>W.mouseButton(Nt)===2&&Nt.ctrlKey});return new Vt({clickTolerance:nt,move:(Nt,Dt)=>{const It=$e();let Qt=(Dt.x-Nt.x)*at;return Dt.y<It.y&&(Qt=-Qt),{rollDelta:Qt}},moveStateManager:gt,enable:ze,assignEvents:Dr})})(t,G);l.dragRotate=new na(t,$,Y,se),this._add("mouseRotate",$,["mousePitch"]),this._add("mousePitch",Y,["mouseRotate","mouseRoll"]),this._add("mouseRoll",se,["mousePitch"]),t.interactive&&t.dragRotate&&l.dragRotate.enable();const de=(function({enable:ze,clickTolerance:nt}){const at=new Mr({checkCorrectEvent:$e=>W.mouseButton($e)===0&&!$e.ctrlKey});return new Vt({clickTolerance:nt,move:($e,gt)=>({around:gt,panDelta:gt.sub($e)}),activateOnStart:!0,moveStateManager:at,enable:ze,assignEvents:Dr})})(t),Se=new Hn(t,l);l.dragPan=new Un(f,de,Se),this._add("mousePan",de),this._add("touchPan",Se,["touchZoom","touchRotate"]),t.interactive&&t.dragPan&&l.dragPan.enable(t.dragPan);const Me=new dn,Ee=new vr;l.touchZoomRotate=new gr(f,Ee,Me,N),this._add("touchRotate",Me,["touchPan","touchZoom"]),this._add("touchZoom",Ee,["touchPan","touchRotate"]),t.interactive&&t.touchZoomRotate&&l.touchZoomRotate.enable(t.touchZoomRotate),this._add("blockableMapEvent",new yt(l));const je=l.scrollZoom=new ma(l,(()=>this._triggerRenderFrame()));this._add("scrollZoom",je,["mousePan"]),t.interactive&&t.scrollZoom&&l.scrollZoom.enable(t.scrollZoom);const et=l.keyboard=new $a(l);this._add("keyboard",et),t.interactive&&t.keyboard&&l.keyboard.enable()}_add(t,l,f){this._handlers.push({handlerName:t,handler:l,allowed:f}),this._handlersById[t]=l}stop(t){if(!this._updatingCamera){for(const{handler:l}of this._handlers)l.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ei(this._eventsInProgress)||this.isZooming()}_blockedByActive(t,l,f){for(const g in t)if(g!==f&&(!l||l.indexOf(g)<0))return!0;return!1}_getMapTouches(t){const l=[];for(const f of t)this._el.contains(f.target)&&l.push(f);return l}mergeHandlerResult(t,l,f,g,B){if(!f)return;A.e(t,f);const E={handlerName:g,originalEvent:f.originalEvent||B};f.zoomDelta!==void 0&&(l.zoom=E),f.panDelta!==void 0&&(l.drag=E),f.rollDelta!==void 0&&(l.roll=E),f.pitchDelta!==void 0&&(l.pitch=E),f.bearingDelta!==void 0&&(l.rotate=E)}_applyChanges(){const t={},l={},f={};for(const[g,B,E]of this._changes)g.panDelta&&(t.panDelta=(t.panDelta||new A.P(0,0))._add(g.panDelta)),g.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+g.zoomDelta),g.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+g.bearingDelta),g.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+g.pitchDelta),g.rollDelta&&(t.rollDelta=(t.rollDelta||0)+g.rollDelta),g.around!==void 0&&(t.around=g.around),g.pinchAround!==void 0&&(t.pinchAround=g.pinchAround),g.noInertia&&(t.noInertia=g.noInertia),A.e(l,B),A.e(f,E);this._updateMapTransform(t,l,f),this._changes=[]}_updateMapTransform(t,l,f){const g=this._map,B=g._getTransformForUpdate(),E=g.terrain;if(!(ki(t)||E&&this._terrainMovement))return this._fireEvents(l,f,!0);g._stop(!0);let{panDelta:L,zoomDelta:N,bearingDelta:H,pitchDelta:G,rollDelta:$,around:Y,pinchAround:se}=t;se!==void 0&&(Y=se),Y=Y||g.transform.centerPoint,E&&!B.isPointOnMapSurface(Y)&&(Y=B.centerPoint);const de={panDelta:L,zoomDelta:N,rollDelta:$,pitchDelta:G,bearingDelta:H,around:Y};this._map.cameraHelper.useGlobeControls&&!B.isPointOnMapSurface(Y)&&(Y=B.centerPoint);const Se=Y.distSqr(B.centerPoint)<.01?B.center:B.screenPointToLocation(L?Y.sub(L):Y);this._handleMapControls({terrain:E,tr:B,deltasForHelper:de,preZoomAroundLoc:Se,combinedEventsInProgress:l,panDelta:L}),g._applyUpdatedTransform(B),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(l,f,!0)}_handleMapControls({terrain:t,tr:l,deltasForHelper:f,preZoomAroundLoc:g,combinedEventsInProgress:B,panDelta:E}){const L=this._map.cameraHelper;if(L.handleMapControlsRollPitchBearingZoom(f,l),t)return L.useGlobeControls?(this._terrainMovement||!B.drag&&!B.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void L.handleMapControlsPan(f,l,g)):this._terrainMovement||!B.drag&&!B.zoom?void(B.drag&&this._terrainMovement&&E?l.setCenter(l.screenPointToLocation(l.centerPoint.sub(E))):L.handleMapControlsPan(f,l,g)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void L.handleMapControlsPan(f,l,g));L.handleMapControlsPan(f,l,g)}_fireEvents(t,l,f){const g=Ei(this._eventsInProgress),B=Ei(t),E={};for(const $ in t){const{originalEvent:Y}=t[$];this._eventsInProgress[$]||(E[`${$}start`]=Y),this._eventsInProgress[$]=t[$]}!g&&B&&this._fireEvent("movestart",B.originalEvent);for(const $ in E)this._fireEvent($,E[$]);B&&this._fireEvent("move",B.originalEvent);for(const $ in t){const{originalEvent:Y}=t[$];this._fireEvent($,Y)}const L={};let N;for(const $ in this._eventsInProgress){const{handlerName:Y,originalEvent:se}=this._eventsInProgress[$];this._handlersById[Y].isActive()||(delete this._eventsInProgress[$],N=l[Y]||se,L[`${$}end`]=N)}for(const $ in L)this._fireEvent($,L[$]);const H=Ei(this._eventsInProgress),G=(g||B)&&!H;if(G&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const $=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&$.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform($)}if(f&&G){this._updatingCamera=!0;const $=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Y=se=>se!==0&&-this._bearingSnap<se&&se<this._bearingSnap;!$||!$.essential&&O.prefersReducedMotion?(this._map.fire(new A.l("moveend",{originalEvent:N})),Y(this._map.getBearing())&&this._map.resetNorth()):(Y($.bearing||this._map.getBearing())&&($.bearing=0),$.freezeElevation=!0,this._map.easeTo($,{originalEvent:N})),this._updatingCamera=!1}}_fireEvent(t,l){this._map.fire(new A.l(t,l?{originalEvent:l}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((t=>{delete this._frameId,this.handleEvent(new yi("renderFrame",{timeStamp:t})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Gn extends A.E{constructor(t,l,f){super(),this._renderFrameCallback=()=>{const g=Math.min((ie()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(g)),g<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=f.bearingSnap,this._zoomSnap=f.zoomSnap,this.cameraHelper=l,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(t,l){t.apply(this.transform,!0),this.transform=t,this.cameraHelper=l}getCenter(){return new A.V(this.transform.center.lng,this.transform.center.lat)}setCenter(t,l){return this.jumpTo({center:t},l)}getCenterElevation(){return this.transform.elevation}setCenterElevation(t,l){return this.jumpTo({elevation:t},l),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(t){this._centerClampedToGround=t}panBy(t,l,f){return t=A.P.convert(t).mult(-1),this.panTo(this.transform.center,A.e({offset:t},l),f)}panTo(t,l,f){return this.easeTo(A.e({center:t},l),f)}getZoom(){return this.transform.zoom}setZoom(t,l){return this.jumpTo({zoom:t},l),this}zoomTo(t,l,f){return this.easeTo(A.e({zoom:t},l),f)}zoomIn(t,l){return this.zoomTo(A.cx(this.getZoom()+1,this._zoomSnap),t,l),this}zoomOut(t,l){return this.zoomTo(A.cx(this.getZoom()-1,this._zoomSnap),t,l),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(t,l){return t!=this.transform.fov&&(this.transform.setFov(t),this.fire(new A.l("movestart",l)).fire(new A.l("move",l)).fire(new A.l("moveend",l))),this}getBearing(){return this.transform.bearing}setZoomSnap(t){return this._zoomSnap=t,this}getZoomSnap(){return this._zoomSnap}setBearing(t,l){return this.jumpTo({bearing:t},l),this}getPadding(){return this.transform.padding}setPadding(t,l){return this.jumpTo({padding:t},l),this}rotateTo(t,l,f){return this.easeTo(A.e({bearing:t},l),f)}resetNorth(t,l){return this.rotateTo(0,A.e({duration:1e3},t),l),this}resetNorthPitch(t,l){return this.easeTo(A.e({bearing:0,pitch:0,roll:0,duration:1e3},t),l),this}snapToNorth(t,l){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,l):this}getPitch(){return this.transform.pitch}setPitch(t,l){return this.jumpTo({pitch:t},l),this}getRoll(){return this.transform.roll}setRoll(t,l){return this.jumpTo({roll:t},l),this}cameraForBounds(t,l){t=Qr.convert(t).adjustAntiMeridian();const f=l&&l.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),f,l)}_cameraForBoxAndBearing(t,l,f,g){const B={top:0,bottom:0,right:0,left:0};if(typeof(g=A.e({padding:B,offset:[0,0],maxZoom:this.transform.maxZoom},g)).padding=="number"){const H=g.padding;g.padding={top:H,bottom:H,right:H,left:H}}const E=A.e(B,g.padding);g.padding=E;const L=this.transform,N=new Qr(t,l);return this.cameraHelper.cameraForBoxAndBearing(g,E,N,f,L)}fitBounds(t,l,f){return this._fitInternal(this.cameraForBounds(t,l),l,f)}fitScreenCoordinates(t,l,f,g,B){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(A.P.convert(t)),this.transform.screenPointToLocation(A.P.convert(l)),f,g),g,B)}_fitInternal(t,l,f){return t?(delete(l=A.e(t,l)).padding,l.linear?this.easeTo(l,f):this.flyTo(l,f)):this}jumpTo(t,l){this.stop();const f=this._getTransformForUpdate();let g=!1,B=!1,E=!1;const L=f.zoom;this.cameraHelper.handleJumpToCenterZoom(f,t);const N=f.zoom!==L;return"elevation"in t&&f.elevation!==+t.elevation&&f.setElevation(+t.elevation),"bearing"in t&&f.bearing!==+t.bearing&&(g=!0,f.setBearing(+t.bearing)),"pitch"in t&&f.pitch!==+t.pitch&&(B=!0,f.setPitch(+t.pitch)),"roll"in t&&f.roll!==+t.roll&&(E=!0,f.setRoll(+t.roll)),t.padding==null||f.isPaddingEqual(t.padding)||f.setPadding(t.padding),this._applyUpdatedTransform(f),this.fire(new A.l("movestart",l)).fire(new A.l("move",l)),N&&this.fire(new A.l("zoomstart",l)).fire(new A.l("zoom",l)).fire(new A.l("zoomend",l)),g&&this.fire(new A.l("rotatestart",l)).fire(new A.l("rotate",l)).fire(new A.l("rotateend",l)),B&&this.fire(new A.l("pitchstart",l)).fire(new A.l("pitch",l)).fire(new A.l("pitchend",l)),E&&this.fire(new A.l("rollstart",l)).fire(new A.l("roll",l)).fire(new A.l("rollend",l)),this.fire(new A.l("moveend",l))}calculateCameraOptionsFromTo(t,l,f,g=0){const B=A.a9.fromLngLat(t,l),E=A.a9.fromLngLat(f,g),L=E.x-B.x,N=E.y-B.y,H=E.z-B.z,G=Math.hypot(L,N,H);if(G===0)throw new Error("Can't calculate camera options with same From and To");const $=Math.hypot(L,N),Y=A.at(this.transform.cameraToCenterDistance/G/this.transform.tileSize),se=180*Math.atan2(L,-N)/Math.PI;let de=180*Math.acos($/G)/Math.PI;return de=H<0?90-de:90+de,{center:E.toLngLat(),elevation:g,zoom:Y,pitch:de,bearing:se}}calculateCameraOptionsFromCameraLngLatAltRotation(t,l,f,g,B){const E=this.transform.calculateCenterFromCameraLngLatAlt(t,l,f,g);return{center:E.center,elevation:E.elevation,zoom:E.zoom,bearing:f,pitch:g,roll:B}}easeTo(t,l){this._stop(!1,t.easeId),((t=A.e({offset:[0,0],duration:500,easing:A.cz},t)).animate===!1||!t.essential&&O.prefersReducedMotion)&&(t.duration=0);const f=this._getTransformForUpdate(),g=this.getBearing(),B=f.pitch,E=f.roll,L="bearing"in t?this._normalizeBearing(t.bearing,g):g,N="pitch"in t?+t.pitch:B,H="roll"in t?this._normalizeBearing(t.roll,E):E,G="padding"in t?t.padding:f.padding,$=A.P.convert(t.offset);let Y,se;t.around&&(Y=A.V.convert(t.around),se=f.locationToScreenPoint(Y));const de={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},Se=this.cameraHelper.handleEaseTo(f,{bearing:L,pitch:N,roll:H,padding:G,around:Y,aroundPoint:se,offsetAsPoint:$,offset:t.offset,zoom:t.zoom,center:t.center});return this._rotating=this._rotating||g!==L,this._pitching=this._pitching||N!==B,this._rolling=this._rolling||H!==E,this._padding=!f.isPaddingEqual(G),this._zooming=this._zooming||Se.isZooming,this._easeId=t.easeId,this._prepareEase(l,t.noMoveStart,de),this.terrain&&this._prepareElevation(Se.elevationCenter),this._ease((Me=>{Se.easeFunc(Me),this.terrain&&!t.freezeElevation&&this._updateElevation(Me),this._applyUpdatedTransform(f),this._fireMoveEvents(l)}),(Me=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(l,Me)}),t),this}_prepareEase(t,l,f={}){this._moving=!0,l||f.moving||this.fire(new A.l("movestart",t)),this._zooming&&!f.zooming&&this.fire(new A.l("zoomstart",t)),this._rotating&&!f.rotating&&this.fire(new A.l("rotatestart",t)),this._pitching&&!f.pitching&&this.fire(new A.l("pitchstart",t)),this._rolling&&!f.rolling&&this.fire(new A.l("rollstart",t))}_prepareElevation(t){this._elevationCenter=t,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(t,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(t){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const l=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(t<1&&l!==this._elevationTarget){const f=this._elevationTarget-this._elevationStart;this._elevationStart+=t*(f-(l-(f*t+this._elevationStart))/(1-t)),this._elevationTarget=l}this.transform.setElevation(A.G.number(this._elevationStart,this._elevationTarget,t))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(t){if(!this.terrain&&t.elevation>=0&&t.pitch<=90)return{};const l=t.getCameraLngLat(),f=t.getCameraAltitude(),g=this.terrain?this.terrain.getElevationForLngLatZoom(l,t.zoom):0;if(f<g){const B=this.calculateCameraOptionsFromTo(l,g,t.center,t.elevation);return{pitch:B.pitch,zoom:B.zoom}}return{}}_applyUpdatedTransform(t){const l=[];if(l.push((g=>this._elevateCameraIfInsideTerrain(g))),this.transformCameraUpdate&&l.push((g=>this.transformCameraUpdate(g))),!l.length)return;const f=t.clone();for(const g of l){const B=f.clone(),{center:E,zoom:L,roll:N,pitch:H,bearing:G,elevation:$}=g(B);E&&B.setCenter(E),$!==void 0&&B.setElevation($),L!==void 0&&B.setZoom(L),N!==void 0&&B.setRoll(N),H!==void 0&&B.setPitch(H),G!==void 0&&B.setBearing(G),f.apply(B,!1)}this.transform.apply(f,!1)}_fireMoveEvents(t){this.fire(new A.l("move",t)),this._zooming&&this.fire(new A.l("zoom",t)),this._rotating&&this.fire(new A.l("rotate",t)),this._pitching&&this.fire(new A.l("pitch",t)),this._rolling&&this.fire(new A.l("roll",t))}_afterEase(t,l){if(this._easeId&&l&&this._easeId===l)return;delete this._easeId;const f=this._zooming,g=this._rotating,B=this._pitching,E=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,f&&this.fire(new A.l("zoomend",t)),g&&this.fire(new A.l("rotateend",t)),B&&this.fire(new A.l("pitchend",t)),E&&this.fire(new A.l("rollend",t)),this.fire(new A.l("moveend",t))}flyTo(t,l){if(!t.essential&&O.prefersReducedMotion){const Qt=A.U(t,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(Qt,l)}this.stop(),t=A.e({offset:[0,0],speed:1.2,curve:1.42,easing:A.cz},t);const f=this._getTransformForUpdate(),g=f.bearing,B=f.pitch,E=f.roll,L=f.padding,N="bearing"in t?this._normalizeBearing(t.bearing,g):g,H="pitch"in t?+t.pitch:B,G="roll"in t?this._normalizeBearing(t.roll,E):E,$="padding"in t?t.padding:f.padding,Y=A.P.convert(t.offset);let se=f.centerPoint.add(Y);const de=f.screenPointToLocation(se),Se=this.cameraHelper.handleFlyTo(f,{bearing:N,pitch:H,roll:G,padding:$,locationAtOffset:de,offsetAsPoint:Y,center:t.center,minZoom:t.minZoom,zoom:t.zoom});let Me=t.curve;const Ee=Math.max(f.width,f.height),je=Ee/Se.scaleOfZoom,et=Se.pixelPathLength;typeof Se.scaleOfMinZoom=="number"&&(Me=Math.sqrt(Ee/Se.scaleOfMinZoom/et*2));const ze=Me*Me;function nt(Qt){const cr=(je*je-Ee*Ee+(Qt?-1:1)*ze*ze*et*et)/(2*(Qt?je:Ee)*ze*et);return Math.log(Math.sqrt(cr*cr+1)-cr)}function at(Qt){return(Math.exp(Qt)-Math.exp(-Qt))/2}function $e(Qt){return(Math.exp(Qt)+Math.exp(-Qt))/2}const gt=nt(!1);let Nt=function(Qt){return $e(gt)/$e(gt+Me*Qt)},Dt=function(Qt){return Ee*(($e(gt)*(at(cr=gt+Me*Qt)/$e(cr))-at(gt))/ze)/et;var cr},It=(nt(!0)-gt)/Me;if(Math.abs(et)<2e-6||!isFinite(It)){if(Math.abs(Ee-je)<1e-6)return this.easeTo(t,l);const Qt=je<Ee?-1:1;It=Math.abs(Math.log(je/Ee))/Me,Dt=()=>0,Nt=cr=>Math.exp(Qt*Me*cr)}return t.duration="duration"in t?+t.duration:1e3*It/("screenSpeed"in t?+t.screenSpeed/Me:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=g!==N,this._pitching=H!==B,this._rolling=G!==E,this._padding=!f.isPaddingEqual($),this._prepareEase(l,!1),this.terrain&&this._prepareElevation(Se.targetCenter),this._ease((Qt=>{const cr=Qt*It,fr=1/Nt(cr),Ht=Dt(cr);this._rotating&&f.setBearing(A.G.number(g,N,Qt)),this._pitching&&f.setPitch(A.G.number(B,H,Qt)),this._rolling&&f.setRoll(A.G.number(E,G,Qt)),this._padding&&(f.interpolatePadding(L,$,Qt),se=f.centerPoint.add(Y)),Se.easeFunc(Qt,fr,Ht,se),this.terrain&&!t.freezeElevation&&this._updateElevation(Qt),this._applyUpdatedTransform(f),this._fireMoveEvents(l)}),(()=>{this.terrain&&t.freezeElevation&&this._finalizeElevation(),this._afterEase(l)}),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,l){var f;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const g=this._onEaseEnd;delete this._onEaseEnd,g.call(this,l)}return t||(f=this.handlers)===null||f===void 0||f.stop(!1),this}_ease(t,l,f){f.animate===!1||f.duration===0?(t(1),l()):(this._easeStart=ie(),this._easeOptions=f,this._onEaseFrame=t,this._onEaseEnd=l,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(t,l){t=A.W(t,-180,180);const f=Math.abs(t-l);return Math.abs(t-360-l)<f&&(t-=360),Math.abs(t+360-l)<f&&(t+=360),t}queryTerrainElevation(t){return this.terrain?this.terrain.getElevationForLngLat(A.V.convert(t),this.transform):null}}const Yn={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class ds{constructor(t=Yn){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=l=>{!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"&&l.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=t}getDefaultPosition(){return"bottom-right"}onAdd(t){return this._map=t,this._compact=this.options.compact,this._container=W.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=W.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=W.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){W.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(t,l){const f=this._map._getUIString(`AttributionControl.${l}`);t.title=f,t.setAttribute("aria-label",f)}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((g=>typeof g!="string"?"":g))):typeof this.options.customAttribution=="string"&&t.push(this.options.customAttribution)),this._map.style.stylesheet){const g=this._map.style.stylesheet;this.styleOwner=g.owner,this.styleId=g.id}const l=this._map.style.tileManagers;for(const g in l){const B=l[g];if(B.used||B.usedForTerrain){const E=B.getSource();E.attribution&&t.indexOf(E.attribution)<0&&t.push(E.attribution)}}t=t.filter((g=>String(g).trim())),t.sort(((g,B)=>g.length-B.length)),t=t.filter(((g,B)=>{for(let E=B+1;E<t.length;E++)if(t[E].indexOf(g)>=0)return!1;return!0}));const f=t.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,t.length?(this._innerContainer.innerHTML=W.sanitize(f),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class ia{constructor(t={}){this._updateCompact=()=>{const l=this._container.children;if(l.length){const f=l[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&f.classList.add("maplibregl-compact"):f.classList.remove("maplibregl-compact")}},this.options=t}getDefaultPosition(){return"bottom-left"}onAdd(t){this._map=t,this._compact=this.options&&this.options.compact,this._container=W.create("div","maplibregl-ctrl");const l=W.create("a","maplibregl-ctrl-logo");return l.target="_blank",l.rel="noopener nofollow",l.href="https://maplibre.org/",l.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),l.setAttribute("rel","noopener nofollow"),this._container.appendChild(l),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){W.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class on{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const l=++this._id;return this._queue.push({callback:t,id:l,cancelled:!1}),l}remove(t){const l=this._currentlyRunning,f=l?this._queue.concat(l):this._queue;for(const g of f)if(g.id===t)return void(g.cancelled=!0)}run(t=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const l=this._currentlyRunning=this._queue;this._queue=[];for(const f of l)if(!f.cancelled&&(f.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var tn=A.aU([{name:"a_pos3d",type:"Int16",components:3}]);class sn extends A.E{constructor(t){super(),this._lastTilesetChange=ie(),this.tileManager=t,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=t._source.tileSize*2**this.deltaZoom,t.usedForTerrain=!0,t.tileSize=this.tileSize}destruct(){this.tileManager.usedForTerrain=!1,this.tileManager.tileSize=null}getSource(){return this.tileManager._source}update(t,l){this.tileManager.update(t,l),this._renderableTilesKeys=[];const f={};for(const g of Kn(t,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:l,calculateTileZoom:this.tileManager._source.calculateTileZoom}))f[g.key]=!0,this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.terrainRttPosMatrix32f=new Float64Array(16),A.c7(g.terrainRttPosMatrix32f,0,A.a5,A.a5,0,0,1),this._tiles[g.key]=new At(g,this.tileSize),this._lastTilesetChange=ie());for(const g in this._tiles)f[g]||delete this._tiles[g]}freeRtt(t){for(const l in this._tiles){const f=this._tiles[l];(!t||f.tileID.equals(t)||f.tileID.isChildOf(t)||t.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((t=>this.getTileByID(t)))}getTileByID(t){return this._tiles[t]}getTerrainCoords(t,l){return l?this._getTerrainCoordsForTileRanges(t,l):this._getTerrainCoordsForRegularTile(t)}_getTerrainCoordsForRegularTile(t){const l={};for(const f of this._renderableTilesKeys){const g=this._tiles[f].tileID,B=t.clone(),E=A.bk();if(g.canonical.equals(t.canonical))A.c7(E,0,A.a5,A.a5,0,0,1);else if(g.canonical.isChildOf(t.canonical)){const L=g.canonical.z-t.canonical.z,N=g.canonical.x-(g.canonical.x>>L<<L),H=g.canonical.y-(g.canonical.y>>L<<L),G=A.a5>>L;A.c7(E,0,G,G,0,0,1),A.O(E,E,[-N*G,-H*G,0])}else{if(!t.canonical.isChildOf(g.canonical))continue;{const L=t.canonical.z-g.canonical.z,N=t.canonical.x-(t.canonical.x>>L<<L),H=t.canonical.y-(t.canonical.y>>L<<L),G=A.a5>>L;A.c7(E,0,A.a5,A.a5,0,0,1),A.O(E,E,[N*G,H*G,0]),A.Q(E,E,[1/2**L,1/2**L,0])}}B.terrainRttPosMatrix32f=new Float32Array(E),l[f]=B}return l}_getTerrainCoordsForTileRanges(t,l){const f={};for(const g of this._renderableTilesKeys){const B=this._tiles[g].tileID;if(!this._isWithinTileRanges(B,l))continue;const E=t.clone(),L=A.bk();if(B.canonical.z===t.canonical.z){const N=t.canonical.x-B.canonical.x+t.wrap*(1<<t.canonical.z),H=t.canonical.y-B.canonical.y;A.c7(L,0,A.a5,A.a5,0,0,1),A.O(L,L,[N*A.a5,H*A.a5,0])}else if(B.canonical.z>t.canonical.z){const N=B.canonical.z-t.canonical.z,H=B.canonical.x-(B.canonical.x>>N<<N)+t.wrap*(1<<B.canonical.z),G=B.canonical.y-(B.canonical.y>>N<<N),$=t.canonical.x-(B.canonical.x>>N),Y=t.canonical.y-(B.canonical.y>>N),se=A.a5>>N;A.c7(L,0,se,se,0,0,1),A.O(L,L,[-H*se+$*A.a5,-G*se+Y*A.a5,0])}else{const N=t.canonical.z-B.canonical.z,H=t.canonical.x-(t.canonical.x>>N<<N)+t.wrap*(1<<t.canonical.z),G=t.canonical.y-(t.canonical.y>>N<<N),$=(t.canonical.x>>N)-B.canonical.x,Y=(t.canonical.y>>N)-B.canonical.y,se=A.a5<<N;A.c7(L,0,se,se,0,0,1),A.O(L,L,[H*A.a5+$*se,G*A.a5+Y*se,0])}E.terrainRttPosMatrix32f=new Float32Array(L),f[g]=E}return f}getSourceTile(t,l){const f=this.tileManager._source;let g=t.overscaledZ-this.deltaZoom;if(g>f.maxzoom&&(g=f.maxzoom),g<f.minzoom)return;this._sourceTileCache[t.key]||(this._sourceTileCache[t.key]=t.scaledTo(g).key);let B=this.findTileInCaches(this._sourceTileCache[t.key]);if(!B?.dem&&l)for(;g>=f.minzoom&&!B?.dem;)B=this.findTileInCaches(t.scaledTo(g--).key);return B}findTileInCaches(t){let l=this.tileManager.getTileByID(t);return l||(l=this.tileManager._outOfViewCache.getByKey(t),l)}anyTilesAfterTime(t=Date.now()){return this._lastTilesetChange>=t}_isWithinTileRanges(t,l){const f=l[t.canonical.z];return!!f&&(t.wrap>f.minWrap||t.wrap<f.maxWrap||t.canonical.x>=f.minTileXWrapped&&t.canonical.x<=f.maxTileXWrapped&&t.canonical.y>=f.minTileY&&t.canonical.y<=f.maxTileY)}}class $n{constructor(t,l,f){this._meshCache={},this.painter=t,this.tileManager=new sn(l),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(t,l,f,g=A.a5){var B;const E=t.normalizeCoordinates(l,f,g);if(!E)return 0;const L=this.getTerrainData(E.tileID),N=(B=L.tile)===null||B===void 0?void 0:B.dem;if(!N)return 0;const H=A.cD([],[E.x/g*A.a5,E.y/g*A.a5],L.u_terrain_matrix),G=[H[0]*N.dim,H[1]*N.dim],$=Math.floor(G[0]),Y=Math.floor(G[1]),se=G[0]-$,de=G[1]-Y;return N.get($,Y)*(1-se)*(1-de)+N.get($+1,Y)*se*(1-de)+N.get($,Y+1)*(1-se)*de+N.get($+1,Y+1)*se*de}getElevationForLngLatZoom(t,l){if(!A.cE(l,t.wrap()))return 0;const{tileID:f,mercatorX:g,mercatorY:B}=this._getOverscaledTileIDFromLngLatZoom(t,l);return this.getElevation(f,g%A.a5,B%A.a5,A.a5)}getElevationForLngLat(t,l){const f=Kn(l,{maxzoom:this.tileManager.maxzoom,minzoom:this.tileManager.minzoom,tileSize:512,terrain:this});let g=0;for(const B of f)B.canonical.z>g&&(g=Math.min(B.canonical.z,this.tileManager.maxzoom));return this.getElevationForLngLatZoom(t,g)}getElevation(t,l,f,g=A.a5){return this.getDEMElevation(t,l,f,g)*this.exaggeration}getTerrainData(t){if(!this._emptyDemTexture){const g=this.painter.context,B=new A.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new A.T(g,B,g.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new A.T(g,new A.R({width:1,height:1}),g.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=A.ar([])}const l=this.tileManager.getSourceTile(t,!0);if(l&&l.dem&&(!l.demTexture||l.needsTerrainPrepare)){const g=this.painter.context;l.demTexture=this.painter.getTileTexture(l.dem.stride),l.demTexture?l.demTexture.update(l.dem.getPixels(),{premultiply:!1}):l.demTexture=new A.T(g,l.dem.getPixels(),g.gl.RGBA,{premultiply:!1}),l.demTexture.bind(g.gl.NEAREST,g.gl.CLAMP_TO_EDGE),l.needsTerrainPrepare=!1}const f=l&&l.toString()+l.tileID.key+t.key;if(f&&!this._demMatrixCache[f]){const g=this.tileManager.getSource().maxzoom;let B=t.canonical.z-l.tileID.canonical.z;t.overscaledZ>t.canonical.z&&(t.canonical.z>=g?B=t.canonical.z-g:A.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const E=t.canonical.x-(t.canonical.x>>B<<B),L=t.canonical.y-(t.canonical.y>>B<<B),N=A.cF(new Float64Array(16),[1/(A.a5<<B),1/(A.a5<<B),0]);A.O(N,N,[E*A.a5,L*A.a5,0]),this._demMatrixCache[t.key]={matrix:N,coord:t}}return{u_depth:2,u_terrain:3,u_terrain_dim:l&&l.dem&&l.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[t.key].matrix:this._emptyDemMatrix,u_terrain_unpack:l&&l.dem&&l.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(l&&l.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:l}}getFramebuffer(t){const l=this.painter,f=l.width/devicePixelRatio,g=l.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===g||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new A.T(l.context,{width:f,height:g,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new A.T(l.context,{width:f,height:g,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=l.context.createFramebuffer(f,g,!0,!1),this._fbo.depthAttachment.set(l.context.createRenderbuffer(l.context.gl.DEPTH_COMPONENT16,f,g))),this._fbo.colorAttachment.set(t==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const t=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const l=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let B=0,E=0;B<this._coordsTextureSize;B++)for(let L=0;L<this._coordsTextureSize;L++,E+=4)l[E+0]=255&L,l[E+1]=255&B,l[E+2]=L>>8<<4|B>>8,l[E+3]=0;const f=new A.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(l.buffer)),g=new A.T(t,f,t.gl.RGBA,{premultiply:!1});return g.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),this._coordsTexture=g,g}pointCoordinate(t){this.painter.maybeDrawDepthAndCoords(!0);const l=new Uint8Array(4),f=this.painter.context,g=f.gl,B=Math.round(t.x*this.painter.pixelRatio/devicePixelRatio),E=Math.round(t.y*this.painter.pixelRatio/devicePixelRatio),L=Math.round(this.painter.height/devicePixelRatio);f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),g.readPixels(B,L-E-1,1,1,g.RGBA,g.UNSIGNED_BYTE,l),f.bindFramebuffer.set(null);const N=l[0]+(l[2]>>4<<8),H=l[1]+((15&l[2])<<8),G=this.coordsIndex[255-l[3]],$=G&&this.tileManager.getTileByID(G);if(!$)return null;const Y=this._coordsTextureSize,se=(1<<$.tileID.canonical.z)*Y;return new A.a9(($.tileID.canonical.x*Y+N)/se+$.tileID.wrap,($.tileID.canonical.y*Y+H)/se,this.getElevation($.tileID,N,H,Y))}depthAtPoint(t){const l=new Uint8Array(4),f=this.painter.context,g=f.gl;return f.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),g.readPixels(t.x,this.painter.height/devicePixelRatio-t.y-1,1,1,g.RGBA,g.UNSIGNED_BYTE,l),f.bindFramebuffer.set(null),(l[0]/16777216+l[1]/65536+l[2]/256+l[3])/256}getTerrainMesh(t){var l;const f=((l=this.painter.style.projection)===null||l===void 0?void 0:l.transitionState)>0,g=f&&t.canonical.y===0,B=f&&t.canonical.y===(1<<t.canonical.z)-1,E=`m_${g?"n":""}_${B?"s":""}`;if(this._meshCache[E])return this._meshCache[E];const L=this.painter.context,N=new A.cG,H=new A.aY,G=this.meshSize,$=A.a5/G,Y=G*G;for(let $e=0;$e<=G;$e++)for(let gt=0;gt<=G;gt++)N.emplaceBack(gt*$,$e*$,0);for(let $e=0;$e<Y;$e+=G+1)for(let gt=0;gt<G;gt++)H.emplaceBack(gt+$e,G+gt+$e+1,G+gt+$e+2),H.emplaceBack(gt+$e,G+gt+$e+2,gt+$e+1);const se=N.length,de=se+(G+1),Se=(G+1)*G,Me=g?A.br:0,Ee=g?0:1,je=B?A.bs:A.a5,et=B?0:1;for(let $e=0;$e<=G;$e++)N.emplaceBack($e*$,Me,Ee);for(let $e=0;$e<=G;$e++)N.emplaceBack($e*$,je,et);for(let $e=0;$e<G;$e++)H.emplaceBack(Se+$e,de+$e,de+$e+1),H.emplaceBack(Se+$e,de+$e+1,Se+$e+1),H.emplaceBack(0+$e,se+$e+1,se+$e),H.emplaceBack(0+$e,0+$e+1,se+$e+1);const ze=N.length,nt=ze+2*(G+1);for(const $e of[0,1])for(let gt=0;gt<=G;gt++)for(const Nt of[0,1])N.emplaceBack($e*A.a5,gt*$,Nt);for(let $e=0;$e<2*G;$e+=2)H.emplaceBack(ze+$e,ze+$e+1,ze+$e+3),H.emplaceBack(ze+$e,ze+$e+3,ze+$e+2),H.emplaceBack(nt+$e,nt+$e+3,nt+$e+1),H.emplaceBack(nt+$e,nt+$e+2,nt+$e+3);const at=new Za(L.createVertexBuffer(N,tn.members),L.createIndexBuffer(H),A.aX.simpleSegment(0,0,N.length,H.length));return this._meshCache[E]=at,at}getMeshFrameDelta(t){return 2*Math.PI*A.bE/Math.pow(2,Math.max(t,0))/5}getMinTileElevationForLngLatZoom(t,l){var f;if(!A.cE(l,t.wrap()))return 0;const{tileID:g}=this._getOverscaledTileIDFromLngLatZoom(t,l);return(f=this.getMinMaxElevation(g).minElevation)!==null&&f!==void 0?f:0}getMinMaxElevation(t){const l=this.getTerrainData(t).tile,f={minElevation:null,maxElevation:null};return l&&l.dem&&(f.minElevation=l.dem.min*this.exaggeration,f.maxElevation=l.dem.max*this.exaggeration),f}_getOverscaledTileIDFromLngLatZoom(t,l){const f=A.a9.fromLngLat(t.wrap()),g=(1<<l)*A.a5,B=f.x*g,E=f.y*g,L=Math.floor(B/A.a5),N=Math.floor(E/A.a5);return{tileID:new A.a2(l,0,l,L,N),mercatorX:B,mercatorY:E}}}class Qo{constructor(t,l,f){this._context=t,this._size=l,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const t of this._objects)t.texture.destroy(),t.fbo.destroy()}_createObject(t){const l=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new A.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),l.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),l.colorAttachment.set(f.texture),{id:t,fbo:l,texture:f,stamp:-1,inUse:!1}}getObjectForId(t){return this._objects[t]}useObject(t){t.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((l=>t.id!==l)),this._recentlyUsed.push(t.id)}stampObject(t){t.stamp=++this._stamp}getOrCreateFreeObject(){for(const l of this._recentlyUsed)if(!this._objects[l].inUse)return this._objects[l];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const t=this._createObject(this._objects.length);return this._objects.push(t),t}freeObject(t){t.inUse=!1}freeAllObjects(){for(const t of this._objects)this.freeObject(t)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((t=>!t.inUse))===!1}}const Zi={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class aa{constructor(t,l){this.painter=t,this.terrain=l,this.pool=new Qo(t.context,30,l.tileManager.tileSize*l.qualityFactor)}destruct(){this.pool.destruct()}getTexture(t){return this.pool.getObjectForId(t.rtt[this._stacks.length-1].id).texture}prepareForRender(t,l){var f,g;this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.tileManager.getRenderableTiles(),this._renderableLayerIds=t._order.filter((B=>!t._layers[B].isHidden(l))),this._coordsAscending={};for(const B in t.tileManagers){this._coordsAscending[B]={};const E=t.tileManagers[B].getVisibleCoordinates(),L=t.tileManagers[B].getSource(),N=L instanceof An?L.terrainTileRanges:null;for(const H of E){const G=this.terrain.tileManager.getTerrainCoords(H,N);for(const $ in G)this._coordsAscending[B][$]||(this._coordsAscending[B][$]=[]),this._coordsAscending[B][$].push(G[$])}}this._rttFingerprints={};for(const B of t._order){const E=t._layers[B],L=E.source;if(Zi[E.type]&&!this._rttFingerprints[L]){this._rttFingerprints[L]={};const N=(g=(f=t.tileManagers[L])===null||f===void 0?void 0:f.getState().revision)!==null&&g!==void 0?g:0;for(const H in this._coordsAscending[L])this._rttFingerprints[L][H]=`${this._coordsAscending[L][H].map((G=>G.key)).sort().join()}#${N}`}}for(const B of this._renderableTiles)for(const E in this._rttFingerprints){const L=this._rttFingerprints[E][B.tileID.key];L&&L!==B.rttFingerprint[E]&&(B.rtt=[])}}renderLayer(t,l){if(t.isHidden(this.painter.transform.zoom))return!1;const f=Object.assign(Object.assign({},l),{isRenderingToTexture:!0}),g=t.type,B=this.painter,E=this._renderableLayerIds[this._renderableLayerIds.length-1]===t.id;if(Zi[g]&&(this._prevType&&Zi[this._prevType]||this._stacks.push([]),this._prevType=g,this._stacks[this._stacks.length-1].push(t.id),!E))return!0;if(Zi[this._prevType]||Zi[g]&&E){this._prevType=g;const L=this._stacks.length-1,N=this._stacks[L]||[];for(const H of this._renderableTiles){if(this.pool.isFull()&&(Lh(this.painter,this.terrain,this._rttTiles,f),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(H),H.rtt[L]){const $=this.pool.getObjectForId(H.rtt[L].id);if($.stamp===H.rtt[L].stamp){this.pool.useObject($);continue}}const G=this.pool.getOrCreateFreeObject();this.pool.useObject(G),this.pool.stampObject(G),H.rtt[L]={id:G.id,stamp:G.stamp},B.context.bindFramebuffer.set(G.fbo.framebuffer),B.context.clear({color:A.bp.transparent,stencil:0}),B.currentStencilSource=void 0;for(let $=0;$<N.length;$++){const Y=B.style._layers[N[$]],se=Y.source?this._coordsAscending[Y.source][H.tileID.key]:[H.tileID];B.context.viewport.set([0,0,G.fbo.width,G.fbo.height]),B._renderTileClippingMasks(Y,se,!0),B.renderLayer(B,B.style.tileManagers[Y.source],Y,se,f),Y.source&&(H.rttFingerprint[Y.source]=this._rttFingerprints[Y.source][H.tileID.key])}}return Lh(this.painter,this.terrain,this._rttTiles,f),this._rttTiles=[],this.pool.freeAllObjects(),Zi[g]}return!1}}const sA={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Drag to rotate map, click to reset north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},oA=S,Bc={hash:!1,interactive:!0,bearingSnap:7,zoomSnap:0,attributionControl:Yn,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:A.c.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,reduceMotion:void 0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0,experimentalZoomLevelsToOverscale:void 0,anisotropicFilterPitch:20},_i={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Su{constructor(t,l,f=!1){this.mousedown=B=>{this.startMove(B,W.mousePos(this.element,B)),W.addEventListener(window,"mousemove",this.mousemove),W.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=B=>{this.move(B,W.mousePos(this.element,B))},this.mouseup=B=>{this._rotatePitchHandler.dragEnd(B),this.offTemp()},this.touchstart=B=>{B.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=W.touchPos(this.element,B.targetTouches)[0],this.startMove(B,this._startPos),W.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),W.addEventListener(window,"touchend",this.touchend))},this.touchmove=B=>{B.targetTouches.length!==1?this.reset():(this._lastPos=W.touchPos(this.element,B.targetTouches)[0],this.move(B,this._lastPos))},this.touchend=B=>{B.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=l;const g=new yn;this._rotatePitchHandler=new Vt({clickTolerance:3,move:(B,E)=>{const L=l.getBoundingClientRect(),N=new A.P((L.bottom-L.top)/2,(L.right-L.left)/2);return{bearingDelta:A.cy(new A.P(B.x,E.y),E,N),pitchDelta:f?-.5*(E.y-B.y):void 0}},moveStateManager:g,enable:!0,assignEvents:()=>{}}),this.map=t,W.addEventListener(l,"mousedown",this.mousedown),W.addEventListener(l,"touchstart",this.touchstart,{passive:!1}),W.addEventListener(l,"touchcancel",this.reset)}startMove(t,l){this._rotatePitchHandler.dragStart(t,l),W.disableDrag()}move(t,l){const f=this.map,{bearingDelta:g,pitchDelta:B}=this._rotatePitchHandler.dragMove(t,l)||{};g&&f.setBearing(f.getBearing()+g),B&&f.setPitch(f.getPitch()+B)}off(){const t=this.element;W.removeEventListener(t,"mousedown",this.mousedown),W.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),W.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),W.removeEventListener(window,"touchend",this.touchend),W.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){W.enableDrag(),W.removeEventListener(window,"mousemove",this.mousemove),W.removeEventListener(window,"mouseup",this.mouseup),W.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),W.removeEventListener(window,"touchend",this.touchend)}}let Ul;function Cc(b,t,l,f=!1){if(f||!l.getCoveringTilesDetailsProvider().allowWorldCopies())return b?.wrap();const g=new A.V(b.lng,b.lat);if(b=new A.V(b.lng,b.lat),t){const B=new A.V(b.lng-360,b.lat),E=new A.V(b.lng+360,b.lat),L=l.locationToScreenPoint(b).distSqr(t);l.locationToScreenPoint(B).distSqr(t)<L?b=B:l.locationToScreenPoint(E).distSqr(t)<L&&(b=E)}for(;Math.abs(b.lng-l.center.lng)>180;){const B=l.locationToScreenPoint(b);if(B.x>=0&&B.y>=0&&B.x<=l.width&&B.y<=l.height)break;b.lng>l.center.lng?b.lng-=360:b.lng+=360}return b.lng!==g.lng&&l.isPointOnMapSurface(l.locationToScreenPoint(b))?b:g}const ko={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function $u(b,t,l){const f=b.classList;for(const g in ko)f.remove(`maplibregl-${l}-anchor-${g}`);f.add(`maplibregl-${l}-anchor-${t}`)}class Sc extends A.E{constructor(t){if(super(),this._onClick=l=>{this.fire(new A.l("click",{originalEvent:l}))},this._onKeyPress=l=>{const f=l.code,g=l.charCode||l.keyCode;f!=="Space"&&f!=="Enter"&&g!==32&&g!==13||this.togglePopup()},this._onMapClick=l=>{const f=l.originalEvent.target,g=this._element;this._popup&&(f===g||g.contains(f))&&this.togglePopup()},this._update=l=>{if(!this._map)return;const f=this._map.loaded()&&!this._map.isMoving();(l?.type==="terrain"||l?.type==="render"&&!f)&&this._map.once("render",this._update),this._lngLat=Cc(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let g="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?g=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(g=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let B="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?B="rotateX(0deg)":this._pitchAlignment==="map"&&(B=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||l&&l.type!=="moveend"||(this._pos=this._pos.round()),W.setTransform(this._element,`${ko[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${B} ${g}`),O.frameAsync(new AbortController,this._map._ownerWindow).then((()=>{this._updateOpacity(l&&l.type==="moveend")})).catch((()=>{}))},this._onMove=l=>{if(!this._isDragging){const f=this._clickTolerance||this._map._clickTolerance;this._isDragging=l.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=l.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new A.l("dragstart"))),this.fire(new A.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new A.l("dragend")),this._state="inactive"},this._addDragHandler=l=>{this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(this._pos).add(this._offset),this._pointerdownPos=l.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._subpixelPositioning=t&&t.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment!=="auto"?t.pitchAlignment:this._rotationAlignment,this.setOpacity(t?.opacity,t?.opacityWhenCovered),t&&t.element)this._element=t.element,this._offset=A.P.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=W.create("div");const l=W.createNS("http://www.w3.org/2000/svg","svg"),f=41,g=27;l.setAttributeNS(null,"display","block"),l.setAttributeNS(null,"height",`${f}px`),l.setAttributeNS(null,"width",`${g}px`),l.setAttributeNS(null,"viewBox",`0 0 ${g} ${f}`);const B=W.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"stroke","none"),B.setAttributeNS(null,"stroke-width","1"),B.setAttributeNS(null,"fill","none"),B.setAttributeNS(null,"fill-rule","evenodd");const E=W.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"fill-rule","nonzero");const L=W.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"transform","translate(3.0, 29.0)"),L.setAttributeNS(null,"fill","#000000");const N=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ee of N){const je=W.createNS("http://www.w3.org/2000/svg","ellipse");je.setAttributeNS(null,"opacity","0.04"),je.setAttributeNS(null,"cx","10.5"),je.setAttributeNS(null,"cy","5.80029008"),je.setAttributeNS(null,"rx",Ee.rx),je.setAttributeNS(null,"ry",Ee.ry),L.appendChild(je)}const H=W.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"fill",this._color);const G=W.createNS("http://www.w3.org/2000/svg","path");G.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),H.appendChild(G);const $=W.createNS("http://www.w3.org/2000/svg","g");$.setAttributeNS(null,"opacity","0.25"),$.setAttributeNS(null,"fill","#000000");const Y=W.createNS("http://www.w3.org/2000/svg","path");Y.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),$.appendChild(Y);const se=W.createNS("http://www.w3.org/2000/svg","g");se.setAttributeNS(null,"transform","translate(6.0, 7.0)"),se.setAttributeNS(null,"fill","#FFFFFF");const de=W.createNS("http://www.w3.org/2000/svg","g");de.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Se=W.createNS("http://www.w3.org/2000/svg","circle");Se.setAttributeNS(null,"fill","#000000"),Se.setAttributeNS(null,"opacity","0.25"),Se.setAttributeNS(null,"cx","5.5"),Se.setAttributeNS(null,"cy","5.5"),Se.setAttributeNS(null,"r","5.4999962");const Me=W.createNS("http://www.w3.org/2000/svg","circle");Me.setAttributeNS(null,"fill","#FFFFFF"),Me.setAttributeNS(null,"cx","5.5"),Me.setAttributeNS(null,"cy","5.5"),Me.setAttributeNS(null,"r","5.4999962"),de.appendChild(Se),de.appendChild(Me),E.appendChild(L),E.appendChild(H),E.appendChild($),E.appendChild(se),E.appendChild(de),l.appendChild(E),l.setAttributeNS(null,"height",f*this._scale+"px"),l.setAttributeNS(null,"width",g*this._scale+"px"),this._element.appendChild(l),this._offset=A.P.convert(t&&t.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(l=>{l.preventDefault()})),this._element.addEventListener("mousedown",(l=>{l.preventDefault()})),$u(this._element,this._anchor,"marker"),this._element.addEventListener("click",this._onClick),t&&t.className)for(const l of t.className.split(" "))this._element.classList.add(l);this._popup=null}addTo(t){return this.remove(),this._map=t,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",t._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),t.on("terrain",this._update),t.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),W.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=A.V.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const g=Math.abs(13.5)/Math.SQRT2;t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[g,-1*(38.1-13.5+g)],"bottom-right":[-g,-1*(38.1-13.5+g)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=t,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(t){return this._subpixelPositioning=t,this}getPopup(){return this._popup}togglePopup(){const t=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:t?(t.isOpen()?t.remove():(t.setLngLat(this._lngLat),t.addTo(this._map)),this):this}_updateOpacity(t=!1){var l,f;const g=(l=this._map)===null||l===void 0?void 0:l.terrain,B=this._map.transform.isLocationOccluded(this._lngLat);if(!g||B){const se=B?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==se&&(this._element.style.opacity=se))}if(t)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const E=this._map,L=E.terrain.depthAtPoint(this._pos),N=E.terrain.getElevationForLngLat(this._lngLat,E.transform);if(E.transform.lngLatToCameraDepth(this._lngLat,N)-L<.006)return void(this._element.style.opacity=this._opacity);const H=-this._offset.y/E.transform.pixelsPerMeter,G=Math.sin(E.getPitch()*Math.PI/180)*H,$=E.terrain.depthAtPoint(new A.P(this._pos.x,this._pos.y-this._offset.y)),Y=E.transform.lngLatToCameraDepth(this._lngLat,N+G)-$>.006;!((f=this._popup)===null||f===void 0)&&f.isOpen()&&Y&&this._popup.remove(),this._element.style.opacity=Y?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(t){return this._offset=A.P.convert(t),this._update(),this}addClassName(t){this._element.classList.add(t)}removeClassName(t){this._element.classList.remove(t)}toggleClassName(t){return this._element.classList.toggle(t)}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&t!=="auto"?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(t,l){return(this._opacity===void 0||t===void 0&&l===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),t!==void 0&&(this._opacity=t),l!==void 0&&(this._opacityWhenCovered=l),this._map&&this._updateOpacity(!0),this}}const Eu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let RA=0,Xi=!1;const Oi={maxWidth:100,unit:"metric"};function cc(b,t,l){const f=l&&l.maxWidth||100,g=b._container.clientHeight/2,B=b._container.clientWidth/2,E=b.unproject([B-f/2,g]),L=b.unproject([B+f/2,g]),N=Math.round(b.project(L).x-b.project(E).x),H=Math.min(f,N,b._container.clientWidth),G=E.distanceTo(L);if(l&&l.unit==="imperial"){const $=3.2808*G;$>5280?_o(t,H,$/5280,b._getUIString("ScaleControl.Miles")):_o(t,H,$,b._getUIString("ScaleControl.Feet"))}else l&&l.unit==="nautical"?_o(t,H,G/1852,b._getUIString("ScaleControl.NauticalMiles")):G>=1e3?_o(t,H,G/1e3,b._getUIString("ScaleControl.Kilometers")):_o(t,H,G,b._getUIString("ScaleControl.Meters"))}function _o(b,t,l,f){const g=(function(B){const E=Math.pow(10,`${Math.floor(B)}`.length-1);let L=B/E;return L=L>=10?10:L>=5?5:L>=3?3:L>=2?2:L>=1?1:(function(N){const H=Math.pow(10,Math.ceil(-Math.log(N)/Math.LN10));return Math.round(N*H)/H})(L),E*L})(l);b.style.width=t*(g/l)+"px",b.innerHTML=`${g}&nbsp;${f}`}const QA={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0,padding:void 0},kA=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Oo(b){if(b){if(typeof b=="number"){const t=Math.round(Math.abs(b)/Math.SQRT2);return{center:new A.P(0,0),top:new A.P(0,b),"top-left":new A.P(t,t),"top-right":new A.P(-t,t),bottom:new A.P(0,-b),"bottom-left":new A.P(t,-t),"bottom-right":new A.P(-t,-t),left:new A.P(b,0),right:new A.P(-b,0)}}if(b instanceof A.P||Array.isArray(b)){const t=A.P.convert(b);return{center:t,top:t,"top-left":t,"top-right":t,bottom:t,"bottom-left":t,"bottom-right":t,left:t,right:t}}return{center:A.P.convert(b.center||[0,0]),top:A.P.convert(b.top||[0,0]),"top-left":A.P.convert(b["top-left"]||[0,0]),"top-right":A.P.convert(b["top-right"]||[0,0]),bottom:A.P.convert(b.bottom||[0,0]),"bottom-left":A.P.convert(b["bottom-left"]||[0,0]),"bottom-right":A.P.convert(b["bottom-right"]||[0,0]),left:A.P.convert(b.left||[0,0]),right:A.P.convert(b.right||[0,0])}}return Oo(new A.P(0,0))}const Xc=S;v.AJAXError=A.cJ,v.EXTENT=A.a5,v.Event=A.l,v.Evented=A.E,v.LngLat=A.V,v.MercatorCoordinate=A.a9,v.Point=A.P,v.addProtocol=A.cK,v.config=A.c,v.removeProtocol=A.cL,v.AttributionControl=ds,v.BoxZoomHandler=Oe,v.CanvasSource=Sn,v.CooperativeGesturesHandler=yr,v.DoubleClickZoomHandler=Rn,v.DragPanHandler=Un,v.DragRotateHandler=na,v.EdgeInsets=Os,v.FullscreenControl=class extends A.E{constructor(b={}){var t;super(),this._onFullscreenChange=()=>{var l;let f=window.document.fullscreenElement||window.document.webkitFullscreenElement;for(;!((l=f?.shadowRoot)===null||l===void 0)&&l.fullscreenElement;)f=f.shadowRoot.fullscreenElement;f===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,this._pseudo=(t=b.pseudo)!==null&&t!==void 0&&t,b&&b.container&&(b.container instanceof HTMLElement?this._container=b.container:A.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(b){return this._map=b,this._container||(this._container=this._map.getContainer()),this._controlContainer=W.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){W.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const b=this._fullscreenButton=W.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);W.create("span","maplibregl-ctrl-icon",b).setAttribute("aria-hidden","true"),b.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const b=this._getTitle();this._fullscreenButton.setAttribute("aria-label",b),this._fullscreenButton.title=b}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new A.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new A.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){this._pseudo?this._togglePseudoFullScreen():window.document.exitFullscreen?window.document.exitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._pseudo?this._togglePseudoFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},v.GeoJSONSource=Cn,v.GeolocateControl=class extends A.E{constructor(b){super(),this._onSuccess=t=>{if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new A.l("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(t),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new A.l("geolocate",t)),this._finish()}},this._updateCamera=t=>{const l=new A.V(t.coords.longitude,t.coords.latitude),f=t.coords.accuracy,g=this._map.getBearing(),B=A.e({bearing:g},this.options.fitBoundsOptions),E=Qr.fromLngLat(l,f);this._map.fitBounds(E,B,{geolocateSource:!0})},this._updateMarker=t=>{if(t){const l=new A.V(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=t.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=t=>{if(this._map){if(t.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(t.code===3&&Xi)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new A.l("error",t)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this._geolocateButton=W.create("button","maplibregl-ctrl-geolocate",this._container),W.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=t=>{if(this._map){if(t===!1){A.w("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=W.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Sc({element:this._dotElement}),this._circleElement=W.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Sc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(l=>{const f=l?.[0]instanceof ResizeObserverEntry;l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||f||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new A.l("trackuserlocationend")),this.fire(new A.l("userlocationlostfocus")))}))}},this.options=A.e({},Eu,b)}onAdd(b){return this._map=b,this._container=W.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return A._(this,arguments,void 0,(function*(t=!1){if(Ul!==void 0&&!t)return Ul;if(window.navigator.permissions===void 0)return Ul=!!window.navigator.geolocation,Ul;try{Ul=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Ul=!!window.navigator.geolocation}return Ul}))})().then((t=>this._finishSetupUI(t))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),W.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,RA=0,Xi=!1}_isOutOfMapMaxBounds(b){const t=this._map.getMaxBounds(),l=b.coords;return t&&(l.longitude<t.getWest()||l.longitude>t.getEast()||l.latitude<t.getSouth()||l.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const b=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&b))return;const t=this._map.project(b),l=this._map.unproject([t.x+100,t.y]),f=b.distanceTo(l)/100,g=2*this._accuracy/f;this._circleElement.style.width=`${g.toFixed(2)}px`,this._circleElement.style.height=`${g.toFixed(2)}px`}trigger(){if(!this._setup)return A.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new A.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":RA--,Xi=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new A.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new A.l("trackuserlocationstart")),this.fire(new A.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let b;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),RA++,RA>1?(b={maximumAge:6e5,timeout:0},Xi=!0):(b=this.options.positionOptions,Xi=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,b)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},v.GlobeControl=class{constructor(){this._toggleProjection=()=>{var b;const t=(b=this._map.getProjection())===null||b===void 0?void 0:b.type;this._map.setProjection(t!=="mercator"&&t?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var b;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((b=this._map.getProjection())===null||b===void 0?void 0:b.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(b){return this._map=b,this._container=W.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=W.create("button","maplibregl-ctrl-globe",this._container),W.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._map.on("projectiontransition",this._updateGlobeIcon),this._container}onRemove(){W.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._map.off("projectiontransition",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},v.Hash=iA,v.ImageSource=An,v.KeyboardHandler=$a,v.LngLatBounds=Qr,v.LogoControl=ia,v.Map=class extends Gn{get _ownerWindow(){var b,t;return((t=(b=this._container)===null||b===void 0?void 0:b.ownerDocument)===null||t===void 0?void 0:t.defaultView)||window}constructor(b){var t,l;A.cH.mark(A.cI.create);const f=Object.assign(Object.assign(Object.assign({},Bc),b),{canvasContextAttributes:Object.assign(Object.assign({},Bc.canvasContextAttributes),b.canvasContextAttributes)});if(f.minZoom!=null&&f.maxZoom!=null&&f.minZoom>f.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(f.minPitch!=null&&f.maxPitch!=null&&f.minPitch>f.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(f.minPitch!=null&&f.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(f.maxPitch!=null&&f.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const g=new ca,B=new Lo;f.minZoom!==void 0&&g.setMinZoom(f.minZoom),f.maxZoom!==void 0&&g.setMaxZoom(f.maxZoom),f.minPitch!==void 0&&g.setMinPitch(f.minPitch),f.maxPitch!==void 0&&g.setMaxPitch(f.maxPitch),f.renderWorldCopies!==void 0&&g.setRenderWorldCopies(f.renderWorldCopies),f.transformConstrain!==null&&g.setConstrainOverride(f.transformConstrain),super(g,B,{bearingSnap:f.bearingSnap,zoomSnap:f.zoomSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new on,this._controls=[],this._mapId=A.af(),this._lostContextStyle={style:null,images:null},this._contextLost=L=>{if(L.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.painter.destroy(),this._lostContextStyle=this._getStyleAndImages(),this.style){for(const N of Object.values(this.style._layers))if(N.type==="custom"&&console.warn(`Custom layer with id '${N.id}' cannot be restored after WebGL context loss. You will need to re-add it manually after context restoration.`),N._listeners)for(const[H]of Object.entries(N._listeners))console.warn(`Custom layer with id '${N.id}' had event listeners for event '${H}' which cannot be restored after WebGL context loss. You will need to re-add them manually after context restoration.`);this.style.destroy(),this.style=null,this.fire(new A.l("webglcontextlost",{originalEvent:L}))}else this.fire(new A.l("webglcontextlost",{originalEvent:L}))},this._contextRestored=L=>{this._lostContextStyle.style&&this.setStyle(this._lostContextStyle.style,{diff:!1}),this._lostContextStyle.images&&(this.style.imageManager.images=this._lostContextStyle.images),this._lostContextStyle={style:null,images:null},this._setupPainter(),this.resize(),this._update(),this._resizeInternal(),this.fire(new A.l("webglcontextrestored",{originalEvent:L}))},this._onMapScroll=L=>{if(L.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=f.interactive,this._maxTileCacheSize=f.maxTileCacheSize,this._maxTileCacheZoomLevels=f.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},f.canvasContextAttributes),this._trackResize=f.trackResize===!0,this._bearingSnap=f.bearingSnap,this._zoomSnap=f.zoomSnap,this._centerClampedToGround=f.centerClampedToGround,this._refreshExpiredTiles=f.refreshExpiredTiles===!0,this._fadeDuration=f.fadeDuration,this._crossSourceCollisions=f.crossSourceCollisions===!0,this._collectResourceTiming=f.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},sA),f.locale),this._clickTolerance=f.clickTolerance,this._overridePixelRatio=f.pixelRatio,this._maxCanvasSize=f.maxCanvasSize,this._zoomLevelsToOverscale=f.experimentalZoomLevelsToOverscale,this.transformCameraUpdate=f.transformCameraUpdate,this.transformConstrain=f.transformConstrain,this.cancelPendingTileRequestsWhileZooming=f.cancelPendingTileRequestsWhileZooming===!0,this.setAnisotropicFilterPitch(f.anisotropicFilterPitch),f.reduceMotion!==void 0&&(O.prefersReducedMotion=f.reduceMotion),this._imageQueueHandle=ut.addThrottleControl((()=>this.isMoving())),this._requestManager=new Ne(f.transformRequest),this._container=this._resolveContainer(f.container),f.maxBounds&&this.setMaxBounds(f.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"&&(this._ownerWindow.addEventListener("online",this._onWindowOnline,!1),this._setupResizeObserver()),this.handlers=new ei(this,f),this._hash=f.hash&&new iA(typeof f.hash=="string"&&f.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:f.center,elevation:f.elevation,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch,roll:f.roll}),f.bounds&&(this.resize(),this.fitBounds(f.bounds,A.e({},f.fitBoundsOptions,{duration:0}))));const E=typeof f.style=="string"||((l=(t=f.style)===null||t===void 0?void 0:t.projection)===null||l===void 0?void 0:l.type)!=="globe";this.resize(null,E),this._localIdeographFontFamily=f.localIdeographFontFamily,this._validateStyle=f.validateStyle,f.style&&this.setStyle(f.style,{localIdeographFontFamily:f.localIdeographFontFamily}),f.attributionControl&&this.addControl(new ds(typeof f.attributionControl=="boolean"?void 0:f.attributionControl)),f.maplibreLogo&&this.addControl(new ia,f.logoPosition),this.on("style.load",(()=>{if(E||this._resizeTransform(),this.transform.unmodified){const L=A.U(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(L)}})),this.on("data",(L=>{this._update(L.dataType==="style"),this.fire(new A.l(`${L.dataType}data`,L))})),this.on("dataloading",(L=>{this.fire(new A.l(`${L.dataType}dataloading`,L))})),this.on("dataabort",(L=>{this.fire(new A.l("sourcedataabort",L))}))}_getMapId(){return this._mapId}setGlobalStateProperty(b,t){return this.style.setGlobalStateProperty(b,t),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(b,t){if(t===void 0&&(t=b.getDefaultPosition?b.getDefaultPosition():"top-right"),!b||!b.onAdd)return this.fire(new A.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const l=b.onAdd(this);this._controls.push(b);const f=this._controlPositions[t];return t.indexOf("bottom")!==-1?f.insertBefore(l,f.firstChild):f.appendChild(l),this}removeControl(b){if(!b||!b.onRemove)return this.fire(new A.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const t=this._controls.indexOf(b);return t>-1&&this._controls.splice(t,1),b.onRemove(this),this}hasControl(b){return this._controls.indexOf(b)>-1}coveringTiles(b){return Kn(this.transform,b)}calculateCameraOptionsFromTo(b,t,l,f){return f==null&&this.terrain&&(f=this.terrain.getElevationForLngLat(l,this.transform)),super.calculateCameraOptionsFromTo(b,t,l,f)}resize(b,t=!0){if(this._lostContextStyle.style!==null)return this;this._resizeInternal(t);const l=!this._moving;return l&&(this.stop(),this.fire(new A.l("movestart",b)).fire(new A.l("move",b))),this.fire(new A.l("resize",b)),l&&this.fire(new A.l("moveend",b)),this}_resizeInternal(b=!0){const[t,l]=this._containerDimensions(),f=this._getClampedPixelRatio(t,l);if(this._resizeCanvas(t,l,f),this.painter.resize(t,l,f),this.painter.overLimit()){const g=this.painter.context.gl;this._maxCanvasSize=[g.drawingBufferWidth,g.drawingBufferHeight];const B=this._getClampedPixelRatio(t,l);this._resizeCanvas(t,l,B),this.painter.resize(t,l,B)}this._resizeTransform(b)}_resizeTransform(b=!0){var t;const[l,f]=this._containerDimensions();this.transform.resize(l,f,b),(t=this._requestedCameraState)===null||t===void 0||t.resize(l,f,b)}_getClampedPixelRatio(b,t){const{0:l,1:f}=this._maxCanvasSize,g=this.getPixelRatio(),B=b*g,E=t*g;return Math.min(B>l?l/B:1,E>f?f/E:1)*g}getPixelRatio(){var b;return(b=this._overridePixelRatio)!==null&&b!==void 0?b:devicePixelRatio}setPixelRatio(b){this._overridePixelRatio=b,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(b){return this.transform.setMaxBounds(Qr.convert(b)),this._update()}setMinZoom(b){if((b=b??-2)>=-2&&b<=this.transform.maxZoom){const t=this.transform.zoom,l=this._getTransformForUpdate();return l.setMinZoom(b),this._applyUpdatedTransform(l),this._update(),t!==this.transform.zoom&&this.fire(new A.l("zoomstart")).fire(new A.l("zoom")).fire(new A.l("zoomend")).fire(new A.l("movestart")).fire(new A.l("move")).fire(new A.l("moveend")),this}throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(b){if((b=b??22)>=this.transform.minZoom){const t=this.transform.zoom,l=this._getTransformForUpdate();return l.setMaxZoom(b),this._applyUpdatedTransform(l),this._update(),t!==this.transform.zoom&&this.fire(new A.l("zoomstart")).fire(new A.l("zoom")).fire(new A.l("zoomend")).fire(new A.l("movestart")).fire(new A.l("move")).fire(new A.l("moveend")),this}throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(b){if((b=b??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(b>=0&&b<=this.transform.maxPitch){const t=this.transform.pitch,l=this._getTransformForUpdate();return l.setMinPitch(b),this._applyUpdatedTransform(l),this._update(),t!==this.transform.pitch&&this.fire(new A.l("pitchstart")).fire(new A.l("pitch")).fire(new A.l("pitchend")).fire(new A.l("movestart")).fire(new A.l("move")).fire(new A.l("moveend")),this}throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(b){if((b=b??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(b>=this.transform.minPitch){const t=this.transform.pitch,l=this._getTransformForUpdate();return l.setMaxPitch(b),this._applyUpdatedTransform(l),this._update(),t!==this.transform.pitch&&this.fire(new A.l("pitchstart")).fire(new A.l("pitch")).fire(new A.l("pitchend")).fire(new A.l("movestart")).fire(new A.l("move")).fire(new A.l("moveend")),this}throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getAnisotropicFilterPitch(){return this._anisotropicFilterPitch}setAnisotropicFilterPitch(b){if((b=b??20)>180)throw new Error("anisotropicFilterPitch must be less than or equal to 180");if(b<0)throw new Error("anisotropicFilterPitch must be greater than or equal to 0");return this._anisotropicFilterPitch=b,this._update()}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(b){return this.transform.setRenderWorldCopies(b),this._update()}setTransformConstrain(b){return this.transform.setConstrainOverride(b),this._update()}project(b){return this.transform.locationToScreenPoint(A.V.convert(b),this.style&&this.terrain)}unproject(b){return this.transform.screenPointToLocation(A.P.convert(b),this.terrain)}isMoving(){var b;return this._moving||((b=this.handlers)===null||b===void 0?void 0:b.isMoving())}isZooming(){var b;return this._zooming||((b=this.handlers)===null||b===void 0?void 0:b.isZooming())}isRotating(){var b;return this._rotating||((b=this.handlers)===null||b===void 0?void 0:b.isRotating())}_createDelegatedListener(b,t,l){if(b==="mouseenter"||b==="mouseover"){let f=!1;return{layers:t,listener:l,delegates:{mousemove:B=>{const E=t.filter((N=>this.getLayer(N))),L=E.length!==0?this.queryRenderedFeatures(B.point,{layers:E}):[];L.length?f||(f=!0,l.call(this,new ge(b,this,B.originalEvent,{features:L}))):f=!1},mouseout:()=>{f=!1}}}}if(b==="mouseleave"||b==="mouseout"){let f=!1;return{layers:t,listener:l,delegates:{mousemove:E=>{const L=t.filter((N=>this.getLayer(N)));(L.length!==0?this.queryRenderedFeatures(E.point,{layers:L}):[]).length?f=!0:f&&(f=!1,l.call(this,new ge(b,this,E.originalEvent)))},mouseout:E=>{f&&(f=!1,l.call(this,new ge(b,this,E.originalEvent)))}}}}{const f=g=>{const B=t.filter((L=>this.getLayer(L))),E=B.length!==0?this.queryRenderedFeatures(g.point,{layers:B}):[];E.length&&(g.features=E,l.call(this,g),delete g.features)};return{layers:t,listener:l,delegates:{[b]:f}}}}_saveDelegatedListener(b,t){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[b]=this._delegatedListeners[b]||[],this._delegatedListeners[b].push(t)}_removeDelegatedListener(b,t,l){if(!this._delegatedListeners||!this._delegatedListeners[b])return;const f=this._delegatedListeners[b];for(let g=0;g<f.length;g++){const B=f[g];if(B.listener===l&&B.layers.length===t.length&&B.layers.every((E=>t.includes(E)))){for(const E in B.delegates)this.off(E,B.delegates[E]);return void f.splice(g,1)}}}on(b,t,l){if(l===void 0)return super.on(b,t);const f=typeof t=="string"?[t]:t,g=this._createDelegatedListener(b,f,l);this._saveDelegatedListener(b,g);for(const B in g.delegates)this.on(B,g.delegates[B]);return{unsubscribe:()=>{this._removeDelegatedListener(b,f,l)}}}once(b,t,l){if(l===void 0)return super.once(b,t);const f=typeof t=="string"?[t]:t,g=this._createDelegatedListener(b,f,l);for(const B in g.delegates){const E=g.delegates[B];g.delegates[B]=(...L)=>{this._removeDelegatedListener(b,f,l),E(...L)}}this._saveDelegatedListener(b,g);for(const B in g.delegates)this.once(B,g.delegates[B]);return this}off(b,t,l){return l===void 0?super.off(b,t):(this._removeDelegatedListener(b,typeof t=="string"?[t]:t,l),this)}queryRenderedFeatures(b,t){if(!this.style)return[];let l;const f=b instanceof A.P||Array.isArray(b),g=f?b:[[0,0],[this.transform.width,this.transform.height]];if(t=t||(f?{}:b)||{},g instanceof A.P||typeof g[0]=="number")l=[A.P.convert(g)];else{const B=A.P.convert(g[0]),E=A.P.convert(g[1]);l=[B,new A.P(E.x,B.y),E,new A.P(B.x,E.y),B]}return this.style.queryRenderedFeatures(l,t,this.transform)}querySourceFeatures(b,t){return this.style.querySourceFeatures(b,t)}setStyle(b,t){return(t=A.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},t)).diff!==!1&&t.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&b?(this._diffStyle(b,t),this):(this._localIdeographFontFamily=t.localIdeographFontFamily,this._updateStyle(b,t))}setTransformRequest(b){return this._requestManager.setTransformRequest(b),this}_getUIString(b){const t=this._locale[b];if(t==null)throw new Error(`Missing UI string '${b}'`);return t}_updateStyle(b,t){var l,f;if(t.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(b,t)));const g=this.style&&t.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!b)),b?(this.style=new Zl(this,t||{}),this.style.setEventedParent(this,{style:this.style}),typeof b=="string"?this.style.loadURL(b,t,g):this.style.loadJSON(b,t,g),this):((f=(l=this.style)===null||l===void 0?void 0:l.projection)===null||f===void 0||f.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Zl(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(b,t){if(typeof b=="string"){const l=this._requestManager.transformRequest(b,"Style");A.j(l,new AbortController).then((f=>{this._updateDiff(f.data,t)})).catch((f=>{f&&this.fire(new A.k(f))}))}else typeof b=="object"&&this._updateDiff(b,t)}_updateDiff(b,t){try{this.style.setState(b,t)&&this._update(!0)}catch(l){A.w(`Unable to perform style diff: ${l.message||l.error||l}.  Rebuilding the style from scratch.`),this._updateStyle(b,t)}}getStyle(){if(this.style)return this.style.serialize()}_getStyleAndImages(){return this.style?{style:this.style.serialize(),images:this.style.imageManager.cloneImages()}:{style:null,images:{}}}isStyleLoaded(){return this.style?this.style.loaded():A.w("There is no style added to the map.")}addSource(b,t){return this._lazyInitEmptyStyle(),this.style.addSource(b,t),this._update(!0)}isSourceLoaded(b){const t=this.style&&this.style.tileManagers[b];if(t!==void 0)return t.loaded();this.fire(new A.k(new Error(`There is no tile manager with ID '${b}'`)))}setTerrain(b){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),b){const t=this.style.tileManagers[b.source];if(!t)throw new Error(`cannot load terrain, because there exists no source with ID: ${b.source}`);this.terrain===null&&t.reload();for(const l in this.style._layers){const f=this.style._layers[l];f.type==="hillshade"&&f.source===b.source&&A.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),f.type==="color-relief"&&f.source===b.source&&A.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new $n(this.painter,t,b),this.painter.renderToTexture=new aa(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=l=>{var f;l.dataType==="style"?this.terrain.tileManager.freeRtt():l.dataType==="source"&&l.tile&&(l.sourceId!==b.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((f=l.source)===null||f===void 0?void 0:f.type)==="image"?this.terrain.tileManager.freeRtt():this.terrain.tileManager.freeRtt(l.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.tileManager.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new A.l("terrain",{terrain:b})),this}getTerrain(){var b,t;return(t=(b=this.terrain)===null||b===void 0?void 0:b.options)!==null&&t!==void 0?t:null}areTilesLoaded(){const b=this.style&&this.style.tileManagers;for(const t of Object.values(b))if(!t.areTilesLoaded())return!1;return!0}removeSource(b){return this.style.removeSource(b),this._update(!0)}getSource(b){return this.style.getSource(b)}setSourceTileLodParams(b,t,l){if(l){const f=this.getSource(l);if(!f)throw new Error(`There is no source with ID "${l}", cannot set LOD parameters`);f.calculateTileZoom=Pr(Math.max(1,b),Math.max(1,t))}else for(const f in this.style.tileManagers)this.style.tileManagers[f].getSource().calculateTileZoom=Pr(Math.max(1,b),Math.max(1,t));return this._update(!0),this}refreshTiles(b,t){const l=this.style.tileManagers[b];if(!l)throw new Error(`There is no tile manager with ID "${b}", cannot refresh tile`);t===void 0?l.reload(!0):l.refreshTiles(t.map((f=>new A.ac(f.z,f.x,f.y))))}addImage(b,t,l={}){const{pixelRatio:f=1,sdf:g=!1,stretchX:B,stretchY:E,content:L,textFitWidth:N,textFitHeight:H}=l;if(this._lazyInitEmptyStyle(),!(t instanceof HTMLImageElement||A.b(t))){if(t.width===void 0||t.height===void 0)return this.fire(new A.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:G,height:$,data:Y}=t,se=t;return this.style.addImage(b,{data:new A.R({width:G,height:$},new Uint8Array(Y)),pixelRatio:f,stretchX:B,stretchY:E,content:L,textFitWidth:N,textFitHeight:H,sdf:g,version:0,userImage:se}),se.onAdd&&se.onAdd(this,b),this}}{const{width:G,height:$,data:Y}=O.getImageData(t);this.style.addImage(b,{data:new A.R({width:G,height:$},Y),pixelRatio:f,stretchX:B,stretchY:E,content:L,textFitWidth:N,textFitHeight:H,sdf:g,version:0})}}updateImage(b,t){const l=this.style.getImage(b);if(!l)return this.fire(new A.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=t instanceof HTMLImageElement||A.b(t)?O.getImageData(t):t,{width:g,height:B,data:E}=f;if(g===void 0||B===void 0)return this.fire(new A.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(g!==l.data.width||B!==l.data.height)return this.fire(new A.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const L=!(t instanceof HTMLImageElement||A.b(t));return l.data.replace(E,L),this.style.updateImage(b,l),this}getImage(b){return this.style.getImage(b)}hasImage(b){return b?!!this.style.getImage(b):(this.fire(new A.k(new Error("Missing required image id"))),!1)}removeImage(b){this.style.removeImage(b)}loadImage(b){return ut.getImage(this._requestManager.transformRequest(b,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(b,t){return this._lazyInitEmptyStyle(),this.style.addLayer(b,t),this._update(!0)}moveLayer(b,t){return this.style.moveLayer(b,t),this._update(!0)}removeLayer(b){return this.style.removeLayer(b),this._update(!0)}getLayer(b){return this.style.getLayer(b)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(b,t,l){return this.style.setLayerZoomRange(b,t,l),this._update(!0)}setFilter(b,t,l={}){return this.style.setFilter(b,t,l),this._update(!0)}getFilter(b){return this.style.getFilter(b)}setPaintProperty(b,t,l,f={}){return this.style.setPaintProperty(b,t,l,f),this._update(!0)}getPaintProperty(b,t){return this.style.getPaintProperty(b,t)}setLayoutProperty(b,t,l,f={}){return this.style.setLayoutProperty(b,t,l,f),this._update(!0)}getLayoutProperty(b,t){return this.style.getLayoutProperty(b,t)}setGlyphs(b,t={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(b,t),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(b,t,l={}){return this._lazyInitEmptyStyle(),this.style.addSprite(b,t,l,(f=>{f||this._update(!0)})),this}removeSprite(b){return this._lazyInitEmptyStyle(),this.style.removeSprite(b),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(b,t={}){return this._lazyInitEmptyStyle(),this.style.setSprite(b,t,(l=>{l||this._update(!0)})),this}setLight(b,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(b,t),this._update(!0)}getLight(){return this.style.getLight()}setSky(b,t={}){return this._lazyInitEmptyStyle(),this.style.setSky(b,t),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(b,t){return this.style.setFeatureState(b,t),this._update()}removeFeatureState(b,t){return this.style.removeFeatureState(b,t),this._update()}getFeatureState(b){return this.style.getFeatureState(b)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let b=0,t=0;return this._container&&(b=this._container.clientWidth||400,t=this._container.clientHeight||300),[b,t]}_setupResizeObserver(){var b;let t=!1;const l=ta((g=>{this._trackResize&&!this._removed&&(this.resize(g),this.redraw())}),50),f=(b=this._ownerWindow.ResizeObserver)!==null&&b!==void 0?b:ResizeObserver;this._resizeObserver=new f((g=>{t?l(g):t=!0})),this._resizeObserver.observe(this._container)}_resolveContainer(b){if(typeof b=="string"){const t=document.getElementById(b);if(!t)throw new Error(`Container '${b}' not found.`);return t}if(b instanceof HTMLElement||b&&typeof b=="object"&&b.nodeType===1)return b;throw new Error("Invalid type: 'container' must be a String or HTMLElement.")}_setupContainer(){const b=this._container;b.classList.add("maplibregl-map");const t=this._canvasContainer=W.create("div","maplibregl-canvas-container",b);this._interactive&&t.classList.add("maplibregl-interactive"),this._canvas=W.create("canvas","maplibregl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const l=this._containerDimensions(),f=this._getClampedPixelRatio(l[0],l[1]);this._resizeCanvas(l[0],l[1],f);const g=this._controlContainer=W.create("div","maplibregl-control-container",b),B=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((E=>{B[E]=W.create("div",`maplibregl-ctrl-${E} `,g)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(b,t,l){this._canvas.width=Math.floor(l*b),this._canvas.height=Math.floor(l*t),this._canvas.style.width=`${b}px`,this._canvas.style.height=`${t}px`}_setupPainter(){const b=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let t=null;this._canvas.addEventListener("webglcontextcreationerror",(f=>{t={requestedAttributes:b},f&&(t.statusMessage=f.statusMessage,t.type=f.type)}),{once:!0});let l=null;if(l=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,b):this._canvas.getContext("webgl2",b)||this._canvas.getContext("webgl",b),!l){const f="Failed to initialize WebGL";throw t?(t.message=f,new Error(JSON.stringify(t))):new Error(f)}this.painter=new uf(l,this.transform),le.testSupport(l)}migrateProjection(b,t){super.migrateProjection(b,t),this.painter.transform=b,this.fire(new A.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(b){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||b,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(b){return this._update(),this._renderTaskQueue.add(b)}_cancelRenderFrame(b){this._renderTaskQueue.remove(b)}_render(b){var t,l,f,g,B;const E=this._idleTriggered?this._fadeDuration:0,L=((t=this.style.projection)===null||t===void 0?void 0:t.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(b),this._removed)return;let N=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const $=this.transform.zoom,Y=ie();this.style.zoomHistory.update($,Y);const se=new A.H($,{now:Y,fadeDuration:E,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),de=se.crossFadingFactor();de===1&&de===this._crossFadingFactor||(N=!0,this._crossFadingFactor=de),this.style.update(se)}const H=((l=this.style.projection)===null||l===void 0?void 0:l.transitionState)>0!==L;(f=this.style.projection)===null||f===void 0||f.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((g=this.style.projection)===null||g===void 0?void 0:g.transitionState,(B=this.style.projection)===null||B===void 0?void 0:B.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||H)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.tileManager.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,E,this._crossSourceCollisions,H),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:E,showPadding:this.showPadding,anisotropicFilterPitch:this.getAnisotropicFilterPitch()}),this.fire(new A.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,A.cH.mark(A.cI.load),this.fire(new A.l("load"))),this.style&&(this.style.hasTransitions()||N)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const G=this._sourcesDirty||this._styleDirty||this._placementDirty;return G||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new A.l("idle")),!this._loaded||this._fullyLoaded||G||(this._fullyLoaded=!0,A.cH.mark(A.cI.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var b;this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&this._ownerWindow.removeEventListener("online",this._onWindowOnline,!1),ut.removeThrottleControl(this._imageQueueHandle),(b=this._resizeObserver)===null||b===void 0||b.disconnect();const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t?.loseContext&&t.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),W.remove(this._canvasContainer),W.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),A.cH.remove(),this._removed=!0,this.fire(new A.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,O.frame(this._frameRequest,(b=>{A.cH.recordStartOfFrameAt(b),this._frameRequest=null;try{this._render(b)}catch(t){if(!A.Z(t)&&!(function(l){return l.message===sc})(t))throw t}}),(()=>{}),this._ownerWindow))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(b){this._showTileBoundaries!==b&&(this._showTileBoundaries=b,this._update())}get showPadding(){return!!this._showPadding}set showPadding(b){this._showPadding!==b&&(this._showPadding=b,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(b){this._showCollisionBoxes!==b&&(this._showCollisionBoxes=b,b?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(b){this._showOverdrawInspector!==b&&(this._showOverdrawInspector=b,this._update())}get repaint(){return!!this._repaint}set repaint(b){this._repaint!==b&&(this._repaint=b,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(b){this._vertices=b,this._update()}get version(){return oA}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(b){return this._lazyInitEmptyStyle(),this.style.setProjection(b),this._update(!0)}},v.MapMouseEvent=ge,v.MapTouchEvent=we,v.MapWheelEvent=Pe,v.Marker=Sc,v.NavigationControl=class{constructor(b){this._updateZoomButtons=()=>{const t=this._map.getZoom(),l=t===this._map.getMaxZoom(),f=t===this._map.getMinZoom();this._zoomInButton.disabled=l,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",l.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(t,l)=>{const f=this._map._getUIString(`NavigationControl.${l}`);t.title=f,t.setAttribute("aria-label",f)},this.options=A.e({},_i,b),this._container=W.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(t=>t.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(t=>this._map.zoomIn({},{originalEvent:t}))),W.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(t=>this._map.zoomOut({},{originalEvent:t}))),W.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})})),this._compassIcon=W.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(b){return this._map=b,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Su(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){W.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(b,t){const l=W.create("button",b,this._container);return l.type="button",l.addEventListener("click",t),l}},v.Popup=class extends A.E{constructor(b){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&W.remove(this._content),this._container&&(W.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new A.l("close"))),this),this._onMouseUp=t=>{this._update(t.point)},this._onMouseMove=t=>{this._update(t.point)},this._onDrag=t=>{this._update(t.point)},this._update=t=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=W.create("div","maplibregl-popup",this._map.getContainer()),this._tip=W.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const E of this.options.className.split(" "))this._container.classList.add(E);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Cc(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!t)return;const l=this._flatPos=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&t?t:this._map.transform.locationToScreenPoint(this._lngLat));let f=this.options.anchor;const g=Oo(this.options.offset);if(!f){const E=this._container.offsetWidth,L=this._container.offsetHeight,N=(function(G){var $,Y,se,de;return G?{top:($=G.top)!==null&&$!==void 0?$:0,right:(Y=G.right)!==null&&Y!==void 0?Y:0,bottom:(se=G.bottom)!==null&&se!==void 0?se:0,left:(de=G.left)!==null&&de!==void 0?de:0}:{top:0,right:0,bottom:0,left:0}})(this.options.padding);let H;H=l.y+g.bottom.y<L+N.top?["top"]:l.y>this._map.transform.height-L-N.bottom?["bottom"]:[],l.x<E/2+N.left?H.push("left"):l.x>this._map.transform.width-E/2-N.right&&H.push("right"),f=H.length===0?"bottom":H.join("-")}let B=l.add(g[f]);this.options.subpixelPositioning||(B=B.round()),W.setTransform(this._container,`${ko[f]} translate(${B.x}px,${B.y}px)`),$u(this._container,f,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=A.e(Object.create(QA),b)}addTo(b){return this._map&&this.remove(),this._map=b,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new A.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(b){return this._lngLat=A.V.convert(b),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(b){return this.setDOMContent(document.createTextNode(b))}setHTML(b){const t=document.createDocumentFragment(),l=document.createElement("body");let f;for(l.innerHTML=b;f=l.firstChild,f;)t.appendChild(f);return this.setDOMContent(t)}getMaxWidth(){var b;return(b=this._container)===null||b===void 0?void 0:b.style.maxWidth}setMaxWidth(b){return this.options.maxWidth=b,this._update(),this}setDOMContent(b){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=W.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(b),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(b){return this._container&&this._container.classList.add(b),this}removeClassName(b){return this._container&&this._container.classList.remove(b),this}setOffset(b){return this.options.offset=b,this._update(),this}toggleClassName(b){if(this._container)return this._container.classList.toggle(b)}setSubpixelPositioning(b){this.options.subpixelPositioning=b}setPadding(b){this.options.padding=b,this._update()}_createCloseButton(){this.options.closeButton&&(this._closeButton=W.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const b=this._container.querySelector(kA);b&&b.focus()}},v.RasterDEMTileSource=Sr,v.RasterTileSource=Zr,v.ScaleControl=class{constructor(b){this._onMove=()=>{cc(this._map,this._container,this.options)},this.setUnit=t=>{this.options.unit=t,cc(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Oi),b)}getDefaultPosition(){return"bottom-left"}onAdd(b){return this._map=b,this._container=W.create("div","maplibregl-ctrl maplibregl-ctrl-scale",b.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){W.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},v.ScrollZoomHandler=ma,v.Style=Zl,v.TerrainControl=class{constructor(b){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=b}onAdd(b){return this._map=b,this._container=W.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=W.create("button","maplibregl-ctrl-terrain",this._container),W.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){W.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},v.TwoFingersTouchPitchHandler=Vn,v.TwoFingersTouchRotateHandler=dn,v.TwoFingersTouchZoomHandler=vr,v.TwoFingersTouchZoomRotateHandler=gr,v.VectorTileSource=lr,v.VideoSource=Fn,v.addSourceType=(b,t)=>A._(void 0,void 0,void 0,(function*(){if(gn(b))throw new Error(`A source type called "${b}" already exists.`);((l,f)=>{Or[l]=f})(b,t)})),v.clearPrewarmedResources=function(){const b=mt;b&&(b.isPreloaded()&&b.numActive()===1?(b.release(Ue),mt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},v.createTileMesh=he,v.getMaxParallelImageRequests=function(){return A.c.MAX_PARALLEL_IMAGE_REQUESTS},v.getRTLTextPluginStatus=function(){return Ae().getRTLTextPluginStatus()},v.getVersion=function(){return Xc},v.getWorkerCount=function(){return Ge.workerCount},v.getWorkerUrl=function(){return A.c.WORKER_URL},v.importScriptInWorkers=function(b){return Ar().broadcast("IS",b)},v.isTimeFrozen=function(){return ce.isFrozen()},v.now=ie,v.prewarm=function(){Et().acquire(Ue)},v.restoreNow=function(){ce.restoreNow()},v.setMaxParallelImageRequests=function(b){A.c.MAX_PARALLEL_IMAGE_REQUESTS=b},v.setNow=function(b){ce.setNow(b)},v.setRTLTextPlugin=function(b,t){return Ae().setRTLTextPlugin(b,t)},v.setWorkerCount=function(b){Ge.workerCount=b},v.setWorkerUrl=function(b){A.c.WORKER_URL=b}}));var y=o;return y}))})(n_)),n_.exports}var FT=TT();const F1=K2(FT),IT={version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',maxzoom:19}},layers:[{id:"osm",type:"raster",source:"osm"}]};function LT(i={}){const{initialCoords:n={lng:2.3488,lat:46.8534},zoom:o=n.lat===46.8534?5:15,draggable:c=!0,onCoordsChange:m,debounceMs:y=500}=i,v=We.useRef(null),A=We.useRef(null),S=We.useRef(null),I=We.useRef(null),[D,z]=We.useState(n),[Z,O]=We.useState(!1),ce=We.useCallback(W=>{z(W),m&&(I.current&&clearTimeout(I.current),I.current=setTimeout(()=>{m(W)},y))},[m,y]);We.useEffect(()=>{if(!v.current||A.current)return;const W=new F1.Map({container:v.current,style:IT,center:[n.lng,n.lat],zoom:o});return A.current=W,W.addControl(new F1.NavigationControl,"top-right"),W.on("load",()=>{const le=new F1.Marker({draggable:c,color:"#1a3a5c"}).setLngLat([n.lng,n.lat]).addTo(W);S.current=le,c&&le.on("dragend",()=>{const ye=le.getLngLat();ce({lng:ye.lng,lat:ye.lat})}),O(!0)}),()=>{I.current&&clearTimeout(I.current),W.remove(),A.current=null,S.current=null,O(!1)}},[]);const ie=We.useCallback((W,le=15)=>{A.current&&(A.current.flyTo({center:[W.lng,W.lat],zoom:le,duration:800}),S.current?.setLngLat([W.lng,W.lat]),z(W))},[]);return{mapContainerRef:v,coords:D,mapReady:Z,flyToCoords:ie}}function MT({lat:i,lng:n,adresse:o,commune:c,codePostal:m,codeInsee:y,cadastre:v,cadastreLoading:A,cadastreError:S,onCoordsChange:I}){const{mapContainerRef:D,flyToCoords:z}=LT({initialCoords:{lng:n,lat:i},zoom:16,draggable:!0,onCoordsChange:I,debounceMs:500});return We.useEffect(()=>{z({lng:n,lat:i},16)},[i,n]),j.jsxs("div",{className:"space-y-4",children:[j.jsx("div",{className:"rounded-lg overflow-hidden border border-border shadow-sm",children:j.jsx("div",{ref:D,style:{height:"380px",width:"100%"}})}),j.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Dplacez le marqueur pour affiner la localisation  le calcul des risques sera mis  jour automatiquement"}),j.jsx(gl,{children:j.jsxs(yl,{className:"pt-4 space-y-3",children:[j.jsxs("div",{className:"flex items-start gap-3",children:[j.jsx(bx,{className:"h-5 w-5 text-edl-700 mt-0.5 shrink-0"}),j.jsxs("div",{children:[j.jsx("p",{className:"text-sm font-semibold text-gray-900",children:o}),j.jsxs("p",{className:"text-sm text-gray-600",children:[m," ",c]}),j.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:["Code INSEE : ",y]})]})]}),j.jsxs("div",{className:"border-t pt-3",children:[j.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[j.jsx(pB,{className:"h-4 w-4 text-edl-700"}),j.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Rfrences cadastrales"})]}),A&&j.jsxs("div",{className:"space-y-2",children:[j.jsx(b_,{className:"h-4 w-48"}),j.jsx(b_,{className:"h-4 w-32"})]}),S&&!A&&j.jsxs("div",{className:"flex items-center gap-2 text-orange-600 text-sm",children:[j.jsx(g_,{className:"h-4 w-4"}),j.jsx("span",{children:"Rfrences cadastrales non disponibles  saisie manuelle possible"})]}),v&&!A&&j.jsxs("div",{className:"flex flex-wrap gap-2",children:[j.jsxs(qo,{variant:"outline",className:"font-mono",children:["Section ",v.section]}),j.jsxs(qo,{variant:"outline",className:"font-mono",children:["Parcelle n ",v.numero]}),j.jsx(qo,{variant:"secondary",className:"text-xs",children:v.identifiant})]})]}),j.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-500 pt-1",children:[j.jsxs("span",{children:["Lat : ",i.toFixed(6)]}),j.jsxs("span",{children:["Lng : ",n.toFixed(6)]})]})]})})]})}const UT=["Calcul automatique des risques (API Gorisques officielle)","Document PDF tlchargeable immdiatement","Conforme  l'arrt du 27/09/2022","Validit 6 mois  prt  annexer au compromis","Rfrences cadastrales incluses","Historique des arrts CatNat depuis 1982"];function DT({selected:i,onSelect:n,onConfirm:o}){const c=i==="edition";return j.jsxs("div",{className:"space-y-5",children:[j.jsxs(gl,{className:`relative cursor-pointer transition-all border-2 ${c?"border-navy-900 ring-2 ring-navy-900/20":"border-orange-300 hover:border-navy-400"}`,onClick:()=>n("edition"),children:[j.jsx("div",{className:"absolute -top-3.5 left-1/2 -translate-x-1/2 flex gap-2",children:j.jsx(qo,{className:"bg-navy-900 text-white text-xs px-3 shadow-sm",children:" Prt en moins de 2 minutes"})}),j.jsxs(yl,{className:"p-6 space-y-5",children:[j.jsxs("div",{className:"flex items-start justify-between gap-4",children:[j.jsxs("div",{className:"flex items-start gap-3",children:[j.jsx("div",{className:"bg-navy-50 rounded-lg p-2 shrink-0",children:j.jsx(O4,{className:"h-5 w-5 text-navy-900"})}),j.jsxs("div",{children:[j.jsx("h3",{className:"font-bold text-navy-900 text-base",children:"ERP en ligne  Tlchargement immdiat"}),j.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:"Gnrez et tlchargez votre tat des Risques et Pollutions en moins de 2 minutes, directement depuis chez vous."})]})]}),j.jsx("div",{className:`h-6 w-6 rounded-full border-2 flex items-center justify-center shrink-0 mt-1 ${c?"border-navy-900 bg-navy-900":"border-gray-300"}`,children:c&&j.jsx(jg,{className:"h-3.5 w-3.5 text-white",strokeWidth:3})})]}),j.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end gap-4 bg-slate-50 rounded-xl px-5 py-4 border border-slate-100",children:[j.jsxs("div",{children:[j.jsxs("div",{className:"flex flex-wrap items-center gap-x-2 gap-y-1 mb-1",children:[j.jsx(p3,{className:"h-3.5 w-3.5 text-gray-400 shrink-0"}),j.jsx("span",{className:"text-sm text-gray-500 line-through decoration-red-400 decoration-2 font-medium",children:"35,00 "}),j.jsx("span",{className:"text-xs text-gray-400 italic",children:"(prix moyen factur par votre diagnostiqueur)"})]}),j.jsxs("div",{className:"flex items-baseline gap-2",children:[j.jsx("span",{className:"text-4xl font-extrabold text-navy-900",children:"9,99 "}),j.jsx("span",{className:"text-sm text-gray-500 font-medium",children:"TTC"})]}),j.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:"8,32  HT"})]}),j.jsxs("div",{className:"sm:ml-auto text-left sm:text-right",children:[j.jsx(qo,{className:"bg-green-100 text-green-800 border-green-200 font-semibold text-sm",children:"conomisez 25 "}),j.jsx("p",{className:"text-xs text-gray-500 mt-1.5",children:"Tlchargement immdiat"})]})]}),j.jsx("ul",{className:"grid grid-cols-1 sm:grid-cols-2 gap-y-2 gap-x-4",children:UT.map(m=>j.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-700",children:[j.jsx(jg,{className:"h-4 w-4 text-green-600 mt-0.5 shrink-0"}),m]},m))})]})]}),j.jsx("p",{className:"text-center text-xs text-gray-500",children:" Paiement scuris   Donnes officielles Gorisques   Document lgalement conforme"}),j.jsx(_a,{onClick:o,disabled:!c,size:"lg",className:"w-full bg-edl-700 hover:bg-edl-800 text-base font-semibold h-12",children:"Tlcharger mon ERP  9,99 "})]})}const PT={none:{icon:j.jsx(kd,{className:"h-4 w-4 text-green-600"}),label:"Non expos",badgeVariant:"success",rowClass:"bg-green-50/50"},low:{icon:j.jsx($g,{className:"h-4 w-4 text-yellow-500"}),label:"Faible",badgeVariant:"warning",rowClass:"bg-yellow-50/50"},medium:{icon:j.jsx($g,{className:"h-4 w-4 text-orange-500"}),label:"Moyen",badgeVariant:"warning",rowClass:"bg-orange-50/30"},high:{icon:j.jsx(mB,{className:"h-4 w-4 text-red-600"}),label:"Expos",badgeVariant:"danger",rowClass:"bg-red-50/30"}},NT=["Risques naturels","Risques ctiers","Risques technologiques","Risques miniers","Pollution des sols","Catastrophes naturelles"];function Fv({items:i}){return j.jsx("div",{className:"overflow-x-auto rounded-lg border border-border",children:j.jsxs("table",{className:"w-full min-w-[520px] text-sm",children:[j.jsx("thead",{children:j.jsxs("tr",{className:"bg-navy-900 text-white",children:[j.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"Catgorie"}),j.jsx("th",{className:"text-left px-4 py-3 font-medium",children:"Risque"}),j.jsx("th",{className:"text-center px-4 py-3 font-medium",children:"Exposition"}),j.jsx("th",{className:"text-left px-4 py-3 font-medium hidden md:table-cell",children:"Dtail"})]})}),j.jsx("tbody",{className:"divide-y divide-border",children:NT.map(n=>{const o=i.filter(c=>c.category===n);return o.length===0?null:o.map((c,m)=>{const y=PT[c.niveau??"none"];return j.jsxs("tr",{className:y.rowClass,children:[m===0&&j.jsx("td",{rowSpan:o.length,className:"px-4 py-3 font-medium text-navy-800 border-r border-border align-top whitespace-nowrap",children:n}),j.jsx("td",{className:"px-4 py-3 text-gray-800",children:c.label}),j.jsx("td",{className:"px-4 py-3 text-center",children:j.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[y.icon,j.jsx(qo,{variant:y.badgeVariant,className:"hidden sm:inline-flex",children:y.label})]})}),j.jsx("td",{className:"px-4 py-3 text-gray-600 hidden md:table-cell text-xs",children:c.detail??j.jsx(e3,{className:"h-3 w-3 text-gray-400"})})]},`${n}-${m}`)})})})]})})}const id="https://georisques.gouv.fr/api/v1";function o0(i,n){return`${i},${n}`}async function RT(i,n,o=0){const c=new URLSearchParams({latlon:o0(i,n),rayon:String(o)}),m=await fetch(`${id}/resultats_par_adresse?${c}`);if(!m.ok)throw new Error(`Gorisques API error: ${m.status}`);return m.json()}async function QT(i){const n=new URLSearchParams({code_insee:i}),o=await fetch(`${id}/zonage_sismique?${n}`);if(!o.ok)throw new Error(`Sismique API error: ${o.status}`);return o.json()}async function kT(i){const n=new URLSearchParams({code_insee:i}),o=await fetch(`${id}/radon?${n}`);if(!o.ok)throw new Error(`Radon API error: ${o.status}`);return o.json()}async function OT(i,n,o=500){const c=new URLSearchParams({latlon:o0(i,n),rayon:String(o)}),m=await fetch(`${id}/sis?${c}`);if(!m.ok)throw new Error(`SIS API error: ${m.status}`);const y=await m.json();return{exists:(y.nombre_total_elements??0)>0,secteurs:y.data??[]}}async function zT(i){const n=new URLSearchParams({code_insee:i,page_size:"100"}),o=await fetch(`${id}/gaspar/catnat?${n}`);if(!o.ok)throw new Error(`CatNat API error: ${o.status}`);return o.json()}async function jT(i,n){const o=new URLSearchParams({latlon:o0(i,n)}),c=await fetch(`${id}/argiles?${o}`);if(!c.ok)throw new Error(`Argiles API error: ${c.status}`);return c.json()}async function HT(i,n,o=500){const c=new URLSearchParams({latlon:o0(i,n),rayon:String(o),page_size:"50"}),m=await fetch(`${id}/basias_sites?${c}`);if(!m.ok)throw new Error(`BASIAS API error: ${m.status}`);return m.json()}async function VT(i,n,o=500){const c=new URLSearchParams({latlon:o0(i,n),rayon:String(o),page_size:"50"}),m=await fetch(`${id}/basol_sites?${c}`);if(!m.ok)throw new Error(`BASOL API error: ${m.status}`);return m.json()}async function GT(i,n,o){const[c,m,y,v,A,S,I,D]=await Promise.allSettled([RT(i,n,0),zT(o),OT(i,n,500),QT(o),kT(o),jT(i,n),HT(i,n,500),VT(i,n,500)]);return{resultats:c.status==="fulfilled"?c.value:null,catnat:m.status==="fulfilled"?m.value:null,sis:y.status==="fulfilled"?y.value:null,sismique:v.status==="fulfilled"?v.value:null,radon:A.status==="fulfilled"?A.value:null,argiles:S.status==="fulfilled"?S.value:null,basias:I.status==="fulfilled"?I.value:null,basol:D.status==="fulfilled"?D.value:null,errors:{resultats:c.status==="rejected"?c.reason:null,catnat:m.status==="rejected"?m.reason:null,sis:y.status==="rejected"?y.reason:null,sismique:v.status==="rejected"?v.reason:null,radon:A.status==="rejected"?A.reason:null,argiles:S.status==="rejected"?S.reason:null,basias:I.status==="rejected"?I.reason:null,basol:D.status==="rejected"?D.reason:null}}}const Ol=[];for(let i=0;i<256;++i)Ol.push((i+256).toString(16).slice(1));function qT(i,n=0){return(Ol[i[n+0]]+Ol[i[n+1]]+Ol[i[n+2]]+Ol[i[n+3]]+"-"+Ol[i[n+4]]+Ol[i[n+5]]+"-"+Ol[i[n+6]]+Ol[i[n+7]]+"-"+Ol[i[n+8]]+Ol[i[n+9]]+"-"+Ol[i[n+10]]+Ol[i[n+11]]+Ol[i[n+12]]+Ol[i[n+13]]+Ol[i[n+14]]+Ol[i[n+15]]).toLowerCase()}let I1;const KT=new Uint8Array(16);function ZT(){if(!I1){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");I1=crypto.getRandomValues.bind(crypto)}return I1(KT)}const XT=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ib={randomUUID:XT};function WT(i,n,o){i=i||{};const c=i.random??i.rng?.()??ZT();if(c.length<16)throw new Error("Random bytes length must be >= 16");return c[6]=c[6]&15|64,c[8]=c[8]&63|128,qT(c)}function YT(i,n,o){return Ib.randomUUID&&!i?Ib.randomUUID():WT(i)}const $T={A:"faible",B1:"moyen",B2:"moyen",C:"fort"},JT={1:1,2:2,3:3,4:4,5:5};function L1(i){return i?.exists?i.documents.map(n=>({exists:!0,nom:n.nomPpr,type_risque:n.typeRisque,etat:n.etatPpr??"NON_APPLICABLE",url_document:n.urlDocument,prescriptions:i.approuve})):[{exists:!1,etat:"NON_APPLICABLE",prescriptions:!1}]}function eF(i){const n=[];return i.ppr_naturels.filter(o=>o.exists&&o.etat==="APPROUVE").forEach(o=>{n.push({type:"PPR Naturel",description:`Le bien est soumis aux prescriptions du ${o.nom??"PPR naturel"}. Consultez le rglement du PPR pour les travaux obligatoires applicables.`,page_reglement:1})}),i.ppr_technologiques.filter(o=>o.exists&&o.etat==="APPROUVE").forEach(o=>{n.push({type:"PPR Technologique",description:`Le bien est soumis aux prescriptions du ${o.nom??"PPRT"}. Consultez le rglement du PPRT.`})}),i.zonage_sismique.niveau>=3&&n.push({type:"Risque sismique",description:`Zone de sismicit ${i.zonage_sismique.niveau}  Les travaux de construction et de rnovation doivent respecter les rgles parasismiques (Eurocode 8, norme PS92).`}),i.argiles.niveau==="fort"&&n.push({type:"Retrait-gonflement des argiles",description:`Zone d'ala fort (${i.argiles.code})  Des tudes gotechniques sont recommandes avant tout projet de construction ou d'extension.`}),i.sis.expose&&n.push({type:"Secteur d'Information des Sols (SIS)",description:"Le bien est situ dans un Secteur d'Information des Sols. Des tudes de sols sont obligatoires avant mutation (article L. 556-2 du Code de l'environnement)."}),n}function tF(i){const n=new Date,o=new Date(n);o.setMonth(o.getMonth()+6);const c=i.resultats?.risques,m=i.sismique??c?.alea_sismique,y=i.radon??c?.radon,v=i.argiles??c?.argiles,A=JT[m?.code_zone??"1"]??1,S=y?.potentiel_radon??1,I=$T[v?.code_alea??"A"]??"faible",D=v?.code_alea??"A",z=i.sis??{exists:c?.sis?.exists??!1,secteurs:c?.sis?.secteurs??[]},Z=i.basias?.data??c?.basias?.sites??[],O=i.basol?.data??c?.basol?.sites??[],ce={ppr_naturels:c?.ppr_naturels?L1(c.ppr_naturels):[{exists:!1,etat:"NON_APPLICABLE",prescriptions:!1}],ppr_technologiques:c?.ppr_technologiques?L1(c.ppr_technologiques):[{exists:!1,etat:"NON_APPLICABLE",prescriptions:!1}],ppr_miniers:c?.ppr_miniers?L1(c.ppr_miniers):[{exists:!1,etat:"NON_APPLICABLE",prescriptions:!1}],zonage_sismique:{niveau:A,libelle:m?.libelle??`Zone sismicit ${A}`},radon:{zone:S,libelle:y?.libelle??`Potentiel radon  catgorie ${S}`},sis:{expose:z.exists,references:z.secteurs.map(le=>le.idSis),secteurs:z.secteurs},argiles:{niveau:I,code:D,expose:I!=="faible"},basias:Z,basol:O,recul_trait_cote:{applicable:!1}},ie=i.catnat?.data??c?.catnat?.arretes??[],W=eF(ce);return{metadata:{reference:YT(),date_realisation:n,validite_jusqu_au:o,version_reglementaire:"arrete_27092022",mode:i.mode},bien:{adresse_complete:i.adresse_complete,code_insee:i.code_insee,code_postal:i.code_postal,commune:i.commune,references_cadastrales:{section:i.section,numero:i.numero,departement:i.departement},coordonnees:{lat:i.lat,lng:i.lng}},risques:ce,catnat:ie,prescriptions:W}}const M1={ppr:!1,catnat:!1,sis:!1,sismique:!1,radon:!1,argiles:!1,basias:!1,basol:!1};function rF(){const[i,n]=We.useState({loading:!1,progress:M1,document:null,error:null}),o=We.useCallback(async m=>{n({loading:!0,progress:M1,document:null,error:null});const y=setInterval(()=>{n(v=>{const S=Object.keys(v.progress).find(I=>!v.progress[I]);return S?{...v,progress:{...v.progress,[S]:!0}}:(clearInterval(y),v)})},400);try{const v=await GT(m.lng,m.lat,m.code_insee);clearInterval(y),n(I=>({...I,progress:{ppr:!0,catnat:!0,sis:!0,sismique:!0,radon:!0,argiles:!0,basias:!0,basol:!0}}));const A=tF({adresse_complete:m.adresse_complete,code_insee:m.code_insee,code_postal:m.code_postal,commune:m.commune,lat:m.lat,lng:m.lng,section:m.cadastre?.section??"",numero:m.cadastre?.numero??"",departement:m.cadastre?.departement,mode:m.mode,resultats:v.resultats,catnat:v.catnat,sis:v.sis,sismique:v.sismique,radon:v.radon,argiles:v.argiles,basias:v.basias,basol:v.basol}),S=Cx();S.unshift(A),localStorage.setItem("erp_history",JSON.stringify(S.slice(0,20))),n({loading:!1,progress:{ppr:!0,catnat:!0,sis:!0,sismique:!0,radon:!0,argiles:!0,basias:!0,basol:!0},document:A,error:null})}catch(v){clearInterval(y),n(A=>({...A,loading:!1,error:v instanceof Error?v.message:"Erreur lors du calcul des risques"}))}},[]),c=We.useCallback(()=>{n({loading:!1,progress:M1,document:null,error:null})},[]);return{...i,calculate:o,reset:c}}function Cx(){try{const i=localStorage.getItem("erp_history");return i?JSON.parse(i):[]}catch{return[]}}const nF="https://apicarto.ign.fr/api";async function iF(i,n,o=1){const c=new URLSearchParams({lon:String(i),lat:String(n),_limit:String(o)}),m=await fetch(`${nF}/cadastre/parcelle?${c.toString()}`);if(!m.ok)throw new Error(`APICarto IGN error: ${m.status}`);return m.json()}function aF(i){const n=i.features?.[0];if(!n)return null;const o=n.properties;return{section:o.section,numero:o.number,departement:o.departmentcode,commune:o.municipalitycode,feuille:o.sheet,identifiant:o.id}}const sF={1:"Potentiel faible",2:"Potentiel moyen",3:"Potentiel lev"},oF={1:"Zone 1  Trs faible",2:"Zone 2  Faible",3:"Zone 3  Modr",4:"Zone 4  Moyen",5:"Zone 5  Fort"};function QB(i,n){const o=[],c=i.ppr_naturels,m=c.some(O=>O.exists);o.push({category:"Risques naturels",label:"Plan de Prvention des Risques Naturels (PPRn)",expose:m,niveau:m?c.some(O=>O.etat==="APPROUVE")?"high":"medium":"none",detail:m?c.filter(O=>O.exists).map(O=>O.nom??O.type_risque??"").join(", "):"Non concern"});const y=i.ppr_technologiques,v=y.some(O=>O.exists);o.push({category:"Risques technologiques",label:"Plan de Prvention des Risques Technologiques (PPRT)",expose:v,niveau:v?y.some(O=>O.etat==="APPROUVE")?"high":"medium":"none",detail:v?y.filter(O=>O.exists).map(O=>O.nom??"").join(", "):"Non concern"});const A=i.ppr_miniers,S=A.some(O=>O.exists);o.push({category:"Risques miniers",label:"Plan de Prvention des Risques Miniers (PPRM)",expose:S,niveau:S?"high":"none",detail:S?A.filter(O=>O.exists).map(O=>O.nom??"").join(", "):"Non concern"});const I=i.zonage_sismique.niveau;o.push({category:"Risques naturels",label:"Zonage sismique",expose:I>=2,niveau:I>=4?"high":I>=3?"medium":I>=2?"low":"none",detail:oF[I]??`Zone ${I}`});const D=i.radon.zone;o.push({category:"Risques naturels",label:"Potentiel radon",expose:D>=2,niveau:D===3?"high":D===2?"medium":"none",detail:sF[D]??`Catgorie ${D}`}),o.push({category:"Pollution des sols",label:"Secteurs d'Information des Sols (SIS)",expose:i.sis.expose,niveau:i.sis.expose?"high":"none",detail:i.sis.expose?`${i.sis.secteurs.length} secteur(s) identifi(s)`:"Non concern"});const z=i.argiles.expose;o.push({category:"Risques naturels",label:"Retrait-gonflement des argiles",expose:z,niveau:i.argiles.niveau==="fort"?"high":i.argiles.niveau==="moyen"?"medium":"none",detail:`Ala ${i.argiles.niveau} (${i.argiles.code})`}),o.push({category:"Pollution des sols",label:"Anciens sites industriels (BASIAS)",expose:i.basias.length>0,niveau:i.basias.length>0?"medium":"none",detail:i.basias.length>0?`${i.basias.length} site(s) recens(s) dans un rayon de 500m`:"Aucun site dans le rayon de 500m"}),o.push({category:"Pollution des sols",label:"Sites et sols pollus (BASOL)",expose:i.basol.length>0,niveau:i.basol.length>0?"high":"none",detail:i.basol.length>0?`${i.basol.length} site(s) pollu(s) dans un rayon de 500m`:"Aucun site dans le rayon de 500m"});const Z=i.recul_trait_cote;return o.push({category:"Risques ctiers",label:"Recul du trait de cte",expose:Z.applicable&&(Z.expose??!1),niveau:Z.applicable&&Z.expose?"high":"none",detail:Z.applicable?Z.expose?`Zone expose  horizon ${Z.horizon??"2100"}${Z.libelle?`  ${Z.libelle}`:""}`:"Commune littorale  bien non expos":"Commune non concerne (non littorale)"}),o.push({category:"Catastrophes naturelles",label:"Arrts de catastrophes naturelles",expose:n.length>0,niveau:n.length>=5?"high":n.length>=2?"medium":n.length>=1?"low":"none",detail:n.length>0?`${n.length} arrt(s) depuis 1982`:"Aucun arrt CatNat recens"}),o}function lF(i){return i.some(n=>n.niveau==="high")?"high":i.some(n=>n.niveau==="medium")?"medium":i.some(n=>n.niveau==="low")?"low":"none"}async function AF(i){const n=await fetch("/api/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),o=await n.json();if(!n.ok)throw new Error(o.error||"Erreur lors de la cration de la session de paiement");if(!o.url)throw new Error("URL de paiement manquante dans la rponse");return o.url}function Jg(i){return`ERP-${i.replace(/-/g,"").toUpperCase().slice(0,12)}`}function Iv(i){return new Date(i.metadata.validite_jusqu_au)<new Date}function kB(i){const n=new Date;return n.setDate(n.getDate()+30),new Date(i.metadata.validite_jusqu_au)<n}const Lb=[{id:1,label:"Adresse",description:"Recherche du bien"},{id:2,label:"Localisation",description:"Confirmation sur carte"},{id:3,label:"Risques",description:"Calcul des expositions"},{id:4,label:"Service",description:"Choix de la formule"}],cF={ppr:"PPR  Plans de prvention",catnat:"Catastrophes naturelles",sis:"Secteurs d'information des sols",sismique:"Zonage sismique",radon:"Potentiel radon",argiles:"Retrait-gonflement argiles",basias:"Anciens sites industriels",basol:"Sites et sols pollus"};function uF(){const i=cf(),[n,o]=We.useState(1),[c,m]=We.useState(null),[y,v]=We.useState(null),[A,S]=We.useState(!1),[I,D]=We.useState(null),[z,Z]=We.useState(null),[O,ce]=We.useState(!1),[ie,W]=We.useState(null),{loading:le,progress:ye,document:Be,error:Le,calculate:lt}=rF();async function ft(Ve,wt){S(!0),D(null);try{const ke=await iF(Ve,wt),ot=aF(ke);v(ot)}catch{D("Rfrences cadastrales non disponibles automatiquement"),v(null)}finally{S(!1)}}function ut(Ve){const[wt,ke]=Ve.geometry.coordinates;m({feature:Ve,lat:ke,lng:wt})}async function Ne(){c&&(o(2),await ft(c.lng,c.lat))}function Ce(Ve){c&&(m(wt=>wt?{...wt,lat:Ve.lat,lng:Ve.lng}:null),ft(Ve.lng,Ve.lat))}async function _t(){c&&(o(3),await lt({adresse_complete:c.feature.properties.label,code_insee:c.feature.properties.citycode,code_postal:c.feature.properties.postcode,commune:c.feature.properties.city,lat:c.lat,lng:c.lng,cadastre:y,mode:"edition"}))}async function _e(){if(!(!c||!z||!Be)){W(null),ce(!0);try{const Ve=await AF({erp_reference:Jg(Be.metadata.reference),adresse:c.feature.properties.label,commune:c.feature.properties.city});window.location.href=Ve}catch(Ve){W(Ve instanceof Error?Ve.message:"Erreur de connexion au service de paiement"),ce(!1)}}}const Te=Be?QB(Be.risques,Be.catnat):[],Ye=Be?lF(Te):null;return j.jsxs("div",{className:"min-h-screen bg-slate-50 overflow-x-hidden",children:[j.jsx("header",{className:"bg-white border-b border-border sticky top-0 z-40",children:j.jsxs("div",{className:"max-w-4xl mx-auto px-4 h-14 flex items-center justify-between",children:[j.jsxs("button",{onClick:()=>i("/"),className:"flex items-center gap-2 text-sm text-gray-600 hover:text-navy-900 transition-colors",children:[j.jsx(Rd,{className:"h-4 w-4"}),"Retour"]}),j.jsxs("span",{className:"font-bold text-navy-900 text-sm",children:[j.jsx("span",{className:"hidden sm:inline",children:"EDL&DIAGNOSTIC  "}),"Gnration ERP"]}),j.jsx("div",{className:"w-16"})]})}),j.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[j.jsx("div",{className:"flex items-center justify-between mb-8",children:Lb.map((Ve,wt)=>j.jsxs("div",{className:"flex items-center flex-1",children:[j.jsxs("div",{className:"flex flex-col items-center",children:[j.jsx("div",{className:`h-8 w-8 rounded-full flex items-center justify-center text-sm font-semibold transition-colors ${n>Ve.id?"bg-green-600 text-white":n===Ve.id?"bg-navy-900 text-white":"bg-gray-200 text-gray-500"}`,children:n>Ve.id?j.jsx(jg,{className:"h-4 w-4"}):Ve.id}),j.jsxs("div",{className:"mt-1 text-center hidden sm:block",children:[j.jsx("p",{className:"text-xs font-medium text-gray-700",children:Ve.label}),j.jsx("p",{className:"text-xs text-gray-400",children:Ve.description})]})]}),wt<Lb.length-1&&j.jsx("div",{className:`flex-1 h-0.5 mx-2 ${n>Ve.id?"bg-green-600":"bg-gray-200"}`})]},Ve.id))}),n===1&&j.jsxs(gl,{children:[j.jsxs(om,{children:[j.jsx(lm,{className:"text-lg",children:"Saisissez l'adresse du bien"}),j.jsx(Dg,{children:"Entrez l'adresse complte. La recherche se fait automatiquement via la Base Adresse Nationale."})]}),j.jsxs(yl,{className:"space-y-4",children:[j.jsx(ST,{onAddressSelected:ut,placeholder:"Ex: 12 rue de la Paix, 75001 Paris"}),c&&j.jsxs("div",{className:"flex items-center gap-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:[j.jsx(jg,{className:"h-5 w-5 text-green-600"}),j.jsxs("div",{className:"flex-1",children:[j.jsx("p",{className:"text-sm font-medium text-green-900",children:c.feature.properties.label}),j.jsxs("p",{className:"text-xs text-green-700",children:["Code INSEE : ",c.feature.properties.citycode]})]}),j.jsx(qo,{variant:"success",className:"text-xs",children:"Slectionn"})]}),j.jsxs(_a,{onClick:Ne,disabled:!c,className:"w-full bg-edl-700 hover:bg-edl-800",size:"lg",children:["Confirmer l'adresse",j.jsx(E1,{className:"h-4 w-4"})]})]})]}),n===2&&c&&j.jsxs(gl,{children:[j.jsxs(om,{children:[j.jsx(lm,{className:"text-lg",children:"Confirmez la localisation"}),j.jsx(Dg,{children:"Vrifiez la position du marqueur sur la carte. Faites-le glisser pour affiner la localisation."})]}),j.jsxs(yl,{className:"space-y-4",children:[j.jsx(MT,{lat:c.lat,lng:c.lng,adresse:c.feature.properties.label,commune:c.feature.properties.city,codePostal:c.feature.properties.postcode,codeInsee:c.feature.properties.citycode,cadastre:y?{section:y.section,numero:y.numero,departement:y.departement,identifiant:y.identifiant}:null,cadastreLoading:A,cadastreError:I,onCoordsChange:Ce}),j.jsxs("div",{className:"flex gap-3",children:[j.jsxs(_a,{variant:"outline",onClick:()=>o(1),className:"flex-1",children:[j.jsx(Rd,{className:"h-4 w-4 mr-1"}),"Retour"]}),j.jsxs(_a,{onClick:_t,className:"flex-1 bg-edl-700 hover:bg-edl-800",size:"lg",children:["Calculer les risques",j.jsx(E1,{className:"h-4 w-4"})]})]})]})]}),n===3&&j.jsxs(gl,{children:[j.jsxs(om,{children:[j.jsx(lm,{className:"text-lg",children:"Calcul des risques en cours"}),j.jsx(Dg,{children:"Interrogation des bases de donnes officielles Gorisques (BRGM)"})]}),j.jsxs(yl,{className:"space-y-4",children:[le&&j.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:Object.entries(cF).map(([Ve,wt])=>j.jsxs("div",{className:`flex items-center gap-2 p-2 rounded-md text-sm transition-colors ${ye[Ve]?"bg-green-50 text-green-800":"bg-gray-50 text-gray-500"}`,children:[ye[Ve]?j.jsx(jg,{className:"h-3.5 w-3.5 text-green-600"}):j.jsx(Yg,{className:"h-3.5 w-3.5 animate-spin text-gray-400"}),j.jsx("span",{className:"text-xs",children:wt})]},Ve))}),Le&&j.jsxs("div",{className:"flex items-start gap-3 p-4 bg-red-50 border border-red-200 rounded-lg",children:[j.jsx(g_,{className:"h-5 w-5 text-red-500 shrink-0 mt-0.5"}),j.jsxs("div",{children:[j.jsx("p",{className:"text-sm font-medium text-red-900",children:"Erreur lors du calcul"}),j.jsx("p",{className:"text-sm text-red-700",children:Le}),j.jsx(_a,{size:"sm",variant:"outline",className:"mt-2 border-red-300 text-red-700",onClick:_t,children:"Ressayer"})]})]}),Be&&!le&&j.jsxs("div",{className:"space-y-4 animate-fade-in",children:[j.jsxs("div",{className:`p-4 rounded-lg border text-center ${Ye==="high"?"bg-red-50 border-red-200":Ye==="medium"?"bg-orange-50 border-orange-200":Ye==="low"?"bg-yellow-50 border-yellow-200":"bg-green-50 border-green-200"}`,children:[j.jsxs("p",{className:"text-sm font-semibold text-gray-800 mb-1",children:[Te.filter(Ve=>Ve.expose).length," risque(s) identifi(s) sur ",Te.length," analyss"]}),j.jsx(qo,{variant:Ye==="high"?"danger":Ye==="medium"||Ye==="low"?"warning":"success",children:Ye==="high"?" Exposition importante":Ye==="medium"?" Exposition modre":Ye==="low"?"Exposition faible":" Peu expos"})]}),j.jsx(Fv,{items:Te}),j.jsxs("div",{className:"flex gap-3",children:[j.jsxs(_a,{variant:"outline",onClick:()=>o(2),className:"flex-1",children:[j.jsx(Rd,{className:"h-4 w-4 mr-1"}),"Retour"]}),j.jsxs(_a,{onClick:()=>o(4),className:"flex-1 bg-edl-700 hover:bg-edl-800",size:"lg",children:["Choisir ma formule",j.jsx(E1,{className:"h-4 w-4"})]})]})]}),le&&j.jsxs("div",{className:"space-y-2",children:[j.jsx(b_,{className:"h-4 w-3/4"}),j.jsx(b_,{className:"h-4 w-1/2"})]})]})]}),n===4&&j.jsxs(gl,{children:[j.jsxs(om,{children:[j.jsx(lm,{className:"text-lg",children:"Tlchargez votre ERP"}),j.jsx(Dg,{children:"Paiement scuris par Stripe  vous serez redirig vers la page de paiement."})]}),j.jsxs(yl,{className:"space-y-4",children:[j.jsx(DT,{selected:z,onSelect:Z,onConfirm:_e}),O&&j.jsxs("div",{className:"flex items-center justify-center gap-3 p-4 bg-blue-50 border border-blue-200 rounded-lg animate-fade-in",children:[j.jsx(Yg,{className:"h-5 w-5 animate-spin text-blue-600"}),j.jsxs("div",{children:[j.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Redirection vers Stripe"}),j.jsx("p",{className:"text-xs text-blue-700",children:"Cration de votre session de paiement scurise"})]}),j.jsx(M4,{className:"h-5 w-5 text-blue-400 ml-auto"})]}),ie&&j.jsxs("div",{className:"flex items-start gap-3 p-4 bg-red-50 border border-red-200 rounded-lg",children:[j.jsx(g_,{className:"h-5 w-5 text-red-500 shrink-0 mt-0.5"}),j.jsxs("div",{children:[j.jsx("p",{className:"text-sm font-medium text-red-900",children:"Erreur de paiement"}),j.jsx("p",{className:"text-sm text-red-700",children:ie})]})]}),j.jsxs(_a,{variant:"ghost",className:"w-full text-sm text-gray-500",onClick:()=>o(3),disabled:O,children:[j.jsx(Rd,{className:"h-4 w-4 mr-1"}),"Retour aux rsultats"]})]})]})]})]})}var hF=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],fF=hF.reduce((i,n)=>{const o=yB(`Primitive.${n}`),c=We.forwardRef((m,y)=>{const{asChild:v,...A}=m,S=v?o:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),j.jsx(S,{...A,ref:y})});return c.displayName=`Primitive.${n}`,{...i,[n]:c}},{}),dF="Separator",Mb="horizontal",pF=["horizontal","vertical"],OB=We.forwardRef((i,n)=>{const{decorative:o,orientation:c=Mb,...m}=i,y=mF(c)?c:Mb,A=o?{role:"none"}:{"aria-orientation":y==="vertical"?y:void 0,role:"separator"};return j.jsx(fF.div,{"data-orientation":y,...A,...m,ref:n})});OB.displayName=dF;function mF(i){return pF.includes(i)}var zB=OB;const Sx=We.forwardRef(({className:i,orientation:n="horizontal",decorative:o=!0,...c},m)=>j.jsx(zB,{ref:m,decorative:o,orientation:n,className:ZA("shrink-0 bg-border",n==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",i),...c}));Sx.displayName=zB.displayName;function af(i,n,{checkForDefaultPrevented:o=!0}={}){return function(m){if(i?.(m),o===!1||!m.defaultPrevented)return n?.(m)}}function Ex(i,n=[]){let o=[];function c(y,v){const A=We.createContext(v),S=o.length;o=[...o,v];const I=z=>{const{scope:Z,children:O,...ce}=z,ie=Z?.[i]?.[S]||A,W=We.useMemo(()=>ce,Object.values(ce));return j.jsx(ie.Provider,{value:W,children:O})};I.displayName=y+"Provider";function D(z,Z){const O=Z?.[i]?.[S]||A,ce=We.useContext(O);if(ce)return ce;if(v!==void 0)return v;throw new Error(`\`${z}\` must be used within \`${y}\``)}return[I,D]}const m=()=>{const y=o.map(v=>We.createContext(v));return function(A){const S=A?.[i]||y;return We.useMemo(()=>({[`__scope${i}`]:{...A,[i]:S}}),[A,S])}};return m.scopeName=i,[c,gF(m,...n)]}function gF(...i){const n=i[0];if(i.length===1)return n;const o=()=>{const c=i.map(m=>({useScope:m(),scopeName:m.scopeName}));return function(y){const v=c.reduce((A,{useScope:S,scopeName:I})=>{const z=S(y)[`__scope${I}`];return{...A,...z}},{});return We.useMemo(()=>({[`__scope${n.scopeName}`]:v}),[v])}};return o.scopeName=n.scopeName,o}function Ub(i){const n=yF(i),o=We.forwardRef((c,m)=>{const{children:y,...v}=c,A=We.Children.toArray(y),S=A.find(vF);if(S){const I=S.props.children,D=A.map(z=>z===S?We.Children.count(I)>1?We.Children.only(null):We.isValidElement(I)?I.props.children:null:z);return j.jsx(n,{...v,ref:m,children:We.isValidElement(I)?We.cloneElement(I,void 0,D):null})}return j.jsx(n,{...v,ref:m,children:y})});return o.displayName=`${i}.Slot`,o}function yF(i){const n=We.forwardRef((o,c)=>{const{children:m,...y}=o;if(We.isValidElement(m)){const v=bF(m),A=xF(y,m.props);return m.type!==We.Fragment&&(A.ref=c?O_(c,v):v),We.cloneElement(m,A)}return We.Children.count(m)>1?We.Children.only(null):null});return n.displayName=`${i}.SlotClone`,n}var _F=Symbol("radix.slottable");function vF(i){return We.isValidElement(i)&&typeof i.type=="function"&&"__radixId"in i.type&&i.type.__radixId===_F}function xF(i,n){const o={...n};for(const c in n){const m=i[c],y=n[c];/^on[A-Z]/.test(c)?m&&y?o[c]=(...A)=>{const S=y(...A);return m(...A),S}:m&&(o[c]=m):c==="style"?o[c]={...m,...y}:c==="className"&&(o[c]=[m,y].filter(Boolean).join(" "))}return{...i,...o}}function bF(i){let n=Object.getOwnPropertyDescriptor(i.props,"ref")?.get,o=n&&"isReactWarning"in n&&n.isReactWarning;return o?i.ref:(n=Object.getOwnPropertyDescriptor(i,"ref")?.get,o=n&&"isReactWarning"in n&&n.isReactWarning,o?i.props.ref:i.props.ref||i.ref)}function wF(i){const n=i+"CollectionProvider",[o,c]=Ex(n),[m,y]=o(n,{collectionRef:{current:null},itemMap:new Map}),v=ie=>{const{scope:W,children:le}=ie,ye=Gf.useRef(null),Be=Gf.useRef(new Map).current;return j.jsx(m,{scope:W,itemMap:Be,collectionRef:ye,children:le})};v.displayName=n;const A=i+"CollectionSlot",S=Ub(A),I=Gf.forwardRef((ie,W)=>{const{scope:le,children:ye}=ie,Be=y(A,le),Le=__(W,Be.collectionRef);return j.jsx(S,{ref:Le,children:ye})});I.displayName=A;const D=i+"CollectionItemSlot",z="data-radix-collection-item",Z=Ub(D),O=Gf.forwardRef((ie,W)=>{const{scope:le,children:ye,...Be}=ie,Le=Gf.useRef(null),lt=__(W,Le),ft=y(D,le);return Gf.useEffect(()=>(ft.itemMap.set(Le,{ref:Le,...Be}),()=>{ft.itemMap.delete(Le)})),j.jsx(Z,{[z]:"",ref:lt,children:ye})});O.displayName=D;function ce(ie){const W=y(i+"CollectionConsumer",ie);return Gf.useCallback(()=>{const ye=W.collectionRef.current;if(!ye)return[];const Be=Array.from(ye.querySelectorAll(`[${z}]`));return Array.from(W.itemMap.values()).sort((ft,ut)=>Be.indexOf(ft.ref.current)-Be.indexOf(ut.ref.current))},[W.collectionRef,W.itemMap])}return[{Provider:v,Slot:I,ItemSlot:O},ce,c]}var w_=globalThis?.document?We.useLayoutEffect:()=>{},BF=fx[" useId ".trim().toString()]||(()=>{}),CF=0;function jB(i){const[n,o]=We.useState(BF());return w_(()=>{o(c=>c??String(CF++))},[i]),n?`radix-${n}`:""}function SF(i){const n=EF(i),o=We.forwardRef((c,m)=>{const{children:y,...v}=c,A=We.Children.toArray(y),S=A.find(FF);if(S){const I=S.props.children,D=A.map(z=>z===S?We.Children.count(I)>1?We.Children.only(null):We.isValidElement(I)?I.props.children:null:z);return j.jsx(n,{...v,ref:m,children:We.isValidElement(I)?We.cloneElement(I,void 0,D):null})}return j.jsx(n,{...v,ref:m,children:y})});return o.displayName=`${i}.Slot`,o}function EF(i){const n=We.forwardRef((o,c)=>{const{children:m,...y}=o;if(We.isValidElement(m)){const v=LF(m),A=IF(y,m.props);return m.type!==We.Fragment&&(A.ref=c?O_(c,v):v),We.cloneElement(m,A)}return We.Children.count(m)>1?We.Children.only(null):null});return n.displayName=`${i}.SlotClone`,n}var TF=Symbol("radix.slottable");function FF(i){return We.isValidElement(i)&&typeof i.type=="function"&&"__radixId"in i.type&&i.type.__radixId===TF}function IF(i,n){const o={...n};for(const c in n){const m=i[c],y=n[c];/^on[A-Z]/.test(c)?m&&y?o[c]=(...A)=>{const S=y(...A);return m(...A),S}:m&&(o[c]=m):c==="style"?o[c]={...m,...y}:c==="className"&&(o[c]=[m,y].filter(Boolean).join(" "))}return{...i,...o}}function LF(i){let n=Object.getOwnPropertyDescriptor(i.props,"ref")?.get,o=n&&"isReactWarning"in n&&n.isReactWarning;return o?i.ref:(n=Object.getOwnPropertyDescriptor(i,"ref")?.get,o=n&&"isReactWarning"in n&&n.isReactWarning,o?i.props.ref:i.props.ref||i.ref)}var MF=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],vm=MF.reduce((i,n)=>{const o=SF(`Primitive.${n}`),c=We.forwardRef((m,y)=>{const{asChild:v,...A}=m,S=v?o:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),j.jsx(S,{...A,ref:y})});return c.displayName=`Primitive.${n}`,{...i,[n]:c}},{});function UF(i){const n=We.useRef(i);return We.useEffect(()=>{n.current=i}),We.useMemo(()=>(...o)=>n.current?.(...o),[])}var DF=fx[" useInsertionEffect ".trim().toString()]||w_;function HB({prop:i,defaultProp:n,onChange:o=()=>{},caller:c}){const[m,y,v]=PF({defaultProp:n,onChange:o}),A=i!==void 0,S=A?i:m;{const D=We.useRef(i!==void 0);We.useEffect(()=>{const z=D.current;z!==A&&console.warn(`${c} is changing from ${z?"controlled":"uncontrolled"} to ${A?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),D.current=A},[A,c])}const I=We.useCallback(D=>{if(A){const z=NF(D)?D(i):D;z!==i&&v.current?.(z)}else y(D)},[A,i,y,v]);return[S,I]}function PF({defaultProp:i,onChange:n}){const[o,c]=We.useState(i),m=We.useRef(o),y=We.useRef(n);return DF(()=>{y.current=n},[n]),We.useEffect(()=>{m.current!==o&&(y.current?.(o),m.current=o)},[o,m]),[o,c,y]}function NF(i){return typeof i=="function"}var RF=We.createContext(void 0);function VB(i){const n=We.useContext(RF);return i||n||"ltr"}var U1="rovingFocusGroup.onEntryFocus",QF={bubbles:!1,cancelable:!0},l0="RovingFocusGroup",[Lv,GB,kF]=wF(l0),[OF,qB]=Ex(l0,[kF]),[zF,jF]=OF(l0),KB=We.forwardRef((i,n)=>j.jsx(Lv.Provider,{scope:i.__scopeRovingFocusGroup,children:j.jsx(Lv.Slot,{scope:i.__scopeRovingFocusGroup,children:j.jsx(HF,{...i,ref:n})})}));KB.displayName=l0;var HF=We.forwardRef((i,n)=>{const{__scopeRovingFocusGroup:o,orientation:c,loop:m=!1,dir:y,currentTabStopId:v,defaultCurrentTabStopId:A,onCurrentTabStopIdChange:S,onEntryFocus:I,preventScrollOnEntryFocus:D=!1,...z}=i,Z=We.useRef(null),O=__(n,Z),ce=VB(y),[ie,W]=HB({prop:v,defaultProp:A??null,onChange:S,caller:l0}),[le,ye]=We.useState(!1),Be=UF(I),Le=GB(o),lt=We.useRef(!1),[ft,ut]=We.useState(0);return We.useEffect(()=>{const Ne=Z.current;if(Ne)return Ne.addEventListener(U1,Be),()=>Ne.removeEventListener(U1,Be)},[Be]),j.jsx(zF,{scope:o,orientation:c,dir:ce,loop:m,currentTabStopId:ie,onItemFocus:We.useCallback(Ne=>W(Ne),[W]),onItemShiftTab:We.useCallback(()=>ye(!0),[]),onFocusableItemAdd:We.useCallback(()=>ut(Ne=>Ne+1),[]),onFocusableItemRemove:We.useCallback(()=>ut(Ne=>Ne-1),[]),children:j.jsx(vm.div,{tabIndex:le||ft===0?-1:0,"data-orientation":c,...z,ref:O,style:{outline:"none",...i.style},onMouseDown:af(i.onMouseDown,()=>{lt.current=!0}),onFocus:af(i.onFocus,Ne=>{const Ce=!lt.current;if(Ne.target===Ne.currentTarget&&Ce&&!le){const _t=new CustomEvent(U1,QF);if(Ne.currentTarget.dispatchEvent(_t),!_t.defaultPrevented){const _e=Le().filter(ke=>ke.focusable),Te=_e.find(ke=>ke.active),Ye=_e.find(ke=>ke.id===ie),wt=[Te,Ye,..._e].filter(Boolean).map(ke=>ke.ref.current);WB(wt,D)}}lt.current=!1}),onBlur:af(i.onBlur,()=>ye(!1))})})}),ZB="RovingFocusGroupItem",XB=We.forwardRef((i,n)=>{const{__scopeRovingFocusGroup:o,focusable:c=!0,active:m=!1,tabStopId:y,children:v,...A}=i,S=jB(),I=y||S,D=jF(ZB,o),z=D.currentTabStopId===I,Z=GB(o),{onFocusableItemAdd:O,onFocusableItemRemove:ce,currentTabStopId:ie}=D;return We.useEffect(()=>{if(c)return O(),()=>ce()},[c,O,ce]),j.jsx(Lv.ItemSlot,{scope:o,id:I,focusable:c,active:m,children:j.jsx(vm.span,{tabIndex:z?0:-1,"data-orientation":D.orientation,...A,ref:n,onMouseDown:af(i.onMouseDown,W=>{c?D.onItemFocus(I):W.preventDefault()}),onFocus:af(i.onFocus,()=>D.onItemFocus(I)),onKeyDown:af(i.onKeyDown,W=>{if(W.key==="Tab"&&W.shiftKey){D.onItemShiftTab();return}if(W.target!==W.currentTarget)return;const le=qF(W,D.orientation,D.dir);if(le!==void 0){if(W.metaKey||W.ctrlKey||W.altKey||W.shiftKey)return;W.preventDefault();let Be=Z().filter(Le=>Le.focusable).map(Le=>Le.ref.current);if(le==="last")Be.reverse();else if(le==="prev"||le==="next"){le==="prev"&&Be.reverse();const Le=Be.indexOf(W.currentTarget);Be=D.loop?KF(Be,Le+1):Be.slice(Le+1)}setTimeout(()=>WB(Be))}}),children:typeof v=="function"?v({isCurrentTabStop:z,hasTabStop:ie!=null}):v})})});XB.displayName=ZB;var VF={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function GF(i,n){return n!=="rtl"?i:i==="ArrowLeft"?"ArrowRight":i==="ArrowRight"?"ArrowLeft":i}function qF(i,n,o){const c=GF(i.key,o);if(!(n==="vertical"&&["ArrowLeft","ArrowRight"].includes(c))&&!(n==="horizontal"&&["ArrowUp","ArrowDown"].includes(c)))return VF[c]}function WB(i,n=!1){const o=document.activeElement;for(const c of i)if(c===o||(c.focus({preventScroll:n}),document.activeElement!==o))return}function KF(i,n){return i.map((o,c)=>i[(n+c)%i.length])}var ZF=KB,XF=XB;function WF(i,n){return We.useReducer((o,c)=>n[o][c]??o,i)}var YB=i=>{const{present:n,children:o}=i,c=YF(n),m=typeof o=="function"?o({present:c.isPresent}):We.Children.only(o),y=__(c.ref,$F(m));return typeof o=="function"||c.isPresent?We.cloneElement(m,{ref:y}):null};YB.displayName="Presence";function YF(i){const[n,o]=We.useState(),c=We.useRef(null),m=We.useRef(i),y=We.useRef("none"),v=i?"mounted":"unmounted",[A,S]=WF(v,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return We.useEffect(()=>{const I=by(c.current);y.current=A==="mounted"?I:"none"},[A]),w_(()=>{const I=c.current,D=m.current;if(D!==i){const Z=y.current,O=by(I);i?S("MOUNT"):O==="none"||I?.display==="none"?S("UNMOUNT"):S(D&&Z!==O?"ANIMATION_OUT":"UNMOUNT"),m.current=i}},[i,S]),w_(()=>{if(n){let I;const D=n.ownerDocument.defaultView??window,z=O=>{const ie=by(c.current).includes(CSS.escape(O.animationName));if(O.target===n&&ie&&(S("ANIMATION_END"),!m.current)){const W=n.style.animationFillMode;n.style.animationFillMode="forwards",I=D.setTimeout(()=>{n.style.animationFillMode==="forwards"&&(n.style.animationFillMode=W)})}},Z=O=>{O.target===n&&(y.current=by(c.current))};return n.addEventListener("animationstart",Z),n.addEventListener("animationcancel",z),n.addEventListener("animationend",z),()=>{D.clearTimeout(I),n.removeEventListener("animationstart",Z),n.removeEventListener("animationcancel",z),n.removeEventListener("animationend",z)}}else S("ANIMATION_END")},[n,S]),{isPresent:["mounted","unmountSuspended"].includes(A),ref:We.useCallback(I=>{c.current=I?getComputedStyle(I):null,o(I)},[])}}function by(i){return i?.animationName||"none"}function $F(i){let n=Object.getOwnPropertyDescriptor(i.props,"ref")?.get,o=n&&"isReactWarning"in n&&n.isReactWarning;return o?i.ref:(n=Object.getOwnPropertyDescriptor(i,"ref")?.get,o=n&&"isReactWarning"in n&&n.isReactWarning,o?i.props.ref:i.props.ref||i.ref)}var z_="Tabs",[JF]=Ex(z_,[qB]),$B=qB(),[eI,Tx]=JF(z_),JB=We.forwardRef((i,n)=>{const{__scopeTabs:o,value:c,onValueChange:m,defaultValue:y,orientation:v="horizontal",dir:A,activationMode:S="automatic",...I}=i,D=VB(A),[z,Z]=HB({prop:c,onChange:m,defaultProp:y??"",caller:z_});return j.jsx(eI,{scope:o,baseId:jB(),value:z,onValueChange:Z,orientation:v,dir:D,activationMode:S,children:j.jsx(vm.div,{dir:D,"data-orientation":v,...I,ref:n})})});JB.displayName=z_;var e5="TabsList",t5=We.forwardRef((i,n)=>{const{__scopeTabs:o,loop:c=!0,...m}=i,y=Tx(e5,o),v=$B(o);return j.jsx(ZF,{asChild:!0,...v,orientation:y.orientation,dir:y.dir,loop:c,children:j.jsx(vm.div,{role:"tablist","aria-orientation":y.orientation,...m,ref:n})})});t5.displayName=e5;var r5="TabsTrigger",n5=We.forwardRef((i,n)=>{const{__scopeTabs:o,value:c,disabled:m=!1,...y}=i,v=Tx(r5,o),A=$B(o),S=s5(v.baseId,c),I=o5(v.baseId,c),D=c===v.value;return j.jsx(XF,{asChild:!0,...A,focusable:!m,active:D,children:j.jsx(vm.button,{type:"button",role:"tab","aria-selected":D,"aria-controls":I,"data-state":D?"active":"inactive","data-disabled":m?"":void 0,disabled:m,id:S,...y,ref:n,onMouseDown:af(i.onMouseDown,z=>{!m&&z.button===0&&z.ctrlKey===!1?v.onValueChange(c):z.preventDefault()}),onKeyDown:af(i.onKeyDown,z=>{[" ","Enter"].includes(z.key)&&v.onValueChange(c)}),onFocus:af(i.onFocus,()=>{const z=v.activationMode!=="manual";!D&&!m&&z&&v.onValueChange(c)})})})});n5.displayName=r5;var i5="TabsContent",a5=We.forwardRef((i,n)=>{const{__scopeTabs:o,value:c,forceMount:m,children:y,...v}=i,A=Tx(i5,o),S=s5(A.baseId,c),I=o5(A.baseId,c),D=c===A.value,z=We.useRef(D);return We.useEffect(()=>{const Z=requestAnimationFrame(()=>z.current=!1);return()=>cancelAnimationFrame(Z)},[]),j.jsx(YB,{present:m||D,children:({present:Z})=>j.jsx(vm.div,{"data-state":D?"active":"inactive","data-orientation":A.orientation,role:"tabpanel","aria-labelledby":S,hidden:!Z,id:I,tabIndex:0,...v,ref:n,style:{...i.style,animationDuration:z.current?"0s":void 0},children:Z&&y})})});a5.displayName=i5;function s5(i,n){return`${i}-trigger-${n}`}function o5(i,n){return`${i}-content-${n}`}var tI=JB,l5=t5,A5=n5,c5=a5;const rI=tI,u5=We.forwardRef(({className:i,...n},o)=>j.jsx(l5,{ref:o,className:ZA("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",i),...n}));u5.displayName=l5.displayName;const i_=We.forwardRef(({className:i,...n},o)=>j.jsx(A5,{ref:o,className:ZA("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",i),...n}));i_.displayName=A5.displayName;const a_=We.forwardRef(({className:i,...n},o)=>j.jsx(c5,{ref:o,className:ZA("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",i),...n}));a_.displayName=c5.displayName;function D1(i){return i?new Date(i).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}):""}function nI({arretes:i}){return i.length===0?j.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center text-muted-foreground",children:[j.jsx(x4,{className:"h-8 w-8 mb-2"}),j.jsx("p",{className:"text-sm",children:"Aucun arrt de catastrophe naturelle recens pour cette commune depuis 1982."})]}):j.jsxs("div",{className:"space-y-2",children:[j.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[j.jsx($g,{className:"h-4 w-4 text-orange-500"}),j.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[i.length," arrt",i.length>1?"s":""," de catastrophe naturelle depuis 1982"]})]}),j.jsx("div",{className:"overflow-hidden rounded-md border border-border",children:j.jsxs("table",{className:"w-full text-sm",children:[j.jsx("thead",{children:j.jsxs("tr",{className:"bg-slate-50 border-b border-border",children:[j.jsx("th",{className:"text-left px-3 py-2 text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Type de sinistre"}),j.jsx("th",{className:"text-left px-3 py-2 text-xs font-medium text-gray-500 uppercase tracking-wide hidden sm:table-cell",children:"Dbut"}),j.jsx("th",{className:"text-left px-3 py-2 text-xs font-medium text-gray-500 uppercase tracking-wide hidden sm:table-cell",children:"Fin"}),j.jsx("th",{className:"text-left px-3 py-2 text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Arrt JO"})]})}),j.jsx("tbody",{className:"divide-y divide-border",children:i.map((n,o)=>j.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[j.jsx("td",{className:"px-3 py-2.5",children:j.jsx("span",{className:"text-xs font-medium text-gray-800",children:n.libRisqueJo})}),j.jsx("td",{className:"px-3 py-2.5 text-xs text-gray-600 hidden sm:table-cell",children:D1(n.datDebutEvt)}),j.jsx("td",{className:"px-3 py-2.5 text-xs text-gray-600 hidden sm:table-cell",children:D1(n.datFinEvt)}),j.jsx("td",{className:"px-3 py-2.5",children:j.jsx(qo,{variant:"warning",className:"text-xs",children:D1(n.datPubliArrete)})})]},o))})]})})]})}const iI={"PPR Naturel":"bg-blue-100 text-blue-800","PPR Technologique":"bg-purple-100 text-purple-800","Risque sismique":"bg-orange-100 text-orange-800","Retrait-gonflement des argiles":"bg-yellow-100 text-yellow-800","Secteur d'Information des Sols (SIS)":"bg-red-100 text-red-800"};function aI({prescriptions:i}){return i.length===0?j.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center text-muted-foreground",children:[j.jsx(y_,{className:"h-8 w-8 mb-2 text-green-500"}),j.jsx("p",{className:"text-sm font-medium text-green-700",children:"Aucune prescription de travaux applicable"}),j.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Le bien n'est pas soumis  des travaux rglementaires obligatoires au titre des risques."})]}):j.jsxs("div",{className:"space-y-3",children:[j.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Les prescriptions suivantes s'appliquent au bien en raison de son exposition aux risques identifis. Consultez le rglement des PPR concerns pour les dtails des travaux obligatoires."}),i.map((n,o)=>j.jsx(gl,{className:"border-l-4 border-l-orange-400",children:j.jsx(yl,{className:"pt-4 pb-4",children:j.jsxs("div",{className:"flex items-start gap-3",children:[j.jsx(rf,{className:"h-4 w-4 text-orange-500 mt-0.5 shrink-0"}),j.jsxs("div",{className:"space-y-2",children:[j.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[j.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold ${iI[n.type]??"bg-gray-100 text-gray-800"}`,children:n.type}),n.page_reglement&&j.jsxs(qo,{variant:"outline",className:"text-xs",children:["Rglement p.",n.page_reglement]})]}),j.jsx("p",{className:"text-sm text-gray-700",children:n.description})]})]})})},o)),j.jsx("p",{className:"text-xs text-gray-500 italic pt-2",children:"* Les prescriptions listes sont indicatives. Consultez la mairie ou la prfecture pour obtenir le rglement complet du PPR applicable."})]})}const sI="modulepreload",oI=function(i){return"/"+i},Db={},P1=function(n,o,c){let m=Promise.resolve();if(o&&o.length>0){let S=function(I){return Promise.all(I.map(D=>Promise.resolve(D).then(z=>({status:"fulfilled",value:z}),z=>({status:"rejected",reason:z}))))};document.getElementsByTagName("link");const v=document.querySelector("meta[property=csp-nonce]"),A=v?.nonce||v?.getAttribute("nonce");m=S(o.map(I=>{if(I=oI(I),I in Db)return;Db[I]=!0;const D=I.endsWith(".css"),z=D?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${I}"]${z}`))return;const Z=document.createElement("link");if(Z.rel=D?"stylesheet":sI,D||(Z.as="script"),Z.crossOrigin="",Z.href=I,A&&Z.setAttribute("nonce",A),document.head.appendChild(Z),D)return new Promise((O,ce)=>{Z.addEventListener("load",O),Z.addEventListener("error",()=>ce(new Error(`Unable to preload CSS for ${I}`)))})}))}function y(v){const A=new Event("vite:preloadError",{cancelable:!0});if(A.payload=v,window.dispatchEvent(A),!A.defaultPrevented)throw v}return m.then(v=>{for(const A of v||[])A.status==="rejected"&&y(A.reason);return n().catch(y)})};function oa(i){"@babel/helpers - typeof";return oa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},oa(i)}var qu=Uint8Array,Pc=Uint16Array,Fx=Int32Array,Ix=new qu([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Lx=new qu([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Pb=new qu([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),h5=function(i,n){for(var o=new Pc(31),c=0;c<31;++c)o[c]=n+=1<<i[c-1];for(var m=new Fx(o[30]),c=1;c<30;++c)for(var y=o[c];y<o[c+1];++y)m[y]=y-o[c]<<5|c;return{b:o,r:m}},f5=h5(Ix,2),lI=f5.b,Mv=f5.r;lI[28]=258,Mv[258]=28;var AI=h5(Lx,0),Nb=AI.r,Uv=new Pc(32768);for(var Ka=0;Ka<32768;++Ka){var Hf=(Ka&43690)>>1|(Ka&21845)<<1;Hf=(Hf&52428)>>2|(Hf&13107)<<2,Hf=(Hf&61680)>>4|(Hf&3855)<<4,Uv[Ka]=((Hf&65280)>>8|(Hf&255)<<8)>>1}var Hg=(function(i,n,o){for(var c=i.length,m=0,y=new Pc(n);m<c;++m)i[m]&&++y[i[m]-1];var v=new Pc(n);for(m=1;m<n;++m)v[m]=v[m-1]+y[m-1]<<1;var A;if(o){A=new Pc(1<<n);var S=15-n;for(m=0;m<c;++m)if(i[m])for(var I=m<<4|i[m],D=n-i[m],z=v[i[m]-1]++<<D,Z=z|(1<<D)-1;z<=Z;++z)A[Uv[z]>>S]=I}else for(A=new Pc(c),m=0;m<c;++m)i[m]&&(A[m]=Uv[v[i[m]-1]++]>>15-i[m]);return A}),Hd=new qu(288);for(var Ka=0;Ka<144;++Ka)Hd[Ka]=8;for(var Ka=144;Ka<256;++Ka)Hd[Ka]=9;for(var Ka=256;Ka<280;++Ka)Hd[Ka]=7;for(var Ka=280;Ka<288;++Ka)Hd[Ka]=8;var B_=new qu(32);for(var Ka=0;Ka<32;++Ka)B_[Ka]=5;var cI=Hg(Hd,9,0),uI=Hg(B_,5,0),d5=function(i){return(i+7)/8|0},hI=function(i,n,o){return(o==null||o>i.length)&&(o=i.length),new qu(i.subarray(n,o))},Yh=function(i,n,o){o<<=n&7;var c=n/8|0;i[c]|=o,i[c+1]|=o>>8},Tg=function(i,n,o){o<<=n&7;var c=n/8|0;i[c]|=o,i[c+1]|=o>>8,i[c+2]|=o>>16},N1=function(i,n){for(var o=[],c=0;c<i.length;++c)i[c]&&o.push({s:c,f:i[c]});var m=o.length,y=o.slice();if(!m)return{t:m5,l:0};if(m==1){var v=new qu(o[0].s+1);return v[o[0].s]=1,{t:v,l:1}}o.sort(function(lt,ft){return lt.f-ft.f}),o.push({s:-1,f:25001});var A=o[0],S=o[1],I=0,D=1,z=2;for(o[0]={s:-1,f:A.f+S.f,l:A,r:S};D!=m-1;)A=o[o[I].f<o[z].f?I++:z++],S=o[I!=D&&o[I].f<o[z].f?I++:z++],o[D++]={s:-1,f:A.f+S.f,l:A,r:S};for(var Z=y[0].s,c=1;c<m;++c)y[c].s>Z&&(Z=y[c].s);var O=new Pc(Z+1),ce=Dv(o[D-1],O,0);if(ce>n){var c=0,ie=0,W=ce-n,le=1<<W;for(y.sort(function(ft,ut){return O[ut.s]-O[ft.s]||ft.f-ut.f});c<m;++c){var ye=y[c].s;if(O[ye]>n)ie+=le-(1<<ce-O[ye]),O[ye]=n;else break}for(ie>>=W;ie>0;){var Be=y[c].s;O[Be]<n?ie-=1<<n-O[Be]++-1:++c}for(;c>=0&&ie;--c){var Le=y[c].s;O[Le]==n&&(--O[Le],++ie)}ce=n}return{t:new qu(O),l:ce}},Dv=function(i,n,o){return i.s==-1?Math.max(Dv(i.l,n,o+1),Dv(i.r,n,o+1)):n[i.s]=o},Rb=function(i){for(var n=i.length;n&&!i[--n];);for(var o=new Pc(++n),c=0,m=i[0],y=1,v=function(S){o[c++]=S},A=1;A<=n;++A)if(i[A]==m&&A!=n)++y;else{if(!m&&y>2){for(;y>138;y-=138)v(32754);y>2&&(v(y>10?y-11<<5|28690:y-3<<5|12305),y=0)}else if(y>3){for(v(m),--y;y>6;y-=6)v(8304);y>2&&(v(y-3<<5|8208),y=0)}for(;y--;)v(m);y=1,m=i[A]}return{c:o.subarray(0,c),n}},Fg=function(i,n){for(var o=0,c=0;c<n.length;++c)o+=i[c]*n[c];return o},p5=function(i,n,o){var c=o.length,m=d5(n+2);i[m]=c&255,i[m+1]=c>>8,i[m+2]=i[m]^255,i[m+3]=i[m+1]^255;for(var y=0;y<c;++y)i[m+y+4]=o[y];return(m+4+c)*8},Qb=function(i,n,o,c,m,y,v,A,S,I,D){Yh(n,D++,o),++m[256];for(var z=N1(m,15),Z=z.t,O=z.l,ce=N1(y,15),ie=ce.t,W=ce.l,le=Rb(Z),ye=le.c,Be=le.n,Le=Rb(ie),lt=Le.c,ft=Le.n,ut=new Pc(19),Ne=0;Ne<ye.length;++Ne)++ut[ye[Ne]&31];for(var Ne=0;Ne<lt.length;++Ne)++ut[lt[Ne]&31];for(var Ce=N1(ut,7),_t=Ce.t,_e=Ce.l,Te=19;Te>4&&!_t[Pb[Te-1]];--Te);var Ye=I+5<<3,Ve=Fg(m,Hd)+Fg(y,B_)+v,wt=Fg(m,Z)+Fg(y,ie)+v+14+3*Te+Fg(ut,_t)+2*ut[16]+3*ut[17]+7*ut[18];if(S>=0&&Ye<=Ve&&Ye<=wt)return p5(n,D,i.subarray(S,S+I));var ke,ot,st,xt;if(Yh(n,D,1+(wt<Ve)),D+=2,wt<Ve){ke=Hg(Z,O,0),ot=Z,st=Hg(ie,W,0),xt=ie;var Ct=Hg(_t,_e,0);Yh(n,D,Be-257),Yh(n,D+5,ft-1),Yh(n,D+10,Te-4),D+=14;for(var Ne=0;Ne<Te;++Ne)Yh(n,D+3*Ne,_t[Pb[Ne]]);D+=3*Te;for(var Fe=[ye,lt],oe=0;oe<2;++oe)for(var xe=Fe[oe],Ne=0;Ne<xe.length;++Ne){var Ue=xe[Ne]&31;Yh(n,D,Ct[Ue]),D+=_t[Ue],Ue>15&&(Yh(n,D,xe[Ne]>>5&127),D+=xe[Ne]>>12)}}else ke=cI,ot=Hd,st=uI,xt=B_;for(var Ne=0;Ne<A;++Ne){var Ge=c[Ne];if(Ge>255){var Ue=Ge>>18&31;Tg(n,D,ke[Ue+257]),D+=ot[Ue+257],Ue>7&&(Yh(n,D,Ge>>23&31),D+=Ix[Ue]);var tt=Ge&31;Tg(n,D,st[tt]),D+=xt[tt],tt>3&&(Tg(n,D,Ge>>5&8191),D+=Lx[tt])}else Tg(n,D,ke[Ge]),D+=ot[Ge]}return Tg(n,D,ke[256]),D+ot[256]},fI=new Fx([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),m5=new qu(0),dI=function(i,n,o,c,m,y){var v=y.z||i.length,A=new qu(c+v+5*(1+Math.ceil(v/7e3))+m),S=A.subarray(c,A.length-m),I=y.l,D=(y.r||0)&7;if(n){D&&(S[0]=y.r>>3);for(var z=fI[n-1],Z=z>>13,O=z&8191,ce=(1<<o)-1,ie=y.p||new Pc(32768),W=y.h||new Pc(ce+1),le=Math.ceil(o/3),ye=2*le,Be=function(xr){return(i[xr]^i[xr+1]<<le^i[xr+2]<<ye)&ce},Le=new Fx(25e3),lt=new Pc(288),ft=new Pc(32),ut=0,Ne=0,Ce=y.i||0,_t=0,_e=y.w||0,Te=0;Ce+2<v;++Ce){var Ye=Be(Ce),Ve=Ce&32767,wt=W[Ye];if(ie[Ve]=wt,W[Ye]=Ve,_e<=Ce){var ke=v-Ce;if((ut>7e3||_t>24576)&&(ke>423||!I)){D=Qb(i,S,0,Le,lt,ft,Ne,_t,Te,Ce-Te,D),_t=ut=Ne=0,Te=Ce;for(var ot=0;ot<286;++ot)lt[ot]=0;for(var ot=0;ot<30;++ot)ft[ot]=0}var st=2,xt=0,Ct=O,Fe=Ve-wt&32767;if(ke>2&&Ye==Be(Ce-Fe))for(var oe=Math.min(Z,ke)-1,xe=Math.min(32767,Ce),Ue=Math.min(258,ke);Fe<=xe&&--Ct&&Ve!=wt;){if(i[Ce+st]==i[Ce+st-Fe]){for(var Ge=0;Ge<Ue&&i[Ce+Ge]==i[Ce+Ge-Fe];++Ge);if(Ge>st){if(st=Ge,xt=Fe,Ge>oe)break;for(var tt=Math.min(Fe,Ge-2),mt=0,ot=0;ot<tt;++ot){var Pt=Ce-Fe+ot&32767,Et=ie[Pt],$t=Pt-Et&32767;$t>mt&&(mt=$t,wt=Pt)}}}Ve=wt,wt=ie[Ve],Fe+=Ve-wt&32767}if(xt){Le[_t++]=268435456|Mv[st]<<18|Nb[xt];var Ar=Mv[st]&31,pr=Nb[xt]&31;Ne+=Ix[Ar]+Lx[pr],++lt[257+Ar],++ft[pr],_e=Ce+st,++ut}else Le[_t++]=i[Ce],++lt[i[Ce]]}}for(Ce=Math.max(Ce,_e);Ce<v;++Ce)Le[_t++]=i[Ce],++lt[i[Ce]];D=Qb(i,S,I,Le,lt,ft,Ne,_t,Te,Ce-Te,D),I||(y.r=D&7|S[D/8|0]<<3,D-=7,y.h=W,y.p=ie,y.i=Ce,y.w=_e)}else{for(var Ce=y.w||0;Ce<v+I;Ce+=65535){var br=Ce+65535;br>=v&&(S[D/8|0]=I,br=v),D=p5(S,D+1,i.subarray(Ce,br))}y.i=v}return hI(A,0,c+d5(D)+m)},g5=function(){var i=1,n=0;return{p:function(o){for(var c=i,m=n,y=o.length|0,v=0;v!=y;){for(var A=Math.min(v+2655,y);v<A;++v)m+=c+=o[v];c=(c&65535)+15*(c>>16),m=(m&65535)+15*(m>>16)}i=c,n=m},d:function(){return i%=65521,n%=65521,(i&255)<<24|(i&65280)<<8|(n&255)<<8|n>>8}}},pI=function(i,n,o,c,m){if(!m&&(m={l:1},n.dictionary)){var y=n.dictionary.subarray(-32768),v=new qu(y.length+i.length);v.set(y),v.set(i,y.length),i=v,m.w=y.length}return dI(i,n.level==null?6:n.level,n.mem==null?m.l?Math.ceil(Math.max(8,Math.min(13,Math.log(i.length)))*1.5):20:12+n.mem,o,c,m)},y5=function(i,n,o){for(;o;++n)i[n]=o,o>>>=8},mI=function(i,n){var o=n.level,c=o==0?0:o<6?1:o==9?3:2;if(i[0]=120,i[1]=c<<6|(n.dictionary&&32),i[1]|=31-(i[0]<<8|i[1])%31,n.dictionary){var m=g5();m.p(n.dictionary),y5(i,2,m.d())}};function Pv(i,n){n||(n={});var o=g5();o.p(i);var c=pI(i,n,n.dictionary?6:2,4);return mI(c,n),y5(c,c.length-4,o.d()),c}var gI=typeof TextDecoder<"u"&&new TextDecoder,yI=0;try{gI.decode(m5,{stream:!0}),yI=1}catch{}function _I(i){if(Array.isArray(i))return i}function vI(i,n){var o=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(o!=null){var c,m,y,v,A=[],S=!0,I=!1;try{if(y=(o=o.call(i)).next,n!==0)for(;!(S=(c=y.call(o)).done)&&(A.push(c.value),A.length!==n);S=!0);}catch(D){I=!0,m=D}finally{try{if(!S&&o.return!=null&&(v=o.return(),Object(v)!==v))return}finally{if(I)throw m}}return A}}function kb(i,n){(n==null||n>i.length)&&(n=i.length);for(var o=0,c=Array(n);o<n;o++)c[o]=i[o];return c}function xI(i,n){if(i){if(typeof i=="string")return kb(i,n);var o={}.toString.call(i).slice(8,-1);return o==="Object"&&i.constructor&&(o=i.constructor.name),o==="Map"||o==="Set"?Array.from(i):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?kb(i,n):void 0}}function bI(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ob(i,n){return _I(i)||vI(i,n)||xI(i,n)||bI()}function zb(i,n="utf8"){return new TextDecoder(n).decode(i)}const wI=new TextEncoder;function BI(i){return wI.encode(i)}const CI=1024*8,SI=(()=>{const i=new Uint8Array(4),n=new Uint32Array(i.buffer);return!((n[0]=1)&i[0])})(),R1={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class Mx{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(n=CI,o={}){let c=!1;typeof n=="number"?n=new ArrayBuffer(n):(c=!0,this.lastWrittenByte=n.byteLength);const m=o.offset?o.offset>>>0:0,y=n.byteLength-m;let v=m;(ArrayBuffer.isView(n)||n instanceof Mx)&&(n.byteLength!==n.buffer.byteLength&&(v=n.byteOffset+m),n=n.buffer),c?this.lastWrittenByte=y:this.lastWrittenByte=0,this.buffer=n,this.length=y,this.byteLength=y,this.byteOffset=v,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,v,y),this._mark=0,this._marks=[]}available(n=1){return this.offset+n<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(n=1){return this.offset+=n,this}back(n=1){return this.offset-=n,this}seek(n){return this.offset=n,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const n=this._marks.pop();if(n===void 0)throw new Error("Mark stack empty");return this.seek(n),this}rewind(){return this.offset=0,this}ensureAvailable(n=1){if(!this.available(n)){const c=(this.offset+n)*2,m=new Uint8Array(c);m.set(new Uint8Array(this.buffer)),this.buffer=m.buffer,this.length=c,this.byteLength=c,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(n=1){return this.readArray(n,"uint8")}readArray(n,o){const c=R1[o].BYTES_PER_ELEMENT*n,m=this.byteOffset+this.offset,y=this.buffer.slice(m,m+c);if(this.littleEndian===SI&&o!=="uint8"&&o!=="int8"){const A=new Uint8Array(this.buffer.slice(m,m+c));A.reverse();const S=new R1[o](A.buffer);return this.offset+=c,S.reverse(),S}const v=new R1[o](y);return this.offset+=c,v}readInt16(){const n=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,n}readUint16(){const n=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,n}readInt32(){const n=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,n}readUint32(){const n=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,n}readFloat32(){const n=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,n}readFloat64(){const n=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,n}readBigInt64(){const n=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,n}readBigUint64(){const n=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,n}readChar(){return String.fromCharCode(this.readInt8())}readChars(n=1){let o="";for(let c=0;c<n;c++)o+=this.readChar();return o}readUtf8(n=1){return zb(this.readBytes(n))}decodeText(n=1,o="utf8"){return zb(this.readBytes(n),o)}writeBoolean(n){return this.writeUint8(n?255:0),this}writeInt8(n){return this.ensureAvailable(1),this._data.setInt8(this.offset++,n),this._updateLastWrittenByte(),this}writeUint8(n){return this.ensureAvailable(1),this._data.setUint8(this.offset++,n),this._updateLastWrittenByte(),this}writeByte(n){return this.writeUint8(n)}writeBytes(n){this.ensureAvailable(n.length);for(let o=0;o<n.length;o++)this._data.setUint8(this.offset++,n[o]);return this._updateLastWrittenByte(),this}writeInt16(n){return this.ensureAvailable(2),this._data.setInt16(this.offset,n,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(n){return this.ensureAvailable(2),this._data.setUint16(this.offset,n,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(n){return this.ensureAvailable(4),this._data.setInt32(this.offset,n,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(n){return this.ensureAvailable(4),this._data.setUint32(this.offset,n,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(n){return this.ensureAvailable(4),this._data.setFloat32(this.offset,n,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(n){return this.ensureAvailable(8),this._data.setFloat64(this.offset,n,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(n){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,n,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(n){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,n,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(n){return this.writeUint8(n.charCodeAt(0))}writeChars(n){for(let o=0;o<n.length;o++)this.writeUint8(n.charCodeAt(o));return this}writeUtf8(n){return this.writeBytes(BI(n))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function xm(i){let n=i.length;for(;--n>=0;)i[n]=0}const EI=3,TI=258,_5=29,FI=256,II=FI+1+_5,v5=30,LI=512,MI=new Array((II+2)*2);xm(MI);const UI=new Array(v5*2);xm(UI);const DI=new Array(LI);xm(DI);const PI=new Array(TI-EI+1);xm(PI);const NI=new Array(_5);xm(NI);const RI=new Array(v5);xm(RI);const QI=(i,n,o,c)=>{let m=i&65535|0,y=i>>>16&65535|0,v=0;for(;o!==0;){v=o>2e3?2e3:o,o-=v;do m=m+n[c++]|0,y=y+m|0;while(--v);m%=65521,y%=65521}return m|y<<16|0};var Nv=QI;const kI=()=>{let i,n=[];for(var o=0;o<256;o++){i=o;for(var c=0;c<8;c++)i=i&1?3988292384^i>>>1:i>>>1;n[o]=i}return n},OI=new Uint32Array(kI()),zI=(i,n,o,c)=>{const m=OI,y=c+o;i^=-1;for(let v=c;v<y;v++)i=i>>>8^m[(i^n[v])&255];return i^-1};var xh=zI,Rv={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},x5={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const jI=(i,n)=>Object.prototype.hasOwnProperty.call(i,n);var HI=function(i){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const o=n.shift();if(o){if(typeof o!="object")throw new TypeError(o+"must be non-object");for(const c in o)jI(o,c)&&(i[c]=o[c])}}return i},VI=i=>{let n=0;for(let c=0,m=i.length;c<m;c++)n+=i[c].length;const o=new Uint8Array(n);for(let c=0,m=0,y=i.length;c<y;c++){let v=i[c];o.set(v,m),m+=v.length}return o},b5={assign:HI,flattenChunks:VI};let w5=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{w5=!1}const e0=new Uint8Array(256);for(let i=0;i<256;i++)e0[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;e0[254]=e0[254]=1;var GI=i=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(i);let n,o,c,m,y,v=i.length,A=0;for(m=0;m<v;m++)o=i.charCodeAt(m),(o&64512)===55296&&m+1<v&&(c=i.charCodeAt(m+1),(c&64512)===56320&&(o=65536+(o-55296<<10)+(c-56320),m++)),A+=o<128?1:o<2048?2:o<65536?3:4;for(n=new Uint8Array(A),y=0,m=0;y<A;m++)o=i.charCodeAt(m),(o&64512)===55296&&m+1<v&&(c=i.charCodeAt(m+1),(c&64512)===56320&&(o=65536+(o-55296<<10)+(c-56320),m++)),o<128?n[y++]=o:o<2048?(n[y++]=192|o>>>6,n[y++]=128|o&63):o<65536?(n[y++]=224|o>>>12,n[y++]=128|o>>>6&63,n[y++]=128|o&63):(n[y++]=240|o>>>18,n[y++]=128|o>>>12&63,n[y++]=128|o>>>6&63,n[y++]=128|o&63);return n};const qI=(i,n)=>{if(n<65534&&i.subarray&&w5)return String.fromCharCode.apply(null,i.length===n?i:i.subarray(0,n));let o="";for(let c=0;c<n;c++)o+=String.fromCharCode(i[c]);return o};var KI=(i,n)=>{const o=n||i.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(i.subarray(0,n));let c,m;const y=new Array(o*2);for(m=0,c=0;c<o;){let v=i[c++];if(v<128){y[m++]=v;continue}let A=e0[v];if(A>4){y[m++]=65533,c+=A-1;continue}for(v&=A===2?31:A===3?15:7;A>1&&c<o;)v=v<<6|i[c++]&63,A--;if(A>1){y[m++]=65533;continue}v<65536?y[m++]=v:(v-=65536,y[m++]=55296|v>>10&1023,y[m++]=56320|v&1023)}return qI(y,m)},ZI=(i,n)=>{n=n||i.length,n>i.length&&(n=i.length);let o=n-1;for(;o>=0&&(i[o]&192)===128;)o--;return o<0||o===0?n:o+e0[i[o]]>n?o:n},Qv={string2buf:GI,buf2string:KI,utf8border:ZI};function XI(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var WI=XI;const wy=16209,YI=16191;var $I=function(n,o){let c,m,y,v,A,S,I,D,z,Z,O,ce,ie,W,le,ye,Be,Le,lt,ft,ut,Ne,Ce,_t;const _e=n.state;c=n.next_in,Ce=n.input,m=c+(n.avail_in-5),y=n.next_out,_t=n.output,v=y-(o-n.avail_out),A=y+(n.avail_out-257),S=_e.dmax,I=_e.wsize,D=_e.whave,z=_e.wnext,Z=_e.window,O=_e.hold,ce=_e.bits,ie=_e.lencode,W=_e.distcode,le=(1<<_e.lenbits)-1,ye=(1<<_e.distbits)-1;e:do{ce<15&&(O+=Ce[c++]<<ce,ce+=8,O+=Ce[c++]<<ce,ce+=8),Be=ie[O&le];t:for(;;){if(Le=Be>>>24,O>>>=Le,ce-=Le,Le=Be>>>16&255,Le===0)_t[y++]=Be&65535;else if(Le&16){lt=Be&65535,Le&=15,Le&&(ce<Le&&(O+=Ce[c++]<<ce,ce+=8),lt+=O&(1<<Le)-1,O>>>=Le,ce-=Le),ce<15&&(O+=Ce[c++]<<ce,ce+=8,O+=Ce[c++]<<ce,ce+=8),Be=W[O&ye];r:for(;;){if(Le=Be>>>24,O>>>=Le,ce-=Le,Le=Be>>>16&255,Le&16){if(ft=Be&65535,Le&=15,ce<Le&&(O+=Ce[c++]<<ce,ce+=8,ce<Le&&(O+=Ce[c++]<<ce,ce+=8)),ft+=O&(1<<Le)-1,ft>S){n.msg="invalid distance too far back",_e.mode=wy;break e}if(O>>>=Le,ce-=Le,Le=y-v,ft>Le){if(Le=ft-Le,Le>D&&_e.sane){n.msg="invalid distance too far back",_e.mode=wy;break e}if(ut=0,Ne=Z,z===0){if(ut+=I-Le,Le<lt){lt-=Le;do _t[y++]=Z[ut++];while(--Le);ut=y-ft,Ne=_t}}else if(z<Le){if(ut+=I+z-Le,Le-=z,Le<lt){lt-=Le;do _t[y++]=Z[ut++];while(--Le);if(ut=0,z<lt){Le=z,lt-=Le;do _t[y++]=Z[ut++];while(--Le);ut=y-ft,Ne=_t}}}else if(ut+=z-Le,Le<lt){lt-=Le;do _t[y++]=Z[ut++];while(--Le);ut=y-ft,Ne=_t}for(;lt>2;)_t[y++]=Ne[ut++],_t[y++]=Ne[ut++],_t[y++]=Ne[ut++],lt-=3;lt&&(_t[y++]=Ne[ut++],lt>1&&(_t[y++]=Ne[ut++]))}else{ut=y-ft;do _t[y++]=_t[ut++],_t[y++]=_t[ut++],_t[y++]=_t[ut++],lt-=3;while(lt>2);lt&&(_t[y++]=_t[ut++],lt>1&&(_t[y++]=_t[ut++]))}}else if((Le&64)===0){Be=W[(Be&65535)+(O&(1<<Le)-1)];continue r}else{n.msg="invalid distance code",_e.mode=wy;break e}break}}else if((Le&64)===0){Be=ie[(Be&65535)+(O&(1<<Le)-1)];continue t}else if(Le&32){_e.mode=YI;break e}else{n.msg="invalid literal/length code",_e.mode=wy;break e}break}}while(c<m&&y<A);lt=ce>>3,c-=lt,ce-=lt<<3,O&=(1<<ce)-1,n.next_in=c,n.next_out=y,n.avail_in=c<m?5+(m-c):5-(c-m),n.avail_out=y<A?257+(A-y):257-(y-A),_e.hold=O,_e.bits=ce};const Zp=15,jb=852,Hb=592,Vb=0,Q1=1,Gb=2,JI=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),eL=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),tL=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),rL=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),nL=(i,n,o,c,m,y,v,A)=>{const S=A.bits;let I=0,D=0,z=0,Z=0,O=0,ce=0,ie=0,W=0,le=0,ye=0,Be,Le,lt,ft,ut,Ne=null,Ce;const _t=new Uint16Array(Zp+1),_e=new Uint16Array(Zp+1);let Te=null,Ye,Ve,wt;for(I=0;I<=Zp;I++)_t[I]=0;for(D=0;D<c;D++)_t[n[o+D]]++;for(O=S,Z=Zp;Z>=1&&_t[Z]===0;Z--);if(O>Z&&(O=Z),Z===0)return m[y++]=1<<24|64<<16|0,m[y++]=1<<24|64<<16|0,A.bits=1,0;for(z=1;z<Z&&_t[z]===0;z++);for(O<z&&(O=z),W=1,I=1;I<=Zp;I++)if(W<<=1,W-=_t[I],W<0)return-1;if(W>0&&(i===Vb||Z!==1))return-1;for(_e[1]=0,I=1;I<Zp;I++)_e[I+1]=_e[I]+_t[I];for(D=0;D<c;D++)n[o+D]!==0&&(v[_e[n[o+D]]++]=D);if(i===Vb?(Ne=Te=v,Ce=20):i===Q1?(Ne=JI,Te=eL,Ce=257):(Ne=tL,Te=rL,Ce=0),ye=0,D=0,I=z,ut=y,ce=O,ie=0,lt=-1,le=1<<O,ft=le-1,i===Q1&&le>jb||i===Gb&&le>Hb)return 1;for(;;){Ye=I-ie,v[D]+1<Ce?(Ve=0,wt=v[D]):v[D]>=Ce?(Ve=Te[v[D]-Ce],wt=Ne[v[D]-Ce]):(Ve=96,wt=0),Be=1<<I-ie,Le=1<<ce,z=Le;do Le-=Be,m[ut+(ye>>ie)+Le]=Ye<<24|Ve<<16|wt|0;while(Le!==0);for(Be=1<<I-1;ye&Be;)Be>>=1;if(Be!==0?(ye&=Be-1,ye+=Be):ye=0,D++,--_t[I]===0){if(I===Z)break;I=n[o+v[D]]}if(I>O&&(ye&ft)!==lt){for(ie===0&&(ie=O),ut+=z,ce=I-ie,W=1<<ce;ce+ie<Z&&(W-=_t[ce+ie],!(W<=0));)ce++,W<<=1;if(le+=1<<ce,i===Q1&&le>jb||i===Gb&&le>Hb)return 1;lt=ye&ft,m[lt]=O<<24|ce<<16|ut-y|0}}return ye!==0&&(m[ut+ye]=I-ie<<24|64<<16|0),A.bits=O,0};var Vg=nL;const iL=0,B5=1,C5=2,{Z_FINISH:qb,Z_BLOCK:aL,Z_TREES:By,Z_OK:Vd,Z_STREAM_END:sL,Z_NEED_DICT:oL,Z_STREAM_ERROR:mu,Z_DATA_ERROR:S5,Z_MEM_ERROR:E5,Z_BUF_ERROR:lL,Z_DEFLATED:Kb}=x5,j_=16180,Zb=16181,Xb=16182,Wb=16183,Yb=16184,$b=16185,Jb=16186,ew=16187,tw=16188,rw=16189,C_=16190,$h=16191,k1=16192,nw=16193,O1=16194,iw=16195,aw=16196,sw=16197,ow=16198,Cy=16199,Sy=16200,lw=16201,Aw=16202,cw=16203,uw=16204,hw=16205,z1=16206,fw=16207,dw=16208,is=16209,T5=16210,F5=16211,AL=852,cL=592,uL=15,hL=uL,pw=i=>(i>>>24&255)+(i>>>8&65280)+((i&65280)<<8)+((i&255)<<24);function fL(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Kd=i=>{if(!i)return 1;const n=i.state;return!n||n.strm!==i||n.mode<j_||n.mode>F5?1:0},I5=i=>{if(Kd(i))return mu;const n=i.state;return i.total_in=i.total_out=n.total=0,i.msg="",n.wrap&&(i.adler=n.wrap&1),n.mode=j_,n.last=0,n.havedict=0,n.flags=-1,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new Int32Array(AL),n.distcode=n.distdyn=new Int32Array(cL),n.sane=1,n.back=-1,Vd},L5=i=>{if(Kd(i))return mu;const n=i.state;return n.wsize=0,n.whave=0,n.wnext=0,I5(i)},M5=(i,n)=>{let o;if(Kd(i))return mu;const c=i.state;return n<0?(o=0,n=-n):(o=(n>>4)+5,n<48&&(n&=15)),n&&(n<8||n>15)?mu:(c.window!==null&&c.wbits!==n&&(c.window=null),c.wrap=o,c.wbits=n,L5(i))},U5=(i,n)=>{if(!i)return mu;const o=new fL;i.state=o,o.strm=i,o.window=null,o.mode=j_;const c=M5(i,n);return c!==Vd&&(i.state=null),c},dL=i=>U5(i,hL);let mw=!0,j1,H1;const pL=i=>{if(mw){j1=new Int32Array(512),H1=new Int32Array(32);let n=0;for(;n<144;)i.lens[n++]=8;for(;n<256;)i.lens[n++]=9;for(;n<280;)i.lens[n++]=7;for(;n<288;)i.lens[n++]=8;for(Vg(B5,i.lens,0,288,j1,0,i.work,{bits:9}),n=0;n<32;)i.lens[n++]=5;Vg(C5,i.lens,0,32,H1,0,i.work,{bits:5}),mw=!1}i.lencode=j1,i.lenbits=9,i.distcode=H1,i.distbits=5},D5=(i,n,o,c)=>{let m;const y=i.state;return y.window===null&&(y.wsize=1<<y.wbits,y.wnext=0,y.whave=0,y.window=new Uint8Array(y.wsize)),c>=y.wsize?(y.window.set(n.subarray(o-y.wsize,o),0),y.wnext=0,y.whave=y.wsize):(m=y.wsize-y.wnext,m>c&&(m=c),y.window.set(n.subarray(o-c,o-c+m),y.wnext),c-=m,c?(y.window.set(n.subarray(o-c,o),0),y.wnext=c,y.whave=y.wsize):(y.wnext+=m,y.wnext===y.wsize&&(y.wnext=0),y.whave<y.wsize&&(y.whave+=m))),0},mL=(i,n)=>{let o,c,m,y,v,A,S,I,D,z,Z,O,ce,ie,W=0,le,ye,Be,Le,lt,ft,ut,Ne;const Ce=new Uint8Array(4);let _t,_e;const Te=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Kd(i)||!i.output||!i.input&&i.avail_in!==0)return mu;o=i.state,o.mode===$h&&(o.mode=k1),v=i.next_out,m=i.output,S=i.avail_out,y=i.next_in,c=i.input,A=i.avail_in,I=o.hold,D=o.bits,z=A,Z=S,Ne=Vd;e:for(;;)switch(o.mode){case j_:if(o.wrap===0){o.mode=k1;break}for(;D<16;){if(A===0)break e;A--,I+=c[y++]<<D,D+=8}if(o.wrap&2&&I===35615){o.wbits===0&&(o.wbits=15),o.check=0,Ce[0]=I&255,Ce[1]=I>>>8&255,o.check=xh(o.check,Ce,2,0),I=0,D=0,o.mode=Zb;break}if(o.head&&(o.head.done=!1),!(o.wrap&1)||(((I&255)<<8)+(I>>8))%31){i.msg="incorrect header check",o.mode=is;break}if((I&15)!==Kb){i.msg="unknown compression method",o.mode=is;break}if(I>>>=4,D-=4,ut=(I&15)+8,o.wbits===0&&(o.wbits=ut),ut>15||ut>o.wbits){i.msg="invalid window size",o.mode=is;break}o.dmax=1<<o.wbits,o.flags=0,i.adler=o.check=1,o.mode=I&512?rw:$h,I=0,D=0;break;case Zb:for(;D<16;){if(A===0)break e;A--,I+=c[y++]<<D,D+=8}if(o.flags=I,(o.flags&255)!==Kb){i.msg="unknown compression method",o.mode=is;break}if(o.flags&57344){i.msg="unknown header flags set",o.mode=is;break}o.head&&(o.head.text=I>>8&1),o.flags&512&&o.wrap&4&&(Ce[0]=I&255,Ce[1]=I>>>8&255,o.check=xh(o.check,Ce,2,0)),I=0,D=0,o.mode=Xb;case Xb:for(;D<32;){if(A===0)break e;A--,I+=c[y++]<<D,D+=8}o.head&&(o.head.time=I),o.flags&512&&o.wrap&4&&(Ce[0]=I&255,Ce[1]=I>>>8&255,Ce[2]=I>>>16&255,Ce[3]=I>>>24&255,o.check=xh(o.check,Ce,4,0)),I=0,D=0,o.mode=Wb;case Wb:for(;D<16;){if(A===0)break e;A--,I+=c[y++]<<D,D+=8}o.head&&(o.head.xflags=I&255,o.head.os=I>>8),o.flags&512&&o.wrap&4&&(Ce[0]=I&255,Ce[1]=I>>>8&255,o.check=xh(o.check,Ce,2,0)),I=0,D=0,o.mode=Yb;case Yb:if(o.flags&1024){for(;D<16;){if(A===0)break e;A--,I+=c[y++]<<D,D+=8}o.length=I,o.head&&(o.head.extra_len=I),o.flags&512&&o.wrap&4&&(Ce[0]=I&255,Ce[1]=I>>>8&255,o.check=xh(o.check,Ce,2,0)),I=0,D=0}else o.head&&(o.head.extra=null);o.mode=$b;case $b:if(o.flags&1024&&(O=o.length,O>A&&(O=A),O&&(o.head&&(ut=o.head.extra_len-o.length,o.head.extra||(o.head.extra=new Uint8Array(o.head.extra_len)),o.head.extra.set(c.subarray(y,y+O),ut)),o.flags&512&&o.wrap&4&&(o.check=xh(o.check,c,O,y)),A-=O,y+=O,o.length-=O),o.length))break e;o.length=0,o.mode=Jb;case Jb:if(o.flags&2048){if(A===0)break e;O=0;do ut=c[y+O++],o.head&&ut&&o.length<65536&&(o.head.name+=String.fromCharCode(ut));while(ut&&O<A);if(o.flags&512&&o.wrap&4&&(o.check=xh(o.check,c,O,y)),A-=O,y+=O,ut)break e}else o.head&&(o.head.name=null);o.length=0,o.mode=ew;case ew:if(o.flags&4096){if(A===0)break e;O=0;do ut=c[y+O++],o.head&&ut&&o.length<65536&&(o.head.comment+=String.fromCharCode(ut));while(ut&&O<A);if(o.flags&512&&o.wrap&4&&(o.check=xh(o.check,c,O,y)),A-=O,y+=O,ut)break e}else o.head&&(o.head.comment=null);o.mode=tw;case tw:if(o.flags&512){for(;D<16;){if(A===0)break e;A--,I+=c[y++]<<D,D+=8}if(o.wrap&4&&I!==(o.check&65535)){i.msg="header crc mismatch",o.mode=is;break}I=0,D=0}o.head&&(o.head.hcrc=o.flags>>9&1,o.head.done=!0),i.adler=o.check=0,o.mode=$h;break;case rw:for(;D<32;){if(A===0)break e;A--,I+=c[y++]<<D,D+=8}i.adler=o.check=pw(I),I=0,D=0,o.mode=C_;case C_:if(o.havedict===0)return i.next_out=v,i.avail_out=S,i.next_in=y,i.avail_in=A,o.hold=I,o.bits=D,oL;i.adler=o.check=1,o.mode=$h;case $h:if(n===aL||n===By)break e;case k1:if(o.last){I>>>=D&7,D-=D&7,o.mode=z1;break}for(;D<3;){if(A===0)break e;A--,I+=c[y++]<<D,D+=8}switch(o.last=I&1,I>>>=1,D-=1,I&3){case 0:o.mode=nw;break;case 1:if(pL(o),o.mode=Cy,n===By){I>>>=2,D-=2;break e}break;case 2:o.mode=aw;break;case 3:i.msg="invalid block type",o.mode=is}I>>>=2,D-=2;break;case nw:for(I>>>=D&7,D-=D&7;D<32;){if(A===0)break e;A--,I+=c[y++]<<D,D+=8}if((I&65535)!==(I>>>16^65535)){i.msg="invalid stored block lengths",o.mode=is;break}if(o.length=I&65535,I=0,D=0,o.mode=O1,n===By)break e;case O1:o.mode=iw;case iw:if(O=o.length,O){if(O>A&&(O=A),O>S&&(O=S),O===0)break e;m.set(c.subarray(y,y+O),v),A-=O,y+=O,S-=O,v+=O,o.length-=O;break}o.mode=$h;break;case aw:for(;D<14;){if(A===0)break e;A--,I+=c[y++]<<D,D+=8}if(o.nlen=(I&31)+257,I>>>=5,D-=5,o.ndist=(I&31)+1,I>>>=5,D-=5,o.ncode=(I&15)+4,I>>>=4,D-=4,o.nlen>286||o.ndist>30){i.msg="too many length or distance symbols",o.mode=is;break}o.have=0,o.mode=sw;case sw:for(;o.have<o.ncode;){for(;D<3;){if(A===0)break e;A--,I+=c[y++]<<D,D+=8}o.lens[Te[o.have++]]=I&7,I>>>=3,D-=3}for(;o.have<19;)o.lens[Te[o.have++]]=0;if(o.lencode=o.lendyn,o.lenbits=7,_t={bits:o.lenbits},Ne=Vg(iL,o.lens,0,19,o.lencode,0,o.work,_t),o.lenbits=_t.bits,Ne){i.msg="invalid code lengths set",o.mode=is;break}o.have=0,o.mode=ow;case ow:for(;o.have<o.nlen+o.ndist;){for(;W=o.lencode[I&(1<<o.lenbits)-1],le=W>>>24,ye=W>>>16&255,Be=W&65535,!(le<=D);){if(A===0)break e;A--,I+=c[y++]<<D,D+=8}if(Be<16)I>>>=le,D-=le,o.lens[o.have++]=Be;else{if(Be===16){for(_e=le+2;D<_e;){if(A===0)break e;A--,I+=c[y++]<<D,D+=8}if(I>>>=le,D-=le,o.have===0){i.msg="invalid bit length repeat",o.mode=is;break}ut=o.lens[o.have-1],O=3+(I&3),I>>>=2,D-=2}else if(Be===17){for(_e=le+3;D<_e;){if(A===0)break e;A--,I+=c[y++]<<D,D+=8}I>>>=le,D-=le,ut=0,O=3+(I&7),I>>>=3,D-=3}else{for(_e=le+7;D<_e;){if(A===0)break e;A--,I+=c[y++]<<D,D+=8}I>>>=le,D-=le,ut=0,O=11+(I&127),I>>>=7,D-=7}if(o.have+O>o.nlen+o.ndist){i.msg="invalid bit length repeat",o.mode=is;break}for(;O--;)o.lens[o.have++]=ut}}if(o.mode===is)break;if(o.lens[256]===0){i.msg="invalid code -- missing end-of-block",o.mode=is;break}if(o.lenbits=9,_t={bits:o.lenbits},Ne=Vg(B5,o.lens,0,o.nlen,o.lencode,0,o.work,_t),o.lenbits=_t.bits,Ne){i.msg="invalid literal/lengths set",o.mode=is;break}if(o.distbits=6,o.distcode=o.distdyn,_t={bits:o.distbits},Ne=Vg(C5,o.lens,o.nlen,o.ndist,o.distcode,0,o.work,_t),o.distbits=_t.bits,Ne){i.msg="invalid distances set",o.mode=is;break}if(o.mode=Cy,n===By)break e;case Cy:o.mode=Sy;case Sy:if(A>=6&&S>=258){i.next_out=v,i.avail_out=S,i.next_in=y,i.avail_in=A,o.hold=I,o.bits=D,$I(i,Z),v=i.next_out,m=i.output,S=i.avail_out,y=i.next_in,c=i.input,A=i.avail_in,I=o.hold,D=o.bits,o.mode===$h&&(o.back=-1);break}for(o.back=0;W=o.lencode[I&(1<<o.lenbits)-1],le=W>>>24,ye=W>>>16&255,Be=W&65535,!(le<=D);){if(A===0)break e;A--,I+=c[y++]<<D,D+=8}if(ye&&(ye&240)===0){for(Le=le,lt=ye,ft=Be;W=o.lencode[ft+((I&(1<<Le+lt)-1)>>Le)],le=W>>>24,ye=W>>>16&255,Be=W&65535,!(Le+le<=D);){if(A===0)break e;A--,I+=c[y++]<<D,D+=8}I>>>=Le,D-=Le,o.back+=Le}if(I>>>=le,D-=le,o.back+=le,o.length=Be,ye===0){o.mode=hw;break}if(ye&32){o.back=-1,o.mode=$h;break}if(ye&64){i.msg="invalid literal/length code",o.mode=is;break}o.extra=ye&15,o.mode=lw;case lw:if(o.extra){for(_e=o.extra;D<_e;){if(A===0)break e;A--,I+=c[y++]<<D,D+=8}o.length+=I&(1<<o.extra)-1,I>>>=o.extra,D-=o.extra,o.back+=o.extra}o.was=o.length,o.mode=Aw;case Aw:for(;W=o.distcode[I&(1<<o.distbits)-1],le=W>>>24,ye=W>>>16&255,Be=W&65535,!(le<=D);){if(A===0)break e;A--,I+=c[y++]<<D,D+=8}if((ye&240)===0){for(Le=le,lt=ye,ft=Be;W=o.distcode[ft+((I&(1<<Le+lt)-1)>>Le)],le=W>>>24,ye=W>>>16&255,Be=W&65535,!(Le+le<=D);){if(A===0)break e;A--,I+=c[y++]<<D,D+=8}I>>>=Le,D-=Le,o.back+=Le}if(I>>>=le,D-=le,o.back+=le,ye&64){i.msg="invalid distance code",o.mode=is;break}o.offset=Be,o.extra=ye&15,o.mode=cw;case cw:if(o.extra){for(_e=o.extra;D<_e;){if(A===0)break e;A--,I+=c[y++]<<D,D+=8}o.offset+=I&(1<<o.extra)-1,I>>>=o.extra,D-=o.extra,o.back+=o.extra}if(o.offset>o.dmax){i.msg="invalid distance too far back",o.mode=is;break}o.mode=uw;case uw:if(S===0)break e;if(O=Z-S,o.offset>O){if(O=o.offset-O,O>o.whave&&o.sane){i.msg="invalid distance too far back",o.mode=is;break}O>o.wnext?(O-=o.wnext,ce=o.wsize-O):ce=o.wnext-O,O>o.length&&(O=o.length),ie=o.window}else ie=m,ce=v-o.offset,O=o.length;O>S&&(O=S),S-=O,o.length-=O;do m[v++]=ie[ce++];while(--O);o.length===0&&(o.mode=Sy);break;case hw:if(S===0)break e;m[v++]=o.length,S--,o.mode=Sy;break;case z1:if(o.wrap){for(;D<32;){if(A===0)break e;A--,I|=c[y++]<<D,D+=8}if(Z-=S,i.total_out+=Z,o.total+=Z,o.wrap&4&&Z&&(i.adler=o.check=o.flags?xh(o.check,m,Z,v-Z):Nv(o.check,m,Z,v-Z)),Z=S,o.wrap&4&&(o.flags?I:pw(I))!==o.check){i.msg="incorrect data check",o.mode=is;break}I=0,D=0}o.mode=fw;case fw:if(o.wrap&&o.flags){for(;D<32;){if(A===0)break e;A--,I+=c[y++]<<D,D+=8}if(o.wrap&4&&I!==(o.total&4294967295)){i.msg="incorrect length check",o.mode=is;break}I=0,D=0}o.mode=dw;case dw:Ne=sL;break e;case is:Ne=S5;break e;case T5:return E5;case F5:default:return mu}return i.next_out=v,i.avail_out=S,i.next_in=y,i.avail_in=A,o.hold=I,o.bits=D,(o.wsize||Z!==i.avail_out&&o.mode<is&&(o.mode<z1||n!==qb))&&D5(i,i.output,i.next_out,Z-i.avail_out),z-=i.avail_in,Z-=i.avail_out,i.total_in+=z,i.total_out+=Z,o.total+=Z,o.wrap&4&&Z&&(i.adler=o.check=o.flags?xh(o.check,m,Z,i.next_out-Z):Nv(o.check,m,Z,i.next_out-Z)),i.data_type=o.bits+(o.last?64:0)+(o.mode===$h?128:0)+(o.mode===Cy||o.mode===O1?256:0),(z===0&&Z===0||n===qb)&&Ne===Vd&&(Ne=lL),Ne},gL=i=>{if(Kd(i))return mu;let n=i.state;return n.window&&(n.window=null),i.state=null,Vd},yL=(i,n)=>{if(Kd(i))return mu;const o=i.state;return(o.wrap&2)===0?mu:(o.head=n,n.done=!1,Vd)},_L=(i,n)=>{const o=n.length;let c,m,y;return Kd(i)||(c=i.state,c.wrap!==0&&c.mode!==C_)?mu:c.mode===C_&&(m=1,m=Nv(m,n,o,0),m!==c.check)?S5:(y=D5(i,n,o,o),y?(c.mode=T5,E5):(c.havedict=1,Vd))};var vL=L5,xL=M5,bL=I5,wL=dL,BL=U5,CL=mL,SL=gL,EL=yL,TL=_L,FL="pako inflate (from Nodeca project)",tf={inflateReset:vL,inflateReset2:xL,inflateResetKeep:bL,inflateInit:wL,inflateInit2:BL,inflate:CL,inflateEnd:SL,inflateGetHeader:EL,inflateSetDictionary:TL,inflateInfo:FL};function IL(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var LL=IL;const P5=Object.prototype.toString,{Z_NO_FLUSH:ML,Z_FINISH:UL,Z_OK:t0,Z_STREAM_END:V1,Z_NEED_DICT:G1,Z_STREAM_ERROR:DL,Z_DATA_ERROR:gw,Z_MEM_ERROR:PL}=x5;function A0(i){this.options=b5.assign({chunkSize:1024*64,windowBits:15,to:""},i||{});const n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,n.windowBits===0&&(n.windowBits=-15)),n.windowBits>=0&&n.windowBits<16&&!(i&&i.windowBits)&&(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&(n.windowBits&15)===0&&(n.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new WI,this.strm.avail_out=0;let o=tf.inflateInit2(this.strm,n.windowBits);if(o!==t0)throw new Error(Rv[o]);if(this.header=new LL,tf.inflateGetHeader(this.strm,this.header),n.dictionary&&(typeof n.dictionary=="string"?n.dictionary=Qv.string2buf(n.dictionary):P5.call(n.dictionary)==="[object ArrayBuffer]"&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(o=tf.inflateSetDictionary(this.strm,n.dictionary),o!==t0)))throw new Error(Rv[o])}A0.prototype.push=function(i,n){const o=this.strm,c=this.options.chunkSize,m=this.options.dictionary;let y,v,A;if(this.ended)return!1;for(n===~~n?v=n:v=n===!0?UL:ML,P5.call(i)==="[object ArrayBuffer]"?o.input=new Uint8Array(i):o.input=i,o.next_in=0,o.avail_in=o.input.length;;){for(o.avail_out===0&&(o.output=new Uint8Array(c),o.next_out=0,o.avail_out=c),y=tf.inflate(o,v),y===G1&&m&&(y=tf.inflateSetDictionary(o,m),y===t0?y=tf.inflate(o,v):y===gw&&(y=G1));o.avail_in>0&&y===V1&&o.state.wrap>0&&i[o.next_in]!==0;)tf.inflateReset(o),y=tf.inflate(o,v);switch(y){case DL:case gw:case G1:case PL:return this.onEnd(y),this.ended=!0,!1}if(A=o.avail_out,o.next_out&&(o.avail_out===0||y===V1))if(this.options.to==="string"){let S=Qv.utf8border(o.output,o.next_out),I=o.next_out-S,D=Qv.buf2string(o.output,S);o.next_out=I,o.avail_out=c-I,I&&o.output.set(o.output.subarray(S,S+I),0),this.onData(D)}else this.onData(o.output.length===o.next_out?o.output:o.output.subarray(0,o.next_out));if(!(y===t0&&A===0)){if(y===V1)return y=tf.inflateEnd(this.strm),this.onEnd(y),this.ended=!0,!0;if(o.avail_in===0)break}}return!0};A0.prototype.onData=function(i){this.chunks.push(i)};A0.prototype.onEnd=function(i){i===t0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=b5.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};function NL(i,n){const o=new A0(n);if(o.push(i),o.err)throw o.msg||Rv[o.err];return o.result}var RL=A0,QL=NL,kL={Inflate:RL,inflate:QL};const{Inflate:OL,inflate:zL}=kL;var yw=OL,jL=zL;const N5=[];for(let i=0;i<256;i++){let n=i;for(let o=0;o<8;o++)n&1?n=3988292384^n>>>1:n=n>>>1;N5[i]=n}const _w=4294967295;function HL(i,n,o){let c=i;for(let m=0;m<o;m++)c=N5[(c^n[m])&255]^c>>>8;return c}function VL(i,n){return(HL(_w,i,n)^_w)>>>0}function vw(i,n,o){const c=i.readUint32(),m=VL(new Uint8Array(i.buffer,i.byteOffset+i.offset-n-4,n),n);if(m!==c)throw new Error(`CRC mismatch for chunk ${o}. Expected ${c}, found ${m}`)}function R5(i,n,o){for(let c=0;c<o;c++)n[c]=i[c]}function Q5(i,n,o,c){let m=0;for(;m<c;m++)n[m]=i[m];for(;m<o;m++)n[m]=i[m]+n[m-c]&255}function k5(i,n,o,c){let m=0;if(o.length===0)for(;m<c;m++)n[m]=i[m];else for(;m<c;m++)n[m]=i[m]+o[m]&255}function O5(i,n,o,c,m){let y=0;if(o.length===0){for(;y<m;y++)n[y]=i[y];for(;y<c;y++)n[y]=i[y]+(n[y-m]>>1)&255}else{for(;y<m;y++)n[y]=i[y]+(o[y]>>1)&255;for(;y<c;y++)n[y]=i[y]+(n[y-m]+o[y]>>1)&255}}function z5(i,n,o,c,m){let y=0;if(o.length===0){for(;y<m;y++)n[y]=i[y];for(;y<c;y++)n[y]=i[y]+n[y-m]&255}else{for(;y<m;y++)n[y]=i[y]+o[y]&255;for(;y<c;y++)n[y]=i[y]+GL(n[y-m],o[y],o[y-m])&255}}function GL(i,n,o){const c=i+n-o,m=Math.abs(c-i),y=Math.abs(c-n),v=Math.abs(c-o);return m<=y&&m<=v?i:y<=v?n:o}function qL(i,n,o,c,m,y){switch(i){case 0:R5(n,o,m);break;case 1:Q5(n,o,m,y);break;case 2:k5(n,o,c,m);break;case 3:O5(n,o,c,m,y);break;case 4:z5(n,o,c,m,y);break;default:throw new Error(`Unsupported filter: ${i}`)}}const KL=new Uint16Array([255]),ZL=new Uint8Array(KL.buffer),XL=ZL[0]===255;function WL(i){const{data:n,width:o,height:c,channels:m,depth:y}=i,v=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],A=Math.ceil(y/8)*m,S=new Uint8Array(c*o*A);let I=0;for(let D=0;D<7;D++){const z=v[D],Z=Math.ceil((o-z.x)/z.xStep),O=Math.ceil((c-z.y)/z.yStep);if(Z<=0||O<=0)continue;const ce=Z*A,ie=new Uint8Array(ce);for(let W=0;W<O;W++){const le=n[I++],ye=n.subarray(I,I+ce);I+=ce;const Be=new Uint8Array(ce);qL(le,ye,Be,ie,ce,A),ie.set(Be);for(let Le=0;Le<Z;Le++){const lt=z.x+Le*z.xStep,ft=z.y+W*z.yStep;if(!(lt>=o||ft>=c))for(let ut=0;ut<A;ut++)S[(ft*o+lt)*A+ut]=Be[Le*A+ut]}}}if(y===16){const D=new Uint16Array(S.buffer);if(XL)for(let z=0;z<D.length;z++)D[z]=YL(D[z]);return D}else return S}function YL(i){return(i&255)<<8|i>>8&255}const $L=new Uint16Array([255]),JL=new Uint8Array($L.buffer),eM=JL[0]===255,tM=new Uint8Array(0);function xw(i){const{data:n,width:o,height:c,channels:m,depth:y}=i,v=Math.ceil(y/8)*m,A=Math.ceil(y/8*m*o),S=new Uint8Array(c*A);let I=tM,D=0,z,Z;for(let O=0;O<c;O++){switch(z=n.subarray(D+1,D+1+A),Z=S.subarray(O*A,(O+1)*A),n[D]){case 0:R5(z,Z,A);break;case 1:Q5(z,Z,A,v);break;case 2:k5(z,Z,I,A);break;case 3:O5(z,Z,I,A,v);break;case 4:z5(z,Z,I,A,v);break;default:throw new Error(`Unsupported filter: ${n[D]}`)}I=Z,D+=A+1}if(y===16){const O=new Uint16Array(S.buffer);if(eM)for(let ce=0;ce<O.length;ce++)O[ce]=rM(O[ce]);return O}else return S}function rM(i){return(i&255)<<8|i>>8&255}const s_=Uint8Array.of(137,80,78,71,13,10,26,10);function bw(i){if(!nM(i.readBytes(s_.length)))throw new Error("wrong PNG signature")}function nM(i){if(i.length<s_.length)return!1;for(let n=0;n<s_.length;n++)if(i[n]!==s_[n])return!1;return!0}const iM="tEXt",aM=0,j5=new TextDecoder("latin1");function sM(i){if(lM(i),i.length===0||i.length>79)throw new Error("keyword length must be between 1 and 79")}const oM=/^[\u0000-\u00FF]*$/;function lM(i){if(!oM.test(i))throw new Error("invalid latin1 text")}function AM(i,n,o){const c=H5(n);i[c]=cM(n,o-c.length-1)}function H5(i){for(i.mark();i.readByte()!==aM;);const n=i.offset;i.reset();const o=j5.decode(i.readBytes(n-i.offset-1));return i.skip(1),sM(o),o}function cM(i,n){return j5.decode(i.readBytes(n))}const Uc={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},q1={UNKNOWN:-1,DEFLATE:0},ww={UNKNOWN:-1,ADAPTIVE:0},K1={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Ey={NONE:0,BACKGROUND:1,PREVIOUS:2},Z1={SOURCE:0,OVER:1};class uM extends Mx{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(n,o={}){super(n);const{checkCrc:c=!1}=o;this._checkCrc=c,this._inflator=new yw,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=q1.UNKNOWN,this._filterMethod=ww.UNKNOWN,this._interlaceMethod=K1.UNKNOWN,this._colorType=Uc.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(bw(this);!this._end;){const n=this.readUint32(),o=this.readChars(4);this.decodeChunk(n,o)}return this.decodeImage(),this._png}decodeApng(){for(bw(this);!this._end;){const n=this.readUint32(),o=this.readChars(4);this.decodeApngChunk(n,o)}return this.decodeApngImage(),this._apng}decodeChunk(n,o){const c=this.offset;switch(o){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(n);break;case"IDAT":this.decodeIDAT(n);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(n);break;case"iCCP":this.decodeiCCP(n);break;case iM:AM(this._png.text,this,n);break;case"pHYs":this.decodepHYs();break;default:this.skip(n);break}if(this.offset-c!==n)throw new Error(`Length mismatch while decoding chunk ${o}`);this._checkCrc?vw(this,n+4,o):this.skip(4)}decodeApngChunk(n,o){const c=this.offset;switch(o!=="fdAT"&&o!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),o){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(n);break;default:this.decodeChunk(n,o),this.offset=c+n;break}if(this.offset-c!==n)throw new Error(`Length mismatch while decoding chunk ${o}`);this._checkCrc?vw(this,n+4,o):this.skip(4)}decodeIHDR(){const n=this._png;n.width=this.readUint32(),n.height=this.readUint32(),n.depth=hM(this.readUint8());const o=this.readUint8();this._colorType=o;let c;switch(o){case Uc.GREYSCALE:c=1;break;case Uc.TRUECOLOUR:c=3;break;case Uc.INDEXED_COLOUR:c=1;break;case Uc.GREYSCALE_ALPHA:c=2;break;case Uc.TRUECOLOUR_ALPHA:c=4;break;case Uc.UNKNOWN:default:throw new Error(`Unknown color type: ${o}`)}if(this._png.channels=c,this._compressionMethod=this.readUint8(),this._compressionMethod!==q1.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const n={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(n)}decodePLTE(n){if(n%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${n}`);const o=n/3;this._hasPalette=!0;const c=[];this._palette=c;for(let m=0;m<o;m++)c.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(n){this._writingDataChunks=!0;const o=n,c=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,c,o)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodeFDAT(n){this._writingDataChunks=!0;let o=n,c=this.offset+this.byteOffset;if(c+=4,o-=4,this._inflator.push(new Uint8Array(this.buffer,c,o)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodetRNS(n){switch(this._colorType){case Uc.GREYSCALE:case Uc.TRUECOLOUR:{if(n%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${n}`);if(n/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${n/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(n/2);for(let o=0;o<n/2;o++)this._transparency[o]=this.readUint16();break}case Uc.INDEXED_COLOUR:{if(n>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${n} vs ${this._palette.length})`);let o=0;for(;o<n;o++){const c=this.readByte();this._palette[o].push(c)}for(;o<this._palette.length;o++)this._palette[o].push(255);break}case Uc.UNKNOWN:case Uc.GREYSCALE_ALPHA:case Uc.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(n){const o=H5(this),c=this.readUint8();if(c!==q1.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${c}`);const m=this.readBytes(n-o.length-2);this._png.iccEmbeddedProfile={name:o,profile:jL(m)}}decodepHYs(){const n=this.readUint32(),o=this.readUint32(),c=this.readByte();this._png.resolution={x:n,y:o,unit:c}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let n=0;n<this._numberOfFrames;n++){const o={sequenceNumber:this._frames[n].sequenceNumber,delayNumber:this._frames[n].delayNumber,delayDenominator:this._frames[n].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},c=this._frames.at(n);if(c){if(c.data=xw({data:c.data,width:c.width,height:c.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),n===0||c.xOffset===0&&c.yOffset===0&&c.width===this._png.width&&c.height===this._png.height)o.data=c.data;else{const m=this._apng.frames.at(n-1);this.disposeFrame(c,m,o),this.addFrameDataToCanvas(o,c)}this._apng.frames.push(o)}}return this._apng}disposeFrame(n,o,c){switch(n.disposeOp){case Ey.NONE:break;case Ey.BACKGROUND:for(let m=0;m<this._png.height;m++)for(let y=0;y<this._png.width;y++){const v=(m*n.width+y)*this._png.channels;for(let A=0;A<this._png.channels;A++)c.data[v+A]=0}break;case Ey.PREVIOUS:c.data.set(o.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(n,o){const c=1<<this._png.depth,m=(y,v)=>{const A=((y+o.yOffset)*this._png.width+o.xOffset+v)*this._png.channels,S=(y*o.width+v)*this._png.channels;return{index:A,frameIndex:S}};switch(o.blendOp){case Z1.SOURCE:for(let y=0;y<o.height;y++)for(let v=0;v<o.width;v++){const{index:A,frameIndex:S}=m(y,v);for(let I=0;I<this._png.channels;I++)n.data[A+I]=o.data[S+I]}break;case Z1.OVER:for(let y=0;y<o.height;y++)for(let v=0;v<o.width;v++){const{index:A,frameIndex:S}=m(y,v);for(let I=0;I<this._png.channels;I++){const D=o.data[S+this._png.channels-1]/c,z=I%(this._png.channels-1)===0?1:o.data[S+I],Z=Math.floor(D*z+(1-D)*n.data[A+I]);n.data[A+I]+=Z}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const n=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==ww.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===K1.NO_INTERLACE)this._png.data=xw({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===K1.ADAM7)this._png.data=WL({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const n=this._inflator.result,o=this._frames.at(-1);o?o.data=n:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Ey.NONE,blendOp:Z1.SOURCE,data:n}),this._inflator=new yw,this._writingDataChunks=!1}}function hM(i){if(i!==1&&i!==2&&i!==4&&i!==8&&i!==16)throw new Error(`invalid bit depth: ${i}`);return i}var Bw;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.METRE=1]="METRE"})(Bw||(Bw={}));function fM(i,n){return new uM(i,n).decode()}var Pn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function X1(){Pn.console&&typeof Pn.console.log=="function"&&Pn.console.log.apply(Pn.console,arguments)}var Fa={log:X1,warn:function(i){Pn.console&&(typeof Pn.console.warn=="function"?Pn.console.warn.apply(Pn.console,arguments):X1.call(null,arguments))},error:function(i){Pn.console&&(typeof Pn.console.error=="function"?Pn.console.error.apply(Pn.console,arguments):X1(i))}};function W1(i,n,o){var c=new XMLHttpRequest;c.open("GET",i),c.responseType="blob",c.onload=function(){Dd(c.response,n,o)},c.onerror=function(){Fa.error("could not download file")},c.send()}function Cw(i){var n=new XMLHttpRequest;n.open("HEAD",i,!1);try{n.send()}catch{}return n.status>=200&&n.status<=299}function Ty(i){try{i.dispatchEvent(new MouseEvent("click"))}catch{var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),i.dispatchEvent(n)}}var Dd=Pn.saveAs||((typeof window>"u"?"undefined":oa(window))!=="object"||window!==Pn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(i,n,o){var c=Pn.URL||Pn.webkitURL,m=document.createElement("a");n=n||i.name||"download",m.download=n,m.rel="noopener",typeof i=="string"?(m.href=i,m.origin!==location.origin?Cw(m.href)?W1(i,n,o):Ty(m,m.target="_blank"):Ty(m)):(m.href=c.createObjectURL(i),setTimeout(function(){c.revokeObjectURL(m.href)},4e4),setTimeout(function(){Ty(m)},0))}:"msSaveOrOpenBlob"in navigator?function(i,n,o){if(n=n||i.name||"download",typeof i=="string")if(Cw(i))W1(i,n,o);else{var c=document.createElement("a");c.href=i,c.target="_blank",setTimeout(function(){Ty(c)})}else navigator.msSaveOrOpenBlob((function(m,y){return y===void 0?y={autoBom:!1}:oa(y)!=="object"&&(Fa.warn("Deprecated: Expected third argument to be a object"),y={autoBom:!y}),y.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(m.type)?new Blob(["\uFEFF",m],{type:m.type}):m})(i,o),n)}:function(i,n,o,c){if((c=c||open("","_blank"))&&(c.document.title=c.document.body.innerText="downloading..."),typeof i=="string")return W1(i,n,o);var m=i.type==="application/octet-stream",y=/constructor/i.test(Pn.HTMLElement)||Pn.safari,v=/CriOS\/[\d]+/.test(navigator.userAgent);if((v||m&&y)&&(typeof FileReader>"u"?"undefined":oa(FileReader))==="object"){var A=new FileReader;A.onloadend=function(){var D=A.result;D=v?D:D.replace(/^data:[^;]*;/,"data:attachment/file;"),c?c.location.href=D:location=D,c=null},A.readAsDataURL(i)}else{var S=Pn.URL||Pn.webkitURL,I=S.createObjectURL(i);c?c.location=I:location.href=I,c=null,setTimeout(function(){S.revokeObjectURL(I)},4e4)}});function V5(i){var n;i=i||"",this.ok=!1,i.charAt(0)=="#"&&(i=i.substr(1,6)),i={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[i=(i=i.replace(/ /g,"")).toLowerCase()]||i;for(var o=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(A){return[parseInt(A[1]),parseInt(A[2]),parseInt(A[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(A){return[parseInt(A[1],16),parseInt(A[2],16),parseInt(A[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(A){return[parseInt(A[1]+A[1],16),parseInt(A[2]+A[2],16),parseInt(A[3]+A[3],16)]}}],c=0;c<o.length;c++){var m=o[c].re,y=o[c].process,v=m.exec(i);v&&(n=y(v),this.r=n[0],this.g=n[1],this.b=n[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var A=this.r.toString(16),S=this.g.toString(16),I=this.b.toString(16);return A.length==1&&(A="0"+A),S.length==1&&(S="0"+S),I.length==1&&(I="0"+I),"#"+A+S+I}}var o_=Pn.atob.bind(Pn),Sw=Pn.btoa.bind(Pn);function Y1(i,n){var o=i[0],c=i[1],m=i[2],y=i[3];o=pA(o,c,m,y,n[0],7,-680876936),y=pA(y,o,c,m,n[1],12,-389564586),m=pA(m,y,o,c,n[2],17,606105819),c=pA(c,m,y,o,n[3],22,-1044525330),o=pA(o,c,m,y,n[4],7,-176418897),y=pA(y,o,c,m,n[5],12,1200080426),m=pA(m,y,o,c,n[6],17,-1473231341),c=pA(c,m,y,o,n[7],22,-45705983),o=pA(o,c,m,y,n[8],7,1770035416),y=pA(y,o,c,m,n[9],12,-1958414417),m=pA(m,y,o,c,n[10],17,-42063),c=pA(c,m,y,o,n[11],22,-1990404162),o=pA(o,c,m,y,n[12],7,1804603682),y=pA(y,o,c,m,n[13],12,-40341101),m=pA(m,y,o,c,n[14],17,-1502002290),o=mA(o,c=pA(c,m,y,o,n[15],22,1236535329),m,y,n[1],5,-165796510),y=mA(y,o,c,m,n[6],9,-1069501632),m=mA(m,y,o,c,n[11],14,643717713),c=mA(c,m,y,o,n[0],20,-373897302),o=mA(o,c,m,y,n[5],5,-701558691),y=mA(y,o,c,m,n[10],9,38016083),m=mA(m,y,o,c,n[15],14,-660478335),c=mA(c,m,y,o,n[4],20,-405537848),o=mA(o,c,m,y,n[9],5,568446438),y=mA(y,o,c,m,n[14],9,-1019803690),m=mA(m,y,o,c,n[3],14,-187363961),c=mA(c,m,y,o,n[8],20,1163531501),o=mA(o,c,m,y,n[13],5,-1444681467),y=mA(y,o,c,m,n[2],9,-51403784),m=mA(m,y,o,c,n[7],14,1735328473),o=gA(o,c=mA(c,m,y,o,n[12],20,-1926607734),m,y,n[5],4,-378558),y=gA(y,o,c,m,n[8],11,-2022574463),m=gA(m,y,o,c,n[11],16,1839030562),c=gA(c,m,y,o,n[14],23,-35309556),o=gA(o,c,m,y,n[1],4,-1530992060),y=gA(y,o,c,m,n[4],11,1272893353),m=gA(m,y,o,c,n[7],16,-155497632),c=gA(c,m,y,o,n[10],23,-1094730640),o=gA(o,c,m,y,n[13],4,681279174),y=gA(y,o,c,m,n[0],11,-358537222),m=gA(m,y,o,c,n[3],16,-722521979),c=gA(c,m,y,o,n[6],23,76029189),o=gA(o,c,m,y,n[9],4,-640364487),y=gA(y,o,c,m,n[12],11,-421815835),m=gA(m,y,o,c,n[15],16,530742520),o=yA(o,c=gA(c,m,y,o,n[2],23,-995338651),m,y,n[0],6,-198630844),y=yA(y,o,c,m,n[7],10,1126891415),m=yA(m,y,o,c,n[14],15,-1416354905),c=yA(c,m,y,o,n[5],21,-57434055),o=yA(o,c,m,y,n[12],6,1700485571),y=yA(y,o,c,m,n[3],10,-1894986606),m=yA(m,y,o,c,n[10],15,-1051523),c=yA(c,m,y,o,n[1],21,-2054922799),o=yA(o,c,m,y,n[8],6,1873313359),y=yA(y,o,c,m,n[15],10,-30611744),m=yA(m,y,o,c,n[6],15,-1560198380),c=yA(c,m,y,o,n[13],21,1309151649),o=yA(o,c,m,y,n[4],6,-145523070),y=yA(y,o,c,m,n[11],10,-1120210379),m=yA(m,y,o,c,n[2],15,718787259),c=yA(c,m,y,o,n[9],21,-343485551),i[0]=Xf(o,i[0]),i[1]=Xf(c,i[1]),i[2]=Xf(m,i[2]),i[3]=Xf(y,i[3])}function H_(i,n,o,c,m,y){return n=Xf(Xf(n,i),Xf(c,y)),Xf(n<<m|n>>>32-m,o)}function pA(i,n,o,c,m,y,v){return H_(n&o|~n&c,i,n,m,y,v)}function mA(i,n,o,c,m,y,v){return H_(n&c|o&~c,i,n,m,y,v)}function gA(i,n,o,c,m,y,v){return H_(n^o^c,i,n,m,y,v)}function yA(i,n,o,c,m,y,v){return H_(o^(n|~c),i,n,m,y,v)}function G5(i){var n,o=i.length,c=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=i.length;n+=64)Y1(c,dM(i.substring(n-64,n)));i=i.substring(n-64);var m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<i.length;n++)m[n>>2]|=i.charCodeAt(n)<<(n%4<<3);if(m[n>>2]|=128<<(n%4<<3),n>55)for(Y1(c,m),n=0;n<16;n++)m[n]=0;return m[14]=8*o,Y1(c,m),c}function dM(i){var n,o=[];for(n=0;n<64;n+=4)o[n>>2]=i.charCodeAt(n)+(i.charCodeAt(n+1)<<8)+(i.charCodeAt(n+2)<<16)+(i.charCodeAt(n+3)<<24);return o}var Ew="0123456789abcdef".split("");function pM(i){for(var n="",o=0;o<4;o++)n+=Ew[i>>8*o+4&15]+Ew[i>>8*o&15];return n}function mM(i){return String.fromCharCode(255&i,(65280&i)>>8,(16711680&i)>>16,(4278190080&i)>>24)}function kv(i){return G5(i).map(mM).join("")}var gM=(function(i){for(var n=0;n<i.length;n++)i[n]=pM(i[n]);return i.join("")})(G5("hello"))!="5d41402abc4b2a76b9719d911017c592";function Xf(i,n){if(gM){var o=(65535&i)+(65535&n);return(i>>16)+(n>>16)+(o>>16)<<16|65535&o}return i+n&4294967295}function Ov(i,n){var o,c,m,y;if(i!==o){for(var v=(m=i,y=1+(256/i.length|0),new Array(y+1).join(m)),A=[],S=0;S<256;S++)A[S]=S;var I=0;for(S=0;S<256;S++){var D=A[S];I=(I+D+v.charCodeAt(S))%256,A[S]=A[I],A[I]=D}o=i,c=A}else A=c;var z=n.length,Z=0,O=0,ce="";for(S=0;S<z;S++)O=(O+(D=A[Z=(Z+1)%256]))%256,A[Z]=A[O],A[O]=D,v=A[(A[Z]+A[O])%256],ce+=String.fromCharCode(n.charCodeAt(S)^v);return ce}var Tw={print:4,modify:8,copy:16,"annot-forms":32};function nm(i,n,o,c){this.v=1,this.r=2;var m=192;i.forEach(function(A){if(Tw.perm!==void 0)throw new Error("Invalid permission: "+A);m+=Tw[A]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var y=(n+this.padding).substr(0,32),v=(o+this.padding).substr(0,32);this.O=this.processOwnerPassword(y,v),this.P=-(1+(255^m)),this.encryptionKey=kv(y+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(c)).substr(0,5),this.U=Ov(this.encryptionKey,this.padding)}function im(i){if(/[^\u0000-\u00ff]/.test(i))throw new Error("Invalid PDF Name Object: "+i+", Only accept ASCII characters.");for(var n="",o=i.length,c=0;c<o;c++){var m=i.charCodeAt(c);n+=m<33||m===35||m===37||m===40||m===41||m===47||m===60||m===62||m===91||m===93||m===123||m===125||m>126?"#"+("0"+m.toString(16)).slice(-2):i[c]}return n}function Fw(i){if(oa(i)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var n={};this.subscribe=function(o,c,m){if(m=m||!1,typeof o!="string"||typeof c!="function"||typeof m!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");n.hasOwnProperty(o)||(n[o]={});var y=Math.random().toString(35);return n[o][y]=[c,!!m],y},this.unsubscribe=function(o){for(var c in n)if(n[c][o])return delete n[c][o],Object.keys(n[c]).length===0&&delete n[c],!0;return!1},this.publish=function(o){if(n.hasOwnProperty(o)){var c=Array.prototype.slice.call(arguments,1),m=[];for(var y in n[o]){var v=n[o][y];try{v[0].apply(i,c)}catch(A){Pn.console&&Fa.error("jsPDF PubSub Error",A.message,A)}v[1]&&m.push(y)}m.length&&m.forEach(this.unsubscribe)}},this.getTopics=function(){return n}}function S_(i){if(!(this instanceof S_))return new S_(i);var n="opacity,stroke-opacity".split(",");for(var o in i)i.hasOwnProperty(o)&&n.indexOf(o)>=0&&(this[o]=i[o]);this.id="",this.objectNumber=-1}function q5(i,n){this.gState=i,this.matrix=n,this.id="",this.objectNumber=-1}function Pd(i,n,o,c,m){if(!(this instanceof Pd))return new Pd(i,n,o,c,m);this.type=i==="axial"?2:3,this.coords=n,this.colors=o,q5.call(this,c,m)}function Am(i,n,o,c,m){if(!(this instanceof Am))return new Am(i,n,o,c,m);this.boundingBox=i,this.xStep=n,this.yStep=o,this.stream="",this.cloneIndex=0,q5.call(this,c,m)}function hn(i){var n,o=typeof arguments[0]=="string"?arguments[0]:"p",c=arguments[1],m=arguments[2],y=arguments[3],v=[],A=1,S=16,I="S",D=null;oa(i=i||{})==="object"&&(o=i.orientation,c=i.unit||c,m=i.format||m,y=i.compress||i.compressPdf||y,(D=i.encryption||null)!==null&&(D.userPassword=D.userPassword||"",D.ownerPassword=D.ownerPassword||"",D.userPermissions=D.userPermissions||[]),A=typeof i.userUnit=="number"?Math.abs(i.userUnit):1,i.precision!==void 0&&(n=i.precision),i.floatPrecision!==void 0&&(S=i.floatPrecision),I=i.defaultPathOperation||"S"),v=i.filters||(y===!0?["FlateEncode"]:v),c=c||"mm",o=(""+(o||"P")).toLowerCase();var z=i.putOnlyUsedFonts||!1,Z={},O={internal:{},__private__:{}};O.__private__.PubSub=Fw;var ce="1.3",ie=O.__private__.getPdfVersion=function(){return ce};O.__private__.setPdfVersion=function(V){ce=V};var W={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};O.__private__.getPageFormats=function(){return W};var le=O.__private__.getPageFormat=function(V){return W[V]};m=m||"a4";var ye="compat",Be="advanced",Le=ye;function lt(){this.saveGraphicsState(),Re(new dr(gn,0,0,-gn,0,Da()*gn).toString()+" cm"),this.setFontSize(this.getFontSize()/gn),I="n",Le=Be}function ft(){this.restoreGraphicsState(),I="S",Le=ye}var ut=O.__private__.combineFontStyleAndFontWeight=function(V,he){if(V=="bold"&&he=="normal"||V=="bold"&&he==400||V=="normal"&&he=="italic"||V=="bold"&&he=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return he&&(V=he==400||he==="normal"?V==="italic"?"italic":"normal":he!=700&&he!=="bold"||V!=="normal"?(he==700?"bold":he)+""+V:"bold"),V};O.advancedAPI=function(V){var he=Le===ye;return he&&lt.call(this),typeof V!="function"||(V(this),he&&ft.call(this)),this},O.compatAPI=function(V){var he=Le===Be;return he&&ft.call(this),typeof V!="function"||(V(this),he&&lt.call(this)),this},O.isAdvancedAPI=function(){return Le===Be};var Ne,Ce=function(V){if(Le!==Be)throw new Error(V+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},_t=O.roundToPrecision=O.__private__.roundToPrecision=function(V,he){var qe=n||he;if(isNaN(V)||isNaN(qe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return V.toFixed(qe).replace(/0+$/,"")};Ne=O.hpf=O.__private__.hpf=typeof S=="number"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return _t(V,S)}:S==="smart"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return _t(V,V>-1&&V<1?16:5)}:function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return _t(V,16)};var _e=O.f2=O.__private__.f2=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f2");return _t(V,2)},Te=O.__private__.f3=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f3");return _t(V,3)},Ye=O.scale=O.__private__.scale=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.scale");return Le===ye?V*gn:Le===Be?V:void 0},Ve=function(V){return Ye((function(he){return Le===ye?Da()-he:Le===Be?he:void 0})(V))};O.__private__.setPrecision=O.setPrecision=function(V){typeof parseInt(V,10)=="number"&&(n=parseInt(V,10))};var wt,ke="00000000000000000000000000000000",ot=O.__private__.getFileId=function(){return ke},st=O.__private__.setFileId=function(V){return ke=V!==void 0&&/^[a-fA-F0-9]{32}$/.test(V)?V.toUpperCase():ke.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),D!==null&&(Ia=new nm(D.userPermissions,D.userPassword,D.ownerPassword,ke)),ke};O.setFileId=function(V){return st(V),this},O.getFileId=function(){return ot()};var xt=O.__private__.convertDateToPDFDate=function(V){var he=V.getTimezoneOffset(),qe=he<0?"+":"-",pt=Math.floor(Math.abs(he/60)),St=Math.abs(he%60),Kt=[qe,Ue(pt),"'",Ue(St),"'"].join("");return["D:",V.getFullYear(),Ue(V.getMonth()+1),Ue(V.getDate()),Ue(V.getHours()),Ue(V.getMinutes()),Ue(V.getSeconds()),Kt].join("")},Ct=O.__private__.convertPDFDateToDate=function(V){var he=parseInt(V.substr(2,4),10),qe=parseInt(V.substr(6,2),10)-1,pt=parseInt(V.substr(8,2),10),St=parseInt(V.substr(10,2),10),Kt=parseInt(V.substr(12,2),10),or=parseInt(V.substr(14,2),10);return new Date(he,qe,pt,St,Kt,or,0)},Fe=O.__private__.setCreationDate=function(V){var he;if(V===void 0&&(V=new Date),V instanceof Date)he=xt(V);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(V))throw new Error("Invalid argument passed to jsPDF.setCreationDate");he=V}return wt=he},oe=O.__private__.getCreationDate=function(V){var he=wt;return V==="jsDate"&&(he=Ct(wt)),he};O.setCreationDate=function(V){return Fe(V),this},O.getCreationDate=function(V){return oe(V)};var xe,Ue=O.__private__.padd2=function(V){return("0"+parseInt(V)).slice(-2)},Ge=O.__private__.padd2Hex=function(V){return("00"+(V=V.toString())).substr(V.length)},tt=0,mt=[],Pt=[],Et=0,$t=[],Ar=[],pr=!1,br=Pt;O.__private__.setCustomOutputDestination=function(V){pr=!0,br=V};var xr=function(V){pr||(br=V)};O.__private__.resetCustomOutputDestination=function(){pr=!1,br=Pt};var Re=O.__private__.out=function(V){return V=V.toString(),Et+=V.length+1,br.push(V),br},_r=O.__private__.write=function(V){return Re(arguments.length===1?V.toString():Array.prototype.join.call(arguments," "))},Qr=O.__private__.getArrayBuffer=function(V){for(var he=V.length,qe=new ArrayBuffer(he),pt=new Uint8Array(qe);he--;)pt[he]=V.charCodeAt(he);return qe},Wr=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];O.__private__.getStandardFonts=function(){return Wr};var lr=i.fontSize||16;O.__private__.setFontSize=O.setFontSize=function(V){return lr=Le===Be?V/gn:V,this};var Zr,Sr=O.__private__.getFontSize=O.getFontSize=function(){return Le===ye?lr:lr*gn},Vr=i.R2L||!1;O.__private__.setR2L=O.setR2L=function(V){return Vr=V,this},O.__private__.getR2L=O.getR2L=function(){return Vr};var Gr,mn=O.__private__.setZoomMode=function(V){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(V))Zr=V;else if(isNaN(V)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(V)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+V+'" is not recognized.');Zr=V}else Zr=parseInt(V,10)};O.__private__.getZoomMode=function(){return Zr};var Cn,An=O.__private__.setPageMode=function(V){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(V)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+V+'" is not recognized.');Gr=V};O.__private__.getPageMode=function(){return Gr};var Fn=O.__private__.setLayoutMode=function(V){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(V)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+V+'" is not recognized.');Cn=V};O.__private__.getLayoutMode=function(){return Cn},O.__private__.setDisplayMode=O.setDisplayMode=function(V,he,qe){return mn(V),Fn(he),An(qe),this};var Sn={title:"",subject:"",author:"",keywords:"",creator:""};O.__private__.getDocumentProperty=function(V){if(Object.keys(Sn).indexOf(V)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Sn[V]},O.__private__.getDocumentProperties=function(){return Sn},O.__private__.setDocumentProperties=O.setProperties=O.setDocumentProperties=function(V){for(var he in Sn)Sn.hasOwnProperty(he)&&V[he]&&(Sn[he]=V[he]);return this},O.__private__.setDocumentProperty=function(V,he){if(Object.keys(Sn).indexOf(V)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Sn[V]=he};var Or,gn,Je,ee,ne,Ae={},De={},Xe=[],At={},bt={},it={},dt={},jt=null,Bt=0,Qe=[],ur=new Fw(O),Xr=i.hotfixes||[],Er={},zr={},Pr=[],dr=function V(he,qe,pt,St,Kt,or){if(!(this instanceof V))return new V(he,qe,pt,St,Kt,or);isNaN(he)&&(he=1),isNaN(qe)&&(qe=0),isNaN(pt)&&(pt=0),isNaN(St)&&(St=1),isNaN(Kt)&&(Kt=0),isNaN(or)&&(or=0),this._matrix=[he,qe,pt,St,Kt,or]};Object.defineProperty(dr.prototype,"sx",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(dr.prototype,"shy",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(dr.prototype,"shx",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(dr.prototype,"sy",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(dr.prototype,"tx",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(dr.prototype,"ty",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(dr.prototype,"a",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(dr.prototype,"b",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(dr.prototype,"c",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(dr.prototype,"d",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(dr.prototype,"e",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(dr.prototype,"f",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(dr.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(dr.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(dr.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(dr.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),dr.prototype.join=function(V){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Ne).join(V)},dr.prototype.multiply=function(V){var he=V.sx*this.sx+V.shy*this.shx,qe=V.sx*this.shy+V.shy*this.sy,pt=V.shx*this.sx+V.sy*this.shx,St=V.shx*this.shy+V.sy*this.sy,Kt=V.tx*this.sx+V.ty*this.shx+this.tx,or=V.tx*this.shy+V.ty*this.sy+this.ty;return new dr(he,qe,pt,St,Kt,or)},dr.prototype.decompose=function(){var V=this.sx,he=this.shy,qe=this.shx,pt=this.sy,St=this.tx,Kt=this.ty,or=Math.sqrt(V*V+he*he),wr=(V/=or)*qe+(he/=or)*pt;qe-=V*wr,pt-=he*wr;var Br=Math.sqrt(qe*qe+pt*pt);return wr/=Br,V*(pt/=Br)<he*(qe/=Br)&&(V=-V,he=-he,wr=-wr,or=-or),{scale:new dr(or,0,0,Br,0,0),translate:new dr(1,0,0,1,St,Kt),rotate:new dr(V,he,-he,V,0,0),skew:new dr(1,0,wr,1,0,0)}},dr.prototype.toString=function(V){return this.join(" ")},dr.prototype.inversed=function(){var V=this.sx,he=this.shy,qe=this.shx,pt=this.sy,St=this.tx,Kt=this.ty,or=1/(V*pt-he*qe),wr=pt*or,Br=-he*or,un=-qe*or,Tn=V*or;return new dr(wr,Br,un,Tn,-wr*St-un*Kt,-Br*St-Tn*Kt)},dr.prototype.applyToPoint=function(V){var he=V.x*this.sx+V.y*this.shx+this.tx,qe=V.x*this.shy+V.y*this.sy+this.ty;return new Io(he,qe)},dr.prototype.applyToRectangle=function(V){var he=this.applyToPoint(V),qe=this.applyToPoint(new Io(V.x+V.w,V.y+V.h));return new xl(he.x,he.y,qe.x-he.x,qe.y-he.y)},dr.prototype.clone=function(){var V=this.sx,he=this.shy,qe=this.shx,pt=this.sy,St=this.tx,Kt=this.ty;return new dr(V,he,qe,pt,St,Kt)},O.Matrix=dr;var mi=O.matrixMult=function(V,he){return he.multiply(V)},Kn=new dr(1,0,0,1,0,0);O.unitMatrix=O.identityMatrix=Kn;var Jn=function(V,he){if(!bt[V]){var qe=(he instanceof Pd?"Sh":"P")+(Object.keys(At).length+1).toString(10);he.id=qe,bt[V]=qe,At[qe]=he,ur.publish("addPattern",he)}};O.ShadingPattern=Pd,O.TilingPattern=Am,O.addShadingPattern=function(V,he){return Ce("addShadingPattern()"),Jn(V,he),this},O.beginTilingPattern=function(V){Ce("beginTilingPattern()"),Lo(V.boundingBox[0],V.boundingBox[1],V.boundingBox[2]-V.boundingBox[0],V.boundingBox[3]-V.boundingBox[1],V.matrix)},O.endTilingPattern=function(V,he){Ce("endTilingPattern()"),he.stream=Ar[xe].join(`
`),Jn(V,he),ur.publish("endTilingPattern",he),Pr.pop().restore()};var wi,xn=O.__private__.newObject=function(){var V=Wt();return fn(V,!0),V},Wt=O.__private__.newObjectDeferred=function(){return tt++,mt[tt]=function(){return Et},tt},fn=function(V,he){return he=typeof he=="boolean"&&he,mt[V]=Et,he&&Re(V+" 0 obj"),V},li=O.__private__.newAdditionalObject=function(){var V={objId:Wt(),content:""};return $t.push(V),V},xa=Wt(),Wn=Wt(),Jt=O.__private__.decodeColorString=function(V){var he=V.split(" ");if(he.length!==2||he[1]!=="g"&&he[1]!=="G")he.length!==5||he[4]!=="k"&&he[4]!=="K"||(he=[(1-he[0])*(1-he[3]),(1-he[1])*(1-he[3]),(1-he[2])*(1-he[3]),"r"]);else{var qe=parseFloat(he[0]);he=[qe,qe,qe,"r"]}for(var pt="#",St=0;St<3;St++)pt+=("0"+Math.floor(255*parseFloat(he[St])).toString(16)).slice(-2);return pt},kr=O.__private__.encodeColorString=function(V){var he;typeof V=="string"&&(V={ch1:V});var qe=V.ch1,pt=V.ch2,St=V.ch3,Kt=V.ch4,or=V.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof qe=="string"&&qe.charAt(0)!=="#"){var wr=new V5(qe);if(wr.ok)qe=wr.toHex();else if(!/^\d*\.?\d*$/.test(qe))throw new Error('Invalid color "'+qe+'" passed to jsPDF.encodeColorString.')}if(typeof qe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(qe)&&(qe="#"+qe[1]+qe[1]+qe[2]+qe[2]+qe[3]+qe[3]),typeof qe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(qe)){var Br=parseInt(qe.substr(1),16);qe=Br>>16&255,pt=Br>>8&255,St=255&Br}if(pt===void 0||Kt===void 0&&qe===pt&&pt===St)he=typeof qe=="string"?qe+" "+or[0]:V.precision===2?_e(qe/255)+" "+or[0]:Te(qe/255)+" "+or[0];else if(Kt===void 0||oa(Kt)==="object"){if(Kt&&!isNaN(Kt.a)&&Kt.a===0)return["1.","1.","1.",or[1]].join(" ");he=typeof qe=="string"?[qe,pt,St,or[1]].join(" "):V.precision===2?[_e(qe/255),_e(pt/255),_e(St/255),or[1]].join(" "):[Te(qe/255),Te(pt/255),Te(St/255),or[1]].join(" ")}else he=typeof qe=="string"?[qe,pt,St,Kt,or[2]].join(" "):V.precision===2?[_e(qe),_e(pt),_e(St),_e(Kt),or[2]].join(" "):[Te(qe),Te(pt),Te(St),Te(Kt),or[2]].join(" ");return he},qr=O.__private__.getFilters=function(){return v},Ji=O.__private__.putStream=function(V){var he=(V=V||{}).data||"",qe=V.filters||qr(),pt=V.alreadyAppliedFilters||[],St=V.addLength1||!1,Kt=he.length,or=V.objectId,wr=function(Pa){return Pa};if(D!==null&&or===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");D!==null&&(wr=Ia.encryptor(or,0));var Br={};qe===!0&&(qe=["FlateEncode"]);var un=V.additionalKeyValues||[],Tn=(Br=hn.API.processDataByFilters!==void 0?hn.API.processDataByFilters(he,qe):{data:he,reverseChain:[]}).reverseChain+(Array.isArray(pt)?pt.join(" "):pt.toString());if(Br.data.length!==0&&(un.push({key:"Length",value:Br.data.length}),St===!0&&un.push({key:"Length1",value:Kt})),Tn.length!=0)if(Tn.split("/").length-1==1)un.push({key:"Filter",value:Tn});else{un.push({key:"Filter",value:"["+Tn+"]"});for(var Mn=0;Mn<un.length;Mn+=1)if(un[Mn].key==="DecodeParms"){for(var Nn=[],ua=0;ua<Br.reverseChain.split("/").length-1;ua+=1)Nn.push("null");Nn.push(un[Mn].value),un[Mn].value="["+Nn.join(" ")+"]"}}Re("<<");for(var Ci=0;Ci<un.length;Ci++)Re("/"+un[Ci].key+" "+un[Ci].value);Re(">>"),Br.data.length!==0&&(Re("stream"),Re(wr(Br.data)),Re("endstream"))},Ko=O.__private__.putPage=function(V){var he=V.number,qe=V.data,pt=V.objId,St=V.contentsObjId;fn(pt,!0),Re("<</Type /Page"),Re("/Parent "+V.rootDictionaryObjId+" 0 R"),Re("/Resources "+V.resourceDictionaryObjId+" 0 R"),Re("/MediaBox ["+parseFloat(Ne(V.mediaBox.bottomLeftX))+" "+parseFloat(Ne(V.mediaBox.bottomLeftY))+" "+Ne(V.mediaBox.topRightX)+" "+Ne(V.mediaBox.topRightY)+"]"),V.cropBox!==null&&Re("/CropBox ["+Ne(V.cropBox.bottomLeftX)+" "+Ne(V.cropBox.bottomLeftY)+" "+Ne(V.cropBox.topRightX)+" "+Ne(V.cropBox.topRightY)+"]"),V.bleedBox!==null&&Re("/BleedBox ["+Ne(V.bleedBox.bottomLeftX)+" "+Ne(V.bleedBox.bottomLeftY)+" "+Ne(V.bleedBox.topRightX)+" "+Ne(V.bleedBox.topRightY)+"]"),V.trimBox!==null&&Re("/TrimBox ["+Ne(V.trimBox.bottomLeftX)+" "+Ne(V.trimBox.bottomLeftY)+" "+Ne(V.trimBox.topRightX)+" "+Ne(V.trimBox.topRightY)+"]"),V.artBox!==null&&Re("/ArtBox ["+Ne(V.artBox.bottomLeftX)+" "+Ne(V.artBox.bottomLeftY)+" "+Ne(V.artBox.topRightX)+" "+Ne(V.artBox.topRightY)+"]"),typeof V.userUnit=="number"&&V.userUnit!==1&&Re("/UserUnit "+V.userUnit),ur.publish("putPage",{objId:pt,pageContext:Qe[he],pageNumber:he,page:qe}),Re("/Contents "+St+" 0 R"),Re(">>"),Re("endobj");var Kt=qe.join(`
`);return Le===Be&&(Kt+=`
Q`),fn(St,!0),Ji({data:Kt,filters:qr(),objectId:St}),Re("endobj"),pt},os=O.__private__.putPages=function(){var V,he,qe=[];for(V=1;V<=Bt;V++)Qe[V].objId=Wt(),Qe[V].contentsObjId=Wt();for(V=1;V<=Bt;V++)qe.push(Ko({number:V,data:Ar[V],objId:Qe[V].objId,contentsObjId:Qe[V].contentsObjId,mediaBox:Qe[V].mediaBox,cropBox:Qe[V].cropBox,bleedBox:Qe[V].bleedBox,trimBox:Qe[V].trimBox,artBox:Qe[V].artBox,userUnit:Qe[V].userUnit,rootDictionaryObjId:xa,resourceDictionaryObjId:Wn}));fn(xa,!0),Re("<</Type /Pages");var pt="/Kids [";for(he=0;he<Bt;he++)pt+=qe[he]+" 0 R ";Re(pt+"]"),Re("/Count "+Bt),Re(">>"),Re("endobj"),ur.publish("postPutPages")},an=function(V){ur.publish("putFont",{font:V,out:Re,newObject:xn,putStream:Ji}),V.isAlreadyPutted!==!0&&(V.objectNumber=xn(),Re("<<"),Re("/Type /Font"),Re("/BaseFont /"+im(V.postScriptName)),Re("/Subtype /Type1"),typeof V.encoding=="string"&&Re("/Encoding /"+V.encoding),Re("/FirstChar 32"),Re("/LastChar 255"),Re(">>"),Re("endobj"))},To=function(V){V.objectNumber=xn();var he=[];he.push({key:"Type",value:"/XObject"}),he.push({key:"Subtype",value:"/Form"}),he.push({key:"BBox",value:"["+[Ne(V.x),Ne(V.y),Ne(V.x+V.width),Ne(V.y+V.height)].join(" ")+"]"}),he.push({key:"Matrix",value:"["+V.matrix.toString()+"]"});var qe=V.pages[1].join(`
`);Ji({data:qe,additionalKeyValues:he,objectId:V.objectNumber}),Re("endobj")},ys=function(V,he){he||(he=21);var qe=xn(),pt=(function(or,wr){var Br,un=[],Tn=1/(wr-1);for(Br=0;Br<1;Br+=Tn)un.push(Br);if(un.push(1),or[0].offset!=0){var Mn={offset:0,color:or[0].color};or.unshift(Mn)}if(or[or.length-1].offset!=1){var Nn={offset:1,color:or[or.length-1].color};or.push(Nn)}for(var ua="",Ci=0,Pa=0;Pa<un.length;Pa++){for(Br=un[Pa];Br>or[Ci+1].offset;)Ci++;var Na=or[Ci].offset,ha=(Br-Na)/(or[Ci+1].offset-Na),zs=or[Ci].color,js=or[Ci+1].color;ua+=Ge(Math.round((1-ha)*zs[0]+ha*js[0]).toString(16))+Ge(Math.round((1-ha)*zs[1]+ha*js[1]).toString(16))+Ge(Math.round((1-ha)*zs[2]+ha*js[2]).toString(16))}return ua.trim()})(V.colors,he),St=[];St.push({key:"FunctionType",value:"0"}),St.push({key:"Domain",value:"[0.0 1.0]"}),St.push({key:"Size",value:"["+he+"]"}),St.push({key:"BitsPerSample",value:"8"}),St.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),St.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ji({data:pt,additionalKeyValues:St,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:qe}),Re("endobj"),V.objectNumber=xn(),Re("<< /ShadingType "+V.type),Re("/ColorSpace /DeviceRGB");var Kt="/Coords ["+Ne(parseFloat(V.coords[0]))+" "+Ne(parseFloat(V.coords[1]))+" ";V.type===2?Kt+=Ne(parseFloat(V.coords[2]))+" "+Ne(parseFloat(V.coords[3])):Kt+=Ne(parseFloat(V.coords[2]))+" "+Ne(parseFloat(V.coords[3]))+" "+Ne(parseFloat(V.coords[4]))+" "+Ne(parseFloat(V.coords[5])),Re(Kt+="]"),V.matrix&&Re("/Matrix ["+V.matrix.toString()+"]"),Re("/Function "+qe+" 0 R"),Re("/Extend [true true]"),Re(">>"),Re("endobj")},so=function(V,he){var qe=Wt(),pt=xn();he.push({resourcesOid:qe,objectOid:pt}),V.objectNumber=pt;var St=[];St.push({key:"Type",value:"/Pattern"}),St.push({key:"PatternType",value:"1"}),St.push({key:"PaintType",value:"1"}),St.push({key:"TilingType",value:"1"}),St.push({key:"BBox",value:"["+V.boundingBox.map(Ne).join(" ")+"]"}),St.push({key:"XStep",value:Ne(V.xStep)}),St.push({key:"YStep",value:Ne(V.yStep)}),St.push({key:"Resources",value:qe+" 0 R"}),V.matrix&&St.push({key:"Matrix",value:"["+V.matrix.toString()+"]"}),Ji({data:V.stream,additionalKeyValues:St,objectId:V.objectNumber}),Re("endobj")},_l=function(V){for(var he in V.objectNumber=xn(),Re("<<"),V)switch(he){case"opacity":Re("/ca "+_e(V[he]));break;case"stroke-opacity":Re("/CA "+_e(V[he]))}Re(">>"),Re("endobj")},oo=function(V){fn(V.resourcesOid,!0),Re("<<"),Re("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var he in Re("/Font <<"),Ae)Ae.hasOwnProperty(he)&&(z===!1||z===!0&&Z.hasOwnProperty(he))&&Re("/"+he+" "+Ae[he].objectNumber+" 0 R");Re(">>")})(),(function(){if(Object.keys(At).length>0){for(var he in Re("/Shading <<"),At)At.hasOwnProperty(he)&&At[he]instanceof Pd&&At[he].objectNumber>=0&&Re("/"+he+" "+At[he].objectNumber+" 0 R");ur.publish("putShadingPatternDict"),Re(">>")}})(),(function(he){if(Object.keys(At).length>0){for(var qe in Re("/Pattern <<"),At)At.hasOwnProperty(qe)&&At[qe]instanceof O.TilingPattern&&At[qe].objectNumber>=0&&At[qe].objectNumber<he&&Re("/"+qe+" "+At[qe].objectNumber+" 0 R");ur.publish("putTilingPatternDict"),Re(">>")}})(V.objectOid),(function(){if(Object.keys(it).length>0){var he;for(he in Re("/ExtGState <<"),it)it.hasOwnProperty(he)&&it[he].objectNumber>=0&&Re("/"+he+" "+it[he].objectNumber+" 0 R");ur.publish("putGStateDict"),Re(">>")}})(),(function(){for(var he in Re("/XObject <<"),Er)Er.hasOwnProperty(he)&&Er[he].objectNumber>=0&&Re("/"+he+" "+Er[he].objectNumber+" 0 R");ur.publish("putXobjectDict"),Re(">>")})(),Re(">>"),Re("endobj")},Pi=function(V){De[V.fontName]=De[V.fontName]||{},De[V.fontName][V.fontStyle]=V.id},xA=function(V,he,qe,pt,St){var Kt={id:"F"+(Object.keys(Ae).length+1).toString(10),postScriptName:V,fontName:he,fontStyle:qe,encoding:pt,isStandardFont:St||!1,metadata:{}};return ur.publish("addFont",{font:Kt,instance:this}),Ae[Kt.id]=Kt,Pi(Kt),Kt.id},Ni=O.__private__.pdfEscape=O.pdfEscape=function(V,he){return(function(qe,pt){var St,Kt,or,wr,Br,un,Tn,Mn,Nn;if(or=(pt=pt||{}).sourceEncoding||"Unicode",Br=pt.outputEncoding,(pt.autoencode||Br)&&Ae[Or].metadata&&Ae[Or].metadata[or]&&Ae[Or].metadata[or].encoding&&(wr=Ae[Or].metadata[or].encoding,!Br&&Ae[Or].encoding&&(Br=Ae[Or].encoding),!Br&&wr.codePages&&(Br=wr.codePages[0]),typeof Br=="string"&&(Br=wr[Br]),Br)){for(Tn=!1,un=[],St=0,Kt=qe.length;St<Kt;St++)(Mn=Br[qe.charCodeAt(St)])?un.push(String.fromCharCode(Mn)):un.push(qe[St]),un[St].charCodeAt(0)>>8&&(Tn=!0);qe=un.join("")}for(St=qe.length;Tn===void 0&&St!==0;)qe.charCodeAt(St-1)>>8&&(Tn=!0),St--;if(!Tn)return qe;for(un=pt.noBOM?[]:[254,255],St=0,Kt=qe.length;St<Kt;St++){if((Nn=(Mn=qe.charCodeAt(St))>>8)>>8)throw new Error("Character at position "+St+" of string '"+qe+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");un.push(Nn),un.push(Mn-(Nn<<8))}return String.fromCharCode.apply(void 0,un)})(V,he).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Zn=O.__private__.beginPage=function(V){Ar[++Bt]=[],Qe[Bt]={objId:0,contentsObjId:0,userUnit:Number(A),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(V[0]),topRightY:Number(V[1])}},XA(Bt),xr(Ar[xe])},ks=function(V,he){var qe,pt,St;switch(o=he||o,typeof V=="string"&&(qe=le(V.toLowerCase()),Array.isArray(qe)&&(pt=qe[0],St=qe[1])),Array.isArray(V)&&(pt=V[0]*gn,St=V[1]*gn),isNaN(pt)&&(pt=m[0],St=m[1]),(pt>14400||St>14400)&&(Fa.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),pt=Math.min(14400,pt),St=Math.min(14400,St)),m=[pt,St],o.substr(0,1)){case"l":St>pt&&(m=[St,pt]);break;case"p":pt>St&&(m=[St,pt])}Zn(m),Rr(FA),Re(vs),xs!==0&&Re(xs+" J"),Aa!==0&&Re(Aa+" j"),ur.publish("addPage",{pageNumber:Bt})},Zo=function(V){V>0&&V<=Bt&&(Ar.splice(V,1),Qe.splice(V,1),Bt--,xe>Bt&&(xe=Bt),this.setPage(xe))},XA=function(V){V>0&&V<=Bt&&(xe=V)},Fo=O.__private__.getNumberOfPages=O.getNumberOfPages=function(){return Ar.length-1},vl=function(V,he,qe){var pt,St=void 0;return qe=qe||{},V=V!==void 0?V:Ae[Or].fontName,he=he!==void 0?he:Ae[Or].fontStyle,pt=V.toLowerCase(),De[pt]!==void 0&&De[pt][he]!==void 0?St=De[pt][he]:De[V]!==void 0&&De[V][he]!==void 0?St=De[V][he]:qe.disableWarning===!1&&Fa.warn("Unable to look up font label for font '"+V+"', '"+he+"'. Refer to getFontList() for available fonts."),St||qe.noFallback||(St=De.times[he])==null&&(St=De.times.normal),St},ls=O.__private__.putInfo=function(){var V=xn(),he=function(pt){return pt};for(var qe in D!==null&&(he=Ia.encryptor(V,0)),Re("<<"),Re("/Producer ("+Ni(he("jsPDF "+hn.version))+")"),Sn)Sn.hasOwnProperty(qe)&&Sn[qe]&&Re("/"+qe.substr(0,1).toUpperCase()+qe.substr(1)+" ("+Ni(he(Sn[qe]))+")");Re("/CreationDate ("+Ni(he(wt))+")"),Re(">>"),Re("endobj")},Hl=O.__private__.putCatalog=function(V){var he=(V=V||{}).rootDictionaryObjId||xa;switch(xn(),Re("<<"),Re("/Type /Catalog"),Re("/Pages "+he+" 0 R"),Zr||(Zr="fullwidth"),Zr){case"fullwidth":Re("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Re("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Re("/OpenAction [3 0 R /Fit]");break;case"original":Re("/OpenAction [3 0 R /XYZ null null 1]");break;default:var qe=""+Zr;qe.substr(qe.length-1)==="%"&&(Zr=parseInt(Zr)/100),typeof Zr=="number"&&Re("/OpenAction [3 0 R /XYZ null null "+_e(Zr)+"]")}switch(Cn||(Cn="continuous"),Cn){case"continuous":Re("/PageLayout /OneColumn");break;case"single":Re("/PageLayout /SinglePage");break;case"two":case"twoleft":Re("/PageLayout /TwoColumnLeft");break;case"tworight":Re("/PageLayout /TwoColumnRight")}Gr&&Re("/PageMode /"+Gr),ur.publish("putCatalog"),Re(">>"),Re("endobj")},As=O.__private__.putTrailer=function(){Re("trailer"),Re("<<"),Re("/Size "+(tt+1)),Re("/Root "+tt+" 0 R"),Re("/Info "+(tt-1)+" 0 R"),D!==null&&Re("/Encrypt "+Ia.oid+" 0 R"),Re("/ID [ <"+ke+"> <"+ke+"> ]"),Re(">>")},Qn=O.__private__.putHeader=function(){Re("%PDF-"+ce),Re("%")},ea=O.__private__.putXRef=function(){var V="0000000000";Re("xref"),Re("0 "+(tt+1)),Re("0000000000 65535 f ");for(var he=1;he<=tt;he++)typeof mt[he]=="function"?Re((V+mt[he]()).slice(-10)+" 00000 n "):mt[he]!==void 0?Re((V+mt[he]).slice(-10)+" 00000 n "):Re("0000000000 00000 n ")},Vl=O.__private__.buildDocument=function(){var V;tt=0,Et=0,Pt=[],mt=[],$t=[],xa=Wt(),Wn=Wt(),xr(Pt),ur.publish("buildDocument"),Qn(),os(),(function(){ur.publish("putAdditionalObjects");for(var qe=0;qe<$t.length;qe++){var pt=$t[qe];fn(pt.objId,!0),Re(pt.content),Re("endobj")}ur.publish("postPutAdditionalObjects")})(),V=[],(function(){for(var qe in Ae)Ae.hasOwnProperty(qe)&&(z===!1||z===!0&&Z.hasOwnProperty(qe))&&an(Ae[qe])})(),(function(){var qe;for(qe in it)it.hasOwnProperty(qe)&&_l(it[qe])})(),(function(){for(var qe in Er)Er.hasOwnProperty(qe)&&To(Er[qe])})(),(function(qe){var pt;for(pt in At)At.hasOwnProperty(pt)&&(At[pt]instanceof Pd?ys(At[pt]):At[pt]instanceof Am&&so(At[pt],qe))})(V),ur.publish("putResources"),V.forEach(oo),oo({resourcesOid:Wn,objectOid:Number.MAX_SAFE_INTEGER}),ur.publish("postPutResources"),D!==null&&(Ia.oid=xn(),Re("<<"),Re("/Filter /Standard"),Re("/V "+Ia.v),Re("/R "+Ia.r),Re("/U <"+Ia.toHexString(Ia.U)+">"),Re("/O <"+Ia.toHexString(Ia.O)+">"),Re("/P "+Ia.P),Re(">>"),Re("endobj")),ls(),Hl();var he=Et;return ea(),As(),Re("startxref"),Re(""+he),Re("%%EOF"),xr(Ar[xe]),Pt.join(`
`)},bA=O.__private__.getBlob=function(V){return new Blob([Qr(V)],{type:"application/pdf"})},wA=O.output=O.__private__.output=(wi=function(V,he){switch(typeof(he=he||{})=="string"?he={filename:he}:he.filename=he.filename||"generated.pdf",V){case void 0:return Vl();case"save":O.save(he.filename);break;case"arraybuffer":return Qr(Vl());case"blob":return bA(Vl());case"bloburi":case"bloburl":if(Pn.URL!==void 0&&typeof Pn.URL.createObjectURL=="function")return Pn.URL&&Pn.URL.createObjectURL(bA(Vl()))||void 0;Fa.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var qe="",pt=Vl();try{qe=Sw(pt)}catch{qe=Sw(unescape(encodeURIComponent(pt)))}return"data:application/pdf;filename="+he.filename+";base64,"+qe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Pn)==="[object Window]"){var St="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Kt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';he.pdfObjectUrl&&(St=he.pdfObjectUrl,Kt="");var or='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+St+'"'+Kt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(he)+");<\/script></body></html>",wr=Pn.open();return wr!==null&&wr.document.write(or),wr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Pn)==="[object Window]"){var Br='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(he.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+he.filename+'" width="500px" height="400px" /></body></html>',un=Pn.open();if(un!==null){un.document.write(Br);var Tn=this;un.document.documentElement.querySelector("#pdfViewer").onload=function(){un.document.title=he.filename,un.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Tn.output("bloburl"))}}return un}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Pn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Mn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",he)+'"></iframe></body></html>',Nn=Pn.open();if(Nn!==null&&(Nn.document.write(Mn),Nn.document.title=he.filename),Nn||typeof safari>"u")return Nn;break;case"datauri":case"dataurl":return Pn.document.location.href=this.output("datauristring",he);default:return null}},wi.foo=function(){try{return wi.apply(this,arguments)}catch(qe){var V=qe.stack||"";~V.indexOf(" at ")&&(V=V.split(" at ")[1]);var he="Error in function "+V.split(`
`)[0].split("<")[0]+": "+qe.message;if(!Pn.console)throw new Error(he);Pn.console.error(he,qe),Pn.alert&&alert(he)}},wi.foo.bar=wi,wi.foo),cs=function(V){return Array.isArray(Xr)===!0&&Xr.indexOf(V)>-1};switch(c){case"pt":gn=1;break;case"mm":gn=72/25.4;break;case"cm":gn=72/2.54;break;case"in":gn=72;break;case"px":gn=cs("px_scaling")==1?.75:96/72;break;case"pc":case"em":gn=12;break;case"ex":gn=6;break;default:if(typeof c!="number")throw new Error("Invalid unit: "+c);gn=c}var Ia=null;Fe(),st();var la=O.__private__.getPageInfo=O.getPageInfo=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Qe[V].objId,pageNumber:V,pageContext:Qe[V]}},BA=O.__private__.getPageInfoByObjId=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var he in Qe)if(Qe[he].objId===V)break;return la(he)},gu=O.__private__.getCurrentPageInfo=O.getCurrentPageInfo=function(){return{objId:Qe[xe].objId,pageNumber:xe,pageContext:Qe[xe]}};O.addPage=function(){return ks.apply(this,arguments),this},O.setPage=function(){return XA.apply(this,arguments),xr.call(this,Ar[xe]),this},O.insertPage=function(V){return this.addPage(),this.movePage(xe,V),this},O.movePage=function(V,he){var qe,pt;if(V>he){qe=Ar[V],pt=Qe[V];for(var St=V;St>he;St--)Ar[St]=Ar[St-1],Qe[St]=Qe[St-1];Ar[he]=qe,Qe[he]=pt,this.setPage(he)}else if(V<he){qe=Ar[V],pt=Qe[V];for(var Kt=V;Kt<he;Kt++)Ar[Kt]=Ar[Kt+1],Qe[Kt]=Qe[Kt+1];Ar[he]=qe,Qe[he]=pt,this.setPage(he)}return this},O.deletePage=function(){return Zo.apply(this,arguments),this},O.__private__.text=O.text=function(V,he,qe,pt,St){var Kt,or,wr,Br,un,Tn,Mn,Nn,ua,Ci=(pt=pt||{}).scope||this;if(typeof V=="number"&&typeof he=="number"&&(typeof qe=="string"||Array.isArray(qe))){var Pa=qe;qe=he,he=V,V=Pa}if(arguments[3]instanceof dr==0?(wr=arguments[4],Br=arguments[5],oa(Mn=arguments[3])==="object"&&Mn!==null||(typeof wr=="string"&&(Br=wr,wr=null),typeof Mn=="string"&&(Br=Mn,Mn=null),typeof Mn=="number"&&(wr=Mn,Mn=null),pt={flags:Mn,angle:wr,align:Br})):(Ce("The transform parameter of text() with a Matrix value"),ua=St),isNaN(he)||isNaN(qe)||V==null)throw new Error("Invalid arguments passed to jsPDF.text");if(V.length===0)return Ci;var Na,ha="",zs=typeof pt.lineHeightFactor=="number"?pt.lineHeightFactor:TA,js=Ci.internal.scaleFactor;function Wo(Ai){return Ai=Ai.split("	").join(Array(pt.TabLen||9).join(" ")),Ni(Ai,Mn)}function $A(Ai){for(var ni,Ii=Ai.concat(),wa=[],Fl=Ii.length;Fl--;)typeof(ni=Ii.shift())=="string"?wa.push(ni):Array.isArray(Ai)&&(ni.length===1||ni[1]===void 0&&ni[2]===void 0)?wa.push(ni[0]):wa.push([ni[0],ni[1],ni[2]]);return wa}function bl(Ai,ni){var Ii;if(typeof Ai=="string")Ii=ni(Ai)[0];else if(Array.isArray(Ai)){for(var wa,Fl,wn=Ai.concat(),Yl=[],JA=wn.length;JA--;)typeof(wa=wn.shift())=="string"?Yl.push(ni(wa)[0]):Array.isArray(wa)&&typeof wa[0]=="string"&&(Fl=ni(wa[0],wa[1],wa[2]),Yl.push([Fl[0],Fl[1],Fl[2]]));Ii=Yl}return Ii}var fa=!1,ba=!0;if(typeof V=="string")fa=!0;else if(Array.isArray(V)){var Kl=V.concat();or=[];for(var bs,da=Kl.length;da--;)(typeof(bs=Kl.shift())!="string"||Array.isArray(bs)&&typeof bs[0]!="string")&&(ba=!1);fa=ba}if(fa===!1)throw new Error('Type of text must be string or Array. "'+V+'" is not recognized.');typeof V=="string"&&(V=V.match(/[\r?\n]/)?V.split(/\r\n|\r|\n/g):[V]);var Zl=lr/Ci.internal.scaleFactor,wl=Zl*(zs-1);switch(pt.baseline){case"bottom":qe-=wl;break;case"top":qe+=Zl-wl;break;case"hanging":qe+=Zl-2*wl;break;case"middle":qe+=Zl/2-wl}if((Tn=pt.maxWidth||0)>0&&(typeof V=="string"?V=Ci.splitTextToSize(V,Tn):Object.prototype.toString.call(V)==="[object Array]"&&(V=V.reduce(function(Ai,ni){return Ai.concat(Ci.splitTextToSize(ni,Tn))},[]))),Kt={text:V,x:he,y:qe,options:pt,mutex:{pdfEscape:Ni,activeFontKey:Or,fonts:Ae,activeFontSize:lr}},ur.publish("preProcessText",Kt),V=Kt.text,wr=(pt=Kt.options).angle,ua instanceof dr==0&&wr&&typeof wr=="number"){wr*=Math.PI/180,pt.rotationDirection===0&&(wr=-wr),Le===Be&&(wr=-wr);var Qc=Math.cos(wr),Hs=Math.sin(wr);ua=new dr(Qc,Hs,-Hs,Qc,0,0)}else wr&&wr instanceof dr&&(ua=wr);Le!==Be||ua||(ua=Kn),(un=pt.charSpace||Ua)!==void 0&&(ha+=Ne(Ye(un))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Nn=pt.horizontalScale)!==void 0&&(ha+=Ne(100*Nn)+` Tz
`),pt.lang;var Vs=-1,Do=pt.renderingMode!==void 0?pt.renderingMode:pt.stroke,kc=Ci.internal.getCurrentPageInfo().pageContext;switch(Do){case 0:case!1:case"fill":Vs=0;break;case 1:case!0:case"stroke":Vs=1;break;case 2:case"fillThenStroke":Vs=2;break;case 3:case"invisible":Vs=3;break;case 4:case"fillAndAddForClipping":Vs=4;break;case 5:case"strokeAndAddPathForClipping":Vs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Vs=6;break;case 7:case"addToPathForClipping":Vs=7}var _c=kc.usedRenderingMode!==void 0?kc.usedRenderingMode:-1;Vs!==-1?ha+=Vs+` Tr
`:_c!==-1&&(ha+=`0 Tr
`),Vs!==-1&&(kc.usedRenderingMode=Vs),Br=pt.align||"left";var ws,Yo=lr*zs,Bl=Ci.internal.pageSize.getWidth(),Oc=Ae[Or];un=pt.charSpace||Ua,Tn=pt.maxWidth||0,Mn=Object.assign({autoencode:!0,noBOM:!0},pt.flags);var $o=[],Ao=function(Ai){return Ci.getStringUnitWidth(Ai,{font:Oc,charSpace:un,fontSize:lr,doKerning:!1})*lr/js};if(Object.prototype.toString.call(V)==="[object Array]"){var Gs;or=$A(V),Br!=="left"&&(ws=or.map(Ao));var Bs,qs=0;if(Br==="right"){he-=ws[0],V=[],da=or.length;for(var Cl=0;Cl<da;Cl++)Cl===0?(Bs=Za(he),Gs=jn(qe)):(Bs=Ye(qs-ws[Cl]),Gs=-Yo),V.push([or[Cl],Bs,Gs]),qs=ws[Cl]}else if(Br==="center"){he-=ws[0]/2,V=[],da=or.length;for(var Po=0;Po<da;Po++)Po===0?(Bs=Za(he),Gs=jn(qe)):(Bs=Ye((qs-ws[Po])/2),Gs=-Yo),V.push([or[Po],Bs,Gs]),qs=ws[Po]}else if(Br==="left"){V=[],da=or.length;for(var zc=0;zc<da;zc++)V.push(or[zc])}else if(Br==="justify"&&Oc.encoding==="Identity-H"){V=[],da=or.length,Tn=Tn!==0?Tn:Bl;for(var jc=0,pa=0;pa<da;pa++)if(Gs=pa===0?jn(qe):-Yo,Bs=pa===0?Za(he):jc,pa<da-1){var vu=Ye((Tn-ws[pa])/(or[pa].split(" ").length-1)),co=or[pa].split(" ");V.push([co[0]+" ",Bs,Gs]),jc=0;for(var Jo=1;Jo<co.length;Jo++){var Xa=(Ao(co[Jo-1]+" "+co[Jo])-Ao(co[Jo]))*js+vu;Jo==co.length-1?V.push([co[Jo],Xa,0]):V.push([co[Jo]+" ",Xa,0]),jc-=Xa}}else V.push([or[pa],Bs,Gs]);V.push(["",jc,0])}else{if(Br!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(V=[],da=or.length,Tn=Tn!==0?Tn:Bl,pa=0;pa<da;pa++){Gs=pa===0?jn(qe):-Yo,Bs=pa===0?Za(he):0;var el=or[pa].split(" ").length-1,uo=el>0?(Tn-ws[pa])/el:0;pa<da-1?$o.push(Ne(Ye(uo))):$o.push(0),V.push([or[pa],Bs,Gs])}}}(typeof pt.R2L=="boolean"?pt.R2L:Vr)===!0&&(V=bl(V,function(Ai,ni,Ii){return[Ai.split("").reverse().join(""),ni,Ii]})),Kt={text:V,x:he,y:qe,options:pt,mutex:{pdfEscape:Ni,activeFontKey:Or,fonts:Ae,activeFontSize:lr}},ur.publish("postProcessText",Kt),V=Kt.text,Na=Kt.mutex.isHex||!1;var Xl=Ae[Or].encoding;Xl!=="WinAnsiEncoding"&&Xl!=="StandardEncoding"||(V=bl(V,function(Ai,ni,Ii){return[Wo(Ai),ni,Ii]})),or=$A(V),V=[];for(var tl,Sl,El,Wl=Array.isArray(or[0])?1:0,Ra="",Tl=function(Ai,ni,Ii){var wa="";return Ii instanceof dr?(Ii=typeof pt.angle=="number"?mi(Ii,new dr(1,0,0,1,Ai,ni)):mi(new dr(1,0,0,1,Ai,ni),Ii),Le===Be&&(Ii=mi(new dr(1,0,0,-1,0,0),Ii)),wa=Ii.join(" ")+` Tm
`):wa=Ne(Ai)+" "+Ne(ni)+` Td
`,wa},Cs=0;Cs<or.length;Cs++){switch(Ra="",Wl){case 1:El=(Na?"<":"(")+or[Cs][0]+(Na?">":")"),tl=parseFloat(or[Cs][1]),Sl=parseFloat(or[Cs][2]);break;case 0:El=(Na?"<":"(")+or[Cs]+(Na?">":")"),tl=Za(he),Sl=jn(qe)}$o!==void 0&&$o[Cs]!==void 0&&(Ra=$o[Cs]+` Tw
`),Cs===0?V.push(Ra+Tl(tl,Sl,ua)+El):Wl===0?V.push(Ra+El):Wl===1&&V.push(Ra+Tl(tl,Sl,ua)+El)}V=Wl===0?V.join(` Tj
T* `):V.join(` Tj
`),V+=` Tj
`;var rl=`BT
/`;return rl+=Or+" "+lr+` Tf
`,rl+=Ne(lr*zs)+` TL
`,rl+=ri+`
`,rl+=ha,rl+=V,Re(rl+="ET"),Z[Or]=!0,Ci};var WA=O.__private__.clip=O.clip=function(V){return Re(V==="evenodd"?"W*":"W"),this};O.clipEvenOdd=function(){return WA("evenodd")},O.__private__.discardPath=O.discardPath=function(){return Re("n"),this};var us=O.__private__.isValidStyle=function(V){var he=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(V)!==-1&&(he=!0),he};O.__private__.setDefaultPathOperation=O.setDefaultPathOperation=function(V){return us(V)&&(I=V),this};var yu=O.__private__.getStyle=O.getStyle=function(V){var he=I;switch(V){case"D":case"S":he="S";break;case"F":he="f";break;case"FD":case"DF":he="B";break;case"f":case"f*":case"B":case"B*":he=V}return he},CA=O.close=function(){return Re("h"),this};O.stroke=function(){return Re("S"),this},O.fill=function(V){return lo("f",V),this},O.fillEvenOdd=function(V){return lo("f*",V),this},O.fillStroke=function(V){return lo("B",V),this},O.fillStrokeEvenOdd=function(V){return lo("B*",V),this};var lo=function(V,he){oa(he)==="object"?_u(he,V):Re(V)},YA=function(V){V===null||Le===Be&&V===void 0||(V=yu(V),Re(V))};function SA(V,he,qe,pt,St){var Kt=new Am(he||this.boundingBox,qe||this.xStep,pt||this.yStep,this.gState,St||this.matrix);Kt.stream=this.stream;var or=V+"$$"+this.cloneIndex+++"$$";return Jn(or,Kt),Kt}var _u=function(V,he){var qe=bt[V.key],pt=At[qe];if(pt instanceof Pd)Re("q"),Re(Rc(he)),pt.gState&&O.setGState(pt.gState),Re(V.matrix.toString()+" cm"),Re("/"+qe+" sh"),Re("Q");else if(pt instanceof Am){var St=new dr(1,0,0,-1,0,Da());V.matrix&&(St=St.multiply(V.matrix||Kn),qe=SA.call(pt,V.key,V.boundingBox,V.xStep,V.yStep,St).id),Re("q"),Re("/Pattern cs"),Re("/"+qe+" scn"),pt.gState&&O.setGState(pt.gState),Re(he),Re("Q")}},Rc=function(V){switch(V){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},_s=O.moveTo=function(V,he){return Re(Ne(Ye(V))+" "+Ne(Ve(he))+" m"),this},EA=O.lineTo=function(V,he){return Re(Ne(Ye(V))+" "+Ne(Ve(he))+" l"),this},cn=O.curveTo=function(V,he,qe,pt,St,Kt){return Re([Ne(Ye(V)),Ne(Ve(he)),Ne(Ye(qe)),Ne(Ve(pt)),Ne(Ye(St)),Ne(Ve(Kt)),"c"].join(" ")),this};O.__private__.line=O.line=function(V,he,qe,pt,St){if(isNaN(V)||isNaN(he)||isNaN(qe)||isNaN(pt)||!us(St))throw new Error("Invalid arguments passed to jsPDF.line");return Le===ye?this.lines([[qe-V,pt-he]],V,he,[1,1],St||"S"):this.lines([[qe-V,pt-he]],V,he,[1,1]).stroke()},O.__private__.lines=O.lines=function(V,he,qe,pt,St,Kt){var or,wr,Br,un,Tn,Mn,Nn,ua,Ci,Pa,Na,ha;if(typeof V=="number"&&(ha=qe,qe=he,he=V,V=ha),pt=pt||[1,1],Kt=Kt||!1,isNaN(he)||isNaN(qe)||!Array.isArray(V)||!Array.isArray(pt)||!us(St)||typeof Kt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(_s(he,qe),or=pt[0],wr=pt[1],un=V.length,Pa=he,Na=qe,Br=0;Br<un;Br++)(Tn=V[Br]).length===2?(Pa=Tn[0]*or+Pa,Na=Tn[1]*wr+Na,EA(Pa,Na)):(Mn=Tn[0]*or+Pa,Nn=Tn[1]*wr+Na,ua=Tn[2]*or+Pa,Ci=Tn[3]*wr+Na,Pa=Tn[4]*or+Pa,Na=Tn[5]*wr+Na,cn(Mn,Nn,ua,Ci,Pa,Na));return Kt&&CA(),YA(St),this},O.path=function(V){for(var he=0;he<V.length;he++){var qe=V[he],pt=qe.c;switch(qe.op){case"m":_s(pt[0],pt[1]);break;case"l":EA(pt[0],pt[1]);break;case"c":cn.apply(this,pt);break;case"h":CA()}}return this},O.__private__.rect=O.rect=function(V,he,qe,pt,St){if(isNaN(V)||isNaN(he)||isNaN(qe)||isNaN(pt)||!us(St))throw new Error("Invalid arguments passed to jsPDF.rect");return Le===ye&&(pt=-pt),Re([Ne(Ye(V)),Ne(Ve(he)),Ne(Ye(qe)),Ne(Ye(pt)),"re"].join(" ")),YA(St),this},O.__private__.triangle=O.triangle=function(V,he,qe,pt,St,Kt,or){if(isNaN(V)||isNaN(he)||isNaN(qe)||isNaN(pt)||isNaN(St)||isNaN(Kt)||!us(or))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[qe-V,pt-he],[St-qe,Kt-pt],[V-St,he-Kt]],V,he,[1,1],or,!0),this},O.__private__.roundedRect=O.roundedRect=function(V,he,qe,pt,St,Kt,or){if(isNaN(V)||isNaN(he)||isNaN(qe)||isNaN(pt)||isNaN(St)||isNaN(Kt)||!us(or))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var wr=4/3*(Math.SQRT2-1);return St=Math.min(St,.5*qe),Kt=Math.min(Kt,.5*pt),this.lines([[qe-2*St,0],[St*wr,0,St,Kt-Kt*wr,St,Kt],[0,pt-2*Kt],[0,Kt*wr,-St*wr,Kt,-St,Kt],[2*St-qe,0],[-St*wr,0,-St,-Kt*wr,-St,-Kt],[0,2*Kt-pt],[0,-Kt*wr,St*wr,-Kt,St,-Kt]],V+St,he,[1,1],or,!0),this},O.__private__.ellipse=O.ellipse=function(V,he,qe,pt,St){if(isNaN(V)||isNaN(he)||isNaN(qe)||isNaN(pt)||!us(St))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Kt=4/3*(Math.SQRT2-1)*qe,or=4/3*(Math.SQRT2-1)*pt;return _s(V+qe,he),cn(V+qe,he-or,V+Kt,he-pt,V,he-pt),cn(V-Kt,he-pt,V-qe,he-or,V-qe,he),cn(V-qe,he+or,V-Kt,he+pt,V,he+pt),cn(V+Kt,he+pt,V+qe,he+or,V+qe,he),YA(St),this},O.__private__.circle=O.circle=function(V,he,qe,pt){if(isNaN(V)||isNaN(he)||isNaN(qe)||!us(pt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(V,he,qe,qe,pt)},O.setFont=function(V,he,qe){return qe&&(he=ut(he,qe)),Or=vl(V,he,{disableWarning:!1}),this};var hs=O.__private__.getFont=O.getFont=function(){return Ae[vl.apply(O,arguments)]};O.__private__.getFontList=O.getFontList=function(){var V,he,qe={};for(V in De)if(De.hasOwnProperty(V))for(he in qe[V]=[],De[V])De[V].hasOwnProperty(he)&&qe[V].push(he);return qe},O.addFont=function(V,he,qe,pt,St){var Kt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Kt.indexOf(arguments[3])!==-1?St=arguments[3]:arguments[3]&&Kt.indexOf(arguments[3])==-1&&(qe=ut(qe,pt)),xA.call(this,V,he,qe,St=St||"Identity-H")};var TA,FA=i.lineWidth||.200025,La=O.__private__.getLineWidth=O.getLineWidth=function(){return FA},Rr=O.__private__.setLineWidth=O.setLineWidth=function(V){return FA=V,Re(Ne(Ye(V))+" w"),this};O.__private__.setLineDash=hn.API.setLineDash=hn.API.setLineDashPattern=function(V,he){if(V=V||[],he=he||0,isNaN(he)||!Array.isArray(V))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return V=V.map(function(qe){return Ne(Ye(qe))}).join(" "),he=Ne(Ye(he)),Re("["+V+"] "+he+" d"),this};var ja=O.__private__.getLineHeight=O.getLineHeight=function(){return lr*TA};O.__private__.getLineHeight=O.getLineHeight=function(){return lr*TA};var gi=O.__private__.setLineHeightFactor=O.setLineHeightFactor=function(V){return typeof(V=V||1.15)=="number"&&(TA=V),this},Hr=O.__private__.getLineHeightFactor=O.getLineHeightFactor=function(){return TA};gi(i.lineHeight);var Za=O.__private__.getHorizontalCoordinate=function(V){return Ye(V)},jn=O.__private__.getVerticalCoordinate=function(V){return Le===Be?V:Qe[xe].mediaBox.topRightY-Qe[xe].mediaBox.bottomLeftY-Ye(V)},fs=O.__private__.getHorizontalCoordinateString=O.getHorizontalCoordinateString=function(V){return Ne(Za(V))},Ma=O.__private__.getVerticalCoordinateString=O.getVerticalCoordinateString=function(V){return Ne(jn(V))},vs=i.strokeColor||"0 G";O.__private__.getStrokeColor=O.getDrawColor=function(){return Jt(vs)},O.__private__.setStrokeColor=O.setDrawColor=function(V,he,qe,pt){return vs=kr({ch1:V,ch2:he,ch3:qe,ch4:pt,pdfColorType:"draw",precision:2}),Re(vs),this};var Os=i.fillColor||"0 g";O.__private__.getFillColor=O.getFillColor=function(){return Jt(Os)},O.__private__.setFillColor=O.setFillColor=function(V,he,qe,pt){return Os=kr({ch1:V,ch2:he,ch3:qe,ch4:pt,pdfColorType:"fill",precision:2}),Re(Os),this};var ri=i.textColor||"0 g",IA=O.__private__.getTextColor=O.getTextColor=function(){return Jt(ri)};O.__private__.setTextColor=O.setTextColor=function(V,he,qe,pt){return ri=kr({ch1:V,ch2:he,ch3:qe,ch4:pt,pdfColorType:"text",precision:3}),this};var Ua=i.charSpace,Xo=O.__private__.getCharSpace=O.getCharSpace=function(){return parseFloat(Ua||0)};O.__private__.setCharSpace=O.setCharSpace=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ua=V,this};var xs=0;O.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},O.__private__.setLineCap=O.setLineCap=function(V){var he=O.CapJoinStyles[V];if(he===void 0)throw new Error("Line cap style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return xs=he,Re(he+" J"),this};var Aa=0;O.__private__.setLineJoin=O.setLineJoin=function(V){var he=O.CapJoinStyles[V];if(he===void 0)throw new Error("Line join style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Aa=he,Re(he+" j"),this},O.__private__.setLineMiterLimit=O.__private__.setMiterLimit=O.setLineMiterLimit=O.setMiterLimit=function(V){if(V=V||0,isNaN(V))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Re(Ne(Ye(V))+" M"),this},O.GState=S_,O.setGState=function(V){(V=typeof V=="string"?it[dt[V]]:ca(null,V)).equals(jt)||(Re("/"+V.id+" gs"),jt=V)};var ca=function(V,he){if(!V||!dt[V]){var qe=!1;for(var pt in it)if(it.hasOwnProperty(pt)&&it[pt].equals(he)){qe=!0;break}if(qe)he=it[pt];else{var St="GS"+(Object.keys(it).length+1).toString(10);it[St]=he,he.id=St}return V&&(dt[V]=he.id),ur.publish("addGState",he),he}};O.addGState=function(V,he){return ca(V,he),this},O.saveGraphicsState=function(){return Re("q"),Xe.push({key:Or,size:lr,color:ri}),this},O.restoreGraphicsState=function(){Re("Q");var V=Xe.pop();return Or=V.key,lr=V.size,ri=V.color,jt=null,this},O.setCurrentTransformationMatrix=function(V){return Re(V.toString()+" cm"),this},O.comment=function(V){return Re("#"+V),this};var Io=function(V,he){var qe=V||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return qe},set:function(Kt){isNaN(Kt)||(qe=parseFloat(Kt))}});var pt=he||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return pt},set:function(Kt){isNaN(Kt)||(pt=parseFloat(Kt))}});var St="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return St},set:function(Kt){St=Kt.toString()}}),this},xl=function(V,he,qe,pt){Io.call(this,V,he),this.type="rect";var St=qe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return St},set:function(or){isNaN(or)||(St=parseFloat(or))}});var Kt=pt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Kt},set:function(or){isNaN(or)||(Kt=parseFloat(or))}}),this},Gl=function(){this.page=Bt,this.currentPage=xe,this.pages=Ar.slice(0),this.pagesContext=Qe.slice(0),this.x=Je,this.y=ee,this.matrix=ne,this.width=Mo(xe),this.height=pn(xe),this.outputDestination=br,this.id="",this.objectNumber=-1};Gl.prototype.restore=function(){Bt=this.page,xe=this.currentPage,Qe=this.pagesContext,Ar=this.pages,Je=this.x,ee=this.y,ne=this.matrix,In(xe,this.width),Uo(xe,this.height),br=this.outputDestination};var Lo=function(V,he,qe,pt,St){Pr.push(new Gl),Bt=xe=0,Ar=[],Je=V,ee=he,ne=St,Zn([qe,pt])};for(var Xn in O.beginFormObject=function(V,he,qe,pt,St){return Lo(V,he,qe,pt,St),this},O.endFormObject=function(V){return(function(he){if(zr[he])Pr.pop().restore();else{var qe=new Gl,pt="Xo"+(Object.keys(Er).length+1).toString(10);qe.id=pt,zr[he]=pt,Er[pt]=qe,ur.publish("addFormObject",qe),Pr.pop().restore()}})(V),this},O.doFormObject=function(V,he){var qe=Er[zr[V]];return Re("q"),Re(he.toString()+" cm"),Re("/"+qe.id+" Do"),Re("Q"),this},O.getFormObject=function(V){var he=Er[zr[V]];return{x:he.x,y:he.y,width:he.width,height:he.height,matrix:he.matrix}},O.save=function(V,he){return V=V||"generated.pdf",(he=he||{}).returnPromise=he.returnPromise||!1,he.returnPromise===!1?(Dd(bA(Vl()),V),typeof Dd.unload=="function"&&Pn.setTimeout&&setTimeout(Dd.unload,911),this):new Promise(function(qe,pt){try{var St=Dd(bA(Vl()),V);typeof Dd.unload=="function"&&Pn.setTimeout&&setTimeout(Dd.unload,911),qe(St)}catch(Kt){pt(Kt.message)}})},hn.API)hn.API.hasOwnProperty(Xn)&&(Xn==="events"&&hn.API.events.length?(function(V,he){var qe,pt,St;for(St=he.length-1;St!==-1;St--)qe=he[St][0],pt=he[St][1],V.subscribe.apply(V,[qe].concat(typeof pt=="function"?[pt]:pt))})(ur,hn.API.events):O[Xn]=hn.API[Xn]);function Mo(V){return Qe[V].mediaBox.topRightX-Qe[V].mediaBox.bottomLeftX}function In(V,he){Qe[V].mediaBox.topRightX=he+Qe[V].mediaBox.bottomLeftX}function pn(V){return Qe[V].mediaBox.topRightY-Qe[V].mediaBox.bottomLeftY}function Uo(V,he){Qe[V].mediaBox.topRightY=he+Qe[V].mediaBox.bottomLeftY}var En=O.getPageWidth=function(V){return Mo(V=V||xe)/gn},LA=O.setPageWidth=function(V,he){In(V,he*gn)},Da=O.getPageHeight=function(V){return pn(V=V||xe)/gn},ql=O.setPageHeight=function(V,he){Uo(V,he*gn)};return O.internal={pdfEscape:Ni,getStyle:yu,getFont:hs,getFontSize:Sr,getCharSpace:Xo,getTextColor:IA,getLineHeight:ja,getLineHeightFactor:Hr,getLineWidth:La,write:_r,getHorizontalCoordinate:Za,getVerticalCoordinate:jn,getCoordinateString:fs,getVerticalCoordinateString:Ma,collections:{},newObject:xn,newAdditionalObject:li,newObjectDeferred:Wt,newObjectDeferredBegin:fn,getFilters:qr,putStream:Ji,events:ur,scaleFactor:gn,pageSize:{getWidth:function(){return En(xe)},setWidth:function(V){LA(xe,V)},getHeight:function(){return Da(xe)},setHeight:function(V){ql(xe,V)}},encryptionOptions:D,encryption:Ia,getEncryptor:function(V){return D!==null?Ia.encryptor(V,0):function(he){return he}},output:wA,getNumberOfPages:Fo,get pages(){return Ar},out:Re,f2:_e,f3:Te,getPageInfo:la,getPageInfoByObjId:BA,getCurrentPageInfo:gu,getPDFVersion:ie,Point:Io,Rectangle:xl,Matrix:dr,hasHotfix:cs},Object.defineProperty(O.internal.pageSize,"width",{get:function(){return En(xe)},set:function(V){LA(xe,V)},enumerable:!0,configurable:!0}),Object.defineProperty(O.internal.pageSize,"height",{get:function(){return Da(xe)},set:function(V){ql(xe,V)},enumerable:!0,configurable:!0}),(function(V){for(var he=0,qe=Wr.length;he<qe;he++){var pt=xA.call(this,V[he][0],V[he][1],V[he][2],Wr[he][3],!0);z===!1&&(Z[pt]=!0);var St=V[he][0].split("-");Pi({id:pt,fontName:St[0],fontStyle:St[1]||""})}ur.publish("addFonts",{fonts:Ae,dictionary:De})}).call(O,Wr),Or="F1",ks(m,o),ur.publish("initialized"),O}nm.prototype.lsbFirstWord=function(i){return String.fromCharCode(255&i,i>>8&255,i>>16&255,i>>24&255)},nm.prototype.toHexString=function(i){return i.split("").map(function(n){return("0"+(255&n.charCodeAt(0)).toString(16)).slice(-2)}).join("")},nm.prototype.hexToBytes=function(i){for(var n=[],o=0;o<i.length;o+=2)n.push(String.fromCharCode(parseInt(i.substr(o,2),16)));return n.join("")},nm.prototype.processOwnerPassword=function(i,n){return Ov(kv(n).substr(0,5),i)},nm.prototype.encryptor=function(i,n){var o=kv(this.encryptionKey+String.fromCharCode(255&i,i>>8&255,i>>16&255,255&n,n>>8&255)).substr(0,10);return function(c){return Ov(o,c)}},S_.prototype.equals=function(i){var n,o="id,objectNumber,equals";if(!i||oa(i)!==oa(this))return!1;var c=0;for(n in this)if(!(o.indexOf(n)>=0)){if(this.hasOwnProperty(n)&&!i.hasOwnProperty(n)||this[n]!==i[n])return!1;c++}for(n in i)i.hasOwnProperty(n)&&o.indexOf(n)<0&&c--;return c===0},hn.API={events:[]},hn.version="4.2.0";var Qs=hn.API,Ux=1,Zd=function(i){return i.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Xp=function(i){return i.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Gd=function(i){return i.toString().replace(/#/g,"#23").replace(/[\s\n\r()<>[\]{}\/%]/g,function(n){var o=n.charCodeAt(0).toString(16).toUpperCase();return"#"+(o.length===1?"0"+o:o)})},zn=function(i){return i.toFixed(2)},Vf=function(i){return i.toFixed(5)};Qs.__acroform__={};var yc=function(i,n){i.prototype=Object.create(n.prototype),i.prototype.constructor=i},Iw=function(i){return i*Ux},wh=function(i){var n=new Z5,o=en.internal.getHeight(i)||0,c=en.internal.getWidth(i)||0;return n.BBox=[0,0,Number(zn(c)),Number(zn(o))],n},yM=Qs.__acroform__.setBit=function(i,n){if(i=i||0,n=n||0,isNaN(i)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return i|1<<n},_M=Qs.__acroform__.clearBit=function(i,n){if(i=i||0,n=n||0,isNaN(i)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return i&~(1<<n)},vM=Qs.__acroform__.getBit=function(i,n){if(isNaN(i)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return i&1<<n?1:0},no=Qs.__acroform__.getBitForPdf=function(i,n){if(isNaN(i)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return vM(i,n-1)},io=Qs.__acroform__.setBitForPdf=function(i,n){if(isNaN(i)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return yM(i,n-1)},ao=Qs.__acroform__.clearBitForPdf=function(i,n){if(isNaN(i)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return _M(i,n-1)},xM=Qs.__acroform__.calculateCoordinates=function(i,n){var o=n.internal.getHorizontalCoordinate,c=n.internal.getVerticalCoordinate,m=i[0],y=i[1],v=i[2],A=i[3],S={};return S.lowerLeft_X=o(m)||0,S.lowerLeft_Y=c(y+A)||0,S.upperRight_X=o(m+v)||0,S.upperRight_Y=c(y)||0,[Number(zn(S.lowerLeft_X)),Number(zn(S.lowerLeft_Y)),Number(zn(S.upperRight_X)),Number(zn(S.upperRight_Y))]},bM=function(i){if(i.appearanceStreamContent)return i.appearanceStreamContent;if(i.V||i.DV){var n=[],o=i._V||i.DV,c=zv(i,o),m=i.scope.internal.getFont(i.fontName,i.fontStyle).id;n.push("/Tx BMC"),n.push("q"),n.push("BT"),n.push(i.scope.__private__.encodeColorString(i.color)),n.push("/"+m+" "+zn(c.fontSize)+" Tf"),n.push("1 0 0 1 0 0 Tm"),n.push(c.text),n.push("ET"),n.push("Q"),n.push("EMC");var y=wh(i);return y.scope=i.scope,y.stream=n.join(`
`),y}},zv=function(i,n){var o=i.fontSize===0?i.maxFontSize:i.fontSize,c={text:"",fontSize:""},m=(n=(n=n.substr(0,1)=="("?n.substr(1):n).substr(n.length-1)==")"?n.substr(0,n.length-1):n).split(" ");m=i.multiline?m.map(function(_e){return _e.split(`
`)}):m.map(function(_e){return[_e]});var y=o,v=en.internal.getHeight(i)||0;v=v<0?-v:v;var A=en.internal.getWidth(i)||0;A=A<0?-A:A;var S=function(_e,Te,Ye){if(_e+1<m.length){var Ve=Te+" "+m[_e+1][0];return Fy(Ve,i,Ye).width<=A-4}return!1};y++;e:for(;y>0;){n="",y--;var I,D,z=Fy("3",i,y).height,Z=i.multiline?v-y:(v-z)/2,O=Z+=2,ce=0,ie=0,W=0;if(y<=0){n=`(...) Tj
`,n+="% Width of Text: "+Fy(n,i,y=12).width+", FieldWidth:"+A+`
`;break}for(var le="",ye=0,Be=0;Be<m.length;Be++)if(m.hasOwnProperty(Be)){var Le=!1;if(m[Be].length!==1&&W!==m[Be].length-1){if((z+2)*(ye+2)+2>v)continue e;le+=m[Be][W],Le=!0,ie=Be,Be--}else{le=(le+=m[Be][W]+" ").substr(le.length-1)==" "?le.substr(0,le.length-1):le;var lt=parseInt(Be),ft=S(lt,le,y),ut=Be>=m.length-1;if(ft&&!ut){le+=" ",W=0;continue}if(ft||ut){if(ut)ie=lt;else if(i.multiline&&(z+2)*(ye+2)+2>v)continue e}else{if(!i.multiline||(z+2)*(ye+2)+2>v)continue e;ie=lt}}for(var Ne="",Ce=ce;Ce<=ie;Ce++){var _t=m[Ce];if(i.multiline){if(Ce===ie){Ne+=_t[W]+" ",W=(W+1)%_t.length;continue}if(Ce===ce){Ne+=_t[_t.length-1]+" ";continue}}Ne+=_t[0]+" "}switch(Ne=Ne.substr(Ne.length-1)==" "?Ne.substr(0,Ne.length-1):Ne,D=Fy(Ne,i,y).width,i.textAlign){case"right":I=A-D-2;break;case"center":I=(A-D)/2;break;default:I=2}n+=zn(I)+" "+zn(O)+` Td
`,n+="("+Zd(Ne)+`) Tj
`,n+=-zn(I)+` 0 Td
`,O=-(y+2),D=0,ce=Le?ie:ie+1,ye++,le=""}break}return c.text=n,c.fontSize=y,c},Fy=function(i,n,o){var c=n.scope.internal.getFont(n.fontName,n.fontStyle),m=n.scope.getStringUnitWidth(i,{font:c,fontSize:parseFloat(o),charSpace:0})*parseFloat(o);return{height:n.scope.getStringUnitWidth("3",{font:c,fontSize:parseFloat(o),charSpace:0})*parseFloat(o)*1.5,width:m}},wM={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},BM=function(i,n){var o={type:"reference",object:i};n.internal.getPageInfo(i.page).pageContext.annotations.find(function(c){return c.type===o.type&&c.object===o.object})===void 0&&n.internal.getPageInfo(i.page).pageContext.annotations.push(o)},CM=function(i,n){if(n.scope=i,i.internal!==void 0&&(i.internal.acroformPlugin===void 0||i.internal.acroformPlugin.isInitialized===!1)){if(Ku.FieldNum=0,i.internal.acroformPlugin=JSON.parse(JSON.stringify(wM)),i.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Ux=i.internal.scaleFactor,i.internal.acroformPlugin.acroFormDictionaryRoot=new X5,i.internal.acroformPlugin.acroFormDictionaryRoot.scope=i,i.internal.acroformPlugin.acroFormDictionaryRoot._eventID=i.internal.events.subscribe("postPutResources",function(){(function(o){o.internal.events.unsubscribe(o.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete o.internal.acroformPlugin.acroFormDictionaryRoot._eventID,o.internal.acroformPlugin.printedOut=!0})(i)}),i.internal.events.subscribe("buildDocument",function(){(function(o){o.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var c=o.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var m in c)if(c.hasOwnProperty(m)){var y=c[m];y.objId=void 0,y.hasAnnotation&&BM(y,o)}})(i)}),i.internal.events.subscribe("putCatalog",function(){(function(o){if(o.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");o.internal.write("/AcroForm "+o.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(i)}),i.internal.events.subscribe("postPutPages",function(o){(function(c,m){var y=!c;for(var v in c||(m.internal.newObjectDeferredBegin(m.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),m.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),c=c||m.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(c.hasOwnProperty(v)){var A=c[v],S=[],I=A.Rect;if(A.Rect&&(A.Rect=xM(A.Rect,m)),m.internal.newObjectDeferredBegin(A.objId,!0),A.DA=en.createDefaultAppearanceStream(A),oa(A)==="object"&&typeof A.getKeyValueListForStream=="function"&&(S=A.getKeyValueListForStream()),A.Rect=I,A.hasAppearanceStream&&!A.appearanceStreamContent){var D=bM(A);S.push({key:"AP",value:"<</N "+D+">>"}),m.internal.acroformPlugin.xForms.push(D)}if(A.appearanceStreamContent){var z="";for(var Z in A.appearanceStreamContent)if(A.appearanceStreamContent.hasOwnProperty(Z)){var O=A.appearanceStreamContent[Z];if(z+="/"+Z+" ",z+="<<",Object.keys(O).length>=1||Array.isArray(O)){for(var v in O)if(O.hasOwnProperty(v)){var ce=O[v];typeof ce=="function"&&(ce=ce.call(m,A)),z+="/"+v+" "+ce+" ",m.internal.acroformPlugin.xForms.indexOf(ce)>=0||m.internal.acroformPlugin.xForms.push(ce)}}else typeof(ce=O)=="function"&&(ce=ce.call(m,A)),z+="/"+v+" "+ce,m.internal.acroformPlugin.xForms.indexOf(ce)>=0||m.internal.acroformPlugin.xForms.push(ce);z+=">>"}S.push({key:"AP",value:`<<
`+z+">>"})}m.internal.putStream({additionalKeyValues:S,objectId:A.objId}),m.internal.out("endobj")}y&&(function(ie,W){for(var le in ie)if(ie.hasOwnProperty(le)){var ye=le,Be=ie[le];W.internal.newObjectDeferredBegin(Be.objId,!0),oa(Be)==="object"&&typeof Be.putStream=="function"&&Be.putStream(),delete ie[ye]}})(m.internal.acroformPlugin.xForms,m)})(o,i)}),i.internal.acroformPlugin.isInitialized=!0}},K5=Qs.__acroform__.arrayToPdfArray=function(i,n,o){var c=function(v){return v};if(Array.isArray(i)){for(var m="[",y=0;y<i.length;y++)switch(y!==0&&(m+=" "),oa(i[y])){case"boolean":case"number":case"object":m+=i[y].toString();break;case"string":i[y].substr(0,1)==="/"?m+="/"+Gd(i[y].substr(1)):(n!==void 0&&o&&(c=o.internal.getEncryptor(n)),m+="("+Zd(c(i[y].toString()))+")")}return m+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},$1=function(i,n,o){var c=function(m){return m};return n!==void 0&&o&&(c=o.internal.getEncryptor(n)),(i=i||"").toString(),"("+Zd(c(i))+")"},Bh=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(i){this._objId=i}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Bh.prototype.toString=function(){return this.objId+" 0 R"},Bh.prototype.putStream=function(){var i=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:i,objectId:this.objId}),this.scope.internal.out("endobj")},Bh.prototype.getKeyValueListForStream=function(){var i=[],n=Object.getOwnPropertyNames(this).filter(function(y){return y!="content"&&y!="appearanceStreamContent"&&y!="scope"&&y!="objId"&&y.substring(0,1)!="_"});for(var o in n)if(Object.getOwnPropertyDescriptor(this,n[o]).configurable===!1){var c=n[o],m=this[c];m&&(Array.isArray(m)?i.push({key:c,value:K5(m,this.objId,this.scope)}):m instanceof Bh?(m.scope=this.scope,i.push({key:c,value:m.objId+" 0 R"})):typeof m!="function"&&i.push({key:c,value:m}))}return i};var Z5=function(){Bh.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var i,n=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return n},set:function(o){n=o}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(o){i=o.trim()},get:function(){return i||null}})};yc(Z5,Bh);var X5=function(){Bh.call(this);var i,n=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return n.length>0?n:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return n}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(i){var o=function(c){return c};return this.scope&&(o=this.scope.internal.getEncryptor(this.objId)),"("+Zd(o(i))+")"}},set:function(o){i=o}})};yc(X5,Bh);var Ku=function i(){Bh.call(this);var n=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return n},set:function(le){if(isNaN(le))throw new Error('Invalid value "'+le+'" for attribute F supplied.');n=le}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!no(n,3)},set:function(le){le?this.F=io(n,3):this.F=ao(n,3)}});var o=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return o},set:function(le){if(isNaN(le))throw new Error('Invalid value "'+le+'" for attribute Ff supplied.');o=le}});var c=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(c.length!==0)return c},set:function(le){c=le!==void 0?le:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!c||isNaN(c[0])?0:c[0]},set:function(le){c[0]=le}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!c||isNaN(c[1])?0:c[1]},set:function(le){c[1]=le}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!c||isNaN(c[2])?0:c[2]},set:function(le){c[2]=le}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!c||isNaN(c[3])?0:c[3]},set:function(le){c[3]=le}});var m="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return m},set:function(le){switch(le){case"/Btn":case"/Tx":case"/Ch":case"/Sig":m=le;break;default:throw new Error('Invalid value "'+le+'" for attribute FT supplied.')}}});var y=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!y||y.length<1){if(this instanceof E_)return;y="FieldObject"+i.FieldNum++}var le=function(ye){return ye};return this.scope&&(le=this.scope.internal.getEncryptor(this.objId)),"("+Zd(le(y))+")"},set:function(le){y=le.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return y},set:function(le){y=le}});var v="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return v},set:function(le){v=le}});var A="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return A},set:function(le){A=le}});var S=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return S},set:function(le){S=le}});var I=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return I===void 0?50/Ux:I},set:function(le){I=le}});var D="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return D},set:function(le){D=le}});var z="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!z||this instanceof E_||this instanceof Od))return $1(z,this.objId,this.scope)},set:function(le){le=le.toString(),z=le}});var Z=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(Z)return this instanceof ml==0?$1(Z,this.objId,this.scope):Z},set:function(le){le=le.toString(),Z=this instanceof ml==0?le.substr(0,1)==="("?Xp(le.substr(1,le.length-2)):Xp(le):le}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ml==1?Xp(Z.substr(1,Z.length-1)):Z},set:function(le){le=le.toString(),Z=this instanceof ml==1?"/"+Gd(le):le}});var O=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(O)return O},set:function(le){this.V=le}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(O)return this instanceof ml==0?$1(O,this.objId,this.scope):O},set:function(le){le=le.toString(),O=this instanceof ml==0?le.substr(0,1)==="("?Xp(le.substr(1,le.length-2)):Xp(le):le}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ml==1?Xp(O.substr(1,O.length-1)):O},set:function(le){le=le.toString(),O=this instanceof ml==1?"/"+Gd(le):le}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var ce,ie=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return ie},set:function(le){le=!!le,ie=le}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(ce)return ce},set:function(le){ce=le}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!no(this.Ff,1)},set:function(le){le?this.Ff=io(this.Ff,1):this.Ff=ao(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!no(this.Ff,2)},set:function(le){le?this.Ff=io(this.Ff,2):this.Ff=ao(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!no(this.Ff,3)},set:function(le){le?this.Ff=io(this.Ff,3):this.Ff=ao(this.Ff,3)}});var W=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(W!==null)return W},set:function(le){if([0,1,2].indexOf(le)===-1)throw new Error('Invalid value "'+le+'" for attribute Q supplied.');W=le}}),Object.defineProperty(this,"textAlign",{get:function(){var le;switch(W){case 0:default:le="left";break;case 1:le="center";break;case 2:le="right"}return le},configurable:!0,enumerable:!0,set:function(le){switch(le){case"right":case 2:W=2;break;case"center":case 1:W=1;break;default:W=0}}})};yc(Ku,Bh);var um=function(){Ku.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var i=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return i},set:function(o){i=o}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return i},set:function(o){i=o}});var n=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return K5(n,this.objId,this.scope)},set:function(o){var c,m;m=[],typeof(c=o)=="string"&&(m=(function(y,v,A){A||(A=1);for(var S,I=[];S=v.exec(y);)I.push(S[A]);return I})(c,/\((.*?)\)/g)),n=m}}),this.getOptions=function(){return n},this.setOptions=function(o){n=o,this.sort&&n.sort()},this.addOption=function(o){o=(o=o||"").toString(),n.push(o),this.sort&&n.sort()},this.removeOption=function(o,c){for(c=c||!1,o=(o=o||"").toString();n.indexOf(o)!==-1&&(n.splice(n.indexOf(o),1),c!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!no(this.Ff,18)},set:function(o){o?this.Ff=io(this.Ff,18):this.Ff=ao(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!no(this.Ff,19)},set:function(o){this.combo===!0&&(o?this.Ff=io(this.Ff,19):this.Ff=ao(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!no(this.Ff,20)},set:function(o){o?(this.Ff=io(this.Ff,20),n.sort()):this.Ff=ao(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!no(this.Ff,22)},set:function(o){o?this.Ff=io(this.Ff,22):this.Ff=ao(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!no(this.Ff,23)},set:function(o){o?this.Ff=io(this.Ff,23):this.Ff=ao(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!no(this.Ff,27)},set:function(o){o?this.Ff=io(this.Ff,27):this.Ff=ao(this.Ff,27)}}),this.hasAppearanceStream=!1};yc(um,Ku);var hm=function(){um.call(this),this.fontName="helvetica",this.combo=!1};yc(hm,um);var fm=function(){hm.call(this),this.combo=!0};yc(fm,hm);var l_=function(){fm.call(this),this.edit=!0};yc(l_,fm);var ml=function(){Ku.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!no(this.Ff,15)},set:function(o){o?this.Ff=io(this.Ff,15):this.Ff=ao(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!no(this.Ff,16)},set:function(o){o?this.Ff=io(this.Ff,16):this.Ff=ao(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!no(this.Ff,17)},set:function(o){o?this.Ff=io(this.Ff,17):this.Ff=ao(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!no(this.Ff,26)},set:function(o){o?this.Ff=io(this.Ff,26):this.Ff=ao(this.Ff,26)}});var i,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(y){return y};if(this.scope&&(o=this.scope.internal.getEncryptor(this.objId)),Object.keys(n).length!==0){var c,m=[];for(c in m.push("<<"),n)m.push("/"+c+" ("+Zd(o(n[c]))+")");return m.push(">>"),m.join(`
`)}},set:function(o){oa(o)==="object"&&(n=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(o){typeof o=="string"&&(n.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return i},set:function(o){var c=o==null?"":o.toString();c.substr(0,1)==="/"&&(c=c.substr(1)),i="/"+Gd(c)}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return i.substr(1,i.length-1)},set:function(o){i="/"+Gd(o)}})};yc(ml,Ku);var A_=function(){ml.call(this),this.pushButton=!0};yc(A_,ml);var dm=function(){ml.call(this),this.radio=!0,this.pushButton=!1;var i=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return i},set:function(n){i=n!==void 0?n:[]}})};yc(dm,ml);var E_=function(){var i,n;Ku.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return i},set:function(m){i=m}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return n},set:function(m){n=m}});var o,c={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var m=function(A){return A};this.scope&&(m=this.scope.internal.getEncryptor(this.objId));var y,v=[];for(y in v.push("<<"),c)v.push("/"+y+" ("+Zd(m(c[y]))+")");return v.push(">>"),v.join(`
`)},set:function(m){oa(m)==="object"&&(c=m)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return c.CA||""},set:function(m){typeof m=="string"&&(c.CA=m)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return o},set:function(m){var y=m==null?"":m.toString();y.substr(0,1)==="/"&&(y=y.substr(1)),o="/"+Gd(y)}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return o.substr(1,o.length-1)},set:function(m){var y=m==null?"":m.toString();y.substr(0,1)==="/"&&(y=y.substr(1)),o="/"+Gd(y)}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=en.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};yc(E_,Ku),dm.prototype.setAppearance=function(i){if(!("createAppearanceStream"in i)||!("getCA"in i))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var n in this.Kids)if(this.Kids.hasOwnProperty(n)){var o=this.Kids[n];o.appearanceStreamContent=i.createAppearanceStream(o.optionName),o.caption=i.getCA()}},dm.prototype.createOption=function(i){var n=new E_;return n.Parent=this,n.optionName=i,this.Kids.push(n),SM.call(this.scope,n),n};var c_=function(){ml.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=en.CheckBox.createAppearanceStream()};yc(c_,ml);var Od=function(){Ku.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!no(this.Ff,13)},set:function(n){n?this.Ff=io(this.Ff,13):this.Ff=ao(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!no(this.Ff,21)},set:function(n){n?this.Ff=io(this.Ff,21):this.Ff=ao(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!no(this.Ff,23)},set:function(n){n?this.Ff=io(this.Ff,23):this.Ff=ao(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!no(this.Ff,24)},set:function(n){n?this.Ff=io(this.Ff,24):this.Ff=ao(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!no(this.Ff,25)},set:function(n){n?this.Ff=io(this.Ff,25):this.Ff=ao(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!no(this.Ff,26)},set:function(n){n?this.Ff=io(this.Ff,26):this.Ff=ao(this.Ff,26)}});var i=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return i},set:function(n){i=n}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return i},set:function(n){Number.isInteger(n)&&(i=n)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};yc(Od,Ku);var u_=function(){Od.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!no(this.Ff,14)},set:function(i){i?this.Ff=io(this.Ff,14):this.Ff=ao(this.Ff,14)}}),this.password=!0};yc(u_,Od);var en={CheckBox:{createAppearanceStream:function(){return{N:{On:en.CheckBox.YesNormal},D:{On:en.CheckBox.YesPushDown,Off:en.CheckBox.OffPushDown}}},YesPushDown:function(i){var n=wh(i);n.scope=i.scope;var o=[],c=i.scope.internal.getFont(i.fontName,i.fontStyle).id,m=i.scope.__private__.encodeColorString(i.color),y=zv(i,i.caption);return o.push("0.749023 g"),o.push("0 0 "+zn(en.internal.getWidth(i))+" "+zn(en.internal.getHeight(i))+" re"),o.push("f"),o.push("BMC"),o.push("q"),o.push("0 0 1 rg"),o.push("/"+c+" "+zn(y.fontSize)+" Tf "+m),o.push("BT"),o.push(y.text),o.push("ET"),o.push("Q"),o.push("EMC"),n.stream=o.join(`
`),n},YesNormal:function(i){var n=wh(i);n.scope=i.scope;var o=i.scope.internal.getFont(i.fontName,i.fontStyle).id,c=i.scope.__private__.encodeColorString(i.color),m=[],y=en.internal.getHeight(i),v=en.internal.getWidth(i),A=zv(i,i.caption);return m.push("1 g"),m.push("0 0 "+zn(v)+" "+zn(y)+" re"),m.push("f"),m.push("q"),m.push("0 0 1 rg"),m.push("0 0 "+zn(v-1)+" "+zn(y-1)+" re"),m.push("W"),m.push("n"),m.push("0 g"),m.push("BT"),m.push("/"+o+" "+zn(A.fontSize)+" Tf "+c),m.push(A.text),m.push("ET"),m.push("Q"),n.stream=m.join(`
`),n},OffPushDown:function(i){var n=wh(i);n.scope=i.scope;var o=[];return o.push("0.749023 g"),o.push("0 0 "+zn(en.internal.getWidth(i))+" "+zn(en.internal.getHeight(i))+" re"),o.push("f"),n.stream=o.join(`
`),n}},RadioButton:{Circle:{createAppearanceStream:function(i){var n={D:{Off:en.RadioButton.Circle.OffPushDown},N:{}};return n.N[i]=en.RadioButton.Circle.YesNormal,n.D[i]=en.RadioButton.Circle.YesPushDown,n},getCA:function(){return"l"},YesNormal:function(i){var n=wh(i);n.scope=i.scope;var o=[],c=en.internal.getWidth(i)<=en.internal.getHeight(i)?en.internal.getWidth(i)/4:en.internal.getHeight(i)/4;c=Number((.9*c).toFixed(5));var m=en.internal.Bezier_C,y=Number((c*m).toFixed(5));return o.push("q"),o.push("1 0 0 1 "+Vf(en.internal.getWidth(i)/2)+" "+Vf(en.internal.getHeight(i)/2)+" cm"),o.push(c+" 0 m"),o.push(c+" "+y+" "+y+" "+c+" 0 "+c+" c"),o.push("-"+y+" "+c+" -"+c+" "+y+" -"+c+" 0 c"),o.push("-"+c+" -"+y+" -"+y+" -"+c+" 0 -"+c+" c"),o.push(y+" -"+c+" "+c+" -"+y+" "+c+" 0 c"),o.push("f"),o.push("Q"),n.stream=o.join(`
`),n},YesPushDown:function(i){var n=wh(i);n.scope=i.scope;var o=[],c=en.internal.getWidth(i)<=en.internal.getHeight(i)?en.internal.getWidth(i)/4:en.internal.getHeight(i)/4;c=Number((.9*c).toFixed(5));var m=Number((2*c).toFixed(5)),y=Number((m*en.internal.Bezier_C).toFixed(5)),v=Number((c*en.internal.Bezier_C).toFixed(5));return o.push("0.749023 g"),o.push("q"),o.push("1 0 0 1 "+Vf(en.internal.getWidth(i)/2)+" "+Vf(en.internal.getHeight(i)/2)+" cm"),o.push(m+" 0 m"),o.push(m+" "+y+" "+y+" "+m+" 0 "+m+" c"),o.push("-"+y+" "+m+" -"+m+" "+y+" -"+m+" 0 c"),o.push("-"+m+" -"+y+" -"+y+" -"+m+" 0 -"+m+" c"),o.push(y+" -"+m+" "+m+" -"+y+" "+m+" 0 c"),o.push("f"),o.push("Q"),o.push("0 g"),o.push("q"),o.push("1 0 0 1 "+Vf(en.internal.getWidth(i)/2)+" "+Vf(en.internal.getHeight(i)/2)+" cm"),o.push(c+" 0 m"),o.push(c+" "+v+" "+v+" "+c+" 0 "+c+" c"),o.push("-"+v+" "+c+" -"+c+" "+v+" -"+c+" 0 c"),o.push("-"+c+" -"+v+" -"+v+" -"+c+" 0 -"+c+" c"),o.push(v+" -"+c+" "+c+" -"+v+" "+c+" 0 c"),o.push("f"),o.push("Q"),n.stream=o.join(`
`),n},OffPushDown:function(i){var n=wh(i);n.scope=i.scope;var o=[],c=en.internal.getWidth(i)<=en.internal.getHeight(i)?en.internal.getWidth(i)/4:en.internal.getHeight(i)/4;c=Number((.9*c).toFixed(5));var m=Number((2*c).toFixed(5)),y=Number((m*en.internal.Bezier_C).toFixed(5));return o.push("0.749023 g"),o.push("q"),o.push("1 0 0 1 "+Vf(en.internal.getWidth(i)/2)+" "+Vf(en.internal.getHeight(i)/2)+" cm"),o.push(m+" 0 m"),o.push(m+" "+y+" "+y+" "+m+" 0 "+m+" c"),o.push("-"+y+" "+m+" -"+m+" "+y+" -"+m+" 0 c"),o.push("-"+m+" -"+y+" -"+y+" -"+m+" 0 -"+m+" c"),o.push(y+" -"+m+" "+m+" -"+y+" "+m+" 0 c"),o.push("f"),o.push("Q"),n.stream=o.join(`
`),n}},Cross:{createAppearanceStream:function(i){var n={D:{Off:en.RadioButton.Cross.OffPushDown},N:{}};return n.N[i]=en.RadioButton.Cross.YesNormal,n.D[i]=en.RadioButton.Cross.YesPushDown,n},getCA:function(){return"8"},YesNormal:function(i){var n=wh(i);n.scope=i.scope;var o=[],c=en.internal.calculateCross(i);return o.push("q"),o.push("1 1 "+zn(en.internal.getWidth(i)-2)+" "+zn(en.internal.getHeight(i)-2)+" re"),o.push("W"),o.push("n"),o.push(zn(c.x1.x)+" "+zn(c.x1.y)+" m"),o.push(zn(c.x2.x)+" "+zn(c.x2.y)+" l"),o.push(zn(c.x4.x)+" "+zn(c.x4.y)+" m"),o.push(zn(c.x3.x)+" "+zn(c.x3.y)+" l"),o.push("s"),o.push("Q"),n.stream=o.join(`
`),n},YesPushDown:function(i){var n=wh(i);n.scope=i.scope;var o=en.internal.calculateCross(i),c=[];return c.push("0.749023 g"),c.push("0 0 "+zn(en.internal.getWidth(i))+" "+zn(en.internal.getHeight(i))+" re"),c.push("f"),c.push("q"),c.push("1 1 "+zn(en.internal.getWidth(i)-2)+" "+zn(en.internal.getHeight(i)-2)+" re"),c.push("W"),c.push("n"),c.push(zn(o.x1.x)+" "+zn(o.x1.y)+" m"),c.push(zn(o.x2.x)+" "+zn(o.x2.y)+" l"),c.push(zn(o.x4.x)+" "+zn(o.x4.y)+" m"),c.push(zn(o.x3.x)+" "+zn(o.x3.y)+" l"),c.push("s"),c.push("Q"),n.stream=c.join(`
`),n},OffPushDown:function(i){var n=wh(i);n.scope=i.scope;var o=[];return o.push("0.749023 g"),o.push("0 0 "+zn(en.internal.getWidth(i))+" "+zn(en.internal.getHeight(i))+" re"),o.push("f"),n.stream=o.join(`
`),n}}},createDefaultAppearanceStream:function(i){var n=i.scope.internal.getFont(i.fontName,i.fontStyle).id,o=i.scope.__private__.encodeColorString(i.color);return"/"+n+" "+i.fontSize+" Tf "+o}};en.internal={Bezier_C:.551915024494,calculateCross:function(i){var n=en.internal.getWidth(i),o=en.internal.getHeight(i),c=Math.min(n,o);return{x1:{x:(n-c)/2,y:(o-c)/2+c},x2:{x:(n-c)/2+c,y:(o-c)/2},x3:{x:(n-c)/2,y:(o-c)/2},x4:{x:(n-c)/2+c,y:(o-c)/2+c}}}},en.internal.getWidth=function(i){var n=0;return oa(i)==="object"&&(n=Iw(i.Rect[2])),n},en.internal.getHeight=function(i){var n=0;return oa(i)==="object"&&(n=Iw(i.Rect[3])),n};var SM=Qs.addField=function(i){if(CM(this,i),!(i instanceof Ku))throw new Error("Invalid argument passed to jsPDF.addField.");var n;return(n=i).scope.internal.acroformPlugin.printedOut&&(n.scope.internal.acroformPlugin.printedOut=!1,n.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),n.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(n),i.page=i.scope.internal.getCurrentPageInfo().pageNumber,this};Qs.AcroFormChoiceField=um,Qs.AcroFormListBox=hm,Qs.AcroFormComboBox=fm,Qs.AcroFormEditBox=l_,Qs.AcroFormButton=ml,Qs.AcroFormPushButton=A_,Qs.AcroFormRadioButton=dm,Qs.AcroFormCheckBox=c_,Qs.AcroFormTextField=Od,Qs.AcroFormPasswordField=u_,Qs.AcroFormAppearance=en,Qs.AcroForm={ChoiceField:um,ListBox:hm,ComboBox:fm,EditBox:l_,Button:ml,PushButton:A_,RadioButton:dm,CheckBox:c_,TextField:Od,PasswordField:u_,Appearance:en},hn.AcroForm={ChoiceField:um,ListBox:hm,ComboBox:fm,EditBox:l_,Button:ml,PushButton:A_,RadioButton:dm,CheckBox:c_,TextField:Od,PasswordField:u_,Appearance:en};hn.AcroForm;function W5(i){return i.reduce(function(n,o,c){return n[o]=c,n},{})}(function(i){var n="addImage_";i.__addimage__={};var o="UNKNOWN",c={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},m=i.__addimage__.getImageFileTypeByImageData=function(_e,Te){var Ye,Ve,wt,ke,ot,st=o;if((Te=Te||o)==="RGBA"||_e.data!==void 0&&_e.data instanceof Uint8ClampedArray&&"height"in _e&&"width"in _e)return"RGBA";if(ft(_e))for(ot in c)for(wt=c[ot],Ye=0;Ye<wt.length;Ye+=1){for(ke=!0,Ve=0;Ve<wt[Ye].length;Ve+=1)if(wt[Ye][Ve]!==void 0&&wt[Ye][Ve]!==_e[Ve]){ke=!1;break}if(ke===!0){st=ot;break}}else for(ot in c)for(wt=c[ot],Ye=0;Ye<wt.length;Ye+=1){for(ke=!0,Ve=0;Ve<wt[Ye].length;Ve+=1)if(wt[Ye][Ve]!==void 0&&wt[Ye][Ve]!==_e.charCodeAt(Ve)){ke=!1;break}if(ke===!0){st=ot;break}}return st===o&&Te!==o&&(st=Te),st},y=function _e(Te){for(var Ye=this.internal.write,Ve=this.internal.putStream,wt=(0,this.internal.getFilters)();wt.indexOf("FlateEncode")!==-1;)wt.splice(wt.indexOf("FlateEncode"),1);Te.objectId=this.internal.newObject();var ke=[];if(ke.push({key:"Type",value:"/XObject"}),ke.push({key:"Subtype",value:"/Image"}),ke.push({key:"Width",value:Te.width}),ke.push({key:"Height",value:Te.height}),Te.colorSpace===le.INDEXED?ke.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(Te.palette.length/3-1)+" "+("sMask"in Te&&Te.sMask!==void 0?Te.objectId+2:Te.objectId+1)+" 0 R]"}):(ke.push({key:"ColorSpace",value:"/"+Te.colorSpace}),Te.colorSpace===le.DEVICE_CMYK&&ke.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ke.push({key:"BitsPerComponent",value:Te.bitsPerComponent}),"decodeParameters"in Te&&Te.decodeParameters!==void 0&&ke.push({key:"DecodeParms",value:"<<"+Te.decodeParameters+">>"}),"transparency"in Te&&Array.isArray(Te.transparency)&&Te.transparency.length>0){for(var ot="",st=0,xt=Te.transparency.length;st<xt;st++)ot+=Te.transparency[st]+" "+Te.transparency[st]+" ";ke.push({key:"Mask",value:"["+ot+"]"})}Te.sMask!==void 0&&ke.push({key:"SMask",value:Te.objectId+1+" 0 R"});var Ct=Te.filter!==void 0?["/"+Te.filter]:void 0;if(Ve({data:Te.data,additionalKeyValues:ke,alreadyAppliedFilters:Ct,objectId:Te.objectId}),Ye("endobj"),"sMask"in Te&&Te.sMask!==void 0){var Fe,oe=(Fe=Te.sMaskBitsPerComponent)!==null&&Fe!==void 0?Fe:Te.bitsPerComponent,xe={width:Te.width,height:Te.height,colorSpace:"DeviceGray",bitsPerComponent:oe,data:Te.sMask};"filter"in Te&&(xe.decodeParameters="/Predictor ".concat(Te.predictor," /Colors 1 /BitsPerComponent ").concat(oe," /Columns ").concat(Te.width),xe.filter=Te.filter),_e.call(this,xe)}if(Te.colorSpace===le.INDEXED){var Ue=this.internal.newObject();Ve({data:Ne(new Uint8Array(Te.palette)),objectId:Ue}),Ye("endobj")}},v=function(){var _e=this.internal.collections[n+"images"];for(var Te in _e)y.call(this,_e[Te])},A=function(){var _e,Te=this.internal.collections[n+"images"],Ye=this.internal.write;for(var Ve in Te)Ye("/I"+(_e=Te[Ve]).index,_e.objectId,"0","R")},S=function(){this.internal.collections[n+"images"]||(this.internal.collections[n+"images"]={},this.internal.events.subscribe("putResources",v),this.internal.events.subscribe("putXobjectDict",A))},I=function(){var _e=this.internal.collections[n+"images"];return S.call(this),_e},D=function(){return Object.keys(this.internal.collections[n+"images"]).length},z=function(_e){return typeof i["process"+_e.toUpperCase()]=="function"},Z=function(_e){return oa(_e)==="object"&&_e.nodeType===1},O=function(_e,Te){if(_e.nodeName==="IMG"&&_e.hasAttribute("src")){var Ye=""+_e.getAttribute("src");if(Ye.indexOf("data:image/")===0)return o_(unescape(Ye).split("base64,").pop());var Ve=i.loadFile(Ye,!0);if(Ve!==void 0)return Ve}if(_e.nodeName==="CANVAS"){if(_e.width===0||_e.height===0)throw new Error("Given canvas must have data. Canvas width: "+_e.width+", height: "+_e.height);var wt;switch(Te){case"PNG":wt="image/png";break;case"WEBP":wt="image/webp";break;default:wt="image/jpeg"}return o_(_e.toDataURL(wt,1).split("base64,").pop())}},ce=function(_e){var Te=this.internal.collections[n+"images"];if(Te){for(var Ye in Te)if(_e===Te[Ye].alias)return Te[Ye]}},ie=function(_e,Te,Ye){return _e||Te||(_e=-96,Te=-96),_e<0&&(_e=-1*Ye.width*72/_e/this.internal.scaleFactor),Te<0&&(Te=-1*Ye.height*72/Te/this.internal.scaleFactor),_e===0&&(_e=Te*Ye.width/Ye.height),Te===0&&(Te=_e*Ye.height/Ye.width),[_e,Te]},W=function(_e,Te,Ye,Ve,wt,ke){var ot=ie.call(this,Ye,Ve,wt),st=this.internal.getCoordinateString,xt=this.internal.getVerticalCoordinateString,Ct=I.call(this);if(Ye=ot[0],Ve=ot[1],Ct[wt.index]=wt,ke){ke*=Math.PI/180;var Fe=Math.cos(ke),oe=Math.sin(ke),xe=function(Ge){return Ge.toFixed(4)},Ue=[xe(Fe),xe(oe),xe(-1*oe),xe(Fe),0,0,"cm"]}this.internal.write("q"),ke?(this.internal.write([1,"0","0",1,st(_e),xt(Te+Ve),"cm"].join(" ")),this.internal.write(Ue.join(" ")),this.internal.write([st(Ye),"0","0",st(Ve),"0","0","cm"].join(" "))):this.internal.write([st(Ye),"0","0",st(Ve),st(_e),xt(Te+Ve),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+wt.index+" Do"),this.internal.write("Q")},le=i.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};i.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var ye=i.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},Be=i.__addimage__.sHashCode=function(_e){var Te,Ye,Ve=0;if(typeof _e=="string")for(Ye=_e.length,Te=0;Te<Ye;Te++)Ve=(Ve<<5)-Ve+_e.charCodeAt(Te),Ve|=0;else if(ft(_e))for(Ye=_e.byteLength/2,Te=0;Te<Ye;Te++)Ve=(Ve<<5)-Ve+_e[Te],Ve|=0;return Ve},Le=i.__addimage__.validateStringAsBase64=function(_e){(_e=_e||"").toString().trim();var Te=!0;return _e.length===0&&(Te=!1),_e.length%4!=0&&(Te=!1),/^[A-Za-z0-9+/]+$/.test(_e.substr(0,_e.length-2))===!1&&(Te=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(_e.substr(-2))===!1&&(Te=!1),Te},lt=i.__addimage__.extractImageFromDataUrl=function(_e){if(_e==null||!(_e=_e.trim()).startsWith("data:"))return null;var Te=_e.indexOf(",");return Te<0?null:_e.substring(0,Te).trim().endsWith("base64")?_e.substring(Te+1):null};i.__addimage__.isArrayBuffer=function(_e){return _e instanceof ArrayBuffer};var ft=i.__addimage__.isArrayBufferView=function(_e){return _e instanceof Int8Array||_e instanceof Uint8Array||_e instanceof Uint8ClampedArray||_e instanceof Int16Array||_e instanceof Uint16Array||_e instanceof Int32Array||_e instanceof Uint32Array||_e instanceof Float32Array||_e instanceof Float64Array},ut=i.__addimage__.binaryStringToUint8Array=function(_e){for(var Te=_e.length,Ye=new Uint8Array(Te),Ve=0;Ve<Te;Ve++)Ye[Ve]=_e.charCodeAt(Ve);return Ye},Ne=i.__addimage__.arrayBufferToBinaryString=function(_e){for(var Te="",Ye=ft(_e)?_e:new Uint8Array(_e),Ve=0;Ve<Ye.length;Ve+=8192)Te+=String.fromCharCode.apply(null,Ye.subarray(Ve,Ve+8192));return Te};i.addImage=function(){var _e,Te,Ye,Ve,wt,ke,ot,st,xt;if(typeof arguments[1]=="number"?(Te=o,Ye=arguments[1],Ve=arguments[2],wt=arguments[3],ke=arguments[4],ot=arguments[5],st=arguments[6],xt=arguments[7]):(Te=arguments[1],Ye=arguments[2],Ve=arguments[3],wt=arguments[4],ke=arguments[5],ot=arguments[6],st=arguments[7],xt=arguments[8]),oa(_e=arguments[0])==="object"&&!Z(_e)&&"imageData"in _e){var Ct=_e;_e=Ct.imageData,Te=Ct.format||Te||o,Ye=Ct.x||Ye||0,Ve=Ct.y||Ve||0,wt=Ct.w||Ct.width||wt,ke=Ct.h||Ct.height||ke,ot=Ct.alias||ot,st=Ct.compression||st,xt=Ct.rotation||Ct.angle||xt}var Fe=this.internal.getFilters();if(st===void 0&&Fe.indexOf("FlateEncode")!==-1&&(st="SLOW"),isNaN(Ye)||isNaN(Ve))throw new Error("Invalid coordinates passed to jsPDF.addImage");S.call(this);var oe=Ce.call(this,_e,Te,ot,st);return W.call(this,Ye,Ve,wt,ke,oe,xt),this};var Ce=function(_e,Te,Ye,Ve){var wt,ke,ot;if(typeof _e=="string"&&m(_e)===o){_e=unescape(_e);var st=_t(_e,!1);(st!==""||(st=i.loadFile(_e,!0))!==void 0)&&(_e=st)}if(Z(_e)&&(_e=O(_e,Te)),Te=m(_e,Te),!z(Te))throw new Error("addImage does not support files of type '"+Te+"', please ensure that a plugin for '"+Te+"' support is added.");if(((ot=Ye)==null||ot.length===0)&&(Ye=(function(xt){return typeof xt=="string"||ft(xt)?Be(xt):ft(xt.data)?Be(xt.data):null})(_e)),(wt=ce.call(this,Ye))||(_e instanceof Uint8Array||Te==="RGBA"||(ke=_e,_e=ut(_e)),wt=this["process"+Te.toUpperCase()](_e,D.call(this),Ye,(function(xt){return xt&&typeof xt=="string"&&(xt=xt.toUpperCase()),xt in i.image_compression?xt:ye.NONE})(Ve),ke)),!wt)throw new Error("An unknown error occurred whilst processing the image.");return wt},_t=i.__addimage__.convertBase64ToBinaryString=function(_e,Te){Te=typeof Te!="boolean"||Te;var Ye,Ve="";if(typeof _e=="string"){var wt;Ye=(wt=lt(_e))!==null&&wt!==void 0?wt:_e;try{Ve=o_(Ye)}catch(ke){if(Te)throw Le(Ye)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ke.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Ve};i.getImageProperties=function(_e){var Te,Ye,Ve="";if(Z(_e)&&(_e=O(_e)),typeof _e=="string"&&m(_e)===o&&((Ve=_t(_e,!1))===""&&(Ve=i.loadFile(_e)||""),_e=Ve),Ye=m(_e),!z(Ye))throw new Error("addImage does not support files of type '"+Ye+"', please ensure that a plugin for '"+Ye+"' support is added.");if(_e instanceof Uint8Array||(_e=ut(_e)),!(Te=this["process"+Ye.toUpperCase()](_e)))throw new Error("An unknown error occurred whilst processing the image");return Te.fileType=Ye,Te}})(hn.API),(function(i){var n=function(o){if(o!==void 0&&o!="")return!0};hn.API.events.push(["addPage",function(o){this.internal.getPageInfo(o.pageNumber).pageContext.annotations=[]}]),i.events.push(["putPage",function(o){for(var c,m,y,v=this.internal.getCoordinateString,A=this.internal.getVerticalCoordinateString,S=this.internal.getPageInfoByObjId(o.objId),I=o.pageContext.annotations,D=!1,z=0;z<I.length&&!D;z++)switch((c=I[z]).type){case"link":(n(c.options.url)||n(c.options.pageNumber))&&(D=!0);break;case"reference":case"text":case"freetext":D=!0}if(D!=0){this.internal.write("/Annots [");for(var Z=0;Z<I.length;Z++){c=I[Z];var O=this.internal.pdfEscape,ce=this.internal.getEncryptor(o.objId);switch(c.type){case"reference":this.internal.write(" "+c.object.objId+" 0 R ");break;case"text":var ie=this.internal.newAdditionalObject(),W=this.internal.newAdditionalObject(),le=this.internal.getEncryptor(ie.objId),ye=c.title||"Note";y="<</Type /Annot /Subtype /Text "+(m="/Rect ["+v(c.bounds.x)+" "+A(c.bounds.y+c.bounds.h)+" "+v(c.bounds.x+c.bounds.w)+" "+A(c.bounds.y)+"] ")+"/Contents ("+O(le(c.contents))+")",y+=" /Popup "+W.objId+" 0 R",y+=" /P "+S.objId+" 0 R",y+=" /T ("+O(le(ye))+") >>",ie.content=y;var Be=ie.objId+" 0 R";y="<</Type /Annot /Subtype /Popup "+(m="/Rect ["+v(c.bounds.x+30)+" "+A(c.bounds.y+c.bounds.h)+" "+v(c.bounds.x+c.bounds.w+30)+" "+A(c.bounds.y)+"] ")+" /Parent "+Be,c.open&&(y+=" /Open true"),y+=" >>",W.content=y,this.internal.write(ie.objId,"0 R",W.objId,"0 R");break;case"freetext":m="/Rect ["+v(c.bounds.x)+" "+A(c.bounds.y)+" "+v(c.bounds.x+c.bounds.w)+" "+A(c.bounds.y+c.bounds.h)+"] ";var Le=c.color||"#000000";y="<</Type /Annot /Subtype /FreeText "+m+"/Contents ("+O(ce(c.contents))+")",y+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+Le+")",y+=" /Border [0 0 0]",y+=" >>",this.internal.write(y);break;case"link":if(c.options.name){var lt=this.annotations._nameMap[c.options.name];c.options.pageNumber=lt.page,c.options.top=lt.y}else c.options.top||(c.options.top=0);if(m="/Rect ["+c.finalBounds.x+" "+c.finalBounds.y+" "+c.finalBounds.w+" "+c.finalBounds.h+"] ",y="",c.options.url)y="<</Type /Annot /Subtype /Link "+m+"/Border [0 0 0] /A <</S /URI /URI ("+O(ce(c.options.url))+") >>";else if(c.options.pageNumber)switch(y="<</Type /Annot /Subtype /Link "+m+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(c.options.pageNumber).objId+" 0 R",c.options.magFactor=c.options.magFactor||"XYZ",c.options.magFactor){case"Fit":y+=" /Fit]";break;case"FitH":y+=" /FitH "+c.options.top+"]";break;case"FitV":c.options.left=c.options.left||0,y+=" /FitV "+c.options.left+"]";break;default:var ft=A(c.options.top);c.options.left=c.options.left||0,c.options.zoom===void 0&&(c.options.zoom=0),y+=" /XYZ "+c.options.left+" "+ft+" "+c.options.zoom+"]"}y!=""&&(y+=" >>",this.internal.write(y))}}this.internal.write("]")}}]),i.createAnnotation=function(o){var c=this.internal.getCurrentPageInfo();switch(o.type){case"link":this.link(o.bounds.x,o.bounds.y,o.bounds.w,o.bounds.h,o);break;case"text":case"freetext":c.pageContext.annotations.push(o)}},i.link=function(o,c,m,y,v){var A=this.internal.getCurrentPageInfo(),S=this.internal.getCoordinateString,I=this.internal.getVerticalCoordinateString;A.pageContext.annotations.push({finalBounds:{x:S(o),y:I(c),w:S(o+m),h:I(c+y)},options:v,type:"link"})},i.textWithLink=function(o,c,m,y){var v,A,S=this.getTextWidth(o),I=this.internal.getLineHeight()/this.internal.scaleFactor;if(y.maxWidth!==void 0){A=y.maxWidth;var D=this.splitTextToSize(o,A).length;v=Math.ceil(I*D)}else A=S,v=I;return this.text(o,c,m,y),m+=.2*I,y.align==="center"&&(c-=S/2),y.align==="right"&&(c-=S),this.link(c,m-I,A,v,y),S},i.getTextWidth=function(o){var c=this.internal.getFontSize();return this.getStringUnitWidth(o)*c/this.internal.scaleFactor}})(hn.API),(function(i){var n={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},o={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},c={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},m=[1570,1571,1573,1575];i.__arabicParser__={};var y=i.__arabicParser__.isInArabicSubstitutionA=function(ie){return n[ie.charCodeAt(0)]!==void 0},v=i.__arabicParser__.isArabicLetter=function(ie){return typeof ie=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(ie)},A=i.__arabicParser__.isArabicEndLetter=function(ie){return v(ie)&&y(ie)&&n[ie.charCodeAt(0)].length<=2},S=i.__arabicParser__.isArabicAlfLetter=function(ie){return v(ie)&&m.indexOf(ie.charCodeAt(0))>=0};i.__arabicParser__.arabicLetterHasIsolatedForm=function(ie){return v(ie)&&y(ie)&&n[ie.charCodeAt(0)].length>=1};var I=i.__arabicParser__.arabicLetterHasFinalForm=function(ie){return v(ie)&&y(ie)&&n[ie.charCodeAt(0)].length>=2};i.__arabicParser__.arabicLetterHasInitialForm=function(ie){return v(ie)&&y(ie)&&n[ie.charCodeAt(0)].length>=3};var D=i.__arabicParser__.arabicLetterHasMedialForm=function(ie){return v(ie)&&y(ie)&&n[ie.charCodeAt(0)].length==4},z=i.__arabicParser__.resolveLigatures=function(ie){var W=0,le=o,ye="",Be=0;for(W=0;W<ie.length;W+=1)le[ie.charCodeAt(W)]!==void 0?(Be++,typeof(le=le[ie.charCodeAt(W)])=="number"&&(ye+=String.fromCharCode(le),le=o,Be=0),W===ie.length-1&&(le=o,ye+=ie.charAt(W-(Be-1)),W-=Be-1,Be=0)):(le=o,ye+=ie.charAt(W-Be),W-=Be,Be=0);return ye};i.__arabicParser__.isArabicDiacritic=function(ie){return ie!==void 0&&c[ie.charCodeAt(0)]!==void 0};var Z=i.__arabicParser__.getCorrectForm=function(ie,W,le){return v(ie)?y(ie)===!1?-1:!I(ie)||!v(W)&&!v(le)||!v(le)&&A(W)||A(ie)&&!v(W)||A(ie)&&S(W)||A(ie)&&A(W)?0:D(ie)&&v(W)&&!A(W)&&v(le)&&I(le)?3:A(ie)||!v(le)?1:2:-1},O=function(ie){var W=0,le=0,ye=0,Be="",Le="",lt="",ft=(ie=ie||"").split("\\s+"),ut=[];for(W=0;W<ft.length;W+=1){for(ut.push(""),le=0;le<ft[W].length;le+=1)Be=ft[W][le],Le=ft[W][le-1],lt=ft[W][le+1],v(Be)?(ye=Z(Be,Le,lt),ut[W]+=ye!==-1?String.fromCharCode(n[Be.charCodeAt(0)][ye]):Be):ut[W]+=Be;ut[W]=z(ut[W])}return ut.join(" ")},ce=i.__arabicParser__.processArabic=i.processArabic=function(){var ie,W=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,le=[];if(Array.isArray(W)){var ye=0;for(le=[],ye=0;ye<W.length;ye+=1)Array.isArray(W[ye])?le.push([O(W[ye][0]),W[ye][1],W[ye][2]]):le.push([O(W[ye])]);ie=le}else ie=O(W);return typeof arguments[0]=="string"?ie:(arguments[0].text=ie,arguments[0])};i.events.push(["preProcessText",ce])})(hn.API),hn.API.autoPrint=function(i){var n;return(i=i||{}).variant=i.variant||"non-conform",i.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){n=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+n+" 0 R")})),this},(function(i){var n=function(){var o=void 0;Object.defineProperty(this,"pdf",{get:function(){return o},set:function(A){o=A}});var c=150;Object.defineProperty(this,"width",{get:function(){return c},set:function(A){c=isNaN(A)||Number.isInteger(A)===!1||A<0?150:A,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=c+1)}});var m=300;Object.defineProperty(this,"height",{get:function(){return m},set:function(A){m=isNaN(A)||Number.isInteger(A)===!1||A<0?300:A,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=m+1)}});var y=[];Object.defineProperty(this,"childNodes",{get:function(){return y},set:function(A){y=A}});var v={};Object.defineProperty(this,"style",{get:function(){return v},set:function(A){v=A}}),Object.defineProperty(this,"parentNode",{})};n.prototype.getContext=function(o,c){var m;if((o=o||"2d")!=="2d")return null;for(m in c)this.pdf.context2d.hasOwnProperty(m)&&(this.pdf.context2d[m]=c[m]);return this.pdf.context2d._canvas=this,this.pdf.context2d},n.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},i.events.push(["initialized",function(){this.canvas=new n,this.canvas.pdf=this}])})(hn.API),(function(i){var n={left:0,top:0,bottom:0,right:0},o=!1,c=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},n),this.internal.__cell__.margins.width=this.getPageWidth(),m.call(this))},m=function(){this.internal.__cell__.lastCell=new y,this.internal.__cell__.pages=1},y=function(){var S=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return S},set:function(ie){S=ie}});var I=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return I},set:function(ie){I=ie}});var D=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return D},set:function(ie){D=ie}});var z=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return z},set:function(ie){z=ie}});var Z=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return Z},set:function(ie){Z=ie}});var O=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return O},set:function(ie){O=ie}});var ce=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return ce},set:function(ie){ce=ie}}),this};y.prototype.clone=function(){return new y(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},y.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},i.setHeaderFunction=function(S){return c.call(this),this.internal.__cell__.headerFunction=typeof S=="function"?S:void 0,this},i.getTextDimensions=function(S,I){c.call(this);var D=(I=I||{}).fontSize||this.getFontSize(),z=I.font||this.getFont(),Z=I.scaleFactor||this.internal.scaleFactor,O=0,ce=0,ie=0,W=this;if(!Array.isArray(S)&&typeof S!="string"){if(typeof S!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");S=String(S)}var le=I.maxWidth;le>0?typeof S=="string"?S=this.splitTextToSize(S,le):Object.prototype.toString.call(S)==="[object Array]"&&(S=S.reduce(function(Be,Le){return Be.concat(W.splitTextToSize(Le,le))},[])):S=Array.isArray(S)?S:[S];for(var ye=0;ye<S.length;ye++)O<(ie=this.getStringUnitWidth(S[ye],{font:z})*D)&&(O=ie);return O!==0&&(ce=S.length),{w:O/=Z,h:Math.max((ce*D*this.getLineHeightFactor()-D*(this.getLineHeightFactor()-1))/Z,0)}},i.cellAddPage=function(){c.call(this),this.addPage();var S=this.internal.__cell__.margins||n;return this.internal.__cell__.lastCell=new y(S.left,S.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var v=i.cell=function(){var S;S=arguments[0]instanceof y?arguments[0]:new y(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),c.call(this);var I=this.internal.__cell__.lastCell,D=this.internal.__cell__.padding,z=this.internal.__cell__.margins||n,Z=this.internal.__cell__.tableHeaderRow,O=this.internal.__cell__.printHeaders;return I.lineNumber!==void 0&&(I.lineNumber===S.lineNumber?(S.x=(I.x||0)+(I.width||0),S.y=I.y||0):I.y+I.height+S.height+z.bottom>this.getPageHeight()?(this.cellAddPage(),S.y=z.top,O&&Z&&(this.printHeaderRow(S.lineNumber,!0),S.y+=Z[0].height)):S.y=I.y+I.height||S.y),S.text[0]!==void 0&&(this.rect(S.x,S.y,S.width,S.height,o===!0?"FD":void 0),S.align==="right"?this.text(S.text,S.x+S.width-D,S.y+D,{align:"right",baseline:"top"}):S.align==="center"?this.text(S.text,S.x+S.width/2,S.y+D,{align:"center",baseline:"top",maxWidth:S.width-D-D}):this.text(S.text,S.x+D,S.y+D,{align:"left",baseline:"top",maxWidth:S.width-D-D})),this.internal.__cell__.lastCell=S,this};i.table=function(S,I,D,z,Z){if(c.call(this),!D)throw new Error("No data for PDF table.");var O,ce,ie,W,le=[],ye=[],Be=[],Le={},lt={},ft=[],ut=[],Ne=(Z=Z||{}).autoSize||!1,Ce=Z.printHeaders!==!1,_t=Z.css&&Z.css["font-size"]!==void 0?16*Z.css["font-size"]:Z.fontSize||12,_e=Z.margins||Object.assign({width:this.getPageWidth()},n),Te=typeof Z.padding=="number"?Z.padding:3,Ye=Z.headerBackgroundColor||"#c8c8c8",Ve=Z.headerTextColor||"#000";if(m.call(this),this.internal.__cell__.printHeaders=Ce,this.internal.__cell__.margins=_e,this.internal.__cell__.table_font_size=_t,this.internal.__cell__.padding=Te,this.internal.__cell__.headerBackgroundColor=Ye,this.internal.__cell__.headerTextColor=Ve,this.setFontSize(_t),z==null)ye=le=Object.keys(D[0]),Be=le.map(function(){return"left"});else if(Array.isArray(z)&&oa(z[0])==="object")for(le=z.map(function(Ct){return Ct.name}),ye=z.map(function(Ct){return Ct.prompt||Ct.name||""}),Be=z.map(function(Ct){return Ct.align||"left"}),O=0;O<z.length;O+=1)lt[z[O].name]=.7499990551181103*z[O].width;else Array.isArray(z)&&typeof z[0]=="string"&&(ye=le=z,Be=le.map(function(){return"left"}));if(Ne||Array.isArray(z)&&typeof z[0]=="string")for(O=0;O<le.length;O+=1){for(Le[W=le[O]]=D.map(function(Ct){return Ct[W]}),this.setFont(void 0,"bold"),ft.push(this.getTextDimensions(ye[O],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),ce=Le[W],this.setFont(void 0,"normal"),ie=0;ie<ce.length;ie+=1)ft.push(this.getTextDimensions(ce[ie],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);lt[W]=Math.max.apply(null,ft)+Te+Te,ft=[]}if(Ce){var wt={};for(O=0;O<le.length;O+=1)wt[le[O]]={},wt[le[O]].text=ye[O],wt[le[O]].align=Be[O];var ke=A.call(this,wt,lt);ut=le.map(function(Ct){return new y(S,I,lt[Ct],ke,wt[Ct].text,void 0,wt[Ct].align)}),this.setTableHeaderRow(ut),this.printHeaderRow(1,!1)}var ot=z.reduce(function(Ct,Fe){return Ct[Fe.name]=Fe.align,Ct},{});for(O=0;O<D.length;O+=1){"rowStart"in Z&&Z.rowStart instanceof Function&&Z.rowStart({row:O,data:D[O]},this);var st=A.call(this,D[O],lt);for(ie=0;ie<le.length;ie+=1){var xt=D[O][le[ie]];"cellStart"in Z&&Z.cellStart instanceof Function&&Z.cellStart({row:O,col:ie,data:xt},this),v.call(this,new y(S,I,lt[le[ie]],st,xt,O+2,ot[le[ie]]))}}return this.internal.__cell__.table_x=S,this.internal.__cell__.table_y=I,this};var A=function(S,I){var D=this.internal.__cell__.padding,z=this.internal.__cell__.table_font_size,Z=this.internal.scaleFactor;return Object.keys(S).map(function(O){var ce=S[O];return this.splitTextToSize(ce.hasOwnProperty("text")?ce.text:ce,I[O]-D-D)},this).map(function(O){return this.getLineHeightFactor()*O.length*z/Z+D+D},this).reduce(function(O,ce){return Math.max(O,ce)},0)};i.setTableHeaderRow=function(S){c.call(this),this.internal.__cell__.tableHeaderRow=S},i.printHeaderRow=function(S,I){if(c.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var D;if(o=!0,typeof this.internal.__cell__.headerFunction=="function"){var z=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new y(z[0],z[1],z[2],z[3],void 0,-1)}this.setFont(void 0,"bold");for(var Z=[],O=0;O<this.internal.__cell__.tableHeaderRow.length;O+=1){D=this.internal.__cell__.tableHeaderRow[O].clone(),I&&(D.y=this.internal.__cell__.margins.top||0,Z.push(D)),D.lineNumber=S;var ce=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),v.call(this,D),this.setTextColor(ce)}Z.length>0&&this.setTableHeaderRow(Z),this.setFont(void 0,"normal"),o=!1}})(hn.API);var Y5={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},$5=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],jv=W5($5),J5=[100,200,300,400,500,600,700,800,900],EM=W5(J5);function J1(i){var n=i.family.replace(/"|'/g,"").toLowerCase(),o=(function(y){return Y5[y=y||"normal"]?y:"normal"})(i.style),c=(function(y){return y?typeof y=="number"?y>=100&&y<=900&&y%100==0?y:400:/^\d00$/.test(y)?parseInt(y):y==="bold"?700:400:400})(i.weight),m=(function(y){return typeof jv[y=y||"normal"]=="number"?y:"normal"})(i.stretch);return{family:n,style:o,weight:c,stretch:m,src:i.src||[],ref:i.ref||{name:n,style:[m,o,c].join(" ")}}}function Lw(i,n,o,c){var m;for(m=o;m>=0&&m<n.length;m+=c)if(i[n[m]])return i[n[m]];for(m=o;m>=0&&m<n.length;m-=c)if(i[n[m]])return i[n[m]]}var TM={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Mw={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Uw(i){return[i.stretch,i.style,i.weight,i.family].join(" ")}function Dw(i){return i.trimLeft()}function FM(i,n){for(var o=0;o<i.length;){if(i.charAt(o)===n)return[i.substring(0,o),i.substring(o+1)];o+=1}return null}function IM(i){var n=i.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return n===null?null:[n[0],i.substring(n[0].length)]}var Wp,Iy,Pw,Nw,Rw,ev=["times"];function Qw(i,n,o,c,m){var y=4,v=Ow;switch(m){case hn.API.image_compression.FAST:y=1,v=kw;break;case hn.API.image_compression.MEDIUM:y=6,v=zw;break;case hn.API.image_compression.SLOW:y=9,v=jw}i=(function(S,I,D,z){for(var Z,O=S.length/I,ce=new Uint8Array(S.length+O),ie=[LM,kw,Ow,zw,jw],W=0;W<O;W+=1){var le=W*I,ye=S.subarray(le,le+I);if(z)ce.set(z(ye,D,Z),le+W);else{for(var Be=ie.length,Le=[],lt=0;lt<Be;lt+=1)Le[lt]=ie[lt](ye,D,Z);var ft=UM(Le.concat());ce.set(Le[ft],le+W)}Z=ye}return ce})(i,n,Math.ceil(o*c/8),v);var A=Pv(i,{level:y});return hn.API.__addimage__.arrayBufferToBinaryString(A)}function LM(i){var n=Array.apply([],i);return n.unshift(0),n}function kw(i,n){var o=i.length,c=[];c[0]=1;for(var m=0;m<o;m+=1){var y=i[m-n]||0;c[m+1]=i[m]-y+256&255}return c}function Ow(i,n,o){var c=i.length,m=[];m[0]=2;for(var y=0;y<c;y+=1){var v=o&&o[y]||0;m[y+1]=i[y]-v+256&255}return m}function zw(i,n,o){var c=i.length,m=[];m[0]=3;for(var y=0;y<c;y+=1){var v=i[y-n]||0,A=o&&o[y]||0;m[y+1]=i[y]+256-(v+A>>>1)&255}return m}function jw(i,n,o){var c=i.length,m=[];m[0]=4;for(var y=0;y<c;y+=1){var v=MM(i[y-n]||0,o&&o[y]||0,o&&o[y-n]||0);m[y+1]=i[y]-v+256&255}return m}function MM(i,n,o){if(i===n&&n===o)return i;var c=Math.abs(n-o),m=Math.abs(i-o),y=Math.abs(i+n-o-o);return c<=m&&c<=y?i:m<=y?n:o}function UM(i){var n=i.map(function(o){return o.reduce(function(c,m){return c+Math.abs(m)},0)});return n.indexOf(Math.min.apply(null,n))}function tv(i,n,o){var c=n*o,m=Math.floor(c/8),y=16-(c-8*m+o),v=(1<<o)-1;return eC(i,m)>>y&v}function Hw(i,n,o,c){var m=o*c,y=Math.floor(m/8),v=16-(m-8*y+c),A=(1<<c)-1,S=(n&A)<<v;(function(I,D,z){if(D+1<I.byteLength)I.setUint16(D,z,!1);else{var Z=z>>8&255;I.setUint8(D,Z)}})(i,y,eC(i,y)&~(A<<v)&65535|S)}function eC(i,n){return n+1<i.byteLength?i.getUint16(n,!1):i.getUint8(n)<<8}function DM(i){var n=0;if(i[n++]!==71||i[n++]!==73||i[n++]!==70||i[n++]!==56||(i[n++]+1&253)!=56||i[n++]!==97)throw new Error("Invalid GIF 87a/89a header.");var o=i[n++]|i[n++]<<8,c=i[n++]|i[n++]<<8,m=i[n++],y=m>>7,v=1<<1+(7&m);i[n++],i[n++];var A=null,S=null;y&&(A=n,S=v,n+=3*v);var I=!0,D=[],z=0,Z=null,O=0,ce=null;for(this.width=o,this.height=c;I&&n<i.length;)switch(i[n++]){case 33:switch(i[n++]){case 255:if(i[n]!==11||i[n+1]==78&&i[n+2]==69&&i[n+3]==84&&i[n+4]==83&&i[n+5]==67&&i[n+6]==65&&i[n+7]==80&&i[n+8]==69&&i[n+9]==50&&i[n+10]==46&&i[n+11]==48&&i[n+12]==3&&i[n+13]==1&&i[n+16]==0)n+=14,ce=i[n++]|i[n++]<<8,n++;else for(n+=12;;){if(!((_e=i[n++])>=0))throw Error("Invalid block size");if(_e===0)break;n+=_e}break;case 249:if(i[n++]!==4||i[n+4]!==0)throw new Error("Invalid graphics extension block.");var ie=i[n++];z=i[n++]|i[n++]<<8,Z=i[n++],1&ie||(Z=null),O=ie>>2&7,n++;break;case 254:for(;;){if(!((_e=i[n++])>=0))throw Error("Invalid block size");if(_e===0)break;n+=_e}break;default:throw new Error("Unknown graphic control label: 0x"+i[n-1].toString(16))}break;case 44:var W=i[n++]|i[n++]<<8,le=i[n++]|i[n++]<<8,ye=i[n++]|i[n++]<<8,Be=i[n++]|i[n++]<<8,Le=i[n++],lt=Le>>6&1,ft=1<<1+(7&Le),ut=A,Ne=S,Ce=!1;Le>>7&&(Ce=!0,ut=n,Ne=ft,n+=3*ft);var _t=n;for(n++;;){var _e;if(!((_e=i[n++])>=0))throw Error("Invalid block size");if(_e===0)break;n+=_e}D.push({x:W,y:le,width:ye,height:Be,has_local_palette:Ce,palette_offset:ut,palette_size:Ne,data_offset:_t,data_length:n-_t,transparent_index:Z,interlaced:!!lt,delay:z,disposal:O});break;case 59:I=!1;break;default:throw new Error("Unknown gif block: 0x"+i[n-1].toString(16))}this.numFrames=function(){return D.length},this.loopCount=function(){return ce},this.frameInfo=function(Te){if(Te<0||Te>=D.length)throw new Error("Frame index out of range.");return D[Te]},this.decodeAndBlitFrameBGRA=function(Te,Ye){var Ve=this.frameInfo(Te),wt=Ve.width*Ve.height;if(wt>536870912)throw new Error("Image dimensions exceed 512MB, which is too large.");var ke=new Uint8Array(wt);Vw(i,Ve.data_offset,ke,wt);var ot=Ve.palette_offset,st=Ve.transparent_index;st===null&&(st=256);var xt=Ve.width,Ct=o-xt,Fe=xt,oe=4*(Ve.y*o+Ve.x),xe=4*((Ve.y+Ve.height)*o+Ve.x),Ue=oe,Ge=4*Ct;Ve.interlaced===!0&&(Ge+=4*o*7);for(var tt=8,mt=0,Pt=ke.length;mt<Pt;++mt){var Et=ke[mt];if(Fe===0&&(Fe=xt,(Ue+=Ge)>=xe&&(Ge=4*Ct+4*o*(tt-1),Ue=oe+(xt+Ct)*(tt<<1),tt>>=1)),Et===st)Ue+=4;else{var $t=i[ot+3*Et],Ar=i[ot+3*Et+1],pr=i[ot+3*Et+2];Ye[Ue++]=pr,Ye[Ue++]=Ar,Ye[Ue++]=$t,Ye[Ue++]=255}--Fe}},this.decodeAndBlitFrameRGBA=function(Te,Ye){var Ve=this.frameInfo(Te),wt=Ve.width*Ve.height;if(wt>536870912)throw new Error("Image dimensions exceed 512MB, which is too large.");var ke=new Uint8Array(wt);Vw(i,Ve.data_offset,ke,wt);var ot=Ve.palette_offset,st=Ve.transparent_index;st===null&&(st=256);var xt=Ve.width,Ct=o-xt,Fe=xt,oe=4*(Ve.y*o+Ve.x),xe=4*((Ve.y+Ve.height)*o+Ve.x),Ue=oe,Ge=4*Ct;Ve.interlaced===!0&&(Ge+=4*o*7);for(var tt=8,mt=0,Pt=ke.length;mt<Pt;++mt){var Et=ke[mt];if(Fe===0&&(Fe=xt,(Ue+=Ge)>=xe&&(Ge=4*Ct+4*o*(tt-1),Ue=oe+(xt+Ct)*(tt<<1),tt>>=1)),Et===st)Ue+=4;else{var $t=i[ot+3*Et],Ar=i[ot+3*Et+1],pr=i[ot+3*Et+2];Ye[Ue++]=$t,Ye[Ue++]=Ar,Ye[Ue++]=pr,Ye[Ue++]=255}--Fe}}}function Vw(i,n,o,c){for(var m=i[n++],y=1<<m,v=y+1,A=v+1,S=m+1,I=(1<<S)-1,D=0,z=0,Z=0,O=i[n++],ce=new Int32Array(4096),ie=null;;){for(;D<16&&O!==0;)z|=i[n++]<<D,D+=8,O===1?O=i[n++]:--O;if(D<S)break;var W=z&I;if(z>>=S,D-=S,W!==y){if(W===v)break;for(var le=W<A?W:ie,ye=0,Be=le;Be>y;)Be=ce[Be]>>8,++ye;var Le=Be;if(Z+ye+(le!==W?1:0)>c)return void Fa.log("Warning, gif stream longer than expected.");o[Z++]=Le;var lt=Z+=ye;for(le!==W&&(o[Z++]=Le),Be=le;ye--;)Be=ce[Be],o[--lt]=255&Be,Be>>=8;ie!==null&&A<4096&&(ce[A++]=ie<<8|Le,A>=I+1&&S<12&&(++S,I=I<<1|1)),ie=W}else A=v+1,I=(1<<(S=m+1))-1,ie=null}return Z!==c&&Fa.log("Warning, gif stream shorter than expected."),o}function rv(i){var n,o,c,m,y,v=Math.floor,A=new Array(64),S=new Array(64),I=new Array(64),D=new Array(64),z=new Array(65535),Z=new Array(65535),O=new Array(64),ce=new Array(64),ie=[],W=0,le=7,ye=new Array(64),Be=new Array(64),Le=new Array(64),lt=new Array(256),ft=new Array(2048),ut=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Ne=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Ce=[0,1,2,3,4,5,6,7,8,9,10,11],_t=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],_e=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Te=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Ye=[0,1,2,3,4,5,6,7,8,9,10,11],Ve=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],wt=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ke(oe,xe){for(var Ue=0,Ge=0,tt=new Array,mt=1;mt<=16;mt++){for(var Pt=1;Pt<=oe[mt];Pt++)tt[xe[Ge]]=[],tt[xe[Ge]][0]=Ue,tt[xe[Ge]][1]=mt,Ge++,Ue++;Ue*=2}return tt}function ot(oe){for(var xe=oe[0],Ue=oe[1]-1;Ue>=0;)xe&1<<Ue&&(W|=1<<le),Ue--,--le<0&&(W==255?(st(255),st(0)):st(W),le=7,W=0)}function st(oe){ie.push(oe)}function xt(oe){st(oe>>8&255),st(255&oe)}function Ct(oe,xe,Ue,Ge,tt){for(var mt,Pt=tt[0],Et=tt[240],$t=(function(lr,Zr){var Sr,Vr,Gr,mn,Cn,An,Fn,Sn,Or,gn,Je=0;for(Or=0;Or<8;++Or){Sr=lr[Je],Vr=lr[Je+1],Gr=lr[Je+2],mn=lr[Je+3],Cn=lr[Je+4],An=lr[Je+5],Fn=lr[Je+6];var ee=Sr+(Sn=lr[Je+7]),ne=Sr-Sn,Ae=Vr+Fn,De=Vr-Fn,Xe=Gr+An,At=Gr-An,bt=mn+Cn,it=mn-Cn,dt=ee+bt,jt=ee-bt,Bt=Ae+Xe,Qe=Ae-Xe;lr[Je]=dt+Bt,lr[Je+4]=dt-Bt;var ur=.707106781*(Qe+jt);lr[Je+2]=jt+ur,lr[Je+6]=jt-ur;var Xr=.382683433*((dt=it+At)-(Qe=De+ne)),Er=.5411961*dt+Xr,zr=1.306562965*Qe+Xr,Pr=.707106781*(Bt=At+De),dr=ne+Pr,mi=ne-Pr;lr[Je+5]=mi+Er,lr[Je+3]=mi-Er,lr[Je+1]=dr+zr,lr[Je+7]=dr-zr,Je+=8}for(Je=0,Or=0;Or<8;++Or){Sr=lr[Je],Vr=lr[Je+8],Gr=lr[Je+16],mn=lr[Je+24],Cn=lr[Je+32],An=lr[Je+40],Fn=lr[Je+48];var Kn=Sr+(Sn=lr[Je+56]),Jn=Sr-Sn,wi=Vr+Fn,xn=Vr-Fn,Wt=Gr+An,fn=Gr-An,li=mn+Cn,xa=mn-Cn,Wn=Kn+li,Jt=Kn-li,kr=wi+Wt,qr=wi-Wt;lr[Je]=Wn+kr,lr[Je+32]=Wn-kr;var Ji=.707106781*(qr+Jt);lr[Je+16]=Jt+Ji,lr[Je+48]=Jt-Ji;var Ko=.382683433*((Wn=xa+fn)-(qr=xn+Jn)),os=.5411961*Wn+Ko,an=1.306562965*qr+Ko,To=.707106781*(kr=fn+xn),ys=Jn+To,so=Jn-To;lr[Je+40]=so+os,lr[Je+24]=so-os,lr[Je+8]=ys+an,lr[Je+56]=ys-an,Je++}for(Or=0;Or<64;++Or)gn=lr[Or]*Zr[Or],O[Or]=gn>0?gn+.5|0:gn-.5|0;return O})(oe,xe),Ar=0;Ar<64;++Ar)ce[ut[Ar]]=$t[Ar];var pr=ce[0]-Ue;Ue=ce[0],pr==0?ot(Ge[0]):(ot(Ge[Z[mt=32767+pr]]),ot(z[mt]));for(var br=63;br>0&&ce[br]==0;)br--;if(br==0)return ot(Pt),Ue;for(var xr,Re=1;Re<=br;){for(var _r=Re;ce[Re]==0&&Re<=br;)++Re;var Qr=Re-_r;if(Qr>=16){xr=Qr>>4;for(var Wr=1;Wr<=xr;++Wr)ot(Et);Qr&=15}mt=32767+ce[Re],ot(tt[(Qr<<4)+Z[mt]]),ot(z[mt]),Re++}return br!=63&&ot(Pt),Ue}function Fe(oe){oe=Math.min(Math.max(oe,1),100),y!=oe&&((function(xe){for(var Ue=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Ge=0;Ge<64;Ge++){var tt=v((Ue[Ge]*xe+50)/100);tt=Math.min(Math.max(tt,1),255),A[ut[Ge]]=tt}for(var mt=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Pt=0;Pt<64;Pt++){var Et=v((mt[Pt]*xe+50)/100);Et=Math.min(Math.max(Et,1),255),S[ut[Pt]]=Et}for(var $t=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ar=0,pr=0;pr<8;pr++)for(var br=0;br<8;br++)I[Ar]=1/(A[ut[Ar]]*$t[pr]*$t[br]*8),D[Ar]=1/(S[ut[Ar]]*$t[pr]*$t[br]*8),Ar++})(oe<50?Math.floor(5e3/oe):Math.floor(200-2*oe)),y=oe)}this.encode=function(oe,xe){xe&&Fe(xe),ie=new Array,W=0,le=7,xt(65496),xt(65504),xt(16),st(74),st(70),st(73),st(70),st(0),st(1),st(1),st(0),xt(1),xt(1),st(0),st(0),(function(){xt(65499),xt(132),st(0);for(var Vr=0;Vr<64;Vr++)st(A[Vr]);st(1);for(var Gr=0;Gr<64;Gr++)st(S[Gr])})(),(function(Vr,Gr){xt(65472),xt(17),st(8),xt(Gr),xt(Vr),st(3),st(1),st(17),st(0),st(2),st(17),st(1),st(3),st(17),st(1)})(oe.width,oe.height),(function(){xt(65476),xt(418),st(0);for(var Vr=0;Vr<16;Vr++)st(Ne[Vr+1]);for(var Gr=0;Gr<=11;Gr++)st(Ce[Gr]);st(16);for(var mn=0;mn<16;mn++)st(_t[mn+1]);for(var Cn=0;Cn<=161;Cn++)st(_e[Cn]);st(1);for(var An=0;An<16;An++)st(Te[An+1]);for(var Fn=0;Fn<=11;Fn++)st(Ye[Fn]);st(17);for(var Sn=0;Sn<16;Sn++)st(Ve[Sn+1]);for(var Or=0;Or<=161;Or++)st(wt[Or])})(),xt(65498),xt(12),st(3),st(1),st(0),st(2),st(17),st(3),st(17),st(0),st(63),st(0);var Ue=0,Ge=0,tt=0;W=0,le=7,this.encode.displayName="_encode_";for(var mt,Pt,Et,$t,Ar,pr,br,xr,Re,_r=oe.data,Qr=oe.width,Wr=oe.height,lr=4*Qr,Zr=0;Zr<Wr;){for(mt=0;mt<lr;){for(Ar=lr*Zr+mt,br=-1,xr=0,Re=0;Re<64;Re++)pr=Ar+(xr=Re>>3)*lr+(br=4*(7&Re)),Zr+xr>=Wr&&(pr-=lr*(Zr+1+xr-Wr)),mt+br>=lr&&(pr-=mt+br-lr+4),Pt=_r[pr++],Et=_r[pr++],$t=_r[pr++],ye[Re]=(ft[Pt]+ft[Et+256|0]+ft[$t+512|0]>>16)-128,Be[Re]=(ft[Pt+768|0]+ft[Et+1024|0]+ft[$t+1280|0]>>16)-128,Le[Re]=(ft[Pt+1280|0]+ft[Et+1536|0]+ft[$t+1792|0]>>16)-128;Ue=Ct(ye,I,Ue,n,c),Ge=Ct(Be,D,Ge,o,m),tt=Ct(Le,D,tt,o,m),mt+=32}Zr+=8}if(le>=0){var Sr=[];Sr[1]=le+1,Sr[0]=(1<<le+1)-1,ot(Sr)}return xt(65497),new Uint8Array(ie)},i=i||50,(function(){for(var oe=String.fromCharCode,xe=0;xe<256;xe++)lt[xe]=oe(xe)})(),n=ke(Ne,Ce),o=ke(Te,Ye),c=ke(_t,_e),m=ke(Ve,wt),(function(){for(var oe=1,xe=2,Ue=1;Ue<=15;Ue++){for(var Ge=oe;Ge<xe;Ge++)Z[32767+Ge]=Ue,z[32767+Ge]=[],z[32767+Ge][1]=Ue,z[32767+Ge][0]=Ge;for(var tt=-(xe-1);tt<=-oe;tt++)Z[32767+tt]=Ue,z[32767+tt]=[],z[32767+tt][1]=Ue,z[32767+tt][0]=xe-1+tt;oe<<=1,xe<<=1}})(),(function(){for(var oe=0;oe<256;oe++)ft[oe]=19595*oe,ft[oe+256|0]=38470*oe,ft[oe+512|0]=7471*oe+32768,ft[oe+768|0]=-11059*oe,ft[oe+1024|0]=-21709*oe,ft[oe+1280|0]=32768*oe+8421375,ft[oe+1536|0]=-27439*oe,ft[oe+1792|0]=-5329*oe})(),Fe(i)}function Vu(i,n){if(this.pos=0,this.buffer=i,this.datav=new DataView(i.buffer),this.is_with_alpha=!!n,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Gw(i){function n(Ce){if(!Ce)throw Error("assert :P")}function o(Ce,_t,_e){for(var Te=0;4>Te;Te++)if(Ce[_t+Te]!=_e.charCodeAt(Te))return!0;return!1}function c(Ce,_t,_e,Te,Ye){for(var Ve=0;Ve<Ye;Ve++)Ce[_t+Ve]=_e[Te+Ve]}function m(Ce,_t,_e,Te){for(var Ye=0;Ye<Te;Ye++)Ce[_t+Ye]=_e}function y(Ce){return new Int32Array(Ce)}function v(Ce,_t){for(var _e=[],Te=0;Te<Ce;Te++)_e.push(new _t);return _e}function A(Ce,_t){var _e=[];return(function Te(Ye,Ve,wt){for(var ke=wt[Ve],ot=0;ot<ke&&(Ye.push(wt.length>Ve+1?[]:new _t),!(wt.length<Ve+1));ot++)Te(Ye[ot],Ve+1,wt)})(_e,0,Ce),_e}var S=function(){var Ce=this;function _t(F,U){for(var q=1<<U-1>>>0;F&q;)q>>>=1;return q?(F&q-1)+q:F}function _e(F,U,q,J,fe){n(!(J%q));do F[U+(J-=q)]=fe;while(0<J)}function Te(F,U,q,J,fe){if(n(2328>=fe),512>=fe)var pe=y(512);else if((pe=y(fe))==null)return 0;return(function(ge,we,Pe,Ke,yt,Mt){var Oe,Ze,Ft=we,Zt=1<<Pe,Ut=y(16),Vt=y(16);for(n(yt!=0),n(Ke!=null),n(ge!=null),n(0<Pe),Ze=0;Ze<yt;++Ze){if(15<Ke[Ze])return 0;++Ut[Ke[Ze]]}if(Ut[0]==yt)return 0;for(Vt[1]=0,Oe=1;15>Oe;++Oe){if(Ut[Oe]>1<<Oe)return 0;Vt[Oe+1]=Vt[Oe]+Ut[Oe]}for(Ze=0;Ze<yt;++Ze)Oe=Ke[Ze],0<Ke[Ze]&&(Mt[Vt[Oe]++]=Ze);if(Vt[15]==1)return(Ke=new Ye).g=0,Ke.value=Mt[0],_e(ge,Ft,1,Zt,Ke),Zt;var er,hr=-1,ar=Zt-1,Mr=0,Lr=1,yn=1,Dr=1<<Pe;for(Ze=0,Oe=1,yt=2;Oe<=Pe;++Oe,yt<<=1){if(Lr+=yn<<=1,0>(yn-=Ut[Oe]))return 0;for(;0<Ut[Oe];--Ut[Oe])(Ke=new Ye).g=Oe,Ke.value=Mt[Ze++],_e(ge,Ft+Mr,yt,Dr,Ke),Mr=_t(Mr,Oe)}for(Oe=Pe+1,yt=2;15>=Oe;++Oe,yt<<=1){if(Lr+=yn<<=1,0>(yn-=Ut[Oe]))return 0;for(;0<Ut[Oe];--Ut[Oe]){if(Ke=new Ye,(Mr&ar)!=hr){for(Ft+=Dr,er=1<<(hr=Oe)-Pe;15>hr&&!(0>=(er-=Ut[hr]));)++hr,er<<=1;Zt+=Dr=1<<(er=hr-Pe),ge[we+(hr=Mr&ar)].g=er+Pe,ge[we+hr].value=Ft-we-hr}Ke.g=Oe-Pe,Ke.value=Mt[Ze++],_e(ge,Ft+(Mr>>Pe),yt,Dr,Ke),Mr=_t(Mr,Oe)}}return Lr!=2*Vt[15]-1?0:Zt})(F,U,q,J,fe,pe)}function Ye(){this.value=this.g=0}function Ve(){this.value=this.g=0}function wt(){this.G=v(5,Ye),this.H=y(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=v(Ao,Ve)}function ke(F,U,q,J){n(F!=null),n(U!=null),n(2147483648>J),F.Ca=254,F.I=0,F.b=-8,F.Ka=0,F.oa=U,F.pa=q,F.Jd=U,F.Yc=q+J,F.Zc=4<=J?q+J-4+1:q,Pt(F)}function ot(F,U){for(var q=0;0<U--;)q|=$t(F,128)<<U;return q}function st(F,U){var q=ot(F,U);return Et(F)?-q:q}function xt(F,U,q,J){var fe,pe=0;for(n(F!=null),n(U!=null),n(4294967288>J),F.Sb=J,F.Ra=0,F.u=0,F.h=0,4<J&&(J=4),fe=0;fe<J;++fe)pe+=U[q+fe]<<8*fe;F.Ra=pe,F.bb=J,F.oa=U,F.pa=q}function Ct(F){for(;8<=F.u&&F.bb<F.Sb;)F.Ra>>>=8,F.Ra+=F.oa[F.pa+F.bb]<<qs-8>>>0,++F.bb,F.u-=8;Ge(F)&&(F.h=1,F.u=0)}function Fe(F,U){if(n(0<=U),!F.h&&U<=Bs){var q=Ue(F)&Gs[U];return F.u+=U,Ct(F),q}return F.h=1,F.u=0}function oe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function xe(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Ue(F){return F.Ra>>>(F.u&qs-1)>>>0}function Ge(F){return n(F.bb<=F.Sb),F.h||F.bb==F.Sb&&F.u>qs}function tt(F,U){F.u=U,F.h=Ge(F)}function mt(F){F.u>=Cl&&(n(F.u>=Cl),Ct(F))}function Pt(F){n(F!=null&&F.oa!=null),F.pa<F.Zc?(F.I=(F.oa[F.pa++]|F.I<<8)>>>0,F.b+=8):(n(F!=null&&F.oa!=null),F.pa<F.Yc?(F.b+=8,F.I=F.oa[F.pa++]|F.I<<8):F.Ka?F.b=0:(F.I<<=8,F.b+=8,F.Ka=1))}function Et(F){return ot(F,1)}function $t(F,U){var q=F.Ca;0>F.b&&Pt(F);var J=F.b,fe=q*U>>>8,pe=(F.I>>>J>fe)+0;for(pe?(q-=fe,F.I-=fe+1<<J>>>0):q=fe+1,J=q,fe=0;256<=J;)fe+=8,J>>=8;return J=7^fe+Po[J],F.b-=J,F.Ca=(q<<J)-1,pe}function Ar(F,U,q){F[U+0]=q>>24&255,F[U+1]=q>>16&255,F[U+2]=q>>8&255,F[U+3]=255&q}function pr(F,U){return F[U+0]|F[U+1]<<8}function br(F,U){return pr(F,U)|F[U+2]<<16}function xr(F,U){return pr(F,U)|pr(F,U+2)<<16}function Re(F,U){var q=1<<U;return n(F!=null),n(0<U),F.X=y(q),F.X==null?0:(F.Mb=32-U,F.Xa=U,1)}function _r(F,U){n(F!=null),n(U!=null),n(F.Xa==U.Xa),c(U.X,0,F.X,0,1<<U.Xa)}function Qr(){this.X=[],this.Xa=this.Mb=0}function Wr(F,U,q,J){n(q!=null),n(J!=null);var fe=q[0],pe=J[0];return fe==0&&(fe=(F*pe+U/2)/U),pe==0&&(pe=(U*fe+F/2)/F),0>=fe||0>=pe?0:(q[0]=fe,J[0]=pe,1)}function lr(F,U){return F+(1<<U)-1>>>U}function Zr(F,U){return((4278255360&F)+(4278255360&U)>>>0&4278255360)+((16711935&F)+(16711935&U)>>>0&16711935)>>>0}function Sr(F,U){Ce[U]=function(q,J,fe,pe,ge,we,Pe){var Ke;for(Ke=0;Ke<ge;++Ke){var yt=Ce[F](we[Pe+Ke-1],fe,pe+Ke);we[Pe+Ke]=Zr(q[J+Ke],yt)}}}function Vr(){this.ud=this.hd=this.jd=0}function Gr(F,U){return((4278124286&(F^U))>>>1)+(F&U)>>>0}function mn(F){return 0<=F&&256>F?F:0>F?0:255<F?255:void 0}function Cn(F,U){return mn(F+(F-U+.5>>1))}function An(F,U,q){return Math.abs(U-q)-Math.abs(F-q)}function Fn(F,U,q,J,fe,pe,ge){for(J=pe[ge-1],q=0;q<fe;++q)pe[ge+q]=J=Zr(F[U+q],J)}function Sn(F,U,q,J,fe){var pe;for(pe=0;pe<q;++pe){var ge=F[U+pe],we=ge>>8&255,Pe=16711935&(Pe=(Pe=16711935&ge)+((we<<16)+we));J[fe+pe]=(4278255360&ge)+Pe>>>0}}function Or(F,U){U.jd=255&F,U.hd=F>>8&255,U.ud=F>>16&255}function gn(F,U,q,J,fe,pe){var ge;for(ge=0;ge<J;++ge){var we=U[q+ge],Pe=we>>>8,Ke=we,yt=255&(yt=(yt=we>>>16)+((F.jd<<24>>24)*(Pe<<24>>24)>>>5));Ke=255&(Ke=(Ke+=(F.hd<<24>>24)*(Pe<<24>>24)>>>5)+((F.ud<<24>>24)*(yt<<24>>24)>>>5)),fe[pe+ge]=(4278255360&we)+(yt<<16)+Ke}}function Je(F,U,q,J,fe){Ce[U]=function(pe,ge,we,Pe,Ke,yt,Mt,Oe,Ze){for(Pe=Mt;Pe<Oe;++Pe)for(Mt=0;Mt<Ze;++Mt)Ke[yt++]=fe(we[J(pe[ge++])])},Ce[F]=function(pe,ge,we,Pe,Ke,yt,Mt){var Oe=8>>pe.b,Ze=pe.Ea,Ft=pe.K[0],Zt=pe.w;if(8>Oe)for(pe=(1<<pe.b)-1,Zt=(1<<Oe)-1;ge<we;++ge){var Ut,Vt=0;for(Ut=0;Ut<Ze;++Ut)Ut&pe||(Vt=J(Pe[Ke++])),yt[Mt++]=fe(Ft[Vt&Zt]),Vt>>=Oe}else Ce["VP8LMapColor"+q](Pe,Ke,Ft,Zt,yt,Mt,ge,we,Ze)}}function ee(F,U,q,J,fe){for(q=U+q;U<q;){var pe=F[U++];J[fe++]=pe>>16&255,J[fe++]=pe>>8&255,J[fe++]=255&pe}}function ne(F,U,q,J,fe){for(q=U+q;U<q;){var pe=F[U++];J[fe++]=pe>>16&255,J[fe++]=pe>>8&255,J[fe++]=255&pe,J[fe++]=pe>>24&255}}function Ae(F,U,q,J,fe){for(q=U+q;U<q;){var pe=(ge=F[U++])>>16&240|ge>>12&15,ge=240&ge|ge>>28&15;J[fe++]=pe,J[fe++]=ge}}function De(F,U,q,J,fe){for(q=U+q;U<q;){var pe=(ge=F[U++])>>16&248|ge>>13&7,ge=ge>>5&224|ge>>3&31;J[fe++]=pe,J[fe++]=ge}}function Xe(F,U,q,J,fe){for(q=U+q;U<q;){var pe=F[U++];J[fe++]=255&pe,J[fe++]=pe>>8&255,J[fe++]=pe>>16&255}}function At(F,U,q,J,fe,pe){if(pe==0)for(q=U+q;U<q;)Ar(J,((pe=F[U++])[0]>>24|pe[1]>>8&65280|pe[2]<<8&16711680|pe[3]<<24)>>>0),fe+=32;else c(J,fe,F,U,q)}function bt(F,U){Ce[U][0]=Ce[F+"0"],Ce[U][1]=Ce[F+"1"],Ce[U][2]=Ce[F+"2"],Ce[U][3]=Ce[F+"3"],Ce[U][4]=Ce[F+"4"],Ce[U][5]=Ce[F+"5"],Ce[U][6]=Ce[F+"6"],Ce[U][7]=Ce[F+"7"],Ce[U][8]=Ce[F+"8"],Ce[U][9]=Ce[F+"9"],Ce[U][10]=Ce[F+"10"],Ce[U][11]=Ce[F+"11"],Ce[U][12]=Ce[F+"12"],Ce[U][13]=Ce[F+"13"],Ce[U][14]=Ce[F+"0"],Ce[U][15]=Ce[F+"0"]}function it(F){return F==Bu||F==Kc||F==DA||F==Jl}function dt(){this.eb=[],this.size=this.A=this.fb=0}function jt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Bt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new dt,this.f.kb=new jt,this.sd=null}function Qe(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ur(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Xr(F){return alert("todo:WebPSamplerProcessPlane"),F.T}function Er(F,U){var q=F.T,J=U.ba.f.RGBA,fe=J.eb,pe=J.fb+F.ka*J.A,ge=Ba[U.ba.S],we=F.y,Pe=F.O,Ke=F.f,yt=F.N,Mt=F.ea,Oe=F.W,Ze=U.cc,Ft=U.dc,Zt=U.Mc,Ut=U.Nc,Vt=F.ka,er=F.ka+F.T,hr=F.U,ar=hr+1>>1;for(Vt==0?ge(we,Pe,null,null,Ke,yt,Mt,Oe,Ke,yt,Mt,Oe,fe,pe,null,null,hr):(ge(U.ec,U.fc,we,Pe,Ze,Ft,Zt,Ut,Ke,yt,Mt,Oe,fe,pe-J.A,fe,pe,hr),++q);Vt+2<er;Vt+=2)Ze=Ke,Ft=yt,Zt=Mt,Ut=Oe,yt+=F.Rc,Oe+=F.Rc,pe+=2*J.A,ge(we,(Pe+=2*F.fa)-F.fa,we,Pe,Ze,Ft,Zt,Ut,Ke,yt,Mt,Oe,fe,pe-J.A,fe,pe,hr);return Pe+=F.fa,F.j+er<F.o?(c(U.ec,U.fc,we,Pe,hr),c(U.cc,U.dc,Ke,yt,ar),c(U.Mc,U.Nc,Mt,Oe,ar),q--):1&er||ge(we,Pe,null,null,Ke,yt,Mt,Oe,Ke,yt,Mt,Oe,fe,pe+J.A,null,null,hr),q}function zr(F,U,q){var J=F.F,fe=[F.J];if(J!=null){var pe=F.U,ge=U.ba.S,we=ge==wu||ge==DA;U=U.ba.f.RGBA;var Pe=[0],Ke=F.ka;Pe[0]=F.T,F.Kb&&(Ke==0?--Pe[0]:(--Ke,fe[0]-=F.width),F.j+F.ka+F.T==F.o&&(Pe[0]=F.o-F.j-Ke));var yt=U.eb;Ke=U.fb+Ke*U.A,F=Il(J,fe[0],F.width,pe,Pe,yt,Ke+(we?0:3),U.A),n(q==Pe),F&&it(ge)&&tc(yt,Ke,we,pe,Pe,U.A)}return 0}function Pr(F){var U=F.ma,q=U.ba.S,J=11>q,fe=q==Es||q==Ts||q==wu||q==qc||q==12||it(q);if(U.memory=null,U.Ib=null,U.Jb=null,U.Nd=null,!Bl(U.Oa,F,fe?11:12))return 0;if(fe&&it(q)&&$A(),F.da)alert("todo:use_scaling");else{if(J){if(U.Ib=Xr,F.Kb){if(q=F.U+1>>1,U.memory=y(F.U+2*q),U.memory==null)return 0;U.ec=U.memory,U.fc=0,U.cc=U.ec,U.dc=U.fc+F.U,U.Mc=U.cc,U.Nc=U.dc+q,U.Ib=Er,$A()}}else alert("todo:EmitYUV");fe&&(U.Jb=zr,J&&js())}if(J&&!nA){for(F=0;256>F;++F)Ha[F]=89858*(F-128)+wc>>Ro,Lh[F]=-22014*(F-128)+wc,Ih[F]=-45773*(F-128),Ac[F]=113618*(F-128)+wc>>Ro;for(F=lc;F<Xs;++F)U=76283*(F-16)+wc>>Ro,Mh[F-lc]=ls(U,255),uf[F-lc]=ls(U+8>>4,15);nA=1}return 1}function dr(F){var U=F.ma,q=F.U,J=F.T;return n(!(1&F.ka)),0>=q||0>=J?0:(q=U.Ib(F,U),U.Jb!=null&&U.Jb(F,U,q),U.Dc+=q,1)}function mi(F){F.ma.memory=null}function Kn(F,U,q,J){return Fe(F,8)!=47?0:(U[0]=Fe(F,14)+1,q[0]=Fe(F,14)+1,J[0]=Fe(F,1),Fe(F,3)!=0?0:!F.h)}function Jn(F,U){if(4>F)return F+1;var q=F-2>>1;return(2+(1&F)<<q)+Fe(U,q)+1}function wi(F,U){return 120<U?U-120:1<=(q=((q=Fs[U-1])>>4)*F+(8-(15&q)))?q:1;var q}function xn(F,U,q){var J=Ue(q),fe=F[U+=255&J].g-8;return 0<fe&&(tt(q,q.u+8),J=Ue(q),U+=F[U].value,U+=J&(1<<fe)-1),tt(q,q.u+F[U].g),F[U].value}function Wt(F,U,q){return q.g+=F.g,q.value+=F.value<<U>>>0,n(8>=q.g),F.g}function fn(F,U,q){var J=F.xc;return n((U=J==0?0:F.vc[F.md*(q>>J)+(U>>J)])<F.Wb),F.Ya[U]}function li(F,U,q,J){var fe=F.ab,pe=F.c*U,ge=F.C;U=ge+U;var we=q,Pe=J;for(J=F.Ta,q=F.Ua;0<fe--;){var Ke=F.gc[fe],yt=ge,Mt=U,Oe=we,Ze=Pe,Ft=(Pe=J,we=q,Ke.Ea);switch(n(yt<Mt),n(Mt<=Ke.nc),Ke.hc){case 2:pa(Oe,Ze,(Mt-yt)*Ft,Pe,we);break;case 0:var Zt=yt,Ut=Mt,Vt=Pe,er=we,hr=(Dr=Ke).Ea;Zt==0&&(zc(Oe,Ze,null,null,1,Vt,er),Fn(Oe,Ze+1,0,0,hr-1,Vt,er+1),Ze+=hr,er+=hr,++Zt);for(var ar=1<<Dr.b,Mr=ar-1,Lr=lr(hr,Dr.b),yn=Dr.K,Dr=Dr.w+(Zt>>Dr.b)*Lr;Zt<Ut;){var Hn=yn,Li=Dr,Bn=1;for(jc(Oe,Ze,Vt,er-hr,1,Vt,er);Bn<hr;){var Fr=(Bn&~Mr)+ar;Fr>hr&&(Fr=hr),(0,el[Hn[Li++]>>8&15])(Oe,Ze+ +Bn,Vt,er+Bn-hr,Fr-Bn,Vt,er+Bn),Bn=Fr}Ze+=hr,er+=hr,++Zt&Mr||(Dr+=Lr)}Mt!=Ke.nc&&c(Pe,we-Ft,Pe,we+(Mt-yt-1)*Ft,Ft);break;case 1:for(Ft=Oe,Ut=Ze,hr=(Oe=Ke.Ea)-(er=Oe&~(Vt=(Ze=1<<Ke.b)-1)),Zt=lr(Oe,Ke.b),ar=Ke.K,Ke=Ke.w+(yt>>Ke.b)*Zt;yt<Mt;){for(Mr=ar,Lr=Ke,yn=new Vr,Dr=Ut+er,Hn=Ut+Oe;Ut<Dr;)Or(Mr[Lr++],yn),uo(yn,Ft,Ut,Ze,Pe,we),Ut+=Ze,we+=Ze;Ut<Hn&&(Or(Mr[Lr++],yn),uo(yn,Ft,Ut,hr,Pe,we),Ut+=hr,we+=hr),++yt&Vt||(Ke+=Zt)}break;case 3:if(Oe==Pe&&Ze==we&&0<Ke.b){for(Ut=Pe,Oe=Ft=we+(Mt-yt)*Ft-(er=(Mt-yt)*lr(Ke.Ea,Ke.b)),Ze=Pe,Vt=we,Zt=[],er=(hr=er)-1;0<=er;--er)Zt[er]=Ze[Vt+er];for(er=hr-1;0<=er;--er)Ut[Oe+er]=Zt[er];vu(Ke,yt,Mt,Pe,Ft,Pe,we)}else vu(Ke,yt,Mt,Oe,Ze,Pe,we)}we=J,Pe=q}Pe!=q&&c(J,q,we,Pe,pe)}function xa(F,U){var q=F.V,J=F.Ba+F.c*F.C,fe=U-F.C;if(n(U<=F.l.o),n(16>=fe),0<fe){var pe=F.l,ge=F.Ta,we=F.Ua,Pe=pe.width;if(li(F,fe,q,J),fe=we=[we],n((q=F.C)<(J=U)),n(pe.v<pe.va),J>pe.o&&(J=pe.o),q<pe.j){var Ke=pe.j-q;q=pe.j,fe[0]+=Ke*Pe}if(q>=J?q=0:(fe[0]+=4*pe.v,pe.ka=q-pe.j,pe.U=pe.va-pe.v,pe.T=J-q,q=1),q){if(we=we[0],11>(q=F.ca).S){var yt=q.f.RGBA,Mt=(J=q.S,fe=pe.U,pe=pe.T,Ke=yt.eb,yt.A),Oe=pe;for(yt=yt.fb+F.Ma*yt.A;0<Oe--;){var Ze=ge,Ft=we,Zt=fe,Ut=Ke,Vt=yt;switch(J){case xc:Xl(Ze,Ft,Zt,Ut,Vt);break;case Es:tl(Ze,Ft,Zt,Ut,Vt);break;case Bu:tl(Ze,Ft,Zt,Ut,Vt),tc(Ut,Vt,0,Zt,1,0);break;case bu:Wl(Ze,Ft,Zt,Ut,Vt);break;case Ts:At(Ze,Ft,Zt,Ut,Vt,1);break;case Kc:At(Ze,Ft,Zt,Ut,Vt,1),tc(Ut,Vt,0,Zt,1,0);break;case wu:At(Ze,Ft,Zt,Ut,Vt,0);break;case DA:At(Ze,Ft,Zt,Ut,Vt,0),tc(Ut,Vt,1,Zt,1,0);break;case qc:Sl(Ze,Ft,Zt,Ut,Vt);break;case Jl:Sl(Ze,Ft,Zt,Ut,Vt),fo(Ut,Vt,Zt,1,0);break;case UA:El(Ze,Ft,Zt,Ut,Vt);break;default:n(0)}we+=Pe,yt+=Mt}F.Ma+=pe}else alert("todo:EmitRescaledRowsYUVA");n(F.Ma<=q.height)}}F.C=U,n(F.C<=F.i)}function Wn(F){var U;if(0<F.ua)return 0;for(U=0;U<F.Wb;++U){var q=F.Ya[U].G,J=F.Ya[U].H;if(0<q[1][J[1]+0].g||0<q[2][J[2]+0].g||0<q[3][J[3]+0].g)return 0}return 1}function Jt(F,U,q,J,fe,pe){if(F.Z!=0){var ge=F.qd,we=F.rd;for(n(Ml[F.Z]!=null);U<q;++U)Ml[F.Z](ge,we,J,fe,J,fe,pe),ge=J,we=fe,fe+=pe;F.qd=ge,F.rd=we}}function kr(F,U){var q=F.l.ma,J=q.Z==0||q.Z==1?F.l.j:F.C;if(J=F.C<J?J:F.C,n(U<=F.l.o),U>J){var fe=F.l.width,pe=q.ca,ge=q.tb+fe*J,we=F.V,Pe=F.Ba+F.c*J,Ke=F.gc;n(F.ab==1),n(Ke[0].hc==3),Jo(Ke[0],J,U,we,Pe,pe,ge),Jt(q,J,U,pe,ge,fe)}F.C=F.Ma=U}function qr(F,U,q,J,fe,pe,ge){var we=F.$/J,Pe=F.$%J,Ke=F.m,yt=F.s,Mt=q+F.$,Oe=Mt;fe=q+J*fe;var Ze=q+J*pe,Ft=280+yt.ua,Zt=F.Pb?we:16777216,Ut=0<yt.ua?yt.Wa:null,Vt=yt.wc,er=Mt<Ze?fn(yt,Pe,we):null;n(F.C<pe),n(Ze<=fe);var hr=!1;e:for(;;){for(;hr||Mt<Ze;){var ar=0;if(we>=Zt){var Mr=Mt-q;n((Zt=F).Pb),Zt.wd=Zt.m,Zt.xd=Mr,0<Zt.s.ua&&_r(Zt.s.Wa,Zt.s.vb),Zt=we+Ll}if(Pe&Vt||(er=fn(yt,Pe,we)),n(er!=null),er.Qb&&(U[Mt]=er.qb,hr=!0),!hr)if(mt(Ke),er.jc){ar=Ke,Mr=U;var Lr=Mt,yn=er.pd[Ue(ar)&Ao-1];n(er.jc),256>yn.g?(tt(ar,ar.u+yn.g),Mr[Lr]=yn.value,ar=0):(tt(ar,ar.u+yn.g-256),n(256<=yn.value),ar=yn.value),ar==0&&(hr=!0)}else ar=xn(er.G[0],er.H[0],Ke);if(Ke.h)break;if(hr||256>ar){if(!hr)if(er.nd)U[Mt]=(er.qb|ar<<8)>>>0;else{if(mt(Ke),hr=xn(er.G[1],er.H[1],Ke),mt(Ke),Mr=xn(er.G[2],er.H[2],Ke),Lr=xn(er.G[3],er.H[3],Ke),Ke.h)break;U[Mt]=(Lr<<24|hr<<16|ar<<8|Mr)>>>0}if(hr=!1,++Mt,++Pe>=J&&(Pe=0,++we,ge!=null&&we<=pe&&!(we%16)&&ge(F,we),Ut!=null))for(;Oe<Mt;)ar=U[Oe++],Ut.X[(506832829*ar&4294967295)>>>Ut.Mb]=ar}else if(280>ar){if(ar=Jn(ar-256,Ke),Mr=xn(er.G[4],er.H[4],Ke),mt(Ke),Mr=wi(J,Mr=Jn(Mr,Ke)),Ke.h)break;if(Mt-q<Mr||fe-Mt<ar)break e;for(Lr=0;Lr<ar;++Lr)U[Mt+Lr]=U[Mt+Lr-Mr];for(Mt+=ar,Pe+=ar;Pe>=J;)Pe-=J,++we,ge!=null&&we<=pe&&!(we%16)&&ge(F,we);if(n(Mt<=fe),Pe&Vt&&(er=fn(yt,Pe,we)),Ut!=null)for(;Oe<Mt;)ar=U[Oe++],Ut.X[(506832829*ar&4294967295)>>>Ut.Mb]=ar}else{if(!(ar<Ft))break e;for(hr=ar-280,n(Ut!=null);Oe<Mt;)ar=U[Oe++],Ut.X[(506832829*ar&4294967295)>>>Ut.Mb]=ar;ar=Mt,n(!(hr>>>(Mr=Ut).Xa)),U[ar]=Mr.X[hr],hr=!0}hr||n(Ke.h==Ge(Ke))}if(F.Pb&&Ke.h&&Mt<fe)n(F.m.h),F.a=5,F.m=F.wd,F.$=F.xd,0<F.s.ua&&_r(F.s.vb,F.s.Wa);else{if(Ke.h)break e;ge?.(F,we>pe?pe:we),F.a=0,F.$=Mt-q}return 1}return F.a=3,0}function Ji(F){n(F!=null),F.vc=null,F.yc=null,F.Ya=null;var U=F.Wa;U!=null&&(U.X=null),F.vb=null,n(F!=null)}function Ko(){var F=new un;return F==null?null:(F.a=0,F.xb=Zs,bt("Predictor","VP8LPredictors"),bt("Predictor","VP8LPredictors_C"),bt("PredictorAdd","VP8LPredictorsAdd"),bt("PredictorAdd","VP8LPredictorsAdd_C"),pa=Sn,uo=gn,Xl=ee,tl=ne,Sl=Ae,El=De,Wl=Xe,Ce.VP8LMapColor32b=co,Ce.VP8LMapColor8b=Xa,F)}function os(F,U,q,J,fe){var pe=1,ge=[F],we=[U],Pe=J.m,Ke=J.s,yt=null,Mt=0;e:for(;;){if(q)for(;pe&&Fe(Pe,1);){var Oe=ge,Ze=we,Ft=J,Zt=1,Ut=Ft.m,Vt=Ft.gc[Ft.ab],er=Fe(Ut,2);if(Ft.Oc&1<<er)pe=0;else{switch(Ft.Oc|=1<<er,Vt.hc=er,Vt.Ea=Oe[0],Vt.nc=Ze[0],Vt.K=[null],++Ft.ab,n(4>=Ft.ab),er){case 0:case 1:Vt.b=Fe(Ut,3)+2,Zt=os(lr(Vt.Ea,Vt.b),lr(Vt.nc,Vt.b),0,Ft,Vt.K),Vt.K=Vt.K[0];break;case 3:var hr,ar=Fe(Ut,8)+1,Mr=16<ar?0:4<ar?1:2<ar?2:3;if(Oe[0]=lr(Vt.Ea,Mr),Vt.b=Mr,hr=Zt=os(ar,1,0,Ft,Vt.K)){var Lr,yn=ar,Dr=Vt,Hn=1<<(8>>Dr.b),Li=y(Hn);if(Li==null)hr=0;else{var Bn=Dr.K[0],Fr=Dr.w;for(Li[0]=Dr.K[0][0],Lr=1;Lr<1*yn;++Lr)Li[Lr]=Zr(Bn[Fr+Lr],Li[Lr-1]);for(;Lr<4*Hn;++Lr)Li[Lr]=0;Dr.K[0]=null,Dr.K[0]=Li,hr=1}}Zt=hr;break;case 2:break;default:n(0)}pe=Zt}}if(ge=ge[0],we=we[0],pe&&Fe(Pe,1)&&!(pe=1<=(Mt=Fe(Pe,4))&&11>=Mt)){J.a=3;break e}var vr;if(vr=pe)t:{var Qi,dn,Ln,Vn=J,bn=ge,$a=we,Bi=Mt,Ki=q,Ja=Vn.m,ma=Vn.s,Rn=[null],ii=1,ra=0,Un=Qa[Bi];r:for(;;){if(Ki&&Fe(Ja,1)){var na=Fe(Ja,3)+2,gr=lr(bn,na),yr=lr($a,na),Ei=gr*yr;if(!os(gr,yr,0,Vn,Rn))break r;for(Rn=Rn[0],ma.xc=na,Qi=0;Qi<Ei;++Qi){var yi=Rn[Qi]>>8&65535;Rn[Qi]=yi,yi>=ii&&(ii=yi+1)}}if(Ja.h)break r;for(dn=0;5>dn;++dn){var ki=ac[dn];!dn&&0<Bi&&(ki+=1<<Bi),ra<ki&&(ra=ki)}var ei=v(ii*Un,Ye),Gn=ii,Yn=v(Gn,wt);if(Yn==null)var ds=null;else n(65536>=Gn),ds=Yn;var ia=y(ra);if(ds==null||ia==null||ei==null){Vn.a=1;break r}var on=ei;for(Qi=Ln=0;Qi<ii;++Qi){var tn=ds[Qi],sn=tn.G,$n=tn.H,Qo=0,Zi=1,aa=0;for(dn=0;5>dn;++dn){ki=ac[dn],sn[dn]=on,$n[dn]=Ln,!dn&&0<Bi&&(ki+=1<<Bi);i:{var sA,oA=ki,Bc=Vn,_i=ia,Su=on,Ul=Ln,Cc=0,ko=Bc.m,$u=Fe(ko,1);if(m(_i,0,0,oA),$u){var Sc=Fe(ko,1)+1,Eu=Fe(ko,1),RA=Fe(ko,Eu==0?1:8);_i[RA]=1,Sc==2&&(_i[RA=Fe(ko,8)]=1);var Xi=1}else{var Oi=y(19),cc=Fe(ko,4)+4;if(19<cc){Bc.a=3;var _o=0;break i}for(sA=0;sA<cc;++sA)Oi[oc[sA]]=Fe(ko,3);var QA=void 0,kA=void 0,Oo=Bc,Xc=Oi,b=oA,t=_i,l=0,f=Oo.m,g=8,B=v(128,Ye);n:for(;Te(B,0,7,Xc,19);){if(Fe(f,1)){var E=2+2*Fe(f,3);if((QA=2+Fe(f,E))>b)break n}else QA=b;for(kA=0;kA<b&&QA--;){mt(f);var L=B[0+(127&Ue(f))];tt(f,f.u+L.g);var N=L.value;if(16>N)t[kA++]=N,N!=0&&(g=N);else{var H=N==16,G=N-16,$=ic[G],Y=Fe(f,Ks[G])+$;if(kA+Y>b)break n;for(var se=H?g:0;0<Y--;)t[kA++]=se}}l=1;break n}l||(Oo.a=3),Xi=l}(Xi=Xi&&!ko.h)&&(Cc=Te(Su,Ul,8,_i,oA)),Xi&&Cc!=0?_o=Cc:(Bc.a=3,_o=0)}if(_o==0)break r;if(Zi&&sc[dn]==1&&(Zi=on[Ln].g==0),Qo+=on[Ln].g,Ln+=_o,3>=dn){var de,Se=ia[0];for(de=1;de<ki;++de)ia[de]>Se&&(Se=ia[de]);aa+=Se}}if(tn.nd=Zi,tn.Qb=0,Zi&&(tn.qb=(sn[3][$n[3]+0].value<<24|sn[1][$n[1]+0].value<<16|sn[2][$n[2]+0].value)>>>0,Qo==0&&256>sn[0][$n[0]+0].value&&(tn.Qb=1,tn.qb+=sn[0][$n[0]+0].value<<8)),tn.jc=!tn.Qb&&6>aa,tn.jc){var Me,Ee=tn;for(Me=0;Me<Ao;++Me){var je=Me,et=Ee.pd[je],ze=Ee.G[0][Ee.H[0]+je];256<=ze.value?(et.g=ze.g+256,et.value=ze.value):(et.g=0,et.value=0,je>>=Wt(ze,8,et),je>>=Wt(Ee.G[1][Ee.H[1]+je],16,et),je>>=Wt(Ee.G[2][Ee.H[2]+je],0,et),Wt(Ee.G[3][Ee.H[3]+je],24,et))}}}ma.vc=Rn,ma.Wb=ii,ma.Ya=ds,ma.yc=ei,vr=1;break t}vr=0}if(!(pe=vr)){J.a=3;break e}if(0<Mt){if(Ke.ua=1<<Mt,!Re(Ke.Wa,Mt)){J.a=1,pe=0;break e}}else Ke.ua=0;var nt=J,at=ge,$e=we,gt=nt.s,Nt=gt.xc;if(nt.c=at,nt.i=$e,gt.md=lr(at,Nt),gt.wc=Nt==0?-1:(1<<Nt)-1,q){J.xb=mo;break e}if((yt=y(ge*we))==null){J.a=1,pe=0;break e}pe=(pe=qr(J,yt,0,ge,we,we,null))&&!Pe.h;break e}return pe?(fe!=null?fe[0]=yt:(n(yt==null),n(q)),J.$=0,q||Ji(Ke)):Ji(Ke),pe}function an(F,U){var q=F.c*F.i,J=q+U+16*U;return n(F.c<=U),F.V=y(J),F.V==null?(F.Ta=null,F.Ua=0,F.a=1,0):(F.Ta=F.V,F.Ua=F.Ba+q+U,1)}function To(F,U){var q=F.C,J=U-q,fe=F.V,pe=F.Ba+F.c*q;for(n(U<=F.l.o);0<J;){var ge=16<J?16:J,we=F.l.ma,Pe=F.l.width,Ke=Pe*ge,yt=we.ca,Mt=we.tb+Pe*q,Oe=F.Ta,Ze=F.Ua;li(F,ge,fe,pe),Ss(Oe,Ze,yt,Mt,Ke),Jt(we,q,q+ge,yt,Mt,Pe),J-=ge,fe+=ge*F.c,q+=ge}n(q==U),F.C=F.Ma=U}function ys(){this.ub=this.yd=this.td=this.Rb=0}function so(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function _l(){this.Fb=this.Bb=this.Cb=0,this.Zb=y(4),this.Lb=y(4)}function oo(){this.Yb=(function(){var F=[];return(function U(q,J,fe){for(var pe=fe[J],ge=0;ge<pe&&(q.push(fe.length>J+1?[]:0),!(fe.length<J+1));ge++)U(q[ge],J+1,fe)})(F,0,[3,11]),F})()}function Pi(){this.jb=y(3),this.Wc=A([4,8],oo),this.Xc=A([4,17],oo)}function xA(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new y(4),this.od=new y(4)}function Ni(){this.ld=this.La=this.dd=this.tc=0}function Zn(){this.Na=this.la=0}function ks(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Zo(){this.ad=y(384),this.Za=0,this.Ob=y(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function XA(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ni),this.Y=0,this.ya=Array(new Zo),this.aa=0,this.l=new Hl}function Fo(){this.y=y(16),this.f=y(8),this.ea=y(8)}function vl(){this.cb=this.a=0,this.sc="",this.m=new oe,this.Od=new ys,this.Kc=new so,this.ed=new xA,this.Qa=new _l,this.Ic=this.$c=this.Aa=0,this.D=new XA,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=v(8,oe),this.ia=0,this.pb=v(4,ks),this.Pa=new Pi,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Fo),this.Hd=0,this.rb=Array(new Zn),this.sb=0,this.wa=Array(new Ni),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Zo),this.L=this.aa=0,this.gd=A([4,2],Ni),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ls(F,U){return 0>F?0:F>U?U:F}function Hl(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function As(){var F=new vl;return F!=null&&(F.a=0,F.sc="OK",F.cb=0,F.Xb=0,No||(No=bA)),F}function Qn(F,U,q){return F.a==0&&(F.a=U,F.sc=q,F.cb=0),0}function ea(F,U,q){return 3<=q&&F[U+0]==157&&F[U+1]==1&&F[U+2]==42}function Vl(F,U){if(F==null)return 0;if(F.a=0,F.sc="OK",U==null)return Qn(F,2,"null VP8Io passed to VP8GetHeaders()");var q=U.data,J=U.w,fe=U.ha;if(4>fe)return Qn(F,7,"Truncated header.");var pe=q[J+0]|q[J+1]<<8|q[J+2]<<16,ge=F.Od;if(ge.Rb=!(1&pe),ge.td=pe>>1&7,ge.yd=pe>>4&1,ge.ub=pe>>5,3<ge.td)return Qn(F,3,"Incorrect keyframe parameters.");if(!ge.yd)return Qn(F,4,"Frame not displayable.");J+=3,fe-=3;var we=F.Kc;if(ge.Rb){if(7>fe)return Qn(F,7,"cannot parse picture header");if(!ea(q,J,fe))return Qn(F,3,"Bad code word");we.c=16383&(q[J+4]<<8|q[J+3]),we.Td=q[J+4]>>6,we.i=16383&(q[J+6]<<8|q[J+5]),we.Ud=q[J+6]>>6,J+=7,fe-=7,F.za=we.c+15>>4,F.Ub=we.i+15>>4,U.width=we.c,U.height=we.i,U.Da=0,U.j=0,U.v=0,U.va=U.width,U.o=U.height,U.da=0,U.ib=U.width,U.hb=U.height,U.U=U.width,U.T=U.height,m((pe=F.Pa).jb,0,255,pe.jb.length),n((pe=F.Qa)!=null),pe.Cb=0,pe.Bb=0,pe.Fb=1,m(pe.Zb,0,0,pe.Zb.length),m(pe.Lb,0,0,pe.Lb)}if(ge.ub>fe)return Qn(F,7,"bad partition length");ke(pe=F.m,q,J,ge.ub),J+=ge.ub,fe-=ge.ub,ge.Rb&&(we.Ld=Et(pe),we.Kd=Et(pe)),we=F.Qa;var Pe,Ke=F.Pa;if(n(pe!=null),n(we!=null),we.Cb=Et(pe),we.Cb){if(we.Bb=Et(pe),Et(pe)){for(we.Fb=Et(pe),Pe=0;4>Pe;++Pe)we.Zb[Pe]=Et(pe)?st(pe,7):0;for(Pe=0;4>Pe;++Pe)we.Lb[Pe]=Et(pe)?st(pe,6):0}if(we.Bb)for(Pe=0;3>Pe;++Pe)Ke.jb[Pe]=Et(pe)?ot(pe,8):255}else we.Bb=0;if(pe.Ka)return Qn(F,3,"cannot parse segment header");if((we=F.ed).zd=Et(pe),we.Tb=ot(pe,6),we.wb=ot(pe,3),we.Pc=Et(pe),we.Pc&&Et(pe)){for(Ke=0;4>Ke;++Ke)Et(pe)&&(we.vd[Ke]=st(pe,6));for(Ke=0;4>Ke;++Ke)Et(pe)&&(we.od[Ke]=st(pe,6))}if(F.L=we.Tb==0?0:we.zd?1:2,pe.Ka)return Qn(F,3,"cannot parse filter header");var yt=fe;if(fe=Pe=J,J=Pe+yt,we=yt,F.Xb=(1<<ot(F.m,2))-1,yt<3*(Ke=F.Xb))q=7;else{for(Pe+=3*Ke,we-=3*Ke,yt=0;yt<Ke;++yt){var Mt=q[fe+0]|q[fe+1]<<8|q[fe+2]<<16;Mt>we&&(Mt=we),ke(F.Jc[+yt],q,Pe,Mt),Pe+=Mt,we-=Mt,fe+=3}ke(F.Jc[+Ke],q,Pe,we),q=Pe<J?0:5}if(q!=0)return Qn(F,q,"cannot parse partitions");for(q=ot(Pe=F.m,7),fe=Et(Pe)?st(Pe,4):0,J=Et(Pe)?st(Pe,4):0,we=Et(Pe)?st(Pe,4):0,Ke=Et(Pe)?st(Pe,4):0,Pe=Et(Pe)?st(Pe,4):0,yt=F.Qa,Mt=0;4>Mt;++Mt){if(yt.Cb){var Oe=yt.Zb[Mt];yt.Fb||(Oe+=q)}else{if(0<Mt){F.pb[Mt]=F.pb[0];continue}Oe=q}var Ze=F.pb[Mt];Ze.Sc[0]=nl[ls(Oe+fe,127)],Ze.Sc[1]=Is[ls(Oe+0,127)],Ze.Eb[0]=2*nl[ls(Oe+J,127)],Ze.Eb[1]=101581*Is[ls(Oe+we,127)]>>16,8>Ze.Eb[1]&&(Ze.Eb[1]=8),Ze.Qc[0]=nl[ls(Oe+Ke,117)],Ze.Qc[1]=Is[ls(Oe+Pe,127)],Ze.lc=Oe+Pe}if(!ge.Rb)return Qn(F,4,"Not a key frame.");for(Et(pe),ge=F.Pa,q=0;4>q;++q){for(fe=0;8>fe;++fe)for(J=0;3>J;++J)for(we=0;11>we;++we)Ke=$t(pe,Si[q][fe][J][we])?ot(pe,8):Yu[q][fe][J][we],ge.Wc[q][fe].Yb[J][we]=Ke;for(fe=0;17>fe;++fe)ge.Xc[q][fe]=ge.Wc[q][kn[fe]]}return F.kc=Et(pe),F.kc&&(F.Bd=ot(pe,8)),F.cb=1}function bA(F,U,q,J,fe,pe,ge){var we=U[fe].Yb[q];for(q=0;16>fe;++fe){if(!$t(F,we[q+0]))return fe;for(;!$t(F,we[q+1]);)if(we=U[++fe].Yb[0],q=0,fe==16)return 16;var Pe=U[fe+1].Yb;if($t(F,we[q+2])){var Ke=F,yt=0;if($t(Ke,(Oe=we)[(Mt=q)+3]))if($t(Ke,Oe[Mt+6])){for(we=0,Mt=2*(yt=$t(Ke,Oe[Mt+8]))+(Oe=$t(Ke,Oe[Mt+9+yt])),yt=0,Oe=Fh[Mt];Oe[we];++we)yt+=yt+$t(Ke,Oe[we]);yt+=3+(8<<Mt)}else $t(Ke,Oe[Mt+7])?(yt=7+2*$t(Ke,165),yt+=$t(Ke,145)):yt=5+$t(Ke,159);else yt=$t(Ke,Oe[Mt+4])?3+$t(Ke,Oe[Mt+5]):2;we=Pe[2]}else yt=1,we=Pe[1];Pe=ge+Zc[fe],0>(Ke=F).b&&Pt(Ke);var Mt,Oe=Ke.b,Ze=(Mt=Ke.Ca>>1)-(Ke.I>>Oe)>>31;--Ke.b,Ke.Ca+=Ze,Ke.Ca|=1,Ke.I-=(Mt+1&Ze)<<Oe,pe[Pe]=((yt^Ze)-Ze)*J[(0<fe)+0]}return 16}function wA(F){var U=F.rb[F.sb-1];U.la=0,U.Na=0,m(F.zc,0,0,F.zc.length),F.ja=0}function cs(F,U,q,J,fe){fe=F[U+q+32*J]+(fe>>3),F[U+q+32*J]=-256&fe?0>fe?0:255:fe}function Ia(F,U,q,J,fe,pe){cs(F,U,0,q,J+fe),cs(F,U,1,q,J+pe),cs(F,U,2,q,J-pe),cs(F,U,3,q,J-fe)}function la(F){return(20091*F>>16)+F}function BA(F,U,q,J){var fe,pe=0,ge=y(16);for(fe=0;4>fe;++fe){var we=F[U+0]+F[U+8],Pe=F[U+0]-F[U+8],Ke=(35468*F[U+4]>>16)-la(F[U+12]),yt=la(F[U+4])+(35468*F[U+12]>>16);ge[pe+0]=we+yt,ge[pe+1]=Pe+Ke,ge[pe+2]=Pe-Ke,ge[pe+3]=we-yt,pe+=4,U++}for(fe=pe=0;4>fe;++fe)we=(F=ge[pe+0]+4)+ge[pe+8],Pe=F-ge[pe+8],Ke=(35468*ge[pe+4]>>16)-la(ge[pe+12]),cs(q,J,0,0,we+(yt=la(ge[pe+4])+(35468*ge[pe+12]>>16))),cs(q,J,1,0,Pe+Ke),cs(q,J,2,0,Pe-Ke),cs(q,J,3,0,we-yt),pe++,J+=32}function gu(F,U,q,J){var fe=F[U+0]+4,pe=35468*F[U+4]>>16,ge=la(F[U+4]),we=35468*F[U+1]>>16;Ia(q,J,0,fe+ge,F=la(F[U+1]),we),Ia(q,J,1,fe+pe,F,we),Ia(q,J,2,fe-pe,F,we),Ia(q,J,3,fe-ge,F,we)}function WA(F,U,q,J,fe){BA(F,U,q,J),fe&&BA(F,U+16,q,J+4)}function us(F,U,q,J){Tl(F,U+0,q,J,1),Tl(F,U+32,q,J+128,1)}function yu(F,U,q,J){var fe;for(F=F[U+0]+4,fe=0;4>fe;++fe)for(U=0;4>U;++U)cs(q,J,U,fe,F)}function CA(F,U,q,J){F[U+0]&&Ai(F,U+0,q,J),F[U+16]&&Ai(F,U+16,q,J+4),F[U+32]&&Ai(F,U+32,q,J+128),F[U+48]&&Ai(F,U+48,q,J+128+4)}function lo(F,U,q,J){var fe,pe=y(16);for(fe=0;4>fe;++fe){var ge=F[U+0+fe]+F[U+12+fe],we=F[U+4+fe]+F[U+8+fe],Pe=F[U+4+fe]-F[U+8+fe],Ke=F[U+0+fe]-F[U+12+fe];pe[0+fe]=ge+we,pe[8+fe]=ge-we,pe[4+fe]=Ke+Pe,pe[12+fe]=Ke-Pe}for(fe=0;4>fe;++fe)ge=(F=pe[0+4*fe]+3)+pe[3+4*fe],we=pe[1+4*fe]+pe[2+4*fe],Pe=pe[1+4*fe]-pe[2+4*fe],Ke=F-pe[3+4*fe],q[J+0]=ge+we>>3,q[J+16]=Ke+Pe>>3,q[J+32]=ge-we>>3,q[J+48]=Ke-Pe>>3,J+=64}function YA(F,U,q){var J,fe=U-32,pe=Wa,ge=255-F[fe-1];for(J=0;J<q;++J){var we,Pe=pe,Ke=ge+F[U-1];for(we=0;we<q;++we)F[U+we]=Pe[Ke+F[fe+we]];U+=32}}function SA(F,U){YA(F,U,4)}function _u(F,U){YA(F,U,8)}function Rc(F,U){YA(F,U,16)}function _s(F,U){var q;for(q=0;16>q;++q)c(F,U+32*q,F,U-32,16)}function EA(F,U){var q;for(q=16;0<q;--q)m(F,U,F[U-1],16),U+=32}function cn(F,U,q){var J;for(J=0;16>J;++J)m(U,q+32*J,F,16)}function hs(F,U){var q,J=16;for(q=0;16>q;++q)J+=F[U-1+32*q]+F[U+q-32];cn(J>>5,F,U)}function TA(F,U){var q,J=8;for(q=0;16>q;++q)J+=F[U-1+32*q];cn(J>>4,F,U)}function FA(F,U){var q,J=8;for(q=0;16>q;++q)J+=F[U+q-32];cn(J>>4,F,U)}function La(F,U){cn(128,F,U)}function Rr(F,U,q){return F+2*U+q+2>>2}function ja(F,U){var q,J=U-32;for(J=new Uint8Array([Rr(F[J-1],F[J+0],F[J+1]),Rr(F[J+0],F[J+1],F[J+2]),Rr(F[J+1],F[J+2],F[J+3]),Rr(F[J+2],F[J+3],F[J+4])]),q=0;4>q;++q)c(F,U+32*q,J,0,J.length)}function gi(F,U){var q=F[U-1],J=F[U-1+32],fe=F[U-1+64],pe=F[U-1+96];Ar(F,U+0,16843009*Rr(F[U-1-32],q,J)),Ar(F,U+32,16843009*Rr(q,J,fe)),Ar(F,U+64,16843009*Rr(J,fe,pe)),Ar(F,U+96,16843009*Rr(fe,pe,pe))}function Hr(F,U){var q,J=4;for(q=0;4>q;++q)J+=F[U+q-32]+F[U-1+32*q];for(J>>=3,q=0;4>q;++q)m(F,U+32*q,J,4)}function Za(F,U){var q=F[U-1+0],J=F[U-1+32],fe=F[U-1+64],pe=F[U-1-32],ge=F[U+0-32],we=F[U+1-32],Pe=F[U+2-32],Ke=F[U+3-32];F[U+0+96]=Rr(J,fe,F[U-1+96]),F[U+1+96]=F[U+0+64]=Rr(q,J,fe),F[U+2+96]=F[U+1+64]=F[U+0+32]=Rr(pe,q,J),F[U+3+96]=F[U+2+64]=F[U+1+32]=F[U+0+0]=Rr(ge,pe,q),F[U+3+64]=F[U+2+32]=F[U+1+0]=Rr(we,ge,pe),F[U+3+32]=F[U+2+0]=Rr(Pe,we,ge),F[U+3+0]=Rr(Ke,Pe,we)}function jn(F,U){var q=F[U+1-32],J=F[U+2-32],fe=F[U+3-32],pe=F[U+4-32],ge=F[U+5-32],we=F[U+6-32],Pe=F[U+7-32];F[U+0+0]=Rr(F[U+0-32],q,J),F[U+1+0]=F[U+0+32]=Rr(q,J,fe),F[U+2+0]=F[U+1+32]=F[U+0+64]=Rr(J,fe,pe),F[U+3+0]=F[U+2+32]=F[U+1+64]=F[U+0+96]=Rr(fe,pe,ge),F[U+3+32]=F[U+2+64]=F[U+1+96]=Rr(pe,ge,we),F[U+3+64]=F[U+2+96]=Rr(ge,we,Pe),F[U+3+96]=Rr(we,Pe,Pe)}function fs(F,U){var q=F[U-1+0],J=F[U-1+32],fe=F[U-1+64],pe=F[U-1-32],ge=F[U+0-32],we=F[U+1-32],Pe=F[U+2-32],Ke=F[U+3-32];F[U+0+0]=F[U+1+64]=pe+ge+1>>1,F[U+1+0]=F[U+2+64]=ge+we+1>>1,F[U+2+0]=F[U+3+64]=we+Pe+1>>1,F[U+3+0]=Pe+Ke+1>>1,F[U+0+96]=Rr(fe,J,q),F[U+0+64]=Rr(J,q,pe),F[U+0+32]=F[U+1+96]=Rr(q,pe,ge),F[U+1+32]=F[U+2+96]=Rr(pe,ge,we),F[U+2+32]=F[U+3+96]=Rr(ge,we,Pe),F[U+3+32]=Rr(we,Pe,Ke)}function Ma(F,U){var q=F[U+0-32],J=F[U+1-32],fe=F[U+2-32],pe=F[U+3-32],ge=F[U+4-32],we=F[U+5-32],Pe=F[U+6-32],Ke=F[U+7-32];F[U+0+0]=q+J+1>>1,F[U+1+0]=F[U+0+64]=J+fe+1>>1,F[U+2+0]=F[U+1+64]=fe+pe+1>>1,F[U+3+0]=F[U+2+64]=pe+ge+1>>1,F[U+0+32]=Rr(q,J,fe),F[U+1+32]=F[U+0+96]=Rr(J,fe,pe),F[U+2+32]=F[U+1+96]=Rr(fe,pe,ge),F[U+3+32]=F[U+2+96]=Rr(pe,ge,we),F[U+3+64]=Rr(ge,we,Pe),F[U+3+96]=Rr(we,Pe,Ke)}function vs(F,U){var q=F[U-1+0],J=F[U-1+32],fe=F[U-1+64],pe=F[U-1+96];F[U+0+0]=q+J+1>>1,F[U+2+0]=F[U+0+32]=J+fe+1>>1,F[U+2+32]=F[U+0+64]=fe+pe+1>>1,F[U+1+0]=Rr(q,J,fe),F[U+3+0]=F[U+1+32]=Rr(J,fe,pe),F[U+3+32]=F[U+1+64]=Rr(fe,pe,pe),F[U+3+64]=F[U+2+64]=F[U+0+96]=F[U+1+96]=F[U+2+96]=F[U+3+96]=pe}function Os(F,U){var q=F[U-1+0],J=F[U-1+32],fe=F[U-1+64],pe=F[U-1+96],ge=F[U-1-32],we=F[U+0-32],Pe=F[U+1-32],Ke=F[U+2-32];F[U+0+0]=F[U+2+32]=q+ge+1>>1,F[U+0+32]=F[U+2+64]=J+q+1>>1,F[U+0+64]=F[U+2+96]=fe+J+1>>1,F[U+0+96]=pe+fe+1>>1,F[U+3+0]=Rr(we,Pe,Ke),F[U+2+0]=Rr(ge,we,Pe),F[U+1+0]=F[U+3+32]=Rr(q,ge,we),F[U+1+32]=F[U+3+64]=Rr(J,q,ge),F[U+1+64]=F[U+3+96]=Rr(fe,J,q),F[U+1+96]=Rr(pe,fe,J)}function ri(F,U){var q;for(q=0;8>q;++q)c(F,U+32*q,F,U-32,8)}function IA(F,U){var q;for(q=0;8>q;++q)m(F,U,F[U-1],8),U+=32}function Ua(F,U,q){var J;for(J=0;8>J;++J)m(U,q+32*J,F,8)}function Xo(F,U){var q,J=8;for(q=0;8>q;++q)J+=F[U+q-32]+F[U-1+32*q];Ua(J>>4,F,U)}function xs(F,U){var q,J=4;for(q=0;8>q;++q)J+=F[U+q-32];Ua(J>>3,F,U)}function Aa(F,U){var q,J=4;for(q=0;8>q;++q)J+=F[U-1+32*q];Ua(J>>3,F,U)}function ca(F,U){Ua(128,F,U)}function Io(F,U,q){var J=F[U-q],fe=F[U+0],pe=3*(fe-J)+po[1020+F[U-2*q]-F[U+q]],ge=Gc[112+(pe+4>>3)];F[U-q]=Wa[255+J+Gc[112+(pe+3>>3)]],F[U+0]=Wa[255+fe-ge]}function xl(F,U,q,J){var fe=F[U+0],pe=F[U+q];return Yr[255+F[U-2*q]-F[U-q]]>J||Yr[255+pe-fe]>J}function Gl(F,U,q,J){return 4*Yr[255+F[U-q]-F[U+0]]+Yr[255+F[U-2*q]-F[U+q]]<=J}function Lo(F,U,q,J,fe){var pe=F[U-3*q],ge=F[U-2*q],we=F[U-q],Pe=F[U+0],Ke=F[U+q],yt=F[U+2*q],Mt=F[U+3*q];return 4*Yr[255+we-Pe]+Yr[255+ge-Ke]>J?0:Yr[255+F[U-4*q]-pe]<=fe&&Yr[255+pe-ge]<=fe&&Yr[255+ge-we]<=fe&&Yr[255+Mt-yt]<=fe&&Yr[255+yt-Ke]<=fe&&Yr[255+Ke-Pe]<=fe}function Xn(F,U,q,J){var fe=2*J+1;for(J=0;16>J;++J)Gl(F,U+J,q,fe)&&Io(F,U+J,q)}function Mo(F,U,q,J){var fe=2*J+1;for(J=0;16>J;++J)Gl(F,U+J*q,1,fe)&&Io(F,U+J*q,1)}function In(F,U,q,J){var fe;for(fe=3;0<fe;--fe)Xn(F,U+=4*q,q,J)}function pn(F,U,q,J){var fe;for(fe=3;0<fe;--fe)Mo(F,U+=4,q,J)}function Uo(F,U,q,J,fe,pe,ge,we){for(pe=2*pe+1;0<fe--;){if(Lo(F,U,q,pe,ge))if(xl(F,U,q,we))Io(F,U,q);else{var Pe=F,Ke=U,yt=q,Mt=Pe[Ke-2*yt],Oe=Pe[Ke-yt],Ze=Pe[Ke+0],Ft=Pe[Ke+yt],Zt=Pe[Ke+2*yt],Ut=27*(er=po[1020+3*(Ze-Oe)+po[1020+Mt-Ft]])+63>>7,Vt=18*er+63>>7,er=9*er+63>>7;Pe[Ke-3*yt]=Wa[255+Pe[Ke-3*yt]+er],Pe[Ke-2*yt]=Wa[255+Mt+Vt],Pe[Ke-yt]=Wa[255+Oe+Ut],Pe[Ke+0]=Wa[255+Ze-Ut],Pe[Ke+yt]=Wa[255+Ft-Vt],Pe[Ke+2*yt]=Wa[255+Zt-er]}U+=J}}function En(F,U,q,J,fe,pe,ge,we){for(pe=2*pe+1;0<fe--;){if(Lo(F,U,q,pe,ge))if(xl(F,U,q,we))Io(F,U,q);else{var Pe=F,Ke=U,yt=q,Mt=Pe[Ke-yt],Oe=Pe[Ke+0],Ze=Pe[Ke+yt],Ft=Gc[112+(4+(Zt=3*(Oe-Mt))>>3)],Zt=Gc[112+(Zt+3>>3)],Ut=Ft+1>>1;Pe[Ke-2*yt]=Wa[255+Pe[Ke-2*yt]+Ut],Pe[Ke-yt]=Wa[255+Mt+Zt],Pe[Ke+0]=Wa[255+Oe-Ft],Pe[Ke+yt]=Wa[255+Ze-Ut]}U+=J}}function LA(F,U,q,J,fe,pe){Uo(F,U,q,1,16,J,fe,pe)}function Da(F,U,q,J,fe,pe){Uo(F,U,1,q,16,J,fe,pe)}function ql(F,U,q,J,fe,pe){var ge;for(ge=3;0<ge;--ge)En(F,U+=4*q,q,1,16,J,fe,pe)}function V(F,U,q,J,fe,pe){var ge;for(ge=3;0<ge;--ge)En(F,U+=4,1,q,16,J,fe,pe)}function he(F,U,q,J,fe,pe,ge,we){Uo(F,U,fe,1,8,pe,ge,we),Uo(q,J,fe,1,8,pe,ge,we)}function qe(F,U,q,J,fe,pe,ge,we){Uo(F,U,1,fe,8,pe,ge,we),Uo(q,J,1,fe,8,pe,ge,we)}function pt(F,U,q,J,fe,pe,ge,we){En(F,U+4*fe,fe,1,8,pe,ge,we),En(q,J+4*fe,fe,1,8,pe,ge,we)}function St(F,U,q,J,fe,pe,ge,we){En(F,U+4,1,fe,8,pe,ge,we),En(q,J+4,1,fe,8,pe,ge,we)}function Kt(){this.ba=new Bt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ur,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function or(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function wr(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Br(){this.ua=0,this.Wa=new Qr,this.vb=new Qr,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new wt,this.yc=new Ye}function un(){this.xb=this.a=0,this.l=new Hl,this.ca=new Bt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new xe,this.Pb=0,this.wd=new xe,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Br,this.ab=0,this.gc=v(4,wr),this.Oc=0}function Tn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Hl,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Mn(F,U,q,J,fe,pe,ge){for(F=F==null?0:F[U+0],U=0;U<ge;++U)fe[pe+U]=F+q[J+U]&255,F=fe[pe+U]}function Nn(F,U,q,J,fe,pe,ge){var we;if(F==null)Mn(null,null,q,J,fe,pe,ge);else for(we=0;we<ge;++we)fe[pe+we]=F[U+we]+q[J+we]&255}function ua(F,U,q,J,fe,pe,ge){if(F==null)Mn(null,null,q,J,fe,pe,ge);else{var we,Pe=F[U+0],Ke=Pe,yt=Pe;for(we=0;we<ge;++we)Ke=yt+(Pe=F[U+we])-Ke,yt=q[J+we]+(-256&Ke?0>Ke?0:255:Ke)&255,Ke=Pe,fe[pe+we]=yt}}function Ci(F,U,q,J){var fe=U.width,pe=U.o;if(n(F!=null&&U!=null),0>q||0>=J||q+J>pe)return null;if(!F.Cc){if(F.ga==null){var ge;if(F.ga=new Tn,(ge=F.ga==null)||(ge=U.width*U.o,n(F.Gb.length==0),F.Gb=y(ge),F.Uc=0,F.Gb==null?ge=0:(F.mb=F.Gb,F.nb=F.Uc,F.rc=null,ge=1),ge=!ge),!ge){ge=F.ga;var we=F.Fa,Pe=F.P,Ke=F.qc,yt=F.mb,Mt=F.nb,Oe=Pe+1,Ze=Ke-1,Ft=ge.l;if(n(we!=null&&yt!=null&&U!=null),Ml[0]=null,Ml[1]=Mn,Ml[2]=Nn,Ml[3]=ua,ge.ca=yt,ge.tb=Mt,ge.c=U.width,ge.i=U.height,n(0<ge.c&&0<ge.i),1>=Ke)U=0;else if(ge.$a=3&we[Pe+0],ge.Z=we[Pe+0]>>2&3,ge.Lc=we[Pe+0]>>4&3,Pe=we[Pe+0]>>6&3,0>ge.$a||1<ge.$a||4<=ge.Z||1<ge.Lc||Pe)U=0;else if(Ft.put=dr,Ft.ac=Pr,Ft.bc=mi,Ft.ma=ge,Ft.width=U.width,Ft.height=U.height,Ft.Da=U.Da,Ft.v=U.v,Ft.va=U.va,Ft.j=U.j,Ft.o=U.o,ge.$a)e:{n(ge.$a==1),U=Ko();t:for(;;){if(U==null){U=0;break e}if(n(ge!=null),ge.mc=U,U.c=ge.c,U.i=ge.i,U.l=ge.l,U.l.ma=ge,U.l.width=ge.c,U.l.height=ge.i,U.a=0,xt(U.m,we,Oe,Ze),!os(ge.c,ge.i,1,U,null)||(U.ab==1&&U.gc[0].hc==3&&Wn(U.s)?(ge.ic=1,we=U.c*U.i,U.Ta=null,U.Ua=0,U.V=y(we),U.Ba=0,U.V==null?(U.a=1,U=0):U=1):(ge.ic=0,U=an(U,ge.c)),!U))break t;U=1;break e}ge.mc=null,U=0}else U=Ze>=ge.c*ge.i;ge=!U}if(ge)return null;F.ga.Lc!=1?F.Ga=0:J=pe-q}n(F.ga!=null),n(q+J<=pe);e:{if(U=(we=F.ga).c,pe=we.l.o,we.$a==0){if(Oe=F.rc,Ze=F.Vc,Ft=F.Fa,Pe=F.P+1+q*U,Ke=F.mb,yt=F.nb+q*U,n(Pe<=F.P+F.qc),we.Z!=0)for(n(Ml[we.Z]!=null),ge=0;ge<J;++ge)Ml[we.Z](Oe,Ze,Ft,Pe,Ke,yt,U),Oe=Ke,Ze=yt,yt+=U,Pe+=U;else for(ge=0;ge<J;++ge)c(Ke,yt,Ft,Pe,U),Oe=Ke,Ze=yt,yt+=U,Pe+=U;F.rc=Oe,F.Vc=Ze}else{if(n(we.mc!=null),U=q+J,n((ge=we.mc)!=null),n(U<=ge.i),ge.C>=U)U=1;else if(we.ic||js(),we.ic){we=ge.V,Oe=ge.Ba,Ze=ge.c;var Zt=ge.i,Ut=(Ft=1,Pe=ge.$/Ze,Ke=ge.$%Ze,yt=ge.m,Mt=ge.s,ge.$),Vt=Ze*Zt,er=Ze*U,hr=Mt.wc,ar=Ut<er?fn(Mt,Ke,Pe):null;n(Ut<=Vt),n(U<=Zt),n(Wn(Mt));t:for(;;){for(;!yt.h&&Ut<er;){if(Ke&hr||(ar=fn(Mt,Ke,Pe)),n(ar!=null),mt(yt),256>(Zt=xn(ar.G[0],ar.H[0],yt)))we[Oe+Ut]=Zt,++Ut,++Ke>=Ze&&(Ke=0,++Pe<=U&&!(Pe%16)&&kr(ge,Pe));else{if(!(280>Zt)){Ft=0;break t}Zt=Jn(Zt-256,yt);var Mr,Lr=xn(ar.G[4],ar.H[4],yt);if(mt(yt),!(Ut>=(Lr=wi(Ze,Lr=Jn(Lr,yt)))&&Vt-Ut>=Zt)){Ft=0;break t}for(Mr=0;Mr<Zt;++Mr)we[Oe+Ut+Mr]=we[Oe+Ut+Mr-Lr];for(Ut+=Zt,Ke+=Zt;Ke>=Ze;)Ke-=Ze,++Pe<=U&&!(Pe%16)&&kr(ge,Pe);Ut<er&&Ke&hr&&(ar=fn(Mt,Ke,Pe))}n(yt.h==Ge(yt))}kr(ge,Pe>U?U:Pe);break t}!Ft||yt.h&&Ut<Vt?(Ft=0,ge.a=yt.h?5:3):ge.$=Ut,U=Ft}else U=qr(ge,ge.V,ge.Ba,ge.c,ge.i,U,To);if(!U){J=0;break e}}q+J>=pe&&(F.Cc=1),J=1}if(!J)return null;if(F.Cc&&((J=F.ga)!=null&&(J.mc=null),F.ga=null,0<F.Ga))return alert("todo:WebPDequantizeLevels"),null}return F.nb+q*fe}function Pa(F,U,q,J,fe,pe){for(;0<fe--;){var ge,we=F,Pe=U+(q?1:0),Ke=F,yt=U+(q?0:3);for(ge=0;ge<J;++ge){var Mt=Ke[yt+4*ge];Mt!=255&&(Mt*=32897,we[Pe+4*ge+0]=we[Pe+4*ge+0]*Mt>>23,we[Pe+4*ge+1]=we[Pe+4*ge+1]*Mt>>23,we[Pe+4*ge+2]=we[Pe+4*ge+2]*Mt>>23)}U+=pe}}function Na(F,U,q,J,fe){for(;0<J--;){var pe;for(pe=0;pe<q;++pe){var ge=F[U+2*pe+0],we=15&(Ke=F[U+2*pe+1]),Pe=4369*we,Ke=(240&Ke|Ke>>4)*Pe>>16;F[U+2*pe+0]=(240&ge|ge>>4)*Pe>>16&240|(15&ge|ge<<4)*Pe>>16>>4&15,F[U+2*pe+1]=240&Ke|we}U+=fe}}function ha(F,U,q,J,fe,pe,ge,we){var Pe,Ke,yt=255;for(Ke=0;Ke<fe;++Ke){for(Pe=0;Pe<J;++Pe){var Mt=F[U+Pe];pe[ge+4*Pe]=Mt,yt&=Mt}U+=q,ge+=we}return yt!=255}function zs(F,U,q,J,fe){var pe;for(pe=0;pe<fe;++pe)q[J+pe]=F[U+pe]>>8}function js(){tc=Pa,fo=Na,Il=ha,Ss=zs}function Wo(F,U,q){Ce[F]=function(J,fe,pe,ge,we,Pe,Ke,yt,Mt,Oe,Ze,Ft,Zt,Ut,Vt,er,hr){var ar,Mr=hr-1>>1,Lr=we[Pe+0]|Ke[yt+0]<<16,yn=Mt[Oe+0]|Ze[Ft+0]<<16;n(J!=null);var Dr=3*Lr+yn+131074>>2;for(U(J[fe+0],255&Dr,Dr>>16,Zt,Ut),pe!=null&&(Dr=3*yn+Lr+131074>>2,U(pe[ge+0],255&Dr,Dr>>16,Vt,er)),ar=1;ar<=Mr;++ar){var Hn=we[Pe+ar]|Ke[yt+ar]<<16,Li=Mt[Oe+ar]|Ze[Ft+ar]<<16,Bn=Lr+Hn+yn+Li+524296,Fr=Bn+2*(Hn+yn)>>3;Dr=Fr+Lr>>1,Lr=(Bn=Bn+2*(Lr+Li)>>3)+Hn>>1,U(J[fe+2*ar-1],255&Dr,Dr>>16,Zt,Ut+(2*ar-1)*q),U(J[fe+2*ar-0],255&Lr,Lr>>16,Zt,Ut+(2*ar-0)*q),pe!=null&&(Dr=Bn+yn>>1,Lr=Fr+Li>>1,U(pe[ge+2*ar-1],255&Dr,Dr>>16,Vt,er+(2*ar-1)*q),U(pe[ge+2*ar+0],255&Lr,Lr>>16,Vt,er+(2*ar+0)*q)),Lr=Hn,yn=Li}1&hr||(Dr=3*Lr+yn+131074>>2,U(J[fe+hr-1],255&Dr,Dr>>16,Zt,Ut+(hr-1)*q),pe!=null&&(Dr=3*yn+Lr+131074>>2,U(pe[ge+hr-1],255&Dr,Dr>>16,Vt,er+(hr-1)*q)))}}function $A(){Ba[xc]=PA,Ba[Es]=tA,Ba[bu]=eA,Ba[Ts]=rA,Ba[wu]=il,Ba[qc]=go,Ba[UA]=NA,Ba[Bu]=tA,Ba[Kc]=rA,Ba[DA]=il,Ba[Jl]=go}function bl(F){return F&-16384?0>F?0:255:F>>Cu}function fa(F,U){return bl((19077*F>>8)+(26149*U>>8)-14234)}function ba(F,U,q){return bl((19077*F>>8)-(6419*U>>8)-(13320*q>>8)+8708)}function Kl(F,U){return bl((19077*F>>8)+(33050*U>>8)-17685)}function bs(F,U,q,J,fe){J[fe+0]=fa(F,q),J[fe+1]=ba(F,U,q),J[fe+2]=Kl(F,U)}function da(F,U,q,J,fe){J[fe+0]=Kl(F,U),J[fe+1]=ba(F,U,q),J[fe+2]=fa(F,q)}function Zl(F,U,q,J,fe){var pe=ba(F,U,q);U=pe<<3&224|Kl(F,U)>>3,J[fe+0]=248&fa(F,q)|pe>>5,J[fe+1]=U}function wl(F,U,q,J,fe){var pe=240&Kl(F,U)|15;J[fe+0]=240&fa(F,q)|ba(F,U,q)>>4,J[fe+1]=pe}function Qc(F,U,q,J,fe){J[fe+0]=255,bs(F,U,q,J,fe+1)}function Hs(F,U,q,J,fe){da(F,U,q,J,fe),J[fe+3]=255}function Vs(F,U,q,J,fe){bs(F,U,q,J,fe),J[fe+3]=255}function Do(F,U,q){Ce[F]=function(J,fe,pe,ge,we,Pe,Ke,yt,Mt){for(var Oe=yt+(-2&Mt)*q;yt!=Oe;)U(J[fe+0],pe[ge+0],we[Pe+0],Ke,yt),U(J[fe+1],pe[ge+0],we[Pe+0],Ke,yt+q),fe+=2,++ge,++Pe,yt+=2*q;1&Mt&&U(J[fe+0],pe[ge+0],we[Pe+0],Ke,yt)}}function kc(F,U,q){return q==0?F==0?U==0?6:5:U==0?4:0:q}function _c(F,U,q,J,fe){switch(F>>>30){case 3:Tl(U,q,J,fe,0);break;case 2:Cs(U,q,J,fe);break;case 1:Ai(U,q,J,fe)}}function ws(F,U){var q,J,fe=U.M,pe=U.Nb,ge=F.oc,we=F.pc+40,Pe=F.oc,Ke=F.pc+584,yt=F.oc,Mt=F.pc+600;for(q=0;16>q;++q)ge[we+32*q-1]=129;for(q=0;8>q;++q)Pe[Ke+32*q-1]=129,yt[Mt+32*q-1]=129;for(0<fe?ge[we-1-32]=Pe[Ke-1-32]=yt[Mt-1-32]=129:(m(ge,we-32-1,127,21),m(Pe,Ke-32-1,127,9),m(yt,Mt-32-1,127,9)),J=0;J<F.za;++J){var Oe=U.ya[U.aa+J];if(0<J){for(q=-1;16>q;++q)c(ge,we+32*q-4,ge,we+32*q+12,4);for(q=-1;8>q;++q)c(Pe,Ke+32*q-4,Pe,Ke+32*q+4,4),c(yt,Mt+32*q-4,yt,Mt+32*q+4,4)}var Ze=F.Gd,Ft=F.Hd+J,Zt=Oe.ad,Ut=Oe.Hc;if(0<fe&&(c(ge,we-32,Ze[Ft].y,0,16),c(Pe,Ke-32,Ze[Ft].f,0,8),c(yt,Mt-32,Ze[Ft].ea,0,8)),Oe.Za){var Vt=ge,er=we-32+16;for(0<fe&&(J>=F.za-1?m(Vt,er,Ze[Ft].y[15],4):c(Vt,er,Ze[Ft+1].y,0,4)),q=0;4>q;q++)Vt[er+128+q]=Vt[er+256+q]=Vt[er+384+q]=Vt[er+0+q];for(q=0;16>q;++q,Ut<<=2)Vt=ge,er=we+ta[q],qi[Oe.Ob[q]](Vt,er),_c(Ut,Zt,16*+q,Vt,er)}else if(Vt=kc(J,fe,Oe.Ob[0]),Ls[Vt](ge,we),Ut!=0)for(q=0;16>q;++q,Ut<<=2)_c(Ut,Zt,16*+q,ge,we+ta[q]);for(q=Oe.Gc,Vt=kc(J,fe,Oe.Dd),ci[Vt](Pe,Ke),ci[Vt](yt,Mt),Ut=Zt,Vt=Pe,er=Ke,255&(Oe=0|q)&&(170&Oe?rl(Ut,256,Vt,er):ni(Ut,256,Vt,er)),Oe=yt,Ut=Mt,255&(q>>=8)&&(170&q?rl(Zt,320,Oe,Ut):ni(Zt,320,Oe,Ut)),fe<F.Ub-1&&(c(Ze[Ft].y,0,ge,we+480,16),c(Ze[Ft].f,0,Pe,Ke+224,8),c(Ze[Ft].ea,0,yt,Mt+224,8)),q=8*pe*F.B,Ze=F.sa,Ft=F.ta+16*J+16*pe*F.R,Zt=F.qa,Oe=F.ra+8*J+q,Ut=F.Ha,Vt=F.Ia+8*J+q,q=0;16>q;++q)c(Ze,Ft+q*F.R,ge,we+32*q,16);for(q=0;8>q;++q)c(Zt,Oe+q*F.B,Pe,Ke+32*q,8),c(Ut,Vt+q*F.B,yt,Mt+32*q,8)}}function Yo(F,U,q,J,fe,pe,ge,we,Pe){var Ke=[0],yt=[0],Mt=0,Oe=Pe!=null?Pe.kd:0,Ze=Pe??new or;if(F==null||12>q)return 7;Ze.data=F,Ze.w=U,Ze.ha=q,U=[U],q=[q],Ze.gb=[Ze.gb];e:{var Ft=U,Zt=q,Ut=Ze.gb;if(n(F!=null),n(Zt!=null),n(Ut!=null),Ut[0]=0,12<=Zt[0]&&!o(F,Ft[0],"RIFF")){if(o(F,Ft[0]+8,"WEBP")){Ut=3;break e}var Vt=xr(F,Ft[0]+4);if(12>Vt||4294967286<Vt){Ut=3;break e}if(Oe&&Vt>Zt[0]-8){Ut=7;break e}Ut[0]=Vt,Ft[0]+=12,Zt[0]-=12}Ut=0}if(Ut!=0)return Ut;for(Vt=0<Ze.gb[0],q=q[0];;){e:{var er=F;Zt=U,Ut=q;var hr=Ke,ar=yt,Mr=Ft=[0];if((Dr=Mt=[Mt])[0]=0,8>Ut[0])Ut=7;else{if(!o(er,Zt[0],"VP8X")){if(xr(er,Zt[0]+4)!=10){Ut=3;break e}if(18>Ut[0]){Ut=7;break e}var Lr=xr(er,Zt[0]+8),yn=1+br(er,Zt[0]+12);if(2147483648<=yn*(er=1+br(er,Zt[0]+15))){Ut=3;break e}Mr!=null&&(Mr[0]=Lr),hr!=null&&(hr[0]=yn),ar!=null&&(ar[0]=er),Zt[0]+=18,Ut[0]-=18,Dr[0]=1}Ut=0}}if(Mt=Mt[0],Ft=Ft[0],Ut!=0)return Ut;if(Zt=!!(2&Ft),!Vt&&Mt)return 3;if(pe!=null&&(pe[0]=!!(16&Ft)),ge!=null&&(ge[0]=Zt),we!=null&&(we[0]=0),ge=Ke[0],Ft=yt[0],Mt&&Zt&&Pe==null){Ut=0;break}if(4>q){Ut=7;break}if(Vt&&Mt||!Vt&&!Mt&&!o(F,U[0],"ALPH")){q=[q],Ze.na=[Ze.na],Ze.P=[Ze.P],Ze.Sa=[Ze.Sa];e:{Lr=F,Ut=U,Vt=q;var Dr=Ze.gb;hr=Ze.na,ar=Ze.P,Mr=Ze.Sa,yn=22,n(Lr!=null),n(Vt!=null),er=Ut[0];var Hn=Vt[0];for(n(hr!=null),n(Mr!=null),hr[0]=null,ar[0]=null,Mr[0]=0;;){if(Ut[0]=er,Vt[0]=Hn,8>Hn){Ut=7;break e}var Li=xr(Lr,er+4);if(4294967286<Li){Ut=3;break e}var Bn=8+Li+1&-2;if(yn+=Bn,0<Dr&&yn>Dr){Ut=3;break e}if(!o(Lr,er,"VP8 ")||!o(Lr,er,"VP8L")){Ut=0;break e}if(Hn[0]<Bn){Ut=7;break e}o(Lr,er,"ALPH")||(hr[0]=Lr,ar[0]=er+8,Mr[0]=Li),er+=Bn,Hn-=Bn}}if(q=q[0],Ze.na=Ze.na[0],Ze.P=Ze.P[0],Ze.Sa=Ze.Sa[0],Ut!=0)break}q=[q],Ze.Ja=[Ze.Ja],Ze.xa=[Ze.xa];e:if(Dr=F,Ut=U,Vt=q,hr=Ze.gb[0],ar=Ze.Ja,Mr=Ze.xa,Lr=Ut[0],er=!o(Dr,Lr,"VP8 "),yn=!o(Dr,Lr,"VP8L"),n(Dr!=null),n(Vt!=null),n(ar!=null),n(Mr!=null),8>Vt[0])Ut=7;else{if(er||yn){if(Dr=xr(Dr,Lr+4),12<=hr&&Dr>hr-12){Ut=3;break e}if(Oe&&Dr>Vt[0]-8){Ut=7;break e}ar[0]=Dr,Ut[0]+=8,Vt[0]-=8,Mr[0]=yn}else Mr[0]=5<=Vt[0]&&Dr[Lr+0]==47&&!(Dr[Lr+4]>>5),ar[0]=Vt[0];Ut=0}if(q=q[0],Ze.Ja=Ze.Ja[0],Ze.xa=Ze.xa[0],U=U[0],Ut!=0)break;if(4294967286<Ze.Ja)return 3;if(we==null||Zt||(we[0]=Ze.xa?2:1),ge=[ge],Ft=[Ft],Ze.xa){if(5>q){Ut=7;break}we=ge,Oe=Ft,Zt=pe,F==null||5>q?F=0:5<=q&&F[U+0]==47&&!(F[U+4]>>5)?(Vt=[0],Dr=[0],hr=[0],xt(ar=new xe,F,U,q),Kn(ar,Vt,Dr,hr)?(we!=null&&(we[0]=Vt[0]),Oe!=null&&(Oe[0]=Dr[0]),Zt!=null&&(Zt[0]=hr[0]),F=1):F=0):F=0}else{if(10>q){Ut=7;break}we=Ft,F==null||10>q||!ea(F,U+3,q-3)?F=0:(Oe=F[U+0]|F[U+1]<<8|F[U+2]<<16,Zt=16383&(F[U+7]<<8|F[U+6]),F=16383&(F[U+9]<<8|F[U+8]),1&Oe||3<(Oe>>1&7)||!(Oe>>4&1)||Oe>>5>=Ze.Ja||!Zt||!F?F=0:(ge&&(ge[0]=Zt),we&&(we[0]=F),F=1))}if(!F||(ge=ge[0],Ft=Ft[0],Mt&&(Ke[0]!=ge||yt[0]!=Ft)))return 3;Pe!=null&&(Pe[0]=Ze,Pe.offset=U-Pe.w,n(4294967286>U-Pe.w),n(Pe.offset==Pe.ha-q));break}return Ut==0||Ut==7&&Mt&&Pe==null?(pe!=null&&(pe[0]|=Ze.na!=null&&0<Ze.na.length),J!=null&&(J[0]=ge),fe!=null&&(fe[0]=Ft),0):Ut}function Bl(F,U,q){var J=U.width,fe=U.height,pe=0,ge=0,we=J,Pe=fe;if(U.Da=F!=null&&0<F.Da,U.Da&&(we=F.cd,Pe=F.bd,pe=F.v,ge=F.j,11>q||(pe&=-2,ge&=-2),0>pe||0>ge||0>=we||0>=Pe||pe+we>J||ge+Pe>fe))return 0;if(U.v=pe,U.j=ge,U.va=pe+we,U.o=ge+Pe,U.U=we,U.T=Pe,U.da=F!=null&&0<F.da,U.da){if(!Wr(we,Pe,q=[F.ib],pe=[F.hb]))return 0;U.ib=q[0],U.hb=pe[0]}return U.ob=F!=null&&F.ob,U.Kb=F==null||!F.Sd,U.da&&(U.ob=U.ib<3*J/4&&U.hb<3*fe/4,U.Kb=0),1}function Oc(F){if(F==null)return 2;if(11>F.S){var U=F.f.RGBA;U.fb+=(F.height-1)*U.A,U.A=-U.A}else U=F.f.kb,F=F.height,U.O+=(F-1)*U.fa,U.fa=-U.fa,U.N+=(F-1>>1)*U.Ab,U.Ab=-U.Ab,U.W+=(F-1>>1)*U.Db,U.Db=-U.Db,U.F!=null&&(U.J+=(F-1)*U.lb,U.lb=-U.lb);return 0}function $o(F,U,q,J){if(J==null||0>=F||0>=U)return 2;if(q!=null){if(q.Da){var fe=q.cd,pe=q.bd,ge=-2&q.v,we=-2&q.j;if(0>ge||0>we||0>=fe||0>=pe||ge+fe>F||we+pe>U)return 2;F=fe,U=pe}if(q.da){if(!Wr(F,U,fe=[q.ib],pe=[q.hb]))return 2;F=fe[0],U=pe[0]}}J.width=F,J.height=U;e:{var Pe=J.width,Ke=J.height;if(F=J.S,0>=Pe||0>=Ke||!(F>=xc&&13>F))F=2;else{if(0>=J.Rd&&J.sd==null){ge=pe=fe=U=0;var yt=(we=Pe*yo[F])*Ke;if(11>F||(pe=(Ke+1)/2*(U=(Pe+1)/2),F==12&&(ge=(fe=Pe)*Ke)),(Ke=y(yt+2*pe+ge))==null){F=1;break e}J.sd=Ke,11>F?((Pe=J.f.RGBA).eb=Ke,Pe.fb=0,Pe.A=we,Pe.size=yt):((Pe=J.f.kb).y=Ke,Pe.O=0,Pe.fa=we,Pe.Fd=yt,Pe.f=Ke,Pe.N=0+yt,Pe.Ab=U,Pe.Cd=pe,Pe.ea=Ke,Pe.W=0+yt+pe,Pe.Db=U,Pe.Ed=pe,F==12&&(Pe.F=Ke,Pe.J=0+yt+2*pe),Pe.Tc=ge,Pe.lb=fe)}if(U=1,fe=J.S,pe=J.width,ge=J.height,fe>=xc&&13>fe)if(11>fe)F=J.f.RGBA,U&=(we=Math.abs(F.A))*(ge-1)+pe<=F.size,U&=we>=pe*yo[fe],U&=F.eb!=null;else{F=J.f.kb,we=(pe+1)/2,yt=(ge+1)/2,Pe=Math.abs(F.fa),Ke=Math.abs(F.Ab);var Mt=Math.abs(F.Db),Oe=Math.abs(F.lb),Ze=Oe*(ge-1)+pe;U&=Pe*(ge-1)+pe<=F.Fd,U&=Ke*(yt-1)+we<=F.Cd,U=(U&=Mt*(yt-1)+we<=F.Ed)&Pe>=pe&Ke>=we&Mt>=we,U&=F.y!=null,U&=F.f!=null,U&=F.ea!=null,fe==12&&(U&=Oe>=pe,U&=Ze<=F.Tc,U&=F.F!=null)}else U=0;F=U?0:2}}return F!=0||q!=null&&q.fd&&(F=Oc(J)),F}var Ao=64,Gs=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Bs=24,qs=32,Cl=8,Po=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Sr("Predictor0","PredictorAdd0"),Ce.Predictor0=function(){return 4278190080},Ce.Predictor1=function(F){return F},Ce.Predictor2=function(F,U,q){return U[q+0]},Ce.Predictor3=function(F,U,q){return U[q+1]},Ce.Predictor4=function(F,U,q){return U[q-1]},Ce.Predictor5=function(F,U,q){return Gr(Gr(F,U[q+1]),U[q+0])},Ce.Predictor6=function(F,U,q){return Gr(F,U[q-1])},Ce.Predictor7=function(F,U,q){return Gr(F,U[q+0])},Ce.Predictor8=function(F,U,q){return Gr(U[q-1],U[q+0])},Ce.Predictor9=function(F,U,q){return Gr(U[q+0],U[q+1])},Ce.Predictor10=function(F,U,q){return Gr(Gr(F,U[q-1]),Gr(U[q+0],U[q+1]))},Ce.Predictor11=function(F,U,q){var J=U[q+0];return 0>=An(J>>24&255,F>>24&255,(U=U[q-1])>>24&255)+An(J>>16&255,F>>16&255,U>>16&255)+An(J>>8&255,F>>8&255,U>>8&255)+An(255&J,255&F,255&U)?J:F},Ce.Predictor12=function(F,U,q){var J=U[q+0];return(mn((F>>24&255)+(J>>24&255)-((U=U[q-1])>>24&255))<<24|mn((F>>16&255)+(J>>16&255)-(U>>16&255))<<16|mn((F>>8&255)+(J>>8&255)-(U>>8&255))<<8|mn((255&F)+(255&J)-(255&U)))>>>0},Ce.Predictor13=function(F,U,q){var J=U[q-1];return(Cn((F=Gr(F,U[q+0]))>>24&255,J>>24&255)<<24|Cn(F>>16&255,J>>16&255)<<16|Cn(F>>8&255,J>>8&255)<<8|Cn(255&F,255&J))>>>0};var zc=Ce.PredictorAdd0;Ce.PredictorAdd1=Fn,Sr("Predictor2","PredictorAdd2"),Sr("Predictor3","PredictorAdd3"),Sr("Predictor4","PredictorAdd4"),Sr("Predictor5","PredictorAdd5"),Sr("Predictor6","PredictorAdd6"),Sr("Predictor7","PredictorAdd7"),Sr("Predictor8","PredictorAdd8"),Sr("Predictor9","PredictorAdd9"),Sr("Predictor10","PredictorAdd10"),Sr("Predictor11","PredictorAdd11"),Sr("Predictor12","PredictorAdd12"),Sr("Predictor13","PredictorAdd13");var jc=Ce.PredictorAdd2;Je("ColorIndexInverseTransform","MapARGB","32b",function(F){return F>>8&255},function(F){return F}),Je("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(F){return F},function(F){return F>>8&255});var pa,vu=Ce.ColorIndexInverseTransform,co=Ce.MapARGB,Jo=Ce.VP8LColorIndexInverseTransformAlpha,Xa=Ce.MapAlpha,el=Ce.VP8LPredictorsAdd=[];el.length=16,(Ce.VP8LPredictors=[]).length=16,(Ce.VP8LPredictorsAdd_C=[]).length=16,(Ce.VP8LPredictors_C=[]).length=16;var uo,Xl,tl,Sl,El,Wl,Ra,Tl,Cs,rl,Ai,ni,Ii,wa,Fl,wn,Yl,JA,xu,ec,Hc,vc,ho,Wu,tc,fo,Il,Ss,$l=y(511),rc=y(2041),nc=y(225),Vc=y(767),MA=0,po=rc,Gc=nc,Wa=Vc,Yr=$l,xc=0,Es=1,bu=2,Ts=3,wu=4,qc=5,UA=6,Bu=7,Kc=8,DA=9,Jl=10,Ks=[2,3,7],ic=[3,3,11],ac=[280,256,256,256,40],sc=[0,1,1,1,0],oc=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Fs=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Qa=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Ll=8,nl=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Is=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],No=null,Fh=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Zc=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],bc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Yu=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ya=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Si=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],kn=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ls=[],qi=[],ci=[],mo=1,Zs=2,Ml=[],Ba=[];Wo("UpsampleRgbLinePair",bs,3),Wo("UpsampleBgrLinePair",da,3),Wo("UpsampleRgbaLinePair",Vs,4),Wo("UpsampleBgraLinePair",Hs,4),Wo("UpsampleArgbLinePair",Qc,4),Wo("UpsampleRgba4444LinePair",wl,2),Wo("UpsampleRgb565LinePair",Zl,2);var PA=Ce.UpsampleRgbLinePair,eA=Ce.UpsampleBgrLinePair,tA=Ce.UpsampleRgbaLinePair,rA=Ce.UpsampleBgraLinePair,il=Ce.UpsampleArgbLinePair,go=Ce.UpsampleRgba4444LinePair,NA=Ce.UpsampleRgb565LinePair,Ro=16,wc=1<<Ro-1,lc=-227,Xs=482,Cu=6,nA=0,Ha=y(256),Ac=y(256),Ih=y(256),Lh=y(256),Mh=y(Xs-lc),uf=y(Xs-lc);Do("YuvToRgbRow",bs,3),Do("YuvToBgrRow",da,3),Do("YuvToRgbaRow",Vs,4),Do("YuvToBgraRow",Hs,4),Do("YuvToArgbRow",Qc,4),Do("YuvToRgba4444Row",wl,2),Do("YuvToRgb565Row",Zl,2);var ta=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],iA=[0,2,8],aA=[8,7,6,4,4,2,2,2,1,1,1,1],Ms=1;this.WebPDecodeRGBA=function(F,U,q,J,fe){var pe=Es,ge=new Kt,we=new Bt;ge.ba=we,we.S=pe,we.width=[we.width],we.height=[we.height];var Pe=we.width,Ke=we.height,yt=new Qe;if(yt==null||F==null)var Mt=2;else n(yt!=null),Mt=Yo(F,U,q,yt.width,yt.height,yt.Pd,yt.Qd,yt.format,null);if(Mt!=0?Pe=0:(Pe!=null&&(Pe[0]=yt.width[0]),Ke!=null&&(Ke[0]=yt.height[0]),Pe=1),Pe){we.width=we.width[0],we.height=we.height[0],J!=null&&(J[0]=we.width),fe!=null&&(fe[0]=we.height);e:{if(J=new Hl,(fe=new or).data=F,fe.w=U,fe.ha=q,fe.kd=1,U=[0],n(fe!=null),((F=Yo(fe.data,fe.w,fe.ha,null,null,null,U,null,fe))==0||F==7)&&U[0]&&(F=4),(U=F)==0){if(n(ge!=null),J.data=fe.data,J.w=fe.w+fe.offset,J.ha=fe.ha-fe.offset,J.put=dr,J.ac=Pr,J.bc=mi,J.ma=ge,fe.xa){if((F=Ko())==null){ge=1;break e}if((function(Oe,Ze){var Ft=[0],Zt=[0],Ut=[0];t:for(;;){if(Oe==null)return 0;if(Ze==null)return Oe.a=2,0;if(Oe.l=Ze,Oe.a=0,xt(Oe.m,Ze.data,Ze.w,Ze.ha),!Kn(Oe.m,Ft,Zt,Ut)){Oe.a=3;break t}if(Oe.xb=Zs,Ze.width=Ft[0],Ze.height=Zt[0],!os(Ft[0],Zt[0],1,Oe,null))break t;return 1}return n(Oe.a!=0),0})(F,J)){if(J=(U=$o(J.width,J.height,ge.Oa,ge.ba))==0){t:{J=F;r:for(;;){if(J==null){J=0;break t}if(n(J.s.yc!=null),n(J.s.Ya!=null),n(0<J.s.Wb),n((q=J.l)!=null),n((fe=q.ma)!=null),J.xb!=0){if(J.ca=fe.ba,J.tb=fe.tb,n(J.ca!=null),!Bl(fe.Oa,q,Ts)){J.a=2;break r}if(!an(J,q.width)||q.da)break r;if((q.da||it(J.ca.S))&&js(),11>J.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),J.ca.f.kb.F!=null&&js()),J.Pb&&0<J.s.ua&&J.s.vb.X==null&&!Re(J.s.vb,J.s.Wa.Xa)){J.a=1;break r}J.xb=0}if(!qr(J,J.V,J.Ba,J.c,J.i,q.o,xa))break r;fe.Dc=J.Ma,J=1;break t}n(J.a!=0),J=0}J=!J}J&&(U=F.a)}else U=F.a}else{if((F=new As)==null){ge=1;break e}if(F.Fa=fe.na,F.P=fe.P,F.qc=fe.Sa,Vl(F,J)){if((U=$o(J.width,J.height,ge.Oa,ge.ba))==0){if(F.Aa=0,q=ge.Oa,n((fe=F)!=null),q!=null){if(0<(Pe=0>(Pe=q.Md)?0:100<Pe?255:255*Pe/100)){for(Ke=yt=0;4>Ke;++Ke)12>(Mt=fe.pb[Ke]).lc&&(Mt.ia=Pe*aA[0>Mt.lc?0:Mt.lc]>>3),yt|=Mt.ia;yt&&(alert("todo:VP8InitRandom"),fe.ia=1)}fe.Ga=q.Id,100<fe.Ga?fe.Ga=100:0>fe.Ga&&(fe.Ga=0)}(function(Oe,Ze){if(Oe==null)return 0;if(Ze==null)return Qn(Oe,2,"NULL VP8Io parameter in VP8Decode().");if(!Oe.cb&&!Vl(Oe,Ze))return 0;if(n(Oe.cb),Ze.ac==null||Ze.ac(Ze)){Ze.ob&&(Oe.L=0);var Ft=iA[Oe.L];if(Oe.L==2?(Oe.yb=0,Oe.zb=0):(Oe.yb=Ze.v-Ft>>4,Oe.zb=Ze.j-Ft>>4,0>Oe.yb&&(Oe.yb=0),0>Oe.zb&&(Oe.zb=0)),Oe.Va=Ze.o+15+Ft>>4,Oe.Hb=Ze.va+15+Ft>>4,Oe.Hb>Oe.za&&(Oe.Hb=Oe.za),Oe.Va>Oe.Ub&&(Oe.Va=Oe.Ub),0<Oe.L){var Zt=Oe.ed;for(Ft=0;4>Ft;++Ft){var Ut;if(Oe.Qa.Cb){var Vt=Oe.Qa.Lb[Ft];Oe.Qa.Fb||(Vt+=Zt.Tb)}else Vt=Zt.Tb;for(Ut=0;1>=Ut;++Ut){var er=Oe.gd[Ft][Ut],hr=Vt;if(Zt.Pc&&(hr+=Zt.vd[0],Ut&&(hr+=Zt.od[0])),0<(hr=0>hr?0:63<hr?63:hr)){var ar=hr;0<Zt.wb&&(ar=4<Zt.wb?ar>>2:ar>>1)>9-Zt.wb&&(ar=9-Zt.wb),1>ar&&(ar=1),er.dd=ar,er.tc=2*hr+ar,er.ld=40<=hr?2:15<=hr?1:0}else er.tc=0;er.La=Ut}}}Ft=0}else Qn(Oe,6,"Frame setup failed"),Ft=Oe.a;if(Ft=Ft==0){if(Ft){Oe.$c=0,0<Oe.Aa||(Oe.Ic=Ms);t:{Ft=Oe.Ic,Zt=4*(ar=Oe.za);var Mr=32*ar,Lr=ar+1,yn=0<Oe.L?ar*(0<Oe.Aa?2:1):0,Dr=(Oe.Aa==2?2:1)*ar;if((er=Zt+832+(Ut=3*(16*Ft+iA[Oe.L])/2*Mr)+(Vt=Oe.Fa!=null&&0<Oe.Fa.length?Oe.Kc.c*Oe.Kc.i:0))!=er)Ft=0;else{if(er>Oe.Vb){if(Oe.Vb=0,Oe.Ec=y(er),Oe.Fc=0,Oe.Ec==null){Ft=Qn(Oe,1,"no memory during frame initialization.");break t}Oe.Vb=er}er=Oe.Ec,hr=Oe.Fc,Oe.Ac=er,Oe.Bc=hr,hr+=Zt,Oe.Gd=v(Mr,Fo),Oe.Hd=0,Oe.rb=v(Lr+1,Zn),Oe.sb=1,Oe.wa=yn?v(yn,Ni):null,Oe.Y=0,Oe.D.Nb=0,Oe.D.wa=Oe.wa,Oe.D.Y=Oe.Y,0<Oe.Aa&&(Oe.D.Y+=ar),n(!0),Oe.oc=er,Oe.pc=hr,hr+=832,Oe.ya=v(Dr,Zo),Oe.aa=0,Oe.D.ya=Oe.ya,Oe.D.aa=Oe.aa,Oe.Aa==2&&(Oe.D.aa+=ar),Oe.R=16*ar,Oe.B=8*ar,ar=(Mr=iA[Oe.L])*Oe.R,Mr=Mr/2*Oe.B,Oe.sa=er,Oe.ta=hr+ar,Oe.qa=Oe.sa,Oe.ra=Oe.ta+16*Ft*Oe.R+Mr,Oe.Ha=Oe.qa,Oe.Ia=Oe.ra+8*Ft*Oe.B+Mr,Oe.$c=0,hr+=Ut,Oe.mb=Vt?er:null,Oe.nb=Vt?hr:null,n(hr+Vt<=Oe.Fc+Oe.Vb),wA(Oe),m(Oe.Ac,Oe.Bc,0,Zt),Ft=1}}if(Ft){if(Ze.ka=0,Ze.y=Oe.sa,Ze.O=Oe.ta,Ze.f=Oe.qa,Ze.N=Oe.ra,Ze.ea=Oe.Ha,Ze.Vd=Oe.Ia,Ze.fa=Oe.R,Ze.Rc=Oe.B,Ze.F=null,Ze.J=0,!MA){for(Ft=-255;255>=Ft;++Ft)$l[255+Ft]=0>Ft?-Ft:Ft;for(Ft=-1020;1020>=Ft;++Ft)rc[1020+Ft]=-128>Ft?-128:127<Ft?127:Ft;for(Ft=-112;112>=Ft;++Ft)nc[112+Ft]=-16>Ft?-16:15<Ft?15:Ft;for(Ft=-255;510>=Ft;++Ft)Vc[255+Ft]=0>Ft?0:255<Ft?255:Ft;MA=1}Ra=lo,Tl=WA,rl=us,Ai=yu,ni=CA,Cs=gu,Ii=LA,wa=Da,Fl=he,wn=qe,Yl=ql,JA=V,xu=pt,ec=St,Hc=Xn,vc=Mo,ho=In,Wu=pn,qi[0]=Hr,qi[1]=SA,qi[2]=ja,qi[3]=gi,qi[4]=Za,qi[5]=fs,qi[6]=jn,qi[7]=Ma,qi[8]=Os,qi[9]=vs,Ls[0]=hs,Ls[1]=Rc,Ls[2]=_s,Ls[3]=EA,Ls[4]=TA,Ls[5]=FA,Ls[6]=La,ci[0]=Xo,ci[1]=_u,ci[2]=ri,ci[3]=IA,ci[4]=Aa,ci[5]=xs,ci[6]=ca,Ft=1}else Ft=0}Ft&&(Ft=(function(Hn,Li){for(Hn.M=0;Hn.M<Hn.Va;++Hn.M){var Bn,Fr=Hn.Jc[Hn.M&Hn.Xb],vr=Hn.m,Qi=Hn;for(Bn=0;Bn<Qi.za;++Bn){var dn=vr,Ln=Qi,Vn=Ln.Ac,bn=Ln.Bc+4*Bn,$a=Ln.zc,Bi=Ln.ya[Ln.aa+Bn];if(Ln.Qa.Bb?Bi.$b=$t(dn,Ln.Pa.jb[0])?2+$t(dn,Ln.Pa.jb[2]):$t(dn,Ln.Pa.jb[1]):Bi.$b=0,Ln.kc&&(Bi.Ad=$t(dn,Ln.Bd)),Bi.Za=!$t(dn,145)+0,Bi.Za){var Ki=Bi.Ob,Ja=0;for(Ln=0;4>Ln;++Ln){var ma,Rn=$a[0+Ln];for(ma=0;4>ma;++ma){Rn=Ya[Vn[bn+ma]][Rn];for(var ii=bc[$t(dn,Rn[0])];0<ii;)ii=bc[2*ii+$t(dn,Rn[ii])];Rn=-ii,Vn[bn+ma]=Rn}c(Ki,Ja,Vn,bn,4),Ja+=4,$a[0+Ln]=Rn}}else Rn=$t(dn,156)?$t(dn,128)?1:3:$t(dn,163)?2:0,Bi.Ob[0]=Rn,m(Vn,bn,Rn,4),m($a,0,Rn,4);Bi.Dd=$t(dn,142)?$t(dn,114)?$t(dn,183)?1:3:2:0}if(Qi.m.Ka)return Qn(Hn,7,"Premature end-of-partition0 encountered.");for(;Hn.ja<Hn.za;++Hn.ja){if(Qi=Fr,dn=(vr=Hn).rb[vr.sb-1],Vn=vr.rb[vr.sb+vr.ja],Bn=vr.ya[vr.aa+vr.ja],bn=vr.kc?Bn.Ad:0)dn.la=Vn.la=0,Bn.Za||(dn.Na=Vn.Na=0),Bn.Hc=0,Bn.Gc=0,Bn.ia=0;else{var ra,Un;if(dn=Vn,Vn=Qi,bn=vr.Pa.Xc,$a=vr.ya[vr.aa+vr.ja],Bi=vr.pb[$a.$b],Ln=$a.ad,Ki=0,Ja=vr.rb[vr.sb-1],Rn=ma=0,m(Ln,Ki,0,384),$a.Za)var na=0,gr=bn[3];else{ii=y(16);var yr=dn.Na+Ja.Na;if(yr=No(Vn,bn[1],yr,Bi.Eb,0,ii,0),dn.Na=Ja.Na=(0<yr)+0,1<yr)Ra(ii,0,Ln,Ki);else{var Ei=ii[0]+3>>3;for(ii=0;256>ii;ii+=16)Ln[Ki+ii]=Ei}na=1,gr=bn[0]}var yi=15&dn.la,ki=15&Ja.la;for(ii=0;4>ii;++ii){var ei=1&ki;for(Ei=Un=0;4>Ei;++Ei)yi=yi>>1|(ei=(yr=No(Vn,gr,yr=ei+(1&yi),Bi.Sc,na,Ln,Ki))>na)<<7,Un=Un<<2|(3<yr?3:1<yr?2:Ln[Ki+0]!=0),Ki+=16;yi>>=4,ki=ki>>1|ei<<7,ma=(ma<<8|Un)>>>0}for(gr=yi,na=ki>>4,ra=0;4>ra;ra+=2){for(Un=0,yi=dn.la>>4+ra,ki=Ja.la>>4+ra,ii=0;2>ii;++ii){for(ei=1&ki,Ei=0;2>Ei;++Ei)yr=ei+(1&yi),yi=yi>>1|(ei=0<(yr=No(Vn,bn[2],yr,Bi.Qc,0,Ln,Ki)))<<3,Un=Un<<2|(3<yr?3:1<yr?2:Ln[Ki+0]!=0),Ki+=16;yi>>=2,ki=ki>>1|ei<<5}Rn|=Un<<4*ra,gr|=yi<<4<<ra,na|=(240&ki)<<ra}dn.la=gr,Ja.la=na,$a.Hc=ma,$a.Gc=Rn,$a.ia=43690&Rn?0:Bi.ia,bn=!(ma|Rn)}if(0<vr.L&&(vr.wa[vr.Y+vr.ja]=vr.gd[Bn.$b][Bn.Za],vr.wa[vr.Y+vr.ja].La|=!bn),Qi.Ka)return Qn(Hn,7,"Premature end-of-file encountered.")}if(wA(Hn),vr=Li,Qi=1,Bn=(Fr=Hn).D,dn=0<Fr.L&&Fr.M>=Fr.zb&&Fr.M<=Fr.Va,Fr.Aa==0)t:{if(Bn.M=Fr.M,Bn.uc=dn,ws(Fr,Bn),Qi=1,Bn=(Un=Fr.D).Nb,dn=(Rn=iA[Fr.L])*Fr.R,Vn=Rn/2*Fr.B,ii=16*Bn*Fr.R,Ei=8*Bn*Fr.B,bn=Fr.sa,$a=Fr.ta-dn+ii,Bi=Fr.qa,Ln=Fr.ra-Vn+Ei,Ki=Fr.Ha,Ja=Fr.Ia-Vn+Ei,ki=(yi=Un.M)==0,ma=yi>=Fr.Va-1,Fr.Aa==2&&ws(Fr,Un),Un.uc)for(ei=(yr=Fr).D.M,n(yr.D.uc),Un=yr.yb;Un<yr.Hb;++Un){na=Un,gr=ei;var Gn=(Yn=(aa=yr).D).Nb;ra=aa.R;var Yn=Yn.wa[Yn.Y+na],ds=aa.sa,ia=aa.ta+16*Gn*ra+16*na,on=Yn.dd,tn=Yn.tc;if(tn!=0)if(n(3<=tn),aa.L==1)0<na&&vc(ds,ia,ra,tn+4),Yn.La&&Wu(ds,ia,ra,tn),0<gr&&Hc(ds,ia,ra,tn+4),Yn.La&&ho(ds,ia,ra,tn);else{var sn=aa.B,$n=aa.qa,Qo=aa.ra+8*Gn*sn+8*na,Zi=aa.Ha,aa=aa.Ia+8*Gn*sn+8*na;Gn=Yn.ld,0<na&&(wa(ds,ia,ra,tn+4,on,Gn),wn($n,Qo,Zi,aa,sn,tn+4,on,Gn)),Yn.La&&(JA(ds,ia,ra,tn,on,Gn),ec($n,Qo,Zi,aa,sn,tn,on,Gn)),0<gr&&(Ii(ds,ia,ra,tn+4,on,Gn),Fl($n,Qo,Zi,aa,sn,tn+4,on,Gn)),Yn.La&&(Yl(ds,ia,ra,tn,on,Gn),xu($n,Qo,Zi,aa,sn,tn,on,Gn))}}if(Fr.ia&&alert("todo:DitherRow"),vr.put!=null){if(Un=16*yi,yi=16*(yi+1),ki?(vr.y=Fr.sa,vr.O=Fr.ta+ii,vr.f=Fr.qa,vr.N=Fr.ra+Ei,vr.ea=Fr.Ha,vr.W=Fr.Ia+Ei):(Un-=Rn,vr.y=bn,vr.O=$a,vr.f=Bi,vr.N=Ln,vr.ea=Ki,vr.W=Ja),ma||(yi-=Rn),yi>vr.o&&(yi=vr.o),vr.F=null,vr.J=null,Fr.Fa!=null&&0<Fr.Fa.length&&Un<yi&&(vr.J=Ci(Fr,vr,Un,yi-Un),vr.F=Fr.mb,vr.F==null&&vr.F.length==0)){Qi=Qn(Fr,3,"Could not decode alpha data.");break t}Un<vr.j&&(Rn=vr.j-Un,Un=vr.j,n(!(1&Rn)),vr.O+=Fr.R*Rn,vr.N+=Fr.B*(Rn>>1),vr.W+=Fr.B*(Rn>>1),vr.F!=null&&(vr.J+=vr.width*Rn)),Un<yi&&(vr.O+=vr.v,vr.N+=vr.v>>1,vr.W+=vr.v>>1,vr.F!=null&&(vr.J+=vr.v),vr.ka=Un-vr.j,vr.U=vr.va-vr.v,vr.T=yi-Un,Qi=vr.put(vr))}Bn+1!=Fr.Ic||ma||(c(Fr.sa,Fr.ta-dn,bn,$a+16*Fr.R,dn),c(Fr.qa,Fr.ra-Vn,Bi,Ln+8*Fr.B,Vn),c(Fr.Ha,Fr.Ia-Vn,Ki,Ja+8*Fr.B,Vn))}if(!Qi)return Qn(Hn,6,"Output aborted.")}return 1})(Oe,Ze)),Ze.bc!=null&&Ze.bc(Ze),Ft&=1}return Ft?(Oe.cb=0,Ft):0})(F,J)||(U=F.a)}}else U=F.a}U==0&&ge.Oa!=null&&ge.Oa.fd&&(U=Oc(ge.ba))}ge=U}pe=ge!=0?null:11>pe?we.f.RGBA.eb:we.f.kb.y}else pe=null;return pe};var yo=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function I(Ce,_t){for(var _e="",Te=0;Te<4;Te++)_e+=String.fromCharCode(Ce[_t++]);return _e}function D(Ce,_t){return Ce[_t+0]|Ce[_t+1]<<8}function z(Ce,_t){return(Ce[_t+0]|Ce[_t+1]<<8|Ce[_t+2]<<16)>>>0}function Z(Ce,_t){return(Ce[_t+0]|Ce[_t+1]<<8|Ce[_t+2]<<16|Ce[_t+3]<<24)>>>0}new S;var O=[0],ce=[0],ie=[],W=new S,le=i,ye=(function(Ce,_t){var _e={},Te=0,Ye=!1,Ve=0,wt=0;if(_e.frames=[],!(function(oe,xe){for(var Ue=0;Ue<4;Ue++)if(oe[xe+Ue]!="RIFF".charCodeAt(Ue))return!0;return!1})(Ce,_t)){for(Z(Ce,_t+=4),_t+=8;_t<Ce.length;){var ke=I(Ce,_t),ot=Z(Ce,_t+=4);_t+=4;var st=ot+(1&ot);switch(ke){case"VP8 ":case"VP8L":_e.frames[Te]===void 0&&(_e.frames[Te]={}),(Fe=_e.frames[Te]).src_off=Ye?wt:_t-8,Fe.src_size=Ve+ot+8,Te++,Ye&&(Ye=!1,Ve=0,wt=0);break;case"VP8X":(Fe=_e.header={}).feature_flags=Ce[_t];var xt=_t+4;Fe.canvas_width=1+z(Ce,xt),xt+=3,Fe.canvas_height=1+z(Ce,xt),xt+=3;break;case"ALPH":Ye=!0,Ve=st+8,wt=_t-8;break;case"ANIM":(Fe=_e.header).bgcolor=Z(Ce,_t),xt=_t+4,Fe.loop_count=D(Ce,xt),xt+=2;break;case"ANMF":var Ct,Fe;(Fe=_e.frames[Te]={}).offset_x=2*z(Ce,_t),_t+=3,Fe.offset_y=2*z(Ce,_t),_t+=3,Fe.width=1+z(Ce,_t),_t+=3,Fe.height=1+z(Ce,_t),_t+=3,Fe.duration=z(Ce,_t),_t+=3,Ct=Ce[_t++],Fe.dispose=1&Ct,Fe.blend=Ct>>1&1}ke!="ANMF"&&(_t+=st)}return _e}})(le,0);ye.response=le,ye.rgbaoutput=!0,ye.dataurl=!1;var Be=ye.header?ye.header:null,Le=ye.frames?ye.frames:null;if(Be){Be.loop_counter=Be.loop_count,O=[Be.canvas_height],ce=[Be.canvas_width];for(var lt=0;lt<Le.length&&Le[lt].blend!=0;lt++);}var ft=Le[0],ut=W.WebPDecodeRGBA(le,ft.src_off,ft.src_size,ce,O);ft.rgba=ut,ft.imgwidth=ce[0],ft.imgheight=O[0];for(var Ne=0;Ne<ce[0]*O[0]*4;Ne++)ie[Ne]=ut[Ne];return this.width=ce,this.height=O,this.data=ie,this}function PM(){var i,n=this.internal.__metadata__.metadata,o=unescape(encodeURIComponent(n));i=this.internal.__metadata__.rawXml?o:'<x:xmpmeta xmlns:x="adobe:ns:meta/"><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceUri+'"><jspdf:metadata>'+o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")+"</jspdf:metadata></rdf:Description></rdf:RDF></x:xmpmeta>",this.internal.__metadata__.metadataObjectNumber=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+i.length+" >>"),this.internal.write("stream"),this.internal.write(i),this.internal.write("endstream"),this.internal.write("endobj")}function NM(){this.internal.__metadata__.metadataObjectNumber&&this.internal.write("/Metadata "+this.internal.__metadata__.metadataObjectNumber+" 0 R")}(function(i){var n,o,c,m,y,v,A,S,I,D=function(oe){return oe=oe||{},this.isStrokeTransparent=oe.isStrokeTransparent||!1,this.strokeOpacity=oe.strokeOpacity||1,this.strokeStyle=oe.strokeStyle||"#000000",this.fillStyle=oe.fillStyle||"#000000",this.isFillTransparent=oe.isFillTransparent||!1,this.fillOpacity=oe.fillOpacity||1,this.font=oe.font||"10px sans-serif",this.textBaseline=oe.textBaseline||"alphabetic",this.textAlign=oe.textAlign||"left",this.lineWidth=oe.lineWidth||1,this.lineJoin=oe.lineJoin||"miter",this.lineCap=oe.lineCap||"butt",this.path=oe.path||[],this.transform=oe.transform!==void 0?oe.transform.clone():new S,this.globalCompositeOperation=oe.globalCompositeOperation||"normal",this.globalAlpha=oe.globalAlpha||1,this.clip_path=oe.clip_path||[],this.currentPoint=oe.currentPoint||new v,this.miterLimit=oe.miterLimit||10,this.lastPoint=oe.lastPoint||new v,this.lineDashOffset=oe.lineDashOffset||0,this.lineDash=oe.lineDash||[],this.margin=oe.margin||[0,0,0,0],this.prevPageLastElemOffset=oe.prevPageLastElemOffset||0,this.ignoreClearRect=typeof oe.ignoreClearRect!="boolean"||oe.ignoreClearRect,this};i.events.push(["initialized",function(){this.context2d=new z(this),n=this.internal.f2,o=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,m=this.internal.getHorizontalCoordinate,y=this.internal.getVerticalCoordinate,v=this.internal.Point,A=this.internal.Rectangle,S=this.internal.Matrix,I=new D}]);var z=function(oe){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var xe=oe;Object.defineProperty(this,"pdf",{get:function(){return xe}});var Ue=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Ue},set:function(Re){Ue=!!Re}});var Ge=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Ge},set:function(Re){Ge=!!Re}});var tt=0;Object.defineProperty(this,"posX",{get:function(){return tt},set:function(Re){isNaN(Re)||(tt=Re)}});var mt=0;Object.defineProperty(this,"posY",{get:function(){return mt},set:function(Re){isNaN(Re)||(mt=Re)}}),Object.defineProperty(this,"margin",{get:function(){return I.margin},set:function(Re){var _r;typeof Re=="number"?_r=[Re,Re,Re,Re]:((_r=new Array(4))[0]=Re[0],_r[1]=Re.length>=2?Re[1]:_r[0],_r[2]=Re.length>=3?Re[2]:_r[0],_r[3]=Re.length>=4?Re[3]:_r[1]),I.margin=_r}});var Pt=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Pt},set:function(Re){Pt=Re}});var Et=0;Object.defineProperty(this,"lastBreak",{get:function(){return Et},set:function(Re){Et=Re}});var $t=[];Object.defineProperty(this,"pageBreaks",{get:function(){return $t},set:function(Re){$t=Re}}),Object.defineProperty(this,"ctx",{get:function(){return I},set:function(Re){Re instanceof D&&(I=Re)}}),Object.defineProperty(this,"path",{get:function(){return I.path},set:function(Re){I.path=Re}});var Ar=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ar},set:function(Re){Ar=Re}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Re){var _r;_r=Z(Re),this.ctx.fillStyle=_r.style,this.ctx.isFillTransparent=_r.a===0,this.ctx.fillOpacity=_r.a,this.pdf.setFillColor(_r.r,_r.g,_r.b,{a:_r.a}),this.pdf.setTextColor(_r.r,_r.g,_r.b,{a:_r.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Re){var _r=Z(Re);this.ctx.strokeStyle=_r.style,this.ctx.isStrokeTransparent=_r.a===0,this.ctx.strokeOpacity=_r.a,_r.a===0?this.pdf.setDrawColor(255,255,255):(_r.a,this.pdf.setDrawColor(_r.r,_r.g,_r.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Re){["butt","round","square"].indexOf(Re)!==-1&&(this.ctx.lineCap=Re,this.pdf.setLineCap(Re))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Re){isNaN(Re)||(this.ctx.lineWidth=Re,this.pdf.setLineWidth(Re))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Re){["bevel","round","miter"].indexOf(Re)!==-1&&(this.ctx.lineJoin=Re,this.pdf.setLineJoin(Re))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Re){isNaN(Re)||(this.ctx.miterLimit=Re,this.pdf.setMiterLimit(Re))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Re){this.ctx.textBaseline=Re}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Re){["right","end","center","left","start"].indexOf(Re)!==-1&&(this.ctx.textAlign=Re)}});var pr=null,br=null,xr=null;Object.defineProperty(this,"fontFaces",{get:function(){return xr},set:function(Re){pr=null,br=null,xr=Re}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Re){var _r;if(this.ctx.font=Re,(_r=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(Re))!==null){var Qr=_r[1];_r[2];var Wr=_r[3],lr=_r[4];_r[5];var Zr=_r[6],Sr=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(lr)[2];lr=Math.floor(Sr==="px"?parseFloat(lr)*this.pdf.internal.scaleFactor:Sr==="em"?parseFloat(lr)*this.pdf.getFontSize():parseFloat(lr)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(lr);var Vr=(function(Je){var ee,ne,Ae=[],De=Je.trim();if(De==="")return ev;if(De in Mw)return[Mw[De]];for(;De!=="";){switch(ne=null,ee=(De=Dw(De)).charAt(0)){case'"':case"'":ne=FM(De.substring(1),ee);break;default:ne=IM(De)}if(ne===null||(Ae.push(ne[0]),(De=Dw(ne[1]))!==""&&De.charAt(0)!==","))return ev;De=De.replace(/^,/,"")}return Ae})(Zr);if(this.fontFaces){var Gr=(function(Je,ee){var ne=Je.getFontList(),Ae=JSON.stringify(ne);if(pr===null||br!==Ae){var De=(function(Xe){var At=[];return Object.keys(Xe).forEach(function(bt){Xe[bt].forEach(function(it){var dt=null;switch(it){case"bold":dt={family:bt,weight:"bold"};break;case"italic":dt={family:bt,style:"italic"};break;case"bolditalic":dt={family:bt,weight:"bold",style:"italic"};break;case"":case"normal":dt={family:bt}}dt!==null&&(dt.ref={name:bt,style:it},At.push(dt))})}),At})(ne);pr=(function(Xe){for(var At={},bt=0;bt<Xe.length;++bt){var it=J1(Xe[bt]),dt=it.family,jt=it.stretch,Bt=it.style,Qe=it.weight;At[dt]=At[dt]||{},At[dt][jt]=At[dt][jt]||{},At[dt][jt][Bt]=At[dt][jt][Bt]||{},At[dt][jt][Bt][Qe]=it}return At})(De.concat(ee)),br=Ae}return pr})(this.pdf,this.fontFaces),mn=Vr.map(function(Je){return{family:Je,stretch:"normal",weight:Wr,style:Qr}}),Cn=(function(Je,ee,ne){for(var Ae=(ne=ne||{}).defaultFontFamily||"times",De=Object.assign({},TM,ne.genericFontFamilies||{}),Xe=null,At=null,bt=0;bt<ee.length;++bt)if(De[(Xe=J1(ee[bt])).family]&&(Xe.family=De[Xe.family]),Je.hasOwnProperty(Xe.family)){At=Je[Xe.family];break}if(!(At=At||Je[Ae]))throw new Error("Could not find a font-family for the rule '"+Uw(Xe)+"' and default family '"+Ae+"'.");if(At=(function(it,dt){if(dt[it])return dt[it];var jt=jv[it],Bt=jt<=jv.normal?-1:1,Qe=Lw(dt,$5,jt,Bt);if(!Qe)throw new Error("Could not find a matching font-stretch value for "+it);return Qe})(Xe.stretch,At),At=(function(it,dt){if(dt[it])return dt[it];for(var jt=Y5[it],Bt=0;Bt<jt.length;++Bt)if(dt[jt[Bt]])return dt[jt[Bt]];throw new Error("Could not find a matching font-style for "+it)})(Xe.style,At),!(At=(function(it,dt){if(dt[it])return dt[it];if(it===400&&dt[500])return dt[500];if(it===500&&dt[400])return dt[400];var jt=EM[it],Bt=Lw(dt,J5,jt,it<400?-1:1);if(!Bt)throw new Error("Could not find a matching font-weight for value "+it);return Bt})(Xe.weight,At)))throw new Error("Failed to resolve a font for the rule '"+Uw(Xe)+"'.");return At})(Gr,mn);this.pdf.setFont(Cn.ref.name,Cn.ref.style)}else{var An="";(Wr==="bold"||parseInt(Wr,10)>=700||Qr==="bold")&&(An="bold"),Qr==="italic"&&(An+="italic"),An.length===0&&(An="normal");for(var Fn="",Sn={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Or=0;Or<Vr.length;Or++){if(this.pdf.internal.getFont(Vr[Or],An,{noFallback:!0,disableWarning:!0})!==void 0){Fn=Vr[Or];break}if(An==="bolditalic"&&this.pdf.internal.getFont(Vr[Or],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Fn=Vr[Or],An="bold";else if(this.pdf.internal.getFont(Vr[Or],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Fn=Vr[Or],An="normal";break}}if(Fn===""){for(var gn=0;gn<Vr.length;gn++)if(Sn[Vr[gn]]){Fn=Sn[Vr[gn]];break}}Fn=Fn===""?"Times":Fn,this.pdf.setFont(Fn,An)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Re){this.ctx.globalCompositeOperation=Re}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Re){this.ctx.globalAlpha=Re}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Re){this.ctx.lineDashOffset=Re,Fe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Re){this.ctx.lineDash=Re,Fe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Re){this.ctx.ignoreClearRect=!!Re}})};z.prototype.setLineDash=function(oe){this.lineDash=oe},z.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},z.prototype.fill=function(){Le.call(this,"fill",!1)},z.prototype.stroke=function(){Le.call(this,"stroke",!1)},z.prototype.beginPath=function(){this.path=[{type:"begin"}]},z.prototype.moveTo=function(oe,xe){if(isNaN(oe)||isNaN(xe))throw Fa.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Ue=this.ctx.transform.applyToPoint(new v(oe,xe));this.path.push({type:"mt",x:Ue.x,y:Ue.y}),this.ctx.lastPoint=new v(oe,xe)},z.prototype.closePath=function(){var oe=new v(0,0),xe=0;for(xe=this.path.length-1;xe!==-1;xe--)if(this.path[xe].type==="begin"&&oa(this.path[xe+1])==="object"&&typeof this.path[xe+1].x=="number"){oe=new v(this.path[xe+1].x,this.path[xe+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new v(oe.x,oe.y)},z.prototype.lineTo=function(oe,xe){if(isNaN(oe)||isNaN(xe))throw Fa.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Ue=this.ctx.transform.applyToPoint(new v(oe,xe));this.path.push({type:"lt",x:Ue.x,y:Ue.y}),this.ctx.lastPoint=new v(Ue.x,Ue.y)},z.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),Le.call(this,null,!0)},z.prototype.quadraticCurveTo=function(oe,xe,Ue,Ge){if(isNaN(Ue)||isNaN(Ge)||isNaN(oe)||isNaN(xe))throw Fa.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var tt=this.ctx.transform.applyToPoint(new v(Ue,Ge)),mt=this.ctx.transform.applyToPoint(new v(oe,xe));this.path.push({type:"qct",x1:mt.x,y1:mt.y,x:tt.x,y:tt.y}),this.ctx.lastPoint=new v(tt.x,tt.y)},z.prototype.bezierCurveTo=function(oe,xe,Ue,Ge,tt,mt){if(isNaN(tt)||isNaN(mt)||isNaN(oe)||isNaN(xe)||isNaN(Ue)||isNaN(Ge))throw Fa.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Pt=this.ctx.transform.applyToPoint(new v(tt,mt)),Et=this.ctx.transform.applyToPoint(new v(oe,xe)),$t=this.ctx.transform.applyToPoint(new v(Ue,Ge));this.path.push({type:"bct",x1:Et.x,y1:Et.y,x2:$t.x,y2:$t.y,x:Pt.x,y:Pt.y}),this.ctx.lastPoint=new v(Pt.x,Pt.y)},z.prototype.arc=function(oe,xe,Ue,Ge,tt,mt){if(isNaN(oe)||isNaN(xe)||isNaN(Ue)||isNaN(Ge)||isNaN(tt))throw Fa.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(mt=!!mt,!this.ctx.transform.isIdentity){var Pt=this.ctx.transform.applyToPoint(new v(oe,xe));oe=Pt.x,xe=Pt.y;var Et=this.ctx.transform.applyToPoint(new v(0,Ue)),$t=this.ctx.transform.applyToPoint(new v(0,0));Ue=Math.sqrt(Math.pow(Et.x-$t.x,2)+Math.pow(Et.y-$t.y,2))}Math.abs(tt-Ge)>=2*Math.PI&&(Ge=0,tt=2*Math.PI),this.path.push({type:"arc",x:oe,y:xe,radius:Ue,startAngle:Ge,endAngle:tt,counterclockwise:mt})},z.prototype.arcTo=function(oe,xe,Ue,Ge,tt){throw new Error("arcTo not implemented.")},z.prototype.rect=function(oe,xe,Ue,Ge){if(isNaN(oe)||isNaN(xe)||isNaN(Ue)||isNaN(Ge))throw Fa.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(oe,xe),this.lineTo(oe+Ue,xe),this.lineTo(oe+Ue,xe+Ge),this.lineTo(oe,xe+Ge),this.lineTo(oe,xe),this.lineTo(oe+Ue,xe),this.lineTo(oe,xe)},z.prototype.fillRect=function(oe,xe,Ue,Ge){if(isNaN(oe)||isNaN(xe)||isNaN(Ue)||isNaN(Ge))throw Fa.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!O.call(this)){var tt={};this.lineCap!=="butt"&&(tt.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(tt.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(oe,xe,Ue,Ge),this.fill(),tt.hasOwnProperty("lineCap")&&(this.lineCap=tt.lineCap),tt.hasOwnProperty("lineJoin")&&(this.lineJoin=tt.lineJoin)}},z.prototype.strokeRect=function(oe,xe,Ue,Ge){if(isNaN(oe)||isNaN(xe)||isNaN(Ue)||isNaN(Ge))throw Fa.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");ce.call(this)||(this.beginPath(),this.rect(oe,xe,Ue,Ge),this.stroke())},z.prototype.clearRect=function(oe,xe,Ue,Ge){if(isNaN(oe)||isNaN(xe)||isNaN(Ue)||isNaN(Ge))throw Fa.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(oe,xe,Ue,Ge))},z.prototype.save=function(oe){oe=typeof oe!="boolean"||oe;for(var xe=this.pdf.internal.getCurrentPageInfo().pageNumber,Ue=0;Ue<this.pdf.internal.getNumberOfPages();Ue++)this.pdf.setPage(Ue+1),this.pdf.internal.out("q");if(this.pdf.setPage(xe),oe){this.ctx.fontSize=this.pdf.internal.getFontSize();var Ge=new D(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Ge}},z.prototype.restore=function(oe){oe=typeof oe!="boolean"||oe;for(var xe=this.pdf.internal.getCurrentPageInfo().pageNumber,Ue=0;Ue<this.pdf.internal.getNumberOfPages();Ue++)this.pdf.setPage(Ue+1),this.pdf.internal.out("Q");this.pdf.setPage(xe),oe&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},z.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var Z=function(oe){var xe,Ue,Ge,tt;if(oe.isCanvasGradient===!0&&(oe=oe.getColor()),!oe)return{r:0,g:0,b:0,a:0,style:oe};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(oe))xe=0,Ue=0,Ge=0,tt=0;else{var mt=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(oe);if(mt!==null)xe=parseInt(mt[1]),Ue=parseInt(mt[2]),Ge=parseInt(mt[3]),tt=1;else if((mt=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(oe))!==null)xe=parseInt(mt[1]),Ue=parseInt(mt[2]),Ge=parseInt(mt[3]),tt=parseFloat(mt[4]);else{if(tt=1,typeof oe=="string"&&oe.charAt(0)!=="#"){var Pt=new V5(oe);oe=Pt.ok?Pt.toHex():"#000000"}oe.length===4?(xe=oe.substring(1,2),xe+=xe,Ue=oe.substring(2,3),Ue+=Ue,Ge=oe.substring(3,4),Ge+=Ge):(xe=oe.substring(1,3),Ue=oe.substring(3,5),Ge=oe.substring(5,7)),xe=parseInt(xe,16),Ue=parseInt(Ue,16),Ge=parseInt(Ge,16)}}return{r:xe,g:Ue,b:Ge,a:tt,style:oe}},O=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},ce=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};z.prototype.fillText=function(oe,xe,Ue,Ge){if(isNaN(xe)||isNaN(Ue)||typeof oe!="string")throw Fa.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Ge=isNaN(Ge)?void 0:Ge,!O.call(this)){var tt=st(this.ctx.transform.rotation),mt=this.ctx.transform.scaleX;Te.call(this,{text:oe,x:xe,y:Ue,scale:mt,angle:tt,align:this.textAlign,maxWidth:Ge})}},z.prototype.strokeText=function(oe,xe,Ue,Ge){if(isNaN(xe)||isNaN(Ue)||typeof oe!="string")throw Fa.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!ce.call(this)){Ge=isNaN(Ge)?void 0:Ge;var tt=st(this.ctx.transform.rotation),mt=this.ctx.transform.scaleX;Te.call(this,{text:oe,x:xe,y:Ue,scale:mt,renderingMode:"stroke",angle:tt,align:this.textAlign,maxWidth:Ge})}},z.prototype.measureText=function(oe){if(typeof oe!="string")throw Fa.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var xe=this.pdf,Ue=this.pdf.internal.scaleFactor,Ge=xe.internal.getFontSize(),tt=xe.getStringUnitWidth(oe)*Ge/xe.internal.scaleFactor;return new function(mt){var Pt=(mt=mt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Pt}}),this}({width:tt*=Math.round(96*Ue/72*1e4)/1e4})},z.prototype.scale=function(oe,xe){if(isNaN(oe)||isNaN(xe))throw Fa.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Ue=new S(oe,0,0,xe,0,0);this.ctx.transform=this.ctx.transform.multiply(Ue)},z.prototype.rotate=function(oe){if(isNaN(oe))throw Fa.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var xe=new S(Math.cos(oe),Math.sin(oe),-Math.sin(oe),Math.cos(oe),0,0);this.ctx.transform=this.ctx.transform.multiply(xe)},z.prototype.translate=function(oe,xe){if(isNaN(oe)||isNaN(xe))throw Fa.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Ue=new S(1,0,0,1,oe,xe);this.ctx.transform=this.ctx.transform.multiply(Ue)},z.prototype.transform=function(oe,xe,Ue,Ge,tt,mt){if(isNaN(oe)||isNaN(xe)||isNaN(Ue)||isNaN(Ge)||isNaN(tt)||isNaN(mt))throw Fa.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Pt=new S(oe,xe,Ue,Ge,tt,mt);this.ctx.transform=this.ctx.transform.multiply(Pt)},z.prototype.setTransform=function(oe,xe,Ue,Ge,tt,mt){oe=isNaN(oe)?1:oe,xe=isNaN(xe)?0:xe,Ue=isNaN(Ue)?0:Ue,Ge=isNaN(Ge)?1:Ge,tt=isNaN(tt)?0:tt,mt=isNaN(mt)?0:mt,this.ctx.transform=new S(oe,xe,Ue,Ge,tt,mt)};var ie=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};z.prototype.drawImage=function(oe,xe,Ue,Ge,tt,mt,Pt,Et,$t){var Ar=this.pdf.getImageProperties(oe),pr=1,br=1,xr=1,Re=1;Ge!==void 0&&Et!==void 0&&(xr=Et/Ge,Re=$t/tt,pr=Ar.width/Ge*Et/Ge,br=Ar.height/tt*$t/tt),mt===void 0&&(mt=xe,Pt=Ue,xe=0,Ue=0),Ge!==void 0&&Et===void 0&&(Et=Ge,$t=tt),Ge===void 0&&Et===void 0&&(Et=Ar.width,$t=Ar.height);var _r=this.ctx.transform.decompose(),Qr=st(_r.rotate.shx),Wr=new S,lr=(Wr=(Wr=(Wr=Wr.multiply(_r.translate)).multiply(_r.skew)).multiply(_r.scale)).applyToRectangle(new A(mt-xe*xr,Pt-Ue*Re,Ge*pr,tt*br));if(this.autoPaging){for(var Zr,Sr=W.call(this,lr),Vr=[],Gr=0;Gr<Sr.length;Gr+=1)Vr.indexOf(Sr[Gr])===-1&&Vr.push(Sr[Gr]);Be(Vr);for(var mn=Vr[0],Cn=Vr[Vr.length-1],An=mn;An<Cn+1;An++){this.pdf.setPage(An);var Fn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Sn=An===1?this.posY+this.margin[0]:this.margin[0],Or=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],gn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Je=An===1?0:Or+(An-2)*gn;if(this.ctx.clip_path.length!==0){var ee=this.path;Zr=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ye(Zr,this.posX+this.margin[3],-Je+Sn+this.ctx.prevPageLastElemOffset),lt.call(this,"fill",!0),this.path=ee}var ne=JSON.parse(JSON.stringify(lr));ne=ye([ne],this.posX+this.margin[3],-Je+Sn+this.ctx.prevPageLastElemOffset)[0];var Ae=(An>mn||An<Cn)&&ie.call(this);Ae&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Fn,gn,null).clip().discardPath()),this.pdf.addImage(oe,"JPEG",ne.x,ne.y,ne.w,ne.h,null,null,Qr),Ae&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(oe,"JPEG",lr.x,lr.y,lr.w,lr.h,null,null,Qr)};var W=function(oe,xe,Ue){var Ge=[];xe=xe||this.pdf.internal.pageSize.width,Ue=Ue||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var tt=this.posY+this.ctx.prevPageLastElemOffset;switch(oe.type){default:case"mt":case"lt":Ge.push(Math.floor((oe.y+tt)/Ue)+1);break;case"arc":Ge.push(Math.floor((oe.y+tt-oe.radius)/Ue)+1),Ge.push(Math.floor((oe.y+tt+oe.radius)/Ue)+1);break;case"qct":var mt=xt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,oe.x1,oe.y1,oe.x,oe.y);Ge.push(Math.floor((mt.y+tt)/Ue)+1),Ge.push(Math.floor((mt.y+mt.h+tt)/Ue)+1);break;case"bct":var Pt=Ct(this.ctx.lastPoint.x,this.ctx.lastPoint.y,oe.x1,oe.y1,oe.x2,oe.y2,oe.x,oe.y);Ge.push(Math.floor((Pt.y+tt)/Ue)+1),Ge.push(Math.floor((Pt.y+Pt.h+tt)/Ue)+1);break;case"rect":Ge.push(Math.floor((oe.y+tt)/Ue)+1),Ge.push(Math.floor((oe.y+oe.h+tt)/Ue)+1)}for(var Et=0;Et<Ge.length;Et+=1)for(;this.pdf.internal.getNumberOfPages()<Ge[Et];)le.call(this);return Ge},le=function(){var oe=this.fillStyle,xe=this.strokeStyle,Ue=this.font,Ge=this.lineCap,tt=this.lineWidth,mt=this.lineJoin;this.pdf.addPage(),this.fillStyle=oe,this.strokeStyle=xe,this.font=Ue,this.lineCap=Ge,this.lineWidth=tt,this.lineJoin=mt},ye=function(oe,xe,Ue){for(var Ge=0;Ge<oe.length;Ge++)switch(oe[Ge].type){case"bct":oe[Ge].x2+=xe,oe[Ge].y2+=Ue;case"qct":oe[Ge].x1+=xe,oe[Ge].y1+=Ue;default:oe[Ge].x+=xe,oe[Ge].y+=Ue}return oe},Be=function(oe){return oe.sort(function(xe,Ue){return xe-Ue})},Le=function(oe,xe){var Ue=this.fillStyle,Ge=this.strokeStyle,tt=this.lineCap,mt=this.lineWidth,Pt=Math.abs(mt*this.ctx.transform.scaleX),Et=this.lineJoin;if(this.autoPaging){for(var $t,Ar,pr=JSON.parse(JSON.stringify(this.path)),br=JSON.parse(JSON.stringify(this.path)),xr=[],Re=0;Re<br.length;Re++)if(br[Re].x!==void 0)for(var _r=W.call(this,br[Re]),Qr=0;Qr<_r.length;Qr+=1)xr.indexOf(_r[Qr])===-1&&xr.push(_r[Qr]);for(var Wr=0;Wr<xr.length;Wr++)for(;this.pdf.internal.getNumberOfPages()<xr[Wr];)le.call(this);Be(xr);for(var lr=xr[0],Zr=xr[xr.length-1],Sr=lr;Sr<Zr+1;Sr++){this.pdf.setPage(Sr),this.fillStyle=Ue,this.strokeStyle=Ge,this.lineCap=tt,this.lineWidth=Pt,this.lineJoin=Et;var Vr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Gr=Sr===1?this.posY+this.margin[0]:this.margin[0],mn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Cn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],An=Sr===1?0:mn+(Sr-2)*Cn;if(this.ctx.clip_path.length!==0){var Fn=this.path;$t=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ye($t,this.posX+this.margin[3],-An+Gr+this.ctx.prevPageLastElemOffset),lt.call(this,oe,!0),this.path=Fn}if(Ar=JSON.parse(JSON.stringify(pr)),this.path=ye(Ar,this.posX+this.margin[3],-An+Gr+this.ctx.prevPageLastElemOffset),xe===!1||Sr===0){var Sn=(Sr>lr||Sr<Zr)&&ie.call(this);Sn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Vr,Cn,null).clip().discardPath()),lt.call(this,oe,xe),Sn&&this.pdf.restoreGraphicsState()}this.lineWidth=mt}this.path=pr}else this.lineWidth=Pt,lt.call(this,oe,xe),this.lineWidth=mt},lt=function(oe,xe){if((oe!=="stroke"||xe||!ce.call(this))&&(oe==="stroke"||xe||!O.call(this))){for(var Ue,Ge,tt=[],mt=this.path,Pt=0;Pt<mt.length;Pt++){var Et=mt[Pt];switch(Et.type){case"begin":tt.push({begin:!0});break;case"close":tt.push({close:!0});break;case"mt":tt.push({start:Et,deltas:[],abs:[]});break;case"lt":var $t=tt.length;if(mt[Pt-1]&&!isNaN(mt[Pt-1].x)&&(Ue=[Et.x-mt[Pt-1].x,Et.y-mt[Pt-1].y],$t>0)){for(;$t>=0;$t--)if(tt[$t-1].close!==!0&&tt[$t-1].begin!==!0){tt[$t-1].deltas.push(Ue),tt[$t-1].abs.push(Et);break}}break;case"bct":Ue=[Et.x1-mt[Pt-1].x,Et.y1-mt[Pt-1].y,Et.x2-mt[Pt-1].x,Et.y2-mt[Pt-1].y,Et.x-mt[Pt-1].x,Et.y-mt[Pt-1].y],tt[tt.length-1].deltas.push(Ue);break;case"qct":var Ar=mt[Pt-1].x+2/3*(Et.x1-mt[Pt-1].x),pr=mt[Pt-1].y+2/3*(Et.y1-mt[Pt-1].y),br=Et.x+2/3*(Et.x1-Et.x),xr=Et.y+2/3*(Et.y1-Et.y),Re=Et.x,_r=Et.y;Ue=[Ar-mt[Pt-1].x,pr-mt[Pt-1].y,br-mt[Pt-1].x,xr-mt[Pt-1].y,Re-mt[Pt-1].x,_r-mt[Pt-1].y],tt[tt.length-1].deltas.push(Ue);break;case"arc":tt.push({deltas:[],abs:[],arc:!0}),Array.isArray(tt[tt.length-1].abs)&&tt[tt.length-1].abs.push(Et)}}Ge=xe?null:oe==="stroke"?"stroke":"fill";for(var Qr=!1,Wr=0;Wr<tt.length;Wr++)if(tt[Wr].arc)for(var lr=tt[Wr].abs,Zr=0;Zr<lr.length;Zr++){var Sr=lr[Zr];Sr.type==="arc"?Ne.call(this,Sr.x,Sr.y,Sr.radius,Sr.startAngle,Sr.endAngle,Sr.counterclockwise,void 0,xe,!Qr):Ye.call(this,Sr.x,Sr.y),Qr=!0}else if(tt[Wr].close===!0)this.pdf.internal.out("h"),Qr=!1;else if(tt[Wr].begin!==!0){var Vr=tt[Wr].start.x,Gr=tt[Wr].start.y;Ve.call(this,tt[Wr].deltas,Vr,Gr),Qr=!0}Ge&&Ce.call(this,Ge),xe&&_t.call(this)}},ft=function(oe){var xe=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Ue=xe*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return oe-Ue;case"top":return oe+xe-Ue;case"hanging":return oe+xe-2*Ue;case"middle":return oe+xe/2-Ue;default:return oe}},ut=function(oe){return oe+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};z.prototype.createLinearGradient=function(){var oe=function(){};return oe.colorStops=[],oe.addColorStop=function(xe,Ue){this.colorStops.push([xe,Ue])},oe.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},oe.isCanvasGradient=!0,oe},z.prototype.createPattern=function(){return this.createLinearGradient()},z.prototype.createRadialGradient=function(){return this.createLinearGradient()};var Ne=function(oe,xe,Ue,Ge,tt,mt,Pt,Et,$t){for(var Ar=ke.call(this,Ue,Ge,tt,mt),pr=0;pr<Ar.length;pr++){var br=Ar[pr];pr===0&&($t?_e.call(this,br.x1+oe,br.y1+xe):Ye.call(this,br.x1+oe,br.y1+xe)),wt.call(this,oe,xe,br.x2,br.y2,br.x3,br.y3,br.x4,br.y4)}Et?_t.call(this):Ce.call(this,Pt)},Ce=function(oe){switch(oe){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},_t=function(){this.pdf.clip(),this.pdf.discardPath()},_e=function(oe,xe){this.pdf.internal.out(o(oe)+" "+c(xe)+" m")},Te=function(oe){var xe;switch(oe.align){case"right":case"end":xe="right";break;case"center":xe="center";break;default:xe="left"}var Ue,Ge,tt,mt=this.pdf.getTextDimensions(oe.text),Pt=ft.call(this,oe.y),Et=ut.call(this,Pt)-mt.h,$t=this.ctx.transform.applyToPoint(new v(oe.x,Pt));if(this.autoPaging){var Ar=this.ctx.transform.decompose(),pr=new S;pr=(pr=(pr=pr.multiply(Ar.translate)).multiply(Ar.skew)).multiply(Ar.scale);for(var br=this.ctx.transform.applyToRectangle(new A(oe.x,Pt,mt.w,mt.h)),xr=pr.applyToRectangle(new A(oe.x,Et,mt.w,mt.h)),Re=W.call(this,xr),_r=[],Qr=0;Qr<Re.length;Qr+=1)_r.indexOf(Re[Qr])===-1&&_r.push(Re[Qr]);Be(_r);for(var Wr=_r[0],lr=_r[_r.length-1],Zr=Wr;Zr<lr+1;Zr++){this.pdf.setPage(Zr);var Sr=Zr===1?this.posY+this.margin[0]:this.margin[0],Vr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Gr=this.pdf.internal.pageSize.height-this.margin[2],mn=Gr-this.margin[0],Cn=this.pdf.internal.pageSize.width-this.margin[1],An=Cn-this.margin[3],Fn=Zr===1?0:Vr+(Zr-2)*mn;if(this.ctx.clip_path.length!==0){var Sn=this.path;Ue=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ye(Ue,this.posX+this.margin[3],-1*Fn+Sr),lt.call(this,"fill",!0),this.path=Sn}var Or=ye([JSON.parse(JSON.stringify(xr))],this.posX+this.margin[3],-Fn+Sr+this.ctx.prevPageLastElemOffset)[0];oe.scale>=.01&&(Ge=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ge*oe.scale),tt=this.lineWidth,this.lineWidth=tt*oe.scale);var gn=this.autoPaging!=="text";if(gn||Or.y+Or.h<=Gr){if(gn||Or.y>=Sr&&Or.x<=Cn){var Je=gn?oe.text:this.pdf.splitTextToSize(oe.text,oe.maxWidth||Cn-Or.x)[0],ee=ye([JSON.parse(JSON.stringify(br))],this.posX+this.margin[3],-Fn+Sr+this.ctx.prevPageLastElemOffset)[0],ne=gn&&(Zr>Wr||Zr<lr)&&ie.call(this);ne&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],An,mn,null).clip().discardPath()),this.pdf.text(Je,ee.x,ee.y,{angle:oe.angle,align:xe,renderingMode:oe.renderingMode}),ne&&this.pdf.restoreGraphicsState()}}else Or.y<Gr&&(this.ctx.prevPageLastElemOffset+=Gr-Or.y);oe.scale>=.01&&(this.pdf.setFontSize(Ge),this.lineWidth=tt)}}else oe.scale>=.01&&(Ge=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ge*oe.scale),tt=this.lineWidth,this.lineWidth=tt*oe.scale),this.pdf.text(oe.text,$t.x+this.posX,$t.y+this.posY,{angle:oe.angle,align:xe,renderingMode:oe.renderingMode,maxWidth:oe.maxWidth}),oe.scale>=.01&&(this.pdf.setFontSize(Ge),this.lineWidth=tt)},Ye=function(oe,xe,Ue,Ge){Ue=Ue||0,Ge=Ge||0,this.pdf.internal.out(o(oe+Ue)+" "+c(xe+Ge)+" l")},Ve=function(oe,xe,Ue){return this.pdf.lines(oe,xe,Ue,null,null)},wt=function(oe,xe,Ue,Ge,tt,mt,Pt,Et){this.pdf.internal.out([n(m(Ue+oe)),n(y(Ge+xe)),n(m(tt+oe)),n(y(mt+xe)),n(m(Pt+oe)),n(y(Et+xe)),"c"].join(" "))},ke=function(oe,xe,Ue,Ge){for(var tt=2*Math.PI,mt=Math.PI/2;xe>Ue;)xe-=tt;var Pt=Math.abs(Ue-xe);Pt<tt&&Ge&&(Pt=tt-Pt);for(var Et=[],$t=Ge?-1:1,Ar=xe;Pt>1e-5;){var pr=Ar+$t*Math.min(Pt,mt);Et.push(ot.call(this,oe,Ar,pr)),Pt-=Math.abs(pr-Ar),Ar=pr}return Et},ot=function(oe,xe,Ue){var Ge=(Ue-xe)/2,tt=oe*Math.cos(Ge),mt=oe*Math.sin(Ge),Pt=tt,Et=-mt,$t=Pt*Pt+Et*Et,Ar=$t+Pt*tt+Et*mt,pr=4/3*(Math.sqrt(2*$t*Ar)-Ar)/(Pt*mt-Et*tt),br=Pt-pr*Et,xr=Et+pr*Pt,Re=br,_r=-xr,Qr=Ge+xe,Wr=Math.cos(Qr),lr=Math.sin(Qr);return{x1:oe*Math.cos(xe),y1:oe*Math.sin(xe),x2:br*Wr-xr*lr,y2:br*lr+xr*Wr,x3:Re*Wr-_r*lr,y3:Re*lr+_r*Wr,x4:oe*Math.cos(Ue),y4:oe*Math.sin(Ue)}},st=function(oe){return 180*oe/Math.PI},xt=function(oe,xe,Ue,Ge,tt,mt){var Pt=oe+.5*(Ue-oe),Et=xe+.5*(Ge-xe),$t=tt+.5*(Ue-tt),Ar=mt+.5*(Ge-mt),pr=Math.min(oe,tt,Pt,$t),br=Math.max(oe,tt,Pt,$t),xr=Math.min(xe,mt,Et,Ar),Re=Math.max(xe,mt,Et,Ar);return new A(pr,xr,br-pr,Re-xr)},Ct=function(oe,xe,Ue,Ge,tt,mt,Pt,Et){var $t,Ar,pr,br,xr,Re,_r,Qr,Wr,lr,Zr,Sr,Vr,Gr,mn=Ue-oe,Cn=Ge-xe,An=tt-Ue,Fn=mt-Ge,Sn=Pt-tt,Or=Et-mt;for(Ar=0;Ar<41;Ar++)Wr=(_r=(pr=oe+($t=Ar/40)*mn)+$t*((xr=Ue+$t*An)-pr))+$t*(xr+$t*(tt+$t*Sn-xr)-_r),lr=(Qr=(br=xe+$t*Cn)+$t*((Re=Ge+$t*Fn)-br))+$t*(Re+$t*(mt+$t*Or-Re)-Qr),Ar==0?(Zr=Wr,Sr=lr,Vr=Wr,Gr=lr):(Zr=Math.min(Zr,Wr),Sr=Math.min(Sr,lr),Vr=Math.max(Vr,Wr),Gr=Math.max(Gr,lr));return new A(Math.round(Zr),Math.round(Sr),Math.round(Vr-Zr),Math.round(Gr-Sr))},Fe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var oe,xe,Ue=(oe=this.ctx.lineDash,xe=this.ctx.lineDashOffset,JSON.stringify({lineDash:oe,lineDashOffset:xe}));this.prevLineDash!==Ue&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Ue)}}})(hn.API),(function(i){var n=function(v){var A,S,I,D,z,Z,O,ce,ie,W;for(S=[],I=0,D=(v+=A="\0\0\0\0".slice(v.length%4||4)).length;D>I;I+=4)(z=(v.charCodeAt(I)<<24)+(v.charCodeAt(I+1)<<16)+(v.charCodeAt(I+2)<<8)+v.charCodeAt(I+3))!==0?(Z=(z=((z=((z=((z=(z-(W=z%85))/85)-(ie=z%85))/85)-(ce=z%85))/85)-(O=z%85))/85)%85,S.push(Z+33,O+33,ce+33,ie+33,W+33)):S.push(122);return(function(le,ye){for(var Be=ye;Be>0;Be--)le.pop()})(S,A.length),String.fromCharCode.apply(String,S)+"~>"},o=function(v){var A,S,I,D,z,Z=String,O="length",ce=255,ie="charCodeAt",W="slice",le="replace";for(v[W](-2),v=v[W](0,-2)[le](/\s/g,"")[le]("z","!!!!!"),I=[],D=0,z=(v+=A="uuuuu"[W](v[O]%5||5))[O];z>D;D+=5)S=52200625*(v[ie](D)-33)+614125*(v[ie](D+1)-33)+7225*(v[ie](D+2)-33)+85*(v[ie](D+3)-33)+(v[ie](D+4)-33),I.push(ce&S>>24,ce&S>>16,ce&S>>8,ce&S);return(function(ye,Be){for(var Le=Be;Le>0;Le--)ye.pop()})(I,A[O]),Z.fromCharCode.apply(Z,I)},c=function(v){return v.split("").map(function(A){return("0"+A.charCodeAt().toString(16)).slice(-2)}).join("")+">"},m=function(v){var A=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((v=v.replace(/\s/g,"")).indexOf(">")!==-1&&(v=v.substr(0,v.indexOf(">"))),v.length%2&&(v+="0"),A.test(v)===!1)return"";for(var S="",I=0;I<v.length;I+=2)S+=String.fromCharCode("0x"+(v[I]+v[I+1]));return S},y=function(v){for(var A=new Uint8Array(v.length),S=v.length;S--;)A[S]=v.charCodeAt(S);return(A=Pv(A)).reduce(function(I,D){return I+String.fromCharCode(D)},"")};i.processDataByFilters=function(v,A){var S=0,I=v||"",D=[];for(typeof(A=A||[])=="string"&&(A=[A]),S=0;S<A.length;S+=1)switch(A[S]){case"ASCII85Decode":case"/ASCII85Decode":I=o(I),D.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":I=n(I),D.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":I=m(I),D.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":I=c(I),D.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":I=y(I),D.push("/FlateDecode");break;default:throw new Error('The filter: "'+A[S]+'" is not implemented')}return{data:I,reverseChain:D.reverse().join(" ")}}})(hn.API),(function(i){i.loadFile=function(n,o,c){return(function(m,y,v){y=y!==!1,v=typeof v=="function"?v:function(){};var A=void 0;try{A=(function(S,I,D){var z=new XMLHttpRequest,Z=0,O=function(ce){var ie=ce.length,W=[],le=String.fromCharCode;for(Z=0;Z<ie;Z+=1)W.push(le(255&ce.charCodeAt(Z)));return W.join("")};if(z.open("GET",S,!I),z.overrideMimeType("text/plain; charset=x-user-defined"),I===!1&&(z.onload=function(){z.status===200?D(O(this.responseText)):D(void 0)}),z.send(null),I&&z.status===200)return O(z.responseText)})(m,y,v)}catch{}return A})(n,o,c)},i.allowFsRead=void 0,i.loadImageFile=i.loadFile})(hn.API),(function(i){function n(){return(Pn.html2canvas?Promise.resolve(Pn.html2canvas):P1(()=>Promise.resolve().then(()=>bR),[])).catch(function(A){return Promise.reject(new Error("Could not load html2canvas: "+A))}).then(function(A){return A.default?A.default:A})}function o(){return(Pn.DOMPurify?Promise.resolve(Pn.DOMPurify):P1(()=>import("./purify.es-Bzr520pe.js"),[])).catch(function(A){return Promise.reject(new Error("Could not load dompurify: "+A))}).then(function(A){return A.default?A.default:A})}var c=function(A){var S=oa(A);return S==="undefined"?"undefined":S==="string"||A instanceof String?"string":S==="number"||A instanceof Number?"number":S==="function"||A instanceof Function?"function":A&&A.constructor===Array?"array":A&&A.nodeType===1?"element":S==="object"?"object":"unknown"},m=function(A,S){var I=document.createElement(A);for(var D in S.className&&(I.className=S.className),S.innerHTML&&S.dompurify&&(I.innerHTML=S.dompurify.sanitize(S.innerHTML)),S.style)I.style[D]=S.style[D];return I},y=function A(S,I){for(var D=S.nodeType===3?document.createTextNode(S.nodeValue):S.cloneNode(!1),z=S.firstChild;z;z=z.nextSibling)I!==!0&&z.nodeType===1&&z.nodeName==="SCRIPT"||D.appendChild(A(z,I));return S.nodeType===1&&(S.nodeName==="CANVAS"?(D.width=S.width,D.height=S.height,D.getContext("2d").drawImage(S,0,0)):S.nodeName!=="TEXTAREA"&&S.nodeName!=="SELECT"||(D.value=S.value),D.addEventListener("load",function(){D.scrollTop=S.scrollTop,D.scrollLeft=S.scrollLeft},!0)),D},v=function A(S){var I=Object.assign(A.convert(Promise.resolve()),JSON.parse(JSON.stringify(A.template))),D=A.convert(Promise.resolve(),I);return(D=D.setProgress(1,A,1,[A])).set(S)};(v.prototype=Object.create(Promise.prototype)).constructor=v,v.convert=function(A,S){return A.__proto__=S||v.prototype,A},v.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},v.prototype.from=function(A,S){return this.then(function(){switch(S=S||(function(I){switch(c(I)){case"string":return"string";case"element":return I.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(A),S){case"string":return this.then(o).then(function(I){return this.set({src:m("div",{innerHTML:A,dompurify:I})})});case"element":return this.set({src:A});case"canvas":return this.set({canvas:A});case"img":return this.set({img:A});default:return this.error("Unknown source type.")}})},v.prototype.to=function(A){switch(A){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},v.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var A={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},S=y(this.prop.src,this.opt.html2canvas.javascriptEnabled);S.tagName==="BODY"&&(A.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=m("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=m("div",{className:"html2pdf__container",style:A}),this.prop.container.appendChild(S),this.prop.container.firstChild.appendChild(m("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},v.prototype.toCanvas=function(){var A=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(A).then(n).then(function(S){var I=Object.assign({},this.opt.html2canvas);return delete I.onrendered,S(this.prop.container,I)}).then(function(S){(this.opt.html2canvas.onrendered||function(){})(S),this.prop.canvas=S,document.body.removeChild(this.prop.overlay)})},v.prototype.toContext2d=function(){var A=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(A).then(n).then(function(S){var I=this.opt.jsPDF,D=this.opt.fontFaces,z=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,Z=Object.assign({async:!0,allowTaint:!0,scale:z,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete Z.onrendered,I.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,I.context2d.posX=this.opt.x,I.context2d.posY=this.opt.y,I.context2d.margin=this.opt.margin,I.context2d.fontFaces=D,D)for(var O=0;O<D.length;++O){var ce=D[O],ie=ce.src.find(function(W){return W.format==="truetype"});ie&&I.addFont(ie.url,ce.ref.name,ce.ref.style)}return Z.windowHeight=Z.windowHeight||0,Z.windowHeight=Z.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):Z.windowHeight,I.context2d.save(!0),S(this.prop.container,Z)}).then(function(S){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(S),this.prop.canvas=S,document.body.removeChild(this.prop.overlay)})},v.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var A=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=A})},v.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},v.prototype.output=function(A,S,I){return(I=I||"pdf").toLowerCase()==="img"||I.toLowerCase()==="image"?this.outputImg(A,S):this.outputPdf(A,S)},v.prototype.outputPdf=function(A,S){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(A,S)})},v.prototype.outputImg=function(A){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(A){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+A+'" is not supported.'}})},v.prototype.save=function(A){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(A?{filename:A}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},v.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},v.prototype.set=function(A){if(c(A)!=="object")return this;var S=Object.keys(A||{}).map(function(I){if(I in v.template.prop)return function(){this.prop[I]=A[I]};switch(I){case"margin":return this.setMargin.bind(this,A.margin);case"jsPDF":return function(){return this.opt.jsPDF=A.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,A.pageSize);default:return function(){this.opt[I]=A[I]}}},this);return this.then(function(){return this.thenList(S)})},v.prototype.get=function(A,S){return this.then(function(){var I=A in v.template.prop?this.prop[A]:this.opt[A];return S?S(I):I})},v.prototype.setMargin=function(A){return this.then(function(){switch(c(A)){case"number":A=[A,A,A,A];case"array":if(A.length===2&&(A=[A[0],A[1],A[0],A[1]]),A.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=A}).then(this.setPageSize)},v.prototype.setPageSize=function(A){function S(I,D){return Math.floor(I*D/72*96)}return this.then(function(){(A=A||hn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(A.inner={width:A.width-this.opt.margin[1]-this.opt.margin[3],height:A.height-this.opt.margin[0]-this.opt.margin[2]},A.inner.px={width:S(A.inner.width,A.k),height:S(A.inner.height,A.k)},A.inner.ratio=A.inner.height/A.inner.width),this.prop.pageSize=A})},v.prototype.setProgress=function(A,S,I,D){return A!=null&&(this.progress.val=A),S!=null&&(this.progress.state=S),I!=null&&(this.progress.n=I),D!=null&&(this.progress.stack=D),this.progress.ratio=this.progress.val/this.progress.state,this},v.prototype.updateProgress=function(A,S,I,D){return this.setProgress(A?this.progress.val+A:null,S||null,I?this.progress.n+I:null,D?this.progress.stack.concat(D):null)},v.prototype.then=function(A,S){var I=this;return this.thenCore(A,S,function(D,z){return I.updateProgress(null,null,1,[D]),Promise.prototype.then.call(this,function(Z){return I.updateProgress(null,D),Z}).then(D,z).then(function(Z){return I.updateProgress(1),Z})})},v.prototype.thenCore=function(A,S,I){I=I||Promise.prototype.then;var D=this;A&&(A=A.bind(D)),S&&(S=S.bind(D));var z=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?D:v.convert(Object.assign({},D),Promise.prototype),Z=I.call(z,A,S);return v.convert(Z,D.__proto__)},v.prototype.thenExternal=function(A,S){return Promise.prototype.then.call(this,A,S)},v.prototype.thenList=function(A){var S=this;return A.forEach(function(I){S=S.thenCore(I)}),S},v.prototype.catch=function(A){A&&(A=A.bind(this));var S=Promise.prototype.catch.call(this,A);return v.convert(S,this)},v.prototype.catchExternal=function(A){return Promise.prototype.catch.call(this,A)},v.prototype.error=function(A){return this.then(function(){throw new Error(A)})},v.prototype.using=v.prototype.set,v.prototype.saveAs=v.prototype.save,v.prototype.export=v.prototype.output,v.prototype.run=v.prototype.then,hn.getPageSize=function(A,S,I){if(oa(A)==="object"){var D=A;A=D.orientation,S=D.unit||S,I=D.format||I}S=S||"mm",I=I||"a4",A=(""+(A||"P")).toLowerCase();var z,Z=(""+I).toLowerCase(),O={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(S){case"pt":z=1;break;case"mm":z=72/25.4;break;case"cm":z=72/2.54;break;case"in":z=72;break;case"px":z=.75;break;case"pc":case"em":z=12;break;case"ex":z=6;break;default:throw"Invalid unit: "+S}var ce,ie=0,W=0;if(O.hasOwnProperty(Z))ie=O[Z][1]/z,W=O[Z][0]/z;else try{ie=I[1],W=I[0]}catch{throw new Error("Invalid format: "+I)}if(A==="p"||A==="portrait")A="p",W>ie&&(ce=W,W=ie,ie=ce);else{if(A!=="l"&&A!=="landscape")throw"Invalid orientation: "+A;A="l",ie>W&&(ce=W,W=ie,ie=ce)}return{width:W,height:ie,unit:S,k:z,orientation:A}},i.html=function(A,S){(S=S||{}).callback=S.callback||function(){},S.html2canvas=S.html2canvas||{},S.html2canvas.canvas=S.html2canvas.canvas||this.canvas,S.jsPDF=S.jsPDF||this,S.fontFaces=S.fontFaces?S.fontFaces.map(J1):null;var I=new v(S);return S.worker?I:I.from(A).doCallback()}})(hn.API),hn.API.addJS=function(i){var n,o,c=(function(m){for(var y="",v=0;v<m.length;v++){var A=m[v];if(A==="("||A===")"){for(var S=0,I=v-1;I>=0&&m[I]==="\\";I--)S++;y+=S%2==0?"\\"+A:A}else y+=A}return y})(i);return this.internal.events.subscribe("postPutResources",function(){n=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(n+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),o=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+c+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){n!==void 0&&o!==void 0&&this.internal.out("/Names <</JavaScript "+n+" 0 R>>")}),this},(function(i){var n;i.events.push(["postPutResources",function(){var o=this,c=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var m=o.outline.render().split(/\r\n/),y=0;y<m.length;y++){var v=m[y],A=c.exec(v);if(A!=null){var S=A[1];o.internal.newObjectDeferredBegin(S,!1)}o.internal.write(v)}if(this.outline.createNamedDestinations){var I=this.internal.pages.length,D=[];for(y=0;y<I;y++){var z=o.internal.newObject();D.push(z);var Z=o.internal.getPageInfo(y+1);o.internal.write("<< /D["+Z.objId+" 0 R /XYZ null null null]>> endobj")}var O=o.internal.newObject();for(o.internal.write("<< /Names [ "),y=0;y<D.length;y++)o.internal.write("(page_"+(y+1)+")"+D[y]+" 0 R");o.internal.write(" ] >>","endobj"),n=o.internal.newObject(),o.internal.write("<< /Dests "+O+" 0 R"),o.internal.write(">>","endobj")}}]),i.events.push(["putCatalog",function(){var o=this;o.outline.root.children.length>0&&(o.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&o.internal.write("/Names "+n+" 0 R"))}]),i.events.push(["initialized",function(){var o=this;o.outline={createNamedDestinations:!1,root:{children:[]}},o.outline.add=function(c,m,y){var v={title:m,options:y,children:[]};return c==null&&(c=this.root),c.children.push(v),v},o.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=o,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},o.outline.genIds_r=function(c){c.id=o.internal.newObjectDeferred();for(var m=0;m<c.children.length;m++)this.genIds_r(c.children[m])},o.outline.renderRoot=function(c){this.objStart(c),this.line("/Type /Outlines"),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1]))),this.line("/Count "+this.count_r({count:0},c)),this.objEnd()},o.outline.renderItems=function(c){for(var m=this.ctx.pdf.internal.getVerticalCoordinateString,y=0;y<c.children.length;y++){var v=c.children[y];this.objStart(v),this.line("/Title "+this.makeString(v.title)),this.line("/Parent "+this.makeRef(c)),y>0&&this.line("/Prev "+this.makeRef(c.children[y-1])),y<c.children.length-1&&this.line("/Next "+this.makeRef(c.children[y+1])),v.children.length>0&&(this.line("/First "+this.makeRef(v.children[0])),this.line("/Last "+this.makeRef(v.children[v.children.length-1])));var A=this.count=this.count_r({count:0},v);if(A>0&&this.line("/Count "+A),v.options&&v.options.pageNumber){var S=o.internal.getPageInfo(v.options.pageNumber);this.line("/Dest ["+S.objId+" 0 R /XYZ 0 "+m(0)+" 0]")}this.objEnd()}for(var I=0;I<c.children.length;I++)this.renderItems(c.children[I])},o.outline.line=function(c){this.ctx.val+=c+`\r
`},o.outline.makeRef=function(c){return c.id+" 0 R"},o.outline.makeString=function(c){return"("+o.internal.pdfEscape(c)+")"},o.outline.objStart=function(c){this.ctx.val+=`\r
`+c.id+` 0 obj\r
<<\r
`},o.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},o.outline.count_r=function(c,m){for(var y=0;y<m.children.length;y++)c.count++,this.count_r(c,m.children[y]);return c.count}}])})(hn.API),(function(i){var n=[192,193,194,195,196,197,198,199];i.processJPEG=function(o,c,m,y,v,A){var S,I=this.decode.DCT_DECODE,D=null;if(typeof o=="string"||this.__addimage__.isArrayBuffer(o)||this.__addimage__.isArrayBufferView(o)){switch(o=v||o,o=this.__addimage__.isArrayBuffer(o)?new Uint8Array(o):o,S=(function(z){for(var Z,O=256*z.charCodeAt(4)+z.charCodeAt(5),ce=z.length,ie={width:0,height:0,numcomponents:1},W=4;W<ce;W+=2){if(W+=O,n.indexOf(z.charCodeAt(W+1))!==-1){Z=256*z.charCodeAt(W+5)+z.charCodeAt(W+6),ie={width:256*z.charCodeAt(W+7)+z.charCodeAt(W+8),height:Z,numcomponents:z.charCodeAt(W+9)};break}O=256*z.charCodeAt(W+2)+z.charCodeAt(W+3)}return ie})(o=this.__addimage__.isArrayBufferView(o)?this.__addimage__.arrayBufferToBinaryString(o):o),S.numcomponents){case 1:A=this.color_spaces.DEVICE_GRAY;break;case 4:A=this.color_spaces.DEVICE_CMYK;break;case 3:A=this.color_spaces.DEVICE_RGB}D={data:o,width:S.width,height:S.height,colorSpace:A,bitsPerComponent:8,filter:I,index:c,alias:m}}return D}})(hn.API),hn.API.processPNG=function(i,n,o,c){if(this.__addimage__.isArrayBuffer(i)&&(i=new Uint8Array(i)),this.__addimage__.isArrayBufferView(i)){var m,y=fM(i,{checkCrc:!0}),v=y.width,A=y.height,S=y.channels,I=y.palette,D=y.depth;m=I&&S===1?(function(Ne){for(var Ce=Ne.width,_t=Ne.height,_e=Ne.data,Te=Ne.palette,Ye=Ne.depth,Ve=!1,wt=[],ke=[],ot=void 0,st=!1,xt=0,Ct=0;Ct<Te.length;Ct++){var Fe=Ob(Te[Ct],4),oe=Fe[0],xe=Fe[1],Ue=Fe[2],Ge=Fe[3];wt.push(oe,xe,Ue),Ge!=null&&(Ge===0?(xt++,ke.length<1&&ke.push(Ct)):Ge<255&&(st=!0))}if(st||xt>1){Ve=!0,ke=void 0;var tt=Ce*_t;ot=new Uint8Array(tt);for(var mt=new DataView(_e.buffer),Pt=0;Pt<tt;Pt++){var Et=tv(mt,Pt,Ye),$t=Ob(Te[Et],4)[3];ot[Pt]=$t}}else xt===0&&(ke=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:Ve?8:void 0,colorBytes:_e,alphaBytes:ot,needSMask:Ve,palette:wt,mask:ke}})(y):S===2||S===4?(function(Ne){for(var Ce=Ne.data,_t=Ne.width,_e=Ne.height,Te=Ne.channels,Ye=Ne.depth,Ve=Te===2?"DeviceGray":"DeviceRGB",wt=Te-1,ke=_t*_e,ot=wt,st=ke*ot,xt=1*ke,Ct=Math.ceil(st*Ye/8),Fe=Math.ceil(xt*Ye/8),oe=new Uint8Array(Ct),xe=new Uint8Array(Fe),Ue=new DataView(Ce.buffer),Ge=new DataView(oe.buffer),tt=new DataView(xe.buffer),mt=!1,Pt=0;Pt<ke;Pt++){for(var Et=Pt*Te,$t=0;$t<ot;$t++)Hw(Ge,tv(Ue,Et+$t,Ye),Pt*ot+$t,Ye);var Ar=tv(Ue,Et+ot,Ye);Ar<(1<<Ye)-1&&(mt=!0),Hw(tt,Ar,1*Pt,Ye)}return{colorSpace:Ve,colorsPerPixel:wt,sMaskBitsPerComponent:mt?Ye:void 0,colorBytes:oe,alphaBytes:xe,needSMask:mt}})(y):(function(Ne){var Ce=Ne.data,_t=Ne.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:_t,colorsPerPixel:_t==="DeviceGray"?1:3,colorBytes:Ce instanceof Uint16Array?(function(_e){for(var Te=_e.length,Ye=new Uint8Array(2*Te),Ve=new DataView(Ye.buffer,Ye.byteOffset,Ye.byteLength),wt=0;wt<Te;wt++)Ve.setUint16(2*wt,_e[wt],!1);return Ye})(Ce):Ce,needSMask:!1}})(y);var z,Z,O,ce=m,ie=ce.colorSpace,W=ce.colorsPerPixel,le=ce.sMaskBitsPerComponent,ye=ce.colorBytes,Be=ce.alphaBytes,Le=ce.needSMask,lt=ce.palette,ft=ce.mask,ut=null;return c!==hn.API.image_compression.NONE&&typeof Pv=="function"?(ut=(function(Ne){var Ce;switch(Ne){case hn.API.image_compression.FAST:Ce=11;break;case hn.API.image_compression.MEDIUM:Ce=13;break;case hn.API.image_compression.SLOW:Ce=14;break;default:Ce=12}return Ce})(c),z=this.decode.FLATE_DECODE,Z="/Predictor ".concat(ut," /Colors ").concat(W," /BitsPerComponent ").concat(D," /Columns ").concat(v),i=Qw(ye,Math.ceil(v*W*D/8),W,D,c),Le&&(O=Qw(Be,Math.ceil(v*le/8),1,le,c))):(z=void 0,Z=void 0,i=ye,Le&&(O=Be)),(this.__addimage__.isArrayBuffer(i)||this.__addimage__.isArrayBufferView(i))&&(i=this.__addimage__.arrayBufferToBinaryString(i)),(O&&this.__addimage__.isArrayBuffer(O)||this.__addimage__.isArrayBufferView(O))&&(O=this.__addimage__.arrayBufferToBinaryString(O)),{alias:o,data:i,index:n,filter:z,decodeParameters:Z,transparency:ft,palette:lt,sMask:O,predictor:ut,width:v,height:A,bitsPerComponent:D,sMaskBitsPerComponent:le,colorSpace:ie}}},(function(i){i.processGIF89A=function(n,o,c,m){var y=new DM(n),v=y.width,A=y.height,S=[];y.decodeAndBlitFrameRGBA(0,S);var I={data:S,width:v,height:A},D=new rv(100).encode(I,100);return i.processJPEG.call(this,D,o,c,m)},i.processGIF87A=i.processGIF89A})(hn.API),Vu.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var i=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(i);for(var n=0;n<i;n++){var o=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),m=this.datav.getUint8(this.pos++,!0),y=this.datav.getUint8(this.pos++,!0);this.palette[n]={red:m,green:c,blue:o,quad:y}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Vu.prototype.parseBGR=function(){this.pos=this.offset;var i="bit"+this.bitPP,n=this.width*this.height*4;if(n>536870912)throw new Error("Image dimensions exceed 512MB, which is too large.");this.data=new Uint8Array(n);try{this[i]()}catch(o){Fa.log("bit decode error:"+o)}},Vu.prototype.bit1=function(){var i,n=Math.ceil(this.width/8),o=n%4;for(i=this.height-1;i>=0;i--){for(var c=this.bottom_up?i:this.height-1-i,m=0;m<n;m++)for(var y=this.datav.getUint8(this.pos++,!0),v=c*this.width*4+8*m*4,A=0;A<8&&8*m+A<this.width;A++){var S=this.palette[y>>7-A&1];this.data[v+4*A]=S.blue,this.data[v+4*A+1]=S.green,this.data[v+4*A+2]=S.red,this.data[v+4*A+3]=255}o!==0&&(this.pos+=4-o)}},Vu.prototype.bit4=function(){for(var i=Math.ceil(this.width/2),n=i%4,o=this.height-1;o>=0;o--){for(var c=this.bottom_up?o:this.height-1-o,m=0;m<i;m++){var y=this.datav.getUint8(this.pos++,!0),v=c*this.width*4+2*m*4,A=y>>4,S=15&y,I=this.palette[A];if(this.data[v]=I.blue,this.data[v+1]=I.green,this.data[v+2]=I.red,this.data[v+3]=255,2*m+1>=this.width)break;I=this.palette[S],this.data[v+4]=I.blue,this.data[v+4+1]=I.green,this.data[v+4+2]=I.red,this.data[v+4+3]=255}n!==0&&(this.pos+=4-n)}},Vu.prototype.bit8=function(){for(var i=this.width%4,n=this.height-1;n>=0;n--){for(var o=this.bottom_up?n:this.height-1-n,c=0;c<this.width;c++){var m=this.datav.getUint8(this.pos++,!0),y=o*this.width*4+4*c;if(m<this.palette.length){var v=this.palette[m];this.data[y]=v.red,this.data[y+1]=v.green,this.data[y+2]=v.blue,this.data[y+3]=255}else this.data[y]=255,this.data[y+1]=255,this.data[y+2]=255,this.data[y+3]=255}i!==0&&(this.pos+=4-i)}},Vu.prototype.bit15=function(){for(var i=this.width%3,n=parseInt("11111",2),o=this.height-1;o>=0;o--){for(var c=this.bottom_up?o:this.height-1-o,m=0;m<this.width;m++){var y=this.datav.getUint16(this.pos,!0);this.pos+=2;var v=(y&n)/n*255|0,A=(y>>5&n)/n*255|0,S=(y>>10&n)/n*255|0,I=y>>15?255:0,D=c*this.width*4+4*m;this.data[D]=S,this.data[D+1]=A,this.data[D+2]=v,this.data[D+3]=I}this.pos+=i}},Vu.prototype.bit16=function(){for(var i=this.width%3,n=parseInt("11111",2),o=parseInt("111111",2),c=this.height-1;c>=0;c--){for(var m=this.bottom_up?c:this.height-1-c,y=0;y<this.width;y++){var v=this.datav.getUint16(this.pos,!0);this.pos+=2;var A=(v&n)/n*255|0,S=(v>>5&o)/o*255|0,I=(v>>11)/n*255|0,D=m*this.width*4+4*y;this.data[D]=I,this.data[D+1]=S,this.data[D+2]=A,this.data[D+3]=255}this.pos+=i}},Vu.prototype.bit24=function(){for(var i=this.height-1;i>=0;i--){for(var n=this.bottom_up?i:this.height-1-i,o=0;o<this.width;o++){var c=this.datav.getUint8(this.pos++,!0),m=this.datav.getUint8(this.pos++,!0),y=this.datav.getUint8(this.pos++,!0),v=n*this.width*4+4*o;this.data[v]=y,this.data[v+1]=m,this.data[v+2]=c,this.data[v+3]=255}this.pos+=this.width%4}},Vu.prototype.bit32=function(){for(var i=this.height-1;i>=0;i--)for(var n=this.bottom_up?i:this.height-1-i,o=0;o<this.width;o++){var c=this.datav.getUint8(this.pos++,!0),m=this.datav.getUint8(this.pos++,!0),y=this.datav.getUint8(this.pos++,!0),v=this.datav.getUint8(this.pos++,!0),A=n*this.width*4+4*o;this.data[A]=y,this.data[A+1]=m,this.data[A+2]=c,this.data[A+3]=v}},Vu.prototype.getData=function(){return this.data},(function(i){i.processBMP=function(n,o,c,m){var y=new Vu(n,!1),v=y.width,A=y.height,S={data:y.getData(),width:v,height:A},I=new rv(100).encode(S,100);return i.processJPEG.call(this,I,o,c,m)}})(hn.API),Gw.prototype.getData=function(){return this.data},(function(i){i.processWEBP=function(n,o,c,m){var y=new Gw(n),v=y.width,A=y.height,S={data:y.getData(),width:v,height:A},I=new rv(100).encode(S,100);return i.processJPEG.call(this,I,o,c,m)}})(hn.API),hn.API.processRGBA=function(i,n,o){for(var c=i.data,m=c.length,y=new Uint8Array(m/4*3),v=new Uint8Array(m/4),A=0,S=0,I=0;I<m;I+=4){var D=c[I],z=c[I+1],Z=c[I+2],O=c[I+3];y[A++]=D,y[A++]=z,y[A++]=Z,v[S++]=O}var ce=this.__addimage__.arrayBufferToBinaryString(y);return{alpha:this.__addimage__.arrayBufferToBinaryString(v),data:ce,index:n,alias:o,colorSpace:"DeviceRGB",bitsPerComponent:8,width:i.width,height:i.height}},hn.API.setLanguage=function(i){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[i]!==void 0&&(this.internal.languageSettings.languageCode=i,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Wp=hn.API,Iy=Wp.getCharWidthsArray=function(i,n){var o,c,m=(n=n||{}).font||this.internal.getFont(),y=n.fontSize||this.internal.getFontSize(),v=n.charSpace||this.internal.getCharSpace(),A=n.widths?n.widths:m.metadata.Unicode.widths,S=A.fof?A.fof:1,I=n.kerning?n.kerning:m.metadata.Unicode.kerning,D=I.fof?I.fof:1,z=n.doKerning!==!1,Z=0,O=i.length,ce=0,ie=A[0]||S,W=[];for(o=0;o<O;o++)c=i.charCodeAt(o),typeof m.metadata.widthOfString=="function"?W.push((m.metadata.widthOfGlyph(m.metadata.characterToGlyph(c))+v*(1e3/y)||0)/1e3):(Z=z&&oa(I[c])==="object"&&!isNaN(parseInt(I[c][ce],10))?I[c][ce]/D:0,W.push((A[c]||ie)/S+Z)),ce=c;return W},Pw=Wp.getStringUnitWidth=function(i,n){var o=(n=n||{}).fontSize||this.internal.getFontSize(),c=n.font||this.internal.getFont(),m=n.charSpace||this.internal.getCharSpace();return Wp.processArabic&&(i=Wp.processArabic(i)),typeof c.metadata.widthOfString=="function"?c.metadata.widthOfString(i,o,m)/o:Iy.apply(this,arguments).reduce(function(y,v){return y+v},0)},Nw=function(i,n,o,c){for(var m=[],y=0,v=i.length,A=0;y!==v&&A+n[y]<o;)A+=n[y],y++;m.push(i.slice(0,y));var S=y;for(A=0;y!==v;)A+n[y]>c&&(m.push(i.slice(S,y)),A=0,S=y),A+=n[y],y++;return S!==y&&m.push(i.slice(S,y)),m},Rw=function(i,n,o){o||(o={});var c,m,y,v,A,S,I,D=[],z=[D],Z=o.textIndent||0,O=0,ce=0,ie=i.split(" "),W=Iy.apply(this,[" ",o])[0];if(S=o.lineIndent===-1?ie[0].length+2:o.lineIndent||0){var le=Array(S).join(" "),ye=[];ie.map(function(Le){(Le=Le.split(/\s*\n/)).length>1?ye=ye.concat(Le.map(function(lt,ft){return(ft&&lt.length?`
`:"")+lt})):ye.push(Le[0])}),ie=ye,S=Pw.apply(this,[le,o])}for(y=0,v=ie.length;y<v;y++){var Be=0;if(c=ie[y],S&&c[0]==`
`&&(c=c.substr(1),Be=1),Z+O+(ce=(m=Iy.apply(this,[c,o])).reduce(function(Le,lt){return Le+lt},0))>n||Be){if(ce>n){for(A=Nw.apply(this,[c,m,n-(Z+O),n]),D.push(A.shift()),D=[A.pop()];A.length;)z.push([A.shift()]);ce=m.slice(c.length-(D[0]?D[0].length:0)).reduce(function(Le,lt){return Le+lt},0)}else D=[c];z.push(D),Z=ce+S,O=W}else D.push(c),Z+=O+ce,O=W}return I=S?function(Le,lt){return(lt?le:"")+Le.join(" ")}:function(Le){return Le.join(" ")},z.map(I)},Wp.splitTextToSize=function(i,n,o){var c,m=(o=o||{}).fontSize||this.internal.getFontSize(),y=(function(D){if(D.widths&&D.kerning)return{widths:D.widths,kerning:D.kerning};var z=this.internal.getFont(D.fontName,D.fontStyle),Z="Unicode";return z.metadata[Z]?{widths:z.metadata[Z].widths||{0:1},kerning:z.metadata[Z].kerning||{}}:{font:z.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,o);c=Array.isArray(i)?i:String(i).split(/\r?\n/);var v=1*this.internal.scaleFactor*n/m;y.textIndent=o.textIndent?1*o.textIndent*this.internal.scaleFactor/m:0,y.lineIndent=o.lineIndent;var A,S,I=[];for(A=0,S=c.length;A<S;A++)I=I.concat(Rw.apply(this,[c[A],v,y]));return I},(function(i){i.__fontmetrics__=i.__fontmetrics__||{};for(var n="0123456789abcdef",o="klmnopqrstuvwxyz",c={},m={},y=0;y<16;y++)c[o[y]]=n[y],m[n[y]]=o[y];var v=function(Z){return"0x"+parseInt(Z,10).toString(16)},A=i.__fontmetrics__.compress=function(Z){var O,ce,ie,W,le=["{"];for(var ye in Z){if(O=Z[ye],isNaN(parseInt(ye,10))?ce="'"+ye+"'":(ye=parseInt(ye,10),ce=(ce=v(ye).slice(2)).slice(0,-1)+m[ce.slice(-1)]),typeof O=="number")O<0?(ie=v(O).slice(3),W="-"):(ie=v(O).slice(2),W=""),ie=W+ie.slice(0,-1)+m[ie.slice(-1)];else{if(oa(O)!=="object")throw new Error("Don't know what to do with value type "+oa(O)+".");ie=A(O)}le.push(ce+ie)}return le.push("}"),le.join("")},S=i.__fontmetrics__.uncompress=function(Z){if(typeof Z!="string")throw new Error("Invalid argument passed to uncompress.");for(var O,ce,ie,W,le={},ye=1,Be=le,Le=[],lt="",ft="",ut=Z.length-1,Ne=1;Ne<ut;Ne+=1)(W=Z[Ne])=="'"?O?(ie=O.join(""),O=void 0):O=[]:O?O.push(W):W=="{"?(Le.push([Be,ie]),Be={},ie=void 0):W=="}"?((ce=Le.pop())[0][ce[1]]=Be,ie=void 0,Be=ce[0]):W=="-"?ye=-1:ie===void 0?c.hasOwnProperty(W)?(lt+=c[W],ie=parseInt(lt,16)*ye,ye=1,lt=""):lt+=W:c.hasOwnProperty(W)?(ft+=c[W],Be[ie]=parseInt(ft,16)*ye,ye=1,ie=void 0,ft=""):ft+=W;return le},I={codePages:["WinAnsiEncoding"],WinAnsiEncoding:S("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},D={Unicode:{Courier:I,"Courier-Bold":I,"Courier-BoldOblique":I,"Courier-Oblique":I,Helvetica:I,"Helvetica-Bold":I,"Helvetica-BoldOblique":I,"Helvetica-Oblique":I,"Times-Roman":I,"Times-Bold":I,"Times-BoldItalic":I,"Times-Italic":I}},z={Unicode:{"Courier-Oblique":S("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":S("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":S("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:S("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":S("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":S("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:S("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:S("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":S("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:S("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":S("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":S("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":S("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":S("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};i.events.push(["addFont",function(Z){var O=Z.font,ce=z.Unicode[O.postScriptName];ce&&(O.metadata.Unicode={},O.metadata.Unicode.widths=ce.widths,O.metadata.Unicode.kerning=ce.kerning);var ie=D.Unicode[O.postScriptName];ie&&(O.metadata.Unicode.encoding=ie,O.encoding=ie.codePages[0])}])})(hn.API),(function(i){var n=function(o){for(var c=o.length,m=new Uint8Array(c),y=0;y<c;y++)m[y]=o.charCodeAt(y);return m};i.API.events.push(["addFont",function(o){var c=void 0,m=o.font,y=o.instance;if(!m.isStandardFont){if(y===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+m.postScriptName+"').");if(typeof(c=y.existsFileInVFS(m.postScriptName)===!1?y.loadFile(m.postScriptName):y.getFileFromVFS(m.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+m.postScriptName+"').");(function(v,A){A=/^\x00\x01\x00\x00/.test(A)?n(A):n(o_(A)),v.metadata=i.API.TTFFont.open(A),v.metadata.Unicode=v.metadata.Unicode||{encoding:{},kerning:{},widths:[]},v.metadata.glyIdsUsed=[0]})(m,c)}}])})(hn),hn.API.addSvgAsImage=function(i,n,o,c,m,y,v,A){if(isNaN(n)||isNaN(o))throw Fa.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(c)||isNaN(m))throw Fa.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var S=document.createElement("canvas");S.width=c,S.height=m;var I=S.getContext("2d");I.fillStyle="#fff",I.fillRect(0,0,S.width,S.height);var D={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},z=this;return(Pn.canvg?Promise.resolve(Pn.canvg):P1(()=>import("./index.es-Bmf68GiU.js"),[])).catch(function(Z){return Promise.reject(new Error("Could not load canvg: "+Z))}).then(function(Z){return Z.default?Z.default:Z}).then(function(Z){return Z.fromString(I,i,D)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(Z){return Z.render(D)}).then(function(){z.addImage(S.toDataURL("image/jpeg",1),n,o,c,m,v,A)})},hn.API.putTotalPages=function(i){var n,o=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(n=new RegExp(i,"g"),o=this.internal.getNumberOfPages()):(n=new RegExp(this.pdfEscape16(i,this.internal.getFont()),"g"),o=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var c=1;c<=this.internal.getNumberOfPages();c++)for(var m=0;m<this.internal.pages[c].length;m++)this.internal.pages[c][m]=this.internal.pages[c][m].replace(n,o);return this},hn.API.viewerPreferences=function(i,n){var o;i=i||{},n=n||!1;var c,m,y,v={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},A=Object.keys(v),S=[],I=0,D=0,z=0;function Z(ce,ie){var W,le=!1;for(W=0;W<ce.length;W+=1)ce[W]===ie&&(le=!0);return le}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(v)),this.internal.viewerpreferences.isSubscribed=!1),o=this.internal.viewerpreferences.configuration,i==="reset"||n===!0){var O=A.length;for(z=0;z<O;z+=1)o[A[z]].value=o[A[z]].defaultValue,o[A[z]].explicitSet=!1}if(oa(i)==="object"){for(m in i)if(y=i[m],Z(A,m)&&y!==void 0){if(o[m].type==="boolean"&&typeof y=="boolean")o[m].value=y;else if(o[m].type==="name"&&Z(o[m].valueSet,y))o[m].value=y;else if(o[m].type==="integer"&&Number.isInteger(y))o[m].value=y;else if(o[m].type==="array"){for(I=0;I<y.length;I+=1)if(c=!0,y[I].length===1&&typeof y[I][0]=="number")S.push(String(y[I]-1));else if(y[I].length>1){for(D=0;D<y[I].length;D+=1)typeof y[I][D]!="number"&&(c=!1);c===!0&&S.push([y[I][0]-1,y[I][1]-1].join(" "))}o[m].value="["+S.join(" ")+"]"}else o[m].value=o[m].defaultValue;o[m].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var ce,ie=[];for(ce in o)o[ce].explicitSet===!0&&(o[ce].type==="name"?ie.push("/"+ce+" /"+o[ce].value):ie.push("/"+ce+" "+o[ce].value));ie.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+ie.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=o,this},hn.API.addMetadata=function(i,n){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceUri:n??"http://jspdf.default.namespaceuri/",rawXml:typeof n=="boolean"&&n},this.internal.events.subscribe("putCatalog",NM),this.internal.events.subscribe("postPutResources",PM)),this},(function(i){var n=i.API,o=n.pdfEscape16=function(y,v){for(var A,S=v.metadata.Unicode.widths,I=["","0","00","000","0000"],D=[""],z=0,Z=y.length;z<Z;++z){if(A=v.metadata.characterToGlyph(y.charCodeAt(z)),v.metadata.glyIdsUsed.push(A),v.metadata.toUnicode[A]=y.charCodeAt(z),S.indexOf(A)==-1&&(S.push(A),S.push([parseInt(v.metadata.widthOfGlyph(A),10)])),A=="0")return D.join("");A=A.toString(16),D.push(I[4-A.length],A)}return D.join("")},c=function(y){var v,A,S,I,D,z,Z;for(D=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,S=[],z=0,Z=(A=Object.keys(y).sort(function(O,ce){return O-ce})).length;z<Z;z++)v=A[z],S.length>=100&&(D+=`
`+S.length+` beginbfchar
`+S.join(`
`)+`
endbfchar`,S=[]),y[v]!==void 0&&y[v]!==null&&typeof y[v].toString=="function"&&(I=("0000"+y[v].toString(16)).slice(-4),v=("0000"+(+v).toString(16)).slice(-4),S.push("<"+v+"><"+I+">"));return S.length&&(D+=`
`+S.length+` beginbfchar
`+S.join(`
`)+`
endbfchar
`),D+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};n.events.push(["putFont",function(y){(function(v){var A=v.font,S=v.out,I=v.newObject,D=v.putStream;if(A.metadata instanceof i.API.TTFFont&&A.encoding==="Identity-H"){for(var z=A.metadata.Unicode.widths,Z=A.metadata.subset.encode(A.metadata.glyIdsUsed,1),O="",ce=0;ce<Z.length;ce++)O+=String.fromCharCode(Z[ce]);var ie=I();D({data:O,addLength1:!0,objectId:ie}),S("endobj");var W=I();D({data:c(A.metadata.toUnicode),addLength1:!0,objectId:W}),S("endobj");var le=I();S("<<"),S("/Type /FontDescriptor"),S("/FontName /"+im(A.fontName)),S("/FontFile2 "+ie+" 0 R"),S("/FontBBox "+i.API.PDFObject.convert(A.metadata.bbox)),S("/Flags "+A.metadata.flags),S("/StemV "+A.metadata.stemV),S("/ItalicAngle "+A.metadata.italicAngle),S("/Ascent "+A.metadata.ascender),S("/Descent "+A.metadata.decender),S("/CapHeight "+A.metadata.capHeight),S(">>"),S("endobj");var ye=I();S("<<"),S("/Type /Font"),S("/BaseFont /"+im(A.fontName)),S("/FontDescriptor "+le+" 0 R"),S("/W "+i.API.PDFObject.convert(z)),S("/CIDToGIDMap /Identity"),S("/DW 1000"),S("/Subtype /CIDFontType2"),S("/CIDSystemInfo"),S("<<"),S("/Supplement 0"),S("/Registry (Adobe)"),S("/Ordering ("+A.encoding+")"),S(">>"),S(">>"),S("endobj"),A.objectNumber=I(),S("<<"),S("/Type /Font"),S("/Subtype /Type0"),S("/ToUnicode "+W+" 0 R"),S("/BaseFont /"+im(A.fontName)),S("/Encoding /"+A.encoding),S("/DescendantFonts ["+ye+" 0 R]"),S(">>"),S("endobj"),A.isAlreadyPutted=!0}})(y)}]),n.events.push(["putFont",function(y){(function(v){var A=v.font,S=v.out,I=v.newObject,D=v.putStream;if(A.metadata instanceof i.API.TTFFont&&A.encoding==="WinAnsiEncoding"){for(var z=A.metadata.rawData,Z="",O=0;O<z.length;O++)Z+=String.fromCharCode(z[O]);var ce=I();D({data:Z,addLength1:!0,objectId:ce}),S("endobj");var ie=I();D({data:c(A.metadata.toUnicode),addLength1:!0,objectId:ie}),S("endobj");var W=I();S("<<"),S("/Descent "+A.metadata.decender),S("/CapHeight "+A.metadata.capHeight),S("/StemV "+A.metadata.stemV),S("/Type /FontDescriptor"),S("/FontFile2 "+ce+" 0 R"),S("/Flags 96"),S("/FontBBox "+i.API.PDFObject.convert(A.metadata.bbox)),S("/FontName /"+im(A.fontName)),S("/ItalicAngle "+A.metadata.italicAngle),S("/Ascent "+A.metadata.ascender),S(">>"),S("endobj"),A.objectNumber=I();for(var le=0;le<A.metadata.hmtx.widths.length;le++)A.metadata.hmtx.widths[le]=parseInt(A.metadata.hmtx.widths[le]*(1e3/A.metadata.head.unitsPerEm));S("<</Subtype/TrueType/Type/Font/ToUnicode "+ie+" 0 R/BaseFont/"+im(A.fontName)+"/FontDescriptor "+W+" 0 R/Encoding/"+A.encoding+" /FirstChar 29 /LastChar 255 /Widths "+i.API.PDFObject.convert(A.metadata.hmtx.widths)+">>"),S("endobj"),A.isAlreadyPutted=!0}})(y)}]);var m=function(y){var v,A=y.text||"",S=y.x,I=y.y,D=y.options||{},z=y.mutex||{},Z=z.pdfEscape,O=z.activeFontKey,ce=z.fonts,ie=O,W="",le=0,ye="",Be=ce[ie].encoding;if(ce[ie].encoding!=="Identity-H")return{text:A,x:S,y:I,options:D,mutex:z};for(ye=A,ie=O,Array.isArray(A)&&(ye=A[0]),le=0;le<ye.length;le+=1)ce[ie].metadata.hasOwnProperty("cmap")&&(v=ce[ie].metadata.cmap.unicode.codeMap[ye[le].charCodeAt(0)]),v||ye[le].charCodeAt(0)<256&&ce[ie].metadata.hasOwnProperty("Unicode")?W+=ye[le]:W+="";var Le="";return parseInt(ie.slice(1))<14||Be==="WinAnsiEncoding"?Le=Z(W,ie).split("").map(function(lt){return lt.charCodeAt(0).toString(16)}).join(""):Be==="Identity-H"&&(Le=o(W,ce[ie])),z.isHex=!0,{text:Le,x:S,y:I,options:D,mutex:z}};n.events.push(["postProcessText",function(y){var v=y.text||"",A=[],S={text:v,x:y.x,y:y.y,options:y.options,mutex:y.mutex};if(Array.isArray(v)){var I=0;for(I=0;I<v.length;I+=1)Array.isArray(v[I])&&v[I].length===3?A.push([m(Object.assign({},S,{text:v[I][0]})).text,v[I][1],v[I][2]]):A.push(m(Object.assign({},S,{text:v[I]})).text);y.text=A}else y.text=m(Object.assign({},S,{text:v})).text}])})(hn),(function(i){var n=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};i.existsFileInVFS=function(o){return n.call(this),this.internal.vFS[o]!==void 0},i.addFileToVFS=function(o,c){return n.call(this),this.internal.vFS[o]=c,this},i.getFileFromVFS=function(o){return n.call(this),this.internal.vFS[o]!==void 0?this.internal.vFS[o]:null}})(hn.API),(function(i){i.__bidiEngine__=i.prototype.__bidiEngine__=function(c){var m,y,v,A,S,I,D,z=n,Z=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],O=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],ce={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},ie={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},W=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],le=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),ye=!1,Be=0;this.__bidiEngine__={};var Le=function(_e){var Te=_e.charCodeAt(),Ye=Te>>8,Ve=ie[Ye];return Ve!==void 0?z[256*Ve+(255&Te)]:Ye===252||Ye===253?"AL":le.test(Ye)?"L":Ye===8?"R":"N"},lt=function(_e){for(var Te,Ye=0;Ye<_e.length;Ye++){if((Te=Le(_e.charAt(Ye)))==="L")return!1;if(Te==="R")return!0}return!1},ft=function(_e,Te,Ye,Ve){var wt,ke,ot,st,xt=Te[Ve];switch(xt){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":ye=!1;break;case"N":case"AN":break;case"EN":ye&&(xt="AN");break;case"AL":ye=!0,xt="R";break;case"WS":case"BN":xt="N";break;case"CS":Ve<1||Ve+1>=Te.length||(wt=Ye[Ve-1])!=="EN"&&wt!=="AN"||(ke=Te[Ve+1])!=="EN"&&ke!=="AN"?xt="N":ye&&(ke="AN"),xt=ke===wt?ke:"N";break;case"ES":xt=(wt=Ve>0?Ye[Ve-1]:"B")==="EN"&&Ve+1<Te.length&&Te[Ve+1]==="EN"?"EN":"N";break;case"ET":if(Ve>0&&Ye[Ve-1]==="EN"){xt="EN";break}if(ye){xt="N";break}for(ot=Ve+1,st=Te.length;ot<st&&Te[ot]==="ET";)ot++;xt=ot<st&&Te[ot]==="EN"?"EN":"N";break;case"NSM":if(v&&!A){for(st=Te.length,ot=Ve+1;ot<st&&Te[ot]==="NSM";)ot++;if(ot<st){var Ct=_e[Ve],Fe=Ct>=1425&&Ct<=2303||Ct===64286;if(wt=Te[ot],Fe&&(wt==="R"||wt==="AL")){xt="R";break}}}xt=Ve<1||(wt=Te[Ve-1])==="B"?"N":Ye[Ve-1];break;case"B":ye=!1,m=!0,xt=Be;break;case"S":y=!0,xt="N"}return xt},ut=function(_e,Te,Ye){var Ve=_e.split("");return Ye&&Ne(Ve,Ye,{hiLevel:Be}),Ve.reverse(),Te&&Te.reverse(),Ve.join("")},Ne=function(_e,Te,Ye){var Ve,wt,ke,ot,st,xt=-1,Ct=_e.length,Fe=0,oe=[],xe=Be?O:Z,Ue=[];for(ye=!1,m=!1,y=!1,wt=0;wt<Ct;wt++)Ue[wt]=Le(_e[wt]);for(ke=0;ke<Ct;ke++){if(st=Fe,oe[ke]=ft(_e,Ue,oe,ke),Ve=240&(Fe=xe[st][ce[oe[ke]]]),Fe&=15,Te[ke]=ot=xe[Fe][5],Ve>0)if(Ve===16){for(wt=xt;wt<ke;wt++)Te[wt]=1;xt=-1}else xt=-1;if(xe[Fe][6])xt===-1&&(xt=ke);else if(xt>-1){for(wt=xt;wt<ke;wt++)Te[wt]=ot;xt=-1}Ue[ke]==="B"&&(Te[ke]=0),Ye.hiLevel|=ot}y&&(function(Ge,tt,mt){for(var Pt=0;Pt<mt;Pt++)if(Ge[Pt]==="S"){tt[Pt]=Be;for(var Et=Pt-1;Et>=0&&Ge[Et]==="WS";Et--)tt[Et]=Be}})(Ue,Te,Ct)},Ce=function(_e,Te,Ye,Ve,wt){if(!(wt.hiLevel<_e)){if(_e===1&&Be===1&&!m)return Te.reverse(),void(Ye&&Ye.reverse());for(var ke,ot,st,xt,Ct=Te.length,Fe=0;Fe<Ct;){if(Ve[Fe]>=_e){for(st=Fe+1;st<Ct&&Ve[st]>=_e;)st++;for(xt=Fe,ot=st-1;xt<ot;xt++,ot--)ke=Te[xt],Te[xt]=Te[ot],Te[ot]=ke,Ye&&(ke=Ye[xt],Ye[xt]=Ye[ot],Ye[ot]=ke);Fe=st}Fe++}}},_t=function(_e,Te,Ye){var Ve=_e.split(""),wt={hiLevel:Be};return Ye||(Ye=[]),Ne(Ve,Ye,wt),(function(ke,ot,st){if(st.hiLevel!==0&&D)for(var xt,Ct=0;Ct<ke.length;Ct++)ot[Ct]===1&&(xt=W.indexOf(ke[Ct]))>=0&&(ke[Ct]=W[xt+1])})(Ve,Ye,wt),Ce(2,Ve,Te,Ye,wt),Ce(1,Ve,Te,Ye,wt),Ve.join("")};return this.__bidiEngine__.doBidiReorder=function(_e,Te,Ye){if((function(wt,ke){if(ke)for(var ot=0;ot<wt.length;ot++)ke[ot]=ot;A===void 0&&(A=lt(wt)),I===void 0&&(I=lt(wt))})(_e,Te),v||!S||I)if(v&&S&&A^I)Be=A?1:0,_e=ut(_e,Te,Ye);else if(!v&&S&&I)Be=A?1:0,_e=_t(_e,Te,Ye),_e=ut(_e,Te);else if(!v||A||S||I){if(v&&!S&&A^I)_e=ut(_e,Te),A?(Be=0,_e=_t(_e,Te,Ye)):(Be=1,_e=_t(_e,Te,Ye),_e=ut(_e,Te));else if(v&&A&&!S&&I)Be=1,_e=_t(_e,Te,Ye),_e=ut(_e,Te);else if(!v&&!S&&A^I){var Ve=D;A?(Be=1,_e=_t(_e,Te,Ye),Be=0,D=!1,_e=_t(_e,Te,Ye),D=Ve):(Be=0,_e=_t(_e,Te,Ye),_e=ut(_e,Te),Be=1,D=!1,_e=_t(_e,Te,Ye),D=Ve,_e=ut(_e,Te))}}else Be=0,_e=_t(_e,Te,Ye);else Be=A?1:0,_e=_t(_e,Te,Ye);return _e},this.__bidiEngine__.setOptions=function(_e){_e&&(v=_e.isInputVisual,S=_e.isOutputVisual,A=_e.isInputRtl,I=_e.isOutputRtl,D=_e.isSymmetricSwapping)},this.__bidiEngine__.setOptions(c),this.__bidiEngine__};var n=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],o=new i.__bidiEngine__({isInputVisual:!0});i.API.events.push(["postProcessText",function(c){var m=c.text;c.x,c.y;var y=c.options||{};c.mutex,y.lang;var v=[];if(y.isInputVisual=typeof y.isInputVisual!="boolean"||y.isInputVisual,o.setOptions(y),Object.prototype.toString.call(m)==="[object Array]"){var A=0;for(v=[],A=0;A<m.length;A+=1)Object.prototype.toString.call(m[A])==="[object Array]"?v.push([o.doBidiReorder(m[A][0]),m[A][1],m[A][2]]):v.push([o.doBidiReorder(m[A])]);c.text=v}else c.text=o.doBidiReorder(m);o.setOptions({isInputVisual:!0})}])})(hn),hn.API.TTFFont=(function(){function i(n){var o;if(this.rawData=n,o=this.contents=new td(n),this.contents.pos=4,o.readString(4)==="ttcf")throw new Error("TTCF not supported.");o.pos=0,this.parse(),this.subset=new YM(this),this.registerTTF()}return i.open=function(n){return new i(n)},i.prototype.parse=function(){return this.directory=new RM(this.contents),this.head=new kM(this),this.name=new VM(this),this.cmap=new tC(this),this.toUnicode={},this.hhea=new OM(this),this.maxp=new GM(this),this.hmtx=new qM(this),this.post=new jM(this),this.os2=new zM(this),this.loca=new WM(this),this.glyf=new KM(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},i.prototype.registerTTF=function(){var n,o,c,m,y;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var v,A,S,I;for(I=[],v=0,A=(S=this.bbox).length;v<A;v++)n=S[v],I.push(Math.round(n*this.scaleFactor));return I}).call(this),this.stemV=0,this.post.exists?(c=255&(m=this.post.italic_angle),32768&(o=m>>16)&&(o=-(1+(65535^o))),this.italicAngle=+(o+"."+c)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(y=this.familyClass)===1||y===2||y===3||y===4||y===5||y===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},i.prototype.characterToGlyph=function(n){var o;return((o=this.cmap.unicode)!=null?o.codeMap[n]:void 0)||0},i.prototype.widthOfGlyph=function(n){var o;return o=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(n).advance*o},i.prototype.widthOfString=function(n,o,c){var m,y,v,A;for(v=0,y=0,A=(n=""+n).length;0<=A?y<A:y>A;y=0<=A?++y:--y)m=n.charCodeAt(y),v+=this.widthOfGlyph(this.characterToGlyph(m))+c*(1e3/o)||0;return v*(o/1e3)},i.prototype.lineHeight=function(n,o){var c;return o==null&&(o=!1),c=o?this.lineGap:0,(this.ascender+c-this.decender)/1e3*n},i})();var Zu,td=(function(){function i(n){this.data=n??[],this.pos=0,this.length=this.data.length}return i.prototype.readByte=function(){return this.data[this.pos++]},i.prototype.writeByte=function(n){return this.data[this.pos++]=n},i.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},i.prototype.writeUInt32=function(n){return this.writeByte(n>>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},i.prototype.readInt32=function(){var n;return(n=this.readUInt32())>=2147483648?n-4294967296:n},i.prototype.writeInt32=function(n){return n<0&&(n+=4294967296),this.writeUInt32(n)},i.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},i.prototype.writeUInt16=function(n){return this.writeByte(n>>8&255),this.writeByte(255&n)},i.prototype.readInt16=function(){var n;return(n=this.readUInt16())>=32768?n-65536:n},i.prototype.writeInt16=function(n){return n<0&&(n+=65536),this.writeUInt16(n)},i.prototype.readString=function(n){var o,c;for(c=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)c[o]=String.fromCharCode(this.readByte());return c.join("")},i.prototype.writeString=function(n){var o,c,m;for(m=[],o=0,c=n.length;0<=c?o<c:o>c;o=0<=c?++o:--o)m.push(this.writeByte(n.charCodeAt(o)));return m},i.prototype.readShort=function(){return this.readInt16()},i.prototype.writeShort=function(n){return this.writeInt16(n)},i.prototype.readLongLong=function(){var n,o,c,m,y,v,A,S;return n=this.readByte(),o=this.readByte(),c=this.readByte(),m=this.readByte(),y=this.readByte(),v=this.readByte(),A=this.readByte(),S=this.readByte(),128&n?-1*(72057594037927940*(255^n)+281474976710656*(255^o)+1099511627776*(255^c)+4294967296*(255^m)+16777216*(255^y)+65536*(255^v)+256*(255^A)+(255^S)+1):72057594037927940*n+281474976710656*o+1099511627776*c+4294967296*m+16777216*y+65536*v+256*A+S},i.prototype.writeLongLong=function(n){var o,c;return o=Math.floor(n/4294967296),c=4294967295&n,this.writeByte(o>>24&255),this.writeByte(o>>16&255),this.writeByte(o>>8&255),this.writeByte(255&o),this.writeByte(c>>24&255),this.writeByte(c>>16&255),this.writeByte(c>>8&255),this.writeByte(255&c)},i.prototype.readInt=function(){return this.readInt32()},i.prototype.writeInt=function(n){return this.writeInt32(n)},i.prototype.read=function(n){var o,c;for(o=[],c=0;0<=n?c<n:c>n;c=0<=n?++c:--c)o.push(this.readByte());return o},i.prototype.write=function(n){var o,c,m,y;for(y=[],c=0,m=n.length;c<m;c++)o=n[c],y.push(this.writeByte(o));return y},i})(),RM=(function(){var i;function n(o){var c,m,y;for(this.scalarType=o.readInt(),this.tableCount=o.readShort(),this.searchRange=o.readShort(),this.entrySelector=o.readShort(),this.rangeShift=o.readShort(),this.tables={},m=0,y=this.tableCount;0<=y?m<y:m>y;m=0<=y?++m:--m)c={tag:o.readString(4),checksum:o.readInt(),offset:o.readInt(),length:o.readInt()},this.tables[c.tag]=c}return n.prototype.encode=function(o){var c,m,y,v,A,S,I,D,z,Z,O,ce,ie;for(ie in O=Object.keys(o).length,S=Math.log(2),z=16*Math.floor(Math.log(O)/S),v=Math.floor(z/S),D=16*O-z,(m=new td).writeInt(this.scalarType),m.writeShort(O),m.writeShort(z),m.writeShort(v),m.writeShort(D),y=16*O,I=m.pos+y,A=null,ce=[],o)for(Z=o[ie],m.writeString(ie),m.writeInt(i(Z)),m.writeInt(I),m.writeInt(Z.length),ce=ce.concat(Z),ie==="head"&&(A=I),I+=Z.length;I%4;)ce.push(0),I++;return m.write(ce),c=2981146554-i(m.data),m.pos=A+8,m.writeUInt32(c),m.data},i=function(o){var c,m,y,v;for(o=rC.call(o);o.length%4;)o.push(0);for(y=new td(o),m=0,c=0,v=o.length;c<v;c=c+=4)m+=y.readUInt32();return 4294967295&m},n})(),QM={}.hasOwnProperty,Sh=function(i,n){for(var o in n)QM.call(n,o)&&(i[o]=n[o]);function c(){this.constructor=i}return c.prototype=n.prototype,i.prototype=new c,i.__super__=n.prototype,i};Zu=(function(){function i(n){var o;this.file=n,o=this.file.directory.tables[this.tag],this.exists=!!o,o&&(this.offset=o.offset,this.length=o.length,this.parse(this.file.contents))}return i.prototype.parse=function(){},i.prototype.encode=function(){},i.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},i})();var kM=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Sh(i,Zu),i.prototype.tag="head",i.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},i.prototype.encode=function(n){var o;return(o=new td).writeInt(this.version),o.writeInt(this.revision),o.writeInt(this.checkSumAdjustment),o.writeInt(this.magicNumber),o.writeShort(this.flags),o.writeShort(this.unitsPerEm),o.writeLongLong(this.created),o.writeLongLong(this.modified),o.writeShort(this.xMin),o.writeShort(this.yMin),o.writeShort(this.xMax),o.writeShort(this.yMax),o.writeShort(this.macStyle),o.writeShort(this.lowestRecPPEM),o.writeShort(this.fontDirectionHint),o.writeShort(n),o.writeShort(this.glyphDataFormat),o.data},i})(),qw=(function(){function i(n,o){var c,m,y,v,A,S,I,D,z,Z,O,ce,ie,W,le,ye,Be;switch(this.platformID=n.readUInt16(),this.encodingID=n.readShort(),this.offset=o+n.readInt(),z=n.pos,n.pos=this.offset,this.format=n.readUInt16(),this.length=n.readUInt16(),this.language=n.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(S=0;S<256;++S)this.codeMap[S]=n.readByte();break;case 4:for(O=n.readUInt16(),Z=O/2,n.pos+=6,y=(function(){var Le,lt;for(lt=[],S=Le=0;0<=Z?Le<Z:Le>Z;S=0<=Z?++Le:--Le)lt.push(n.readUInt16());return lt})(),n.pos+=2,ie=(function(){var Le,lt;for(lt=[],S=Le=0;0<=Z?Le<Z:Le>Z;S=0<=Z?++Le:--Le)lt.push(n.readUInt16());return lt})(),I=(function(){var Le,lt;for(lt=[],S=Le=0;0<=Z?Le<Z:Le>Z;S=0<=Z?++Le:--Le)lt.push(n.readUInt16());return lt})(),D=(function(){var Le,lt;for(lt=[],S=Le=0;0<=Z?Le<Z:Le>Z;S=0<=Z?++Le:--Le)lt.push(n.readUInt16());return lt})(),m=(this.length-n.pos+this.offset)/2,A=(function(){var Le,lt;for(lt=[],S=Le=0;0<=m?Le<m:Le>m;S=0<=m?++Le:--Le)lt.push(n.readUInt16());return lt})(),S=le=0,Be=y.length;le<Be;S=++le)for(W=y[S],c=ye=ce=ie[S];ce<=W?ye<=W:ye>=W;c=ce<=W?++ye:--ye)D[S]===0?v=c+I[S]:(v=A[D[S]/2+(c-ce)-(Z-S)]||0)!==0&&(v+=I[S]),this.codeMap[c]=65535&v}n.pos=z}return i.encode=function(n,o){var c,m,y,v,A,S,I,D,z,Z,O,ce,ie,W,le,ye,Be,Le,lt,ft,ut,Ne,Ce,_t,_e,Te,Ye,Ve,wt,ke,ot,st,xt,Ct,Fe,oe,xe,Ue,Ge,tt,mt,Pt,Et,$t,Ar,pr;switch(Ve=new td,v=Object.keys(n).sort(function(br,xr){return br-xr}),o){case"macroman":for(ie=0,W=(function(){var br=[];for(ce=0;ce<256;++ce)br.push(0);return br})(),ye={0:0},y={},wt=0,xt=v.length;wt<xt;wt++)ye[Et=n[m=v[wt]]]==null&&(ye[Et]=++ie),y[m]={old:n[m],new:ye[n[m]]},W[m]=ye[n[m]];return Ve.writeUInt16(1),Ve.writeUInt16(0),Ve.writeUInt32(12),Ve.writeUInt16(0),Ve.writeUInt16(262),Ve.writeUInt16(0),Ve.write(W),{charMap:y,subtable:Ve.data,maxGlyphID:ie+1};case"unicode":for(Te=[],z=[],Be=0,ye={},c={},le=I=null,ke=0,Ct=v.length;ke<Ct;ke++)ye[lt=n[m=v[ke]]]==null&&(ye[lt]=++Be),c[m]={old:lt,new:ye[lt]},A=ye[lt]-m,le!=null&&A===I||(le&&z.push(le),Te.push(m),I=A),le=m;for(le&&z.push(le),z.push(65535),Te.push(65535),_t=2*(Ce=Te.length),Ne=2*Math.pow(Math.log(Ce)/Math.LN2,2),Z=Math.log(Ne/2)/Math.LN2,ut=2*Ce-Ne,S=[],ft=[],O=[],ce=ot=0,Fe=Te.length;ot<Fe;ce=++ot){if(_e=Te[ce],D=z[ce],_e===65535){S.push(0),ft.push(0);break}if(_e-(Ye=c[_e].new)>=32768)for(S.push(0),ft.push(2*(O.length+Ce-ce)),m=st=_e;_e<=D?st<=D:st>=D;m=_e<=D?++st:--st)O.push(c[m].new);else S.push(Ye-_e),ft.push(0)}for(Ve.writeUInt16(3),Ve.writeUInt16(1),Ve.writeUInt32(12),Ve.writeUInt16(4),Ve.writeUInt16(16+8*Ce+2*O.length),Ve.writeUInt16(0),Ve.writeUInt16(_t),Ve.writeUInt16(Ne),Ve.writeUInt16(Z),Ve.writeUInt16(ut),mt=0,oe=z.length;mt<oe;mt++)m=z[mt],Ve.writeUInt16(m);for(Ve.writeUInt16(0),Pt=0,xe=Te.length;Pt<xe;Pt++)m=Te[Pt],Ve.writeUInt16(m);for($t=0,Ue=S.length;$t<Ue;$t++)A=S[$t],Ve.writeUInt16(A);for(Ar=0,Ge=ft.length;Ar<Ge;Ar++)Le=ft[Ar],Ve.writeUInt16(Le);for(pr=0,tt=O.length;pr<tt;pr++)ie=O[pr],Ve.writeUInt16(ie);return{charMap:c,subtable:Ve.data,maxGlyphID:Be+1}}},i})(),tC=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Sh(i,Zu),i.prototype.tag="cmap",i.prototype.parse=function(n){var o,c,m;for(n.pos=this.offset,this.version=n.readUInt16(),m=n.readUInt16(),this.tables=[],this.unicode=null,c=0;0<=m?c<m:c>m;c=0<=m?++c:--c)o=new qw(n,this.offset),this.tables.push(o),o.isUnicode&&this.unicode==null&&(this.unicode=o);return!0},i.encode=function(n,o){var c,m;return o==null&&(o="macroman"),c=qw.encode(n,o),(m=new td).writeUInt16(0),m.writeUInt16(1),c.table=m.data.concat(c.subtable),c},i})(),OM=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Sh(i,Zu),i.prototype.tag="hhea",i.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},i})(),zM=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Sh(i,Zu),i.prototype.tag="OS/2",i.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=(function(){var o,c;for(c=[],o=0;o<10;++o)c.push(n.readByte());return c})(),this.charRange=(function(){var o,c;for(c=[],o=0;o<4;++o)c.push(n.readInt());return c})(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=(function(){var o,c;for(c=[],o=0;o<2;o=++o)c.push(n.readInt());return c})(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},i})(),jM=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Sh(i,Zu),i.prototype.tag="post",i.prototype.parse=function(n){var o,c,m;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:case 196608:break;case 131072:var y;for(c=n.readUInt16(),this.glyphNameIndex=[],y=0;0<=c?y<c:y>c;y=0<=c?++y:--y)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],m=[];n.pos<this.offset+this.length;)o=n.readByte(),m.push(this.names.push(n.readString(o)));return m;case 151552:return c=n.readUInt16(),this.offsets=n.read(c);case 262144:return this.map=(function(){var v,A,S;for(S=[],y=v=0,A=this.file.maxp.numGlyphs;0<=A?v<A:v>A;y=0<=A?++v:--v)S.push(n.readUInt32());return S}).call(this)}},i})(),HM=function(i,n){this.raw=i,this.length=i.length,this.platformID=n.platformID,this.encodingID=n.encodingID,this.languageID=n.languageID},VM=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Sh(i,Zu),i.prototype.tag="name",i.prototype.parse=function(n){var o,c,m,y,v,A,S,I,D,z,Z;for(n.pos=this.offset,n.readShort(),o=n.readShort(),A=n.readShort(),c=[],y=0;0<=o?y<o:y>o;y=0<=o?++y:--y)c.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+A+n.readShort()});for(S={},y=D=0,z=c.length;D<z;y=++D)m=c[y],n.pos=m.offset,I=n.readString(m.length),v=new HM(I,m),S[Z=m.nameID]==null&&(S[Z]=[]),S[m.nameID].push(v);this.strings=S,this.copyright=S[0],this.fontFamily=S[1],this.fontSubfamily=S[2],this.uniqueSubfamily=S[3],this.fontName=S[4],this.version=S[5];try{this.postscriptName=S[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=S[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=S[7],this.manufacturer=S[8],this.designer=S[9],this.description=S[10],this.vendorUrl=S[11],this.designerUrl=S[12],this.license=S[13],this.licenseUrl=S[14],this.preferredFamily=S[15],this.preferredSubfamily=S[17],this.compatibleFull=S[18],this.sampleText=S[19]},i})(),GM=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Sh(i,Zu),i.prototype.tag="maxp",i.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},i})(),qM=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Sh(i,Zu),i.prototype.tag="hmtx",i.prototype.parse=function(n){var o,c,m,y,v,A,S;for(n.pos=this.offset,this.metrics=[],o=0,A=this.file.hhea.numberOfMetrics;0<=A?o<A:o>A;o=0<=A?++o:--o)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(m=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var I,D;for(D=[],o=I=0;0<=m?I<m:I>m;o=0<=m?++I:--I)D.push(n.readInt16());return D})(),this.widths=(function(){var I,D,z,Z;for(Z=[],I=0,D=(z=this.metrics).length;I<D;I++)y=z[I],Z.push(y.advance);return Z}).call(this),c=this.widths[this.widths.length-1],S=[],o=v=0;0<=m?v<m:v>m;o=0<=m?++v:--v)S.push(this.widths.push(c));return S},i.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},i})(),rC=[].slice,KM=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Sh(i,Zu),i.prototype.tag="glyf",i.prototype.parse=function(){return this.cache={}},i.prototype.glyphFor=function(n){var o,c,m,y,v,A,S,I,D,z;return n in this.cache?this.cache[n]:(y=this.file.loca,o=this.file.contents,c=y.indexOf(n),(m=y.lengthOf(n))===0?this.cache[n]=null:(o.pos=this.offset+c,v=(A=new td(o.read(m))).readShort(),I=A.readShort(),z=A.readShort(),S=A.readShort(),D=A.readShort(),this.cache[n]=v===-1?new XM(A,I,z,S,D):new ZM(A,v,I,z,S,D),this.cache[n]))},i.prototype.encode=function(n,o,c){var m,y,v,A,S;for(v=[],y=[],A=0,S=o.length;A<S;A++)m=n[o[A]],y.push(v.length),m&&(v=v.concat(m.encode(c)));return y.push(v.length),{table:v,offsets:y}},i})(),ZM=(function(){function i(n,o,c,m,y,v){this.raw=n,this.numberOfContours=o,this.xMin=c,this.yMin=m,this.xMax=y,this.yMax=v,this.compound=!1}return i.prototype.encode=function(){return this.raw.data},i})(),XM=(function(){function i(n,o,c,m,y){var v,A;for(this.raw=n,this.xMin=o,this.yMin=c,this.xMax=m,this.yMax=y,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],v=this.raw;A=v.readShort(),this.glyphOffsets.push(v.pos),this.glyphIDs.push(v.readUInt16()),32&A;)v.pos+=1&A?4:2,128&A?v.pos+=8:64&A?v.pos+=4:8&A&&(v.pos+=2)}return i.prototype.encode=function(){var n,o,c;for(o=new td(rC.call(this.raw.data)),n=0,c=this.glyphIDs.length;n<c;++n)o.pos=this.glyphOffsets[n];return o.data},i})(),WM=(function(){function i(){return i.__super__.constructor.apply(this,arguments)}return Sh(i,Zu),i.prototype.tag="loca",i.prototype.parse=function(n){var o,c;return n.pos=this.offset,o=this.file.head.indexToLocFormat,this.offsets=o===0?(function(){var m,y;for(y=[],c=0,m=this.length;c<m;c+=2)y.push(2*n.readUInt16());return y}).call(this):(function(){var m,y;for(y=[],c=0,m=this.length;c<m;c+=4)y.push(n.readUInt32());return y}).call(this)},i.prototype.indexOf=function(n){return this.offsets[n]},i.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},i.prototype.encode=function(n,o){for(var c=new Uint32Array(this.offsets.length),m=0,y=0,v=0;v<c.length;++v)if(c[v]=m,y<o.length&&o[y]==v){++y,c[v]=m;var A=this.offsets[v],S=this.offsets[v+1]-A;S>0&&(m+=S)}for(var I=new Array(4*c.length),D=0;D<c.length;++D)I[4*D+3]=255&c[D],I[4*D+2]=(65280&c[D])>>8,I[4*D+1]=(16711680&c[D])>>16,I[4*D]=(4278190080&c[D])>>24;return I},i})(),YM=(function(){function i(n){this.font=n,this.subset={},this.unicodes={},this.next=33}return i.prototype.generateCmap=function(){var n,o,c,m,y;for(o in m=this.font.cmap.tables[0].codeMap,n={},y=this.subset)c=y[o],n[o]=m[c];return n},i.prototype.glyphsFor=function(n){var o,c,m,y,v,A,S;for(m={},v=0,A=n.length;v<A;v++)m[y=n[v]]=this.font.glyf.glyphFor(y);for(y in o=[],m)(c=m[y])!=null&&c.compound&&o.push.apply(o,c.glyphIDs);if(o.length>0)for(y in S=this.glyphsFor(o))c=S[y],m[y]=c;return m},i.prototype.encode=function(n,o){var c,m,y,v,A,S,I,D,z,Z,O,ce,ie,W,le;for(m in c=tC.encode(this.generateCmap(),"unicode"),v=this.glyphsFor(n),O={0:0},le=c.charMap)O[(S=le[m]).old]=S.new;for(ce in Z=c.maxGlyphID,v)ce in O||(O[ce]=Z++);return D=(function(ye){var Be,Le;for(Be in Le={},ye)Le[ye[Be]]=Be;return Le})(O),z=Object.keys(D).sort(function(ye,Be){return ye-Be}),ie=(function(){var ye,Be,Le;for(Le=[],ye=0,Be=z.length;ye<Be;ye++)A=z[ye],Le.push(D[A]);return Le})(),y=this.font.glyf.encode(v,ie,O),I=this.font.loca.encode(y.offsets,ie),W={cmap:this.font.cmap.raw(),glyf:y.table,loca:I,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(o)},this.font.os2.exists&&(W["OS/2"]=this.font.os2.raw()),this.font.directory.encode(W)},i})();hn.API.PDFObject=(function(){var i;function n(){}return i=function(o,c){return(Array(c+1).join("0")+o).slice(-c)},n.convert=function(o){var c,m,y,v;if(Array.isArray(o))return"["+(function(){var A,S,I;for(I=[],A=0,S=o.length;A<S;A++)c=o[A],I.push(n.convert(c));return I})().join(" ")+"]";if(typeof o=="string")return"/"+o;if(o?.isString)return"("+o+")";if(o instanceof Date)return"(D:"+i(o.getUTCFullYear(),4)+i(o.getUTCMonth(),2)+i(o.getUTCDate(),2)+i(o.getUTCHours(),2)+i(o.getUTCMinutes(),2)+i(o.getUTCSeconds(),2)+"Z)";if({}.toString.call(o)==="[object Object]"){for(m in y=["<<"],o)v=o[m],y.push("/"+m+" "+n.convert(v));return y.push(">>"),y.join(`
`)}return""+o},n})();var Hv=function(i,n){return Hv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,c){o.__proto__=c}||function(o,c){for(var m in c)Object.prototype.hasOwnProperty.call(c,m)&&(o[m]=c[m])},Hv(i,n)};function Xu(i,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");Hv(i,n);function o(){this.constructor=i}i.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}var Vv=function(){return Vv=Object.assign||function(n){for(var o,c=1,m=arguments.length;c<m;c++){o=arguments[c];for(var y in o)Object.prototype.hasOwnProperty.call(o,y)&&(n[y]=o[y])}return n},Vv.apply(this,arguments)};function KA(i,n,o,c){function m(y){return y instanceof o?y:new o(function(v){v(y)})}return new(o||(o=Promise))(function(y,v){function A(D){try{I(c.next(D))}catch(z){v(z)}}function S(D){try{I(c.throw(D))}catch(z){v(z)}}function I(D){D.done?y(D.value):m(D.value).then(A,S)}I((c=c.apply(i,[])).next())})}function _A(i,n){var o={label:0,sent:function(){if(y[0]&1)throw y[1];return y[1]},trys:[],ops:[]},c,m,y,v;return v={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function A(I){return function(D){return S([I,D])}}function S(I){if(c)throw new TypeError("Generator is already executing.");for(;o;)try{if(c=1,m&&(y=I[0]&2?m.return:I[0]?m.throw||((y=m.return)&&y.call(m),0):m.next)&&!(y=y.call(m,I[1])).done)return y;switch(m=0,y&&(I=[I[0]&2,y.value]),I[0]){case 0:case 1:y=I;break;case 4:return o.label++,{value:I[1],done:!1};case 5:o.label++,m=I[1],I=[0];continue;case 7:I=o.ops.pop(),o.trys.pop();continue;default:if(y=o.trys,!(y=y.length>0&&y[y.length-1])&&(I[0]===6||I[0]===2)){o=0;continue}if(I[0]===3&&(!y||I[1]>y[0]&&I[1]<y[3])){o.label=I[1];break}if(I[0]===6&&o.label<y[1]){o.label=y[1],y=I;break}if(y&&o.label<y[2]){o.label=y[2],o.ops.push(I);break}y[2]&&o.ops.pop(),o.trys.pop();continue}I=n.call(i,o)}catch(D){I=[6,D],m=0}finally{c=y=0}if(I[0]&5)throw I[1];return{value:I[0]?I[1]:void 0,done:!0}}}function Ly(i,n,o){if(arguments.length===2)for(var c=0,m=n.length,y;c<m;c++)(y||!(c in n))&&(y||(y=Array.prototype.slice.call(n,0,c)),y[c]=n[c]);return i.concat(y||n)}var lf=(function(){function i(n,o,c,m){this.left=n,this.top=o,this.width=c,this.height=m}return i.prototype.add=function(n,o,c,m){return new i(this.left+n,this.top+o,this.width+c,this.height+m)},i.fromClientRect=function(n,o){return new i(o.left+n.windowBounds.left,o.top+n.windowBounds.top,o.width,o.height)},i.fromDOMRectList=function(n,o){var c=Array.from(o).find(function(m){return m.width!==0});return c?new i(c.left+n.windowBounds.left,c.top+n.windowBounds.top,c.width,c.height):i.EMPTY},i.EMPTY=new i(0,0,0,0),i})(),V_=function(i,n){return lf.fromClientRect(i,n.getBoundingClientRect())},$M=function(i){var n=i.body,o=i.documentElement;if(!n||!o)throw new Error("Unable to get document size");var c=Math.max(Math.max(n.scrollWidth,o.scrollWidth),Math.max(n.offsetWidth,o.offsetWidth),Math.max(n.clientWidth,o.clientWidth)),m=Math.max(Math.max(n.scrollHeight,o.scrollHeight),Math.max(n.offsetHeight,o.offsetHeight),Math.max(n.clientHeight,o.clientHeight));return new lf(0,0,c,m)},G_=function(i){for(var n=[],o=0,c=i.length;o<c;){var m=i.charCodeAt(o++);if(m>=55296&&m<=56319&&o<c){var y=i.charCodeAt(o++);(y&64512)===56320?n.push(((m&1023)<<10)+(y&1023)+65536):(n.push(m),o--)}else n.push(m)}return n},ro=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];if(String.fromCodePoint)return String.fromCodePoint.apply(String,i);var o=i.length;if(!o)return"";for(var c=[],m=-1,y="";++m<o;){var v=i[m];v<=65535?c.push(v):(v-=65536,c.push((v>>10)+55296,v%1024+56320)),(m+1===o||c.length>16384)&&(y+=String.fromCharCode.apply(String,c),c.length=0)}return y},Kw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",JM=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var My=0;My<Kw.length;My++)JM[Kw.charCodeAt(My)]=My;var Zw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Pg=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Uy=0;Uy<Zw.length;Uy++)Pg[Zw.charCodeAt(Uy)]=Uy;var eU=function(i){var n=i.length*.75,o=i.length,c,m=0,y,v,A,S;i[i.length-1]==="="&&(n--,i[i.length-2]==="="&&n--);var I=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(n):new Array(n),D=Array.isArray(I)?I:new Uint8Array(I);for(c=0;c<o;c+=4)y=Pg[i.charCodeAt(c)],v=Pg[i.charCodeAt(c+1)],A=Pg[i.charCodeAt(c+2)],S=Pg[i.charCodeAt(c+3)],D[m++]=y<<2|v>>4,D[m++]=(v&15)<<4|A>>2,D[m++]=(A&3)<<6|S&63;return I},tU=function(i){for(var n=i.length,o=[],c=0;c<n;c+=2)o.push(i[c+1]<<8|i[c]);return o},rU=function(i){for(var n=i.length,o=[],c=0;c<n;c+=4)o.push(i[c+3]<<24|i[c+2]<<16|i[c+1]<<8|i[c]);return o},zd=5,Dx=11,nv=2,nU=Dx-zd,nC=65536>>zd,iU=1<<zd,iv=iU-1,aU=1024>>zd,sU=nC+aU,oU=sU,lU=32,AU=oU+lU,cU=65536>>Dx,uU=1<<nU,hU=uU-1,Xw=function(i,n,o){return i.slice?i.slice(n,o):new Uint16Array(Array.prototype.slice.call(i,n,o))},fU=function(i,n,o){return i.slice?i.slice(n,o):new Uint32Array(Array.prototype.slice.call(i,n,o))},dU=function(i,n){var o=eU(i),c=Array.isArray(o)?rU(o):new Uint32Array(o),m=Array.isArray(o)?tU(o):new Uint16Array(o),y=24,v=Xw(m,y/2,c[4]/2),A=c[5]===2?Xw(m,(y+c[4])/2):fU(c,Math.ceil((y+c[4])/4));return new pU(c[0],c[1],c[2],c[3],v,A)},pU=(function(){function i(n,o,c,m,y,v){this.initialValue=n,this.errorValue=o,this.highStart=c,this.highValueIndex=m,this.index=y,this.data=v}return i.prototype.get=function(n){var o;if(n>=0){if(n<55296||n>56319&&n<=65535)return o=this.index[n>>zd],o=(o<<nv)+(n&iv),this.data[o];if(n<=65535)return o=this.index[nC+(n-55296>>zd)],o=(o<<nv)+(n&iv),this.data[o];if(n<this.highStart)return o=AU-cU+(n>>Dx),o=this.index[o],o+=n>>zd&hU,o=this.index[o],o=(o<<nv)+(n&iv),this.data[o];if(n<=1114111)return this.data[this.highValueIndex]}return this.errorValue},i})(),Ww="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mU=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Dy=0;Dy<Ww.length;Dy++)mU[Ww.charCodeAt(Dy)]=Dy;var gU="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",Yw=50,yU=1,iC=2,aC=3,_U=4,vU=5,$w=7,sC=8,Jw=9,Wf=10,Gv=11,e2=12,qv=13,xU=14,Ng=15,Kv=16,Py=17,Ig=18,bU=19,t2=20,Zv=21,Lg=22,av=23,Yp=24,Dc=25,Rg=26,Qg=27,$p=28,wU=29,Nd=30,BU=31,Ny=32,Ry=33,Xv=34,Wv=35,Yv=36,r0=37,$v=38,h_=39,f_=40,sv=41,oC=42,CU=43,SU=[9001,65288],lC="!",xi="",Qy="",Jv=dU(gU),Jh=[Nd,Yv],ex=[yU,iC,aC,vU],AC=[Wf,sC],r2=[Qg,Rg],EU=ex.concat(AC),n2=[$v,h_,f_,Xv,Wv],TU=[Ng,qv],FU=function(i,n){n===void 0&&(n="strict");var o=[],c=[],m=[];return i.forEach(function(y,v){var A=Jv.get(y);if(A>Yw?(m.push(!0),A-=Yw):m.push(!1),["normal","auto","loose"].indexOf(n)!==-1&&[8208,8211,12316,12448].indexOf(y)!==-1)return c.push(v),o.push(Kv);if(A===_U||A===Gv){if(v===0)return c.push(v),o.push(Nd);var S=o[v-1];return EU.indexOf(S)===-1?(c.push(c[v-1]),o.push(S)):(c.push(v),o.push(Nd))}if(c.push(v),A===BU)return o.push(n==="strict"?Zv:r0);if(A===oC||A===wU)return o.push(Nd);if(A===CU)return y>=131072&&y<=196605||y>=196608&&y<=262141?o.push(r0):o.push(Nd);o.push(A)}),[c,o,m]},ov=function(i,n,o,c){var m=c[o];if(Array.isArray(i)?i.indexOf(m)!==-1:i===m)for(var y=o;y<=c.length;){y++;var v=c[y];if(v===n)return!0;if(v!==Wf)break}if(m===Wf)for(var y=o;y>0;){y--;var A=c[y];if(Array.isArray(i)?i.indexOf(A)!==-1:i===A)for(var S=o;S<=c.length;){S++;var v=c[S];if(v===n)return!0;if(v!==Wf)break}if(A!==Wf)break}return!1},i2=function(i,n){for(var o=i;o>=0;){var c=n[o];if(c===Wf)o--;else return c}return 0},IU=function(i,n,o,c,m){if(o[c]===0)return xi;var y=c-1;if(Array.isArray(m)&&m[y]===!0)return xi;var v=y-1,A=y+1,S=n[y],I=v>=0?n[v]:0,D=n[A];if(S===iC&&D===aC)return xi;if(ex.indexOf(S)!==-1)return lC;if(ex.indexOf(D)!==-1||AC.indexOf(D)!==-1)return xi;if(i2(y,n)===sC)return Qy;if(Jv.get(i[y])===Gv||(S===Ny||S===Ry)&&Jv.get(i[A])===Gv||S===$w||D===$w||S===Jw||[Wf,qv,Ng].indexOf(S)===-1&&D===Jw||[Py,Ig,bU,Yp,$p].indexOf(D)!==-1||i2(y,n)===Lg||ov(av,Lg,y,n)||ov([Py,Ig],Zv,y,n)||ov(e2,e2,y,n))return xi;if(S===Wf)return Qy;if(S===av||D===av)return xi;if(D===Kv||S===Kv)return Qy;if([qv,Ng,Zv].indexOf(D)!==-1||S===xU||I===Yv&&TU.indexOf(S)!==-1||S===$p&&D===Yv||D===t2||Jh.indexOf(D)!==-1&&S===Dc||Jh.indexOf(S)!==-1&&D===Dc||S===Qg&&[r0,Ny,Ry].indexOf(D)!==-1||[r0,Ny,Ry].indexOf(S)!==-1&&D===Rg||Jh.indexOf(S)!==-1&&r2.indexOf(D)!==-1||r2.indexOf(S)!==-1&&Jh.indexOf(D)!==-1||[Qg,Rg].indexOf(S)!==-1&&(D===Dc||[Lg,Ng].indexOf(D)!==-1&&n[A+1]===Dc)||[Lg,Ng].indexOf(S)!==-1&&D===Dc||S===Dc&&[Dc,$p,Yp].indexOf(D)!==-1)return xi;if([Dc,$p,Yp,Py,Ig].indexOf(D)!==-1)for(var z=y;z>=0;){var Z=n[z];if(Z===Dc)return xi;if([$p,Yp].indexOf(Z)!==-1)z--;else break}if([Qg,Rg].indexOf(D)!==-1)for(var z=[Py,Ig].indexOf(S)!==-1?v:y;z>=0;){var Z=n[z];if(Z===Dc)return xi;if([$p,Yp].indexOf(Z)!==-1)z--;else break}if($v===S&&[$v,h_,Xv,Wv].indexOf(D)!==-1||[h_,Xv].indexOf(S)!==-1&&[h_,f_].indexOf(D)!==-1||[f_,Wv].indexOf(S)!==-1&&D===f_||n2.indexOf(S)!==-1&&[t2,Rg].indexOf(D)!==-1||n2.indexOf(D)!==-1&&S===Qg||Jh.indexOf(S)!==-1&&Jh.indexOf(D)!==-1||S===Yp&&Jh.indexOf(D)!==-1||Jh.concat(Dc).indexOf(S)!==-1&&D===Lg&&SU.indexOf(i[A])===-1||Jh.concat(Dc).indexOf(D)!==-1&&S===Ig)return xi;if(S===sv&&D===sv){for(var O=o[y],ce=1;O>0&&(O--,n[O]===sv);)ce++;if(ce%2!==0)return xi}return S===Ny&&D===Ry?xi:Qy},LU=function(i,n){n||(n={lineBreak:"normal",wordBreak:"normal"});var o=FU(i,n.lineBreak),c=o[0],m=o[1],y=o[2];(n.wordBreak==="break-all"||n.wordBreak==="break-word")&&(m=m.map(function(A){return[Dc,Nd,oC].indexOf(A)!==-1?r0:A}));var v=n.wordBreak==="keep-all"?y.map(function(A,S){return A&&i[S]>=19968&&i[S]<=40959}):void 0;return[c,m,v]},MU=(function(){function i(n,o,c,m){this.codePoints=n,this.required=o===lC,this.start=c,this.end=m}return i.prototype.slice=function(){return ro.apply(void 0,this.codePoints.slice(this.start,this.end))},i})(),UU=function(i,n){var o=G_(i),c=LU(o,n),m=c[0],y=c[1],v=c[2],A=o.length,S=0,I=0;return{next:function(){if(I>=A)return{done:!0,value:null};for(var D=xi;I<A&&(D=IU(o,y,m,++I,v))===xi;);if(D!==xi||I===A){var z=new MU(o,D,S,I);return S=I,{value:z,done:!1}}return{done:!0,value:null}}}},DU=1,PU=2,c0=4,a2=8,T_=10,s2=47,Gg=92,NU=9,RU=32,ky=34,Mg=61,QU=35,kU=36,OU=37,Oy=39,zy=40,Ug=41,zU=95,gc=45,jU=33,HU=60,VU=62,GU=64,qU=91,KU=93,ZU=61,XU=123,jy=63,WU=125,o2=124,YU=126,$U=128,l2=65533,lv=42,Qd=43,JU=44,e6=58,t6=59,n0=46,r6=0,n6=8,i6=11,a6=14,s6=31,o6=127,bh=-1,cC=48,uC=97,hC=101,l6=102,A6=117,c6=122,fC=65,dC=69,pC=70,u6=85,h6=90,vA=function(i){return i>=cC&&i<=57},f6=function(i){return i>=55296&&i<=57343},Jp=function(i){return vA(i)||i>=fC&&i<=pC||i>=uC&&i<=l6},d6=function(i){return i>=uC&&i<=c6},p6=function(i){return i>=fC&&i<=h6},m6=function(i){return d6(i)||p6(i)},g6=function(i){return i>=$U},Hy=function(i){return i===T_||i===NU||i===RU},F_=function(i){return m6(i)||g6(i)||i===zU},A2=function(i){return F_(i)||vA(i)||i===gc},y6=function(i){return i>=r6&&i<=n6||i===i6||i>=a6&&i<=s6||i===o6},Zf=function(i,n){return i!==Gg?!1:n!==T_},Vy=function(i,n,o){return i===gc?F_(n)||Zf(n,o):F_(i)?!0:!!(i===Gg&&Zf(i,n))},Av=function(i,n,o){return i===Qd||i===gc?vA(n)?!0:n===n0&&vA(o):vA(i===n0?n:i)},_6=function(i){var n=0,o=1;(i[n]===Qd||i[n]===gc)&&(i[n]===gc&&(o=-1),n++);for(var c=[];vA(i[n]);)c.push(i[n++]);var m=c.length?parseInt(ro.apply(void 0,c),10):0;i[n]===n0&&n++;for(var y=[];vA(i[n]);)y.push(i[n++]);var v=y.length,A=v?parseInt(ro.apply(void 0,y),10):0;(i[n]===dC||i[n]===hC)&&n++;var S=1;(i[n]===Qd||i[n]===gc)&&(i[n]===gc&&(S=-1),n++);for(var I=[];vA(i[n]);)I.push(i[n++]);var D=I.length?parseInt(ro.apply(void 0,I),10):0;return o*(m+A*Math.pow(10,-v))*Math.pow(10,S*D)},v6={type:2},x6={type:3},b6={type:4},w6={type:13},B6={type:8},C6={type:21},S6={type:9},E6={type:10},T6={type:11},F6={type:12},I6={type:14},Gy={type:23},L6={type:1},M6={type:25},U6={type:24},D6={type:26},P6={type:27},N6={type:28},R6={type:29},Q6={type:31},tx={type:32},mC=(function(){function i(){this._value=[]}return i.prototype.write=function(n){this._value=this._value.concat(G_(n))},i.prototype.read=function(){for(var n=[],o=this.consumeToken();o!==tx;)n.push(o),o=this.consumeToken();return n},i.prototype.consumeToken=function(){var n=this.consumeCodePoint();switch(n){case ky:return this.consumeStringToken(ky);case QU:var o=this.peekCodePoint(0),c=this.peekCodePoint(1),m=this.peekCodePoint(2);if(A2(o)||Zf(c,m)){var y=Vy(o,c,m)?PU:DU,v=this.consumeName();return{type:5,value:v,flags:y}}break;case kU:if(this.peekCodePoint(0)===Mg)return this.consumeCodePoint(),w6;break;case Oy:return this.consumeStringToken(Oy);case zy:return v6;case Ug:return x6;case lv:if(this.peekCodePoint(0)===Mg)return this.consumeCodePoint(),I6;break;case Qd:if(Av(n,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(n),this.consumeNumericToken();break;case JU:return b6;case gc:var A=n,S=this.peekCodePoint(0),I=this.peekCodePoint(1);if(Av(A,S,I))return this.reconsumeCodePoint(n),this.consumeNumericToken();if(Vy(A,S,I))return this.reconsumeCodePoint(n),this.consumeIdentLikeToken();if(S===gc&&I===VU)return this.consumeCodePoint(),this.consumeCodePoint(),U6;break;case n0:if(Av(n,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(n),this.consumeNumericToken();break;case s2:if(this.peekCodePoint(0)===lv)for(this.consumeCodePoint();;){var D=this.consumeCodePoint();if(D===lv&&(D=this.consumeCodePoint(),D===s2))return this.consumeToken();if(D===bh)return this.consumeToken()}break;case e6:return D6;case t6:return P6;case HU:if(this.peekCodePoint(0)===jU&&this.peekCodePoint(1)===gc&&this.peekCodePoint(2)===gc)return this.consumeCodePoint(),this.consumeCodePoint(),M6;break;case GU:var z=this.peekCodePoint(0),Z=this.peekCodePoint(1),O=this.peekCodePoint(2);if(Vy(z,Z,O)){var v=this.consumeName();return{type:7,value:v}}break;case qU:return N6;case Gg:if(Zf(n,this.peekCodePoint(0)))return this.reconsumeCodePoint(n),this.consumeIdentLikeToken();break;case KU:return R6;case ZU:if(this.peekCodePoint(0)===Mg)return this.consumeCodePoint(),B6;break;case XU:return T6;case WU:return F6;case A6:case u6:var ce=this.peekCodePoint(0),ie=this.peekCodePoint(1);return ce===Qd&&(Jp(ie)||ie===jy)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(n),this.consumeIdentLikeToken();case o2:if(this.peekCodePoint(0)===Mg)return this.consumeCodePoint(),S6;if(this.peekCodePoint(0)===o2)return this.consumeCodePoint(),C6;break;case YU:if(this.peekCodePoint(0)===Mg)return this.consumeCodePoint(),E6;break;case bh:return tx}return Hy(n)?(this.consumeWhiteSpace(),Q6):vA(n)?(this.reconsumeCodePoint(n),this.consumeNumericToken()):F_(n)?(this.reconsumeCodePoint(n),this.consumeIdentLikeToken()):{type:6,value:ro(n)}},i.prototype.consumeCodePoint=function(){var n=this._value.shift();return typeof n>"u"?-1:n},i.prototype.reconsumeCodePoint=function(n){this._value.unshift(n)},i.prototype.peekCodePoint=function(n){return n>=this._value.length?-1:this._value[n]},i.prototype.consumeUnicodeRangeToken=function(){for(var n=[],o=this.consumeCodePoint();Jp(o)&&n.length<6;)n.push(o),o=this.consumeCodePoint();for(var c=!1;o===jy&&n.length<6;)n.push(o),o=this.consumeCodePoint(),c=!0;if(c){var m=parseInt(ro.apply(void 0,n.map(function(S){return S===jy?cC:S})),16),y=parseInt(ro.apply(void 0,n.map(function(S){return S===jy?pC:S})),16);return{type:30,start:m,end:y}}var v=parseInt(ro.apply(void 0,n),16);if(this.peekCodePoint(0)===gc&&Jp(this.peekCodePoint(1))){this.consumeCodePoint(),o=this.consumeCodePoint();for(var A=[];Jp(o)&&A.length<6;)A.push(o),o=this.consumeCodePoint();var y=parseInt(ro.apply(void 0,A),16);return{type:30,start:v,end:y}}else return{type:30,start:v,end:v}},i.prototype.consumeIdentLikeToken=function(){var n=this.consumeName();return n.toLowerCase()==="url"&&this.peekCodePoint(0)===zy?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===zy?(this.consumeCodePoint(),{type:19,value:n}):{type:20,value:n}},i.prototype.consumeUrlToken=function(){var n=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===bh)return{type:22,value:""};var o=this.peekCodePoint(0);if(o===Oy||o===ky){var c=this.consumeStringToken(this.consumeCodePoint());return c.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===bh||this.peekCodePoint(0)===Ug)?(this.consumeCodePoint(),{type:22,value:c.value}):(this.consumeBadUrlRemnants(),Gy)}for(;;){var m=this.consumeCodePoint();if(m===bh||m===Ug)return{type:22,value:ro.apply(void 0,n)};if(Hy(m))return this.consumeWhiteSpace(),this.peekCodePoint(0)===bh||this.peekCodePoint(0)===Ug?(this.consumeCodePoint(),{type:22,value:ro.apply(void 0,n)}):(this.consumeBadUrlRemnants(),Gy);if(m===ky||m===Oy||m===zy||y6(m))return this.consumeBadUrlRemnants(),Gy;if(m===Gg)if(Zf(m,this.peekCodePoint(0)))n.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Gy;else n.push(m)}},i.prototype.consumeWhiteSpace=function(){for(;Hy(this.peekCodePoint(0));)this.consumeCodePoint()},i.prototype.consumeBadUrlRemnants=function(){for(;;){var n=this.consumeCodePoint();if(n===Ug||n===bh)return;Zf(n,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},i.prototype.consumeStringSlice=function(n){for(var o=5e4,c="";n>0;){var m=Math.min(o,n);c+=ro.apply(void 0,this._value.splice(0,m)),n-=m}return this._value.shift(),c},i.prototype.consumeStringToken=function(n){var o="",c=0;do{var m=this._value[c];if(m===bh||m===void 0||m===n)return o+=this.consumeStringSlice(c),{type:0,value:o};if(m===T_)return this._value.splice(0,c),L6;if(m===Gg){var y=this._value[c+1];y!==bh&&y!==void 0&&(y===T_?(o+=this.consumeStringSlice(c),c=-1,this._value.shift()):Zf(m,y)&&(o+=this.consumeStringSlice(c),o+=ro(this.consumeEscapedCodePoint()),c=-1))}c++}while(!0)},i.prototype.consumeNumber=function(){var n=[],o=c0,c=this.peekCodePoint(0);for((c===Qd||c===gc)&&n.push(this.consumeCodePoint());vA(this.peekCodePoint(0));)n.push(this.consumeCodePoint());c=this.peekCodePoint(0);var m=this.peekCodePoint(1);if(c===n0&&vA(m))for(n.push(this.consumeCodePoint(),this.consumeCodePoint()),o=a2;vA(this.peekCodePoint(0));)n.push(this.consumeCodePoint());c=this.peekCodePoint(0),m=this.peekCodePoint(1);var y=this.peekCodePoint(2);if((c===dC||c===hC)&&((m===Qd||m===gc)&&vA(y)||vA(m)))for(n.push(this.consumeCodePoint(),this.consumeCodePoint()),o=a2;vA(this.peekCodePoint(0));)n.push(this.consumeCodePoint());return[_6(n),o]},i.prototype.consumeNumericToken=function(){var n=this.consumeNumber(),o=n[0],c=n[1],m=this.peekCodePoint(0),y=this.peekCodePoint(1),v=this.peekCodePoint(2);if(Vy(m,y,v)){var A=this.consumeName();return{type:15,number:o,flags:c,unit:A}}return m===OU?(this.consumeCodePoint(),{type:16,number:o,flags:c}):{type:17,number:o,flags:c}},i.prototype.consumeEscapedCodePoint=function(){var n=this.consumeCodePoint();if(Jp(n)){for(var o=ro(n);Jp(this.peekCodePoint(0))&&o.length<6;)o+=ro(this.consumeCodePoint());Hy(this.peekCodePoint(0))&&this.consumeCodePoint();var c=parseInt(o,16);return c===0||f6(c)||c>1114111?l2:c}return n===bh?l2:n},i.prototype.consumeName=function(){for(var n="";;){var o=this.consumeCodePoint();if(A2(o))n+=ro(o);else if(Zf(o,this.peekCodePoint(0)))n+=ro(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(o),n}},i})(),gC=(function(){function i(n){this._tokens=n}return i.create=function(n){var o=new mC;return o.write(n),new i(o.read())},i.parseValue=function(n){return i.create(n).parseComponentValue()},i.parseValues=function(n){return i.create(n).parseComponentValues()},i.prototype.parseComponentValue=function(){for(var n=this.consumeToken();n.type===31;)n=this.consumeToken();if(n.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(n);var o=this.consumeComponentValue();do n=this.consumeToken();while(n.type===31);if(n.type===32)return o;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},i.prototype.parseComponentValues=function(){for(var n=[];;){var o=this.consumeComponentValue();if(o.type===32)return n;n.push(o),n.push()}},i.prototype.consumeComponentValue=function(){var n=this.consumeToken();switch(n.type){case 11:case 28:case 2:return this.consumeSimpleBlock(n.type);case 19:return this.consumeFunction(n)}return n},i.prototype.consumeSimpleBlock=function(n){for(var o={type:n,values:[]},c=this.consumeToken();;){if(c.type===32||O6(c,n))return o;this.reconsumeToken(c),o.values.push(this.consumeComponentValue()),c=this.consumeToken()}},i.prototype.consumeFunction=function(n){for(var o={name:n.value,values:[],type:18};;){var c=this.consumeToken();if(c.type===32||c.type===3)return o;this.reconsumeToken(c),o.values.push(this.consumeComponentValue())}},i.prototype.consumeToken=function(){var n=this._tokens.shift();return typeof n>"u"?tx:n},i.prototype.reconsumeToken=function(n){this._tokens.unshift(n)},i})(),u0=function(i){return i.type===15},bm=function(i){return i.type===17},va=function(i){return i.type===20},k6=function(i){return i.type===0},rx=function(i,n){return va(i)&&i.value===n},yC=function(i){return i.type!==31},mm=function(i){return i.type!==31&&i.type!==4},Eh=function(i){var n=[],o=[];return i.forEach(function(c){if(c.type===4){if(o.length===0)throw new Error("Error parsing function args, zero tokens for arg");n.push(o),o=[];return}c.type!==31&&o.push(c)}),o.length&&n.push(o),n},O6=function(i,n){return n===11&&i.type===12||n===28&&i.type===29?!0:n===2&&i.type===3},rd=function(i){return i.type===17||i.type===15},Eo=function(i){return i.type===16||rd(i)},_C=function(i){return i.length>1?[i[0],i[1]]:[i[0]]},jl={type:17,number:0,flags:c0},Px={type:16,number:50,flags:c0},Yf={type:16,number:100,flags:c0},kg=function(i,n,o){var c=i[0],m=i[1];return[za(c,n),za(typeof m<"u"?m:c,o)]},za=function(i,n){if(i.type===16)return i.number/100*n;if(u0(i))switch(i.unit){case"rem":case"em":return 16*i.number;default:return i.number}return i.number},vC="deg",xC="grad",bC="rad",wC="turn",q_={name:"angle",parse:function(i,n){if(n.type===15)switch(n.unit){case vC:return Math.PI*n.number/180;case xC:return Math.PI/200*n.number;case bC:return n.number;case wC:return Math.PI*2*n.number}throw new Error("Unsupported angle type")}},BC=function(i){return i.type===15&&(i.unit===vC||i.unit===xC||i.unit===bC||i.unit===wC)},CC=function(i){var n=i.filter(va).map(function(o){return o.value}).join(" ");switch(n){case"to bottom right":case"to right bottom":case"left top":case"top left":return[jl,jl];case"to top":case"bottom":return fu(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[jl,Yf];case"to right":case"left":return fu(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Yf,Yf];case"to bottom":case"top":return fu(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Yf,jl];case"to left":case"right":return fu(270)}return 0},fu=function(i){return Math.PI*i/180},Jf={name:"color",parse:function(i,n){if(n.type===18){var o=z6[n.name];if(typeof o>"u")throw new Error('Attempting to parse an unsupported color function "'+n.name+'"');return o(i,n.values)}if(n.type===5){if(n.value.length===3){var c=n.value.substring(0,1),m=n.value.substring(1,2),y=n.value.substring(2,3);return $f(parseInt(c+c,16),parseInt(m+m,16),parseInt(y+y,16),1)}if(n.value.length===4){var c=n.value.substring(0,1),m=n.value.substring(1,2),y=n.value.substring(2,3),v=n.value.substring(3,4);return $f(parseInt(c+c,16),parseInt(m+m,16),parseInt(y+y,16),parseInt(v+v,16)/255)}if(n.value.length===6){var c=n.value.substring(0,2),m=n.value.substring(2,4),y=n.value.substring(4,6);return $f(parseInt(c,16),parseInt(m,16),parseInt(y,16),1)}if(n.value.length===8){var c=n.value.substring(0,2),m=n.value.substring(2,4),y=n.value.substring(4,6),v=n.value.substring(6,8);return $f(parseInt(c,16),parseInt(m,16),parseInt(y,16),parseInt(v,16)/255)}}if(n.type===20){var A=sf[n.value.toUpperCase()];if(typeof A<"u")return A}return sf.TRANSPARENT}},ed=function(i){return(255&i)===0},pl=function(i){var n=255&i,o=255&i>>8,c=255&i>>16,m=255&i>>24;return n<255?"rgba("+m+","+c+","+o+","+n/255+")":"rgb("+m+","+c+","+o+")"},$f=function(i,n,o,c){return(i<<24|n<<16|o<<8|Math.round(c*255)<<0)>>>0},c2=function(i,n){if(i.type===17)return i.number;if(i.type===16){var o=n===3?1:255;return n===3?i.number/100*o:Math.round(i.number/100*o)}return 0},u2=function(i,n){var o=n.filter(mm);if(o.length===3){var c=o.map(c2),m=c[0],y=c[1],v=c[2];return $f(m,y,v,1)}if(o.length===4){var A=o.map(c2),m=A[0],y=A[1],v=A[2],S=A[3];return $f(m,y,v,S)}return 0};function cv(i,n,o){return o<0&&(o+=1),o>=1&&(o-=1),o<1/6?(n-i)*o*6+i:o<1/2?n:o<2/3?(n-i)*6*(2/3-o)+i:i}var h2=function(i,n){var o=n.filter(mm),c=o[0],m=o[1],y=o[2],v=o[3],A=(c.type===17?fu(c.number):q_.parse(i,c))/(Math.PI*2),S=Eo(m)?m.number/100:0,I=Eo(y)?y.number/100:0,D=typeof v<"u"&&Eo(v)?za(v,1):1;if(S===0)return $f(I*255,I*255,I*255,1);var z=I<=.5?I*(S+1):I+S-I*S,Z=I*2-z,O=cv(Z,z,A+1/3),ce=cv(Z,z,A),ie=cv(Z,z,A-1/3);return $f(O*255,ce*255,ie*255,D)},z6={hsl:h2,hsla:h2,rgb:u2,rgba:u2},qg=function(i,n){return Jf.parse(i,gC.create(n).parseComponentValue())},sf={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},j6={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(i,n){return n.map(function(o){if(va(o))switch(o.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},H6={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},K_=function(i,n){var o=Jf.parse(i,n[0]),c=n[1];return c&&Eo(c)?{color:o,stop:c}:{color:o,stop:null}},f2=function(i,n){var o=i[0],c=i[i.length-1];o.stop===null&&(o.stop=jl),c.stop===null&&(c.stop=Yf);for(var m=[],y=0,v=0;v<i.length;v++){var A=i[v].stop;if(A!==null){var S=za(A,n);S>y?m.push(S):m.push(y),y=S}else m.push(null)}for(var I=null,v=0;v<m.length;v++){var D=m[v];if(D===null)I===null&&(I=v);else if(I!==null){for(var z=v-I,Z=m[I-1],O=(D-Z)/(z+1),ce=1;ce<=z;ce++)m[I+ce-1]=O*ce;I=null}}return i.map(function(ie,W){var le=ie.color;return{color:le,stop:Math.max(Math.min(1,m[W]/n),0)}})},V6=function(i,n,o){var c=n/2,m=o/2,y=za(i[0],n)-c,v=m-za(i[1],o);return(Math.atan2(v,y)+Math.PI*2)%(Math.PI*2)},G6=function(i,n,o){var c=typeof i=="number"?i:V6(i,n,o),m=Math.abs(n*Math.sin(c))+Math.abs(o*Math.cos(c)),y=n/2,v=o/2,A=m/2,S=Math.sin(c-Math.PI/2)*A,I=Math.cos(c-Math.PI/2)*A;return[m,y-I,y+I,v-S,v+S]},Gu=function(i,n){return Math.sqrt(i*i+n*n)},d2=function(i,n,o,c,m){var y=[[0,0],[0,n],[i,0],[i,n]];return y.reduce(function(v,A){var S=A[0],I=A[1],D=Gu(o-S,c-I);return(m?D<v.optimumDistance:D>v.optimumDistance)?{optimumCorner:A,optimumDistance:D}:v},{optimumDistance:m?1/0:-1/0,optimumCorner:null}).optimumCorner},q6=function(i,n,o,c,m){var y=0,v=0;switch(i.size){case 0:i.shape===0?y=v=Math.min(Math.abs(n),Math.abs(n-c),Math.abs(o),Math.abs(o-m)):i.shape===1&&(y=Math.min(Math.abs(n),Math.abs(n-c)),v=Math.min(Math.abs(o),Math.abs(o-m)));break;case 2:if(i.shape===0)y=v=Math.min(Gu(n,o),Gu(n,o-m),Gu(n-c,o),Gu(n-c,o-m));else if(i.shape===1){var A=Math.min(Math.abs(o),Math.abs(o-m))/Math.min(Math.abs(n),Math.abs(n-c)),S=d2(c,m,n,o,!0),I=S[0],D=S[1];y=Gu(I-n,(D-o)/A),v=A*y}break;case 1:i.shape===0?y=v=Math.max(Math.abs(n),Math.abs(n-c),Math.abs(o),Math.abs(o-m)):i.shape===1&&(y=Math.max(Math.abs(n),Math.abs(n-c)),v=Math.max(Math.abs(o),Math.abs(o-m)));break;case 3:if(i.shape===0)y=v=Math.max(Gu(n,o),Gu(n,o-m),Gu(n-c,o),Gu(n-c,o-m));else if(i.shape===1){var A=Math.max(Math.abs(o),Math.abs(o-m))/Math.max(Math.abs(n),Math.abs(n-c)),z=d2(c,m,n,o,!1),I=z[0],D=z[1];y=Gu(I-n,(D-o)/A),v=A*y}break}return Array.isArray(i.size)&&(y=za(i.size[0],c),v=i.size.length===2?za(i.size[1],m):y),[y,v]},K6=function(i,n){var o=fu(180),c=[];return Eh(n).forEach(function(m,y){if(y===0){var v=m[0];if(v.type===20&&v.value==="to"){o=CC(m);return}else if(BC(v)){o=q_.parse(i,v);return}}var A=K_(i,m);c.push(A)}),{angle:o,stops:c,type:1}},qy=function(i,n){var o=fu(180),c=[];return Eh(n).forEach(function(m,y){if(y===0){var v=m[0];if(v.type===20&&["top","left","right","bottom"].indexOf(v.value)!==-1){o=CC(m);return}else if(BC(v)){o=(q_.parse(i,v)+fu(270))%fu(360);return}}var A=K_(i,m);c.push(A)}),{angle:o,stops:c,type:1}},Z6=function(i,n){var o=fu(180),c=[],m=1,y=0,v=3,A=[];return Eh(n).forEach(function(S,I){var D=S[0];if(I===0){if(va(D)&&D.value==="linear"){m=1;return}else if(va(D)&&D.value==="radial"){m=2;return}}if(D.type===18){if(D.name==="from"){var z=Jf.parse(i,D.values[0]);c.push({stop:jl,color:z})}else if(D.name==="to"){var z=Jf.parse(i,D.values[0]);c.push({stop:Yf,color:z})}else if(D.name==="color-stop"){var Z=D.values.filter(mm);if(Z.length===2){var z=Jf.parse(i,Z[1]),O=Z[0];bm(O)&&c.push({stop:{type:16,number:O.number*100,flags:O.flags},color:z})}}}}),m===1?{angle:(o+fu(180))%fu(360),stops:c,type:m}:{size:v,shape:y,stops:c,position:A,type:m}},SC="closest-side",EC="farthest-side",TC="closest-corner",FC="farthest-corner",IC="circle",LC="ellipse",MC="cover",UC="contain",X6=function(i,n){var o=0,c=3,m=[],y=[];return Eh(n).forEach(function(v,A){var S=!0;if(A===0){var I=!1;S=v.reduce(function(z,Z){if(I)if(va(Z))switch(Z.value){case"center":return y.push(Px),z;case"top":case"left":return y.push(jl),z;case"right":case"bottom":return y.push(Yf),z}else(Eo(Z)||rd(Z))&&y.push(Z);else if(va(Z))switch(Z.value){case IC:return o=0,!1;case LC:return o=1,!1;case"at":return I=!0,!1;case SC:return c=0,!1;case MC:case EC:return c=1,!1;case UC:case TC:return c=2,!1;case FC:return c=3,!1}else if(rd(Z)||Eo(Z))return Array.isArray(c)||(c=[]),c.push(Z),!1;return z},S)}if(S){var D=K_(i,v);m.push(D)}}),{size:c,shape:o,stops:m,position:y,type:2}},Ky=function(i,n){var o=0,c=3,m=[],y=[];return Eh(n).forEach(function(v,A){var S=!0;if(A===0?S=v.reduce(function(D,z){if(va(z))switch(z.value){case"center":return y.push(Px),!1;case"top":case"left":return y.push(jl),!1;case"right":case"bottom":return y.push(Yf),!1}else if(Eo(z)||rd(z))return y.push(z),!1;return D},S):A===1&&(S=v.reduce(function(D,z){if(va(z))switch(z.value){case IC:return o=0,!1;case LC:return o=1,!1;case UC:case SC:return c=0,!1;case EC:return c=1,!1;case TC:return c=2,!1;case MC:case FC:return c=3,!1}else if(rd(z)||Eo(z))return Array.isArray(c)||(c=[]),c.push(z),!1;return D},S)),S){var I=K_(i,v);m.push(I)}}),{size:c,shape:o,stops:m,position:y,type:2}},W6=function(i){return i.type===1},Y6=function(i){return i.type===2},Nx={name:"image",parse:function(i,n){if(n.type===22){var o={url:n.value,type:0};return i.cache.addImage(n.value),o}if(n.type===18){var c=DC[n.name];if(typeof c>"u")throw new Error('Attempting to parse an unsupported image function "'+n.name+'"');return c(i,n.values)}throw new Error("Unsupported image type "+n.type)}};function $6(i){return!(i.type===20&&i.value==="none")&&(i.type!==18||!!DC[i.name])}var DC={"linear-gradient":K6,"-moz-linear-gradient":qy,"-ms-linear-gradient":qy,"-o-linear-gradient":qy,"-webkit-linear-gradient":qy,"radial-gradient":X6,"-moz-radial-gradient":Ky,"-ms-radial-gradient":Ky,"-o-radial-gradient":Ky,"-webkit-radial-gradient":Ky,"-webkit-gradient":Z6},J6={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(i,n){if(n.length===0)return[];var o=n[0];return o.type===20&&o.value==="none"?[]:n.filter(function(c){return mm(c)&&$6(c)}).map(function(c){return Nx.parse(i,c)})}},eD={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(i,n){return n.map(function(o){if(va(o))switch(o.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},tD={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(i,n){return Eh(n).map(function(o){return o.filter(Eo)}).map(_C)}},rD={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(i,n){return Eh(n).map(function(o){return o.filter(va).map(function(c){return c.value}).join(" ")}).map(nD)}},nD=function(i){switch(i){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}},pm;(function(i){i.AUTO="auto",i.CONTAIN="contain",i.COVER="cover"})(pm||(pm={}));var iD={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(i,n){return Eh(n).map(function(o){return o.filter(aD)})}},aD=function(i){return va(i)||Eo(i)},Z_=function(i){return{name:"border-"+i+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},sD=Z_("top"),oD=Z_("right"),lD=Z_("bottom"),AD=Z_("left"),X_=function(i){return{name:"border-radius-"+i,initialValue:"0 0",prefix:!1,type:1,parse:function(n,o){return _C(o.filter(Eo))}}},cD=X_("top-left"),uD=X_("top-right"),hD=X_("bottom-right"),fD=X_("bottom-left"),W_=function(i){return{name:"border-"+i+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(n,o){switch(o){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},dD=W_("top"),pD=W_("right"),mD=W_("bottom"),gD=W_("left"),Y_=function(i){return{name:"border-"+i+"-width",initialValue:"0",type:0,prefix:!1,parse:function(n,o){return u0(o)?o.number:0}}},yD=Y_("top"),_D=Y_("right"),vD=Y_("bottom"),xD=Y_("left"),bD={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},wD={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(i,n){return n==="rtl"?1:0}},BD={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(i,n){return n.filter(va).reduce(function(o,c){return o|CD(c.value)},0)}},CD=function(i){switch(i){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},SD={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(i,n){switch(n){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},ED={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(i,n){return n.type===20&&n.value==="normal"?0:n.type===17||n.type===15?n.number:0}},I_;(function(i){i.NORMAL="normal",i.STRICT="strict"})(I_||(I_={}));var TD={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(i,n){return n==="strict"?I_.STRICT:I_.NORMAL}},FD={name:"line-height",initialValue:"normal",prefix:!1,type:4},p2=function(i,n){return va(i)&&i.value==="normal"?1.2*n:i.type===17?n*i.number:Eo(i)?za(i,n):n},ID={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(i,n){return n.type===20&&n.value==="none"?null:Nx.parse(i,n)}},LD={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(i,n){return n==="inside"?0:1}},nx={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(i,n){switch(n){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},$_=function(i){return{name:"margin-"+i,initialValue:"0",prefix:!1,type:4}},MD=$_("top"),UD=$_("right"),DD=$_("bottom"),PD=$_("left"),ND={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(i,n){return n.filter(va).map(function(o){switch(o.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}})}},RD={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(i,n){return n==="break-word"?"break-word":"normal"}},J_=function(i){return{name:"padding-"+i,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},QD=J_("top"),kD=J_("right"),OD=J_("bottom"),zD=J_("left"),jD={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(i,n){switch(n){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},HD={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(i,n){switch(n){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},VD={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(i,n){return n.length===1&&rx(n[0],"none")?[]:Eh(n).map(function(o){for(var c={color:sf.TRANSPARENT,offsetX:jl,offsetY:jl,blur:jl},m=0,y=0;y<o.length;y++){var v=o[y];rd(v)?(m===0?c.offsetX=v:m===1?c.offsetY=v:c.blur=v,m++):c.color=Jf.parse(i,v)}return c})}},GD={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(i,n){switch(n){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},qD={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(i,n){if(n.type===20&&n.value==="none")return null;if(n.type===18){var o=XD[n.name];if(typeof o>"u")throw new Error('Attempting to parse an unsupported transform function "'+n.name+'"');return o(n.values)}return null}},KD=function(i){var n=i.filter(function(o){return o.type===17}).map(function(o){return o.number});return n.length===6?n:null},ZD=function(i){var n=i.filter(function(S){return S.type===17}).map(function(S){return S.number}),o=n[0],c=n[1];n[2],n[3];var m=n[4],y=n[5];n[6],n[7],n[8],n[9],n[10],n[11];var v=n[12],A=n[13];return n[14],n[15],n.length===16?[o,c,m,y,v,A]:null},XD={matrix:KD,matrix3d:ZD},m2={type:16,number:50,flags:c0},WD=[m2,m2],YD={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(i,n){var o=n.filter(Eo);return o.length!==2?WD:[o[0],o[1]]}},$D={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(i,n){switch(n){case"hidden":return 1;case"collapse":return 2;default:return 0}}},Kg;(function(i){i.NORMAL="normal",i.BREAK_ALL="break-all",i.KEEP_ALL="keep-all"})(Kg||(Kg={}));var JD={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(i,n){switch(n){case"break-all":return Kg.BREAK_ALL;case"keep-all":return Kg.KEEP_ALL;default:return Kg.NORMAL}}},eP={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(i,n){if(n.type===20)return{auto:!0,order:0};if(bm(n))return{auto:!1,order:n.number};throw new Error("Invalid z-index number parsed")}},PC={name:"time",parse:function(i,n){if(n.type===15)switch(n.unit.toLowerCase()){case"s":return 1e3*n.number;case"ms":return n.number}throw new Error("Unsupported time type")}},tP={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(i,n){return bm(n)?n.number:1}},rP={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},nP={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(i,n){return n.filter(va).map(function(o){switch(o.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(o){return o!==0})}},iP={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(i,n){var o=[],c=[];return n.forEach(function(m){switch(m.type){case 20:case 0:o.push(m.value);break;case 17:o.push(m.number.toString());break;case 4:c.push(o.join(" ")),o.length=0;break}}),o.length&&c.push(o.join(" ")),c.map(function(m){return m.indexOf(" ")===-1?m:"'"+m+"'"})}},aP={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},sP={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(i,n){return bm(n)?n.number:va(n)&&n.value==="bold"?700:400}},oP={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(i,n){return n.filter(va).map(function(o){return o.value})}},lP={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(i,n){switch(n){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},Go=function(i,n){return(i&n)!==0},AP={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(i,n){if(n.length===0)return[];var o=n[0];return o.type===20&&o.value==="none"?[]:n}},cP={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(i,n){if(n.length===0)return null;var o=n[0];if(o.type===20&&o.value==="none")return null;for(var c=[],m=n.filter(yC),y=0;y<m.length;y++){var v=m[y],A=m[y+1];if(v.type===20){var S=A&&bm(A)?A.number:1;c.push({counter:v.value,increment:S})}}return c}},uP={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(i,n){if(n.length===0)return[];for(var o=[],c=n.filter(yC),m=0;m<c.length;m++){var y=c[m],v=c[m+1];if(va(y)&&y.value!=="none"){var A=v&&bm(v)?v.number:0;o.push({counter:y.value,reset:A})}}return o}},hP={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(i,n){return n.filter(u0).map(function(o){return PC.parse(i,o)})}},fP={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(i,n){if(n.length===0)return null;var o=n[0];if(o.type===20&&o.value==="none")return null;var c=[],m=n.filter(k6);if(m.length%2!==0)return null;for(var y=0;y<m.length;y+=2){var v=m[y].value,A=m[y+1].value;c.push({open:v,close:A})}return c}},g2=function(i,n,o){if(!i)return"";var c=i[Math.min(n,i.length-1)];return c?o?c.open:c.close:""},dP={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(i,n){return n.length===1&&rx(n[0],"none")?[]:Eh(n).map(function(o){for(var c={color:255,offsetX:jl,offsetY:jl,blur:jl,spread:jl,inset:!1},m=0,y=0;y<o.length;y++){var v=o[y];rx(v,"inset")?c.inset=!0:rd(v)?(m===0?c.offsetX=v:m===1?c.offsetY=v:m===2?c.blur=v:c.spread=v,m++):c.color=Jf.parse(i,v)}return c})}},pP={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(i,n){var o=[0,1,2],c=[];return n.filter(va).forEach(function(m){switch(m.value){case"stroke":c.push(1);break;case"fill":c.push(0);break;case"markers":c.push(2);break}}),o.forEach(function(m){c.indexOf(m)===-1&&c.push(m)}),c}},mP={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},gP={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(i,n){return u0(n)?n.number:0}},yP=(function(){function i(n,o){var c,m;this.animationDuration=jr(n,hP,o.animationDuration),this.backgroundClip=jr(n,j6,o.backgroundClip),this.backgroundColor=jr(n,H6,o.backgroundColor),this.backgroundImage=jr(n,J6,o.backgroundImage),this.backgroundOrigin=jr(n,eD,o.backgroundOrigin),this.backgroundPosition=jr(n,tD,o.backgroundPosition),this.backgroundRepeat=jr(n,rD,o.backgroundRepeat),this.backgroundSize=jr(n,iD,o.backgroundSize),this.borderTopColor=jr(n,sD,o.borderTopColor),this.borderRightColor=jr(n,oD,o.borderRightColor),this.borderBottomColor=jr(n,lD,o.borderBottomColor),this.borderLeftColor=jr(n,AD,o.borderLeftColor),this.borderTopLeftRadius=jr(n,cD,o.borderTopLeftRadius),this.borderTopRightRadius=jr(n,uD,o.borderTopRightRadius),this.borderBottomRightRadius=jr(n,hD,o.borderBottomRightRadius),this.borderBottomLeftRadius=jr(n,fD,o.borderBottomLeftRadius),this.borderTopStyle=jr(n,dD,o.borderTopStyle),this.borderRightStyle=jr(n,pD,o.borderRightStyle),this.borderBottomStyle=jr(n,mD,o.borderBottomStyle),this.borderLeftStyle=jr(n,gD,o.borderLeftStyle),this.borderTopWidth=jr(n,yD,o.borderTopWidth),this.borderRightWidth=jr(n,_D,o.borderRightWidth),this.borderBottomWidth=jr(n,vD,o.borderBottomWidth),this.borderLeftWidth=jr(n,xD,o.borderLeftWidth),this.boxShadow=jr(n,dP,o.boxShadow),this.color=jr(n,bD,o.color),this.direction=jr(n,wD,o.direction),this.display=jr(n,BD,o.display),this.float=jr(n,SD,o.cssFloat),this.fontFamily=jr(n,iP,o.fontFamily),this.fontSize=jr(n,aP,o.fontSize),this.fontStyle=jr(n,lP,o.fontStyle),this.fontVariant=jr(n,oP,o.fontVariant),this.fontWeight=jr(n,sP,o.fontWeight),this.letterSpacing=jr(n,ED,o.letterSpacing),this.lineBreak=jr(n,TD,o.lineBreak),this.lineHeight=jr(n,FD,o.lineHeight),this.listStyleImage=jr(n,ID,o.listStyleImage),this.listStylePosition=jr(n,LD,o.listStylePosition),this.listStyleType=jr(n,nx,o.listStyleType),this.marginTop=jr(n,MD,o.marginTop),this.marginRight=jr(n,UD,o.marginRight),this.marginBottom=jr(n,DD,o.marginBottom),this.marginLeft=jr(n,PD,o.marginLeft),this.opacity=jr(n,tP,o.opacity);var y=jr(n,ND,o.overflow);this.overflowX=y[0],this.overflowY=y[y.length>1?1:0],this.overflowWrap=jr(n,RD,o.overflowWrap),this.paddingTop=jr(n,QD,o.paddingTop),this.paddingRight=jr(n,kD,o.paddingRight),this.paddingBottom=jr(n,OD,o.paddingBottom),this.paddingLeft=jr(n,zD,o.paddingLeft),this.paintOrder=jr(n,pP,o.paintOrder),this.position=jr(n,HD,o.position),this.textAlign=jr(n,jD,o.textAlign),this.textDecorationColor=jr(n,rP,(c=o.textDecorationColor)!==null&&c!==void 0?c:o.color),this.textDecorationLine=jr(n,nP,(m=o.textDecorationLine)!==null&&m!==void 0?m:o.textDecoration),this.textShadow=jr(n,VD,o.textShadow),this.textTransform=jr(n,GD,o.textTransform),this.transform=jr(n,qD,o.transform),this.transformOrigin=jr(n,YD,o.transformOrigin),this.visibility=jr(n,$D,o.visibility),this.webkitTextStrokeColor=jr(n,mP,o.webkitTextStrokeColor),this.webkitTextStrokeWidth=jr(n,gP,o.webkitTextStrokeWidth),this.wordBreak=jr(n,JD,o.wordBreak),this.zIndex=jr(n,eP,o.zIndex)}return i.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},i.prototype.isTransparent=function(){return ed(this.backgroundColor)},i.prototype.isTransformed=function(){return this.transform!==null},i.prototype.isPositioned=function(){return this.position!==0},i.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},i.prototype.isFloating=function(){return this.float!==0},i.prototype.isInlineLevel=function(){return Go(this.display,4)||Go(this.display,33554432)||Go(this.display,268435456)||Go(this.display,536870912)||Go(this.display,67108864)||Go(this.display,134217728)},i})(),_P=(function(){function i(n,o){this.content=jr(n,AP,o.content),this.quotes=jr(n,fP,o.quotes)}return i})(),y2=(function(){function i(n,o){this.counterIncrement=jr(n,cP,o.counterIncrement),this.counterReset=jr(n,uP,o.counterReset)}return i})(),jr=function(i,n,o){var c=new mC,m=o!==null&&typeof o<"u"?o.toString():n.initialValue;c.write(m);var y=new gC(c.read());switch(n.type){case 2:var v=y.parseComponentValue();return n.parse(i,va(v)?v.value:n.initialValue);case 0:return n.parse(i,y.parseComponentValue());case 1:return n.parse(i,y.parseComponentValues());case 4:return y.parseComponentValue();case 3:switch(n.format){case"angle":return q_.parse(i,y.parseComponentValue());case"color":return Jf.parse(i,y.parseComponentValue());case"image":return Nx.parse(i,y.parseComponentValue());case"length":var A=y.parseComponentValue();return rd(A)?A:jl;case"length-percentage":var S=y.parseComponentValue();return Eo(S)?S:jl;case"time":return PC.parse(i,y.parseComponentValue())}break}},vP="data-html2canvas-debug",xP=function(i){var n=i.getAttribute(vP);switch(n){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},ix=function(i,n){var o=xP(i);return o===1||n===o},Th=(function(){function i(n,o){if(this.context=n,this.textNodes=[],this.elements=[],this.flags=0,ix(o,3))debugger;this.styles=new yP(n,window.getComputedStyle(o,null)),ox(o)&&(this.styles.animationDuration.some(function(c){return c>0})&&(o.style.animationDuration="0s"),this.styles.transform!==null&&(o.style.transform="none")),this.bounds=V_(this.context,o),ix(o,4)&&(this.flags|=16)}return i})(),bP="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",_2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Og=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Zy=0;Zy<_2.length;Zy++)Og[_2.charCodeAt(Zy)]=Zy;var wP=function(i){var n=i.length*.75,o=i.length,c,m=0,y,v,A,S;i[i.length-1]==="="&&(n--,i[i.length-2]==="="&&n--);var I=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(n):new Array(n),D=Array.isArray(I)?I:new Uint8Array(I);for(c=0;c<o;c+=4)y=Og[i.charCodeAt(c)],v=Og[i.charCodeAt(c+1)],A=Og[i.charCodeAt(c+2)],S=Og[i.charCodeAt(c+3)],D[m++]=y<<2|v>>4,D[m++]=(v&15)<<4|A>>2,D[m++]=(A&3)<<6|S&63;return I},BP=function(i){for(var n=i.length,o=[],c=0;c<n;c+=2)o.push(i[c+1]<<8|i[c]);return o},CP=function(i){for(var n=i.length,o=[],c=0;c<n;c+=4)o.push(i[c+3]<<24|i[c+2]<<16|i[c+1]<<8|i[c]);return o},jd=5,Rx=11,uv=2,SP=Rx-jd,NC=65536>>jd,EP=1<<jd,hv=EP-1,TP=1024>>jd,FP=NC+TP,IP=FP,LP=32,MP=IP+LP,UP=65536>>Rx,DP=1<<SP,PP=DP-1,v2=function(i,n,o){return i.slice?i.slice(n,o):new Uint16Array(Array.prototype.slice.call(i,n,o))},NP=function(i,n,o){return i.slice?i.slice(n,o):new Uint32Array(Array.prototype.slice.call(i,n,o))},RP=function(i,n){var o=wP(i),c=Array.isArray(o)?CP(o):new Uint32Array(o),m=Array.isArray(o)?BP(o):new Uint16Array(o),y=24,v=v2(m,y/2,c[4]/2),A=c[5]===2?v2(m,(y+c[4])/2):NP(c,Math.ceil((y+c[4])/4));return new QP(c[0],c[1],c[2],c[3],v,A)},QP=(function(){function i(n,o,c,m,y,v){this.initialValue=n,this.errorValue=o,this.highStart=c,this.highValueIndex=m,this.index=y,this.data=v}return i.prototype.get=function(n){var o;if(n>=0){if(n<55296||n>56319&&n<=65535)return o=this.index[n>>jd],o=(o<<uv)+(n&hv),this.data[o];if(n<=65535)return o=this.index[NC+(n-55296>>jd)],o=(o<<uv)+(n&hv),this.data[o];if(n<this.highStart)return o=MP-UP+(n>>Rx),o=this.index[o],o+=n>>jd&PP,o=this.index[o],o=(o<<uv)+(n&hv),this.data[o];if(n<=1114111)return this.data[this.highValueIndex]}return this.errorValue},i})(),x2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",kP=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Xy=0;Xy<x2.length;Xy++)kP[x2.charCodeAt(Xy)]=Xy;var OP=1,fv=2,dv=3,b2=4,w2=5,zP=7,B2=8,pv=9,mv=10,C2=11,S2=12,E2=13,T2=14,gv=15,jP=function(i){for(var n=[],o=0,c=i.length;o<c;){var m=i.charCodeAt(o++);if(m>=55296&&m<=56319&&o<c){var y=i.charCodeAt(o++);(y&64512)===56320?n.push(((m&1023)<<10)+(y&1023)+65536):(n.push(m),o--)}else n.push(m)}return n},HP=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];if(String.fromCodePoint)return String.fromCodePoint.apply(String,i);var o=i.length;if(!o)return"";for(var c=[],m=-1,y="";++m<o;){var v=i[m];v<=65535?c.push(v):(v-=65536,c.push((v>>10)+55296,v%1024+56320)),(m+1===o||c.length>16384)&&(y+=String.fromCharCode.apply(String,c),c.length=0)}return y},VP=RP(bP),uu="",yv="",GP=function(i){return VP.get(i)},qP=function(i,n,o){var c=o-2,m=n[c],y=n[o-1],v=n[o];if(y===fv&&v===dv)return uu;if(y===fv||y===dv||y===b2||v===fv||v===dv||v===b2)return yv;if(y===B2&&[B2,pv,C2,S2].indexOf(v)!==-1||(y===C2||y===pv)&&(v===pv||v===mv)||(y===S2||y===mv)&&v===mv||v===E2||v===w2||v===zP||y===OP)return uu;if(y===E2&&v===T2){for(;m===w2;)m=n[--c];if(m===T2)return uu}if(y===gv&&v===gv){for(var A=0;m===gv;)A++,m=n[--c];if(A%2===0)return uu}return yv},KP=function(i){var n=jP(i),o=n.length,c=0,m=0,y=n.map(GP);return{next:function(){if(c>=o)return{done:!0,value:null};for(var v=uu;c<o&&(v=qP(n,y,++c))===uu;);if(v!==uu||c===o){var A=HP.apply(null,n.slice(m,c));return m=c,{value:A,done:!1}}return{done:!0,value:null}}}},ZP=function(i){for(var n=KP(i),o=[],c;!(c=n.next()).done;)c.value&&o.push(c.value.slice());return o},XP=function(i){var n=123;if(i.createRange){var o=i.createRange();if(o.getBoundingClientRect){var c=i.createElement("boundtest");c.style.height=n+"px",c.style.display="block",i.body.appendChild(c),o.selectNode(c);var m=o.getBoundingClientRect(),y=Math.round(m.height);if(i.body.removeChild(c),y===n)return!0}}return!1},WP=function(i){var n=i.createElement("boundtest");n.style.width="50px",n.style.display="block",n.style.fontSize="12px",n.style.letterSpacing="0px",n.style.wordSpacing="0px",i.body.appendChild(n);var o=i.createRange();n.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var c=n.firstChild,m=G_(c.data).map(function(S){return ro(S)}),y=0,v={},A=m.every(function(S,I){o.setStart(c,y),o.setEnd(c,y+S.length);var D=o.getBoundingClientRect();y+=S.length;var z=D.x>v.x||D.y>v.y;return v=D,I===0?!0:z});return i.body.removeChild(n),A},YP=function(){return typeof new Image().crossOrigin<"u"},$P=function(){return typeof new XMLHttpRequest().responseType=="string"},JP=function(i){var n=new Image,o=i.createElement("canvas"),c=o.getContext("2d");if(!c)return!1;n.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{c.drawImage(n,0,0),o.toDataURL()}catch{return!1}return!0},F2=function(i){return i[0]===0&&i[1]===255&&i[2]===0&&i[3]===255},eN=function(i){var n=i.createElement("canvas"),o=100;n.width=o,n.height=o;var c=n.getContext("2d");if(!c)return Promise.reject(!1);c.fillStyle="rgb(0, 255, 0)",c.fillRect(0,0,o,o);var m=new Image,y=n.toDataURL();m.src=y;var v=ax(o,o,0,0,m);return c.fillStyle="red",c.fillRect(0,0,o,o),I2(v).then(function(A){c.drawImage(A,0,0);var S=c.getImageData(0,0,o,o).data;c.fillStyle="red",c.fillRect(0,0,o,o);var I=i.createElement("div");return I.style.backgroundImage="url("+y+")",I.style.height=o+"px",F2(S)?I2(ax(o,o,0,0,I)):Promise.reject(!1)}).then(function(A){return c.drawImage(A,0,0),F2(c.getImageData(0,0,o,o).data)}).catch(function(){return!1})},ax=function(i,n,o,c,m){var y="http://www.w3.org/2000/svg",v=document.createElementNS(y,"svg"),A=document.createElementNS(y,"foreignObject");return v.setAttributeNS(null,"width",i.toString()),v.setAttributeNS(null,"height",n.toString()),A.setAttributeNS(null,"width","100%"),A.setAttributeNS(null,"height","100%"),A.setAttributeNS(null,"x",o.toString()),A.setAttributeNS(null,"y",c.toString()),A.setAttributeNS(null,"externalResourcesRequired","true"),v.appendChild(A),A.appendChild(m),v},I2=function(i){return new Promise(function(n,o){var c=new Image;c.onload=function(){return n(c)},c.onerror=o,c.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(i))})},zl={get SUPPORT_RANGE_BOUNDS(){var i=XP(document);return Object.defineProperty(zl,"SUPPORT_RANGE_BOUNDS",{value:i}),i},get SUPPORT_WORD_BREAKING(){var i=zl.SUPPORT_RANGE_BOUNDS&&WP(document);return Object.defineProperty(zl,"SUPPORT_WORD_BREAKING",{value:i}),i},get SUPPORT_SVG_DRAWING(){var i=JP(document);return Object.defineProperty(zl,"SUPPORT_SVG_DRAWING",{value:i}),i},get SUPPORT_FOREIGNOBJECT_DRAWING(){var i=typeof Array.from=="function"&&typeof window.fetch=="function"?eN(document):Promise.resolve(!1);return Object.defineProperty(zl,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:i}),i},get SUPPORT_CORS_IMAGES(){var i=YP();return Object.defineProperty(zl,"SUPPORT_CORS_IMAGES",{value:i}),i},get SUPPORT_RESPONSE_TYPE(){var i=$P();return Object.defineProperty(zl,"SUPPORT_RESPONSE_TYPE",{value:i}),i},get SUPPORT_CORS_XHR(){var i="withCredentials"in new XMLHttpRequest;return Object.defineProperty(zl,"SUPPORT_CORS_XHR",{value:i}),i},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var i=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(zl,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:i}),i}},Zg=(function(){function i(n,o){this.text=n,this.bounds=o}return i})(),tN=function(i,n,o,c){var m=iN(n,o),y=[],v=0;return m.forEach(function(A){if(o.textDecorationLine.length||A.trim().length>0)if(zl.SUPPORT_RANGE_BOUNDS){var S=L2(c,v,A.length).getClientRects();if(S.length>1){var I=Qx(A),D=0;I.forEach(function(Z){y.push(new Zg(Z,lf.fromDOMRectList(i,L2(c,D+v,Z.length).getClientRects()))),D+=Z.length})}else y.push(new Zg(A,lf.fromDOMRectList(i,S)))}else{var z=c.splitText(A.length);y.push(new Zg(A,rN(i,c))),c=z}else zl.SUPPORT_RANGE_BOUNDS||(c=c.splitText(A.length));v+=A.length}),y},rN=function(i,n){var o=n.ownerDocument;if(o){var c=o.createElement("html2canvaswrapper");c.appendChild(n.cloneNode(!0));var m=n.parentNode;if(m){m.replaceChild(c,n);var y=V_(i,c);return c.firstChild&&m.replaceChild(c.firstChild,c),y}}return lf.EMPTY},L2=function(i,n,o){var c=i.ownerDocument;if(!c)throw new Error("Node has no owner document");var m=c.createRange();return m.setStart(i,n),m.setEnd(i,n+o),m},Qx=function(i){if(zl.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(n.segment(i)).map(function(o){return o.segment})}return ZP(i)},nN=function(i,n){if(zl.SUPPORT_NATIVE_TEXT_SEGMENTATION){var o=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(o.segment(i)).map(function(c){return c.segment})}return sN(i,n)},iN=function(i,n){return n.letterSpacing!==0?Qx(i):nN(i,n)},aN=[32,160,4961,65792,65793,4153,4241],sN=function(i,n){for(var o=UU(i,{lineBreak:n.lineBreak,wordBreak:n.overflowWrap==="break-word"?"break-word":n.wordBreak}),c=[],m,y=function(){if(m.value){var v=m.value.slice(),A=G_(v),S="";A.forEach(function(I){aN.indexOf(I)===-1?S+=ro(I):(S.length&&c.push(S),c.push(ro(I)),S="")}),S.length&&c.push(S)}};!(m=o.next()).done;)y();return c},oN=(function(){function i(n,o,c){this.text=lN(o.data,c.textTransform),this.textBounds=tN(n,this.text,c,o)}return i})(),lN=function(i,n){switch(n){case 1:return i.toLowerCase();case 3:return i.replace(AN,cN);case 2:return i.toUpperCase();default:return i}},AN=/(^|\s|:|-|\(|\))([a-z])/g,cN=function(i,n,o){return i.length>0?n+o.toUpperCase():i},RC=(function(i){Xu(n,i);function n(o,c){var m=i.call(this,o,c)||this;return m.src=c.currentSrc||c.src,m.intrinsicWidth=c.naturalWidth,m.intrinsicHeight=c.naturalHeight,m.context.cache.addImage(m.src),m}return n})(Th),QC=(function(i){Xu(n,i);function n(o,c){var m=i.call(this,o,c)||this;return m.canvas=c,m.intrinsicWidth=c.width,m.intrinsicHeight=c.height,m}return n})(Th),kC=(function(i){Xu(n,i);function n(o,c){var m=i.call(this,o,c)||this,y=new XMLSerializer,v=V_(o,c);return c.setAttribute("width",v.width+"px"),c.setAttribute("height",v.height+"px"),m.svg="data:image/svg+xml,"+encodeURIComponent(y.serializeToString(c)),m.intrinsicWidth=c.width.baseVal.value,m.intrinsicHeight=c.height.baseVal.value,m.context.cache.addImage(m.svg),m}return n})(Th),OC=(function(i){Xu(n,i);function n(o,c){var m=i.call(this,o,c)||this;return m.value=c.value,m}return n})(Th),sx=(function(i){Xu(n,i);function n(o,c){var m=i.call(this,o,c)||this;return m.start=c.start,m.reversed=typeof c.reversed=="boolean"&&c.reversed===!0,m}return n})(Th),uN=[{type:15,flags:0,unit:"px",number:3}],hN=[{type:16,flags:0,number:50}],fN=function(i){return i.width>i.height?new lf(i.left+(i.width-i.height)/2,i.top,i.height,i.height):i.width<i.height?new lf(i.left,i.top+(i.height-i.width)/2,i.width,i.width):i},dN=function(i){var n=i.type===pN?new Array(i.value.length+1).join(""):i.value;return n.length===0?i.placeholder||"":n},L_="checkbox",M_="radio",pN="password",M2=707406591,kx=(function(i){Xu(n,i);function n(o,c){var m=i.call(this,o,c)||this;switch(m.type=c.type.toLowerCase(),m.checked=c.checked,m.value=dN(c),(m.type===L_||m.type===M_)&&(m.styles.backgroundColor=3739148031,m.styles.borderTopColor=m.styles.borderRightColor=m.styles.borderBottomColor=m.styles.borderLeftColor=2779096575,m.styles.borderTopWidth=m.styles.borderRightWidth=m.styles.borderBottomWidth=m.styles.borderLeftWidth=1,m.styles.borderTopStyle=m.styles.borderRightStyle=m.styles.borderBottomStyle=m.styles.borderLeftStyle=1,m.styles.backgroundClip=[0],m.styles.backgroundOrigin=[0],m.bounds=fN(m.bounds)),m.type){case L_:m.styles.borderTopRightRadius=m.styles.borderTopLeftRadius=m.styles.borderBottomRightRadius=m.styles.borderBottomLeftRadius=uN;break;case M_:m.styles.borderTopRightRadius=m.styles.borderTopLeftRadius=m.styles.borderBottomRightRadius=m.styles.borderBottomLeftRadius=hN;break}return m}return n})(Th),zC=(function(i){Xu(n,i);function n(o,c){var m=i.call(this,o,c)||this,y=c.options[c.selectedIndex||0];return m.value=y&&y.text||"",m}return n})(Th),jC=(function(i){Xu(n,i);function n(o,c){var m=i.call(this,o,c)||this;return m.value=c.value,m}return n})(Th),HC=(function(i){Xu(n,i);function n(o,c){var m=i.call(this,o,c)||this;m.src=c.src,m.width=parseInt(c.width,10)||0,m.height=parseInt(c.height,10)||0,m.backgroundColor=m.styles.backgroundColor;try{if(c.contentWindow&&c.contentWindow.document&&c.contentWindow.document.documentElement){m.tree=GC(o,c.contentWindow.document.documentElement);var y=c.contentWindow.document.documentElement?qg(o,getComputedStyle(c.contentWindow.document.documentElement).backgroundColor):sf.TRANSPARENT,v=c.contentWindow.document.body?qg(o,getComputedStyle(c.contentWindow.document.body).backgroundColor):sf.TRANSPARENT;m.backgroundColor=ed(y)?ed(v)?m.styles.backgroundColor:v:y}}catch{}return m}return n})(Th),mN=["OL","UL","MENU"],d_=function(i,n,o,c){for(var m=n.firstChild,y=void 0;m;m=y)if(y=m.nextSibling,qC(m)&&m.data.trim().length>0)o.textNodes.push(new oN(i,m,o.styles));else if(cm(m))if(WC(m)&&m.assignedNodes)m.assignedNodes().forEach(function(A){return d_(i,A,o,c)});else{var v=VC(i,m);v.styles.isVisible()&&(gN(m,v,c)?v.flags|=4:yN(v.styles)&&(v.flags|=2),mN.indexOf(m.tagName)!==-1&&(v.flags|=8),o.elements.push(v),m.slot,m.shadowRoot?d_(i,m.shadowRoot,v,c):!U_(m)&&!KC(m)&&!D_(m)&&d_(i,m,v,c))}},VC=function(i,n){return lx(n)?new RC(i,n):ZC(n)?new QC(i,n):KC(n)?new kC(i,n):_N(n)?new OC(i,n):vN(n)?new sx(i,n):xN(n)?new kx(i,n):D_(n)?new zC(i,n):U_(n)?new jC(i,n):XC(n)?new HC(i,n):new Th(i,n)},GC=function(i,n){var o=VC(i,n);return o.flags|=4,d_(i,n,o,o),o},gN=function(i,n,o){return n.styles.isPositionedWithZIndex()||n.styles.opacity<1||n.styles.isTransformed()||Ox(i)&&o.styles.isTransparent()},yN=function(i){return i.isPositioned()||i.isFloating()},qC=function(i){return i.nodeType===Node.TEXT_NODE},cm=function(i){return i.nodeType===Node.ELEMENT_NODE},ox=function(i){return cm(i)&&typeof i.style<"u"&&!p_(i)},p_=function(i){return typeof i.className=="object"},_N=function(i){return i.tagName==="LI"},vN=function(i){return i.tagName==="OL"},xN=function(i){return i.tagName==="INPUT"},bN=function(i){return i.tagName==="HTML"},KC=function(i){return i.tagName==="svg"},Ox=function(i){return i.tagName==="BODY"},ZC=function(i){return i.tagName==="CANVAS"},U2=function(i){return i.tagName==="VIDEO"},lx=function(i){return i.tagName==="IMG"},XC=function(i){return i.tagName==="IFRAME"},D2=function(i){return i.tagName==="STYLE"},wN=function(i){return i.tagName==="SCRIPT"},U_=function(i){return i.tagName==="TEXTAREA"},D_=function(i){return i.tagName==="SELECT"},WC=function(i){return i.tagName==="SLOT"},P2=function(i){return i.tagName.indexOf("-")>0},BN=(function(){function i(){this.counters={}}return i.prototype.getCounterValue=function(n){var o=this.counters[n];return o&&o.length?o[o.length-1]:1},i.prototype.getCounterValues=function(n){var o=this.counters[n];return o||[]},i.prototype.pop=function(n){var o=this;n.forEach(function(c){return o.counters[c].pop()})},i.prototype.parse=function(n){var o=this,c=n.counterIncrement,m=n.counterReset,y=!0;c!==null&&c.forEach(function(A){var S=o.counters[A.counter];S&&A.increment!==0&&(y=!1,S.length||S.push(1),S[Math.max(0,S.length-1)]+=A.increment)});var v=[];return y&&m.forEach(function(A){var S=o.counters[A.counter];v.push(A.counter),S||(S=o.counters[A.counter]=[]),S.push(A.reset)}),v},i})(),N2={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},R2={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},CN={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},SN={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},em=function(i,n,o,c,m,y){return i<n||i>o?i0(i,m,y.length>0):c.integers.reduce(function(v,A,S){for(;i>=A;)i-=A,v+=c.values[S];return v},"")+y},YC=function(i,n,o,c){var m="";do o||i--,m=c(i)+m,i/=n;while(i*n>=n);return m},to=function(i,n,o,c,m){var y=o-n+1;return(i<0?"-":"")+(YC(Math.abs(i),y,c,function(v){return ro(Math.floor(v%y)+n)})+m)},Md=function(i,n,o){o===void 0&&(o=". ");var c=n.length;return YC(Math.abs(i),c,!1,function(m){return n[Math.floor(m%c)]})+o},am=1,qf=2,Kf=4,zg=8,ef=function(i,n,o,c,m,y){if(i<-9999||i>9999)return i0(i,4,m.length>0);var v=Math.abs(i),A=m;if(v===0)return n[0]+A;for(var S=0;v>0&&S<=4;S++){var I=v%10;I===0&&Go(y,am)&&A!==""?A=n[I]+A:I>1||I===1&&S===0||I===1&&S===1&&Go(y,qf)||I===1&&S===1&&Go(y,Kf)&&i>100||I===1&&S>1&&Go(y,zg)?A=n[I]+(S>0?o[S-1]:"")+A:I===1&&S>0&&(A=o[S-1]+A),v=Math.floor(v/10)}return(i<0?c:"")+A},Q2="",k2="",O2="",_v="",i0=function(i,n,o){var c=o?". ":"",m=o?"":"",y=o?", ":"",v=o?" ":"";switch(n){case 0:return""+v;case 1:return""+v;case 2:return""+v;case 5:var A=to(i,48,57,!0,c);return A.length<4?"0"+A:A;case 4:return Md(i,"",m);case 6:return em(i,1,3999,N2,3,c).toLowerCase();case 7:return em(i,1,3999,N2,3,c);case 8:return to(i,945,969,!1,c);case 9:return to(i,97,122,!1,c);case 10:return to(i,65,90,!1,c);case 11:return to(i,1632,1641,!0,c);case 12:case 49:return em(i,1,9999,R2,3,c);case 35:return em(i,1,9999,R2,3,c).toLowerCase();case 13:return to(i,2534,2543,!0,c);case 14:case 30:return to(i,6112,6121,!0,c);case 15:return Md(i,"",m);case 16:return Md(i,"",m);case 17:case 48:return ef(i,"",Q2,"",m,qf|Kf|zg);case 47:return ef(i,"",k2,"",m,am|qf|Kf|zg);case 42:return ef(i,"",Q2,"",m,qf|Kf|zg);case 41:return ef(i,"",k2,"",m,am|qf|Kf|zg);case 26:return ef(i,"","",O2,m,0);case 25:return ef(i,"","",O2,m,am|qf|Kf);case 31:return ef(i,"","",_v,y,am|qf|Kf);case 33:return ef(i,"","",_v,y,0);case 32:return ef(i,"","",_v,y,am|qf|Kf);case 18:return to(i,2406,2415,!0,c);case 20:return em(i,1,19999,SN,3,c);case 21:return to(i,2790,2799,!0,c);case 22:return to(i,2662,2671,!0,c);case 22:return em(i,1,10999,CN,3,c);case 23:return Md(i,"");case 24:return Md(i,"");case 27:return to(i,3302,3311,!0,c);case 28:return Md(i,"",m);case 29:return Md(i,"",m);case 34:return to(i,3792,3801,!0,c);case 37:return to(i,6160,6169,!0,c);case 38:return to(i,4160,4169,!0,c);case 39:return to(i,2918,2927,!0,c);case 40:return to(i,1776,1785,!0,c);case 43:return to(i,3046,3055,!0,c);case 44:return to(i,3174,3183,!0,c);case 45:return to(i,3664,3673,!0,c);case 46:return to(i,3872,3881,!0,c);default:return to(i,48,57,!0,c)}},$C="data-html2canvas-ignore",z2=(function(){function i(n,o,c){if(this.context=n,this.options=c,this.scrolledElements=[],this.referenceElement=o,this.counters=new BN,this.quoteDepth=0,!o.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(o.ownerDocument.documentElement,!1)}return i.prototype.toIFrame=function(n,o){var c=this,m=EN(n,o);if(!m.contentWindow)return Promise.reject("Unable to find iframe window");var y=n.defaultView.pageXOffset,v=n.defaultView.pageYOffset,A=m.contentWindow,S=A.document,I=IN(m).then(function(){return KA(c,void 0,void 0,function(){var D,z;return _A(this,function(Z){switch(Z.label){case 0:return this.scrolledElements.forEach(DN),A&&(A.scrollTo(o.left,o.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(A.scrollY!==o.top||A.scrollX!==o.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(A.scrollX-o.left,A.scrollY-o.top,0,0))),D=this.options.onclone,z=this.clonedReferenceElement,typeof z>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:S.fonts&&S.fonts.ready?[4,S.fonts.ready]:[3,2];case 1:Z.sent(),Z.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,FN(S)]:[3,4];case 3:Z.sent(),Z.label=4;case 4:return typeof D=="function"?[2,Promise.resolve().then(function(){return D(S,z)}).then(function(){return m})]:[2,m]}})})});return S.open(),S.write(MN(document.doctype)+"<html></html>"),UN(this.referenceElement.ownerDocument,y,v),S.replaceChild(S.adoptNode(this.documentElement),S.documentElement),S.close(),I},i.prototype.createElementClone=function(n){if(ix(n,2))debugger;if(ZC(n))return this.createCanvasClone(n);if(U2(n))return this.createVideoClone(n);if(D2(n))return this.createStyleClone(n);var o=n.cloneNode(!1);return lx(o)&&(lx(n)&&n.currentSrc&&n.currentSrc!==n.src&&(o.src=n.currentSrc,o.srcset=""),o.loading==="lazy"&&(o.loading="eager")),P2(o)?this.createCustomElementClone(o):o},i.prototype.createCustomElementClone=function(n){var o=document.createElement("html2canvascustomelement");return vv(n.style,o),o},i.prototype.createStyleClone=function(n){try{var o=n.sheet;if(o&&o.cssRules){var c=[].slice.call(o.cssRules,0).reduce(function(y,v){return v&&typeof v.cssText=="string"?y+v.cssText:y},""),m=n.cloneNode(!1);return m.textContent=c,m}}catch(y){if(this.context.logger.error("Unable to access cssRules property",y),y.name!=="SecurityError")throw y}return n.cloneNode(!1)},i.prototype.createCanvasClone=function(n){var o;if(this.options.inlineImages&&n.ownerDocument){var c=n.ownerDocument.createElement("img");try{return c.src=n.toDataURL(),c}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",n)}}var m=n.cloneNode(!1);try{m.width=n.width,m.height=n.height;var y=n.getContext("2d"),v=m.getContext("2d");if(v)if(!this.options.allowTaint&&y)v.putImageData(y.getImageData(0,0,n.width,n.height),0,0);else{var A=(o=n.getContext("webgl2"))!==null&&o!==void 0?o:n.getContext("webgl");if(A){var S=A.getContextAttributes();S?.preserveDrawingBuffer===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",n)}v.drawImage(n,0,0)}return m}catch{this.context.logger.info("Unable to clone canvas as it is tainted",n)}return m},i.prototype.createVideoClone=function(n){var o=n.ownerDocument.createElement("canvas");o.width=n.offsetWidth,o.height=n.offsetHeight;var c=o.getContext("2d");try{return c&&(c.drawImage(n,0,0,o.width,o.height),this.options.allowTaint||c.getImageData(0,0,o.width,o.height)),o}catch{this.context.logger.info("Unable to clone video as it is tainted",n)}var m=n.ownerDocument.createElement("canvas");return m.width=n.offsetWidth,m.height=n.offsetHeight,m},i.prototype.appendChildNode=function(n,o,c){(!cm(o)||!wN(o)&&!o.hasAttribute($C)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(o)))&&(!this.options.copyStyles||!cm(o)||!D2(o))&&n.appendChild(this.cloneNode(o,c))},i.prototype.cloneChildNodes=function(n,o,c){for(var m=this,y=n.shadowRoot?n.shadowRoot.firstChild:n.firstChild;y;y=y.nextSibling)if(cm(y)&&WC(y)&&typeof y.assignedNodes=="function"){var v=y.assignedNodes();v.length&&v.forEach(function(A){return m.appendChildNode(o,A,c)})}else this.appendChildNode(o,y,c)},i.prototype.cloneNode=function(n,o){if(qC(n))return document.createTextNode(n.data);if(!n.ownerDocument)return n.cloneNode(!1);var c=n.ownerDocument.defaultView;if(c&&cm(n)&&(ox(n)||p_(n))){var m=this.createElementClone(n);m.style.transitionProperty="none";var y=c.getComputedStyle(n),v=c.getComputedStyle(n,":before"),A=c.getComputedStyle(n,":after");this.referenceElement===n&&ox(m)&&(this.clonedReferenceElement=m),Ox(m)&&RN(m);var S=this.counters.parse(new y2(this.context,y)),I=this.resolvePseudoContent(n,m,v,Xg.BEFORE);P2(n)&&(o=!0),U2(n)||this.cloneChildNodes(n,m,o),I&&m.insertBefore(I,m.firstChild);var D=this.resolvePseudoContent(n,m,A,Xg.AFTER);return D&&m.appendChild(D),this.counters.pop(S),(y&&(this.options.copyStyles||p_(n))&&!XC(n)||o)&&vv(y,m),(n.scrollTop!==0||n.scrollLeft!==0)&&this.scrolledElements.push([m,n.scrollLeft,n.scrollTop]),(U_(n)||D_(n))&&(U_(m)||D_(m))&&(m.value=n.value),m}return n.cloneNode(!1)},i.prototype.resolvePseudoContent=function(n,o,c,m){var y=this;if(c){var v=c.content,A=o.ownerDocument;if(!(!A||!v||v==="none"||v==="-moz-alt-content"||c.display==="none")){this.counters.parse(new y2(this.context,c));var S=new _P(this.context,c),I=A.createElement("html2canvaspseudoelement");vv(c,I),S.content.forEach(function(z){if(z.type===0)I.appendChild(A.createTextNode(z.value));else if(z.type===22){var Z=A.createElement("img");Z.src=z.value,Z.style.opacity="1",I.appendChild(Z)}else if(z.type===18){if(z.name==="attr"){var O=z.values.filter(va);O.length&&I.appendChild(A.createTextNode(n.getAttribute(O[0].value)||""))}else if(z.name==="counter"){var ce=z.values.filter(mm),ie=ce[0],W=ce[1];if(ie&&va(ie)){var le=y.counters.getCounterValue(ie.value),ye=W&&va(W)?nx.parse(y.context,W.value):3;I.appendChild(A.createTextNode(i0(le,ye,!1)))}}else if(z.name==="counters"){var Be=z.values.filter(mm),ie=Be[0],Le=Be[1],W=Be[2];if(ie&&va(ie)){var lt=y.counters.getCounterValues(ie.value),ft=W&&va(W)?nx.parse(y.context,W.value):3,ut=Le&&Le.type===0?Le.value:"",Ne=lt.map(function(_e){return i0(_e,ft,!1)}).join(ut);I.appendChild(A.createTextNode(Ne))}}}else if(z.type===20)switch(z.value){case"open-quote":I.appendChild(A.createTextNode(g2(S.quotes,y.quoteDepth++,!0)));break;case"close-quote":I.appendChild(A.createTextNode(g2(S.quotes,--y.quoteDepth,!1)));break;default:I.appendChild(A.createTextNode(z.value))}}),I.className=Ax+" "+cx;var D=m===Xg.BEFORE?" "+Ax:" "+cx;return p_(o)?o.className.baseValue+=D:o.className+=D,I}}},i.destroy=function(n){return n.parentNode?(n.parentNode.removeChild(n),!0):!1},i})(),Xg;(function(i){i[i.BEFORE=0]="BEFORE",i[i.AFTER=1]="AFTER"})(Xg||(Xg={}));var EN=function(i,n){var o=i.createElement("iframe");return o.className="html2canvas-container",o.style.visibility="hidden",o.style.position="fixed",o.style.left="-10000px",o.style.top="0px",o.style.border="0",o.width=n.width.toString(),o.height=n.height.toString(),o.scrolling="no",o.setAttribute($C,"true"),i.body.appendChild(o),o},TN=function(i){return new Promise(function(n){if(i.complete){n();return}if(!i.src){n();return}i.onload=n,i.onerror=n})},FN=function(i){return Promise.all([].slice.call(i.images,0).map(TN))},IN=function(i){return new Promise(function(n,o){var c=i.contentWindow;if(!c)return o("No window assigned for iframe");var m=c.document;c.onload=i.onload=function(){c.onload=i.onload=null;var y=setInterval(function(){m.body.childNodes.length>0&&m.readyState==="complete"&&(clearInterval(y),n(i))},50)}})},LN=["all","d","content"],vv=function(i,n){for(var o=i.length-1;o>=0;o--){var c=i.item(o);LN.indexOf(c)===-1&&n.style.setProperty(c,i.getPropertyValue(c))}return n},MN=function(i){var n="";return i&&(n+="<!DOCTYPE ",i.name&&(n+=i.name),i.internalSubset&&(n+=i.internalSubset),i.publicId&&(n+='"'+i.publicId+'"'),i.systemId&&(n+='"'+i.systemId+'"'),n+=">"),n},UN=function(i,n,o){i&&i.defaultView&&(n!==i.defaultView.pageXOffset||o!==i.defaultView.pageYOffset)&&i.defaultView.scrollTo(n,o)},DN=function(i){var n=i[0],o=i[1],c=i[2];n.scrollLeft=o,n.scrollTop=c},PN=":before",NN=":after",Ax="___html2canvas___pseudoelement_before",cx="___html2canvas___pseudoelement_after",j2=`{
    content: "" !important;
    display: none !important;
}`,RN=function(i){QN(i,"."+Ax+PN+j2+`
         .`+cx+NN+j2)},QN=function(i,n){var o=i.ownerDocument;if(o){var c=o.createElement("style");c.textContent=n,i.appendChild(c)}},JC=(function(){function i(){}return i.getOrigin=function(n){var o=i._link;return o?(o.href=n,o.href=o.href,o.protocol+o.hostname+o.port):"about:blank"},i.isSameOrigin=function(n){return i.getOrigin(n)===i._origin},i.setContext=function(n){i._link=n.document.createElement("a"),i._origin=i.getOrigin(n.location.href)},i._origin="about:blank",i})(),kN=(function(){function i(n,o){this.context=n,this._options=o,this._cache={}}return i.prototype.addImage=function(n){var o=Promise.resolve();return this.has(n)||(bv(n)||HN(n))&&(this._cache[n]=this.loadImage(n)).catch(function(){}),o},i.prototype.match=function(n){return this._cache[n]},i.prototype.loadImage=function(n){return KA(this,void 0,void 0,function(){var o,c,m,y,v=this;return _A(this,function(A){switch(A.label){case 0:return o=JC.isSameOrigin(n),c=!xv(n)&&this._options.useCORS===!0&&zl.SUPPORT_CORS_IMAGES&&!o,m=!xv(n)&&!o&&!bv(n)&&typeof this._options.proxy=="string"&&zl.SUPPORT_CORS_XHR&&!c,!o&&this._options.allowTaint===!1&&!xv(n)&&!bv(n)&&!m&&!c?[2]:(y=n,m?[4,this.proxy(y)]:[3,2]);case 1:y=A.sent(),A.label=2;case 2:return this.context.logger.debug("Added image "+n.substring(0,256)),[4,new Promise(function(S,I){var D=new Image;D.onload=function(){return S(D)},D.onerror=I,(VN(y)||c)&&(D.crossOrigin="anonymous"),D.src=y,D.complete===!0&&setTimeout(function(){return S(D)},500),v._options.imageTimeout>0&&setTimeout(function(){return I("Timed out ("+v._options.imageTimeout+"ms) loading image")},v._options.imageTimeout)})];case 3:return[2,A.sent()]}})})},i.prototype.has=function(n){return typeof this._cache[n]<"u"},i.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},i.prototype.proxy=function(n){var o=this,c=this._options.proxy;if(!c)throw new Error("No proxy defined");var m=n.substring(0,256);return new Promise(function(y,v){var A=zl.SUPPORT_RESPONSE_TYPE?"blob":"text",S=new XMLHttpRequest;S.onload=function(){if(S.status===200)if(A==="text")y(S.response);else{var z=new FileReader;z.addEventListener("load",function(){return y(z.result)},!1),z.addEventListener("error",function(Z){return v(Z)},!1),z.readAsDataURL(S.response)}else v("Failed to proxy resource "+m+" with status code "+S.status)},S.onerror=v;var I=c.indexOf("?")>-1?"&":"?";if(S.open("GET",""+c+I+"url="+encodeURIComponent(n)+"&responseType="+A),A!=="text"&&S instanceof XMLHttpRequest&&(S.responseType=A),o._options.imageTimeout){var D=o._options.imageTimeout;S.timeout=D,S.ontimeout=function(){return v("Timed out ("+D+"ms) proxying "+m)}}S.send()})},i})(),ON=/^data:image\/svg\+xml/i,zN=/^data:image\/.*;base64,/i,jN=/^data:image\/.*/i,HN=function(i){return zl.SUPPORT_SVG_DRAWING||!GN(i)},xv=function(i){return jN.test(i)},VN=function(i){return zN.test(i)},bv=function(i){return i.substr(0,4)==="blob"},GN=function(i){return i.substr(-3).toLowerCase()==="svg"||ON.test(i)},Nr=(function(){function i(n,o){this.type=0,this.x=n,this.y=o}return i.prototype.add=function(n,o){return new i(this.x+n,this.y+o)},i})(),tm=function(i,n,o){return new Nr(i.x+(n.x-i.x)*o,i.y+(n.y-i.y)*o)},Wy=(function(){function i(n,o,c,m){this.type=1,this.start=n,this.startControl=o,this.endControl=c,this.end=m}return i.prototype.subdivide=function(n,o){var c=tm(this.start,this.startControl,n),m=tm(this.startControl,this.endControl,n),y=tm(this.endControl,this.end,n),v=tm(c,m,n),A=tm(m,y,n),S=tm(v,A,n);return o?new i(this.start,c,v,S):new i(S,A,y,this.end)},i.prototype.add=function(n,o){return new i(this.start.add(n,o),this.startControl.add(n,o),this.endControl.add(n,o),this.end.add(n,o))},i.prototype.reverse=function(){return new i(this.end,this.endControl,this.startControl,this.start)},i})(),hu=function(i){return i.type===1},qN=(function(){function i(n){var o=n.styles,c=n.bounds,m=kg(o.borderTopLeftRadius,c.width,c.height),y=m[0],v=m[1],A=kg(o.borderTopRightRadius,c.width,c.height),S=A[0],I=A[1],D=kg(o.borderBottomRightRadius,c.width,c.height),z=D[0],Z=D[1],O=kg(o.borderBottomLeftRadius,c.width,c.height),ce=O[0],ie=O[1],W=[];W.push((y+S)/c.width),W.push((ce+z)/c.width),W.push((v+ie)/c.height),W.push((I+Z)/c.height);var le=Math.max.apply(Math,W);le>1&&(y/=le,v/=le,S/=le,I/=le,z/=le,Z/=le,ce/=le,ie/=le);var ye=c.width-S,Be=c.height-Z,Le=c.width-z,lt=c.height-ie,ft=o.borderTopWidth,ut=o.borderRightWidth,Ne=o.borderBottomWidth,Ce=o.borderLeftWidth,_t=za(o.paddingTop,n.bounds.width),_e=za(o.paddingRight,n.bounds.width),Te=za(o.paddingBottom,n.bounds.width),Ye=za(o.paddingLeft,n.bounds.width);this.topLeftBorderDoubleOuterBox=y>0||v>0?as(c.left+Ce/3,c.top+ft/3,y-Ce/3,v-ft/3,$i.TOP_LEFT):new Nr(c.left+Ce/3,c.top+ft/3),this.topRightBorderDoubleOuterBox=y>0||v>0?as(c.left+ye,c.top+ft/3,S-ut/3,I-ft/3,$i.TOP_RIGHT):new Nr(c.left+c.width-ut/3,c.top+ft/3),this.bottomRightBorderDoubleOuterBox=z>0||Z>0?as(c.left+Le,c.top+Be,z-ut/3,Z-Ne/3,$i.BOTTOM_RIGHT):new Nr(c.left+c.width-ut/3,c.top+c.height-Ne/3),this.bottomLeftBorderDoubleOuterBox=ce>0||ie>0?as(c.left+Ce/3,c.top+lt,ce-Ce/3,ie-Ne/3,$i.BOTTOM_LEFT):new Nr(c.left+Ce/3,c.top+c.height-Ne/3),this.topLeftBorderDoubleInnerBox=y>0||v>0?as(c.left+Ce*2/3,c.top+ft*2/3,y-Ce*2/3,v-ft*2/3,$i.TOP_LEFT):new Nr(c.left+Ce*2/3,c.top+ft*2/3),this.topRightBorderDoubleInnerBox=y>0||v>0?as(c.left+ye,c.top+ft*2/3,S-ut*2/3,I-ft*2/3,$i.TOP_RIGHT):new Nr(c.left+c.width-ut*2/3,c.top+ft*2/3),this.bottomRightBorderDoubleInnerBox=z>0||Z>0?as(c.left+Le,c.top+Be,z-ut*2/3,Z-Ne*2/3,$i.BOTTOM_RIGHT):new Nr(c.left+c.width-ut*2/3,c.top+c.height-Ne*2/3),this.bottomLeftBorderDoubleInnerBox=ce>0||ie>0?as(c.left+Ce*2/3,c.top+lt,ce-Ce*2/3,ie-Ne*2/3,$i.BOTTOM_LEFT):new Nr(c.left+Ce*2/3,c.top+c.height-Ne*2/3),this.topLeftBorderStroke=y>0||v>0?as(c.left+Ce/2,c.top+ft/2,y-Ce/2,v-ft/2,$i.TOP_LEFT):new Nr(c.left+Ce/2,c.top+ft/2),this.topRightBorderStroke=y>0||v>0?as(c.left+ye,c.top+ft/2,S-ut/2,I-ft/2,$i.TOP_RIGHT):new Nr(c.left+c.width-ut/2,c.top+ft/2),this.bottomRightBorderStroke=z>0||Z>0?as(c.left+Le,c.top+Be,z-ut/2,Z-Ne/2,$i.BOTTOM_RIGHT):new Nr(c.left+c.width-ut/2,c.top+c.height-Ne/2),this.bottomLeftBorderStroke=ce>0||ie>0?as(c.left+Ce/2,c.top+lt,ce-Ce/2,ie-Ne/2,$i.BOTTOM_LEFT):new Nr(c.left+Ce/2,c.top+c.height-Ne/2),this.topLeftBorderBox=y>0||v>0?as(c.left,c.top,y,v,$i.TOP_LEFT):new Nr(c.left,c.top),this.topRightBorderBox=S>0||I>0?as(c.left+ye,c.top,S,I,$i.TOP_RIGHT):new Nr(c.left+c.width,c.top),this.bottomRightBorderBox=z>0||Z>0?as(c.left+Le,c.top+Be,z,Z,$i.BOTTOM_RIGHT):new Nr(c.left+c.width,c.top+c.height),this.bottomLeftBorderBox=ce>0||ie>0?as(c.left,c.top+lt,ce,ie,$i.BOTTOM_LEFT):new Nr(c.left,c.top+c.height),this.topLeftPaddingBox=y>0||v>0?as(c.left+Ce,c.top+ft,Math.max(0,y-Ce),Math.max(0,v-ft),$i.TOP_LEFT):new Nr(c.left+Ce,c.top+ft),this.topRightPaddingBox=S>0||I>0?as(c.left+Math.min(ye,c.width-ut),c.top+ft,ye>c.width+ut?0:Math.max(0,S-ut),Math.max(0,I-ft),$i.TOP_RIGHT):new Nr(c.left+c.width-ut,c.top+ft),this.bottomRightPaddingBox=z>0||Z>0?as(c.left+Math.min(Le,c.width-Ce),c.top+Math.min(Be,c.height-Ne),Math.max(0,z-ut),Math.max(0,Z-Ne),$i.BOTTOM_RIGHT):new Nr(c.left+c.width-ut,c.top+c.height-Ne),this.bottomLeftPaddingBox=ce>0||ie>0?as(c.left+Ce,c.top+Math.min(lt,c.height-Ne),Math.max(0,ce-Ce),Math.max(0,ie-Ne),$i.BOTTOM_LEFT):new Nr(c.left+Ce,c.top+c.height-Ne),this.topLeftContentBox=y>0||v>0?as(c.left+Ce+Ye,c.top+ft+_t,Math.max(0,y-(Ce+Ye)),Math.max(0,v-(ft+_t)),$i.TOP_LEFT):new Nr(c.left+Ce+Ye,c.top+ft+_t),this.topRightContentBox=S>0||I>0?as(c.left+Math.min(ye,c.width+Ce+Ye),c.top+ft+_t,ye>c.width+Ce+Ye?0:S-Ce+Ye,I-(ft+_t),$i.TOP_RIGHT):new Nr(c.left+c.width-(ut+_e),c.top+ft+_t),this.bottomRightContentBox=z>0||Z>0?as(c.left+Math.min(Le,c.width-(Ce+Ye)),c.top+Math.min(Be,c.height+ft+_t),Math.max(0,z-(ut+_e)),Z-(Ne+Te),$i.BOTTOM_RIGHT):new Nr(c.left+c.width-(ut+_e),c.top+c.height-(Ne+Te)),this.bottomLeftContentBox=ce>0||ie>0?as(c.left+Ce+Ye,c.top+lt,Math.max(0,ce-(Ce+Ye)),ie-(Ne+Te),$i.BOTTOM_LEFT):new Nr(c.left+Ce+Ye,c.top+c.height-(Ne+Te))}return i})(),$i;(function(i){i[i.TOP_LEFT=0]="TOP_LEFT",i[i.TOP_RIGHT=1]="TOP_RIGHT",i[i.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",i[i.BOTTOM_LEFT=3]="BOTTOM_LEFT"})($i||($i={}));var as=function(i,n,o,c,m){var y=4*((Math.sqrt(2)-1)/3),v=o*y,A=c*y,S=i+o,I=n+c;switch(m){case $i.TOP_LEFT:return new Wy(new Nr(i,I),new Nr(i,I-A),new Nr(S-v,n),new Nr(S,n));case $i.TOP_RIGHT:return new Wy(new Nr(i,n),new Nr(i+v,n),new Nr(S,I-A),new Nr(S,I));case $i.BOTTOM_RIGHT:return new Wy(new Nr(S,n),new Nr(S,n+A),new Nr(i+v,I),new Nr(i,I));case $i.BOTTOM_LEFT:default:return new Wy(new Nr(S,I),new Nr(S-v,I),new Nr(i,n+A),new Nr(i,n))}},P_=function(i){return[i.topLeftBorderBox,i.topRightBorderBox,i.bottomRightBorderBox,i.bottomLeftBorderBox]},KN=function(i){return[i.topLeftContentBox,i.topRightContentBox,i.bottomRightContentBox,i.bottomLeftContentBox]},N_=function(i){return[i.topLeftPaddingBox,i.topRightPaddingBox,i.bottomRightPaddingBox,i.bottomLeftPaddingBox]},ZN=(function(){function i(n,o,c){this.offsetX=n,this.offsetY=o,this.matrix=c,this.type=0,this.target=6}return i})(),Yy=(function(){function i(n,o){this.path=n,this.target=o,this.type=1}return i})(),XN=(function(){function i(n){this.opacity=n,this.type=2,this.target=6}return i})(),WN=function(i){return i.type===0},eS=function(i){return i.type===1},YN=function(i){return i.type===2},H2=function(i,n){return i.length===n.length?i.some(function(o,c){return o===n[c]}):!1},$N=function(i,n,o,c,m){return i.map(function(y,v){switch(v){case 0:return y.add(n,o);case 1:return y.add(n+c,o);case 2:return y.add(n+c,o+m);case 3:return y.add(n,o+m)}return y})},tS=(function(){function i(n){this.element=n,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return i})(),rS=(function(){function i(n,o){if(this.container=n,this.parent=o,this.effects=[],this.curves=new qN(this.container),this.container.styles.opacity<1&&this.effects.push(new XN(this.container.styles.opacity)),this.container.styles.transform!==null){var c=this.container.bounds.left+this.container.styles.transformOrigin[0].number,m=this.container.bounds.top+this.container.styles.transformOrigin[1].number,y=this.container.styles.transform;this.effects.push(new ZN(c,m,y))}if(this.container.styles.overflowX!==0){var v=P_(this.curves),A=N_(this.curves);H2(v,A)?this.effects.push(new Yy(v,6)):(this.effects.push(new Yy(v,2)),this.effects.push(new Yy(A,4)))}}return i.prototype.getEffects=function(n){for(var o=[2,3].indexOf(this.container.styles.position)===-1,c=this.parent,m=this.effects.slice(0);c;){var y=c.effects.filter(function(S){return!eS(S)});if(o||c.container.styles.position!==0||!c.parent){if(m.unshift.apply(m,y),o=[2,3].indexOf(c.container.styles.position)===-1,c.container.styles.overflowX!==0){var v=P_(c.curves),A=N_(c.curves);H2(v,A)||m.unshift(new Yy(A,6))}}else m.unshift.apply(m,y);c=c.parent}return m.filter(function(S){return Go(S.target,n)})},i})(),ux=function(i,n,o,c){i.container.elements.forEach(function(m){var y=Go(m.flags,4),v=Go(m.flags,2),A=new rS(m,i);Go(m.styles.display,2048)&&c.push(A);var S=Go(m.flags,8)?[]:c;if(y||v){var I=y||m.styles.isPositioned()?o:n,D=new tS(A);if(m.styles.isPositioned()||m.styles.opacity<1||m.styles.isTransformed()){var z=m.styles.zIndex.order;if(z<0){var Z=0;I.negativeZIndex.some(function(ce,ie){return z>ce.element.container.styles.zIndex.order?(Z=ie,!1):Z>0}),I.negativeZIndex.splice(Z,0,D)}else if(z>0){var O=0;I.positiveZIndex.some(function(ce,ie){return z>=ce.element.container.styles.zIndex.order?(O=ie+1,!1):O>0}),I.positiveZIndex.splice(O,0,D)}else I.zeroOrAutoZIndexOrTransformedOrOpacity.push(D)}else m.styles.isFloating()?I.nonPositionedFloats.push(D):I.nonPositionedInlineLevel.push(D);ux(A,D,y?D:o,S)}else m.styles.isInlineLevel()?n.inlineLevel.push(A):n.nonInlineLevel.push(A),ux(A,n,o,S);Go(m.flags,8)&&nS(m,S)})},nS=function(i,n){for(var o=i instanceof sx?i.start:1,c=i instanceof sx?i.reversed:!1,m=0;m<n.length;m++){var y=n[m];y.container instanceof OC&&typeof y.container.value=="number"&&y.container.value!==0&&(o=y.container.value),y.listValue=i0(o,y.container.styles.listStyleType,!0),o+=c?-1:1}},JN=function(i){var n=new rS(i,null),o=new tS(n),c=[];return ux(n,o,o,c),nS(n.container,c),o},V2=function(i,n){switch(n){case 0:return du(i.topLeftBorderBox,i.topLeftPaddingBox,i.topRightBorderBox,i.topRightPaddingBox);case 1:return du(i.topRightBorderBox,i.topRightPaddingBox,i.bottomRightBorderBox,i.bottomRightPaddingBox);case 2:return du(i.bottomRightBorderBox,i.bottomRightPaddingBox,i.bottomLeftBorderBox,i.bottomLeftPaddingBox);default:return du(i.bottomLeftBorderBox,i.bottomLeftPaddingBox,i.topLeftBorderBox,i.topLeftPaddingBox)}},eR=function(i,n){switch(n){case 0:return du(i.topLeftBorderBox,i.topLeftBorderDoubleOuterBox,i.topRightBorderBox,i.topRightBorderDoubleOuterBox);case 1:return du(i.topRightBorderBox,i.topRightBorderDoubleOuterBox,i.bottomRightBorderBox,i.bottomRightBorderDoubleOuterBox);case 2:return du(i.bottomRightBorderBox,i.bottomRightBorderDoubleOuterBox,i.bottomLeftBorderBox,i.bottomLeftBorderDoubleOuterBox);default:return du(i.bottomLeftBorderBox,i.bottomLeftBorderDoubleOuterBox,i.topLeftBorderBox,i.topLeftBorderDoubleOuterBox)}},tR=function(i,n){switch(n){case 0:return du(i.topLeftBorderDoubleInnerBox,i.topLeftPaddingBox,i.topRightBorderDoubleInnerBox,i.topRightPaddingBox);case 1:return du(i.topRightBorderDoubleInnerBox,i.topRightPaddingBox,i.bottomRightBorderDoubleInnerBox,i.bottomRightPaddingBox);case 2:return du(i.bottomRightBorderDoubleInnerBox,i.bottomRightPaddingBox,i.bottomLeftBorderDoubleInnerBox,i.bottomLeftPaddingBox);default:return du(i.bottomLeftBorderDoubleInnerBox,i.bottomLeftPaddingBox,i.topLeftBorderDoubleInnerBox,i.topLeftPaddingBox)}},rR=function(i,n){switch(n){case 0:return $y(i.topLeftBorderStroke,i.topRightBorderStroke);case 1:return $y(i.topRightBorderStroke,i.bottomRightBorderStroke);case 2:return $y(i.bottomRightBorderStroke,i.bottomLeftBorderStroke);default:return $y(i.bottomLeftBorderStroke,i.topLeftBorderStroke)}},$y=function(i,n){var o=[];return hu(i)?o.push(i.subdivide(.5,!1)):o.push(i),hu(n)?o.push(n.subdivide(.5,!0)):o.push(n),o},du=function(i,n,o,c){var m=[];return hu(i)?m.push(i.subdivide(.5,!1)):m.push(i),hu(o)?m.push(o.subdivide(.5,!0)):m.push(o),hu(c)?m.push(c.subdivide(.5,!0).reverse()):m.push(c),hu(n)?m.push(n.subdivide(.5,!1).reverse()):m.push(n),m},iS=function(i){var n=i.bounds,o=i.styles;return n.add(o.borderLeftWidth,o.borderTopWidth,-(o.borderRightWidth+o.borderLeftWidth),-(o.borderTopWidth+o.borderBottomWidth))},R_=function(i){var n=i.styles,o=i.bounds,c=za(n.paddingLeft,o.width),m=za(n.paddingRight,o.width),y=za(n.paddingTop,o.width),v=za(n.paddingBottom,o.width);return o.add(c+n.borderLeftWidth,y+n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth+c+m),-(n.borderTopWidth+n.borderBottomWidth+y+v))},nR=function(i,n){return i===0?n.bounds:i===2?R_(n):iS(n)},iR=function(i,n){return i===0?n.bounds:i===2?R_(n):iS(n)},wv=function(i,n,o){var c=nR(sm(i.styles.backgroundOrigin,n),i),m=iR(sm(i.styles.backgroundClip,n),i),y=aR(sm(i.styles.backgroundSize,n),o,c),v=y[0],A=y[1],S=kg(sm(i.styles.backgroundPosition,n),c.width-v,c.height-A),I=sR(sm(i.styles.backgroundRepeat,n),S,y,c,m),D=Math.round(c.left+S[0]),z=Math.round(c.top+S[1]);return[I,D,z,v,A]},rm=function(i){return va(i)&&i.value===pm.AUTO},Jy=function(i){return typeof i=="number"},aR=function(i,n,o){var c=n[0],m=n[1],y=n[2],v=i[0],A=i[1];if(!v)return[0,0];if(Eo(v)&&A&&Eo(A))return[za(v,o.width),za(A,o.height)];var S=Jy(y);if(va(v)&&(v.value===pm.CONTAIN||v.value===pm.COVER)){if(Jy(y)){var I=o.width/o.height;return I<y!=(v.value===pm.COVER)?[o.width,o.width/y]:[o.height*y,o.height]}return[o.width,o.height]}var D=Jy(c),z=Jy(m),Z=D||z;if(rm(v)&&(!A||rm(A))){if(D&&z)return[c,m];if(!S&&!Z)return[o.width,o.height];if(Z&&S){var O=D?c:m*y,ce=z?m:c/y;return[O,ce]}var ie=D?c:o.width,W=z?m:o.height;return[ie,W]}if(S){var le=0,ye=0;return Eo(v)?le=za(v,o.width):Eo(A)&&(ye=za(A,o.height)),rm(v)?le=ye*y:(!A||rm(A))&&(ye=le/y),[le,ye]}var Be=null,Le=null;if(Eo(v)?Be=za(v,o.width):A&&Eo(A)&&(Le=za(A,o.height)),Be!==null&&(!A||rm(A))&&(Le=D&&z?Be/c*m:o.height),Le!==null&&rm(v)&&(Be=D&&z?Le/m*c:o.width),Be!==null&&Le!==null)return[Be,Le];throw new Error("Unable to calculate background-size for element")},sm=function(i,n){var o=i[n];return typeof o>"u"?i[0]:o},sR=function(i,n,o,c,m){var y=n[0],v=n[1],A=o[0],S=o[1];switch(i){case 2:return[new Nr(Math.round(c.left),Math.round(c.top+v)),new Nr(Math.round(c.left+c.width),Math.round(c.top+v)),new Nr(Math.round(c.left+c.width),Math.round(S+c.top+v)),new Nr(Math.round(c.left),Math.round(S+c.top+v))];case 3:return[new Nr(Math.round(c.left+y),Math.round(c.top)),new Nr(Math.round(c.left+y+A),Math.round(c.top)),new Nr(Math.round(c.left+y+A),Math.round(c.height+c.top)),new Nr(Math.round(c.left+y),Math.round(c.height+c.top))];case 1:return[new Nr(Math.round(c.left+y),Math.round(c.top+v)),new Nr(Math.round(c.left+y+A),Math.round(c.top+v)),new Nr(Math.round(c.left+y+A),Math.round(c.top+v+S)),new Nr(Math.round(c.left+y),Math.round(c.top+v+S))];default:return[new Nr(Math.round(m.left),Math.round(m.top)),new Nr(Math.round(m.left+m.width),Math.round(m.top)),new Nr(Math.round(m.left+m.width),Math.round(m.height+m.top)),new Nr(Math.round(m.left),Math.round(m.height+m.top))]}},oR="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",G2="Hidden Text",lR=(function(){function i(n){this._data={},this._document=n}return i.prototype.parseMetrics=function(n,o){var c=this._document.createElement("div"),m=this._document.createElement("img"),y=this._document.createElement("span"),v=this._document.body;c.style.visibility="hidden",c.style.fontFamily=n,c.style.fontSize=o,c.style.margin="0",c.style.padding="0",c.style.whiteSpace="nowrap",v.appendChild(c),m.src=oR,m.width=1,m.height=1,m.style.margin="0",m.style.padding="0",m.style.verticalAlign="baseline",y.style.fontFamily=n,y.style.fontSize=o,y.style.margin="0",y.style.padding="0",y.appendChild(this._document.createTextNode(G2)),c.appendChild(y),c.appendChild(m);var A=m.offsetTop-y.offsetTop+2;c.removeChild(y),c.appendChild(this._document.createTextNode(G2)),c.style.lineHeight="normal",m.style.verticalAlign="super";var S=m.offsetTop-c.offsetTop+2;return v.removeChild(c),{baseline:A,middle:S}},i.prototype.getMetrics=function(n,o){var c=n+" "+o;return typeof this._data[c]>"u"&&(this._data[c]=this.parseMetrics(n,o)),this._data[c]},i})(),aS=(function(){function i(n,o){this.context=n,this.options=o}return i})(),AR=1e4,cR=(function(i){Xu(n,i);function n(o,c){var m=i.call(this,o,c)||this;return m._activeEffects=[],m.canvas=c.canvas?c.canvas:document.createElement("canvas"),m.ctx=m.canvas.getContext("2d"),c.canvas||(m.canvas.width=Math.floor(c.width*c.scale),m.canvas.height=Math.floor(c.height*c.scale),m.canvas.style.width=c.width+"px",m.canvas.style.height=c.height+"px"),m.fontMetrics=new lR(document),m.ctx.scale(m.options.scale,m.options.scale),m.ctx.translate(-c.x,-c.y),m.ctx.textBaseline="bottom",m._activeEffects=[],m.context.logger.debug("Canvas renderer initialized ("+c.width+"x"+c.height+") with scale "+c.scale),m}return n.prototype.applyEffects=function(o){for(var c=this;this._activeEffects.length;)this.popEffect();o.forEach(function(m){return c.applyEffect(m)})},n.prototype.applyEffect=function(o){this.ctx.save(),YN(o)&&(this.ctx.globalAlpha=o.opacity),WN(o)&&(this.ctx.translate(o.offsetX,o.offsetY),this.ctx.transform(o.matrix[0],o.matrix[1],o.matrix[2],o.matrix[3],o.matrix[4],o.matrix[5]),this.ctx.translate(-o.offsetX,-o.offsetY)),eS(o)&&(this.path(o.path),this.ctx.clip()),this._activeEffects.push(o)},n.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},n.prototype.renderStack=function(o){return KA(this,void 0,void 0,function(){var c;return _A(this,function(m){switch(m.label){case 0:return c=o.element.container.styles,c.isVisible()?[4,this.renderStackContent(o)]:[3,2];case 1:m.sent(),m.label=2;case 2:return[2]}})})},n.prototype.renderNode=function(o){return KA(this,void 0,void 0,function(){return _A(this,function(c){switch(c.label){case 0:if(Go(o.container.flags,16))debugger;return o.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(o)]:[3,3];case 1:return c.sent(),[4,this.renderNodeContent(o)];case 2:c.sent(),c.label=3;case 3:return[2]}})})},n.prototype.renderTextWithLetterSpacing=function(o,c,m){var y=this;if(c===0)this.ctx.fillText(o.text,o.bounds.left,o.bounds.top+m);else{var v=Qx(o.text);v.reduce(function(A,S){return y.ctx.fillText(S,A,o.bounds.top+m),A+y.ctx.measureText(S).width},o.bounds.left)}},n.prototype.createFontStyle=function(o){var c=o.fontVariant.filter(function(v){return v==="normal"||v==="small-caps"}).join(""),m=pR(o.fontFamily).join(", "),y=u0(o.fontSize)?""+o.fontSize.number+o.fontSize.unit:o.fontSize.number+"px";return[[o.fontStyle,c,o.fontWeight,y,m].join(" "),m,y]},n.prototype.renderTextNode=function(o,c){return KA(this,void 0,void 0,function(){var m,y,v,A,S,I,D,z,Z=this;return _A(this,function(O){return m=this.createFontStyle(c),y=m[0],v=m[1],A=m[2],this.ctx.font=y,this.ctx.direction=c.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",S=this.fontMetrics.getMetrics(v,A),I=S.baseline,D=S.middle,z=c.paintOrder,o.textBounds.forEach(function(ce){z.forEach(function(ie){switch(ie){case 0:Z.ctx.fillStyle=pl(c.color),Z.renderTextWithLetterSpacing(ce,c.letterSpacing,I);var W=c.textShadow;W.length&&ce.text.trim().length&&(W.slice(0).reverse().forEach(function(le){Z.ctx.shadowColor=pl(le.color),Z.ctx.shadowOffsetX=le.offsetX.number*Z.options.scale,Z.ctx.shadowOffsetY=le.offsetY.number*Z.options.scale,Z.ctx.shadowBlur=le.blur.number,Z.renderTextWithLetterSpacing(ce,c.letterSpacing,I)}),Z.ctx.shadowColor="",Z.ctx.shadowOffsetX=0,Z.ctx.shadowOffsetY=0,Z.ctx.shadowBlur=0),c.textDecorationLine.length&&(Z.ctx.fillStyle=pl(c.textDecorationColor||c.color),c.textDecorationLine.forEach(function(le){switch(le){case 1:Z.ctx.fillRect(ce.bounds.left,Math.round(ce.bounds.top+I),ce.bounds.width,1);break;case 2:Z.ctx.fillRect(ce.bounds.left,Math.round(ce.bounds.top),ce.bounds.width,1);break;case 3:Z.ctx.fillRect(ce.bounds.left,Math.ceil(ce.bounds.top+D),ce.bounds.width,1);break}}));break;case 1:c.webkitTextStrokeWidth&&ce.text.trim().length&&(Z.ctx.strokeStyle=pl(c.webkitTextStrokeColor),Z.ctx.lineWidth=c.webkitTextStrokeWidth,Z.ctx.lineJoin=window.chrome?"miter":"round",Z.ctx.strokeText(ce.text,ce.bounds.left,ce.bounds.top+I)),Z.ctx.strokeStyle="",Z.ctx.lineWidth=0,Z.ctx.lineJoin="miter";break}})}),[2]})})},n.prototype.renderReplacedElement=function(o,c,m){if(m&&o.intrinsicWidth>0&&o.intrinsicHeight>0){var y=R_(o),v=N_(c);this.path(v),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(m,0,0,o.intrinsicWidth,o.intrinsicHeight,y.left,y.top,y.width,y.height),this.ctx.restore()}},n.prototype.renderNodeContent=function(o){return KA(this,void 0,void 0,function(){var c,m,y,v,A,S,ye,ye,I,D,z,Z,Le,O,ce,lt,ie,W,le,ye,Be,Le,lt;return _A(this,function(ft){switch(ft.label){case 0:this.applyEffects(o.getEffects(4)),c=o.container,m=o.curves,y=c.styles,v=0,A=c.textNodes,ft.label=1;case 1:return v<A.length?(S=A[v],[4,this.renderTextNode(S,y)]):[3,4];case 2:ft.sent(),ft.label=3;case 3:return v++,[3,1];case 4:if(!(c instanceof RC))return[3,8];ft.label=5;case 5:return ft.trys.push([5,7,,8]),[4,this.context.cache.match(c.src)];case 6:return ye=ft.sent(),this.renderReplacedElement(c,m,ye),[3,8];case 7:return ft.sent(),this.context.logger.error("Error loading image "+c.src),[3,8];case 8:if(c instanceof QC&&this.renderReplacedElement(c,m,c.canvas),!(c instanceof kC))return[3,12];ft.label=9;case 9:return ft.trys.push([9,11,,12]),[4,this.context.cache.match(c.svg)];case 10:return ye=ft.sent(),this.renderReplacedElement(c,m,ye),[3,12];case 11:return ft.sent(),this.context.logger.error("Error loading svg "+c.svg.substring(0,255)),[3,12];case 12:return c instanceof HC&&c.tree?(I=new n(this.context,{scale:this.options.scale,backgroundColor:c.backgroundColor,x:0,y:0,width:c.width,height:c.height}),[4,I.render(c.tree)]):[3,14];case 13:D=ft.sent(),c.width&&c.height&&this.ctx.drawImage(D,0,0,c.width,c.height,c.bounds.left,c.bounds.top,c.bounds.width,c.bounds.height),ft.label=14;case 14:if(c instanceof kx&&(z=Math.min(c.bounds.width,c.bounds.height),c.type===L_?c.checked&&(this.ctx.save(),this.path([new Nr(c.bounds.left+z*.39363,c.bounds.top+z*.79),new Nr(c.bounds.left+z*.16,c.bounds.top+z*.5549),new Nr(c.bounds.left+z*.27347,c.bounds.top+z*.44071),new Nr(c.bounds.left+z*.39694,c.bounds.top+z*.5649),new Nr(c.bounds.left+z*.72983,c.bounds.top+z*.23),new Nr(c.bounds.left+z*.84,c.bounds.top+z*.34085),new Nr(c.bounds.left+z*.39363,c.bounds.top+z*.79)]),this.ctx.fillStyle=pl(M2),this.ctx.fill(),this.ctx.restore()):c.type===M_&&c.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(c.bounds.left+z/2,c.bounds.top+z/2,z/4,0,Math.PI*2,!0),this.ctx.fillStyle=pl(M2),this.ctx.fill(),this.ctx.restore())),uR(c)&&c.value.length){switch(Z=this.createFontStyle(y),Le=Z[0],O=Z[1],ce=this.fontMetrics.getMetrics(Le,O).baseline,this.ctx.font=Le,this.ctx.fillStyle=pl(y.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=fR(c.styles.textAlign),lt=R_(c),ie=0,c.styles.textAlign){case 1:ie+=lt.width/2;break;case 2:ie+=lt.width;break}W=lt.add(ie,0,0,-lt.height/2+1),this.ctx.save(),this.path([new Nr(lt.left,lt.top),new Nr(lt.left+lt.width,lt.top),new Nr(lt.left+lt.width,lt.top+lt.height),new Nr(lt.left,lt.top+lt.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Zg(c.value,W),y.letterSpacing,ce),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Go(c.styles.display,2048))return[3,20];if(c.styles.listStyleImage===null)return[3,19];if(le=c.styles.listStyleImage,le.type!==0)return[3,18];ye=void 0,Be=le.url,ft.label=15;case 15:return ft.trys.push([15,17,,18]),[4,this.context.cache.match(Be)];case 16:return ye=ft.sent(),this.ctx.drawImage(ye,c.bounds.left-(ye.width+10),c.bounds.top),[3,18];case 17:return ft.sent(),this.context.logger.error("Error loading list-style-image "+Be),[3,18];case 18:return[3,20];case 19:o.listValue&&c.styles.listStyleType!==-1&&(Le=this.createFontStyle(y)[0],this.ctx.font=Le,this.ctx.fillStyle=pl(y.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",lt=new lf(c.bounds.left,c.bounds.top+za(c.styles.paddingTop,c.bounds.width),c.bounds.width,p2(y.lineHeight,y.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Zg(o.listValue,lt),y.letterSpacing,p2(y.lineHeight,y.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),ft.label=20;case 20:return[2]}})})},n.prototype.renderStackContent=function(o){return KA(this,void 0,void 0,function(){var c,m,le,y,v,le,A,S,le,I,D,le,z,Z,le,O,ce,le,ie,W,le;return _A(this,function(ye){switch(ye.label){case 0:if(Go(o.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(o.element)];case 1:ye.sent(),c=0,m=o.negativeZIndex,ye.label=2;case 2:return c<m.length?(le=m[c],[4,this.renderStack(le)]):[3,5];case 3:ye.sent(),ye.label=4;case 4:return c++,[3,2];case 5:return[4,this.renderNodeContent(o.element)];case 6:ye.sent(),y=0,v=o.nonInlineLevel,ye.label=7;case 7:return y<v.length?(le=v[y],[4,this.renderNode(le)]):[3,10];case 8:ye.sent(),ye.label=9;case 9:return y++,[3,7];case 10:A=0,S=o.nonPositionedFloats,ye.label=11;case 11:return A<S.length?(le=S[A],[4,this.renderStack(le)]):[3,14];case 12:ye.sent(),ye.label=13;case 13:return A++,[3,11];case 14:I=0,D=o.nonPositionedInlineLevel,ye.label=15;case 15:return I<D.length?(le=D[I],[4,this.renderStack(le)]):[3,18];case 16:ye.sent(),ye.label=17;case 17:return I++,[3,15];case 18:z=0,Z=o.inlineLevel,ye.label=19;case 19:return z<Z.length?(le=Z[z],[4,this.renderNode(le)]):[3,22];case 20:ye.sent(),ye.label=21;case 21:return z++,[3,19];case 22:O=0,ce=o.zeroOrAutoZIndexOrTransformedOrOpacity,ye.label=23;case 23:return O<ce.length?(le=ce[O],[4,this.renderStack(le)]):[3,26];case 24:ye.sent(),ye.label=25;case 25:return O++,[3,23];case 26:ie=0,W=o.positiveZIndex,ye.label=27;case 27:return ie<W.length?(le=W[ie],[4,this.renderStack(le)]):[3,30];case 28:ye.sent(),ye.label=29;case 29:return ie++,[3,27];case 30:return[2]}})})},n.prototype.mask=function(o){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(o.slice(0).reverse()),this.ctx.closePath()},n.prototype.path=function(o){this.ctx.beginPath(),this.formatPath(o),this.ctx.closePath()},n.prototype.formatPath=function(o){var c=this;o.forEach(function(m,y){var v=hu(m)?m.start:m;y===0?c.ctx.moveTo(v.x,v.y):c.ctx.lineTo(v.x,v.y),hu(m)&&c.ctx.bezierCurveTo(m.startControl.x,m.startControl.y,m.endControl.x,m.endControl.y,m.end.x,m.end.y)})},n.prototype.renderRepeat=function(o,c,m,y){this.path(o),this.ctx.fillStyle=c,this.ctx.translate(m,y),this.ctx.fill(),this.ctx.translate(-m,-y)},n.prototype.resizeImage=function(o,c,m){var y;if(o.width===c&&o.height===m)return o;var v=(y=this.canvas.ownerDocument)!==null&&y!==void 0?y:document,A=v.createElement("canvas");A.width=Math.max(1,c),A.height=Math.max(1,m);var S=A.getContext("2d");return S.drawImage(o,0,0,o.width,o.height,0,0,c,m),A},n.prototype.renderBackgroundImage=function(o){return KA(this,void 0,void 0,function(){var c,m,y,v,A,S;return _A(this,function(I){switch(I.label){case 0:c=o.styles.backgroundImage.length-1,m=function(D){var z,Z,O,_t,ke,ot,Ye,Ve,Ne,ce,_t,ke,ot,Ye,Ve,ie,W,le,ye,Be,Le,lt,ft,ut,Ne,Ce,_t,_e,Te,Ye,Ve,wt,ke,ot,st,xt,Ct,Fe,oe,xe,Ue,Ge;return _A(this,function(tt){switch(tt.label){case 0:if(D.type!==0)return[3,5];z=void 0,Z=D.url,tt.label=1;case 1:return tt.trys.push([1,3,,4]),[4,y.context.cache.match(Z)];case 2:return z=tt.sent(),[3,4];case 3:return tt.sent(),y.context.logger.error("Error loading background-image "+Z),[3,4];case 4:return z&&(O=wv(o,c,[z.width,z.height,z.width/z.height]),_t=O[0],ke=O[1],ot=O[2],Ye=O[3],Ve=O[4],Ne=y.ctx.createPattern(y.resizeImage(z,Ye,Ve),"repeat"),y.renderRepeat(_t,Ne,ke,ot)),[3,6];case 5:W6(D)?(ce=wv(o,c,[null,null,null]),_t=ce[0],ke=ce[1],ot=ce[2],Ye=ce[3],Ve=ce[4],ie=G6(D.angle,Ye,Ve),W=ie[0],le=ie[1],ye=ie[2],Be=ie[3],Le=ie[4],lt=document.createElement("canvas"),lt.width=Ye,lt.height=Ve,ft=lt.getContext("2d"),ut=ft.createLinearGradient(le,Be,ye,Le),f2(D.stops,W).forEach(function(mt){return ut.addColorStop(mt.stop,pl(mt.color))}),ft.fillStyle=ut,ft.fillRect(0,0,Ye,Ve),Ye>0&&Ve>0&&(Ne=y.ctx.createPattern(lt,"repeat"),y.renderRepeat(_t,Ne,ke,ot))):Y6(D)&&(Ce=wv(o,c,[null,null,null]),_t=Ce[0],_e=Ce[1],Te=Ce[2],Ye=Ce[3],Ve=Ce[4],wt=D.position.length===0?[Px]:D.position,ke=za(wt[0],Ye),ot=za(wt[wt.length-1],Ve),st=q6(D,ke,ot,Ye,Ve),xt=st[0],Ct=st[1],xt>0&&Ct>0&&(Fe=y.ctx.createRadialGradient(_e+ke,Te+ot,0,_e+ke,Te+ot,xt),f2(D.stops,xt*2).forEach(function(mt){return Fe.addColorStop(mt.stop,pl(mt.color))}),y.path(_t),y.ctx.fillStyle=Fe,xt!==Ct?(oe=o.bounds.left+.5*o.bounds.width,xe=o.bounds.top+.5*o.bounds.height,Ue=Ct/xt,Ge=1/Ue,y.ctx.save(),y.ctx.translate(oe,xe),y.ctx.transform(1,0,0,Ue,0,0),y.ctx.translate(-oe,-xe),y.ctx.fillRect(_e,Ge*(Te-xe)+xe,Ye,Ve*Ge),y.ctx.restore()):y.ctx.fill())),tt.label=6;case 6:return c--,[2]}})},y=this,v=0,A=o.styles.backgroundImage.slice(0).reverse(),I.label=1;case 1:return v<A.length?(S=A[v],[5,m(S)]):[3,4];case 2:I.sent(),I.label=3;case 3:return v++,[3,1];case 4:return[2]}})})},n.prototype.renderSolidBorder=function(o,c,m){return KA(this,void 0,void 0,function(){return _A(this,function(y){return this.path(V2(m,c)),this.ctx.fillStyle=pl(o),this.ctx.fill(),[2]})})},n.prototype.renderDoubleBorder=function(o,c,m,y){return KA(this,void 0,void 0,function(){var v,A;return _A(this,function(S){switch(S.label){case 0:return c<3?[4,this.renderSolidBorder(o,m,y)]:[3,2];case 1:return S.sent(),[2];case 2:return v=eR(y,m),this.path(v),this.ctx.fillStyle=pl(o),this.ctx.fill(),A=tR(y,m),this.path(A),this.ctx.fill(),[2]}})})},n.prototype.renderNodeBackgroundAndBorders=function(o){return KA(this,void 0,void 0,function(){var c,m,y,v,A,S,I,D,z=this;return _A(this,function(Z){switch(Z.label){case 0:return this.applyEffects(o.getEffects(2)),c=o.container.styles,m=!ed(c.backgroundColor)||c.backgroundImage.length,y=[{style:c.borderTopStyle,color:c.borderTopColor,width:c.borderTopWidth},{style:c.borderRightStyle,color:c.borderRightColor,width:c.borderRightWidth},{style:c.borderBottomStyle,color:c.borderBottomColor,width:c.borderBottomWidth},{style:c.borderLeftStyle,color:c.borderLeftColor,width:c.borderLeftWidth}],v=hR(sm(c.backgroundClip,0),o.curves),m||c.boxShadow.length?(this.ctx.save(),this.path(v),this.ctx.clip(),ed(c.backgroundColor)||(this.ctx.fillStyle=pl(c.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(o.container)]):[3,2];case 1:Z.sent(),this.ctx.restore(),c.boxShadow.slice(0).reverse().forEach(function(O){z.ctx.save();var ce=P_(o.curves),ie=O.inset?0:AR,W=$N(ce,-ie+(O.inset?1:-1)*O.spread.number,(O.inset?1:-1)*O.spread.number,O.spread.number*(O.inset?-2:2),O.spread.number*(O.inset?-2:2));O.inset?(z.path(ce),z.ctx.clip(),z.mask(W)):(z.mask(ce),z.ctx.clip(),z.path(W)),z.ctx.shadowOffsetX=O.offsetX.number+ie,z.ctx.shadowOffsetY=O.offsetY.number,z.ctx.shadowColor=pl(O.color),z.ctx.shadowBlur=O.blur.number,z.ctx.fillStyle=O.inset?pl(O.color):"rgba(0,0,0,1)",z.ctx.fill(),z.ctx.restore()}),Z.label=2;case 2:A=0,S=0,I=y,Z.label=3;case 3:return S<I.length?(D=I[S],D.style!==0&&!ed(D.color)&&D.width>0?D.style!==2?[3,5]:[4,this.renderDashedDottedBorder(D.color,D.width,A,o.curves,2)]:[3,11]):[3,13];case 4:return Z.sent(),[3,11];case 5:return D.style!==3?[3,7]:[4,this.renderDashedDottedBorder(D.color,D.width,A,o.curves,3)];case 6:return Z.sent(),[3,11];case 7:return D.style!==4?[3,9]:[4,this.renderDoubleBorder(D.color,D.width,A,o.curves)];case 8:return Z.sent(),[3,11];case 9:return[4,this.renderSolidBorder(D.color,A,o.curves)];case 10:Z.sent(),Z.label=11;case 11:A++,Z.label=12;case 12:return S++,[3,3];case 13:return[2]}})})},n.prototype.renderDashedDottedBorder=function(o,c,m,y,v){return KA(this,void 0,void 0,function(){var A,S,I,D,z,Z,O,ce,ie,W,le,ye,Be,Le,lt,ft,lt,ft;return _A(this,function(ut){return this.ctx.save(),A=rR(y,m),S=V2(y,m),v===2&&(this.path(S),this.ctx.clip()),hu(S[0])?(I=S[0].start.x,D=S[0].start.y):(I=S[0].x,D=S[0].y),hu(S[1])?(z=S[1].end.x,Z=S[1].end.y):(z=S[1].x,Z=S[1].y),m===0||m===2?O=Math.abs(I-z):O=Math.abs(D-Z),this.ctx.beginPath(),v===3?this.formatPath(A):this.formatPath(S.slice(0,2)),ce=c<3?c*3:c*2,ie=c<3?c*2:c,v===3&&(ce=c,ie=c),W=!0,O<=ce*2?W=!1:O<=ce*2+ie?(le=O/(2*ce+ie),ce*=le,ie*=le):(ye=Math.floor((O+ie)/(ce+ie)),Be=(O-ye*ce)/(ye-1),Le=(O-(ye+1)*ce)/ye,ie=Le<=0||Math.abs(ie-Be)<Math.abs(ie-Le)?Be:Le),W&&(v===3?this.ctx.setLineDash([0,ce+ie]):this.ctx.setLineDash([ce,ie])),v===3?(this.ctx.lineCap="round",this.ctx.lineWidth=c):this.ctx.lineWidth=c*2+1.1,this.ctx.strokeStyle=pl(o),this.ctx.stroke(),this.ctx.setLineDash([]),v===2&&(hu(S[0])&&(lt=S[3],ft=S[0],this.ctx.beginPath(),this.formatPath([new Nr(lt.end.x,lt.end.y),new Nr(ft.start.x,ft.start.y)]),this.ctx.stroke()),hu(S[1])&&(lt=S[1],ft=S[2],this.ctx.beginPath(),this.formatPath([new Nr(lt.end.x,lt.end.y),new Nr(ft.start.x,ft.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},n.prototype.render=function(o){return KA(this,void 0,void 0,function(){var c;return _A(this,function(m){switch(m.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=pl(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),c=JN(o),[4,this.renderStack(c)];case 1:return m.sent(),this.applyEffects([]),[2,this.canvas]}})})},n})(aS),uR=function(i){return i instanceof jC||i instanceof zC?!0:i instanceof kx&&i.type!==M_&&i.type!==L_},hR=function(i,n){switch(i){case 0:return P_(n);case 2:return KN(n);default:return N_(n)}},fR=function(i){switch(i){case 1:return"center";case 2:return"right";default:return"left"}},dR=["-apple-system","system-ui"],pR=function(i){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?i.filter(function(n){return dR.indexOf(n)===-1}):i},mR=(function(i){Xu(n,i);function n(o,c){var m=i.call(this,o,c)||this;return m.canvas=c.canvas?c.canvas:document.createElement("canvas"),m.ctx=m.canvas.getContext("2d"),m.options=c,m.canvas.width=Math.floor(c.width*c.scale),m.canvas.height=Math.floor(c.height*c.scale),m.canvas.style.width=c.width+"px",m.canvas.style.height=c.height+"px",m.ctx.scale(m.options.scale,m.options.scale),m.ctx.translate(-c.x,-c.y),m.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+c.width+"x"+c.height+" at "+c.x+","+c.y+") with scale "+c.scale),m}return n.prototype.render=function(o){return KA(this,void 0,void 0,function(){var c,m;return _A(this,function(y){switch(y.label){case 0:return c=ax(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,o),[4,gR(c)];case 1:return m=y.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=pl(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(m,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},n})(aS),gR=function(i){return new Promise(function(n,o){var c=new Image;c.onload=function(){n(c)},c.onerror=o,c.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(i))})},yR=(function(){function i(n){var o=n.id,c=n.enabled;this.id=o,this.enabled=c,this.start=Date.now()}return i.prototype.debug=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Ly([this.id,this.getTime()+"ms"],n)):this.info.apply(this,n))},i.prototype.getTime=function(){return Date.now()-this.start},i.prototype.info=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Ly([this.id,this.getTime()+"ms"],n))},i.prototype.warn=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Ly([this.id,this.getTime()+"ms"],n)):this.info.apply(this,n))},i.prototype.error=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Ly([this.id,this.getTime()+"ms"],n)):this.info.apply(this,n))},i.instances={},i})(),_R=(function(){function i(n,o){var c;this.windowBounds=o,this.instanceName="#"+i.instanceCount++,this.logger=new yR({id:this.instanceName,enabled:n.logging}),this.cache=(c=n.cache)!==null&&c!==void 0?c:new kN(this,n)}return i.instanceCount=1,i})(),sS=function(i,n){return n===void 0&&(n={}),vR(i,n)};typeof window<"u"&&JC.setContext(window);var vR=function(i,n){return KA(void 0,void 0,void 0,function(){var o,c,m,y,v,A,S,I,D,z,Z,O,ce,ie,W,le,ye,Be,Le,lt,ut,ft,ut,Ne,Ce,_t,_e,Te,Ye,Ve,wt,ke,ot,st,xt,Ct,Fe,oe,xe,Ue;return _A(this,function(Ge){switch(Ge.label){case 0:if(!i||typeof i!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(o=i.ownerDocument,!o)throw new Error("Element is not attached to a Document");if(c=o.defaultView,!c)throw new Error("Document is not attached to a Window");return m={allowTaint:(Ne=n.allowTaint)!==null&&Ne!==void 0?Ne:!1,imageTimeout:(Ce=n.imageTimeout)!==null&&Ce!==void 0?Ce:15e3,proxy:n.proxy,useCORS:(_t=n.useCORS)!==null&&_t!==void 0?_t:!1},y=Vv({logging:(_e=n.logging)!==null&&_e!==void 0?_e:!0,cache:n.cache},m),v={windowWidth:(Te=n.windowWidth)!==null&&Te!==void 0?Te:c.innerWidth,windowHeight:(Ye=n.windowHeight)!==null&&Ye!==void 0?Ye:c.innerHeight,scrollX:(Ve=n.scrollX)!==null&&Ve!==void 0?Ve:c.pageXOffset,scrollY:(wt=n.scrollY)!==null&&wt!==void 0?wt:c.pageYOffset},A=new lf(v.scrollX,v.scrollY,v.windowWidth,v.windowHeight),S=new _R(y,A),I=(ke=n.foreignObjectRendering)!==null&&ke!==void 0?ke:!1,D={allowTaint:(ot=n.allowTaint)!==null&&ot!==void 0?ot:!1,onclone:n.onclone,ignoreElements:n.ignoreElements,inlineImages:I,copyStyles:I},S.logger.debug("Starting document clone with size "+A.width+"x"+A.height+" scrolled to "+-A.left+","+-A.top),z=new z2(S,i,D),Z=z.clonedReferenceElement,Z?[4,z.toIFrame(o,A)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return O=Ge.sent(),ce=Ox(Z)||bN(Z)?$M(Z.ownerDocument):V_(S,Z),ie=ce.width,W=ce.height,le=ce.left,ye=ce.top,Be=xR(S,Z,n.backgroundColor),Le={canvas:n.canvas,backgroundColor:Be,scale:(xt=(st=n.scale)!==null&&st!==void 0?st:c.devicePixelRatio)!==null&&xt!==void 0?xt:1,x:((Ct=n.x)!==null&&Ct!==void 0?Ct:0)+le,y:((Fe=n.y)!==null&&Fe!==void 0?Fe:0)+ye,width:(oe=n.width)!==null&&oe!==void 0?oe:Math.ceil(ie),height:(xe=n.height)!==null&&xe!==void 0?xe:Math.ceil(W)},I?(S.logger.debug("Document cloned, using foreign object rendering"),ut=new mR(S,Le),[4,ut.render(Z)]):[3,3];case 2:return lt=Ge.sent(),[3,5];case 3:return S.logger.debug("Document cloned, element located at "+le+","+ye+" with size "+ie+"x"+W+" using computed rendering"),S.logger.debug("Starting DOM parsing"),ft=GC(S,Z),Be===ft.styles.backgroundColor&&(ft.styles.backgroundColor=sf.TRANSPARENT),S.logger.debug("Starting renderer for element at "+Le.x+","+Le.y+" with size "+Le.width+"x"+Le.height),ut=new cR(S,Le),[4,ut.render(ft)];case 4:lt=Ge.sent(),Ge.label=5;case 5:return(!((Ue=n.removeContainer)!==null&&Ue!==void 0)||Ue)&&(z2.destroy(O)||S.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),S.logger.debug("Finished rendering"),[2,lt]}})})},xR=function(i,n,o){var c=n.ownerDocument,m=c.documentElement?qg(i,getComputedStyle(c.documentElement).backgroundColor):sf.TRANSPARENT,y=c.body?qg(i,getComputedStyle(c.body).backgroundColor):sf.TRANSPARENT,v=typeof o=="string"?qg(i,o):o===null?sf.TRANSPARENT:4294967295;return n===c.documentElement?ed(m)?ed(y)?v:y:m:v};const bR=Object.freeze(Object.defineProperty({__proto__:null,default:sS},Symbol.toStringTag,{value:"Module"}));async function wR(i,n){const o=document.getElementById(i);if(!o)throw new Error(`Element #${i} not found`);const c=await sS(o,{scale:2,useCORS:!0,allowTaint:!1,backgroundColor:"#ffffff",logging:!1}),m=c.toDataURL("image/png"),y=new hn({orientation:"portrait",unit:"mm",format:"a4"}),v=y.internal.pageSize.getWidth(),A=y.internal.pageSize.getHeight(),S=v,I=c.height*v/c.width;let D=I,z=0;for(y.addImage(m,"PNG",0,z,S,I),D-=A;D>0;)z=D-I,y.addPage(),y.addImage(m,"PNG",0,z,S,I),D-=A;y.save(n)}function BR(i){const n=i.metadata.date_realisation.toISOString().split("T")[0];return`ERP-${i.bien.commune.toLowerCase().replace(/\s+/g,"-")}-${n}-${i.metadata.reference.slice(0,8)}.pdf`}function CR(){window.print()}function Bv(i){return new Date(i).toLocaleDateString("fr-FR",{day:"2-digit",month:"long",year:"numeric"})}function zx({document:i,onNew:n,demoMode:o=!1}){const[c,m]=We.useState(!1),y=QB(i.risques,i.catnat),v=y.filter(I=>I.expose).length,A=y.length;async function S(){m(!0);try{await wR("erp-document-preview",BR(i))}finally{m(!1)}}return j.jsxs("div",{className:"space-y-4",children:[j.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-start sm:items-center justify-between no-print",children:[j.jsxs("div",{className:"flex flex-col gap-2",children:[j.jsxs("div",{className:"flex items-center gap-2 text-green-700 bg-green-50 border border-green-200 rounded-lg px-4 py-2",children:[j.jsx(kd,{className:"h-4 w-4"}),j.jsx("span",{className:"text-sm font-medium",children:"ERP gnr avec succs"})]}),j.jsx("div",{className:"flex items-start gap-2 text-amber-800 bg-amber-50 border border-amber-200 rounded-lg px-4 py-2 no-print",children:j.jsxs("span",{className:"text-sm",children:[" ",j.jsx("strong",{children:"Ce document doit tre dat, sign et paraph par le vendeur ou bailleur"})," avant annexion au contrat (art. L125-5 C. Env.)."]})})]}),j.jsxs("div",{className:"flex flex-wrap gap-2",children:[j.jsxs(_a,{variant:"outline",size:"sm",onClick:CR,children:[j.jsx(s3,{className:"h-4 w-4 mr-1"}),"Imprimer"]}),j.jsxs(_a,{size:"sm",className:"bg-edl-700 hover:bg-edl-800",onClick:S,disabled:c,children:[j.jsx(D4,{className:"h-4 w-4 mr-1"}),c?"Gnration...":"Tlcharger PDF"]}),n&&j.jsx(_a,{variant:"outline",size:"sm",onClick:n,children:"Nouvel ERP"})]})]}),j.jsxs("div",{id:"erp-document-preview",className:"erp-document bg-white border border-border rounded-lg overflow-hidden",children:[j.jsxs("div",{className:"bg-navy-900 text-white px-4 py-4 sm:px-8 sm:py-6",children:[j.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-3",children:[j.jsxs("div",{children:[j.jsx("p",{className:"text-xs uppercase tracking-widest text-navy-200 mb-1",children:"Ministre de la Transition cologique"}),j.jsx("h1",{className:"text-xl font-bold",children:"TAT DES RISQUES ET POLLUTIONS"}),j.jsx("p",{className:"text-sm text-navy-200 mt-1",children:"Conformment  l'arrt du 27 septembre 2022"})]}),j.jsxs("div",{className:"sm:text-right",children:[j.jsx("p",{className:"text-xs text-navy-300",children:"Rfrence"}),j.jsx("p",{className:"font-mono text-sm font-semibold",children:Jg(i.metadata.reference)})]})]}),j.jsxs("div",{className:"mt-4 bg-white/10 rounded-lg px-4 py-2 flex items-center gap-3",children:[j.jsx(xx,{className:"h-4 w-4 text-yellow-300"}),j.jsxs("div",{className:"text-sm",children:[j.jsx("span",{className:"text-white font-medium",children:"Validit 6 mois  "}),j.jsxs("span",{className:"text-navy-200",children:["tabli le ",Bv(i.metadata.date_realisation),"  Expire le ",Bv(i.metadata.validite_jusqu_au)]})]})]})]}),j.jsxs("div",{className:"p-4 sm:p-8 space-y-6 sm:space-y-8",children:[j.jsxs("section",{children:[j.jsx("h2",{className:"text-base font-bold text-navy-900 uppercase tracking-wide border-b-2 border-navy-900 pb-2 mb-4",children:"Section I  Identification du bien"}),j.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[j.jsxs("div",{className:"space-y-3",children:[j.jsxs("div",{className:"flex items-start gap-2",children:[j.jsx(bx,{className:"h-4 w-4 text-navy-700 mt-0.5 shrink-0"}),j.jsxs("div",{children:[j.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Adresse du bien"}),j.jsx("p",{className:"text-sm font-semibold text-gray-900",children:i.bien.adresse_complete}),j.jsxs("p",{className:"text-sm text-gray-700",children:[i.bien.code_postal," ",i.bien.commune]})]})]}),j.jsxs("div",{className:"flex items-start gap-2",children:[j.jsx(pB,{className:"h-4 w-4 text-navy-700 mt-0.5 shrink-0"}),j.jsxs("div",{children:[j.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Rfrences cadastrales"}),j.jsxs("div",{className:`flex gap-2 mt-1 ${o?"blur-sm select-none pointer-events-none":""}`,children:[j.jsxs(qo,{variant:"outline",className:"font-mono",children:["Section ",i.bien.references_cadastrales.section||"N/R"]}),j.jsxs(qo,{variant:"outline",className:"font-mono",children:["N ",i.bien.references_cadastrales.numero||"N/R"]})]})]})]})]}),j.jsxs("div",{className:"space-y-2 text-sm",children:[j.jsxs("div",{className:"flex justify-between py-1 border-b border-dashed border-border",children:[j.jsx("span",{className:"text-gray-500",children:"Code INSEE"}),j.jsx("span",{className:"font-mono font-medium",children:i.bien.code_insee})]}),j.jsxs("div",{className:"flex justify-between py-1 border-b border-dashed border-border",children:[j.jsx("span",{className:"text-gray-500",children:"Latitude"}),j.jsx("span",{className:`font-mono ${o?"blur-sm select-none":""}`,children:i.bien.coordonnees.lat.toFixed(6)})]}),j.jsxs("div",{className:"flex justify-between py-1 border-b border-dashed border-border",children:[j.jsx("span",{className:"text-gray-500",children:"Longitude"}),j.jsx("span",{className:`font-mono ${o?"blur-sm select-none":""}`,children:i.bien.coordonnees.lng.toFixed(6)})]}),j.jsxs("div",{className:"flex justify-between py-1 border-b border-dashed border-border",children:[j.jsx("span",{className:"text-gray-500",children:"Version rglementaire"}),j.jsx("span",{className:"text-xs",children:"Arrt 27/09/2022"})]})]})]})]}),j.jsxs("section",{children:[j.jsxs("div",{className:"flex items-center justify-between border-b-2 border-navy-900 pb-2 mb-4",children:[j.jsx("h2",{className:"text-base font-bold text-navy-900 uppercase tracking-wide",children:"Section II  Synthse des risques"}),j.jsxs(qo,{variant:v===0?"success":v>3?"danger":"warning",className:"text-xs",children:[v,"/",A," risques dtects"]})]}),j.jsxs(rI,{defaultValue:"tableau",className:"no-print",children:[j.jsxs(u5,{className:"mb-4 h-auto flex-wrap w-full justify-start gap-1",children:[j.jsx(i_,{value:"tableau",children:"Tableau de synthse"}),j.jsxs(i_,{value:"catnat",children:["CatNat (",i.catnat.length,")"]}),j.jsxs(i_,{value:"prescriptions",children:["Prescriptions (",i.prescriptions.length,")"]})]}),j.jsx(a_,{value:"tableau",children:j.jsx(Fv,{items:y})}),j.jsx(a_,{value:"catnat",children:j.jsx(nI,{arretes:i.catnat})}),j.jsx(a_,{value:"prescriptions",children:j.jsx(aI,{prescriptions:i.prescriptions})})]}),j.jsx("div",{className:"print-only hidden",children:j.jsx(Fv,{items:y})})]}),j.jsxs("section",{children:[j.jsx("h2",{className:"text-base font-bold text-navy-900 uppercase tracking-wide border-b-2 border-navy-900 pb-2 mb-4",children:"Section III  Dclaration des sinistres indemniss"}),j.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 border border-dashed border-slate-300",children:[j.jsx("p",{className:"text-sm text-gray-700 mb-4",children:" complter par le vendeur/bailleur : Avez-vous connaissance de sinistres indemniss au titre des catastrophes naturelles ou technologiques pour ce bien ?"}),j.jsxs("div",{className:"space-y-2",children:[j.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[j.jsx("input",{type:"radio",name:"sinistres",value:"non",className:"h-4 w-4",defaultChecked:!0}),j.jsx("span",{className:"text-sm",children:" ma connaissance, ce bien n'a pas subi de sinistre ayant donn lieu  indemnisation."})]}),j.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[j.jsx("input",{type:"radio",name:"sinistres",value:"oui",className:"h-4 w-4"}),j.jsx("span",{className:"text-sm",children:"Des sinistres ont t dclars (dtailler ci-dessous)"})]})]}),j.jsx("div",{className:"mt-3 h-16 border border-dashed border-gray-300 rounded bg-white"})]})]}),j.jsxs("section",{className:"relative",children:[j.jsx("h2",{className:"text-base font-bold text-navy-900 uppercase tracking-wide border-b-2 border-navy-900 pb-2 mb-4",children:"Section V  Dclaration et signature"}),o&&j.jsx("div",{className:"absolute inset-0 top-10 bg-white/80 backdrop-blur-sm rounded-lg flex items-center justify-center z-10 border border-dashed border-gray-300",children:j.jsx("p",{className:"text-sm text-gray-500 font-medium italic",children:"Section complte et signe par le vendeur / bailleur"})}),j.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:["Je soussign(e) certifie avoir complt le prsent formulaire en tenant compte des informations disponibles sur ",j.jsx("strong",{children:"www.georisques.gouv.fr"})," et des informations communales disponibles  la date d'tablissement."]}),j.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[j.jsxs("div",{className:"space-y-3",children:[j.jsxs("div",{children:[j.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Nom / Prnom"}),j.jsx("div",{className:"h-8 border-b border-gray-400"})]}),j.jsxs("div",{children:[j.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Qualit"}),j.jsx("div",{className:"h-8 border-b border-gray-400"})]})]}),j.jsxs("div",{className:"space-y-3",children:[j.jsxs("div",{children:[j.jsxs("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:["Fait   le ",Bv(i.metadata.date_realisation)]}),j.jsx("div",{className:"h-8 border-b border-gray-400"})]}),j.jsxs("div",{children:[j.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Signature"}),j.jsx("div",{className:"h-16 border border-dashed border-gray-300 rounded"})]})]})]})]}),j.jsx(Sx,{}),j.jsxs("footer",{className:"text-xs text-gray-500 space-y-2",children:[j.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 text-amber-900",children:[j.jsx("p",{className:"font-semibold mb-1",children:"Responsabilit du vendeur / bailleur"}),j.jsxs("p",{children:["Ce document constitue une aide  la rdaction de l'tat des Risques et Pollutions (ERP). Il incombe au vendeur ou bailleur de vrifier les informations, de complter les sections manquantes (sinistres dclars, section V), de ",j.jsx("strong",{children:"dater, parapher et signer"})," le prsent formulaire avant de l'annexer au compromis de vente ou au contrat de bail, conformment  l'article L125-5 du Code de l'Environnement."]})]}),j.jsxs("div",{className:"text-center text-gray-400 space-y-0.5 pt-1",children:[j.jsx("p",{children:"Document gnr via EDL&DIAGNOSTIC ERP  Source officielle : georisques.gouv.fr"}),j.jsxs("p",{children:["Rfrence : ",Jg(i.metadata.reference),"  Conforme  l'arrt du 27 septembre 2022"]}),j.jsx("p",{children:"Donnes issues de Gorisques, BRGM, BAN et IGN  Valable 6 mois  compter de la date d'tablissement"})]})]})]})]})]})}async function SR(i,n){const o=await fetch("/api/send-erp-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,erpDocument:n})});if(!o.ok){const c=await o.json().catch(()=>({}));throw new Error(c.error||"Erreur lors de l'envoi de l'email")}}async function ER(i){const n=await fetch(`/api/get-erp-document?ref=${encodeURIComponent(i)}`);if(n.status===404)return null;if(!n.ok)throw new Error("Impossible de rcuprer le document ERP");return n.json()}function TR(){const i=cf(),[n]=i4(),[o,c]=We.useState(null),[m,y]=We.useState(!0),[v,A]=We.useState(""),[S,I]=We.useState(!1),[D,z]=We.useState(!1),[Z,O]=We.useState(null),ce=n.get("payment")==="success",ie=n.get("ref");We.useEffect(()=>{async function le(){const ye=Cx();if(ye.length>0){c(ye[0]),y(!1);return}if(ie)try{const Be=await ER(ie);if(Be){c(Be),y(!1);return}}catch{}y(!1)}le()},[ie]);async function W(le){if(le.preventDefault(),!(!o||!v)){O(null),I(!0);try{await SR(v,o),z(!0)}catch(ye){O(ye instanceof Error?ye.message:"Erreur lors de l'envoi")}finally{I(!1)}}}return m?j.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:j.jsx(Yg,{className:"h-8 w-8 animate-spin text-edl-700"})}):o?j.jsxs("div",{className:"min-h-screen bg-slate-50 overflow-x-hidden",children:[j.jsx("header",{className:"bg-white border-b border-border sticky top-0 z-40 no-print",children:j.jsxs("div",{className:"max-w-5xl mx-auto px-4 h-14 flex items-center justify-between",children:[j.jsxs("button",{onClick:()=>i("/generer"),className:"flex items-center gap-2 text-sm text-gray-600 hover:text-navy-900 transition-colors",children:[j.jsx(Rd,{className:"h-4 w-4"}),"Retour"]}),j.jsx("span",{className:"font-bold text-navy-900",children:"EDL&DIAGNOSTIC  Aperu ERP"}),j.jsx("div",{className:"w-16"})]})}),j.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8 space-y-6",children:[ce&&j.jsxs("div",{className:"flex items-start gap-4 bg-green-50 border border-green-200 rounded-xl p-5 no-print",children:[j.jsx("div",{className:"bg-green-100 rounded-full p-2 shrink-0",children:j.jsx(r3,{className:"h-6 w-6 text-green-700"})}),j.jsxs("div",{className:"flex-1",children:[j.jsx("p",{className:"font-bold text-green-900 text-base",children:"Paiement confirm  votre ERP est prt !"}),j.jsxs("p",{className:"text-sm text-green-800 mt-1",children:["Tlchargez votre document ci-dessous ou recevez-le par email.",ie&&j.jsxs("span",{className:"block text-xs text-green-600 mt-0.5 font-mono",children:["Rf. paiement : ",ie]})]}),j.jsxs("div",{className:"mt-4 border-t border-green-200 pt-4",children:[D?j.jsxs("div",{className:"flex items-center gap-2 text-green-700",children:[j.jsx(kd,{className:"h-4 w-4 shrink-0"}),j.jsxs("p",{className:"text-sm font-medium",children:["Email envoy  ",j.jsx("strong",{children:v}),"  conservez-le pour re-tlcharger votre ERP."]})]}):j.jsxs("form",{onSubmit:W,className:"flex flex-col sm:flex-row gap-2",children:[j.jsxs("div",{className:"flex-1 flex items-center gap-2 bg-white border border-green-200 rounded-lg px-3 py-2",children:[j.jsx(_b,{className:"h-4 w-4 text-green-600 shrink-0"}),j.jsx("input",{type:"email",required:!0,placeholder:"Entrez votre email pour recevoir le document",value:v,onChange:le=>A(le.target.value),className:"flex-1 text-sm outline-none bg-transparent placeholder-gray-400"})]}),j.jsx(_a,{type:"submit",disabled:S||!v,className:"bg-green-700 hover:bg-green-800 text-white font-semibold shrink-0",size:"sm",children:S?j.jsxs(j.Fragment,{children:[j.jsx(Yg,{className:"h-3.5 w-3.5 animate-spin mr-1"})," Envoi"]}):j.jsxs(j.Fragment,{children:[j.jsx(_b,{className:"h-3.5 w-3.5 mr-1"})," Recevoir par email"]})})]}),Z&&j.jsx("p",{className:"text-xs text-red-600 mt-2",children:Z}),j.jsx("p",{className:"text-xs text-green-600 mt-2",children:" Votre email permettra de retrouver ce document depuis n'importe quel appareil."})]})]}),j.jsx(kd,{className:"h-5 w-5 text-green-600 shrink-0 mt-0.5"})]}),j.jsx(zx,{document:o,onNew:()=>i("/generer")})]})]}):j.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:j.jsxs("div",{className:"text-center space-y-4",children:[j.jsx(g_,{className:"h-12 w-12 text-gray-400 mx-auto"}),j.jsx("p",{className:"text-gray-600",children:"Aucun ERP trouv."}),j.jsx(_a,{className:"bg-edl-700 hover:bg-edl-800",onClick:()=>i("/generer"),children:"Gnrer un ERP"})]})})}function q2(i){return new Date(i).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})}const FR={edition:"Self-service",commande:"Expert",expert:"Pack Expert"};function IR({history:i,onView:n}){return i.length===0?j.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center text-muted-foreground",children:[j.jsx(y_,{className:"h-10 w-10 mb-3"}),j.jsx("p",{className:"text-sm font-medium",children:"Aucun ERP gnr"}),j.jsx("p",{className:"text-xs mt-1",children:"Vos ERP apparatront ici aprs leur gnration."})]}):j.jsx("div",{className:"space-y-3",children:i.map((o,c)=>{const m=Iv(o),y=!m&&kB(o);return j.jsx(gl,{className:"hover:shadow-md transition-shadow",children:j.jsx(yl,{className:"p-4",children:j.jsxs("div",{className:"flex items-start gap-4",children:[j.jsx("div",{className:"bg-edl-50 rounded-lg p-2 shrink-0",children:j.jsx(y_,{className:"h-5 w-5 text-edl-700"})}),j.jsxs("div",{className:"flex-1 min-w-0",children:[j.jsxs("div",{className:"flex items-start justify-between gap-2 flex-wrap",children:[j.jsxs("div",{children:[j.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:o.bien.adresse_complete}),j.jsxs("p",{className:"text-xs text-gray-500",children:[o.bien.code_postal," ",o.bien.commune]})]}),j.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[j.jsx(qo,{variant:"secondary",className:"text-xs",children:FR[o.metadata.mode]??o.metadata.mode}),m?j.jsx(qo,{variant:"danger",className:"text-xs",children:"Expir"}):y?j.jsx(qo,{variant:"warning",className:"text-xs",children:"Expire bientt"}):j.jsx(qo,{variant:"success",className:"text-xs",children:"Valide"})]})]}),j.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[j.jsx("span",{className:"font-mono",children:Jg(o.metadata.reference)}),j.jsxs("span",{className:"flex items-center gap-1",children:[j.jsx(xx,{className:"h-3 w-3"}),q2(o.metadata.date_realisation)]}),!m&&j.jsxs("span",{children:["Expire le ",q2(o.metadata.validite_jusqu_au)]})]})]}),j.jsx("div",{className:"flex gap-2 shrink-0",children:n&&j.jsxs(_a,{size:"sm",variant:"outline",onClick:()=>n(o),children:[j.jsx(N4,{className:"h-3.5 w-3.5 mr-1"}),"Voir"]})})]})})},o.metadata.reference??c)})})}function LR({history:i}){const n=cf(),o=i.filter(c=>Iv(c)||kB(c));return o.length===0?null:j.jsx(gl,{className:"border-orange-200 bg-orange-50",children:j.jsxs(yl,{className:"pt-4",children:[j.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[j.jsx(y4,{className:"h-4 w-4 text-orange-600"}),j.jsxs("h3",{className:"text-sm font-semibold text-orange-900",children:[o.length," ERP  renouveler"]})]}),j.jsx("div",{className:"space-y-2",children:o.map(c=>{const m=Iv(c);return j.jsxs("div",{className:"flex items-center justify-between bg-white rounded-md px-3 py-2 border border-orange-100",children:[j.jsxs("div",{className:"flex items-center gap-2",children:[j.jsx($g,{className:`h-4 w-4 ${m?"text-red-500":"text-orange-500"}`}),j.jsxs("div",{children:[j.jsxs("p",{className:"text-xs font-medium text-gray-800 truncate max-w-[140px] sm:max-w-[200px]",children:[c.bien.commune,"  ",Jg(c.metadata.reference)]}),j.jsx(qo,{variant:m?"danger":"warning",className:"text-xs mt-0.5",children:m?"Expir":"Expire dans < 30 jours"})]})]}),j.jsxs(_a,{size:"sm",variant:"outline",className:"text-xs h-7 border-orange-300 text-orange-700 hover:bg-orange-50",onClick:()=>n("/generer"),children:[j.jsx(l3,{className:"h-3 w-3 mr-1"}),"Renouveler"]})]},c.metadata.reference)})})]})})}function MR(){const i=cf(),[n,o]=We.useState([]),[c,m]=We.useState(null);We.useEffect(()=>{o(Cx())},[]);function y(A){m(A),window.scrollTo({top:0,behavior:"smooth"})}const v=n.filter(A=>new Date(A.metadata.validite_jusqu_au)>new Date).length;return j.jsxs("div",{className:"min-h-screen bg-slate-50 overflow-x-hidden",children:[j.jsx("header",{className:"bg-white border-b border-border sticky top-0 z-40",children:j.jsxs("div",{className:"max-w-5xl mx-auto px-4 h-14 flex items-center justify-between",children:[j.jsxs("button",{onClick:()=>i("/"),className:"flex items-center gap-2 text-sm text-gray-600 hover:text-navy-900 transition-colors",children:[j.jsx(Rd,{className:"h-4 w-4"}),"Accueil"]}),j.jsxs("div",{className:"flex items-center gap-2",children:[j.jsx(K4,{className:"h-4 w-4 text-navy-700"}),j.jsx("span",{className:"font-bold text-navy-900",children:"Mes documents ERP"})]}),j.jsxs(_a,{size:"sm",className:"bg-edl-700 hover:bg-edl-800",onClick:()=>i("/generer"),children:[j.jsx(T4,{className:"h-4 w-4 mr-1"}),"Nouvel ERP"]})]})}),j.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-8 space-y-6",children:[j.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4",children:[j.jsxs("div",{className:"bg-white rounded-lg border border-border p-3 sm:p-5",children:[j.jsx("p",{className:"text-xl sm:text-2xl font-bold text-navy-900",children:n.length}),j.jsx("p",{className:"text-xs text-gray-500 mt-0.5 leading-tight",children:"ERP gnrs"})]}),j.jsxs("div",{className:"bg-white rounded-lg border border-border p-3 sm:p-5",children:[j.jsx("p",{className:"text-xl sm:text-2xl font-bold text-green-700",children:v}),j.jsx("p",{className:"text-xs text-gray-500 mt-0.5 leading-tight",children:"ERP valides"})]}),j.jsxs("div",{className:"bg-white rounded-lg border border-border p-3 sm:p-5",children:[j.jsx("p",{className:"text-xl sm:text-2xl font-bold text-orange-600",children:n.length-v}),j.jsx("p",{className:"text-xs text-gray-500 mt-0.5 leading-tight",children:"ERP expirs"})]})]}),j.jsx(LR,{history:n}),c&&j.jsxs("div",{children:[j.jsxs("div",{className:"flex items-center justify-between mb-4",children:[j.jsx("h2",{className:"text-base font-semibold text-gray-900",children:"ERP slectionn"}),j.jsx(_a,{variant:"ghost",size:"sm",onClick:()=>m(null),children:"Fermer"})]}),j.jsx(zx,{document:c}),j.jsx(Sx,{className:"my-6"})]}),j.jsxs(gl,{children:[j.jsx(om,{children:j.jsx(lm,{className:"text-base",children:"Historique des ERP"})}),j.jsx(yl,{children:j.jsx(IR,{history:n,onView:y})})]})]})]})}const UR={metadata:{reference:"demo-0000-0000-0000-000000000001",date_realisation:new Date("2024-02-15"),validite_jusqu_au:new Date("2024-08-15"),version_reglementaire:"arrete_27092022",mode:"edition"},bien:{adresse_complete:"15 Avenue Jean Mdecin, 06000 Nice",code_insee:"06088",code_postal:"06000",commune:"Nice",references_cadastrales:{section:"BW",numero:"0124",departement:"06",feuille:"000BW01"},coordonnees:{lat:43.704233,lng:7.266891}},risques:{ppr_naturels:[{exists:!0,nom:"PPR Inondation Valle du Var",type_risque:"Inondation",etat:"APPROUVE",zone:"Ri2  Zone de risque inondation modre",prescriptions:!0}],ppr_technologiques:[],ppr_miniers:[],zonage_sismique:{niveau:3,libelle:"Modr (zone 3)"},radon:{zone:2,libelle:"Potentiel radon significatif (catgorie 2)"},sis:{expose:!1,references:[],secteurs:[]},argiles:{niveau:"faible",code:"B1",expose:!0},basias:[{identifiant:"BSSS0600124",nom_usuel:"Garage Collet Automobiles",raison_sociale:"SARL COLLET AUTOMOBILES",adresse:"18 Avenue Jean Mdecin, 06000 Nice",code_insee:"06088",commune:"Nice",activite_principale:"Rparation et commerce de vhicules automobiles",distance_metres:85,statut_site:"Activit termine"}],basol:[],recul_trait_cote:{applicable:!0,expose:!1,libelle:"Commune littorale  bien non situ en zone de recul"}},catnat:[{libRisqueJo:"Inondations et coules de boue",datDebutEvt:"1994-11-04",datFinEvt:"1994-11-10",datPubliArrete:"1994-12-15",codeInsee:"06088",nomCommune:"Nice"},{libRisqueJo:"Inondations, coules de boue et mouvements de terrain",datDebutEvt:"2000-10-11",datFinEvt:"2000-10-14",datPubliArrete:"2000-12-29",codeInsee:"06088",nomCommune:"Nice"},{libRisqueJo:"Inondations et coules de boue",datDebutEvt:"2015-10-03",datFinEvt:"2015-10-05",datPubliArrete:"2015-11-20",codeInsee:"06088",nomCommune:"Nice"},{libRisqueJo:"Mouvements de terrain diffrentiels conscutifs  la scheresse et  la rhydratation des sols",datDebutEvt:"2017-01-01",datFinEvt:"2017-12-31",datPubliArrete:"2021-10-01",codeInsee:"06088",nomCommune:"Nice"}],prescriptions:[{type:"Constructibilit limite",description:"En zone Ri2, les constructions nouvelles doivent intgrer des mesures de protection contre les inondations. Le premier plancher habitable doit tre situ  50 cm minimum au-dessus du terrain naturel.",page_reglement:12},{type:"Diagnostic pralable obligatoire",description:"Tout projet de construction ou d'amnagement en zone de prescription doit faire l'objet d'une tude hydrogologique pralable soumise  l'approbation du service instructeur.",page_reglement:18}]};function DR(){const i=cf();return j.jsxs("div",{className:"min-h-screen bg-slate-50 overflow-x-hidden",children:[j.jsx("header",{className:"bg-white border-b border-border sticky top-0 z-40 no-print",children:j.jsxs("div",{className:"max-w-5xl mx-auto px-4 h-14 flex items-center justify-between",children:[j.jsxs("button",{onClick:()=>i("/"),className:"flex items-center gap-2 text-sm text-gray-600 hover:text-navy-900 transition-colors",children:[j.jsx(Rd,{className:"h-4 w-4"}),"Retour"]}),j.jsxs("div",{className:"flex items-center gap-2",children:[j.jsx(Q4,{className:"h-4 w-4 text-navy-700"}),j.jsx("span",{className:"font-bold text-navy-900 text-sm",children:"Exemple de document ERP"})]}),j.jsxs(_a,{size:"sm",className:"bg-edl-700 hover:bg-edl-800",onClick:()=>i("/generer"),children:[j.jsx(rf,{className:"h-4 w-4 mr-1"}),"Gnrer le mien"]})]})}),j.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-6 space-y-5",children:[j.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4 bg-navy-900 text-white rounded-xl px-5 py-4",children:[j.jsxs("div",{className:"flex-1",children:[j.jsx("p",{className:"font-bold text-sm",children:"Document d'exemple   titre illustratif"}),j.jsx("p",{className:"text-xs text-navy-200 mt-0.5",children:"Certains champs sont masqus. Votre ERP contiendra toutes les informations compltes relatives  votre bien. Donnes reprsentatives d'un bien  Nice (06000)."})]}),j.jsxs(_a,{className:"bg-edl-700 hover:bg-edl-800 shrink-0 font-semibold",onClick:()=>i("/generer"),children:["tablir mon ERP  9,99 ",j.jsx(rf,{className:"h-4 w-4"})]})]}),j.jsx(zx,{document:UR,demoMode:!0}),j.jsxs("div",{className:"bg-edl-700 text-white rounded-xl px-5 py-6 text-center",children:[j.jsx("p",{className:"font-bold text-base mb-1",children:"Votre bien est-il expos  ces risques ?"}),j.jsx("p",{className:"text-red-100 text-sm mb-4",children:"Gnrez votre ERP en 2 minutes  donnes officielles, accept par les notaires et agences."}),j.jsxs(_a,{size:"lg",className:"bg-white text-edl-700 hover:bg-gray-100 font-bold",onClick:()=>i("/generer"),children:["tablir mon tat des risques  9,99 ",j.jsx(rf,{className:"h-5 w-5"})]})]})]})]})}function PR(){return j.jsx(JE,{children:j.jsxs(TE,{children:[j.jsx(Ud,{path:"/",element:j.jsx(bT,{})}),j.jsx(Ud,{path:"/generer",element:j.jsx(uF,{})}),j.jsx(Ud,{path:"/apercu",element:j.jsx(TR,{})}),j.jsx(Ud,{path:"/dashboard",element:j.jsx(MR,{})}),j.jsx(Ud,{path:"/exemple",element:j.jsx(DR,{})}),j.jsx(Ud,{path:"*",element:j.jsx(SE,{to:"/",replace:!0})})]})})}IS.createRoot(document.getElementById("root")).render(j.jsx(We.StrictMode,{children:j.jsx(PR,{})}));export{oa as _,NR as c,K2 as g};
